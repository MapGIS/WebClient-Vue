!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=197)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=window.Zondy=window.Zondy||{};r.Event=r.Event||{},r.Object=r.Object||{},r.Object.ContourAnalyse=r.Object.ContourAnalyse||{},r.Object.Theme=r.Object.Theme||{},r.Theme=r.Theme||{},r.Service=r.Service||{},r.Socket=r.Socket||{},r.Enum=r.Enum||{},r.Enum.Net=r.Enum.Net||{},r.Enum.Theme=r.Enum.Theme||{},r.Enum.Map=r.Enum.Map||{},r.Catalog=r.Catalog||{},r.Util=r.Util||{},r.CRS=r.CRS||{},r.Map=r.Map||{},r.xsd=r.xsd||{},r.XLink=r.XLink||{},r.extent=r.extent||{},r.xml=r.xml||{},r.array=r.array||{},r.string=r.string||{},r.LevelRenderer=r.LevelRenderer||{},r.LevelRenderer.Tool=r.LevelRenderer.Tool||{},r.LevelRenderer.Animation=r.LevelRenderer.Animation||{},r.Feature=r.Feature||{},r.Feature.ShapeParameters=r.Feature.ShapeParameters||{},r.Geometry=r.Geometry||{},r.Client=r.Client||{},r.Source=r.Source||{},r.GeomInteraction=r.GeomInteraction||{},r.Format=r.Format||{},r.Control=r.Control||{},r.OGC=r.OGC||{},r.DataStore=r.DataStore||{},r.DataStore.ElasticSearch=r.DataStore.ElasticSearch||{},r.DataStore.PostGIS=r.DataStore.PostGIS||{},r.DataStore.Hbase=r.DataStore.Hbase||{},r.DataStore.MongoDB=r.DataStore.MongoDB||{},r.CloudDisk=r.CloudDisk||{},r.CloudDisk.GisCore=r.CloudDisk.GisCore||{},r.CloudDisk.Model=r.CloudDisk.Model||{},r.IGServerX=r.IGServerX||{},r.IGServerX.Vector=r.IGServerX.Vector||{},e.Zondy=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);var o=function(t,e){if(t=t||{},e){for(var n in e){var r=e[n];void 0!==r&&(t[n]=r)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},s=function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function t(e,n){var i,o=Object.prototype.toString;for(i in e=e||{},n)n.hasOwnProperty(i)&&("object"===r(n[i])?("[object Null]"!==o.call(e[i])&&"[object Undefined]"!==o.call(e[i])||(e[i]="[object Array]"===o.call(n[i])?[]:{}),t(e[i],n[i])):e[i]=n[i],""!==n[i]&&null!==n[i]||(e[i]=n[i]));return e},u=function(t,e){var n;if(t=t||{},e)for(var r in t)void 0!==(n=e[r])&&(t[r]=n)},l=function(t,e,n){var r;if(t=t||{},e)for(var i in e)void 0!==(r=e[i])&&"function"!=typeof r&&n.indexOf(i)<0&&(t[i]=r)},c=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===r(t[e])&&t[e]instanceof Array){for(var n in t[e])t[e][n].destroy&&t[e][n].destroy();t[e].length=0}else"object"===r(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},h=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var r=arguments[e];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;t.push(r)}return t},f=function(t){return!(!t||1!==t.nodeType)},p=function(t,e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1);return t},d=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},y=function(t,e,n,r,i,o,s,a){e&&(t.id=e),n&&(t.style.left=n.x+"px",t.style.top=n.y+"px"),r&&(t.style.width=r.w+"px",t.style.height=r.h+"px"),i&&(t.style.position=i),o&&(t.style.border=o),s&&(t.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},g=function(t,e){t=t||{};var n="function"==typeof window.Event&&e instanceof window.Event;for(var r in e)(void 0===t[r]||!n&&e.hasOwnProperty&&e.hasOwnProperty(r)&&!t.hasOwnProperty(r))&&(t[r]=e[r]);return!n&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},v=function(t){var e=[];for(var n in t){var i=t[n];if(null!=i&&"function"!=typeof i){var o;if("object"===(void 0===i?"undefined":r(i))&&i.constructor===Array){for(var s,a=[],u=0,l=i.length;u<l;u++)s=i[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o=a.join(",")}else o=encodeURIComponent(i);e.push(encodeURIComponent(n)+"="+o)}}return e.join("&")},m=function(t){var e=[];for(var n in t){var i=t[n];if(null!=i&&"function"!=typeof i){var o;if("object"===(void 0===i?"undefined":r(i))&&i.constructor===Array){for(var s,a=[],u=0,l=i.length;u<l;u++)s=i[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o=a.join(",")}else o=encodeURIComponent(i);e.push(encodeURIComponent(n)+":"+o)}}return e.join(";")},_=function(t,e){var n=t;if(e){var r=(t+" ").split(/[?&]/);n+=" "===r.pop()?e:r.length?"&"+e:"?"+e}return n},b=function(t){var e="";if((t=null===t||void 0===t?window.location.href:t).indexOf("?")>-1){var n=t.indexOf("?")+1;t.indexOf("#");var r=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(n,r)}for(var i={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var u=o[s].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),i[l]=c}}return i},S=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),x=function(){var t,e="",n="",r="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(e="msie",t=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(e="chrome",t=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(e="firefox",t=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(e="opera",t=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(e="safari",t=i.match(/version\/([\d.]+)/)),n=t?t[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?r="apple":i.indexOf("android")>-1&&(n=(t=i.match(/version\/([\d.]+)/))?t[1]:"",r="android"),{name:e,version:n,device:r}}(),w=function(){return x},P=function(){var t=!0,e=w();return document.createElement("canvas").getContext?("firefox"===e.name&&parseFloat(e.version)<5&&(t=!1),"safari"===e.name&&parseFloat(e.version)<4&&(t=!1),"opera"===e.name&&parseFloat(e.version)<10&&(t=!1),"msie"===e.name&&parseFloat(e.version)<9&&(t=!1)):t=!1,t}(),C=function(){return P},O=function(t){if(!t)return!0;var e=t.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===e)return!0;var i,o=i=t.substring(0,e),s=n.substring(r+2);r=s.indexOf("/");var a=s.indexOf(":"),u=s.substring(0,r),l=document.location.protocol;if(-1!==a||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,f=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),f+=":"+("http:"===i.toLowerCase()?80:443)),h===document.domain&&f===u},T=function t(e){var n=e;if(null==n)return null;switch(n.constructor){case String:return n=(n=(n=(n=(n=(n=(n='"'+n.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var i=[],o=0,s=n.length;o<s;o++)i.push(t(n[o]));return"["+i.join(",")+"]";case Number:return isFinite(n)?String(n):null;case Boolean:return String(n);case Date:return"{'__type':\"System.DateTime\",'Year':"+n.getFullYear()+",'Month':"+(n.getMonth()+1)+",'Day':"+n.getDate()+",'Hour':"+n.getHours()+",'Minute':"+n.getMinutes()+",'Second':"+n.getSeconds()+",'Millisecond':"+n.getMilliseconds()+",'TimezoneOffset':"+n.getTimezoneOffset()+"}";default:if("object"===(void 0===n?"undefined":r(n))){if(n.length){for(i=[],o=0,s=n.length;o<s;o++)i.push(t(n[o]));return"["+i.join(",")+"]"}var a=[];for(var u in n)"function"!=typeof n[u]&&"CLASS_NAME"!==u&&a.push("'"+u+"':"+t(n[u]));return a.length>0?"{"+a.join(",")+"}":"{}"}return n.toString()}},E=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},L=function(t,e){if(t=t||{},e)for(var n in e){var r=e[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(t[n]=r)}return t},M=function(t,e,n){if(t=t||{},e)for(var r in e){var i=!1;if(n&&n.length)for(var o=0,s=n.length;o<s;o++)if(r===n[o]){i=!0;break}if(!0!==i){var a=e[r];void 0!==a&&"CLASS_NAME"!==r&&"function"!=typeof a&&(t[r]=a)}}return t},I=function t(e){if(null===e||"object"!==(void 0===e?"undefined":r(e)))return e;if(e instanceof Date)return(n=new Date).setTime(e.getTime()),n;if(e instanceof Array)return n=e.slice(0);if(e instanceof Object){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},N=function(){for(var t="",e=1;e<=32;e++){t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-")}return t},A=function(t,e){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,r)}},R=function(t,e){return function(n){return t.call(e,n||window.event)}},D=function(t){switch(t.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},k=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return j(t)})},j=function(t){var e=escape(t).split("%"),n="";""!=e[0]&&(n=e[0]);for(var r=1;r<e.length;r++)"u"==e[r].substring(0,1)?n+=B(F(e[r].substring(1,5))):n+="%"+e[r];return n},F=function(t){for(var e,n="",r="",i=0;i<t.length;i++)n=t.charAt(i),e="0123456789ABCDEF".indexOf(n),r+=G(e);return r},B=function(t){var e="",n="",r="";if(16==t.length){n="1110"+t.substring(0,4),n+="10"+t.substring(4,10),n+="10"+t.substring(10,16);for(var i="0123456789ABCDEF",o=0;o<3;o++)e+="%",r=n.substring(8*o,8*(o+1)),e+=i.charAt(U(r.substring(0,4))),e+=i.charAt(U(r.substring(4,8)));return e}return""},U=function(t){var e=0;if(4==t.length){for(var n=0;n<4;n++)e+=t.charAt(n)*Math.pow(2,3-n);return e}return-1},G=function(t){for(var e="",n=0,r=0;r<4;r++)t>=(n=Math.pow(2,3-r))?(e+="1",t-=n):e+="0";return e},q=function t(e,n){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(n))for(var r in n)e[r]?e[r]=t(e[r],n[r]):e[r]=n[r];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(n)?e.concat(n):n;return e},z=function(t,e,n,i){e.hasOwnProperty(n)&&("object"!=r(t[n])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[n])]?!i&&n in t||(t[n]=e[n]):V(t[n],e[n],i))},V=function(t,e,n){for(var r in e)z(t,e,r,n);return t},Z=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=function t(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=0;r<e.length;r++)s(this,new e[r](n))},i=0;i<e.length;i++){var o=e[i];s(r,o),s(r.prototype,o.prototype),s(r.prototype,new o)}return r;function s(t,e){var n=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r++){var i=n[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var o=Object.getOwnPropertyDescriptor(e,i);window.ActiveXObject?Object.defineProperty(t,i,o||{}):Object.defineProperty(t,i,o)}}}},W=function(t,e){var n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")},H=function(t,e,n,r){return Object.keys(t).forEach(function(i){var o=t[i],s=i;if(J(o)&&"function"!=typeof o){if(n&&n.indexOf(i)>-1){var a={};"geometry"===i&&("polygon"===o.type&&(a.rings=t[i].rings),"multipoint"===o.type&&(a.points=t[i].points),"point"===o.type&&t[i].x&&t[i].y&&(a.y=t[i].y,a.x=t[i].x),"polyline"===o.type&&(a.paths=t[i].paths),a.spatialReference=t[i].spatialReference,o=a,e+="&geometryType=esriGeometry"+t[i].type.charAt(0).toUpperCase()+t[i].type.slice(1)),o=JSON.stringify(o)}r&&r.hasOwnProperty(i)&&(s=r[i]),e+="&"+s+"="+o}}),e},X=function(t,e,n){return Object.keys(e).forEach(function(r){if(n&&n.indexOf(r)>-1){var i=r;i=r.substring(0,i.length-"Features".length)+"s",t+=i+"="+encodeURIComponent(e[r]instanceof Object?JSON.stringify(e[r]):e[r])+"&"}else t+=r+"="+e[r]+"&"}),t},Y=function(t,e,n){return new t({longitude:n[0],latitude:n[1],z:n[2],spatialReference:I(e.spatialReference)})},Q=function t(e){for(var n=0;n<e.length;n++)e[n]instanceof Array?t(e[n]):e[n]instanceof Object&&(e[n]=e[n].toArray());return e},J=function(t){return""!==t&&null!==t&&void 0!==t};e.extend=o,e.isArray=s,e.extendDeep=a,e.copy=u,e.copyExcluce=l,e.reset=c,e.getElement=h,e.isElement=f,e.removeItem=p,e.indexOf=d,e.modifyDOMElement=y,e.applyDefaults=g,e.getParameterString=v,e.getWFParameterString=m,e.urlAppend=_,e.getParameters=b,e.IS_GECKO=S,e.Browser=x,e.getBrowser=w,e.isSupportCanvas=P,e.supportCanvas=C,e.isInTheSameDomain=O,e.toJSON=T,e.transformResult=E,e.copyAttributes=L,e.copyAttributesWithClip=M,e.cloneObject=I,e.newGuid=N,e.bind=A,e.bindAsEventListener=R,e.getTopAnalysisResult=D,e.ChineseToUtf8=k,e.DeepMerge=q,e.merge=V,e.mixin=Z,e.createCanvasContext2D=W,e.formatQuery=H,e.formatEdits=X,e.returnPoint=Y,e.formatPoints=Q,e.notNULL=J,i.Zondy.Util.extend=o,i.Zondy.Util.isArray=s,i.Zondy.Util.extendDeep=a,i.Zondy.Util.copy=u,i.Zondy.Util.copyExcluce=l,i.Zondy.Util.reset=c,i.Zondy.Util.getElement=h,i.Zondy.Util.isElement=f,i.Zondy.Util.removeItem=p,i.Zondy.Util.indexOf=d,i.Zondy.Util.modifyDOMElement=y,i.Zondy.Util.applyDefaults=g,i.Zondy.Util.getParameterString=v,i.Zondy.Util.getWFParameterString=m,i.Zondy.Util.urlAppend=_,i.Zondy.Util.getParameters=b,i.Zondy.IS_GECKO=S,i.Zondy.Browser=x,i.Zondy.Util.getBrowser=w,i.Zondy.Util.isSupportCanvas=P,i.Zondy.Util.supportCanvas=C,i.Zondy.Util.isInTheSameDomain=O,i.Zondy.Util.toJSON=T,i.Zondy.Util.transformResult=E,i.Zondy.Util.copyAttributes=L,i.Zondy.Util.copyAttributesWithClip=M,i.Zondy.Util.cloneObject=I,i.Zondy.Util.newGuid=N,i.Zondy.Util.bind=A,i.Zondy.Util.bindAsEventListener=R,i.Zondy.Util.getTopAnalysisResult=D,i.Zondy.Util.ChineseToUtf8=k,i.Zondy.Util.DeepMerge=q,i.Zondy.Util.merge=V,i.Zondy.Util.mixin=Z,i.Zondy.Util.createCanvasContext2D=W,i.Zondy.Util.formatQuery=H,i.Zondy.Util.formatEdits=X,i.Zondy.Util.returnPoint=Y,i.Zondy.Util.returnPoint=Q,i.Zondy.Util.returnPoint=J},function(t,e){t.exports=L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgsServiceBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),o=n(128);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{};var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.CLASS_NAME="Zondy.IgsServiceBase",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.CommonServiceBase),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){this.request({method:t&&t.method?t.method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){(t=(0,i.transformResult)(t)).succeed?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events&&this.events.triggerEvent("processFailed",{result:t})}}]),e}();e.IgsServiceBase=s,Zondy.Service.IgsServiceBase=s},function(t,e,n){var r=2*Math.PI,i=n(29);t.exports=function(t){return Math.abs(t)<=3.14159265359?t:t-i(t)*r}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=void 0;var i=n(0);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=s,i.Zondy.Enum.XClsType=s;var a={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=a,i.Zondy.Enum.VectClsType=a;var u={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=u,i.Zondy.Enum.FeatureType=u;var l={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=l,i.Zondy.Enum.FontShape=l;var c={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=c,i.Zondy.Enum.LabelLinType=c;var h={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=h,i.Zondy.Enum.LabelRegType=h;var f={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=f,i.Zondy.Enum.LabelPntType=f;var p={Auto:0,NoRep:1,OnStep:2};e.RepeatType=p,i.Zondy.Enum.RepeatType=p;var d={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=d,i.Zondy.Enum.LabelSpreadType=d;var y={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=y,i.Zondy.Enum.LineConstrain=y;var g={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=g,i.Zondy.Enum.EightDirType=g;var v={Reg:0,Arc:1,All:2};e.ISShowArc=v,i.Zondy.Enum.ISShowArc=v;var m=(o(r={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},"SysModeMinDis","SysModeMinDis"),o(r,"SysModeSysRecommend","SysModeSysRecommend"),r);e.NetAnalyType=m,i.Zondy.Enum.Net.NetAnalyType=m;var _={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=_,i.Zondy.Enum.Net.NetElemType=_;var b={Adjust:0,NoAdjust:1};e.CLinAdjustType=b,i.Zondy.Enum.Theme.CLinAdjustType=b;var S={Round:0,Square:1,Butt:2};e.CLinHeadType=S,i.Zondy.Enum.Theme.CLinHeadType=S;var x={Round:0,Square:1,Butt:2};e.CLinJointType=x,i.Zondy.Enum.Theme.CLinJointType=x;var w={Byrule:0,Bypoint:1};e.CLinStyleMakeType=w,i.Zondy.Enum.Theme.CLinStyleMakeType=w;var P={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=P,i.Zondy.Enum.Theme.CItemType=P;var C={Doc:"mapType",Tile:"tileType"};e.MapType=C,i.Zondy.Enum.Map.MapType=C;var O={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=O,i.Zondy.Enum.Map.LayerStatusType=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(40),a=n(51),u=n(9);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.id=null,n.style={},n.highlightStyle=null,n.parent=null,n.__dirty=!0,n.__clipShapes=[],n.invisible=!1,n.ignore=!1,n.zlevel=0,n.draggable=!1,n.clickable=!1,n.hoverable=!0,n.z=0,n.refOriginalPosition=[0,0],n.refDataID=null,n.isHoverByRefDataID=!1,n.refDataHoverGroup=null,n.dataInfo=null,(0,o.extend)(n,t),n.id=n.id||(0,o.newGuid)(),n.CLASS_NAME="Zondy.LevelRenderer.Shape",n.getTansform=function(){var t=[];return function(e,n){var r=[e,n];return this.needTransform&&this.transform&&(u.SUtil.Util_matrix.invert(t,this.transform),u.SUtil.Util_matrix.mulVector(r,t,[e,n,1]),e===r[0]&&n===r[1]&&this.updateNeedTransform()),r}}(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.mixin)(s.Eventful,a.Transformable)),r(e,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),t.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),e&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"===this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=n.length;r<i;r++){var o=e[n[r][0]],s=n[r][1];void 0!==o&&(t[s]=o)}}},{key:"doClip",value:function(t){var e=u.SUtil.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){var i=r.transform;u.SUtil.Util_matrix.invert(e,i),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}if(t.beginPath(),r.buildPath(t,r.style),t.clip(),r.needTransform){var o=e;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(t,e,n){var r={};for(var i in t)r[i]=t[i];var o=u.SUtil.Util_color.getHighlightColor();for(var s in"stroke"!==t.brushType?(r.strokeColor=o,r.lineWidth=t.lineWidth||1,r.brushType="both"):"stroke"!==n?(r.strokeColor=o,r.lineWidth=t.lineWidth||1):r.strokeColor=e.strokeColor||u.SUtil.Util_color.mix(t.strokeColor,u.SUtil.Util_color.toRGB(o)),e)void 0!==e[s]&&(r[s]=e[s]);return r}},{key:"getHighlightZoom",value:function(){return"text"!==this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){}},{key:"getRect",value:function(t){}},{key:"isCover",value:function(t,e){var n=this.getTansform(t,e);t=n[0],e=n[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height&&u.SUtil.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,n,r){if(void 0!==n.text&&!1!==n.text){var i=n.textColor||n.color||n.strokeColor;t.fillStyle=i;var o,s,a,u,l=10,c=n.textPosition||this.textPosition||"top",h=[];switch(h=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var f=(r||n).__rect||this.getRect(r||n);switch(c){case"inside":a=f.x+f.width/2,u=f.y+f.height/2,o="center",s="middle","stroke"!==n.brushType&&i===n.color&&(t.fillStyle="#fff");break;case"left":a=f.x-l,u=f.y+f.height/2,o="end",s="middle";break;case"right":a=f.x+f.width+l,u=f.y+f.height/2,o="start",s="middle";break;case"top":a=f.x+f.width/2,u=f.y-l,o="center",s="bottom";break;case"bottom":a=f.x+f.width/2,u=f.y+f.height+l,o="center",s="top"}}break;case"start":case"end":var p=0,d=0,y=0,g=0;if(void 0!==n.pointList){var v=n.pointList;if(v.length<2)return;var m=v.length;switch(c){case"start":p=v[0][0]+h[0],d=v[1][0]+h[0],y=v[0][1]+h[1],g=v[1][1]+h[1];break;case"end":p=v[m-2][0]+h[0],d=v[m-1][0]+h[0],y=v[m-2][1]+h[1],g=v[m-1][1]+h[1]}}else p=n.xStart+h[0]||0,d=n.xEnd+h[0]||0,y=n.yStart+h[1]||0,g=n.yEnd+h[1]||0;switch(c){case"start":o=p<d?"end":"start",s=y<g?"bottom":"top",a=p,u=y;break;case"end":o=p<d?"start":"end",s=y<g?"top":"bottom",a=d,u=g}l-=4,p&&d&&p!==d?a-="end"===o?l:-l:o="center",y!==g?u-="bottom"===s?l:-l:s="middle";break;case"specific":a=n.textX||0,u=n.textY||0,o="start",s="middle"}n.labelXOffset&&!isNaN(n.labelXOffset)&&(a+=n.labelXOffset),n.labelYOffset&&!isNaN(n.labelYOffset)&&(u+=n.labelYOffset),null!=a&&null!=u&&e._fillText(t,n.text,a,u,n.textFont,n.textAlign||o,n.textBaseline||s)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,n){t.globalAlpha="fill"===e?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"===e?void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity:void 0===n.opacity?1:n.opacity}}],[{key:"_fillText",value:function(t,n,r,i,o,s,a){o&&(t.font=o),t.textAlign=s,t.textBaseline=a;var l=e._getTextRect(n,r,i,o,s,a);n=(n+"").split("\n");var c=u.SUtil.Util_area.getTextHeight("ZH",o);switch(a){case"top":i=l.y;break;case"bottom":i=l.y+c;break;default:i=l.y+c/2}for(var h=0,f=n.length;h<f;h++)t.fillText(n[h],r,i),i+=c}},{key:"_getTextRect",value:function(t,e,n,r,i,o){var s=u.SUtil.Util_area.getTextWidth(t,r),a=u.SUtil.Util_area.getTextHeight("ZH",r);switch(t=(t+"").split("\n"),i){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(o){case"top":break;case"bottom":n-=a*t.length;break;default:n-=a*t.length/2}return{x:e,y:n,width:s,height:a*t.length}}}]),e}();e.Shape=l,i.Zondy.LevelRenderer.Shape=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point2D=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(18);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.x=void 0!==t?t:null,o.y=void 0!==n?n:null,o.nearDis=void 0!==i.nearDis?parseFloat(i.nearDis):null,o.CLASS_NAME="Zondy.Object.Point2D",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Tangram),r(e,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null===this.x||null===this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),e}();e.Point2D=o,Zondy.Object.Point2D=o},function(t,e,n){"use strict";var r=n(164),i=n(336),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},extend:function(t,e,n){return l(e,function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(173),s=n(91),a=n(174),u=n(52),l=n(175),c=n(176),h=n(177),f=n(178),p=n(179),d=n(26),y=n(53);var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"SUtil_smoothBezier",value:function(e,n,r,i,o){o&&2===o||(o=[0,0]);var s,a,u=o,l=[],c=[],h=[],f=[],p=!!i;if(p){s=[1/0,1/0],a=[-1/0,-1/0];for(var d=e.length,y=0;y<d;y++)t.Util_vector.min(s,s,[e[y][0]+u[0],e[y][1]+u[1]]),t.Util_vector.max(a,a,[e[y][0]+u[0],e[y][1]+u[1]]);t.Util_vector.min(s,s,i[0]),t.Util_vector.max(a,a,i[1])}for(var g=e.length,v=0;v<g;v++){var m=[e[v][0]+u[0],e[v][1]+u[1]],_=void 0,b=void 0;if(r)_=[e[v?v-1:g-1][0]+u[0],e[v?v-1:g-1][1]+u[1]],b=[e[(v+1)%g][0]+u[0],e[(v+1)%g][1]+u[1]];else{if(0===v||v===g-1){l.push([e[v][0]+u[0],e[v][1]+u[1]]);continue}_=[e[v-1][0]+u[0],e[v-1][1]+u[1]],b=[e[v+1][0]+u[0],e[v+1][1]+u[1]]}t.Util_vector.sub(c,b,_),t.Util_vector.scale(c,c,n);var S=t.Util_vector.distance(m,_),x=t.Util_vector.distance(m,b),w=S+x;0!==w&&(S/=w,x/=w),t.Util_vector.scale(h,c,-S),t.Util_vector.scale(f,c,x);var P=t.Util_vector.add([],m,h),C=t.Util_vector.add([],m,f);p&&(t.Util_vector.max(P,P,s),t.Util_vector.min(P,P,a),t.Util_vector.max(C,C,s),t.Util_vector.min(C,C,a)),l.push(P),l.push(C)}return r&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,n,r,i){i&&2===i||(i=[0,0]);for(var o=i,s=e.length,a=[],u=0,l=1;l<s;l++)u+=t.Util_vector.distance([e[l-1][0]+o[0],e[l-1][1]+o[1]],[e[l][0]+o[0],e[l][1]+o[1]]);var c=u/5;c=c<s?s:c;for(var h=0;h<c;h++){var f=h/(c-1)*(n?s:s-1),p=Math.floor(f),d=f-p,y=void 0,g=[e[p%s][0]+o[0],e[p%s][1]+o[1]],v=void 0,m=void 0;n?(y=[e[(p-1+s)%s][0]+o[0],e[(p-1+s)%s][1]+o[1]],v=[e[(p+1)%s][0]+o[0],e[(p+1)%s][1]+o[1]],m=[e[(p+2)%s][0]+o[0],e[(p+2)%s][1]+o[1]]):(y=[e[0===p?p:p-1][0]+o[0],e[0===p?p:p-1][1]+o[1]],v=[e[p>s-2?s-1:p+1][0]+o[0],e[p>s-2?s-1:p+1][1]+o[1]],m=[e[p>s-3?s-1:p+2][0]+o[0],e[p>s-3?s-1:p+2][1]+o[1]]);var _=d*d,b=d*_;a.push([S(y[0],g[0],v[0],m[0],d,_,b),S(y[1],g[1],v[1],m[1],d,_,b)])}return a;function S(t,e,n,r,i,o,s){var a=.5*(n-t),u=.5*(r-e);return(2*(e-n)+a+u)*s+(-3*(e-n)-2*a-u)*o+a*i+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,n,r,i,o,s){var a=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return a[0]=o,a[1]=o,s&&s instanceof Array?t.setLineDash(s):t.setLineDash(a),t.moveTo(e,n),void t.lineTo(r,i);var u=r-e,l=i-n,c=Math.floor(Math.sqrt(u*u+l*l)/o);u/=c,l/=c;for(var h=!0,f=0;f<c;++f)h?t.moveTo(e,n):t.lineTo(e,n),h=!h,e+=u,n+=l;t.lineTo(r,i)}}]),t}();g.Util_area=new o.Area,g.Util_color=new s.Color,g.Util_computeBoundingBox=new a.ComputeBoundingBox,g.Util_curve=new u.Curve,g.Util_env=new l.Env,g.Util_event=new c.Event,g.Util_http=new h.Http,g.Util_math=new f.Math,g.Util_matrix=new p.Matrix,g.Util=new d.Util,g.Util_vector=new y.Vector,e.SUtil=g,i.Zondy.LevelRenderer.SUtil=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,o.extend)(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null,this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:""}return r(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(i.Zondy.Util.isArray(t.ip))for(var n=0;n<t.ip.length;n++){e=new Array;var r=null;r=(0,o.isArray)(t.port)?void 0!==t.port[n]?t.port[n]:"6163":void 0!==t.port?t.port:"6163";var s=null;s=(0,o.isArray)(t.partUrl)?void 0!==t.partUrl[n]?t.partUrl[n]:null:void 0!==t.partUrl?t.partUrl:null,""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip[n]+":"+r:t.domainStr=t.domain,e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+s).trim()))}else""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port:t.domainStr=t.domain,e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();e.ServiceBase=s,i.Zondy.Service.ServiceBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=void 0;var r=n(64),i=n(253),o=n(0),s=n(44),a=n(254),u=n(255),l=n(116),c=n(111),h=n(117),f=n(256),p=n(45),d=n(65),y=n(66),g=n(112),v=n(110),m=n(5),_=n(118),b=n(119),S=n(46),x=n(47),w=n(68),P=n(67),C=n(69),O=n(114),T=n(115),E=n(113),L=n(257),M=n(7),I=n(121),N=n(258),A=n(19),R=n(18),D=n(259),k=n(120),j=n(1);e.AnyLine=r.AnyLine,e.Arc=i.Arc,e.Zondy=o.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=a.CAttDataRow,e.CDisplayStyle=u.CDisplayStyle,e.CDisplayStyleExtend=l.CDisplayStyleExtend,e.CDynNoteInfo=c.CDynNoteInfo,e.CGDBInfo=h.CGDBInfo,e.Circle=f.Circle,e.CLineInfo=p.CLineInfo,e.CPointInfo=d.CPointInfo,e.CRegionInfo=y.CRegionInfo,e.DynNoteLableType=g.DynNoteLableType,e.DynShowStyle=v.DynShowStyle,e.XClsType=m.XClsType,e.VectClsType=m.VectClsType,e.FeatureType=m.FeatureType,e.FontShape=m.FontShape,e.LabelLinType=m.LabelLinType,e.LabelRegType=m.LabelRegType,e.LabelPntType=m.LabelPntType,e.RepeatType=m.RepeatType,e.LabelSpreadType=m.LabelSpreadType,e.LineConstrain=m.LineConstrain,e.EightDirType=m.EightDirType,e.ISShowArc=m.ISShowArc,e.NetAnalyType=m.NetAnalyType,e.NetElemType=m.NetElemType,e.CLinAdjustType=m.CLinAdjustType,e.CLinHeadType=m.CLinHeadType,e.CLinJointType=m.CLinJointType,e.CLinStyleMakeType=m.CLinStyleMakeType,e.CItemType=m.CItemType,e.MapType=m.MapType,e.LayerStatusType=m.LayerStatusType,e.Feature=_.Feature,e.FeatureGeometry=b.FeatureGeometry,e.FeatureGraphicBase=S.FeatureGraphicBase,e.FeatureSet=x.FeatureSet,e.GLine=w.GLine,e.GPoint=P.GPoint,e.GRegion=C.GRegion,e.LabelLinInfo=O.LabelLinInfo,e.LabelRegInfo=T.LabelRegInfo,e.LablePntInfo=E.LablePntInfo,e.MultiPolygon=L.MultiPolygon,e.Point2D=M.Point2D,e.Polygon=I.Polygon,e.PolyLine=N.PolyLine,e.Rectangle=A.Rectangle,e.Tangram=R.Tangram,e.VectCls=D.VectCls,e.WebGraphicsInfo=k.WebGraphicsInfo,e.extend=j.extend,e.isArray=j.isArray,e.extendDeep=j.extendDeep,e.copy=j.copy,e.copyExcluce=j.copyExcluce,e.reset=j.reset,e.getElement=j.getElement,e.isElement=j.isElement,e.removeItem=j.removeItem,e.indexOf=j.indexOf,e.modifyDOMElement=j.modifyDOMElement,e.applyDefaults=j.applyDefaults,e.getParameterString=j.getParameterString,e.getWFParameterString=j.getWFParameterString,e.urlAppend=j.urlAppend,e.getParameters=j.getParameters,e.IS_GECKO=j.IS_GECKO,e.Browser=j.Browser,e.getBrowser=j.getBrowser,e.isSupportCanvas=j.isSupportCanvas,e.supportCanvas=j.supportCanvas,e.isInTheSameDomain=j.isInTheSameDomain,e.toJSON=j.toJSON,e.transformResult=j.transformResult,e.copyAttributes=j.copyAttributes,e.copyAttributesWithClip=j.copyAttributesWithClip,e.cloneObject=j.cloneObject,e.newGuid=j.newGuid,e.bind=j.bind,e.bindAsEventListener=j.bindAsEventListener,e.getTopAnalysisResult=j.getTopAnalysisResult,e.ChineseToUtf8=j.ChineseToUtf8,e.DeepMerge=j.DeepMerge,e.merge=j.merge,e.mixin=j.mixin,e.createCanvasContext2D=j.createCanvasContext2D,e.formatQuery=j.formatQuery,e.formatEdits=j.formatEdits,e.returnPoint=j.returnPoint,e.formatPoints=j.formatPoints,e.notNULL=j.notNULL},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CTheme=void 0;var r=n(0),i=n(1);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,i.extend)(this,n),this.Name=n&&n.Name?n.Name:null,this.IsBaseTheme=!n||!n.IsBaseTheme||n.IsBaseTheme,this.Visible=!n||!n.Visible||n.Visible};e.CTheme=o,r.Zondy.Object.Theme.CTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFactory=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(54),s=n(94),a=n(55),u=n(185),l=n(56),c=n(186),h=n(187),f=n(95),p=n(96),d=n(188),y=n(189),g=n(97),v=n(93),m=n(57),_=n(190),b=n(191),S=n(1);var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="Zondy.Feature.ShapeFactory"}return r(t,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var n=this.shapeParameters;if(n instanceof o.Point){var r=new Object;r.x=n.x,r.y=n.y,r.r=n.r,r=(0,S.copyAttributesWithClip)(r,n.style,["x","y"]);var i=new p.SmicPoint;return i.style=t.transformStyle(r),i.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(i,n,["x","y","style","highlightStyle"]),i}if(n instanceof s.Line){if(!n.pointList)return null;var x=new Object;x.pointList=n.pointList,x=(0,S.copyAttributesWithClip)(x,n.style,["pointList"]);var w=new g.SmicBrokenLine;return w.style=t.transformStyle(x),w.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(w,n,["pointList","style","highlightStyle"]),w}if(n instanceof a.Polygon){if(!n.pointList)return null;var P=new Object;P.pointList=n.pointList,P=(0,S.copyAttributesWithClip)(P,n.style,["pointList"]);var C=new m.SmicPolygon;return C.style=t.transformStyle(P),C.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(C,n,["pointList","style","highlightStyle"]),C}if(n instanceof u.Rectangle){if(!n.x&&!n.y&!n.width&!n.height)return null;var O=new Object;O.x=n.x,O.y=n.y,O.width=n.width,O.height=n.height,O=(0,S.copyAttributesWithClip)(O,n.style,["x","y","width","height"]);var T=new _.SmicRectangle;return T.style=t.transformStyle(O),T.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(T,n,["x","y","width","height","style","highlightStyle"]),T}if(n instanceof l.Sector){var E=new Object;E.x=n.x,E.y=n.y,E.r=n.r,E.startAngle=n.startAngle,E.endAngle=n.endAngle,n.r0&&(E.r0=n.r0),n.clockWise&&(E.clockWise=n.clockWise),E=(0,S.copyAttributesWithClip)(E,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var L=new b.SmicSector;return L.style=t.transformStyle(E),L.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(L,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),L}if(n instanceof c.Label){var M=new Object;M.x=n.x,M.y=n.y,M.text=n.text,M=(0,S.copyAttributesWithClip)(M,n.style,["x","y","text"]);var I=new d.SmicText;return I.style=t.transformStyle(M),I.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(I,n,["x","y","text","style","highlightStyle"]),I}if(n instanceof h.Image){var N=new Object;N.x=n.x,N.y=n.y,n.image&&(N.image=n.image),n.width&&(N.width=n.width),n.height&&(N.height=n.height),n.sx&&(N.sx=n.sx),n.sy&&(N.sy=n.sy),n.sWidth&&(N.sWidth=n.sWidth),n.sHeight&&(N.sHeight=n.sHeight),N=(0,S.copyAttributesWithClip)(N,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new v.SmicImage;return A.style=t.transformStyle(N),A.highlightStyle=t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(A,n,["x","y","image","width","height","style","highlightStyle"]),A}if(n instanceof f.Circle){var R=new Object;R.x=n.x,R.r=n.r,R.y=n.y,R=(0,S.copyAttributesWithClip)(R,n.style,["x","y","r"]);var D=new y.SmicCircle;return D.style=new t.transformStyle(R),D.highlightStyle=new t.transformStyle(n.highlightStyle),(0,S.copyAttributesWithClip)(D,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),D}return null}}],[{key:"transformStyle",value:function(t){var e={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in t)switch(i){case"fill":r[0]=t[i];break;case"fillColor":e.color=t[i];break;case"stroke":r[1]=t[i];break;case"strokeWidth":e.lineWidth=t[i];break;case"strokeLinecap":e.lineCap=t[i];break;case"strokeLineJoin":e.lineJoin=t[i];break;case"strokeDashstyle":e.lineType=t[i];break;case"pointRadius":e.r=t[i];break;case"label":e.text=t[i];break;case"labelRect":e.labelRect=t[i];break;case"fontColor":e.textColor=t[i];break;case"fontStyle":n[0]=t[i];break;case"fontVariant":n[1]=t[i];break;case"fontWeight":n[2]=t[i];break;case"fontSize":var o="";t[i]&&t[i].toString().indexOf("px")<0&&(o="px"),n[3]=t[i]+o;break;case"fontFamily":n[4]=t[i];break;case"fontOpacity":e.opacity=t[i];break;case"labelPosition":e.textPosition=t[i];break;case"labelAlign":e.textAlign=t[i];break;case"labelBaseline":e.textBaseline=t[i];break;case"labelRotation":e.textRotation=t[i];break;default:e[i]=t[i]}return e.textFont=n.join(" "),!0===r[0]&&!1===r[1]?e.brushType="fill":!1===r[0]&&!0===r[1]?e.brushType="stroke":!0===r[0]&&!0===r[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,n){var r=n||{},i=new u.Rectangle(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&(0,S.copyAttributesWithClip)(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style.radius=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,t.createShape(i)}},{key:"GraphAxis",value:function(t,e,n,r){var i,o=e,u=n||{},l=[],h=[],f=!!u.useXReferenceLine&&u.useXReferenceLine,p=u.axisYTick&&!isNaN(u.axisYTick)?u.axisYTick:0,d=[],y=[];if(0===p){if(y.push([o[0],o[3]-5]),y.push([o[0],o[1]]),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var g=parseInt(u.axis3DParameter),v=[o[0]-g,o[1]+g];u.axisUseArrow?(d.push([v[0]+1.5,v[1]-7.5]),d.push([v[0]-1,v[1]+1]),d.push([v[0]+7.5,v[1]-1.5]),y.push([v[0],v[1]])):y.push([v[0],v[1]]),y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}else{var m=Math.abs(o[1]-o[3])/p,_=o[3];y.push([o[0],_-5]);for(var b=0;b<p;b++){if(y.push([o[0],_]),y.push([o[0]-5,_]),y.push([o[0],_]),f){var x=new s.Line([[o[0],_],[o[2],_]]);x.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},x.clickable=!1,x.hoverable=!1,u.xReferenceLineStyle&&(0,S.copyAttributesWithClip)(x.style,u.xReferenceLineStyle),l.push(t.createShape(x))}_+=m}if(y.push([o[0],o[1]]),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var w=parseInt(u.axis3DParameter),P=[o[0]-w,o[1]+w];u.axisUseArrow?(d.push([P[0]+1.5,P[1]-7.5]),d.push([P[0]-1,P[1]+1]),d.push([P[0]+7.5,P[1]-1.5]),y.push([P[0],P[1]])):y.push([P[0],P[1]]),y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}if(u.axisUseArrow){var C=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],O=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],T=new a.Polygon(C);T.style={fillColor:"#008acd"},(0,S.copyAttributesWithClip)(T.style,u.axisStyle),h.push(t.createShape(T));var E=new a.Polygon(O);if(E.style={fillColor:"#008acd"},(0,S.copyAttributesWithClip)(E.style,u.axisStyle),h.push(t.createShape(E)),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var L=new a.Polygon(d);L.style={fillColor:"#008acd"},(0,S.copyAttributesWithClip)(L.style,u.axisStyle),h.push(t.createShape(L))}}i=y;var M=new s.Line(i);M.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},u.axisStyle&&(0,S.copyAttributesWithClip)(M.style,u.axisStyle),M.clickable=!1,M.hoverable=!1;var I=[t.createShape(M)],N=[];if(u.axisYLabels&&u.axisYLabels.length&&u.axisYLabels.length>0){var A=u.axisYLabels,R=A.length,D=[0,0];if(u.axisYLabelsOffset&&u.axisYLabelsOffset.length&&(D=u.axisYLabelsOffset),1===R){var k=new c.Label(o[0]-5+D[0],o[3]+D[1],A[0]);k.style={labelAlign:"right"},u.axisYLabelsStyle&&(0,S.copyAttributesWithClip)(k.style,u.axisYLabelsStyle),k.clickable=!1,k.hoverable=!1,N.push(t.createShape(k))}else for(var j=o[3],F=Math.abs(o[1]-o[3])/(R-1),B=0;B<R;B++){var U=new c.Label(o[0]-5+D[0],j+D[1],A[B]);U.style={labelAlign:"right"},u.axisYLabelsStyle&&(0,S.copyAttributesWithClip)(U.style,u.axisYLabelsStyle),U.clickable=!1,U.hoverable=!1,N.push(t.createShape(U)),j+=F}}var G=[];if(u.axisXLabels&&u.axisXLabels.length&&u.axisXLabels.length>0){var q=u.axisXLabels,z=q.length,V=[0,0];if(u.axisXLabelsOffset&&u.axisXLabelsOffset.length&&(V=u.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length===z)for(var Z=r.xPositions,W=0;W<z;W++){var H=new c.Label(Z[W]+V[0],o[1]+V[1],q[W]);H.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,S.copyAttributesWithClip)(H.style,u.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,G.push(t.createShape(H))}else if(1===z){var X=new c.Label(o[0]-5+V[0],o[1]+V[0],q[0]);X.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,S.copyAttributesWithClip)(X.style,u.axisXLabelsStyle),X.clickable=!1,X.hoverable=!1,G.push(t.createShape(X))}else for(var Y=o[0],Q=Math.abs(o[2]-o[0])/(z-1),J=0;J<z;J++){var K=new c.Label(Y+V[0],o[1]+V[1],q[J]);K.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,S.copyAttributesWithClip)(K.style,u.axisXLabelsStyle),K.clickable=!1,K.hoverable=!1,G.push(t.createShape(K)),Y+=Q}}return l.concat(I).concat(N).concat(G).concat(h)}},{key:"ShapeStyleTool",value:function(t,e,n,r,i,o){var s=t||{};if(e&&(0,S.copyAttributesWithClip)(s,e),n&&n.length&&void 0!==i&&!isNaN(i)&&i>=0&&n[i]&&(0,S.copyAttributesWithClip)(s,n[i]),r&&r.length&&void 0!==o)for(var a=r,u=a.length,l=parseFloat(o),c=0;c<u;c++)if(a[c].start<=l&&l<a[c].end){(0,S.copyAttributesWithClip)(s,a[c].style);break}return s}}]),t}();e.ShapeFactory=x,i.Zondy.Feature.ShapeFactory=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalysisBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(10),a=n(3);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};n.baseUrl="igs/rest/mrfws";var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.flowID=void 0!==n.flowID?n.flowID:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.ServiceBase),r(e,[{key:"execute",value:function(t,e,n){var r={};if((0,o.copyExcluce)(r,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"===e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!==r)){var i=(0,o.getWFParameterString)(r);null===i&&""===i||(this.partUrl+="&paraValues="+i)}if("post"===e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var s=new Array;if(null!==r)for(var u in r)if(null!==r[u]){var l={};l.Key=u,l.Value=r[u].toString(),s.push(l)}r=s}var c=this.getFullUrl(),h=new a.IgsServiceBase(c,{eventListeners:{scope:this,processCompleted:t,processFailed:n}});"post"===e.toLowerCase()?h.processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):h.processAsync()}}]),e}();e.AnalysisBase=u,i.Zondy.Service.AnalysisBase=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeParameters=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="Zondy.Feature.ShapeParameters"}return r(t,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),t}();e.ShapeParameters=o,i.Zondy.Feature.ShapeParameters=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeInfo=void 0;var r=n(0),i=n(1);n(50),n(147),n(148);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,i.extend)(this,n),this.Caption=void 0!==n.Caption?n.Caption:null,this.IsVisible=void 0===n.IsVisible||n.IsVisible,this.MaxScale=void 0!==n.MaxScale?parseFloat(n.MaxScale):0,this.MinScale=void 0!==n.MinScale?parseFloat(n.MinScale):0,this.RegInfo=void 0!==n.RegInfo?n.RegInfo:null,this.LinInfo=void 0!==n.LinInfo?n.LinInfo:null,this.PntInfo=void 0!==n.PntInfo?n.PntInfo:null};e.CThemeInfo=o,r.Zondy.Object.Theme.CThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(27),s=n(13),a=n(19);var u=function(t){function e(t,n,r,o,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,o,a,u));if(l.shapeFactory=new s.ShapeFactory,l.shapeParameters=null,l.RelativeCoordinate=!1,l.setting=null,l.origonPoint=null,l.chartBox=null,l.chartBounds=null,l.width=null,l.height=null,l.XOffset=0,l.YOffset=0,l.DVBParameter=null,l.dataViewBox=null,l.DVBCodomain=null,l.DVBCenterPoint=null,l.DVBUnitValue=null,l.DVBOrigonPoint=null,l.DVBWidth=null,l.DVBHeight=null,l.origonPointOffset=null,l.fields=r||[],l.dataValues=null,a)l.lonlat=a;else if(u&&u.calGravity)if(t.ftype===i.Zondy.Enum.FeatureType.Pnt){var c=t.fGeom.PntGeom[0].Dot;l.lonlat=[c.x,c.y]}else if(t.ftype===i.Zondy.Enum.FeatureType.Lin){var h=[];t.fGeom.LinGeom[0].Line.Arcs.forEach(function(t){var e=t.Dots;h=[].concat(e)});var f=Math.ceil(h.length/2);c=h[f-1];l.lonlat=[c.x,c.y]}else if(t.ftype===i.Zondy.Enum.FeatureType.Reg)l.lonlat=l.getCenterOfGravityPoint(t);else{var p=t.bound;l.lonlat=[(p.xmin+p.xmax)/2,(p.ymin+p.ymax)/2]}else{p=t.bound;l.lonlat=[(p.xmin+p.xmax)/2,(p.ymin+p.ymax)/2]}return o&&o.width&&o.height&&o.codomain&&(l.setting=o),l.CLASS_NAME="Zondy.Feature.Theme.Graph",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Theme),r(e,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=o.Theme.getDataValues(this.data,this.fields,e);this.dataValues=n||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,i=this.height,s=this.location;this.origonPoint=[s[0]-r/2,s[1]-i/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+i,a[0]+r,a[1]];var u=this.chartBox,l=this.DVBParameter;this.dataViewBox=[u[0]+l[0],u[1]-l[1],u[2]-l[2],u[3]+l[3]];var c=this.dataViewBox;return!(c[0]>=c[2]||c[1]<=c[3])&&(this.DVBOrigonPoint=[c[0],c[3]],this.DVBWidth=Math.abs(c[2]-c[0]),this.DVBHeight=Math.abs(c[1]-c[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var n=this.width,r=this.height,i=this.location;return this.chartBounds=new a.Rectangle(i[0]-n/2,i[1]-r/2,i[0]+n/2,i[1]+r/2),this.resetLinearGradient(),i}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,n=0,r=t.length;n<r;n++){t[n].refOriginalPosition=e;var i=t[n].style;for(var o in i)switch(o){case"pointList":for(var s=i[o],a=0,u=s.length;a<u;a++)s[a][0]-=e[0],s[a][1]-=e[1];break;case"x":i[o]-=e[0];break;case"y":i[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function(t){var e=[],n=0,r=0,o=0;if(t.ftype===i.Zondy.Enum.FeatureType.Reg)for(var s=t.fGeom.RegGeom,a=0;a<s.length;a++){var u=s[a];if(null!=u&&null!=u.Rings)for(var l=u.Rings,c=0;c<l.length;c++){var h=l[c];if(null!=h&&null!=h.Arcs)for(var f=h.Arcs,p=0;p<f.length;p++){var d=f[p];if(null!=d&&null!=d.Dots)for(var y=d.Dots,g=0;g<y.length;g++)e.push(y[g])}}}for(c=1;c<=e.length;c++){var v=e[c%e.length].x,m=e[c%e.length].y,_=e[c-1].x,b=e[c-1].y,S=(v*b-m*_)/2;n+=S,r+=S*(v+_)/3,o+=S*(m+b)/3}return[r/=n,o/=n]}}]),e}();o.Theme.getDataValues=function(t,e,n){if(!t.attributes)return!1;for(var r=[],i=t.attributes,o=0;o<e.length;o++)for(var s in i)if(s===e[o]&&null!==i[s]&&void 0!==i[s])try{!isNaN(n)&&n>=0?r.push(parseFloat(i[s].toString()).toFixed(n)):r.push(parseFloat(i[s].toString()))}catch(t){throw new Error("not a number")}return r.length===e.length&&r},e.Graph=u,i.Zondy.Theme.Graph=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tangram=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};(0,o.extend)(this,n)}return r(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var n;return n=t.replace(/(^\s+)|(\s+$)/g,""),"g"===e.toLowerCase()&&(n=n.replace(/\s/g,"")),n}}]),t}();e.Tangram=s,i.Zondy.Object.Tangram=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(18);var o=function(t){function e(t,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=o||{},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s));return a.xmin=t,a.xmax=r,a.ymin=n,a.ymax=i,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Tangram),r(e,[{key:"setByOL",value:function(t){void 0!==t&&null!==t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null===(e=e||{}).inclusive&&(e.inclusive=!0);var n=!1,r=this.xmin===t.xmax||this.xmax===t.xmin||this.ymax===t.ymin||this.ymin===t.ymax;if(e.inclusive||!r){var i=t.ymin>=this.ymin&&t.ymin<=this.ymax||this.ymin>=t.ymin&&this.ymin<=t.ymax,o=t.ymax>=this.ymin&&t.ymax<=this.ymax||this.ymax>t.ymin&&this.ymax<t.ymax,s=t.xmin>=this.xmin&&t.xmin<=this.xmax||this.xmin>=t.xmin&&this.xmin<=t.xmax,a=t.xmax>=this.xmin&&t.xmax<=this.xmax||this.xmax>=t.xmin&&this.xmax<=t.xmax;n=(i||o)&&(s||a)}return n}}]),e}();e.Rectangle=o,Zondy.Object.Rectangle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryAnalysisBase=void 0;var r=n(0),i=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrgs",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ServiceBase),e}();e.GeometryAnalysisBase=o,r.Zondy.Service.GeometryAnalysisBase=o},function(t,e){t.exports=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}},function(t,e){t.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogService=void 0;var r=n(0),i=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrcs",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ServiceBase),e}();e.CatalogService=o,r.Zondy.Catalog.CatalogService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseParameter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(11);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layers=[],this.pageIndex=0,this.pagination=100,this.resultFormat="json",this.IncludeAttribute=!0,this.IncludeGeometry=!0,this.IncludeWebGraphic=!1,this.orderBy=void 0,this.isAsc=void 0,this.proj=void 0,this.fields=void 0,this.coordPrecision=void 0,this.cursorType="backward"}return r(t,null,[{key:"formatParam",value:function(t){for(var e=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"],n=0;n<e.length;n++)"string"==typeof t[e[n]]&&(t[e[n]]="true"===t[e[n]]);return t}}]),t}();o.prototype.formatParameter=function(t,e){var n=void 0,r=this;return r._crs=e,"typename"===t?(n={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"},this.where&&this.geometry&&delete n.geometry,Object.keys(n).forEach(function(t){r.hasOwnProperty(t)&&r[t]&&(r[t]instanceof Array?n[n[t]]=r[t].join(","):n[n[t]]="where"===t||"geometry"===t?initFilter(r[t],r.geometry,r):r[t]),delete n[t]}),n):(n={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"},Object.keys(n).forEach(function(t){r.hasOwnProperty(t)&&(r[n[t]]=r[t],delete r[t])}),this)},e.BaseParameter=o,i.Zondy.Service.BaseParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=void 0;var r=n(0),i=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrms",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ServiceBase),e}();e.MapServiceBase=o,r.Zondy.Service.MapServiceBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}return i(t,[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==(void 0===t?"undefined":r(t))&&null!==t){var n=t;if(t instanceof Array){n=[];for(var i=0,o=t.length;i<o;i++)n[i]=this.clone(t[i])}else if(!e[Object.prototype.toString.call(t)])for(var s in n={},t)t.hasOwnProperty(s)&&(n[s]=this.clone(t[s]));return n}return t}},{key:"mergeItem",value:function(t,e,n,i){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(n)&&("object"!=r(t[n])||o[Object.prototype.toString.call(t[n])]?!i&&n in t||(t[n]=e[n]):this.merge(t[n],e[n],i))}},{key:"merge",value:function(t,e,n){for(var r in e)this.mergeItem(t,e,r,n);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var n,r=this._canvas,i=this._pixelCtx,o=this._width,s=this._height,a=this._offsetX,u=this._offsetY;t+a>o&&(o=t+a+100,r.width=o,n=!0),e+u>s&&(s=e+u+100,r.height=s,n=!0),t<-a&&(o+=a=100*Math.ceil(-t/100),r.width=o,n=!0),e<-u&&(s+=u=100*Math.ceil(-e/100),r.height=s,n=!0),n&&i.translate(a,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}},{key:"inherits",value:function(t,e){var n=t.prototype;function r(){}for(var i in r.prototype=e.prototype,t.prototype=new r,n)t.prototype[i]=n[i];t.constructor=t}}]),t}();e.Util=s,o.Zondy.LevelRenderer.Tool.Util=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1);var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n&&n.map&&n.renderer&&(this.id=(0,o.newGuid)(),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=n,this.CLASS_NAME="Zondy.Feature.Theme")}return r(t,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}}]),t}();e.Theme=s,i.Zondy.Theme=s},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));r.default.zondy=r.default.zondy||{},r.default.zondy.control=r.default.zondy.control||{},r.default.zondy.Clientview=r.default.zondy.Clientview||{},r.default.CRS=r.default.CRS||{}},function(t,e){t.exports=function(t){return t<0?-1:1}},function(t,e){t.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},function(t,e){t.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},function(t,e){t.exports=function(t){return.05859375*t*t*(1+.75*t)}},function(t,e){t.exports=function(t){return t*t*t*(35/3072)}},function(t,e){t.exports=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}},function(t,e,n){var r=Math.PI/2,i=n(29);t.exports=function(t){return Math.abs(t)<r?t:t-i(t)*Math.PI}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(10),a=n(47),u=n(48),l=n(3);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};n.baseUrl="igs/rest/mrfs";var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.resultCallBack=void 0!==n.resultCallBack?n.resultCallBack:null,r.queryParam=void 0!==n.queryParam?n.queryParam:null,r.requestType=void 0!==n.requestType?n.requestType:"GET",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.ServiceBase),r(e,[{key:"processResult",value:function(t){var e=new a.FeatureSet;(0,o.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};(0,o.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,n,r,i,o){this.resultCallBack=n;var s=new l.IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:"geojson"!==o?this.processResult:this.processGeoJsonResult,processFailed:i}});"GET"===r?s.processAsync():s.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,n){if(null!==this.queryParam){var r="";if(this.queryParam instanceof u.QueryParameter){r=this.getFullUrl();var i="",o=null;"GET"===(i=n||(this.requestType?this.requestType:"GET")).toUpperCase()?r+=encodeURI("?"+this.queryParam.getParameterURL()):o=this.queryParam.getParameterObject(),this.restQuery(r,o,t,i,e,this.queryParam.resultFormat.toLowerCase())}}}}]),e}();e.QueryServiceBase=c,i.Zondy.Service.QueryServiceBase=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pushSerializeAndPop=e.serialize=e.pushParseAndPop=e.parseNode=e.makeStructureNS=e.makeSequence=e.OBJECT_PROPERTY_NODE_FACTORY=e.makeSimpleNodeFactory=e.makeArraySerializer=e.makeChildAppender=e.makeObjectPropertySetter=e.makeObjectPropertyPusher=e.makeReplacer=e.makeArrayPusher=e.makeArrayExtender=e.parse=e.getAttributeNS=e.isNode=e.isDocument=e.getAllTextContent_=e.getAllTextContent=e.createElementNS=e.XML_SCHEMA_INSTANCE_URI=e.DOCUMENT=void 0;var r=n(0),i=n(327),o=document.implementation.createDocument("","",null),s=function(t,e){return o.createElementNS(t,e)},a=function(t,e){return u(t,e,[]).join("")},u=function t(e,n,r){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)n?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling)t(i,n,r)}return r},l=function(t){return t instanceof Document},c=function(t){return t instanceof Node},h=function(t,e,n){return t.getAttributeNS(e,n)||""},f=function(t){return(new DOMParser).parseFromString(t,"application/xml")},p=function(t,e){return function(n,r){var o=t.call(void 0!==e?e:this,n,r);if(void 0!==o){var s=r[r.length-1];(0,i.extend)(s,o)}}},d=function(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&r[r.length-1].push(i)}},y=function(t,e){return function(n,r){var i=t.call(void 0!==e?e:this,n,r);void 0!==i&&(r[r.length-1]=i)}},g=function(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);if(void 0!==o){var s=i[i.length-1],a=void 0!==e?e:r.localName;(a in s?s[a]:s[a]=[]).push(o)}}},v=function(t,e,n){return function(r,i){var o=t.call(void 0!==n?n:this,r,i);void 0!==o&&(i[i.length-1][void 0!==e?e:r.localName]=o)}},m=function(t,e){return function(n,r,i){t.call(void 0!==e?e:this,n,r,i),i[i.length-1].node.appendChild(n)}},_=function(t,e){var n=void 0,r=void 0;return function(e,i,o){if(void 0===n){n={};var s={};s[e.localName]=t,n[e.namespaceURI]=s,r=b(e.localName)}O(n,r,i,o)}},b=function(t,e){var n=t;return function(t,r,i){var o=r[r.length-1].node,a=n;void 0===a&&(a=i);var u=void 0!==e?e:o.namespaceURI;return s(u,a)}},S=b(),x=function(t,e){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=t[e[i]];return r},w=function(t,e,n){var r,i=void 0!==n?n:{},o=void 0;for(o=0,r=t.length;o<r;++o)i[t[o]]=e;return i},P=function(t,e,n,r){var i=void 0;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var s=o[i.localName];void 0!==s&&s.call(r,i,n)}}},C=function(t,e,n,r,i){return r.push(t),P(e,n,r,i),r.pop()},O=function(t,e,n,r,i,o){for(var s=(void 0!==i?i:n).length,a=void 0,u=void 0,l=0;l<s;++l)void 0!==(a=n[l])&&void 0!==(u=e.call(void 0!==o?o:this,a,r,void 0!==i?i[l]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,a,r)},T=function(t,e,n,r,i,o,s){return i.push(t),O(e,n,r,i,o,s),i.pop()};e.DOCUMENT=o,e.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance",e.createElementNS=s,e.getAllTextContent=a,e.getAllTextContent_=u,e.isDocument=l,e.isNode=c,e.getAttributeNS=h,e.parse=f,e.makeArrayExtender=p,e.makeArrayPusher=d,e.makeReplacer=y,e.makeObjectPropertyPusher=g,e.makeObjectPropertySetter=v,e.makeChildAppender=m,e.makeArraySerializer=_,e.makeSimpleNodeFactory=b,e.OBJECT_PROPERTY_NODE_FACTORY=S,e.makeSequence=x,e.makeStructureNS=w,e.parseNode=P,e.pushParseAndPop=C,e.serialize=O,e.pushSerializeAndPop=T,r.Zondy.xml.DOCUMENT=o,r.Zondy.xml.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance",r.Zondy.xml.createElementNS=s,r.Zondy.xml.getAllTextContent=a,r.Zondy.xml.getAllTextContent_=u,r.Zondy.xml.isDocument=l,r.Zondy.xml.isNode=c,r.Zondy.xml.getAttributeNS=h,r.Zondy.xml.parse=f,r.Zondy.xml.makeArrayExtender=p,r.Zondy.xml.makeArrayPusher=d,r.Zondy.xml.makeReplacer=y,r.Zondy.xml.makeObjectPropertyPusher=g,r.Zondy.xml.makeObjectPropertySetter=v,r.Zondy.xml.makeChildAppender=m,r.Zondy.xml.makeArraySerializer=_,r.Zondy.xml.makeSimpleNodeFactory=b,r.Zondy.xml.OBJECT_PROPERTY_NODE_FACTORY=S,r.Zondy.xml.makeSequence=x,r.Zondy.xml.makeStructureNS=w,r.Zondy.xml.parseNode=P,r.Zondy.xml.pushParseAndPop=C,r.Zondy.xml.serialize=O,r.Zondy.xml.applyTransform=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoFeatureThemeLayer=void 0;var r=n(0),i=(n(2),n(39)),o=n(13),s=n(192),a=n(47),u=n(19),l=i.ThemeLayer.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){i.ThemeLayer.prototype.initialize.call(this,t,e),window.L.Util.setOptions(this,e);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(t){var e=this;if(e.fire("beforefeaturesadded",{features:t}),t instanceof a.FeatureSet){var n=null,r=t.AttStruct,i=t.SFEleArray;if(null!=i&&i.length>0)for(var o=0;o<i.length;o++){var s=i[o];if(null!=s.AttValue&&s.AttValue.length>0){n={};for(var u=0;u<s.AttValue.length;u++)n[r.FldName[u]]=s.AttValue[u];n.FID=s.FID}s.attributes=n,e.features.push(s)}}e.isCustomSetMaxCacheCount||(e.maxCacheCount=5*e.features.length),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),i.ThemeLayer.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),i.ThemeLayer.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),t&&t instanceof window.L.LatLngBounds){var i=this._map.options.crs;t=window.L.bounds(i.project(t.getSouthWest()),i.project(t.getNorthEast())),t=new u.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}e.renderer.clearAll();for(var o=e.features,s=e.cache,a=e.cacheFields,l=e._map.getZoom(),c=e.maxCacheCount,h=0,f=o.length;h<f;h++){var p=o[h],d=p.bound;if(!t||t.intersectsBounds(d)){var y=p.FID+"_zoom_"+l.toString();if(s[y])s[y].updateAndAddShapes();else{var g=e.createThematicFeature(o[h]);if(!(g.getShapesCount()<1)&&(s[y]=g,a.push(y),a.length>c)){var v=a[0];a.splice(0,1),delete s[v]}}}}if(e.renderer.render(),r&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(m)}},createThematicFeature:function(t){var e=this,n=e.getStyleByData(t),r={};r.nodesClipPixel=e.options.nodesClipPixel,r.isHoverAble=e.options.isHoverAble,r.isMultiHover=e.options.isMultiHover,r.isClickAble=e.options.isClickAble,r.highlightStyle=o.ShapeFactory.transformStyle(e.highlightStyle);for(var i=new s.ThemeVector(t,e,o.ShapeFactory.transformStyle(n),r),a=0;a<i.shapes.length;a++)e.renderer.addShape(i.shapes[a]);return i},getStyleByData:function(t){},redraw:function(){return this.clearCache(),i.ThemeLayer.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e}});e.GeoFeatureThemeLayer=l,r.Zondy.Map.GeoFeatureThemeLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeLayer=void 0;var r=n(0),i=(n(2),n(1)),o=n(169),s=window.L.Layer.extend({options:{name:null,opacity:1,TFEvents:null},initialize:function(t,e){window.L.Util.setOptions(this,e),this.options.name=t,this.features=[],this.TFEvents=e&&e.TFEvents?e.TFEvents:[],this.levelRenderer=new o.LevelRenderer,this.movingOffset=[0,0]},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},onRemove:function(t){window.L.DomUtil.remove(this.container),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var n=t.getSize();e.container.style.width=n.x+"px",e.container.style.height=n.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=window.L.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update()}else t.removeLayer(e)},addFeatures:function(t){},redrawThematicFeatures:function(t){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t);for(var e=t.length-1;e>=0;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t&&0!==t.length){if(t===e.features)return e.removeAllFeatures();window.L.Util.isArray(t)||(t=[t]);for(var n=[],r=t.length-1;r>=0;r--){var i=t[r],o=window.L.Util.indexOf(e.features,i);-1!==o?e.features.splice(o,1):n.push(i)}for(var s=[],a=0,u=e.features.length;a<u;a++)i=e.features[a],s.push(i);e.features=[],e.addFeatures(s),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var l=0===n.length;e.fire("featuresremoved",{features:n,succeed:l})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var t=this.features.length,e=new Array(t),n=0;n<t;++n)e[n]=this.features[n];return e},getFeatureBy:function(t,e){var n=null;for(var r in this.features)if(this.features[r][t]===e){n=this.features[r];break}return n},getFeatureById:function(t){return this.getFeatureBy("FID",t)},getFeaturesByAttribute:function(t,e){var n,r=[];for(var i in this.features)(n=this.features[i])&&n.attributes&&n.attributes[t]===e&&r.push(n);return r},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);window.L.DomUtil.setPosition(this.container,e);var n=this;n.renderer&&n.redrawThematicFeatures(t),n.currentMousePosition&&(n.currentMousePosition=window.L.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(t){t!==this.options.opacity&&(isNaN(t)||(this.options.opacity=t,this._updateOpacity()))},redraw:function(){var t=this;return!!t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures(),!0)},on:function(t,e,n){return this.renderer?this.renderer.on(t,e):window.L.Layer.prototype.on.call(this,t,e),this},off:function(t,e,n){return this.renderer?this.renderer.un(t,e):window.L.Layer.prototype.off.call(this,t,e),this},fire:function(t,e,n){return this.renderer&&this.renderer.trigger(t,e),window.L.Layer.prototype.fire.call(this,t,e,n),this},addTFEvents:function(){for(var t=this.TFEvents,e=t.length,n=0;n<e;n++)this.renderer.on(t[n][0],t[n][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;window.L.Util.isArray(t)?e=window.L.point(t[0],t[1]):t instanceof window.L.Point||(e=t instanceof r.Zondy.LonLat?window.L.point(t.lon,t.lat):window.L.point(t.x,t.y));var n=this._map.latLngToContainerPoint(this._map.options.crs.unproject(e));return[n.x,n.y]},_initContainer:function(){var t=this.getPane(),e=this._map.options.zoomAnimation&&window.L.Browser.any3d,n=this.options.name||"themeLayer";n+=" leaflet-layer leaflet-zoom-"+(e?"animated":"hide"),this.container=window.L.DomUtil.create("div",n,t);var r=window.L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.style[r]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());window.L.DomUtil.setTransform?window.L.DomUtil.setTransform(this.container,n,e):this.container.style[window.L.DomUtil.TRANSFORM]=window.L.DomUtil.getTranslateString(n)+" scale("+e+")"},_updateOpacity:function(){var t=this;(0,i.modifyDOMElement)(t.container,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},_reset:function(){var t=this,e=t._map.getBounds();t.update(e);var n=t._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);window.L.DomUtil.setPosition(this.container,r),parseFloat(t.container.width)!==parseFloat(n.x)&&(t.container.width=n.x+"px"),parseFloat(t.container.height)!==parseFloat(n.y)&&(t.container.height=n.y+"px"),t.redraw()},_resize:function(){var t=this._map.getSize();this.container.style.width=t.x+"px",this.container.style.height=t.y+"px",this.renderer.resize()}});e.ThemeLayer=s,r.Zondy.Map.ThemeLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Eventful=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}return r(t,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,n){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!0,ctx:n||this}),this):this}},{key:"bind",value:function(t,e,n){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!1,ctx:n||this}),this):this}},{key:"unbind",value:function(t,e){var n=this._handlers;if(!t)return this._handlers={},this;if(e){if(n[t]){for(var r=[],i=0,o=n[t].length;i<o;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;n>3&&(e=Array.prototype.slice.call(e,1));for(var r=this._handlers[t],i=r.length,o=0;o<i;){switch(n){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,e[1]);break;case 3:r[o].h.call(r[o].ctx,e[1],e[2]);break;default:r[o].h.apply(r[o].ctx,e)}r[o].one?(r.splice(o,1),i--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;n>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var r=e[e.length-1],i=this._handlers[t],o=i.length,s=0;s<o;){switch(n){case 1:i[s].h.call(r);break;case 2:i[s].h.call(r,e[1]);break;case 3:i[s].h.call(r,e[1],e[2]);break;default:i[s].h.apply(r,e)}i[s].one?(i.splice(s,1),o--):s++}}return this}}]),t}();e.Eventful=o,i.Zondy.LevelRenderer.Eventful=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crs=e.CRS=void 0;n(2),n(0);var r=function(t){return t&&t.__esModule?t:{default:t}}(n(205));window.proj4=r.default,window.Zondy.Proj={},window.Zondy.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},window.Zondy.Proj.Projection=window.L.Class.extend({initialize:function(t,e,n){var r=window.Zondy.Proj._isProj4Obj(t);this._proj=r?t:this._projFromCodeDef(t,e);var i=n;window.L.Util.isArray(n)&&(i=window.L.bounds(n)),this.bounds=r?e:i},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new window.L.Point(e[0],e[1])},unproject:function(t,e){this.bounds&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var n=this._proj.inverse([t.x,t.y]);return new window.L.LatLng(n[1],n[0],e)},_projFromCodeDef:function(t,e){if(e)r.default.defs(t,e);else if(void 0===r.default.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===r.default.defs[t])throw"No projection definition for code "+t}return(0,r.default)(t)},getUnits:function(){return this._proj.oProj.units}});var i=window.L.Class.extend({includes:window.L.CRS,options:{transformation:new window.L.Transformation(1,0,-1,0)},initialize:function(t,e){var n,r,i;if(window.Zondy.Proj._isProj4Obj(t)?(n=(r=t).srsCode,e=e||{},this.projection=new window.Zondy.Proj.Projection(r,e.bounds)):(n=t,i=(e=e||{}).def||"",this.projection=new window.Zondy.Proj.Projection(n,i,e.bounds)),window.L.Util.setOptions(this,e),this.code=n,this.transformation=this.options.transformation,this.options.bounds&&(this.options.bounds=window.L.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof window.L.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new window.L.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this._scales=this._toProj4Scales(this.options.scales);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){for(var o=[],s=0;s<this.options.scaleDenominators.length;s++)o[s]=1/this.options.scaleDenominators[s];this._scales=this._toProj4Scales(o)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var a=this.options.resolutions.length-1;a>=0;a--)this.options.resolutions[a]&&(this._scales[a]=1/this.options.resolutions[a])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this.infinite=!this.options.bounds},scale:function(t){var e,n=Math.floor(t);return t===n?this._scales[t]:(e=this._scales[n])+(this._scales[n+1]-e)*(t-n)},zoom:function(t){var e,n,r=this._closestElement(this._scales,t),i=this._scales.indexOf(r);return t===r?i:(n=i+1,void 0===(e=this._scales[n])?1/0:(t-r)/(e-r)+i)},distance:window.L.CRS.Earth.distance,R:window.L.CRS.Earth.R,_closestElement:function(t,e){for(var n,r=t.length;r--;)t[r]<=e&&(void 0===n||n<t[r])&&(n=t[r]);return n},_toProj4Scales:function(t){var e=[];if(!t)return e;for(var n=0;n<t.length;n++){var r=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;e[n]=1/(.0254/(96*t[n])/r)}return e},_getMeterPerMapUnit:function(t){var e=1;return"meter"===t?e=1:"degrees"===t?e=2*Math.PI*6378137/360:"kilometer"===t?e=.001:"inch"===t?e=1/.025399999918:"feet"===t&&(e=.3048),e},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),n=Math.max(e.x,e.y)/256,r=[],i=0;i<23;i++)r[i]=Math.pow(2,i)/n;return r}});e.CRS=i;var o=e.crs=function(t,e){return new i(t,e)};window.Zondy.Proj.CRS=o},function(t,e){var n=Math.PI/2;t.exports=function(t,e,r){var i=t*r,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(n-e))/i}},function(t,e){var n=Math.PI/2;t.exports=function(t,e){for(var r,i,o=.5*t,s=n-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(s),s+=i=n-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-s,Math.abs(i)<=1e-10)return s;return-9999}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttStruct=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};e.CAttStruct=o,r.Zondy.Object.CAttStruct=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLineInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!==e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!==e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!==e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!==e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!==e.Yscale?e.Yscale:1};e.CLineInfo=o,r.Zondy.Object.CLineInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGraphicBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,o.extend)(this,n),this.GID=void 0!==n.GID&&null!==n.GID?n.GID:0}return r(t,[{key:"setGID",value:function(t){void 0!==t&&null!==t&&(this.GID=t)}}]),t}();e.FeatureGraphicBase=s,i.Zondy.Object.FeatureGraphicBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureSet=void 0;var r=n(0),i=n(1),o=(n(44),n(118)),s=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.TotalCount=void 0!==e.TotalCount&&null!==e.TotalCount?e.TotalCount:0,this.AttStruct=void 0!==e.AttStruct&&null!==e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!==e.SFEleArray?e.SFEleArray:new Array};s.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},s.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},s.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},s.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof o.Feature?e:new o.Feature(this.SFEleArray[t])},s.prototype.getAttType=function(t){var e;return null==this.AttStruct?null:null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},s.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,n=0;n<e;n++)if(this.AttStruct.FldName[n]==t)return n;return null},s.prototype.getAttNameByIndex=function(t){return null==this.AttStruct?null:null==this.AttStruct.FldName?null:this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},e.FeatureSet=s,r.Zondy.Object.FeatureSet=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(135);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.QueryParameterBase),r(e,[{key:"getParameterURL",value:function(){var t="page="+this.pageIndex.toString();return t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),this.struct&&(t+="&structs="+(0,o.toJSON)(this.struct)),this.where&&(t+="&where="+this.where),this.rule&&(t+="&rule="+(0,o.toJSON)(this.rule)),this.objectIds&&(t+="&objectIds="+this.objectIds),this.orderField&&(t+="&orderField="+this.orderField),void 0!==this.rtnLabel&&(t+="&rtnLabel="+this.rtnLabel),this.fields&&(t+="&fields="+this.fields),void 0!==this.coordPrecision&&(t+="&coordPrecision="+this.coordPrecision),this.isAsc&&(t+="&isAsc="+this.isAsc),this.proj&&(t+="&srsIds="+this.proj),this.guid&&(t+="&guid="+this.guid),t+="&cursorType="+this.cursorType}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!==this.struct&&(t.structs=this.struct.toJSON()),null!==this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!==this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!==this.where&&(t.where=this.where),null!==this.rule&&(t.rule=this.rule.toJSON()),null!==this.orderField&&(t.orderField=this.orderField),null!==this.isAsc&&(t.isAsc=this.isAsc),t.cursorType=this.cursorType,t)}}]),e}();e.QueryParameter=a,i.Zondy.Service.QueryParameter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipBase=void 0;var r=n(0),i=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.desInfo=void 0!==n.desInfo?n.desInfo:null,r.attOptType=void 0!==n.attOptType?n.attOptType:1,r.infoOptType=void 0!==n.infoOptType?n.infoOptType:1,r.overType=void 0!==n.overType?n.overType:3,r.tolerance=void 0!==n.tolerance?n.tolerance:1e-4,r.isCleanNode=void 0!==n.isCleanNode&&n.isCleanNode,r.isLabelPnt=void 0!==n.isLabelPnt&&n.isLabelPnt,r.isValidReg=void 0!==n.isValidReg&&n.isValidReg,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.ClipBase=o,r.Zondy.Service.ClipBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPntInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CPntInfo=o,r.Zondy.Object.Theme.CPntInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformable=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(9);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="Zondy.LevelRenderer.Transformable",this.lookAt=function(){var t=o.SUtil.Util_vector.create();return function(e){this.transform||(this.transform=o.SUtil.Util_matrix.create());var n=this.transform;function r(t){return t>-5e-5&&t<5e-5}o.SUtil.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(o.SUtil.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())}}()}return r(t,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||o.SUtil.Util_matrix.create();if(o.SUtil.Util_matrix.identity(e),this.needLocalTransform){if(i(this.scale[0])||i(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var n=i(t[0])||i(t[1]);n&&o.SUtil.Util_matrix.translate(e,e,t),o.SUtil.Util_matrix.scale(e,e,this.scale),n&&(t[0]=-t[0],t[1]=-t[1],o.SUtil.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var r=i(t[0])||i(t[1]);r&&o.SUtil.Util_matrix.translate(e,e,t),o.SUtil.Util_matrix.rotate(e,e,this.rotation[0]),r&&(t[0]=-t[0],t[1]=-t[1],o.SUtil.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&o.SUtil.Util_matrix.rotate(e,e,this.rotation);(i(this.position[0])||i(this.position[1]))&&o.SUtil.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?o.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):o.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function i(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],n=this.position,r=this.scale,i=this.rotation;s(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];s(o-1)&&(o=Math.sqrt(o)),n[0]=t[4],n[1]=t[5],r[0]=e,r[1]=o,r[2]=r[3]=0,i[0]=Math.atan2(-t[1]/o,t[0]/e),i[1]=i[2]=0}function s(t){return t>5e-5||t<-5e-5}}}]),t}();e.Transformable=s,i.Zondy.LevelRenderer.Transformable=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curve=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(53);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new o.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}return r(t,[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,n,r,i){var o=1-i;return o*o*(o*t+3*i*e)+i*i*(i*r+3*o*n)}},{key:"cubicDerivativeAt",value:function(t,e,n,r,i){var o=1-i;return 3*(((e-t)*o+2*(n-e)*i)*o+(r-n)*i*i)}},{key:"cubicRootAt",value:function(t,e,n,r,i,o){var s=r+3*(e-n)-t,a=3*(n-2*e+t),u=3*(e-t),l=t-i,c=a*a-3*s*u,h=a*u-9*s*l,f=u*u-3*a*l,p=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(a))o[0]=0;else{var d=-u/a;d>=0&&d<=1&&(o[p++]=d)}else{var y=h*h-4*c*f;if(this.isAroundZero(y)){var g=h/c,v=-a/s+g,m=-g/2;v>=0&&v<=1&&(o[p++]=v),m>=0&&m<=1&&(o[p++]=m)}else if(y>0){var _=Math.sqrt(y),b=c*a+1.5*s*(-h+_),S=c*a+1.5*s*(-h-_),x=(-a-((b=b<0?-Math.pow(-b,this.ONE_THIRD):Math.pow(b,this.ONE_THIRD))+(S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))))/(3*s);x>=0&&x<=1&&(o[p++]=x)}else{var w=(2*c*a-3*s*h)/(2*Math.sqrt(c*c*c)),P=Math.acos(w)/3,C=Math.sqrt(c),O=Math.cos(P),T=(-a-2*C*O)/(3*s),E=(-a+C*(O+this.THREE_SQRT*Math.sin(P)))/(3*s),L=(-a+C*(O-this.THREE_SQRT*Math.sin(P)))/(3*s);T>=0&&T<=1&&(o[p++]=T),E>=0&&E<=1&&(o[p++]=E),L>=0&&L<=1&&(o[p++]=L)}}return p}},{key:"cubicExtrema",value:function(t,e,n,r,i){var o=6*n-12*e+6*t,s=9*e+3*r-3*t-9*n,a=3*e-3*t,u=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(o)){var l=-a/o;l>=0&&l<=1&&(i[u++]=l)}}else{var c=o*o-4*s*a;if(this.isAroundZero(c))i[0]=-o/(2*s);else if(c>0){var h=Math.sqrt(c),f=(-o+h)/(2*s),p=(-o-h)/(2*s);f>=0&&f<=1&&(i[u++]=f),p>=0&&p<=1&&(i[u++]=p)}}return u}},{key:"cubicSubdivide",value:function(t,e,n,r,i,o){var s=(e-t)*i+t,a=(n-e)*i+e,u=(r-n)*i+n,l=(a-s)*i+s,c=(u-a)*i+a,h=(c-l)*i+l;o[0]=t,o[1]=s,o[2]=l,o[3]=h,o[4]=h,o[5]=c,o[6]=u,o[7]=r}},{key:"cubicProjectPoint",value:function(t,e,n,r,i,o,s,a,u,l,c){var h,f=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,g=1/0;f[0]=u,f[1]=l;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(t,n,i,s,v),p[1]=this.cubicAt(e,r,o,a,v);var m=this.vector.distSquare(f,p);m<g&&(h=v,g=m)}g=1/0;for(var _=0;_<32&&!(y<this.EPSILON);_++){var b=h-y,S=h+y;p[0]=this.cubicAt(t,n,i,s,b),p[1]=this.cubicAt(e,r,o,a,b);var x=this.vector.distSquare(p,f);if(b>=0&&x<g)h=b,g=x;else{d[0]=this.cubicAt(t,n,i,s,S),d[1]=this.cubicAt(e,r,o,a,S);var w=this.vector.distSquare(d,f);S<=1&&w<g?(h=S,g=w):y*=.5}}return c&&(c[0]=this.cubicAt(t,n,i,s,h),c[1]=this.cubicAt(e,r,o,a,h)),Math.sqrt(g)}},{key:"quadraticAt",value:function(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}},{key:"quadraticDerivativeAt",value:function(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}},{key:"quadraticRootAt",value:function(t,e,n,r,i){var o=t-2*e+n,s=2*(e-t),a=t-r,u=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(s)){var l=-a/s;l>=0&&l<=1&&(i[u++]=l)}}else{var c=s*s-4*o*a;if(this.isAroundZero(c)){var h=-s/(2*o);h>=0&&h<=1&&(i[u++]=h)}else if(c>0){var f=Math.sqrt(c),p=(-s+f)/(2*o),d=(-s-f)/(2*o);p>=0&&p<=1&&(i[u++]=p),d>=0&&d<=1&&(i[u++]=d)}}return u}},{key:"quadraticExtremum",value:function(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}},{key:"quadraticProjectPoint",value:function(t,e,n,r,i,o,s,a,u){var l,c=this.vector.create(),h=this.vector.create(),f=this.vector.create(),p=.005,d=1/0;c[0]=s,c[1]=a;for(var y=0;y<1;y+=.05){h[0]=this.quadraticAt(t,n,i,y),h[1]=this.quadraticAt(e,r,o,y);var g=this.vector.distSquare(c,h);g<d&&(l=y,d=g)}d=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var m=l-p,_=l+p;h[0]=this.quadraticAt(t,n,i,m),h[1]=this.quadraticAt(e,r,o,m);var b=this.vector.distSquare(h,c);if(m>=0&&b<d)l=m,d=b;else{f[0]=this.quadraticAt(t,n,i,_),f[1]=this.quadraticAt(e,r,o,_);var S=this.vector.distSquare(f,c);_<=1&&S<d?(l=_,d=S):p*=.5}}return u&&(u[0]=this.quadraticAt(t,n,i,l),u[1]=this.quadraticAt(e,r,o,l)),Math.sqrt(d)}}]),t}();e.Curve=s,i.Zondy.LevelRenderer.Tool.Curve=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}return r(t,[{key:"create",value:function(t,e){var n=new(0,this.ArrayCtor)(2);return n[0]=t||0,n[1]=e||0,n}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"add",value:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},{key:"scaleAndAdd",value:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},{key:"sub",value:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},{key:"div",value:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},{key:"normalize",value:function(t,e){var n=this.len(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}},{key:"min",value:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},{key:"max",value:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}]),t}();e.Vector=o,i.Zondy.LevelRenderer.Tool.Vector=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.x=isNaN(t)?0:t,r.y=isNaN(n)?0:n,r.r=6,r.CLASS_NAME="Zondy.Feature.ShapeParameters.Point",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Point=s,i.Zondy.Feature.ShapeParameters.Point=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pointList=t,n.holePolygonPointLists=null,n.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Polygon=s,i.Zondy.Feature.ShapeParameters.Polygon=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sector=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n,r,i,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s,a));return u.x=isNaN(t)?0:t,u.y=isNaN(n)?0:n,u.r=isNaN(r)?0:r,u.startAngle=isNaN(i)?0:i,u.endAngle=isNaN(o)?0:o,u.r0=isNaN(s)?0:s,u.clockWise=a,u.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Sector=s,i.Zondy.Feature.ShapeParameters.Sector=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPolygon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(6),a=n(9);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicpolygon",n.holePolygonPointLists=null,n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Shape),r(e,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),t.save(),this.setContext(t,n),this.setTransform(t);var r=!1;"fill"!==n.brushType&&"both"!==n.brushType&&void 0!==n.brushType||(t.beginPath(),"dashed"===n.lineType||"dotted"===n.lineType||"dot"===n.lineType||"dash"===n.lineType||"dashot"===n.lineType||"longdash"===n.lineType||"longdashdot"===n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),n.lineWidth>0&&("stroke"===n.brushType||"both"===n.brushType)&&(r||(t.beginPath(),this.buildPath(t,n)),this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)),this.drawText(t,n,this.style);var i=(0,o.cloneObject)(n);if(i.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var s=this.holePolygonPointLists,a=s.length,u=0;u<a;u++){var l=s[u];i.pointList=l,t.globalCompositeOperation="destination-out",r=!1,"fill"!==i.brushType&&"both"!==i.brushType&&void 0!==i.brushType||(t.beginPath(),"dashed"===i.lineType||"dotted"===i.lineType||"dot"===i.lineType||"dash"===i.lineType||"dashot"===i.lineType||"longdash"===i.lineType||"longdashdot"===i.lineType?this.buildPath(t,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(t,i),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)),i.lineWidth>0&&("stroke"===i.brushType||"both"===i.brushType)?(r||(t.beginPath(),this.buildPath(t,i)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",i),t.stroke(),this.setCtxGlobalAlpha(t,"reset",i)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2))if(e.smooth&&"spline"!==e.smooth){var i,o,s,u=a.SUtil.SUtil_smoothBezier(r,e.smooth,!0,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,c=0;c<l;c++)i=u[2*c],o=u[2*c+1],s=[r[(c+1)%l][0]+n[0],r[(c+1)%l][1]+n[1]],t.bezierCurveTo(i[0],i[1],o[0],o[1],s[0],s[1])}else if("spline"===e.smooth&&(r=a.SUtil.SUtil_smoothSpline(r,!0,null,n)),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var h=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=h;var f=e.lineWidth||1,p=f,d=f;"dashed"===e.lineType&&(p*=5,d*=5,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(p=1,d+=f),"dot"===e.lineType&&(d*=4,e.lineCap&&"butt"!==e.lineCap&&(p=1,d+=f)),"dash"===e.lineType&&(p*=4,d*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),"longdash"===e.lineType&&(p*=8,d*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var y=1;y<r.length;y++)a.SUtil.SUtil_dashedLineTo(t,r[y-1][0]+n[0],r[y-1][1]+n[1],r[y][0]+n[0],r[y][1]+n[1],f,[p,d]);a.SUtil.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],f,[p,d])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var g=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=g;var v=e.lineWidth||1,m=v,_=v,b=v,S=v;"dashot"===e.lineType&&(m*=4,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),"longdashdot"===e.lineType&&(m*=8,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var x=1;x<r.length;x++)a.SUtil.SUtil_dashedLineTo(t,r[x-1][0]+n[0],r[x-1][1]+n[1],r[x][0]+n[0],r[x][1]+n[1],v,[m,_,b,S]);a.SUtil.SUtil_dashedLineTo(t,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],v,[m,_,b,S])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<r.length;w++)t.lineTo(r[w][0]+n[0],r[w][1]+n[1]);t.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(t,e){var n;if(e?n=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),t.__rect)return t.__rect;for(var r,i=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+n[0]<i&&(i=u[l][0]+n[0]),u[l][0]+n[0]>o&&(o=u[l][0]+n[0]),u[l][1]+n[1]<s&&(s=u[l][1]+n[1]),u[l][1]+n[1]>a&&(a=u[l][1]+n[1]);return r="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(i-r/2),y:Math.round(s-r/2),width:o-i+r,height:a-s+r},t.__rect}}]),e}();e.SmicPolygon=u,i.Zondy.LevelRenderer.SmicPolygon=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapvLayer=e.MapvLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var i=n(377);var o=e.MapvLayer=r.default.Layer.extend({initialize:function(t,e,n,i){this.map=t,this.dataset=e||{},this.mapvoption=n,i=i||{},this.render=this.render.bind(this),r.default.Util.setOptions(this,i),this._canvas=this._createCanvas(),r.default.stamp(this),this.innerMoveStartEvent=this.moveStartEvent.bind(this),this.innerMoveEndEvent=this.moveEndEvent.bind(this),this.innnerZoomstart=this.zoomStartEvent.bind(this),this.innerViewreset=this.viewresetEvent.bind(this),this.innerResize=this.resizeEvent.bind(this)},addData:function(t,e){this.mapvBaseLayer.addData(t,e)},updateData:function(t,e){this.mapvBaseLayer.updateData(t,e)},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||100;var e=this.map.getSize();t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px";var n=this.devicePixelRatio;return t.getContext("2d").scale(n,n),"2d"==this.mapvoption.context&&t.getContext("2d").scale(n,n),t},onAdd:function(t){var e=this.getPane(),n=r.default.DomUtil.create("div","leaflet-layer",e);n.appendChild(this._canvas),this._container=n,this.mapvBaseLayer=new i.MapvBaseLayer(t,this.dataset,this.mapvoption,this),this.bindEvent(),this.options.tileLoader&&this._initTileLoader(),this._reset(),this.fire("loaded")},bindEvent:function(){var t=this.map;t.on("movestart",this.innerMoveStartEvent),t.on("moveend",this.innerMoveEndEvent),t.on("zoomend",this.innerMoveEndEvent),t.on("zoomstart",this.innnerZoomstart),t.on("viewreset",this.innerViewreset),t.on("resize ",this.innerResize),this.mapvBaseLayer.bindEvent()},unbindEvent:function(){var t=this.map;t.off("movestart",this.innerMoveStartEvent),t.off("moveend",this.innerMoveEndEvent),t.on("zoomend",this.innerMoveEndEvent),t.off("zoomstart",this.innnerZoomstart),t.off("viewreset",this.innerViewreset),t.off("resize ",this.innerResize),this.removeAllData(),this.mapvBaseLayer.unbindEvent()},moveStartEvent:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()},moveEndEvent:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()},zoomStartEvent:function(){this._unvisiable()},viewresetEvent:function(){this._reset(),this._visiable()},resizeEvent:function(){this._reset(),this._visiable()},_animateZoom:function(t){this._animating||(this._animating=!0)},_endZoomAnim:function(){},getCanvas:function(){return this._canvas},getAttribution:function(){return this.options.attribution},draw:function(){return this._reset()},onRemove:function(t){r.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){this._canvas.style.zIndex=t},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()},_visiable:function(){this.getCanvas().style.display="block"},_unvisiable:function(){this.getCanvas().style.display="none"},_updateOpacity:function(){},_render:function(){this.render()},fixPosition:function(){var t=this.map.getBounds().getNorthWest(),e=this.map.latLngToLayerPoint(t);this.map.latLngToLayerPoint(r.default.latLng(0,0)),this.map.getPixelOrigin();t&&r.default.DomUtil.setPosition(this._canvas,{x:e.x,y:e.y})},resizeCanvas:function(){var t=this.map.getSize(),e=this.getCanvas();e.width=t.x,e.height=t.y,e.style.width=t.x+"px",e.style.height=t.y+"px"},redraw:function(t){this.resizeCanvas(),this.fixPosition(),this.render()},show:function(){this._visiable()},hide:function(){this._unvisiable()},destroy:function(){r.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},update:function(t){void 0!=t&&this.mapvBaseLayer.updateData(t.data,t.options)},removeData:function(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)},removeAllData:function(){this.mapvBaseLayer.clearData()},onResize:function(){},render:function(){this.mapvBaseLayer._canvasUpdate()}}),s=e.mapvLayer=function(t,e,n){return new o(t,e,n)};r.default.zondy.MapvLayer=s},function(t,e,n){var r=n(207),i=n(60),o=n(211),s=n(214);function a(t,e){if(!(this instanceof a))return new a(t);e=e||function(t){if(t)throw t};var n=r(t);if("object"==typeof n){var o=s(n),u=a.projections.get(o.projName);u?(i(this,o),i(this,u),this.init(),e(null,this)):e(t)}else e(t)}a.projections=o,a.projections.start(),t.exports=a},function(t,e){t.exports=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}},function(t,e){t.exports=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}},function(t,e){t.exports=function(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}},function(t,e){t.exports=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnyLine=void 0;var r=n(0),i=n(1),o=function(t,e){var n=void 0!==e?e:{};(0,i.extend)(this,n),this.Arcs=void 0!==t&&null!==t?t:null};e.AnyLine=o,r.Zondy.Object.AnyLine=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPointInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Angle=void 0!==e.Angle&&null!==e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!==e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!==e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!==e.SymWidth?e.SymWidth:1};e.CPointInfo=o,r.Zondy.Object.CPointInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegionInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.EndColor=void 0!==e.EndColor&&null!==e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!==e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!==e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!==e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!==e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!==e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!==e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!==e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!==e.PatWidth?e.PatWidth:1};e.CRegionInfo=o,r.Zondy.Object.CRegionInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPoint=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(46),s=n(7);var a=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return void 0!==t&&null!==t&&void 0!==n&&null!==n&&(o.Dot=new s.Point2D(t,n)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),r(e,[{key:"setDot",value:function(t){this.Dot=void 0!==t&&null!==t?t:null}}]),e}();e.GPoint=a,i.Zondy.Object.GPoint=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLine=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(46);n(64);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.Line=void 0!==t&&null!==t?t:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),r(e,[{key:"setLine",value:function(t){this.Line=void 0!==t&&null!==t?t:null}}]),e}();e.GLine=s,i.Zondy.Object.GLine=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRegion=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(46);n(64);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.Rings=void 0!==t&&null!==t&&Array.isArray(t)?t:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),r(e,[{key:"setRings",value:function(t){this.Rings=void 0!==t&&null!==t?t:null}}]),e}();e.GRegion=s,i.Zondy.Object.GRegion=s},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditServiceBase=void 0;var r=n(0),i=n(10),o=n(1);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.guid=void 0!==n.guid?n.guid:(0,o.newGuid)(),r.baseUrl="igs/rest/mrfs",r.f=void 0!==n.f?n.f:"json",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ServiceBase),e}();e.EditServiceBase=s,r.Zondy.Service.EditServiceBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureStruct=void 0;var r=n(0),i=n(1),o=function(t){var e=t||{};(0,i.extend)(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};o.prototype.toJSON=function(){return(0,i.toJSON)(this)},e.QueryFeatureStruct=o,r.Zondy.Service.QueryFeatureStruct=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPoint=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="Point",(0,o.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Geometry),r(e,null,[{key:"getPointsCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t[n].geometry.length;r++)e.push(t[n].geometry[r].coordinates);return e}},{key:"getPointsCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.point(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPoint=l,Zondy.Service.VPoint=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Geometry=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.coordinates=[]}},function(t,e,n){"use strict";n.r(e),n.d(e,"earthRadius",function(){return r}),n.d(e,"factors",function(){return i}),n.d(e,"unitsFactors",function(){return o}),n.d(e,"areaFactors",function(){return s}),n.d(e,"feature",function(){return a}),n.d(e,"geometry",function(){return u}),n.d(e,"point",function(){return l}),n.d(e,"points",function(){return c}),n.d(e,"polygon",function(){return h}),n.d(e,"polygons",function(){return f}),n.d(e,"lineString",function(){return p}),n.d(e,"lineStrings",function(){return d}),n.d(e,"featureCollection",function(){return y}),n.d(e,"multiLineString",function(){return g}),n.d(e,"multiPoint",function(){return v}),n.d(e,"multiPolygon",function(){return m}),n.d(e,"geometryCollection",function(){return _}),n.d(e,"round",function(){return b}),n.d(e,"radiansToLength",function(){return S}),n.d(e,"lengthToRadians",function(){return x}),n.d(e,"lengthToDegrees",function(){return w}),n.d(e,"bearingToAzimuth",function(){return P}),n.d(e,"radiansToDegrees",function(){return C}),n.d(e,"degreesToRadians",function(){return O}),n.d(e,"convertLength",function(){return T}),n.d(e,"convertArea",function(){return E}),n.d(e,"isNumber",function(){return L}),n.d(e,"isObject",function(){return M}),n.d(e,"validateBBox",function(){return I}),n.d(e,"validateId",function(){return N});var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:1.0936*r},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},s={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function u(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return l(e).geometry;case"LineString":return p(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!L(t[0])||!L(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return l(t,e)}),n)}function h(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return h(t,e)}),n)}function p(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:t},e,n)}function d(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return p(t,e)}),n)}function y(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),a({type:"MultiLineString",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),a({type:"MultiPoint",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),a({type:"MultiPolygon",coordinates:t},e,n)}function _(t,e,n){return void 0===n&&(n={}),a({type:"GeometryCollection",geometries:t},e,n)}function b(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function S(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function x(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function w(t,e){return C(x(t,e))}function P(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function O(t){return t%360*Math.PI/180}function T(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return S(x(t,e),n)}function E(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=s[e];if(!r)throw new Error("invalid original units");var i=s[n];if(!i)throw new Error("invalid final units");return t/r*i}function L(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function M(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!L(t))throw new Error("bbox must only contain numbers")})}function N(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){(function(t){!function(e){"use strict";var n=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function a(t,e,n){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return v(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return u(t,e)}),n)}function c(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return c(t,e)}),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return f(t,e)}),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function y(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function b(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function S(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function x(t,e){return P(S(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function P(t){return t%(2*Math.PI)*180/Math.PI}function C(t){return t%360*Math.PI/180}function O(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(S(t,e),n)}function T(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=o[e];if(!r)throw new Error("invalid original units");var i=o[n];if(!i)throw new Error("invalid final units");return t/r*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function M(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var N=Object.freeze({__proto__:null,earthRadius:n,factors:r,unitsFactors:i,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:c,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:y,multiPoint:g,multiPolygon:v,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:S,lengthToDegrees:x,bearingToAzimuth:w,radiansToDegrees:P,degreesToRadians:C,convertLength:O,convertArea:T,isNumber:E,isObject:L,validateBBox:M,validateId:I});function A(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){a=(c=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var S=s.type;switch(h=!n||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,f,v,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,v,_,b))return!1;f++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,v,_,b))return!1;f++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,v,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===A(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function R(t,e,n,r){var i=n;return A(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function D(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function k(t,e,n){var r=n;return D(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function j(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var r=n;return j(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function B(t){var e=[];return A(t,function(t){e.push(t)}),e}function U(t,e){var n,r,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function G(t,e,n){var r=n;return U(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function q(t,e){U(t,function(t,n,r,i,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},r),n,l))return!1}})}function z(t,e,n){var r=n;return q(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function V(t,e){q(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==A(t,function(o,c,h,p,d){if(void 0===s||n>a||p>u||d>l)return s=o,a=n,u=p,l=d,void(i=0);var y=f([s,o],t.properties);if(!1===e(y,n,r,d,i))return!1;i++,s=o})&&void 0}}})}function Z(t,e,n){var r=n,i=!1;return V(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function W(t,e){if(!t)throw new Error("geojson is required");q(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),n,r,s))return!1}}})}function H(t,e,n){var r=n;return W(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function X(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),f([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),f([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Y(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return u(l,a,e);case"MultiPoint":return i<0&&(i=l.length+i),u(l[i],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),u(l[i][s],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),u(l[i][o][s],a,e)}throw new Error("geojson is invalid")}var Q=Object.freeze({__proto__:null,coordAll:B,coordEach:A,coordReduce:R,featureEach:j,featureReduce:F,findPoint:Y,findSegment:X,flattenEach:q,flattenReduce:z,geomEach:U,geomReduce:G,lineEach:W,lineReduce:H,propEach:D,propReduce:k,segmentEach:V,segmentReduce:Z});function J(t){var e=[1/0,1/0,-1/0,-1/0];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function nt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function rt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var st=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:nt,collectionOf:rt,getGeom:it,getType:ot}),at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))ut.call(n,s)&&(i[s]=n[s]);if(at){r=at(n);for(var a=0;a<r.length;a++)lt.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},ht={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */
function pt(t,e,n){n=n||{};for(var r=Object.keys(ht),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:ht[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&5!==(f=r).cval&&10!==f.cval&&!yt(r)){var s=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],h=c.cval,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],p=vt(c,f);s.push([n+p[0],e+p[1]]),p=vt(c,f=l[h]),s.push([n+p[0],e+p[1]]),gt(c);for(var d=n+a[h],y=e+u[h],g=h;d>=0&&y>=0&&y<o&&(d!=n||y!=e)&&void 0!==(c=t[y][d]);){if(0===(h=c.cval)||15===h)return{path:s,info:"mergeable"};f=l[h],r=a[h],i=u[h],5!==h&&10!==h||(5===h?c.flipped?-1===u[g]?(f="left",r=-1,i=0):(f="right",r=1,i=0):-1===a[g]&&(f="bottom",r=0,i=-1):10===h&&(c.flipped?-1===a[g]?(f="top",r=0,i=1):(f="bottom",r=0,i=-1):1===u[g]&&(f="left",r=-1,i=0))),p=vt(c,f),s.push([d+p[0],y+p[1]]),gt(c),d+=r,y+=i,g=h}return{path:s,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],l=s.path[s.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=s.path.length-2;h>=0;--h)e[c].unshift(s.path[h]);a=!0;break}a||(e[n++]=s.path)}var f})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,p,d,y,g=!1;if(5==(a|=h>=e?1:0)||10===a){var v=(u+l+c+h)/4;5===a&&v<e?(a=10,g=!0):10===a&&v<e&&(a=5,g=!0)}0!==a&&15!==a&&(f=p=d=y=.5,1===a?(d=1-dt(e,u,h),p=1-dt(e,c,h)):2===a?(p=dt(e,h,c),y=1-dt(e,l,c)):3===a?(d=1-dt(e,u,h),y=1-dt(e,l,c)):4===a?(f=dt(e,u,l),y=dt(e,c,l)):5===a?(f=dt(e,u,l),y=dt(e,c,l),p=1-dt(e,c,h),d=1-dt(e,u,h)):6===a?(p=dt(e,h,c),f=dt(e,u,l)):7===a?(d=1-dt(e,u,h),f=dt(e,u,l)):8===a?(d=dt(e,h,u),f=1-dt(e,l,u)):9===a?(p=1-dt(e,c,h),f=1-dt(e,l,u)):10===a?(f=1-dt(e,l,u),y=1-dt(e,l,c),p=dt(e,h,c),d=dt(e,h,u)):11===a?(f=1-dt(e,l,u),y=1-dt(e,l,c)):12===a?(d=dt(e,h,u),y=dt(e,c,l)):13===a?(p=1-dt(e,c,h),y=dt(e,c,l)):14===a?(d=dt(e,h,u),p=dt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:g,top:f,right:y,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(a),a}function dt(t,e,n){return(t-e)/(n-e)}function yt(t){return 0===t.cval||15===t.cval}function gt(t){yt(t)||5===t.cval||10===t.cval||(t.cval=15)}function vt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var mt=bt,_t=bt;function bt(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}var h=e[n],f=r,p=i;for(St(e,r,n),o(e[i],h)>0&&St(e,r,i);f<p;){for(St(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?St(e,r,p):St(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||xt)}function St(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function xt(t,e){return t<e?-1:t>e?1:0}mt.default=_t;var wt=Ct,Pt=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ot(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Tt(t,e){Et(t,0,t.children.length,e,t)}function Et(t,e,n,r,i){i||(i=kt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Lt(i,t.leaf?r(o):o);return i}function Lt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Mt(t,e){return t.minX-e.minX}function It(t,e){return t.minY-e.minY}function Nt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function At(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Rt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Dt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function kt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,mt(t,o,e,n,i),s.push(e,o,o,n))}function Ft(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Dt(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Dt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Rt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Dt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Dt(t,s=e.leaf?n(o):o)){if(e.leaf||Rt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=kt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=Ot(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Rt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Mt,compareMinY:It,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Tt(i=kt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=kt([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(jt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(jt(t,a,l=Math.min(a+f-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Tt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Nt(s=e.children[i]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Lt(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=kt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Tt(n,this.toBBox),Tt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=kt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Tt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c,h,f,p,d,y,g;for(u=l=1/0,r=e;r<=n-e;r++)i=Et(t,0,r,this.toBBox),o=Et(t,r,n,this.toBBox),h=i,f=o,p=void 0,d=void 0,y=void 0,g=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),y=Math.min(h.maxX,f.maxX),g=Math.min(h.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,g-d),a=Nt(i)+Nt(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Mt,i=t.leaf?this.compareMinY:It;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Et(t,0,e,s),u=Et(t,n-e,n,s),l=At(a)+At(u);for(i=e;i<n-e;i++)o=t.children[i],Lt(a,t.leaf?s(o):o),l+=At(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Lt(u,t.leaf?s(o):o),l+=At(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Lt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Tt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},wt.default=Pt;var Bt=function(t,e,n){var r=t*e,i=Ut*t,o=i-(i-t),s=t-o,a=Ut*e,u=a-(a-e),l=e-u,c=s*l-(r-o*u-s*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Ut=+(Math.pow(2,27)+1),Gt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(h=t[u],f=c(h))):(o=p,(l+=1)<r&&(p=e[l],d=c(p))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(h=t[u],f=c(h))):(i=p,(l+=1)<r&&(p=e[l],d=c(p)));for(var y,g,v=i+o,m=v-i,_=o-m,b=_,S=v;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(h=t[u],f=c(h))):(i=p,(l+=1)<r&&(p=e[l],d=c(p))),(_=(o=b)-(m=(v=i+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y;for(;u<n;)(_=(o=b)-(m=(v=(i=h)+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=b)-(m=(v=(i=p)+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y,(l+=1)<r&&(p=e[l]);return b&&(s[a++]=b),S&&(s[a++]=S),a||(s[a++]=0),s.length=a,s},qt=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},zt=function(t,e){var n=t.length;if(1===n){var r=Bt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Bt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Bt(t[u],e,s);var l=o[1];qt(l,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Vt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(h=t[u],f=c(h))):(o=p,(l+=1)<r&&(p=-e[l],d=c(p))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(h=t[u],f=c(h))):(i=p,(l+=1)<r&&(p=-e[l],d=c(p)));for(var y,g,v=i+o,m=v-i,_=o-m,b=_,S=v;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(h=t[u],f=c(h))):(i=p,(l+=1)<r&&(p=-e[l],d=c(p))),(_=(o=b)-(m=(v=i+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y;for(;u<n;)(_=(o=b)-(m=(v=(i=h)+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=b)-(m=(v=(i=p)+o)-i))&&(s[a++]=_),b=S-((y=S+v)-(g=y-S))+(v-g),S=y,(l+=1)<r&&(p=-e[l]);return b&&(s[a++]=b),S&&(s[a++]=S),a||(s[a++]=0),s.length=a,s},Zt=Ft(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var l=n(i),c=n(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Gt,Bt,zt,Vt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var u=3.3306690738754716e-16*r;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*c,y=a*l,g=a*u,v=i*c,m=i*l,_=o*u,b=h*(d-y)+f*(g-v)+p*(m-_),S=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(h)+(Math.abs(g)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>S||-b>S?b:s(t,e,n,r)}];!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()}),Wt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],l=o.length;l>1&&Ht(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Ht(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var f=s.length-2;f>0;--f)n[c++]=s[f];return n},Ht=Zt[3],Xt=Qt,Yt=Qt;function Qt(t,e){if(!(this instanceof Qt))return new Qt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Jt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Jt(t,e){return t<e?-1:t>e?1:0}Qt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Xt.default=Yt;var Kt=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>r!=c>r&&n<(l-a)*(r-u)/(c-u)+a&&(i=!i)}return i},$t=Zt[3],te=ne,ee=ne;function ne(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)Kt(t[o],a)||u.push(t[o]);var l=Wt(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=wt(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=le(u,r),s.push(r)}var l=wt(16);for(a=0;a<s.length;a++)l.insert(ue(s[a]));for(var c=e*e,h=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=ce(p,d);if(!(y<h)){var g=y/c;(u=re(o,f.prev.p,p,d,f.next.next.p,g,l))&&Math.min(ce(u,p),ce(u,d))<=g&&(s.push(f),s.push(le(u,f)),o.remove(u),l.remove(f),l.insert(ue(f)),l.insert(ue(f.next)))}}f=r;var v=[];do{v.push(f.p),f=f.next}while(f!==r);return v.push(f.p),v}function re(t,e,n,r,i,o,s){for(var a=new Xt(null,ie),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?he(c,n,r):oe(n,r,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=he(p,e,n),y=he(p,r,i);if(f.dist<d&&f.dist<y&&ae(n,p,s)&&ae(r,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function ie(t,e){return t.dist-e.dist}function oe(t,e,n){if(se(t,n)||se(e,n))return 0;var r=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=fe(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=fe(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function se(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ae(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(s=e)&&i!==o&&$t(r,i,o)>0!=$t(r,i,s)>0&&$t(o,s,r)>0!=$t(o,s,i)>0)return!1;return!0}function ue(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function le(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function ce(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function he(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function fe(t,e,n,r,i,o,s,a){var u,l,c,h,f=n-t,p=r-e,d=s-i,y=a-o,g=t-i,v=e-o,m=f*f+p*p,_=f*d+p*y,b=d*d+y*y,S=f*g+p*v,x=d*g+y*v,w=m*b-_*_,P=w,C=w;0===w?(l=0,P=1,h=x,C=b):(h=m*x-_*S,(l=_*x-b*S)<0?(l=0,h=x,C=b):l>P&&(l=P,h=x+_,C=b)),h<0?(h=0,-S<0?l=0:-S>m?l=P:(l=-S,P=m)):h>C&&(h=C,-S+_<0?l=0:-S+_>m?l=P:(l=-S+_,P=m));var O=(1-(c=0===h?0:h/C))*i+c*s-((1-(u=0===l?0:l/P))*t+u*n),T=(1-c)*o+c*a-((1-u)*e+u*r);return O*O+T*T}function pe(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(A(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var r=te(n,e.concavity);return r.length>3?c([r]):null}function de(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=K(t),i=it(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(ye(r,a[l][0],n.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)ye(r,a[l][h],!n.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function ye(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function ge(t,e){var n=[];return j(t,function(t){var r=!1;if("Point"===t.geometry.type)U(e,function(e){de(t,e)&&(r=!0)}),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];U(e,function(e){A(t,function(t){de(t,e)&&(r=!0,i.push(t))})}),r&&n.push(g(i))}}),d(n)}function ve(t,e,n){void 0===n&&(n={});var r=K(t),i=K(e),o=C(i[1]-r[1]),s=C(i[0]-r[0]),a=C(r[1]),u=C(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function me(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(be);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var f,p=l-u,d=h-c,y=p>d?p:d,g=.5*(l+u),v=.5*(h+c),m=[new _e({__sentinel:!0,x:g-20*y,y:v-y},{__sentinel:!0,x:g,y:v+20*y},{__sentinel:!0,x:g+20*y,y:v-y})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,f=m.length;f--;)(p=t[a].x-m[f].x)>0&&p*p>m[f].r?(_.push(m[f]),m.splice(f,1)):p*p+(d=t[a].y-m[f].y)*d>m[f].r||(b.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1));for(Se(b),f=b.length;f;)n=b[--f],e=b[--f],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>1e-12&&m.push(new _e(e,n,r))}for(Array.prototype.push.apply(_,m),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,r,i,e]],o)}))}te.default=ee;var _e=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function be(t,e){return e.x-t.x}function Se(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function xe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return we(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return we(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Pe(t);default:throw new Error("unknown GeoJSON type")}}function we(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(r){var i=e[r];"object"==typeof i?null===i?n[r]=null:Array.isArray(i)?n[r]=i.map(function(t){return t}):n[r]=t(i):n[r]=i}),n):n}(t.properties),e.geometry=Pe(t.geometry),e}function Pe(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Pe(t)}),e):(e.coordinates=function t(e){var n=e;return"object"!=typeof n[0]?n.slice():n.map(function(e){return t(e)})}(t.coordinates),e)}function Ce(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Te(t,e){var n=function(t){if(null==t)return Oe;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}var Ee=Object.prototype.hasOwnProperty;function Le(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;return{set:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o},get:function(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ie=new ArrayBuffer(16),Ne=new Float64Array(Ie),Ae=new Uint32Array(Ie);function Re(t){Ne[0]=t[0],Ne[1]=t[1];var e=Ae[0]^Ae[1];return 2147483647&(e=e<<5^e>>7^Ae[2]^Ae[3])}function De(t,e,n,r){ke(t,e,n),ke(t,e,e+r),ke(t,e+r,n)}function ke(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function je(t){var e={type:"GeometryCollection",geometries:t.features.map(Fe)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Fe(t){var e,n=Be(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Be(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Be)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ue(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Ee.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?je:"Feature"===n.type?Fe:Be)(n);return r}(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,u=s-i?(n-1)/(s-i):1;function l(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*u)]}function c(t,e){for(var n,o,s,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],l=Math.round((n[0]-r)*a),c=Math.round((n[1]-i)*u),l===o&&c===s||(d[f++]=[o=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Ee.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var g in t)d(t[g]);return{scale:[1/a,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var l=Le(2*u*1.4,Re,Me),c=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{h(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,s,a,u,h;if(r=l.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(n=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,s;if(n=l.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(y(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(g(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+v(t)]))for(i=0,s=n.length;i<s;++i){if(y(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(g(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Me(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!Me(o[n],o[s]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=v(t),a=v(e),u=0;u<i;++u)if(!Me(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=v(t),l=a-v(e),c=0;c<a;++c)if(!Me(o[n+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function v(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=Le(1.4*o.length,S,x,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)l[e]=c[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],y=d[0],g=d[1];for(r=u[y],i=u[++y],++p,f[r]=1;++y<=g;)b(e,r,r=i,i=u[y]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var v=a[e],m=v[0]+1,_=v[1];for(b(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)b(e,r,r=i,i=u[m])}function b(t,e,n,r){if(l[n]!==t){l[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else c[n]=e,h[n]=r}}function S(t){return Re(o[t])}function x(t,e){return Me(o[t],o[e])}l=c=h=null;var w,P=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*p,Re,Me);for(e=0,n=o.length;e<n;++e)f[w=u[e]]&&P.add(o[w]);return P}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],f=h[0],p=f,d=h[1],y=i.has(o[f]);++p<d;)i.has(o[p])&&(y?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(De(o,f,d,d-p),o[d]=o[f],y=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Ee.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=Le(1.4*i.arcs.length,Ge,qe);function a(t){t&&Ee.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)r=(l=o[s])[0],i=l[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function Ge(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function qe(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function ze(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=xe(t));var n=[];q(t,function(t){n.push(t.geometry)});var r=Ue({geoms:m(n).geometry});return function(t){return Te(t,function(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Te(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),(r=(i=function(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n}),a(i,r),a(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<r;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i}).filter(function(t){return t.length>0})}}.apply(this,arguments))}(r,r.objects.geoms.geometries)}function Ve(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=function(t){var e={};q(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=[],i=H(t,function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ce(r[0]),s=Ce(r[r.length-1]),a=Ce(i[0]),u=Ce(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return f(n)}(t,e);return n||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:y(r.map(function(t){return t.coordinates})):null}(i,e);case"Polygon":return ze(i,e);default:throw new Error(r+" is not supported")}}function Ze(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=ot(t),i=[];switch(r){case"LineString":i=We(t);break;case"MultiLineString":case"Polygon":$(t).forEach(function(t){i.push(We(t))});break;case"MultiPolygon":$(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(We(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):s({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function We(t){var e=$(t);if(2===e.length&&!He(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&Xe(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,He(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return Xe(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function He(t,e){return t[0]===e[0]&&t[1]===e[1]}function Xe(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0==(r-o)*c-(i-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=a:a<=r&&r<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)}function Ye(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function Qe(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var s,a=i,u=n+1;u<r;u++){var l=Ye(e[u],e[n],e[r]);l>a&&(s=u,a=l)}a>i&&(s-n>1&&t(e,n,s,i,o),o.push(e[s]),r-s>1&&t(e,s,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}function Je(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=Qe(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)n=t[l],i=a,o=void 0,s=void 0,o=(r=n).x-i.x,s=r.y-i.y,o*o+s*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function Ke(t,e,n){return Je(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function $e(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=Je(r,e,n).map(function(t){return[t.x,t.y]});!tn(i);)i=Je(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function tn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var en=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function nn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=it(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new en({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(i,e.properties)}function rn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return c([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function on(t){return rn(J(t))}function sn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(ve(t.slice(0,2),[r,n])>=ve(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function an(t,e,n,r){void 0===r&&(r={});var i=K(t),o=C(i[0]),s=C(i[1]),a=C(n),l=S(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([P(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),P(c)],r.properties)}function un(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(an(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),c([o],i)}function ln(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=ln(e,t);return n=(n+180)%360}(t,e);var r=K(t),i=K(e),o=C(r[0]),s=C(i[0]),a=C(r[1]),u=C(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return P(Math.atan2(l,c))}function cn(t,e){void 0===e&&(e={});var n=J(t);return u([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function hn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return A(t,function(t){n+=t[0],r+=t[1],i++},!0),u([n/i,r/i],e.properties)}function fn(t){var e=[];return"FeatureCollection"===t.type?j(t,function(t){A(t,function(n){e.push(u(n,t.properties))})}):A(t,function(n){e.push(u(n,t.properties))}),d(e)}var pn=yn,dn=yn;function yn(t,e,n){n=n||2;var r,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=gn(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=gn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(On(s));for(a.sort(wn),i=0;i<a.length;i++)Pn(a[i],n),n=vn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return mn(f,p,n,r,i,l),p}function gn(t,e,n,r,i){var o,s;if(i===jn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Rn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Rn(o,t[o],t[o+1],s);return s&&Mn(s,s.next)&&(Dn(s),s=s.next),s}function vn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Mn(r,r.next)&&0!==Ln(r.prev,r,r.next))r=r.next;else{if(Dn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function mn(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Cn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?bn(t,r,i,o):_n(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Dn(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?mn(t=Sn(t,e,n),e,n,r,i,o,2):2===s&&xn(t,e,n,r,i,o):mn(vn(t),e,n,r,i,o,1);break}}}function _n(t){var e=t.prev,n=t,r=t.next;if(Ln(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Tn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ln(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function bn(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Ln(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Cn(a,u,e,n,r),f=Cn(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Tn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ln(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Tn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Tn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ln(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Tn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Sn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Mn(i,o)&&In(i,r,r.next,o)&&Nn(i,o)&&Nn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Dn(r),Dn(r.next),r=t=o),r=r.next}while(r!==t);return r}function xn(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&En(s,a)){var u=An(s,a);return s=vn(s,s.next),u=vn(u,u.next),mn(s,e,n,r,i,o),void mn(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function wn(t,e){return t.x-e.x}function Pn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Tn(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Nn(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=An(e,t);vn(n,n.next)}}function Cn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function On(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Tn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function En(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&In(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Nn(t,e)&&Nn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Ln(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Mn(t,e){return t.x===e.x&&t.y===e.y}function In(t,e,n,r){return!!(Mn(t,e)&&Mn(n,r)||Mn(t,r)&&Mn(n,e))||Ln(t,e,n)>0!=Ln(t,e,r)>0&&Ln(n,r,t)>0!=Ln(n,r,e)>0}function Nn(t,e){return Ln(t.prev,t,t.next)<0?Ln(t,e,t.next)>=0&&Ln(t,t.prev,e)>=0:Ln(t,e,t.prev)<0||Ln(t,t.next,e)<0}function An(t,e){var n=new kn(t.i,t.x,t.y),r=new kn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Rn(t,e,n,r){var i=new kn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Dn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Fn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=pn(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(c([s]))}return r}function Bn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return j(e,function(e,n){var o=ve(t,e);o<r&&(i=n,r=o)}),(n=xe(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Un(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=$(r);break;case"LineString":n=[$(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=f([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}yn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(jn(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(jn(t,l,c,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},yn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},pn.default=dn;var Gn=Ft(function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return r(t,e)}),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return i(t,e)}),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return o(t,e)}),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function qn(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){a=(c=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var S=s.type;switch(h=!n||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,f,v,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,v,_,b))return!1;f++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,v,_,b))return!1;f++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,v,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===qn(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function zn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function Vn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Zn(t,e){var n,r,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function Wn(t,e){Zn(t,function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Gn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Gn.feature(l,r),n,u))return!1}})}function Hn(t,e){Wn(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==qn(t,function(o,c,h,f,p){if(void 0===s||n>a||f>u||p>l)return s=o,a=n,u=f,l=p,void(i=0);var d=Gn.lineString([s,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,s=o})&&void 0}}})}function Xn(t,e){if(!t)throw new Error("geojson is required");Wn(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Gn.lineString(o[s],t.properties),n,r,s))return!1}}})}var Yn=qn,Qn=Vn,Jn=Wn,Kn=Zn,$n=Xn,tr=zn,er=Hn,nr=Object.defineProperty({coordAll:function(t){var e=[];return qn(t,function(t){e.push(t)}),e},coordEach:Yn,coordReduce:function(t,e,n,r){var i=n;return qn(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i},featureEach:Qn,featureReduce:function(t,e,n){var r=n;return Vn(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r},findPoint:function(t,e){if(e=e||{},!Gn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Gn.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Gn.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Gn.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Gn.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Gn.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Gn.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(e=e||{},!Gn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Gn.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Gn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Gn.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Gn.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},flattenEach:Jn,flattenReduce:function(t,e,n){var r=n;return Wn(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r},geomEach:Kn,geomReduce:function(t,e,n){var r=n;return Zn(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r},lineEach:$n,lineReduce:function(t,e,n){var r=n;return Xn(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r},propEach:tr,propReduce:function(t,e,n){var r=n;return zn(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r},segmentEach:er,segmentReduce:function(t,e,n){var r=n,i=!1;return Hn(t,function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}},"__esModule",{value:!0});function rr(t){var e=[1/0,1/0,-1/0,-1/0];return nr.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}rr.default=rr;var ir=rr,or=Object.defineProperty({default:ir},"__esModule",{value:!0}).default,sr=nr.featureEach,ar=(nr.coordEach,Gn.polygon,Gn.featureCollection);function ur(t){var e=wt(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:or(t),wt.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:or(t),e.push(t)}):sr(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:or(t),e.push(t)}),wt.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:or(t),wt.prototype.remove.call(this,t,e)},e.clear=function(){return wt.prototype.clear.call(this)},e.search=function(t){var e=wt.prototype.search.call(this,this.toBBox(t));return ar(e)},e.collides=function(t){return wt.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=wt.prototype.all.call(this);return ar(t)},e.toJSON=function(){return wt.prototype.toJSON.call(this)},e.fromJSON=function(t){return wt.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=or(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=or(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var lr=ur,cr=ur;function hr(t,e){var n={},r=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=fr(t,e);return i&&r.push(i),d(r)}var o=lr();return o.load(Un(e)),j(Un(t),function(t){j(o.search(t),function(e){var i=fr(t,e);if(i){var o=$(i).join(",");n[o]||(n[o]=!0,r.push(i))}})}),d(r)}function fr(t,e){var n=$(t),r=$(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],l=r[0][0],c=r[0][1],h=r[1][0],f=r[1][1],p=(f-c)*(s-i)-(h-l)*(a-o),d=(h-l)*(o-c)-(f-c)*(i-l),y=(s-i)*(o-c)-(a-o)*(i-l);if(0===p)return null;var g=d/p,v=y/p;return g>=0&&g<=1&&v>=0&&v<=1?u([i+g*(s-i),o+g*(a-o)]):null}function pr(t,e,n){void 0===n&&(n={});var r=u([1/0,1/0],{dist:1/0}),i=0;return q(t,function(t){for(var o=$(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=ve(e,a,n);var l=u(o[s+1]);l.properties.dist=ve(e,l,n);var c=ve(a,l,n),h=Math.max(a.properties.dist,l.properties.dist),p=ln(a,l),d=an(e,h,p+90,n),y=an(e,h,p-90,n),g=hr(f([d.geometry.coordinates,y.geometry.coordinates]),f([a.geometry.coordinates,l.geometry.coordinates])),v=null;g.features.length>0&&((v=g.features[0]).properties.dist=ve(e,v,n),v.properties.location=i+ve(a,v,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=i),l.properties.dist<r.properties.dist&&((r=l).properties.index=s+1,r.properties.location=i+c),v&&v.properties.dist<r.properties.dist&&((r=v).properties.index=s),i+=c}}),r}function dr(t,e,r){void 0===r&&(r={});var i=K(t),o=K(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,O(function(t,e,r){var i=r=void 0===r?n:Number(r),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*i}(i,o),"meters",r.units)}function yr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):nt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):nt(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return V(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=gr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return vr(t,e,{method:r.method,units:"degrees"});var s=gr(i,i);if(s<=o)return vr(t,n,{method:r.method,units:"degrees"});var a=o/s,u=[e[0]+a*i[0],e[1]+a*i[1]];return vr(t,u,{method:r.method,units:"degrees"})}(i,e,o,n);s<r&&(r=s)}),O(r,"degrees",n.units)}function gr(t,e){return t[0]*e[0]+t[1]*e[1]}function vr(t,e,n){return"planar"===n.method?dr(t,e,n):ve(t,e,n)}function mr(t,e,n,r,i,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(l=e-o)-(r-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function _r(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([s(t)]):d([t]):t}(t),n=cn(e),r=!1,i=0;!r&&i<e.features.length;){var o,a=e.features[i].geometry,l=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(r=!0);else if("MultiPoint"===a.type){var c=!1;for(o=0;!c&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(r=!0,c=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)br(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,r=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){l=!1,o=0;for(var f=a.coordinates[h];!l&&o<f.length-1;)br(n.geometry.coordinates[0],n.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(l=!0,r=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||de(n,a)&&(r=!0);i++}if(r)return n;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(fn(e.features[i]).features);return u(Bn(n,p).geometry.coordinates)}function br(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}lr.default=cr;var Sr=6378137;function xr(t){return G(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return wr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=wr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function wr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Pr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Pr(t[n]))}return e}function Pr(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(Cr(t[o][0])-Cr(e[0]))*Math.sin(Cr(n[1]));a=a*Sr*Sr/2}return a}function Cr(t){return t*Math.PI/180}function Or(t,e){return void 0===e&&(e={}),Z(t,function(t,n){var r=n.geometry.coordinates;return t+ve(r[0],r[1],e)},0)}function Tr(t,e,n,r){if(!L(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,c=0,h=0;h<i.length&&!(e>=c&&h===i.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[h]),f(o);a=ln(i[h],i[h-1])-180,u=an(i[h],s,a,r),o.push(u.geometry.coordinates)}if(c>=n)return(s=n-c)?(a=ln(i[h],i[h-1])-180,u=an(i[h],s,a,r),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(c>=e&&o.push(i[h]),h===i.length-1)return f(o);c+=ve(i[h],i[h+1],r)}if(c<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return f([p,p])}function Er(t,e,n){void 0===n&&(n={});for(var r=K(t),i=$(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Lr(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Lr(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(n[0]-a)*f-(n[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===r?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===r&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function Mr(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Nr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Er(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return de(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Nr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Er(t.coordinates[r],e))return!1;n||(n=Er(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=de(t.coordinates[1],e))){n=!1;break}r=de(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Er(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){var n=J(e),r=J(t);if(!Ir(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!de(t.coordinates[o],e))return!1;i||(i=de(t.coordinates[o],e,{ignoreBoundary:!0})),i||(i=de(Ar(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0}))}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!Ir(J(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!de(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ir(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Nr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ar(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Rr(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],l=e/ve([i,o],[s,o],n)*(s-i),c=e/ve([i,o],[i,a],n)*(a-o),h=s-i,f=a-o,p=Math.floor(h/l),y=(f-Math.floor(f/c)*c)/2,g=i+(h-p*l)/2;g<=s;){for(var v=o+y;v<=a;){var m=u([g,v],n.properties);n.mask?Mr(m,n.mask)&&r.push(m):r.push(m),v+=c}g+=l}return d(r)}function Dr(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return A(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function kr(t){if(!t)throw new Error("geojson is required");var e=[];return q(t,function(t){e.push(t)}),d(e)}function jr(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!jr(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Fr(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];zr(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(y(a,u));var l=wt();l.load(s)}for(var c=0;c<r.length;c++)for(var h=0;h<r[c].length-1;h++)if(n)l.search(y(c,h)).forEach(function(t){var e=t.ring,n=t.edge;d(c,h,e,n)});else for(var f=0;f<r.length;f++)for(var p=0;p<r[f].length-1;p++)d(c,h,f,p);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,s,a){var u,l,c=r[t][n],h=r[t][n+1],f=r[s][a],p=r[s][a+1],d=function(t,e,n,r){if(jr(t,n)||jr(t,r)||jr(e,n)||jr(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],c=r[0],h=r[1],f=(i-s)*(l-h)-(o-a)*(u-c);return 0===f?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/f,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var y=d,g=!o[y];g&&(o[y]=!0),e?i.push(e(d,t,n,c,h,u,s,a,f,p,l,g)):i.push(d)}}function y(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}(t,function(t,e,n,r,i,o,s,a,u,l,c,h){return[t,e,n,r,i,o,s,a,u,l,c,h]}),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(c([t.geometry.coordinates[r]],{parent:-1,winding:qr(t.geometry.coordinates[r])}));var l=d(u);return F(),B(),l}var h=[],f=[];for(r=0;r<e;r++){h.push([]);for(var p=0;p<t.geometry.coordinates[r].length-1;p++)h[r].push([new Br(t.geometry.coordinates[r][Vr(p+1,t.geometry.coordinates[r].length-1)],1,[r,p],[r,Vr(p+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new Ur(t.geometry.coordinates[r][p],[r,Vr(p-1,t.geometry.coordinates[r].length-1)],[r,p],void 0,void 0,!1,!0))}for(r=0;r<a;r++)h[s[r][1]][s[r][2]].push(new Br(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new Ur(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var y=f.length;for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)h[r][p].sort(function(t,e){return t.param<e.param?-1:1});var g=[];for(r=0;r<y;r++)g.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var v=wt();for(v.load(g),r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(var m=0;m<h[r][p].length;m++){b=m==h[r][p].length-1?h[r][Vr(p+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][p][m+1].coord;var _=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[r][p][m].nxtIsectAlongEdgeIn=_.index}for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(m=0;m<h[r][p].length;m++){var b=h[r][p][m].coord,S=(_=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;S<o?f[S].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn:zr(f[S].ringAndEdge1,h[r][p][m].ringAndEdgeIn)?f[S].nxtIsectAlongRingAndEdge1=h[r][p][m].nxtIsectAlongEdgeIn:f[S].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn}var x=[];for(r=0,p=0;p<e;p++){var w=r;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[r].coord[0]<f[w].coord[0]&&(w=r),r++;var P=f[w].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==w||f[m].nxtIsectAlongRingAndEdge2==w){var C=m;break}var O=Gr([f[C].coord,f[w].coord,f[P].coord],!0)?1:-1;x.push({isect:w,parent:-1,winding:O})}for(x.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}),u=[];x.length>0;){var T=x.pop(),E=T.isect,L=T.parent,M=T.winding,I=u.length,N=[f[E].coord],A=E;if(f[E].ringAndEdge1Walkable)var R=f[E].ringAndEdge1,D=f[E].nxtIsectAlongRingAndEdge1;else R=f[E].ringAndEdge2,D=f[E].nxtIsectAlongRingAndEdge2;for(;!zr(f[E].coord,f[D].coord);){N.push(f[D].coord);var k=void 0;for(r=0;r<x.length;r++)if(x[r].isect==D){k=r;break}if(null!=k&&x.splice(k,1),zr(R,f[D].ringAndEdge1)){if(R=f[D].ringAndEdge2,f[D].ringAndEdge2Walkable=!1,f[D].ringAndEdge1Walkable){var j={isect:D};Gr([f[A].coord,f[D].coord,f[f[D].nxtIsectAlongRingAndEdge2].coord],1==M)?(j.parent=L,j.winding=-M):(j.parent=I,j.winding=M),x.push(j)}A=D,D=f[D].nxtIsectAlongRingAndEdge2}else R=f[D].ringAndEdge1,f[D].ringAndEdge1Walkable=!1,f[D].ringAndEdge2Walkable&&(j={isect:D},Gr([f[A].coord,f[D].coord,f[f[D].nxtIsectAlongRingAndEdge1].coord],1==M)?(j.parent=L,j.winding=-M):(j.parent=I,j.winding=M),x.push(j)),A=D,D=f[D].nxtIsectAlongRingAndEdge1}N.push(f[D].coord),u.push(c([N],{index:I,parent:L,winding:M,netWinding:void 0}))}function F(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<l.features.length;r++)t[e]!=r&&de(l.features[t[e]].geometry.coordinates[0][0],l.features[r],{ignoreBoundary:!0})&&xr(l.features[r])<1/0&&(n=r);l.features[t[e]].properties.parent=n}}function B(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,U(t,e)}}function U(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var r=e+l.features[n].properties.winding;l.features[n].properties.netWinding=r,U(n,r)}}return l=d(u),F(),B(),l}var Br=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Ur=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Gr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function qr(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Gr([t[Vr(e-1,t.length-1)],t[e],t[Vr(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function zr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!zr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Vr(t,e){return(t%e+e)%e}var Zr=Math.PI/180,Wr=180/Math.PI,Hr=function(t,e){this.lon=t,this.lat=e,this.x=Zr*t,this.y=Zr*e};Hr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Hr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Hr(e,t)};var Xr=function(){this.coords=[],this.length=0};Xr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Yr=function(t){this.properties=t||{},this.geometries=[]};Yr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Yr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Qr=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Hr(t.x,t.y),this.end=new Hr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Jr(t,e){var n=[],r=lr();return q(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=$r(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),j(Kr(o,e),function(t){n.push(t),r.insert(t)})}}else(n=Kr(t,e).features).forEach(function(t){t.bbox||(t.bbox=sn(J(t)))}),r.load(d(n))}),d(n)}function Kr(t,e){var n=[],r=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if(ti(r,K(e))||ti(i,K(e)))return d([t]);var o=lr(),s=Un(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=$r(e,a),l=F(s,function(t,r,i){var o=$(r)[1],s=K(e);return i===u.id?(t.push(s),n.push(f(t)),ti(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return l.length>1&&n.push(f(l)),d(n)}function $r(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return j(e,function(e){var i=pr(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function ti(t,e){return t[0]===e[0]&&t[1]===e[1]}function ei(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=ni(n),a=ni(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(un(t,e,i).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,h=l,p=[],d=0;h<c;)p.push(an(t,e,h,i).geometry.coordinates),h=l+360*++d/o;return h>c&&p.push(an(t,e,c,i).geometry.coordinates),f(p,u)}function ni(t){var e=t%360;return e<0&&(e+=360),e}function ri(t,e){void 0===e&&(e={});var n=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return ii(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=it(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach(function(t){i.push(oi(t,r))}),d(i)}(n,e);default:throw new Error("invalid poly")}}function ii(t,e){return void 0===e&&(e={}),oi(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function oi(t,e){return t.length>1?y(t,e):f(t[0],e)}function si(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=xe(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push($(ai(t,{},s,a)))}),v(u,o);default:return ai(t,o,s,a)}}function ai(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=ui(o)),c([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(n&&(t=ui(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(J(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),c(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function ui(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function li(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(hi(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(hi(a=t[s],e)&r))!==o&&n.push(ci(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function ci(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function hi(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function fi(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=li(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}Qr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Wr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Wr*Math.atan2(i,r),s]},Qr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<n.length;++p){var d=n[p-1][0],y=n[p][0],g=Math.abs(y-d);g>f&&(y>c&&d<h||d>c&&y<h)?a=!0:g>u&&(u=g)}var v=[];if(a&&u<l){var m=[];v.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var S=parseFloat(n[_-1][0]),x=parseFloat(n[_-1][1]),w=parseFloat(n[_][0]),P=parseFloat(n[_][1]);if(S>-180&&S<h&&180===w&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(S>c&&S<180&&-180===w&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(S<h&&w>c){var C=S;S=w,w=C;var O=x;x=P,P=O}if(S>c&&w<h&&(w+=360),S<=180&&w>=180&&S<w){var T=(180-S)/(w-S),E=T*P+(1-T)*x;m.push([n[_-1][0]>c?180:-180,E]),(m=[]).push([n[_-1][0]>c?-180:180,E]),v.push(m)}else m=[],v.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var L=[];v.push(L);for(var M=0;M<n.length;++M)L.push([n[M][0],n[M][1]])}for(var I=new Yr(this.properties),N=0;N<v.length;++N){var A=new Xr;I.geometries.push(A);for(var R=v[N],D=0;D<R.length;++D)A.move_to(R[D])}return I};var pi=Ft(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),di=Ft(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}),yi=Ft(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(di(t))return!!di(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=pi(t),c=pi(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}});function gi(t,e,n){if(void 0===n&&(n={}),!L(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=lr(),a=Un(t);return s.load(a),V(e,function(t){var e=!1;t&&(j(s.search(t),function(n){if(!1===e){var o=$(t).sort(),s=$(n).sort();yi(o,s)||(0===i?Er(o[0],n)&&Er(o[1],n):pr(n,o[0]).properties.dist<=i&&pr(n,o[1]).properties.dist<=i)?(e=!0,r=r?vi(r,t):t):(0===i?Er(s[0],t)&&Er(s[1],t):pr(t,s[0]).properties.dist<=i&&pr(t,s[1]).properties.dist<=i)&&(r=r?vi(r,n):n)}}),!1===e&&r&&(o.push(r),r=void 0))}),r&&o.push(r),d(o)}function vi(t,e){var n=$(e),r=$(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return yi(n[0],i)?s.unshift(n[1]):yi(n[0],o)?s.push(n[1]):yi(n[1],i)?s.unshift(n[0]):yi(n[1],o)&&s.push(n[0]),t}function mi(t){var e=t%360;return e<0&&(e+=360),e}function _i(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?bi(K(e),K(t)):bi(K(t),K(e)))>180?-(360-r):r}function bi(t,e){var n=C(t[1]),r=C(e[1]),i=C(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(P(Math.atan2(i,o))+360)%360}function Si(t,e,r,i){void 0===i&&(i={});var o=e<0,s=O(Math.abs(e),i.units,"meters");o&&(s=-Math.abs(s));var a=K(t),l=function(t,e,r,i){i=void 0===i?n:Number(i);var o=e/i,s=t[0]*Math.PI/180,a=C(t[1]),u=C(r),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?l/h:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,r);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,i.properties)}function xi(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Pi(a,u,e),n<=0&&r>0?Pi(e,a,i)<0||(i=a):n>0&&r<=0&&(wi(e,a,o)||(o=a)),n=r}return[i,o]}function wi(t,e,n){return Pi(t,e,n)>0}function Pi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Ci(t){for(var e,n,r=$(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Oi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return U(t,function(t){Oi(t,e)}),t;case"LineString":return Ti($(t),e),t;case"Polygon":return Ei($(t),e),t;case"MultiLineString":return $(t).forEach(function(t){Ti(t,e)}),t;case"MultiPolygon":return $(t).forEach(function(t){Ei(t,e)}),t;case"Point":case"MultiPoint":return t}}function Ti(t,e){Ci(t)===e&&t.reverse()}function Ei(t,e){Ci(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Ci(t[n])===e&&t[n].reverse()}var Li={successCallback:null,verbose:!1,polygons:!1},Mi={};function Ii(t,e,n,r){r=r||{};for(var i=Object.keys(Li),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Li[s],Mi[s]=a}Mi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var g=(c+h+f+p)/4;y=g>s?2:g<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var v,m,_,b,S,x,w,P;v=m=_=b=S=x=w=P=.5;var C=[];1===l?(_=1-xo(e,f,p),P=1-xo(e,c,p),C.push(go[l])):169===l?(_=xo(s,p,f),P=xo(s,p,c),C.push(go[l])):4===l?(x=1-xo(e,h,f),b=xo(e,p,f),C.push(po[l])):166===l?(x=xo(s,f,h),b=1-xo(s,f,p),C.push(po[l])):16===l?(S=xo(e,f,h),m=xo(e,c,h),C.push(fo[l])):154===l?(S=1-xo(s,h,f),m=1-xo(s,h,c),C.push(fo[l])):64===l?(w=xo(e,p,c),v=1-xo(e,h,c),C.push(mo[l])):106===l?(w=1-xo(s,c,p),v=xo(s,c,h),C.push(mo[l])):168===l?(b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),C.push(yo[l]),C.push(go[l])):2===l?(b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),C.push(yo[l]),C.push(go[l])):162===l?(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),C.push(yo[l]),C.push(go[l])):8===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),C.push(fo[l]),C.push(po[l])):138===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(fo[l]),C.push(po[l])):32===l?(S=xo(s,f,h),x=xo(e,f,h),v=xo(e,c,h),m=xo(s,c,h),C.push(fo[l]),C.push(po[l])):42===l?(P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h),C.push(vo[l]),C.push(mo[l])):128===l&&(P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(vo[l]),C.push(mo[l])),5===l?(x=1-xo(e,h,f),P=1-xo(e,c,p),C.push(po[l])):165===l?(x=xo(s,f,h),P=xo(s,p,c),C.push(po[l])):20===l?(b=xo(e,p,f),m=xo(e,c,h),C.push(yo[l])):150===l?(b=1-xo(s,f,p),m=1-xo(s,h,c),C.push(yo[l])):80===l?(S=xo(e,f,h),w=xo(e,p,c),C.push(fo[l])):90===l?(S=1-xo(s,h,f),w=1-xo(s,c,p),C.push(fo[l])):65===l?(_=1-xo(e,f,p),v=1-xo(e,h,c),C.push(go[l])):105===l?(_=xo(s,p,f),v=xo(s,c,h),C.push(go[l])):160===l?(S=xo(s,f,h),x=xo(e,f,h),P=xo(e,p,c),w=xo(s,p,c),C.push(fo[l]),C.push(po[l])):10===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),P=1-xo(s,c,p),w=1-xo(e,c,p),C.push(fo[l]),C.push(po[l])):130===l?(b=1-xo(e,f,p),_=1-xo(s,f,p),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(yo[l]),C.push(go[l])):40===l?(b=xo(s,p,f),_=xo(e,p,f),v=xo(e,c,h),m=xo(s,c,h),C.push(yo[l]),C.push(go[l])):101===l?(x=xo(s,f,h),v=xo(s,c,h),C.push(po[l])):69===l?(x=1-xo(e,h,f),v=1-xo(e,h,c),C.push(po[l])):149===l?(P=xo(s,p,c),m=1-xo(s,h,c),C.push(vo[l])):21===l?(P=1-xo(e,c,p),m=xo(e,c,h),C.push(vo[l])):86===l?(b=1-xo(s,f,p),w=1-xo(s,c,p),C.push(yo[l])):84===l?(b=xo(e,p,f),w=xo(e,p,c),C.push(yo[l])):89===l?(S=1-xo(s,h,f),_=xo(s,p,f),C.push(go[l])):81===l?(S=xo(e,f,h),_=1-xo(e,f,p),C.push(go[l])):96===l?(S=xo(s,f,h),x=xo(e,f,h),w=xo(e,p,c),v=xo(s,c,h),C.push(fo[l]),C.push(po[l])):74===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),w=1-xo(s,c,p),v=1-xo(e,h,c),C.push(fo[l]),C.push(po[l])):24===l?(S=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),m=xo(e,c,h),C.push(fo[l]),C.push(go[l])):146===l?(S=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),m=1-xo(s,h,c),C.push(fo[l]),C.push(go[l])):6===l?(x=1-xo(e,h,f),b=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),C.push(po[l]),C.push(yo[l])):164===l?(x=xo(s,f,h),b=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),C.push(po[l]),C.push(yo[l])):129===l?(_=1-xo(e,f,p),P=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(go[l]),C.push(vo[l])):41===l?(_=xo(s,p,f),P=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h),C.push(go[l]),C.push(vo[l])):66===l?(b=1-xo(e,f,p),_=1-xo(s,f,p),w=1-xo(s,c,p),v=1-xo(e,h,c),C.push(yo[l]),C.push(go[l])):104===l?(b=xo(s,p,f),_=xo(e,p,f),w=xo(e,p,c),v=xo(s,c,h),C.push(go[l]),C.push(_o[l])):144===l?(S=xo(e,f,h),P=xo(e,p,c),w=xo(s,p,c),m=1-xo(s,h,c),C.push(fo[l]),C.push(mo[l])):26===l?(S=1-xo(s,h,f),P=1-xo(s,c,p),w=1-xo(e,c,p),m=xo(e,c,h),C.push(fo[l]),C.push(mo[l])):36===l?(x=xo(s,f,h),b=xo(e,p,f),v=xo(e,c,h),m=xo(s,c,h),C.push(po[l]),C.push(yo[l])):134===l?(x=1-xo(e,h,f),b=1-xo(s,f,p),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(po[l]),C.push(yo[l])):9===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),_=xo(s,p,f),P=1-xo(e,c,p),C.push(fo[l]),C.push(po[l])):161===l?(S=xo(s,f,h),x=xo(e,f,h),_=1-xo(e,f,p),P=xo(s,p,c),C.push(fo[l]),C.push(po[l])):37===l?(x=xo(s,f,h),P=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h),C.push(po[l]),C.push(vo[l])):133===l?(x=1-xo(e,h,f),P=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c),C.push(po[l]),C.push(vo[l])):148===l?(b=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),m=1-xo(s,h,c),C.push(yo[l]),C.push(mo[l])):22===l?(b=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),m=xo(e,c,h),C.push(yo[l]),C.push(mo[l])):82===l?(S=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),w=1-xo(s,c,p),C.push(fo[l]),C.push(go[l])):88===l?(S=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),w=xo(e,p,c),C.push(fo[l]),C.push(go[l])):73===l?(S=1-xo(e,h,f),x=1-xo(s,h,f),_=xo(s,p,f),v=1-xo(e,h,c),C.push(fo[l]),C.push(po[l])):97===l?(S=xo(s,f,h),x=xo(e,f,h),_=1-xo(e,f,p),v=xo(s,c,h),C.push(fo[l]),C.push(po[l])):145===l?(S=xo(e,f,h),_=1-xo(e,f,p),P=xo(s,p,c),m=1-xo(s,h,c),C.push(fo[l]),C.push(vo[l])):25===l?(S=1-xo(s,h,f),_=xo(s,p,f),P=1-xo(e,c,p),m=xo(e,c,h),C.push(fo[l]),C.push(vo[l])):70===l?(x=1-xo(e,h,f),b=1-xo(s,f,p),w=1-xo(s,c,p),v=1-xo(e,h,c),C.push(po[l]),C.push(yo[l])):100===l?(x=xo(s,f,h),b=xo(e,p,f),w=xo(e,p,c),v=xo(s,c,h),C.push(po[l]),C.push(yo[l])):34===l?(0===y?(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)):(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)),C.push(fo[l]),C.push(po[l]),C.push(vo[l]),C.push(mo[l])):35===l?(4===y?(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)):(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)),C.push(fo[l]),C.push(po[l]),C.push(go[l]),C.push(mo[l])):136===l?(0===y?(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)):(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)),C.push(fo[l]),C.push(po[l]),C.push(vo[l]),C.push(mo[l])):153===l?(0===y?(S=xo(e,f,h),_=1-xo(e,f,p),P=1-xo(e,c,p),m=xo(e,c,h)):(S=1-xo(s,h,f),_=xo(s,p,f),P=xo(s,p,c),m=1-xo(s,h,c)),C.push(fo[l]),C.push(go[l])):102===l?(0===y?(x=1-xo(e,h,f),b=xo(e,p,f),w=xo(e,p,c),v=1-xo(e,h,c)):(x=xo(s,f,h),b=1-xo(s,f,p),w=1-xo(s,c,p),v=xo(s,c,h)),C.push(po[l]),C.push(mo[l])):155===l?(4===y?(S=xo(e,f,h),_=1-xo(e,f,p),P=1-xo(e,c,p),m=xo(e,c,h)):(S=1-xo(s,h,f),_=xo(s,p,f),P=xo(s,p,c),m=1-xo(s,h,c)),C.push(fo[l]),C.push(vo[l])):103===l?(4===y?(x=1-xo(e,h,f),b=xo(e,p,f),w=xo(e,p,c),v=1-xo(e,h,c)):(x=xo(s,f,h),b=1-xo(s,f,p),w=1-xo(s,c,p),v=xo(s,c,h)),C.push(po[l]),C.push(yo[l])):152===l?(0===y?(S=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),m=xo(e,c,h)):(S=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),m=1-xo(s,h,c)),C.push(fo[l]),C.push(yo[l]),C.push(go[l])):156===l?(4===y?(S=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),m=xo(e,c,h)):(S=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),m=1-xo(s,h,c)),C.push(fo[l]),C.push(go[l]),C.push(mo[l])):137===l?(0===y?(S=xo(s,f,h),x=xo(e,f,h),_=1-xo(e,f,p),P=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)):(S=1-xo(e,h,f),x=1-xo(s,h,f),_=xo(s,p,f),P=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)),C.push(fo[l]),C.push(po[l]),C.push(go[l])):139===l?(4===y?(S=xo(s,f,h),x=xo(e,f,h),_=1-xo(e,f,p),P=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)):(S=1-xo(e,h,f),x=1-xo(s,h,f),_=xo(s,p,f),P=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)),C.push(fo[l]),C.push(po[l]),C.push(vo[l])):98===l?(0===y?(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),w=xo(e,p,c),v=1-xo(e,h,c)):(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),w=1-xo(s,c,p),v=xo(s,c,h)),C.push(fo[l]),C.push(po[l]),C.push(mo[l])):99===l?(4===y?(S=1-xo(e,h,f),x=1-xo(s,h,f),b=xo(s,p,f),_=xo(e,p,f),w=xo(e,p,c),v=1-xo(e,h,c)):(S=xo(s,f,h),x=xo(e,f,h),b=1-xo(e,f,p),_=1-xo(s,f,p),w=1-xo(s,c,p),v=xo(s,c,h)),C.push(fo[l]),C.push(po[l]),C.push(go[l])):38===l?(0===y?(x=1-xo(e,h,f),b=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)):(x=xo(s,f,h),b=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)),C.push(po[l]),C.push(vo[l]),C.push(mo[l])):39===l?(4===y?(x=1-xo(e,h,f),b=xo(e,p,f),P=xo(e,p,c),w=xo(s,p,c),v=1-xo(s,h,c),m=1-xo(e,h,c)):(x=xo(s,f,h),b=1-xo(s,f,p),P=1-xo(s,c,p),w=1-xo(e,c,p),v=xo(e,c,h),m=xo(s,c,h)),C.push(po[l]),C.push(yo[l]),C.push(mo[l])):85===l&&(S=1,x=0,b=1,_=0,P=0,w=1,v=0,m=1),(v<0||v>1||m<0||m>1||S<0||S>1||b<0||b>1||P<0||P>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+y+" "+v+" "+m+" "+S+" "+x+" "+b+" "+_+" "+P+" "+w),o.cells[a][u]={cval:l,cval_real:d,flipped:y,topleft:v,topright:m,righttop:S,rightbottom:x,bottomright:b,bottomleft:_,leftbottom:P,lefttop:w,edges:C}}}}}return o}(t,e,n);return Mi.polygons?(Mi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=So[t.cval](t);"object"==typeof o&&wo(o)?"object"==typeof o[0]&&wo(o[0])?"object"==typeof o[0][0]&&wo(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):(Mi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Co(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Oo(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var h=Po(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof Mi.successCallback&&Mi.successCallback(u),u}var Ni=64,Ai=16,Ri=[],Di=[],ki=[],ji=[],Fi=[],Bi=[],Ui=[],Gi=[],qi=[],zi=[],Vi=[],Zi=[],Wi=[],Hi=[],Xi=[],Yi=[],Qi=[],Ji=[],Ki=[],$i=[],to=[],eo=[],no=[],ro=[];Ui[85]=zi[85]=-1,Gi[85]=Vi[85]=0,qi[85]=Zi[85]=1,Ki[85]=eo[85]=1,$i[85]=no[85]=0,to[85]=ro[85]=1,Ri[85]=ji[85]=0,Di[85]=Fi[85]=-1,ki[85]=Xi[85]=0,Yi[85]=Wi[85]=0,Qi[85]=Hi[85]=1,Bi[85]=Ji[85]=1,eo[1]=eo[169]=0,no[1]=no[169]=-1,ro[1]=ro[169]=0,Wi[1]=Wi[169]=-1,Hi[1]=Hi[169]=0,Xi[1]=Xi[169]=0,zi[4]=zi[166]=0,Vi[4]=Vi[166]=-1,Zi[4]=Zi[166]=1,Yi[4]=Yi[166]=1,Qi[4]=Qi[166]=0,Ji[4]=Ji[166]=0,Ui[16]=Ui[154]=0,Gi[16]=Gi[154]=1,qi[16]=qi[154]=1,ji[16]=ji[154]=1,Fi[16]=Fi[154]=0,Bi[16]=Bi[154]=1,Ki[64]=Ki[106]=0,$i[64]=$i[106]=1,to[64]=to[106]=0,Ri[64]=Ri[106]=-1,Di[64]=Di[106]=0,ki[64]=ki[106]=1,Ki[2]=Ki[168]=0,$i[2]=$i[168]=-1,to[2]=to[168]=1,eo[2]=eo[168]=0,no[2]=no[168]=-1,ro[2]=ro[168]=0,Wi[2]=Wi[168]=-1,Hi[2]=Hi[168]=0,Xi[2]=Xi[168]=0,Yi[2]=Yi[168]=-1,Qi[2]=Qi[168]=0,Ji[2]=Ji[168]=1,Ui[8]=Ui[162]=0,Gi[8]=Gi[162]=-1,qi[8]=qi[162]=0,zi[8]=zi[162]=0,Vi[8]=Vi[162]=-1,Zi[8]=Zi[162]=1,Wi[8]=Wi[162]=1,Hi[8]=Hi[162]=0,Xi[8]=Xi[162]=1,Yi[8]=Yi[162]=1,Qi[8]=Qi[162]=0,Ji[8]=Ji[162]=0,Ui[32]=Ui[138]=0,Gi[32]=Gi[138]=1,qi[32]=qi[138]=1,zi[32]=zi[138]=0,Vi[32]=Vi[138]=1,Zi[32]=Zi[138]=0,Ri[32]=Ri[138]=1,Di[32]=Di[138]=0,ki[32]=ki[138]=0,ji[32]=ji[138]=1,Fi[32]=Fi[138]=0,Bi[32]=Bi[138]=1,eo[128]=eo[42]=0,no[128]=no[42]=1,ro[128]=ro[42]=1,Ki[128]=Ki[42]=0,$i[128]=$i[42]=1,to[128]=to[42]=0,Ri[128]=Ri[42]=-1,Di[128]=Di[42]=0,ki[128]=ki[42]=1,ji[128]=ji[42]=-1,Fi[128]=Fi[42]=0,Bi[128]=Bi[42]=0,zi[5]=zi[165]=-1,Vi[5]=Vi[165]=0,Zi[5]=Zi[165]=0,eo[5]=eo[165]=1,no[5]=no[165]=0,ro[5]=ro[165]=0,Yi[20]=Yi[150]=0,Qi[20]=Qi[150]=1,Ji[20]=Ji[150]=1,ji[20]=ji[150]=0,Fi[20]=Fi[150]=-1,Bi[20]=Bi[150]=1,Ui[80]=Ui[90]=-1,Gi[80]=Gi[90]=0,qi[80]=qi[90]=1,Ki[80]=Ki[90]=1,$i[80]=$i[90]=0,to[80]=to[90]=1,Wi[65]=Wi[105]=0,Hi[65]=Hi[105]=1,Xi[65]=Xi[105]=0,Ri[65]=Ri[105]=0,Di[65]=Di[105]=-1,ki[65]=ki[105]=0,Ui[160]=Ui[10]=-1,Gi[160]=Gi[10]=0,qi[160]=qi[10]=1,zi[160]=zi[10]=-1,Vi[160]=Vi[10]=0,Zi[160]=Zi[10]=0,eo[160]=eo[10]=1,no[160]=no[10]=0,ro[160]=ro[10]=0,Ki[160]=Ki[10]=1,$i[160]=$i[10]=0,to[160]=to[10]=1,Yi[130]=Yi[40]=0,Qi[130]=Qi[40]=1,Ji[130]=Ji[40]=1,Wi[130]=Wi[40]=0,Hi[130]=Hi[40]=1,Xi[130]=Xi[40]=0,Ri[130]=Ri[40]=0,Di[130]=Di[40]=-1,ki[130]=ki[40]=0,ji[130]=ji[40]=0,Fi[130]=Fi[40]=-1,Bi[130]=Bi[40]=1,zi[37]=zi[133]=0,Vi[37]=Vi[133]=1,Zi[37]=Zi[133]=1,eo[37]=eo[133]=0,no[37]=no[133]=1,ro[37]=ro[133]=0,Ri[37]=Ri[133]=-1,Di[37]=Di[133]=0,ki[37]=ki[133]=0,ji[37]=ji[133]=1,Fi[37]=Fi[133]=0,Bi[37]=Bi[133]=0,Yi[148]=Yi[22]=-1,Qi[148]=Qi[22]=0,Ji[148]=Ji[22]=0,eo[148]=eo[22]=0,no[148]=no[22]=-1,ro[148]=ro[22]=1,Ki[148]=Ki[22]=0,$i[148]=$i[22]=1,to[148]=to[22]=1,ji[148]=ji[22]=-1,Fi[148]=Fi[22]=0,Bi[148]=Bi[22]=1,Ui[82]=Ui[88]=0,Gi[82]=Gi[88]=-1,qi[82]=qi[88]=1,Yi[82]=Yi[88]=1,Qi[82]=Qi[88]=0,Ji[82]=Ji[88]=1,Wi[82]=Wi[88]=-1,Hi[82]=Hi[88]=0,Xi[82]=Xi[88]=1,Ki[82]=Ki[88]=0,$i[82]=$i[88]=-1,to[82]=to[88]=0,Ui[73]=Ui[97]=0,Gi[73]=Gi[97]=1,qi[73]=qi[97]=0,zi[73]=zi[97]=0,Vi[73]=Vi[97]=-1,Zi[73]=Zi[97]=0,Wi[73]=Wi[97]=1,Hi[73]=Hi[97]=0,Xi[73]=Xi[97]=0,Ri[73]=Ri[97]=1,Di[73]=Di[97]=0,ki[73]=ki[97]=1,Ui[145]=Ui[25]=0,Gi[145]=Gi[25]=-1,qi[145]=qi[25]=0,Wi[145]=Wi[25]=1,Hi[145]=Hi[25]=0,Xi[145]=Xi[25]=1,eo[145]=eo[25]=0,no[145]=no[25]=1,ro[145]=ro[25]=1,ji[145]=ji[25]=-1,Fi[145]=Fi[25]=0,Bi[145]=Bi[25]=0,zi[70]=zi[100]=0,Vi[70]=Vi[100]=1,Zi[70]=Zi[100]=0,Yi[70]=Yi[100]=-1,Qi[70]=Qi[100]=0,Ji[70]=Ji[100]=1,Ki[70]=Ki[100]=0,$i[70]=$i[100]=-1,to[70]=to[100]=1,Ri[70]=Ri[100]=1,Di[70]=Di[100]=0,ki[70]=ki[100]=0,zi[101]=zi[69]=0,Vi[101]=Vi[69]=1,Zi[101]=Zi[69]=0,Ri[101]=Ri[69]=1,Di[101]=Di[69]=0,ki[101]=ki[69]=0,eo[149]=eo[21]=0,no[149]=no[21]=1,ro[149]=ro[21]=1,ji[149]=ji[21]=-1,Fi[149]=Fi[21]=0,Bi[149]=Bi[21]=0,Yi[86]=Yi[84]=-1,Qi[86]=Qi[84]=0,Ji[86]=Ji[84]=1,Ki[86]=Ki[84]=0,$i[86]=$i[84]=-1,to[86]=to[84]=1,Ui[89]=Ui[81]=0,Gi[89]=Gi[81]=-1,qi[89]=qi[81]=0,Wi[89]=Wi[81]=1,Hi[89]=Hi[81]=0,Xi[89]=Xi[81]=1,Ui[96]=Ui[74]=0,Gi[96]=Gi[74]=1,qi[96]=qi[74]=0,zi[96]=zi[74]=-1,Vi[96]=Vi[74]=0,Zi[96]=Zi[74]=1,Ki[96]=Ki[74]=1,$i[96]=$i[74]=0,to[96]=to[74]=0,Ri[96]=Ri[74]=1,Di[96]=Di[74]=0,ki[96]=ki[74]=1,Ui[24]=Ui[146]=0,Gi[24]=Gi[146]=-1,qi[24]=qi[146]=1,Yi[24]=Yi[146]=1,Qi[24]=Qi[146]=0,Ji[24]=Ji[146]=1,Wi[24]=Wi[146]=0,Hi[24]=Hi[146]=1,Xi[24]=Xi[146]=1,ji[24]=ji[146]=0,Fi[24]=Fi[146]=-1,Bi[24]=Bi[146]=0,zi[6]=zi[164]=-1,Vi[6]=Vi[164]=0,Zi[6]=Zi[164]=1,Yi[6]=Yi[164]=-1,Qi[6]=Qi[164]=0,Ji[6]=Ji[164]=0,eo[6]=eo[164]=0,no[6]=no[164]=-1,ro[6]=ro[164]=1,Ki[6]=Ki[164]=1,$i[6]=$i[164]=0,to[6]=to[164]=0,Wi[129]=Wi[41]=0,Hi[129]=Hi[41]=1,Xi[129]=Xi[41]=1,eo[129]=eo[41]=0,no[129]=no[41]=1,ro[129]=ro[41]=0,Ri[129]=Ri[41]=-1,Di[129]=Di[41]=0,ki[129]=ki[41]=0,ji[129]=ji[41]=0,Fi[129]=Fi[41]=-1,Bi[129]=Bi[41]=0,Yi[66]=Yi[104]=0,Qi[66]=Qi[104]=1,Ji[66]=Ji[104]=0,Wi[66]=Wi[104]=-1,Hi[66]=Hi[104]=0,Xi[66]=Xi[104]=1,Ki[66]=Ki[104]=0,$i[66]=$i[104]=-1,to[66]=to[104]=0,Ri[66]=Ri[104]=0,Di[66]=Di[104]=-1,ki[66]=ki[104]=1,Ui[144]=Ui[26]=-1,Gi[144]=Gi[26]=0,qi[144]=qi[26]=0,eo[144]=eo[26]=1,no[144]=no[26]=0,ro[144]=ro[26]=1,Ki[144]=Ki[26]=0,$i[144]=$i[26]=1,to[144]=to[26]=1,ji[144]=ji[26]=-1,Fi[144]=Fi[26]=0,Bi[144]=Bi[26]=1,zi[36]=zi[134]=0,Vi[36]=Vi[134]=1,Zi[36]=Zi[134]=1,Yi[36]=Yi[134]=0,Qi[36]=Qi[134]=1,Ji[36]=Ji[134]=0,Ri[36]=Ri[134]=0,Di[36]=Di[134]=-1,ki[36]=ki[134]=1,ji[36]=ji[134]=1,Fi[36]=Fi[134]=0,Bi[36]=Bi[134]=0,Ui[9]=Ui[161]=-1,Gi[9]=Gi[161]=0,qi[9]=qi[161]=0,zi[9]=zi[161]=0,Vi[9]=Vi[161]=-1,Zi[9]=Zi[161]=0,Wi[9]=Wi[161]=1,Hi[9]=Hi[161]=0,Xi[9]=Xi[161]=0,eo[9]=eo[161]=1,no[9]=no[161]=0,ro[9]=ro[161]=1,Ui[136]=0,Gi[136]=1,qi[136]=1,zi[136]=0,Vi[136]=1,Zi[136]=0,Yi[136]=-1,Qi[136]=0,Ji[136]=1,Wi[136]=-1,Hi[136]=0,Xi[136]=0,eo[136]=0,no[136]=-1,ro[136]=0,Ki[136]=0,$i[136]=-1,to[136]=1,Ri[136]=1,Di[136]=0,ki[136]=0,ji[136]=1,Fi[136]=0,Bi[136]=1,Ui[34]=0,Gi[34]=-1,qi[34]=0,zi[34]=0,Vi[34]=-1,Zi[34]=1,Yi[34]=1,Qi[34]=0,Ji[34]=0,Wi[34]=1,Hi[34]=0,Xi[34]=1,eo[34]=0,no[34]=1,ro[34]=1,Ki[34]=0,$i[34]=1,to[34]=0,Ri[34]=-1,Di[34]=0,ki[34]=1,ji[34]=-1,Fi[34]=0,Bi[34]=0,Ui[35]=0,Gi[35]=1,qi[35]=1,zi[35]=0,Vi[35]=-1,Zi[35]=1,Yi[35]=1,Qi[35]=0,Ji[35]=0,Wi[35]=-1,Hi[35]=0,Xi[35]=0,eo[35]=0,no[35]=-1,ro[35]=0,Ki[35]=0,$i[35]=1,to[35]=0,Ri[35]=-1,Di[35]=0,ki[35]=1,ji[35]=1,Fi[35]=0,Bi[35]=1,Ui[153]=0,Gi[153]=1,qi[153]=1,Wi[153]=-1,Hi[153]=0,Xi[153]=0,eo[153]=0,no[153]=-1,ro[153]=0,ji[153]=1,Fi[153]=0,Bi[153]=1,zi[102]=0,Vi[102]=-1,Zi[102]=1,Yi[102]=1,Qi[102]=0,Ji[102]=0,Ki[102]=0,$i[102]=1,to[102]=0,Ri[102]=-1,Di[102]=0,ki[102]=1,Ui[155]=0,Gi[155]=-1,qi[155]=0,Wi[155]=1,Hi[155]=0,Xi[155]=1,eo[155]=0,no[155]=1,ro[155]=1,ji[155]=-1,Fi[155]=0,Bi[155]=0,zi[103]=0,Vi[103]=1,Zi[103]=0,Yi[103]=-1,Qi[103]=0,Ji[103]=1,Ki[103]=0,$i[103]=-1,to[103]=1,Ri[103]=1,Di[103]=0,ki[103]=0,Ui[152]=0,Gi[152]=1,qi[152]=1,Yi[152]=-1,Qi[152]=0,Ji[152]=1,Wi[152]=-1,Hi[152]=0,Xi[152]=0,eo[152]=0,no[152]=-1,ro[152]=0,Ki[152]=0,$i[152]=-1,to[152]=1,ji[152]=1,Fi[152]=0,Bi[152]=1,Ui[156]=0,Gi[156]=-1,qi[156]=1,Yi[156]=1,Qi[156]=0,Ji[156]=1,Wi[156]=-1,Hi[156]=0,Xi[156]=0,eo[156]=0,no[156]=-1,ro[156]=0,Ki[156]=0,$i[156]=1,to[156]=1,ji[156]=-1,Fi[156]=0,Bi[156]=1,Ui[137]=0,Gi[137]=1,qi[137]=1,zi[137]=0,Vi[137]=1,Zi[137]=0,Wi[137]=-1,Hi[137]=0,Xi[137]=0,eo[137]=0,no[137]=-1,ro[137]=0,Ri[137]=1,Di[137]=0,ki[137]=0,ji[137]=1,Fi[137]=0,Bi[137]=1,Ui[139]=0,Gi[139]=1,qi[139]=1,zi[139]=0,Vi[139]=-1,Zi[139]=0,Wi[139]=1,Hi[139]=0,Xi[139]=0,eo[139]=0,no[139]=1,ro[139]=0,Ri[139]=-1,Di[139]=0,ki[139]=0,ji[139]=1,Fi[139]=0,Bi[139]=1,Ui[98]=0,Gi[98]=-1,qi[98]=0,zi[98]=0,Vi[98]=-1,Zi[98]=1,Yi[98]=1,Qi[98]=0,Ji[98]=0,Wi[98]=1,Hi[98]=0,Xi[98]=1,Ki[98]=0,$i[98]=1,to[98]=0,Ri[98]=-1,Di[98]=0,ki[98]=1,Ui[99]=0,Gi[99]=1,qi[99]=0,zi[99]=0,Vi[99]=-1,Zi[99]=1,Yi[99]=1,Qi[99]=0,Ji[99]=0,Wi[99]=-1,Hi[99]=0,Xi[99]=1,Ki[99]=0,$i[99]=-1,to[99]=0,Ri[99]=1,Di[99]=0,ki[99]=1,zi[38]=0,Vi[38]=-1,Zi[38]=1,Yi[38]=1,Qi[38]=0,Ji[38]=0,eo[38]=0,no[38]=1,ro[38]=1,Ki[38]=0,$i[38]=1,to[38]=0,Ri[38]=-1,Di[38]=0,ki[38]=1,ji[38]=-1,Fi[38]=0,Bi[38]=0,zi[39]=0,Vi[39]=1,Zi[39]=1,Yi[39]=-1,Qi[39]=0,Ji[39]=0,eo[39]=0,no[39]=-1,ro[39]=1,Ki[39]=0,$i[39]=1,to[39]=0,Ri[39]=-1,Di[39]=0,ki[39]=1,ji[39]=1,Fi[39]=0,Bi[39]=0;var io=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},oo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},so=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},ao=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},uo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},lo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},co=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ho=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},fo=[],po=[],yo=[],go=[],vo=[],mo=[],_o=[],bo=[];go[1]=vo[1]=18,go[169]=vo[169]=18,yo[4]=po[4]=12,yo[166]=po[166]=12,fo[16]=bo[16]=4,fo[154]=bo[154]=4,mo[64]=_o[64]=22,mo[106]=_o[106]=22,yo[2]=mo[2]=17,go[2]=vo[2]=18,yo[168]=mo[168]=17,go[168]=vo[168]=18,fo[8]=go[8]=9,po[8]=yo[8]=12,fo[162]=go[162]=9,po[162]=yo[162]=12,fo[32]=bo[32]=4,po[32]=_o[32]=1,fo[138]=bo[138]=4,po[138]=_o[138]=1,vo[128]=bo[128]=21,mo[128]=_o[128]=22,vo[42]=bo[42]=21,mo[42]=_o[42]=22,po[5]=vo[5]=14,po[165]=vo[165]=14,yo[20]=bo[20]=6,yo[150]=bo[150]=6,fo[80]=mo[80]=11,fo[90]=mo[90]=11,go[65]=_o[65]=3,go[105]=_o[105]=3,fo[160]=mo[160]=11,po[160]=vo[160]=14,fo[10]=mo[10]=11,po[10]=vo[10]=14,yo[130]=bo[130]=6,go[130]=_o[130]=3,yo[40]=bo[40]=6,go[40]=_o[40]=3,po[101]=_o[101]=1,po[69]=_o[69]=1,vo[149]=bo[149]=21,vo[21]=bo[21]=21,yo[86]=mo[86]=17,yo[84]=mo[84]=17,fo[89]=go[89]=9,fo[81]=go[81]=9,fo[96]=_o[96]=0,po[96]=mo[96]=15,fo[74]=_o[74]=0,po[74]=mo[74]=15,fo[24]=yo[24]=8,go[24]=bo[24]=7,fo[146]=yo[146]=8,go[146]=bo[146]=7,po[6]=mo[6]=15,yo[6]=vo[6]=16,po[164]=mo[164]=15,yo[164]=vo[164]=16,go[129]=bo[129]=7,vo[129]=_o[129]=20,go[41]=bo[41]=7,vo[41]=_o[41]=20,yo[66]=_o[66]=2,go[66]=mo[66]=19,yo[104]=_o[104]=2,go[104]=mo[104]=19,fo[144]=vo[144]=10,mo[144]=bo[144]=23,fo[26]=vo[26]=10,mo[26]=bo[26]=23,po[36]=bo[36]=5,yo[36]=_o[36]=2,po[134]=bo[134]=5,yo[134]=_o[134]=2,fo[9]=vo[9]=10,po[9]=go[9]=13,fo[161]=vo[161]=10,po[161]=go[161]=13,po[37]=bo[37]=5,vo[37]=_o[37]=20,po[133]=bo[133]=5,vo[133]=_o[133]=20,yo[148]=vo[148]=16,mo[148]=bo[148]=23,yo[22]=vo[22]=16,mo[22]=bo[22]=23,fo[82]=yo[82]=8,go[82]=mo[82]=19,fo[88]=yo[88]=8,go[88]=mo[88]=19,fo[73]=_o[73]=0,po[73]=go[73]=13,fo[97]=_o[97]=0,po[97]=go[97]=13,fo[145]=go[145]=9,vo[145]=bo[145]=21,fo[25]=go[25]=9,vo[25]=bo[25]=21,po[70]=_o[70]=1,yo[70]=mo[70]=17,po[100]=_o[100]=1,yo[100]=mo[100]=17,fo[34]=go[34]=9,po[34]=yo[34]=12,vo[34]=bo[34]=21,mo[34]=_o[34]=22,fo[136]=bo[136]=4,po[136]=_o[136]=1,yo[136]=mo[136]=17,go[136]=vo[136]=18,fo[35]=bo[35]=4,po[35]=yo[35]=12,go[35]=vo[35]=18,mo[35]=_o[35]=22,fo[153]=bo[153]=4,go[153]=vo[153]=18,po[102]=yo[102]=12,mo[102]=_o[102]=22,fo[155]=go[155]=9,vo[155]=bo[155]=23,po[103]=_o[103]=1,yo[103]=mo[103]=17,fo[152]=bo[152]=4,yo[152]=mo[152]=17,go[152]=vo[152]=18,fo[156]=yo[156]=8,go[156]=vo[156]=18,mo[156]=bo[156]=23,fo[137]=bo[137]=4,po[137]=_o[137]=1,go[137]=vo[137]=18,fo[139]=bo[139]=4,po[139]=go[139]=13,vo[139]=_o[139]=20,fo[98]=go[98]=9,po[98]=yo[98]=12,mo[98]=_o[98]=22,fo[99]=_o[99]=0,po[99]=yo[99]=12,go[99]=mo[99]=19,po[38]=yo[38]=12,vo[38]=bo[38]=21,mo[38]=_o[38]=22,po[39]=bo[39]=5,yo[39]=vo[39]=16,mo[39]=_o[39]=22;var So=[];function xo(t,e,n){return(t-e)/(n-e)}function wo(t){return t.constructor.toString().indexOf("Array")>-1}function Po(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)c.push([u,l]),r=-1,i=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&Ai)){if(a&Ni){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&Ni)){if(1&a){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(a&Ni)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&Ai){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&Ni)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(a&Ai)){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(a&Ni)){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}function Co(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Ai?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Ai?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ni?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ni?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ni?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ni?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ni?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Ai?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ni?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Ai?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Oo(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:switch(r){case 0:i=po[l],s=zi[l],a=Vi[l],u=Zi[l];break;default:i=fo[l],s=Ui[l],a=Gi[l],u=qi[l]}break;case 1:switch(r){case 0:i=vo[l],s=eo[l],a=no[l],u=ro[l];break;default:i=mo[l],s=Ki[l],a=$i[l],u=to[l]}break;default:switch(n){case-1:switch(r){case 0:i=_o[l],s=Ri[l],a=Di[l],u=ki[l];break;default:i=bo[l],s=ji[l],a=Fi[l],u=Bi[l]}break;case 1:switch(r){case 0:i=go[l],s=Wi[l],a=Hi[l],u=Xi[l];break;default:i=yo[l],s=Yi[l],a=Qi[l],u=Ji[l]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&Ai?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&Ai?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&Ni?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&Ni?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&Ni?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&Ni?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&Ni?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&Ai?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&Ni?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&Ai?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function To(t){var e=[],n=[];t.forEach(function(t){var r=xr(c([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}function Eo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!Mo(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=c([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||Lo(c([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function Lo(t,e){for(var n=fn(t),r=0;r<n.features.length;r++)if(!de(n.features[r],e))return!1;return!0}function Mo(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Io(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=hn(t)),!1!==i&&void 0!==i||(t=xe(t)),A(t,function(t){var n=_i(r,t)+e,i=dr(r,t),o=$(Si(r,i,n));t[0]=o[0],t[1]=o[1]})),t}function No(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=xe(t)),"FeatureCollection"!==t.type||o?Ao(t,e,r):(j(t,function(n,i){t.features[i]=Ao(n,e,r)}),t)}function Ao(t,e,n){var r="Point"===ot(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return K(e);var n=t.bbox?t.bbox:J(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return cn(t);case void 0:case null:case"centroid":return hn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||A(t,function(t){var r=dr(n,t),i=_i(n,t),o=$(Si(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function Ro(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Do(t,e){return t[0]*e[1]-e[0]*t[1]}function ko(t,e,n){var r=[],i=x(e,n),o=$(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=(l=t,c=o[e+1],h=i,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),p=l[0]+h*(c[1]-l[1])/f,d=c[0]+h*(c[1]-l[1])/f,y=l[1]+h*(l[0]-c[0])/f,g=c[1]+h*(l[0]-c[0])/f,[[p,y],[d,g]]);if(r.push(n),e>0){var a=r[e-1],u=function(t,e){return!function(t,e){return 0===Do(Ro(t),Ro(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Ro(t),s=e[0],a=Ro(e),u=Do(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Do((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,c,h,f,p,d,y,g}),f(s,t.properties)}function jo(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Fo(t,e){return e.geometry.coordinates[0].every(function(e){return de(u(e),t)})}So[1]=So[169]=io,So[4]=So[166]=oo,So[16]=So[154]=so,So[64]=So[106]=ao,So[168]=So[2]=uo,So[162]=So[8]=lo,So[138]=So[32]=co,So[42]=So[128]=ho,So[5]=So[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},So[20]=So[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},So[80]=So[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},So[65]=So[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},So[160]=So[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},So[130]=So[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},So[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},So[101]=So[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},So[149]=So[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},So[86]=So[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},So[89]=So[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},So[96]=So[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},So[24]=So[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},So[6]=So[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},So[129]=So[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},So[66]=So[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[144]=So[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[36]=So[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},So[9]=So[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},So[37]=So[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},So[148]=So[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[82]=So[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},So[73]=So[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},So[145]=So[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},So[70]=So[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[34]=function(t){return[ho(t),lo(t)]},So[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},So[136]=function(t){return[co(t),uo(t)]},So[153]=function(t){return[so(t),io(t)]},So[102]=function(t){return[oo(t),ao(t)]},So[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},So[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[152]=function(t){return[so(t),uo(t)]},So[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},So[137]=function(t){return[co(t),io(t)]},So[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},So[98]=function(t){return[lo(t),ao(t)]},So[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},So[38]=function(t){return[oo(t),ho(t)]},So[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Bo=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=jo(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Uo=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return jo(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Go=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=jo(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return g(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=on(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,c,h,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,a=(o=f).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),c=s.geometry.coordinates[0].map(function(t){return t[0]}),h=s.geometry.coordinates[0].map(function(t){return t[1]}),(Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&Fo(f,i)){for(var p=t.map(function(t){return t.from.coordinates}),d=void 0,y=function(t){e.some(function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r})||(d=t)},g=0,v=p;g<v.length;g++)y(v[g]);d&&e.inside(u(d))&&(r&&!Fo(n,f)||(r=e))}}),r},t.prototype.inside=function(t){return de(t,this.toPolygon())},t}(),qo=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return q(e,function(t){nt(t,"LineString","Graph::fromGeoJson"),R(t,function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e})}),n},t.prototype.getNode=function(t){var e=Bo.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Bo(t)),n},t.prototype.addEdge=function(t,e){var n=new Uo(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Go;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function zo(t,e){var n=!0;return q(t,function(t){q(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Vo(e,t);case"Polygon":return!de(t,e)}break;case"LineString":switch(e.type){case"Point":return!Vo(t,e);case"LineString":return!function(t,e){return hr(t,e).features.length>0}(t,e);case"Polygon":return!Zo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!de(e,t);case"LineString":return!Zo(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(de(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(de(o[i],t))return!0;return hr(ri(t),ri(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)})}),n}function Vo(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Wo(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Zo(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(de(r[n],t))return!0;return hr(e,ri(t)).features.length>0}function Wo(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Ho(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Xo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Yo(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Qo(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),$o(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function Jo(t,e){return hr(t,ii(e)).features.length>0}function Ko(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)de(u(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function $o(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var ts=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:rs};function es(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function ns(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function rs(t,e){return yi(t,e,{strict:!0})}ts.prototype.compare=function(t,e){if(t.type!==e.type||!ns(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=es(t),i=es(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},ts.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ts.prototype.compareLine=function(t,e,n,r){if(!ns(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ts.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},ts.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},ts.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},ts.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ts.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ts.prototype.removePseudo=function(t){return t};var is=ts;function os(t,e){var n=!1;return q(t,function(t){q(e,function(e){if(!0===n)return!0;n=!zo(t.geometry,e.geometry)})}),n}var ss=Ft(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),as=Ft(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),us=Ft(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),ls=Ft(function(t){if(t.exports)var e=us;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)}),cs=Ft(function(t){t.exports&&(t.exports={DBSCAN:ss,KMEANS:as,OPTICS:ls,PriorityQueue:us})}),hs=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},fs=hs,ps=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},ds=hs;function ys(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var gs=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?fs:ps,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}a[h]=f}for(var y=0;y<i;y++)l+=a[y];for(var g=0;g<i;g++)c[g]={i:g,v:t[g],pr:a[g]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var v=1;v<i;v++)c[v].cs=c[v-1].cs+c[v].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);r.push(c[_-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var y=Math.floor(Math.random()*c);d[y]||(d[y]=!0,i.push(t[y]))}do{ys(e,0,p);for(var g=0;g<c;g++){for(var v=1/0,m=0,_=0;_<e;_++)(a=f?ds(t[g],i[_]):Math.abs(t[g]-i[_]))<=v&&(v=a,m=_);s[g]=m,p[m]++}for(var b=[],S=(o=[],0);S<e;S++)b[S]=f?ys(h,0,b[S]):0,o[S]=i[S];if(f){for(var x=0;x<e;x++)i[x]=[];for(var w=0;w<c;w++)for(var P=b[s[w]],C=t[w],O=0;O<h;O++)P[O]+=C[O];u=!0;for(var T=0;T<e;T++){for(var E=i[T],L=b[T],M=o[T],I=p[T],N=0;N<h;N++)E[N]=L[N]/I||0;if(u)for(var A=0;A<h;A++)if(M[A]!=E[A]){u=!1;break}}}else{for(var R=0;R<c;R++)b[s[R]]+=t[R];for(var D=0;D<e;D++)i[D]=b[D]/p[D]||0;u=!0;for(var k=0;k<e;k++)if(o[k]!=i[k]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function vs(t,e){return w(_i(t[0],t[1]))===w(_i(e[0],e[1]))}function ms(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function _s(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var bs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||bs.heuristics.manhattan,o=r.closest||!1,s=new ws(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return _s(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?_s(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ss(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new xs(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function xs(t,e,n){this.x=t,this.y=e,this.weight=n}function ws(t){this.content=[],this.scoreFunction=t}function Ps(t,e){for(var n=0;n<e.features.length;n++)if(de(t,e.features[n]))return!0;return!1}function Cs(t){return function(){return t}}function Os(t){return t[0]}function Ts(t){return t[1]}function Es(){this._=null}function Ls(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ms(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Is(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ns(t){for(;t.L;)t=t.L;return t}function As(t,e,n,r){var i=[null,null],o=ea.push(i)-1;return i.left=t,i.right=e,n&&Ds(i,t,e,n),r&&Ds(i,e,t,r),$s[t.index].halfedges.push(o),$s[e.index].halfedges.push(o),i}function Rs(t,e,n){var r=[e,n];return r.left=t,r}function Ds(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function ks(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function js(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],y=(h+p)/2,g=(f+d)/2;if(d===f){if(y<e||y>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(a=g-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Fs(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Bs(t,e){return e[+(e.left!==t.site)]}function Us(t,e){return e[+(e.left===t.site)]}Ss.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)bs.cleanNode(this.nodes[t])},Ss.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)bs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ss.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ss.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ss.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},xs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},xs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},xs.prototype.isWall=function(){return 0===this.weight},ws.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Es.prototype={constructor:Es,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ns(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ms(this,n),n=(t=n).U),n.C=!1,r.C=!0,Is(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Is(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ms(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Ns(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ms(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Is(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ms(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Is(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ms(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Is(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Gs,qs=[];function zs(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-ra)){var p=u*u+l*l,d=c*c+h*h,y=(h*p-l*d)/f,g=(u*d-c*p)/f,v=qs.pop()||new function(){Ls(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=y+s,v.y=(v.cy=g+a)+Math.sqrt(y*y+g*g),t.circle=v;for(var m=null,_=ta._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}ta.insert(m,v),m||(Gs=v)}}}}function Vs(t){var e=t.circle;e&&(e.P||(Gs=e.N),ta.remove(e),qs.push(e),Ls(e),t.circle=null)}var Zs=[];function Ws(t){var e=Zs.pop()||new function(){Ls(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Hs(t){Vs(t),Ks.remove(t),Zs.push(t),Ls(t)}function Xs(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Hs(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<na&&Math.abs(r-u.circle.cy)<na;)o=u.P,a.unshift(u),Hs(u),u=o;a.unshift(u),Vs(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<na&&Math.abs(r-l.circle.cy)<na;)s=l.N,a.push(l),Hs(l),l=s;a.push(l),Vs(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],Ds(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=As(u.site,l.site,null,i),zs(u),zs(l)}function Ys(t){for(var e,n,r,i,o=t[0],s=t[1],a=Ks._;a;)if((r=Qs(a,s)-o)>na)a=a.L;else{if(!((i=o-Js(a,s))>na)){r>-na?(e=a.P,n=a):i>-na?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){$s[t.index]={site:t,halfedges:[]}}(t);var u=Ws(t);if(Ks.insert(e,u),e||n){if(e===n)return Vs(e),n=Ws(e.site),Ks.insert(u,n),u.edge=n.edge=As(e.site,u.site),zs(e),void zs(n);if(n){Vs(e),Vs(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=n.site,y=d[0]-c,g=d[1]-h,v=2*(f*g-p*y),m=f*f+p*p,_=y*y+g*g,b=[(g*m-p*_)/v+c,(f*_-y*m)/v+h];Ds(n.edge,l,d,b),u.edge=As(l,t,null,b),n.edge=As(t,d,null,b),zs(e),zs(n)}else u.edge=As(e.site,u.site)}}function Qs(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+a)/2}function Js(t,e){var n=t.N;if(n)return Qs(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Ks,$s,ta,ea,na=1e-6,ra=1e-12;function ia(t,e){return e[1]-t[1]||e[0]-t[0]}function oa(t,e){var n,r,i,o=t.sort(ia).pop();for(ea=[],$s=new Array(t.length),Ks=new Es,ta=new Es;;)if(i=Gs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ys(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Xs(i.arc)}if(function(){for(var t,e,n,r,i=0,o=$s.length;i<o;++i)if((t=$s[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Fs(t,ea[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=ea.length;o--;)js(i=ea[o],t,e,n,r)&&ks(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>na||Math.abs(i[0][1]-i[1][1])>na)||delete ea[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,c,h,f,p,d,y,g=$s.length,v=!0;for(i=0;i<g;++i)if(o=$s[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)ea[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=Us(o,ea[u[a]]))[0],y=p[1],h=(c=Bs(o,ea[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>na||Math.abs(y-f)>na)&&(u.splice(a,0,ea.push(Rs(s,p,Math.abs(d-t)<na&&r-y>na?[t,Math.abs(h-t)<na?f:r]:Math.abs(y-r)<na&&n-d>na?[Math.abs(f-r)<na?h:n,r]:Math.abs(d-n)<na&&y-e>na?[n,Math.abs(h-n)<na?f:e]:Math.abs(y-e)<na&&d-t>na?[Math.abs(f-e)<na?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var m,_,b,S=1/0;for(i=0,v=null;i<g;++i)(o=$s[i])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<S&&(S=b,v=o);if(v){var x=[t,e],w=[t,r],P=[n,r],C=[n,e];v.halfedges.push(ea.push(Rs(s=v.site,x,w))-1,ea.push(Rs(s,w,P))-1,ea.push(Rs(s,P,C))-1,ea.push(Rs(s,C,x))-1)}}for(i=0;i<g;++i)(o=$s[i])&&(o.halfedges.length||delete $s[i])}(s,a,u,l)}this.edges=ea,this.cells=$s,Ks=ta=ea=$s=null}function sa(t){return(t=t.slice()).push(t[0]),c([t])}function aa(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!L(r))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var l=K(t);if("degrees"===o)var h=C(s);else e=Si(t,e,90,{units:o}),n=Si(t,n,0,{units:o}),e=K(e)[0]-l[0],n=K(n)[1]-l[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,y=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(ua(d),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(ua(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(g=-g),"degrees"===o){var v=y*Math.cos(h)+g*Math.sin(h),m=g*Math.cos(h)-y*Math.sin(h);y=v,g=m}f.push([y+l[0],g+l[1]])}return f.push(f[0]),"degrees"===o?c([f],u):Io(c([f],u),s,{pivot:a})}function ua(t){var e=t*Math.PI/180;return Math.tan(e)}function la(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return U(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!E(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&A(t,function(t){n+=t[0]*a,r+=t[1]*a,i+=a})}),u([n/i,r/i],e.properties,e)}function ca(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ha(t,e){var n=0,r=0;A(t,function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var l=o-r,c=t.coordinates[u][l+1],h=i[0],f=i[1],p=c[0],d=c[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function fa(t,e){var n=0,r=0,i=0;A(t,function(o,s,a,u,l){u>i&&(i=u,r=s,e.push([[]])),l>n&&(n=l,r=s,e[u].push([]));var c=s-r,h=t.coordinates[u][l][c+1],f=o[0],p=o[1],d=h[0],y=h[1];e[u][l].push([.75*f+.25*d,.75*p+.25*y]),e[u][l].push([.25*f+.75*d,.25*p+.75*y])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function pa(t,e,n){void 0===n&&(n=2);var r=K(t),i=K(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function da(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];j(t,function(t){a.push(hn(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=pa(a[l],a[c],r);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++)0!==(h=u[l][c])&&(u[l][c]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(s)for(l=0;l<a.length;l++){var f=u[l].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function ya(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function ga(t,e){return void 0===e&&(e={}),ma(t,"mercator",e)}function va(t,e){return void 0===e&&(e={}),ma(t,"wgs84",e)}function ma(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?_a(t):ba(t):(!0!==r&&(t=xe(t)),A(t,function(t){var n="mercator"===e?_a(t):ba(t);t[0]=n[0],t[1]=n[1]})),t}function _a(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function ba(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}oa.prototype={constructor:oa,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Bs(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,c=n.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&r<s.index&&r<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=r,null==n||c<=n*n?i.site:null}};var Sa=Object.freeze({__proto__:null,toMercator:ga,toWgs84:va}),xa=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function wa(t){return Array.isArray(t)?Ea(t):t&&t.bbox?Ea(t.bbox):[360*Ta(),180*Ta()]}function Pa(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(u(wa(e.bbox)));return d(n)}function Ca(t,e){void 0===e&&(e={}),null==t&&(t=1),E(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),E(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=xa(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((r=wa(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(c([i]))},i=0;i<t;i++)r();return d(n)}function Oa(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!E(r)||void 0===r||r<2)&&(r=10),E(i)&&void 0!==i||(i=1e-4),E(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[wa(n)],l=0;l<r-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(f(u))}return d(s)}function Ta(){return Math.random()-.5}function Ea(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var La=Object.freeze({__proto__:null,randomPosition:wa,randomPoint:Pa,randomPolygon:Ca,randomLineString:Oa});function Ma(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return j(t,function(t){Ra(t.properties,e)&&n.push(t)}),d(n)}function Ia(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=Aa(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(d(u),s,o)}}function Na(t,e,n,r){var i=r;return Ia(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function Aa(t,e){var n={};return j(t,function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}}),n}function Ra(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ra(t,e[r]))return!1;return!0}return Da(t,e)}function Da(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function ka(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var ja=Object.freeze({__proto__:null,getCluster:Ma,clusterEach:Ia,clusterReduce:Na,createBins:Aa,applyFilter:Ra,propertiesContainsFilter:Da,filterProperties:ka}),Fa=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function Ba(t,e){return t>e?1:t<e?-1:0}function Ua(t,e,n){for(var r=new Fa(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function Ga(t,e,n,r){var i=new Fa(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=Ua(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function qa(t,e,n){var r=null,i=null;if(e){var o=n((e=Ua(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}var za=function(){function t(t){void 0===t&&(t=Ba),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Ga(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new Fa(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=Ua(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=Ua(t,e,n)).key)?(null===e.left?r=e.right:(r=Ua(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Ua(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Ua(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new Fa(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&function t(e,n,r,i,o){if(!(r>=i)){for(var s=e[r+i>>1],a=r-1,u=i+1;;){do{a++}while(o(e[a],s)<0);do{u--}while(o(e[u],s)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=n[a],n[a]=n[u],n[u]=l}t(e,n,r,u,o),t(e,n,u+1,i,o)}}(t,e,0,r-1,i),null===this._root)this._root=function t(e,n,r,i){var o=i-r;if(o>0){var s=r+Math.floor(o/2),a=e[s],u=n[s],l=new Fa(a,u);return l.left=t(e,n,r,s),l.right=t(e,n,s+1,i),l}return null}(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new Fa(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new Fa(null,null),r=n,i=0;i<t.length;i++)r=r.next=new Fa(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=function t(e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t(e,n,o),a=e.head;return a.left=s,e.head=e.head.next,a.right=t(e,o+1,r),a}return null}({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,n,r,i,o){if(e){i(n+(r?" ":" ")+o(e)+"\n");var s=n+(r?"    ":"   ");e.left&&t(e.left,s,!1,i,o),e.right&&t(e.right,s,!0,i,o)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=qa(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=Ga(e,n,s,r):o=Ga(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=Ua(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return qa(t,this._root,this._comparator)},t}();function Va(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wa(t,e,n){return e&&Za(t.prototype,e),n&&Za(t,n),t}var Ha=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Xa=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Ya=Number.EPSILON;void 0===Ya&&(Ya=Math.pow(2,-52));var Qa=Ya*Ya,Ja=function(t,e){if(-Ya<t&&t<Ya&&-Ya<e&&e<Ya)return 0;var n=t-e;return n*n<Qa*t*e?0:t<e?-1:1},Ka=function(){function t(){Va(this,t),this.reset()}return Wa(t,[{key:"reset",value:function(){this.xRounder=new $a,this.yRounder=new $a}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),$a=function(){function t(){Va(this,t),this.tree=new za,this.round(0)}return Wa(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Ja(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Ja(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),tu=new Ka,eu=function(t,e){return t.x*e.y-t.y*e.x},nu=function(t,e){return t.x*e.x+t.y*e.y},ru=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=eu(r,i);return Ja(o,0)},iu=function(t){return Math.sqrt(nu(t,t))},ou=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},su=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},au=function(){function t(e,n){Va(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Wa(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:lu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Wa(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,l=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},eu(u,a)/iu(u)/iu(a)),cosine:function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return nu(i,r)/iu(i)/iu(r)}(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),uu=0,lu=function(){function t(e,n,r,i){Va(this,t),this.id=++uu,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Wa(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(i!==o){var g=u-s,v=i-n,m=l-a,_=o-r;if(g>v&&m<_)return 1;if(g<v&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Wa(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Xa(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Ha(e,s)&&0===this.comparePoint(s),l=Ha(n,i)&&0===t.comparePoint(i),c=Ha(e,a)&&0===this.comparePoint(a),h=Ha(n,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,n,r){if(0===e.x)return su(n,r,t.x);if(0===r.x)return su(t,e,n.x);if(0===e.y)return ou(n,r,t.y);if(0===r.y)return ou(t,e,n.y);var i=eu(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=eu(o,e)/i,a=eu(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Ha(r,f)?tu.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new au(e,!0),o=new au(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return au.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),au.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],h=n.rings.indexOf(l);-1===h?(n.rings.push(l),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var g=0,v=l.length;g<v;g++){var m=l[g].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(_u.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===_u.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(_u.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=au.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new au(i,!0),new au(o,!1),[r],[s])}}]),t}(),cu=function(){function t(e,n,r){if(Va(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=tu.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=tu.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(lu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(lu.fromRing(o,i,this))}return Wa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),hu=function(){function t(e,n){if(Va(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new cu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new cu(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Wa(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),fu=function(){function t(e,n){if(Va(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new hu(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Wa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),pu=function(){function t(e){Va(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Wa(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,g=0,v=h.length;g<v;g++)if(h[g].point===a.point){y=g;break}if(null===y){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(y)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(l))}}return n}}]),Wa(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==ru(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===ru(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];au.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),du=function(){function t(e){Va(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Wa(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),yu=function(){function t(e){Va(this,t),this.rings=e,this.polys=this._composePolys(e)}return Wa(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new du(i));else{var o=i.enclosingRing();o.poly||e.push(new du(o)),o.poly.addInterior(i)}}return e}}]),t}(),gu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lu.compare;Va(this,t),this.queue=e,this.tree=new za(n),this.segments=[]}return Wa(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)n.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),g=0,v=y.length;g<v;g++)n.push(y[g])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p?u:au.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),b=0,S=_.length;b<S;b++)n.push(_[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var x=s.getIntersection(a);if(null!==x){if(!s.isAnEndpoint(x))for(var w=this._splitSafely(s,x),P=0,C=w.length;P<C;P++)n.push(w[P]);if(!a.isAnEndpoint(x))for(var O=this._splitSafely(a,x),T=0,E=O.length;T<E;T++)n.push(O[T])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),vu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,mu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,_u=new(function(){function t(){Va(this,t)}return Wa(t,[{key:"run",value:function(t,e,n){_u.type=t,tu.reset();for(var r=[new fu(e,!0)],i=0,o=n.length;i<o;i++)r.push(new fu(n[i],!1));if(_u.numMultiPolys=r.length,"difference"===_u.type)for(var s=r[0],a=1;a<r.length;)null!==Xa(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===_u.type)for(var u=0,l=r.length;u<l;u++)for(var c=r[u],h=u+1,f=r.length;h<f;h++)if(null===Xa(c.bbox,r[h].bbox))return[];for(var p=new za(au.compare),d=0,y=r.length;d<y;d++)for(var g=r[d].getSweepEvents(),v=0,m=g.length;v<m;v++)if(p.insert(g[v]),p.size>vu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new gu(p),b=p.size,S=p.pop();S;){var x=S.key;if(p.size===b){var w=x.segment;throw new Error("Unable to pop() ".concat(x.isLeft?"left":"right"," SweepEvent ")+"[".concat(x.point.x,", ").concat(x.point.y,"] from segment #").concat(w.id," ")+"[".concat(w.leftSE.point.x,", ").concat(w.leftSE.point.y,"] -> ")+"[".concat(w.rightSE.point.x,", ").concat(w.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>vu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>mu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var P=_.process(x),C=0,O=P.length;C<O;C++){var T=P[C];void 0===T.consumedBy&&p.insert(T)}b=p.size,S=p.pop()}tu.reset();var E=pu.factory(_.segments);return new yu(E).getGeom()}}]),t}()),bu={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _u.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _u.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _u.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return _u.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Su=function(){};Su.prototype.interfaces_=function(){return[]},Su.prototype.getClass=function(){return Su},Su.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var xu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),wu=function(){},Pu={MAX_VALUE:{configurable:!0}};wu.isNaN=function(t){return Number.isNaN(t)},wu.doubleToLongBits=function(t){return t},wu.longBitsToDouble=function(t){return t},wu.isInfinite=function(t){return!Number.isFinite(t)},Pu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(wu,Pu);var Cu=function(){},Ou=function(){},Tu=function(){};function Eu(){}var Lu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Mu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Lu.prototype.setOrdinate=function(t,e){switch(t){case Lu.X:this.x=e;break;case Lu.Y:this.y=e;break;case Lu.Z:this.z=e;break;default:throw new xu("Invalid ordinate index: "+t)}},Lu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Su.equalsWithTolerance(this.x,e.x,n)&&!!Su.equalsWithTolerance(this.y,e.y,n)}},Lu.prototype.getOrdinate=function(t){switch(t){case Lu.X:return this.x;case Lu.Y:return this.y;case Lu.Z:return this.z}throw new xu("Invalid ordinate index: "+t)},Lu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||wu.isNaN(this.z))&&wu.isNaN(t.z)},Lu.prototype.equals=function(t){return t instanceof Lu&&this.equals2D(t)},Lu.prototype.equalInZ=function(t,e){return Su.equalsWithTolerance(this.z,t.z,e)},Lu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Lu.prototype.clone=function(){},Lu.prototype.copy=function(){return new Lu(this)},Lu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Lu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Lu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Lu.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+Lu.hashCode(this.x))+Lu.hashCode(this.y)},Lu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Lu.prototype.interfaces_=function(){return[Cu,Ou,Eu]},Lu.prototype.getClass=function(){return Lu},Lu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=wu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Mu.DimensionalComparator.get=function(){return Iu},Mu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Mu.NULL_ORDINATE.get=function(){return wu.NaN},Mu.X.get=function(){return 0},Mu.Y.get=function(){return 1},Mu.Z.get=function(){return 2},Object.defineProperties(Lu,Mu);var Iu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new xu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Iu.prototype.compare=function(t,e){var n=t,r=e,i=Iu.compare(n.x,r.x);if(0!==i)return i;var o=Iu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Iu.compare(n.z,r.z)},Iu.prototype.interfaces_=function(){return[Tu]},Iu.prototype.getClass=function(){return Iu},Iu.compare=function(t,e){return t<e?-1:t>e?1:wu.isNaN(t)?wu.isNaN(e)?0:-1:wu.isNaN(e)?1:0};var Nu=function(){};Nu.prototype.create=function(){},Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu};var Au=function(){},Ru={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Au.prototype.interfaces_=function(){return[]},Au.prototype.getClass=function(){return Au},Au.toLocationSymbol=function(t){switch(t){case Au.EXTERIOR:return"e";case Au.BOUNDARY:return"b";case Au.INTERIOR:return"i";case Au.NONE:return"-"}throw new xu("Unknown location value: "+t)},Ru.INTERIOR.get=function(){return 0},Ru.BOUNDARY.get=function(){return 1},Ru.EXTERIOR.get=function(){return 2},Ru.NONE.get=function(){return-1},Object.defineProperties(Au,Ru);var Du=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},ku=function(){},ju={LOG_10:{configurable:!0}};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.log10=function(t){var e=Math.log(t);return wu.isInfinite(e)||wu.isNaN(e)?e:e/ku.LOG_10},ku.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},ku.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},ku.wrap=function(t,e){return t<0?e- -t%e:t%e},ku.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},ku.average=function(t,e){return(t+e)/2},ju.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ku,ju);var Fu=function(t){this.str=t};Fu.prototype.append=function(t){this.str+=t},Fu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Fu.prototype.toString=function(t){return this.str};var Bu=function(t){this.value=t};Bu.prototype.intValue=function(){return this.value},Bu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Bu.isNaN=function(t){return Number.isNaN(t)};var Uu=function(){};Uu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Uu.toUpperCase=function(t){return t.toUpperCase()};var Gu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},qu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Gu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Gu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Gu.magnitude(n._hi),i=Gu.TEN.pow(r);(n=n.divide(i)).gt(Gu.TEN)?(n=n.divide(Gu.TEN),r+=1):n.lt(Gu.ONE)&&(n=n.multiply(Gu.TEN),r-=1);for(var o=r+1,s=new Fu,a=Gu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(Gu.valueOf(l)).multiply(Gu.TEN),c&&n.selfAdd(Gu.TEN);var f=!0,p=Gu.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},Gu.prototype.sqr=function(){return this.multiply(this)},Gu.prototype.doubleValue=function(){return this._hi+this._lo},Gu.prototype.subtract=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Gu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Gu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Gu.prototype.selfSubtract=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Gu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Gu.prototype.min=function(t){return this.le(t)?this:t},Gu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Gu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=Gu.SPLIT*u)-(i=l-u))*(s=(h=Gu.SPLIT*n)-(s=h-n))-(c=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},Gu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Gu.prototype.divide=function(){if(arguments[0]instanceof Gu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=Gu.SPLIT*o)-(e=s-o)),u=e*(r=(u=Gu.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),c=o-u+s;return new Gu(l,c)}if("number"==typeof arguments[0]){var h=arguments[0];return wu.isNaN(h)?Gu.createNaN():Gu.copy(this).selfDivide(h,0)}},Gu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Gu.prototype.pow=function(t){if(0===t)return Gu.valueOf(1);var e=new Gu(this),n=Gu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Gu.prototype.ceil=function(){if(this.isNaN())return Gu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Gu(t,e)},Gu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Gu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Gu.prototype.setValue=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Gu.prototype.max=function(t){return this.ge(t)?this:t},Gu.prototype.sqrt=function(){if(this.isZero())return Gu.valueOf(0);if(this.isNegative())return Gu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Gu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Gu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Gu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,y=null,g=null;p=this._hi+u,h=this._lo+l,d=p-(y=p-this._hi),f=h-(g=h-this._lo);var v=(c=p+(y=(d=u-y+(this._hi-d))+h))+(y=(f=l-g+(this._lo-f))+(y+(p-c))),m=y+(c-v);return this._hi=v,this._lo=m,this}},Gu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Gu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=Gu.SPLIT*this._hi)-this._hi,l=Gu.SPLIT*n,i=u-i,o=this._hi-i,s=l-n;var c=(u=this._hi*n)+(l=i*(s=l-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},Gu.prototype.selfSqr=function(){return this.selfMultiply(this)},Gu.prototype.floor=function(){if(this.isNaN())return Gu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Gu(t,e)},Gu.prototype.negate=function(){return this.isNaN()?this:new Gu(-this._hi,-this._lo)},Gu.prototype.clone=function(){},Gu.prototype.multiply=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return t.isNaN()?Gu.createNaN():Gu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return wu.isNaN(e)?Gu.createNaN():Gu.copy(this).selfMultiply(e,0)}},Gu.prototype.isNaN=function(){return wu.isNaN(this._hi)},Gu.prototype.intValue=function(){return Math.trunc(this._hi)},Gu.prototype.toString=function(){var t=Gu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Gu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Gu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Gu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Gu.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=Gu.SPLIT*n)-(i=s-n)),o=(a=Gu.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Gu(u,n-u+s)},Gu.prototype.toSciNotation=function(){if(this.isZero())return Gu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Gu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Gu.prototype.abs=function(){return this.isNaN()?Gu.NaN:this.isNegative()?this.negate():new Gu(this)},Gu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Gu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Gu.prototype.add=function(){if(arguments[0]instanceof Gu){var t=arguments[0];return Gu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Gu.copy(this).selfAdd(e)}},Gu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Gu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Gu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Gu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Gu.prototype.trunc=function(){return this.isNaN()?Gu.NaN:this.isPositive()?this.floor():this.ceil()},Gu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Gu.prototype.interfaces_=function(){return[Eu,Cu,Ou]},Gu.prototype.getClass=function(){return Gu},Gu.sqr=function(t){return Gu.valueOf(t).selfMultiply(t)},Gu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Gu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Gu(e)}},Gu.sqrt=function(t){return Gu.valueOf(t).sqrt()},Gu.parse=function(t){for(var e=0,n=t.length;Uu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Gu,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,Uu.isDigit(l)){var c=l-"0";o.selfMultiply(Gu.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=Bu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=Gu.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=Gu.TEN.pow(-p);f=o.multiply(y)}return r?f.negate():f},Gu.createNaN=function(){return new Gu(wu.NaN,wu.NaN)},Gu.copy=function(t){return new Gu(t)},Gu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Gu.stringOfChar=function(t,e){for(var n=new Fu,r=0;r<e;r++)n.append(t);return n.toString()},qu.PI.get=function(){return new Gu(3.141592653589793,1.2246467991473532e-16)},qu.TWO_PI.get=function(){return new Gu(6.283185307179586,2.4492935982947064e-16)},qu.PI_2.get=function(){return new Gu(1.5707963267948966,6.123233995736766e-17)},qu.E.get=function(){return new Gu(2.718281828459045,1.4456468917292502e-16)},qu.NaN.get=function(){return new Gu(wu.NaN,wu.NaN)},qu.EPS.get=function(){return 1.23259516440783e-32},qu.SPLIT.get=function(){return 134217729},qu.MAX_PRINT_DIGITS.get=function(){return 32},qu.TEN.get=function(){return Gu.valueOf(10)},qu.ONE.get=function(){return Gu.valueOf(1)},qu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},qu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Gu,qu);var zu=function(){},Vu={DP_SAFE_EPSILON:{configurable:!0}};zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.orientationIndex=function(t,e,n){var r=zu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Gu.valueOf(e.x).selfAdd(-t.x),o=Gu.valueOf(e.y).selfAdd(-t.y),s=Gu.valueOf(n.x).selfAdd(-e.x),a=Gu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},zu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},zu.intersection=function(t,e,n,r){var i=Gu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Gu.valueOf(e.x).selfSubtract(t.x)),o=Gu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Gu.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Gu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Gu.valueOf(t.y).selfSubtract(n.y)),u=Gu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Gu.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=Gu.valueOf(t.x).selfAdd(Gu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=Gu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Gu.valueOf(t.y).selfSubtract(n.y)),f=Gu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Gu.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=Gu.valueOf(n.y).selfAdd(Gu.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new Lu(c,d)},zu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return zu.signum(s);r=i+o}else{if(!(i<0))return zu.signum(s);if(o>=0)return zu.signum(s);r=-i-o}var a=zu.DP_SAFE_EPSILON*r;return s>=a||-s>=a?zu.signum(s):2},zu.signum=function(t){return t>0?1:t<0?-1:0},Vu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(zu,Vu);var Zu=function(){},Wu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Wu.X.get=function(){return 0},Wu.Y.get=function(){return 1},Wu.Z.get=function(){return 2},Wu.M.get=function(){return 3},Zu.prototype.setOrdinate=function(t,e,n){},Zu.prototype.size=function(){},Zu.prototype.getOrdinate=function(t,e){},Zu.prototype.getCoordinate=function(){},Zu.prototype.getCoordinateCopy=function(t){},Zu.prototype.getDimension=function(){},Zu.prototype.getX=function(t){},Zu.prototype.clone=function(){},Zu.prototype.expandEnvelope=function(t){},Zu.prototype.copy=function(){},Zu.prototype.getY=function(t){},Zu.prototype.toCoordinateArray=function(){},Zu.prototype.interfaces_=function(){return[Ou]},Zu.prototype.getClass=function(){return Zu},Object.defineProperties(Zu,Wu);var Hu=function(){},Xu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hu),Yu=function(){};Yu.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Yu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Qu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Lu&&arguments[1]instanceof Lu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=h.y-f.y,g=f.x-h.x,v=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=g*b-_*v,this.y=m*v-y*b,this.w=y*_-m*g}};Qu.prototype.getY=function(){var t=this.y/this.w;if(wu.isNaN(t)||wu.isInfinite(t))throw new Xu;return t},Qu.prototype.getX=function(){var t=this.x/this.w;if(wu.isNaN(t)||wu.isInfinite(t))throw new Xu;return t},Qu.prototype.getCoordinate=function(){var t=new Lu;return t.x=this.getX(),t.y=this.getY(),t},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu},Qu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(wu.isNaN(h)||wu.isInfinite(h)||wu.isNaN(f)||wu.isInfinite(f))throw new Xu;return new Lu(h,f)};var Ju=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Lu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ku={serialVersionUID:{configurable:!0}};Ju.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ju.prototype.equals=function(t){if(!(t instanceof Ju))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Ju.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Ju;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Ju(e,r,n,i)},Ju.prototype.isNull=function(){return this._maxx<this._minx},Ju.prototype.getMaxX=function(){return this._maxx},Ju.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Ju){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Ju.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Ju){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Lu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Ju.prototype.getMinY=function(){return this._miny},Ju.prototype.getMinX=function(){return this._minx},Ju.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Ju){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Ju.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Ju.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ju.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Ju.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Ju.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ju.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ju.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ju.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Ju.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ju.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Ju){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Lu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Ju.prototype.centre=function(){return this.isNull()?null:new Lu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ju.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Ju){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Ju.prototype.getMaxY=function(){return this._maxy},Ju.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Ju.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+Lu.hashCode(this._minx))+Lu.hashCode(this._maxx))+Lu.hashCode(this._miny))+Lu.hashCode(this._maxy)},Ju.prototype.interfaces_=function(){return[Cu,Eu]},Ju.prototype.getClass=function(){return Ju},Ju.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<a))}},Ku.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ju,Ku);var $u={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},tl=function(t){this.geometryFactory=t||new Rc};tl.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=$u.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=$u.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],nl[n]&&(e=nl[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},tl.prototype.write=function(t){return this.extractGeometry(t)},tl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!el[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+el[e].apply(this,[t])+")"};var el={coordinate:function(t){return t.x+" "+t.y},point:function(t){return el.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+el.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(el.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(el.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+el.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+el.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+el.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+el.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},nl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split($u.spaces);return this.geometryFactory.createPoint(new Lu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace($u.trimParens,"$1"),r.push(nl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split($u.spaces),r.push(new Lu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split($u.spaces),r.push(new Lu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split($u.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace($u.trimParens,"$1"),r.push(nl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split($u.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace($u.trimParens,"$1"),n=nl.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split($u.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace($u.trimParens,"$1"),r.push(nl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},rl=function(t){this.parser=new tl(t)};rl.prototype.write=function(t){return this.parser.write(t)},rl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var il=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ol=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(il),sl=function(){};sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.shouldNeverReachHere=function(){if(0===arguments.length)sl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new ol("Should never reach here"+(null!==t?": "+t:""))}},sl.isTrue=function(){var t;if(1===arguments.length)sl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new ol:new ol(t)},sl.equals=function(){var t,e,n;if(2===arguments.length)sl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new ol("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var al=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Lu,this._intPt[1]=new Lu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},ul={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};al.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},al.prototype.getTopologySummary=function(){var t=new Fu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},al.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},al.prototype.getIntersectionNum=function(){return this._result},al.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},al.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},al.prototype.setPrecisionModel=function(t){this._precisionModel=t},al.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},al.prototype.getIntersection=function(t){return this._intPt[t]},al.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},al.prototype.hasIntersection=function(){return this._result!==al.NO_INTERSECTION},al.prototype.getEdgeDistance=function(t,e){return al.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},al.prototype.isCollinear=function(){return this._result===al.COLLINEAR_INTERSECTION},al.prototype.toString=function(){return rl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+rl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},al.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},al.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},al.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return sl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},al.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return sl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},ul.DONT_INTERSECT.get=function(){return 0},ul.DO_INTERSECT.get=function(){return 1},ul.COLLINEAR.get=function(){return 2},ul.NO_INTERSECTION.get=function(){return 0},ul.POINT_INTERSECTION.get=function(){return 1},ul.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(al,ul);var ll=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Ju(this._inputLines[0][0],this._inputLines[0][1]),n=new Ju(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Ju.intersects(n,r,e)&&0===fl.orientationIndex(n,r,e)&&0===fl.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Qu.intersection(t,n,r,i)}catch(s){if(!(s instanceof Xu))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Lu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=zu.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Yu.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Yu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Lu(t),o=new Lu(e),s=new Lu(n),a=new Lu(r),u=new Lu;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Ju.intersects(e,n,r),s=Ju.intersects(e,n,i),a=Ju.intersects(r,i,e),u=Ju.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Ju.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=fl.orientationIndex(e,n,r),s=fl.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=fl.orientationIndex(r,i,e),u=fl.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Lu(r):0===s?this._intPt[0]=new Lu(i):0===a?this._intPt[0]=new Lu(e):0===u&&(this._intPt[0]=new Lu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=fl.distancePointLine(t,n,r),s=fl.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=fl.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=fl.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(al),cl=function(){};cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cl.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return cl.signOfDet2x2(r,i,o,s)},cl.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var hl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};hl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=cl.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},hl.prototype.isPointInPolygon=function(){return this.getLocation()!==Au.EXTERIOR},hl.prototype.getLocation=function(){return this._isPointOnSegment?Au.BOUNDARY:this._crossingCount%2==1?Au.INTERIOR:Au.EXTERIOR},hl.prototype.isOnSegment=function(){return this._isPointOnSegment},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.locatePointInRing=function(){if(arguments[0]instanceof Lu&&Du(arguments[1],Zu)){for(var t=arguments[0],e=arguments[1],n=new hl(t),r=new Lu,i=new Lu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Lu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new hl(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var fl=function(){},pl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.orientationIndex=function(t,e,n){return zu.orientationIndex(t,e,n)},fl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,s=t[r-1].y;e+=i*(s-o)}return e/2}if(Du(arguments[0],Zu)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new Lu,c=new Lu,h=new Lu;a.getCoordinate(0,c),a.getCoordinate(1,h);var f=c.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=c.y,c.x=h.x,c.y=h.y,a.getCoordinate(d+1,h),h.x-=f,p+=c.x*(l.y-h.y);return p/2}},fl.distanceLineLine=function(t,e,n,r){if(t.equals(e))return fl.distancePointLine(t,n,r);if(n.equals(r))return fl.distancePointLine(r,t,e);var i=!1;if(Ju.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?ku.min(fl.distancePointLine(t,n,r),fl.distancePointLine(e,n,r),fl.distancePointLine(n,t,e),fl.distancePointLine(r,t,e)):0},fl.isPointInRing=function(t,e){return fl.locatePointInRing(t,e)!==Au.EXTERIOR},fl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Lu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n},fl.isCCW=function(t){var e=t.length-1;if(e<3)throw new xu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=fl.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},fl.locatePointInRing=function(t,e){return hl.locatePointInRing(t,e)},fl.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},fl.computeOrientation=function(t,e,n){return fl.orientationIndex(t,e,n)},fl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new xu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=fl.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},fl.isOnLine=function(t,e){for(var n=new ll,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},pl.CLOCKWISE.get=function(){return-1},pl.RIGHT.get=function(){return fl.CLOCKWISE},pl.COUNTERCLOCKWISE.get=function(){return 1},pl.LEFT.get=function(){return fl.COUNTERCLOCKWISE},pl.COLLINEAR.get=function(){return 0},pl.STRAIGHT.get=function(){return fl.COLLINEAR},Object.defineProperties(fl,pl);var dl=function(){};dl.prototype.filter=function(t){},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl};var yl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},gl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};yl.prototype.isGeometryCollection=function(){return this.getSortIndex()===yl.SORTINDEX_GEOMETRYCOLLECTION},yl.prototype.getFactory=function(){return this._factory},yl.prototype.getGeometryN=function(t){return this},yl.prototype.getArea=function(){return 0},yl.prototype.isRectangle=function(){return!1},yl.prototype.equals=function(){if(arguments[0]instanceof yl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof yl))return!1;var n=e;return this.equalsExact(n)}},yl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},yl.prototype.geometryChanged=function(){this.apply(yl.geometryChangedFilter)},yl.prototype.geometryChangedAction=function(){this._envelope=null},yl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},yl.prototype.getLength=function(){return 0},yl.prototype.getNumGeometries=function(){return 1},yl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},yl.prototype.getUserData=function(){return this._userData},yl.prototype.getSRID=function(){return this._SRID},yl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},yl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===yl.SORTINDEX_GEOMETRYCOLLECTION)throw new xu("This method does not support GeometryCollection arguments")},yl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},yl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},yl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},yl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ju(this._envelope)},yl.prototype.setSRID=function(t){this._SRID=t},yl.prototype.setUserData=function(t){this._userData=t},yl.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},yl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},yl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===yl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===yl.SORTINDEX_MULTIPOINT||this.getSortIndex()===yl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===yl.SORTINDEX_MULTIPOLYGON},yl.prototype.interfaces_=function(){return[Ou,Cu,Eu]},yl.prototype.getClass=function(){return yl},yl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},yl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},gl.serialVersionUID.get=function(){return 0x799ea46522854c00},gl.SORTINDEX_POINT.get=function(){return 0},gl.SORTINDEX_MULTIPOINT.get=function(){return 1},gl.SORTINDEX_LINESTRING.get=function(){return 2},gl.SORTINDEX_LINEARRING.get=function(){return 3},gl.SORTINDEX_MULTILINESTRING.get=function(){return 4},gl.SORTINDEX_POLYGON.get=function(){return 5},gl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},gl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},gl.geometryChangedFilter.get=function(){return vl},Object.defineProperties(yl,gl);var vl=function(){};vl.interfaces_=function(){return[dl]},vl.filter=function(t){t.geometryChangedAction()};var ml=function(){};ml.prototype.filter=function(t){},ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var _l=function(){},bl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};_l.prototype.isInBoundary=function(t){},_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l},bl.Mod2BoundaryNodeRule.get=function(){return Sl},bl.EndPointBoundaryNodeRule.get=function(){return xl},bl.MultiValentEndPointBoundaryNodeRule.get=function(){return wl},bl.MonoValentEndPointBoundaryNodeRule.get=function(){return Pl},bl.MOD2_BOUNDARY_RULE.get=function(){return new Sl},bl.ENDPOINT_BOUNDARY_RULE.get=function(){return new xl},bl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new wl},bl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Pl},bl.OGC_SFS_BOUNDARY_RULE.get=function(){return _l.MOD2_BOUNDARY_RULE},Object.defineProperties(_l,bl);var Sl=function(){};Sl.prototype.isInBoundary=function(t){return t%2==1},Sl.prototype.interfaces_=function(){return[_l]},Sl.prototype.getClass=function(){return Sl};var xl=function(){};xl.prototype.isInBoundary=function(t){return t>0},xl.prototype.interfaces_=function(){return[_l]},xl.prototype.getClass=function(){return xl};var wl=function(){};wl.prototype.isInBoundary=function(t){return t>1},wl.prototype.interfaces_=function(){return[_l]},wl.prototype.getClass=function(){return wl};var Pl=function(){};Pl.prototype.isInBoundary=function(t){return 1===t},Pl.prototype.interfaces_=function(){return[_l]},Pl.prototype.getClass=function(){return Pl};var Cl=function(){};function Ol(t){this.message=t||""}Cl.prototype.add=function(){},Cl.prototype.addAll=function(){},Cl.prototype.isEmpty=function(){},Cl.prototype.iterator=function(){},Cl.prototype.size=function(){},Cl.prototype.toArray=function(){},Cl.prototype.remove=function(){},Ol.prototype=new Error,Ol.prototype.name="IndexOutOfBoundsException";var Tl=function(){};Tl.prototype.hasNext=function(){},Tl.prototype.next=function(){},Tl.prototype.remove=function(){};var El=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Cl);function Ll(t){this.message=t||""}Ll.prototype=new Error,Ll.prototype.name="NoSuchElementException";var Ml=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Cl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Cl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Il(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Ol;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(El),Il=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ll;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Tl),Nl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=!1,i=e.iterator();i.hasNext();)this.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof Lu&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<c.length;p++)e.add(c[p],h);else for(var d=c.length-1;d>=0;d--)e.add(c[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Lu){var y=arguments[0],g=arguments[1],v=arguments[2];if(!v){var m=this.size();if(m>0){if(y>0){var _=this.get(y-1);if(_.equals2D(g))return null}if(y<m){var b=this.get(y);if(b.equals2D(g))return null}}}t.prototype.add.call(this,y,g)}}else if(4===arguments.length){var S=arguments[0],x=arguments[1],w=arguments[2],P=arguments[3],C=1;w>P&&(C=-1);for(var O=w;O!==P;O+=C)e.add(S[O],x);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Lu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ml),Al=function(){},Rl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Rl.ForwardComparator.get=function(){return Dl},Rl.BidirectionalComparator.get=function(){return kl},Rl.coordArrayType.get=function(){return new Array(0).fill(null)},Al.prototype.interfaces_=function(){return[]},Al.prototype.getClass=function(){return Al},Al.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Al.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Al.indexOf(r,e)<0)return r}return null},Al.scroll=function(t,e){var n=Al.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Yu.arraycopy(t,n,r,0,t.length-n),Yu.arraycopy(t,0,r,t.length-n,n),Yu.arraycopy(r,0,t,0,t.length)},Al.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Al.intersection=function(t,e){for(var n=new Nl,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Al.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Al.removeRepeatedPoints=function(t){return Al.hasRepeatedPoints(t)?new Nl(t,!1).toCoordinateArray():t},Al.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Al.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Al.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Lu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new Lu(r[i+u])},Al.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Al.envelope=function(t){for(var e=new Ju,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Al.toCoordinateArray=function(t){return t.toArray(Al.coordArrayType)},Al.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Al.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Al.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Al.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Al.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Al.extract=function(t,e,n){e=ku.clamp(e,0,t.length);var r=(n=ku.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Al,Rl);var Dl=function(){};Dl.prototype.compare=function(t,e){return Al.compare(t,e)},Dl.prototype.interfaces_=function(){return[Tu]},Dl.prototype.getClass=function(){return Dl};var kl=function(){};kl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Al.compare(n,r);return Al.isEqualReversed(n,r)?0:i},kl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Al.increasingDirection(n),o=Al.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},kl.prototype.interfaces_=function(){return[Tu]},kl.prototype.getClass=function(){return kl};var jl=function(){};jl.prototype.get=function(){},jl.prototype.put=function(){},jl.prototype.size=function(){},jl.prototype.values=function(){},jl.prototype.entrySet=function(){};var Fl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(jl);function Bl(t){this.message=t||""}function Ul(){}Bl.prototype=new Error,Bl.prototype.name="OperationNotSupported",Ul.prototype=new Cl,Ul.prototype.contains=function(){};var Gl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Cl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new ql(this)},e}(Ul),ql=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ll;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Bl},e}(Tl);function zl(t){return null===t?0:t.color}function Vl(t){return null===t?null:t.parent}function Zl(t,e){null!==t&&(t.color=e)}function Wl(t){return null===t?null:t.left}function Hl(t){return null===t?null:t.right}function Xl(){this.root_=null,this.size_=0}Xl.prototype=new Fl,Xl.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Xl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Xl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Vl(t)===Wl(Vl(Vl(t)))){var n=Hl(Vl(Vl(t)));1===zl(n)?(Zl(Vl(t),0),Zl(n,0),Zl(Vl(Vl(t)),1),t=Vl(Vl(t))):(t===Hl(Vl(t))&&(t=Vl(t),e.rotateLeft(t)),Zl(Vl(t),0),Zl(Vl(Vl(t)),1),e.rotateRight(Vl(Vl(t))))}else{var r=Wl(Vl(Vl(t)));1===zl(r)?(Zl(Vl(t),0),Zl(r,0),Zl(Vl(Vl(t)),1),t=Vl(Vl(t))):(t===Wl(Vl(t))&&(t=Vl(t),e.rotateRight(t)),Zl(Vl(t),0),Zl(Vl(Vl(t)),1),e.rotateLeft(Vl(Vl(t))))}this.root_.color=0},Xl.prototype.values=function(){var t=new Ml,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Xl.successor(e));)t.add(e.value);return t},Xl.prototype.entrySet=function(){var t=new Gl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Xl.successor(e));)t.add(e);return t},Xl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Xl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Xl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Xl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Xl.prototype.size=function(){return this.size_};var Yl=function(){};function Ql(){}function Jl(){this.array_=[],arguments[0]instanceof Cl&&this.addAll(arguments[0])}Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl},Ql.prototype=new Ul,Jl.prototype=new Ql,Jl.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Jl.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Jl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Jl.prototype.remove=function(t){throw new Bl},Jl.prototype.size=function(){return this.array_.length},Jl.prototype.isEmpty=function(){return 0===this.array_.length},Jl.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Jl.prototype.iterator=function(){return new Kl(this)};var Kl=function(t){this.treeSet_=t,this.position_=0};Kl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ll;return this.treeSet_.array_[this.position_++]},Kl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Kl.prototype.remove=function(){throw new Bl};var $l=function(){};$l.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},$l.asList=function(t){for(var e=new Ml,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var tc=function(){},ec={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};ec.P.get=function(){return 0},ec.L.get=function(){return 1},ec.A.get=function(){return 2},ec.FALSE.get=function(){return-1},ec.TRUE.get=function(){return-2},ec.DONTCARE.get=function(){return-3},ec.SYM_FALSE.get=function(){return"F"},ec.SYM_TRUE.get=function(){return"T"},ec.SYM_DONTCARE.get=function(){return"*"},ec.SYM_P.get=function(){return"0"},ec.SYM_L.get=function(){return"1"},ec.SYM_A.get=function(){return"2"},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc},tc.toDimensionSymbol=function(t){switch(t){case tc.FALSE:return tc.SYM_FALSE;case tc.TRUE:return tc.SYM_TRUE;case tc.DONTCARE:return tc.SYM_DONTCARE;case tc.P:return tc.SYM_P;case tc.L:return tc.SYM_L;case tc.A:return tc.SYM_A}throw new xu("Unknown dimension value: "+t)},tc.toDimensionValue=function(t){switch(Uu.toUpperCase(t)){case tc.SYM_FALSE:return tc.FALSE;case tc.SYM_TRUE:return tc.TRUE;case tc.SYM_DONTCARE:return tc.DONTCARE;case tc.SYM_P:return tc.P;case tc.SYM_L:return tc.L;case tc.SYM_A:return tc.A}throw new xu("Unknown dimension symbol: "+t)},Object.defineProperties(tc,ec);var nc=function(){};nc.prototype.filter=function(t){},nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc};var rc=function(){};rc.prototype.filter=function(t,e){},rc.prototype.isDone=function(){},rc.prototype.isGeometryChanged=function(){},rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc};var ic=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new xu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Ju,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();$l.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=tc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=tc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Jl($l.asList(this._geometries)),n=new Jl($l.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o=r,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,i);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){var t=this;if(Du(arguments[0],ml))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(Du(arguments[0],rc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Du(arguments[0],nc)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(Du(arguments[0],dl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),sl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(yl),oc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return yl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?tc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new sc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(ic),sc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=_l.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};sc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},sc.prototype.getBoundary=function(){return this._geom instanceof fc?this.boundaryLineString(this._geom):this._geom instanceof oc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},sc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},sc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},sc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Ml;this._endpointMap=new Xl;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return Al.toCoordinateArray(n)},sc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new ac,this._endpointMap.put(t,e)),e.count++},sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new sc(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new sc(n,r);return i.getBoundary()}};var ac=function(){this.count=null};function uc(){}ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var lc=function(){},cc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc},lc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},lc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new function(){}(lc.getStackTrace(r)),a=new function(){}(s),u=0;u<i;u++)try{o+=a.readLine()+lc.NEWLINE}catch(t){if(!(t instanceof uc))throw t;sl.shouldNeverReachHere()}return o}},lc.split=function(t,e){for(var n=e.length,r=new Ml,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},lc.toString=function(){if(1===arguments.length){var t=arguments[0];return lc.SIMPLE_ORDINATE_FORMAT.format(t)}},lc.spaces=function(t){return lc.chars(" ",t)},cc.NEWLINE.get=function(){return Yu.getProperty("line.separator")},cc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(lc,cc);var hc=function(){};hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},hc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Zu.X)===t.getOrdinate(e-1,Zu.X)&&t.getOrdinate(0,Zu.Y)===t.getOrdinate(e-1,Zu.Y)},hc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||wu.isNaN(s)&&wu.isNaN(a)))return!1}return!0},hc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(hc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)hc.copy(e,i-1,r,o,1);return r},hc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)hc.swap(t,r,e-r)},hc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},hc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)hc.copyCoord(t,e+o,n,r+o)},hc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Fu;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(lc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},hc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?hc.createClosedRing(t,e,4):e.getOrdinate(0,Zu.X)===e.getOrdinate(n-1,Zu.X)&&e.getOrdinate(0,Zu.Y)===e.getOrdinate(n-1,Zu.Y)?e:hc.createClosedRing(t,e,n+1)},hc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();hc.copy(e,0,r,0,i);for(var o=i;o<n;o++)hc.copy(e,0,r,o,1);return r};var fc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ju:this._points.expandEnvelope(new Ju)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&hc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?tc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return fl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return hc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,r=0;n<this._points.size()&&r<e._points.size();){var i=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(r));if(0!==i)return i;n++,r++}return n<this._points.size()?1:r<e._points.size()?-1:0}if(2===arguments.length){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._points,a._points)}},e.prototype.apply=function(){if(Du(arguments[0],ml))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Du(arguments[0],rc)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(Du(arguments[0],nc)){var i=arguments[0];i.filter(this)}else if(Du(arguments[0],dl)){var o=arguments[0];o.filter(this)}},e.prototype.getBoundary=function(){return new sc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new xu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(yl),pc=function(){};pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var dc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ju;var t=new Ju;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return tc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(Du(arguments[0],ml)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Du(arguments[0],rc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Du(arguments[0],nc)){var n=arguments[0];n.filter(this)}else if(Du(arguments[0],dl)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),sl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(yl),yc=function(){};yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var gc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new xu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new xu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(fl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(fl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(r._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);$l.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Yu.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Al.minCoordinate(e.getCoordinates());Al.scroll(r,i),Yu.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],fl.isCCW(e.getCoordinates())===n&&Al.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[0],i=arguments[1],o=r,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,i);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){var e=this;if(Du(t,ml)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(Du(t,rc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(Du(t,nc))t.filter(this);else if(Du(t,dl)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[yc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(yl),vc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return yl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return tc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(ic),mc=function(t){function e(e,n){e instanceof Lu&&n instanceof Rc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return yl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return tc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return hc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new xu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new xu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(fc),_c=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return yl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ml,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[yc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(ic),bc=function(t){this._factory=t||null,this._isUserDataCopied=!1},Sc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};bc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},bc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},bc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ic?this.editGeometryCollection(t,e):t instanceof gc?this.editPolygon(t,e):t instanceof dc||t instanceof fc?e.edit(t,this._factory):(sl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},bc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ml,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===vc?this._factory.createMultiPoint(r.toArray([])):n.getClass()===oc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===_c?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},bc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ml,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc},bc.GeometryEditorOperation=function(){},Sc.NoOpGeometryOperation.get=function(){return xc},Sc.CoordinateOperation.get=function(){return wc},Sc.CoordinateSequenceOperation.get=function(){return Pc},Object.defineProperties(bc,Sc);var xc=function(){};xc.prototype.edit=function(t,e){return t},xc.prototype.interfaces_=function(){return[bc.GeometryEditorOperation]},xc.prototype.getClass=function(){return xc};var wc=function(){};wc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof mc?e.createLinearRing(n):t instanceof fc?e.createLineString(n):t instanceof dc?n.length>0?e.createPoint(n[0]):e.createPoint():t},wc.prototype.interfaces_=function(){return[bc.GeometryEditorOperation]},wc.prototype.getClass=function(){return wc};var Pc=function(){};Pc.prototype.edit=function(t,e){return t instanceof mc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof fc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof dc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Pc.prototype.interfaces_=function(){return[bc.GeometryEditorOperation]},Pc.prototype.getClass=function(){return Pc};var Cc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new Lu}else if(Du(arguments[0],Zu)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new Lu}},Oc={serialVersionUID:{configurable:!0}};Cc.prototype.setOrdinate=function(t,e,n){switch(e){case Zu.X:this._coordinates[t].x=n;break;case Zu.Y:this._coordinates[t].y=n;break;case Zu.Z:this._coordinates[t].z=n;break;default:throw new xu("invalid ordinateIndex")}},Cc.prototype.size=function(){return this._coordinates.length},Cc.prototype.getOrdinate=function(t,e){switch(e){case Zu.X:return this._coordinates[t].x;case Zu.Y:return this._coordinates[t].y;case Zu.Z:return this._coordinates[t].z}return wu.NaN},Cc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Cc.prototype.getCoordinateCopy=function(t){return new Lu(this._coordinates[t])},Cc.prototype.getDimension=function(){return this._dimension},Cc.prototype.getX=function(t){return this._coordinates[t].x},Cc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Cc(t,this._dimension)},Cc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Cc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Cc(t,this._dimension)},Cc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Fu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Cc.prototype.getY=function(t){return this._coordinates[t].y},Cc.prototype.toCoordinateArray=function(){return this._coordinates},Cc.prototype.interfaces_=function(){return[Zu,Eu]},Cc.prototype.getClass=function(){return Cc},Oc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Cc,Oc);var Tc=function(){},Ec={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Tc.prototype.readResolve=function(){return Tc.instance()},Tc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Cc(t)}if(Du(arguments[0],Zu)){var e=arguments[0];return new Cc(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Cc(n):new Cc(n,r)}},Tc.prototype.interfaces_=function(){return[Nu,Eu]},Tc.prototype.getClass=function(){return Tc},Tc.instance=function(){return Tc.instanceObject},Ec.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Ec.instanceObject.get=function(){return new Tc},Object.defineProperties(Tc,Ec);var Lc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ml,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Gl;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(jl),Mc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Nc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Ic={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Mc.prototype.equals=function(t){if(!(t instanceof Mc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Mc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Bu(n).compareTo(new Bu(r))},Mc.prototype.getScale=function(){return this._scale},Mc.prototype.isFloating=function(){return this._modelType===Mc.FLOATING||this._modelType===Mc.FLOATING_SINGLE},Mc.prototype.getType=function(){return this._modelType},Mc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Mc.FLOATING?t="Floating":this._modelType===Mc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Mc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Mc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return wu.isNaN(t)?t:this._modelType===Mc.FLOATING_SINGLE?t:this._modelType===Mc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Lu){var e=arguments[0];if(this._modelType===Mc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Mc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Mc.FLOATING?t=16:this._modelType===Mc.FLOATING_SINGLE?t=6:this._modelType===Mc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Mc.prototype.setScale=function(t){this._scale=Math.abs(t)},Mc.prototype.interfaces_=function(){return[Eu,Cu]},Mc.prototype.getClass=function(){return Mc},Mc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Ic.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Ic.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Mc,Ic);var Nc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Ac={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Nc.prototype.readResolve=function(){return Nc.nameToTypeMap.get(this._name)},Nc.prototype.toString=function(){return this._name},Nc.prototype.interfaces_=function(){return[Eu]},Nc.prototype.getClass=function(){return Nc},Ac.serialVersionUID.get=function(){return-552860263173159e4},Ac.nameToTypeMap.get=function(){return new Lc},Object.defineProperties(Nc,Ac),Mc.Type=Nc,Mc.FIXED=new Nc("FIXED"),Mc.FLOATING=new Nc("FLOATING"),Mc.FLOATING_SINGLE=new Nc("FLOATING SINGLE");var Rc=function t(){this._precisionModel=new Mc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Du(arguments[0],Nu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Mc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Dc={serialVersionUID:{configurable:!0}};Rc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Lu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Lu(t.getMinX(),t.getMinY()),new Lu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Lu(t.getMinX(),t.getMinY()),new Lu(t.getMinX(),t.getMaxY()),new Lu(t.getMaxX(),t.getMaxY()),new Lu(t.getMaxX(),t.getMinY()),new Lu(t.getMinX(),t.getMinY())]),null)},Rc.prototype.createLineString=function(t){return t?t instanceof Array?new fc(this.getCoordinateSequenceFactory().create(t),this):Du(t,Zu)?new fc(t,this):void 0:new fc(this.getCoordinateSequenceFactory().create([]),this)},Rc.prototype.createMultiLineString=function(){if(0===arguments.length)return new oc(null,this);if(1===arguments.length){var t=arguments[0];return new oc(t,this)}},Rc.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Rc.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof gc)return this.createMultiPolygon(Rc.toPolygonArray(t));if(a instanceof fc)return this.createMultiLineString(Rc.toLineStringArray(t));if(a instanceof dc)return this.createMultiPoint(Rc.toPointArray(t));sl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Rc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Rc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Lu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Du(arguments[0],Zu)){var e=arguments[0];return new dc(e,this)}}},Rc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Rc.prototype.createPolygon=function(){if(0===arguments.length)return new gc(null,null,this);if(1===arguments.length){if(Du(arguments[0],Zu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof mc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new gc(r,i,this)}},Rc.prototype.getSRID=function(){return this._SRID},Rc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ic(null,this);if(1===arguments.length){var t=arguments[0];return new ic(t,this)}},Rc.prototype.createGeometry=function(t){return new bc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Rc.prototype.getPrecisionModel=function(){return this._precisionModel},Rc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Du(arguments[0],Zu)){var e=arguments[0];return new mc(e,this)}}},Rc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new _c(null,this);if(1===arguments.length){var t=arguments[0];return new _c(t,this)}},Rc.prototype.createMultiPoint=function(){if(0===arguments.length)return new vc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new vc(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Du(arguments[0],Zu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());hc.copy(n,i,o,0,1),r[i]=this.createPoint(o)}return this.createMultiPoint(r)}}},Rc.prototype.interfaces_=function(){return[Eu]},Rc.prototype.getClass=function(){return Rc},Rc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.getDefaultCoordinateSequenceFactory=function(){return Tc.instance()},Rc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Rc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Dc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Rc,Dc);var kc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],jc=function(t){this.geometryFactory=t||new Rc};jc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Fc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==kc.indexOf(n)?Fc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Fc[n].apply(this,[e.geometries]):Fc[n].apply(this,[e])},jc.prototype.write=function(t){var e=t.getGeometryType();if(!Bc[e])throw new Error("Geometry is not supported");return Bc[e].apply(this,[t])};var Fc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Fc[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Fc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Lu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Lu(t[0],t[1]),new Lu(t[2],t[1]),new Lu(t[2],t[3]),new Lu(t[0],t[3]),new Lu(t[0],t[1])])},Point:function(t){var e=new Lu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Fc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Fc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Fc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Fc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Fc.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Fc.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Bc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Bc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bc.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Bc.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bc.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Bc.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Bc.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Bc.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Bc[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Uc=function(t){this.geometryFactory=t||new Rc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new jc(this.geometryFactory)};Uc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Mc.FIXED&&this.reducePrecision(e),e},Uc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Gc=function(){this.parser=new jc(this.geometryFactory)};Gc.prototype.write=function(t){return this.parser.write(t)};var qc=function(){},zc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Vc(t){this.message=t||""}function Zc(){this.array_=[]}qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},qc.opposite=function(t){return t===qc.LEFT?qc.RIGHT:t===qc.RIGHT?qc.LEFT:t},zc.ON.get=function(){return 0},zc.LEFT.get=function(){return 1},zc.RIGHT.get=function(){return 2},Object.defineProperties(qc,zc),Vc.prototype=new Error,Vc.prototype.name="EmptyStackException",Zc.prototype=new El,Zc.prototype.add=function(t){return this.array_.push(t),!0},Zc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Zc.prototype.push=function(t){return this.array_.push(t),t},Zc.prototype.pop=function(t){if(0===this.array_.length)throw new Vc;return this.array_.pop()},Zc.prototype.peek=function(){if(0===this.array_.length)throw new Vc;return this.array_[this.array_.length-1]},Zc.prototype.empty=function(){return 0===this.array_.length},Zc.prototype.isEmpty=function(){return this.empty()},Zc.prototype.search=function(t){return this.array_.indexOf(t)},Zc.prototype.size=function(){return this.array_.length},Zc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Wc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Wc.prototype.getCoordinate=function(){return this._minCoord},Wc.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Wc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();sl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=fl.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===fl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===fl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Wc.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=qc.LEFT;return n[e].y<n[e+1].y&&(r=qc.RIGHT),r},Wc.prototype.getEdge=function(){return this._orientedDe},Wc.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Wc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Wc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}sl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===qc.LEFT&&(this._orientedDe=this._minDe.getSym())},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var Hc=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Lu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(il),Xc=function(){this.array_=[]};Xc.prototype.addLast=function(t){this.array_.push(t)},Xc.prototype.removeFirst=function(){return this.array_.shift()},Xc.prototype.isEmpty=function(){return 0===this.array_.length};var Yc=function(){this._finder=null,this._dirEdgeList=new Ml,this._nodes=new Ml,this._rightMostCoord=null,this._env=null,this._finder=new Wc};Yc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Yc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Yc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Hc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Yc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(qc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Yc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Yc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(qc.RIGHT)>=1&&e.getDepth(qc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Yc.prototype.computeDepths=function(t){var e=new Gl,n=new Xc,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Yc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Yc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Ju,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Yc.prototype.addReachable=function(t){var e=new Zc;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Yc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(qc.LEFT,t.getDepth(qc.RIGHT)),e.setDepth(qc.RIGHT,t.getDepth(qc.LEFT))},Yc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Yc.prototype.getNodes=function(){return this._nodes},Yc.prototype.getDirectedEdges=function(){return this._dirEdgeList},Yc.prototype.interfaces_=function(){return[Cu]},Yc.prototype.getClass=function(){return Yc};var Qc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[qc.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[qc.ON]=o,this.location[qc.LEFT]=s,this.location[qc.RIGHT]=a}};Qc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Qc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Au.NONE)return!1;return!0},Qc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Au.NONE&&(this.location[e]=t)},Qc.prototype.isLine=function(){return 1===this.location.length},Qc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[qc.ON]=this.location[qc.ON],e[qc.LEFT]=Au.NONE,e[qc.RIGHT]=Au.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Au.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Qc.prototype.getLocations=function(){return this.location},Qc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[qc.LEFT];this.location[qc.LEFT]=this.location[qc.RIGHT],this.location[qc.RIGHT]=t},Qc.prototype.toString=function(){var t=new Fu;return this.location.length>1&&t.append(Au.toLocationSymbol(this.location[qc.LEFT])),t.append(Au.toLocationSymbol(this.location[qc.ON])),this.location.length>1&&t.append(Au.toLocationSymbol(this.location[qc.RIGHT])),t.toString()},Qc.prototype.setLocations=function(t,e,n){this.location[qc.ON]=t,this.location[qc.LEFT]=e,this.location[qc.RIGHT]=n},Qc.prototype.get=function(t){return t<this.location.length?this.location[t]:Au.NONE},Qc.prototype.isArea=function(){return this.location.length>1},Qc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Au.NONE)return!0;return!1},Qc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(qc.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Qc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Au.NONE)},Qc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Qc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var Jc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Qc(e),this.elt[1]=new Qc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Qc(n.elt[0]),this.elt[1]=new Qc(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Qc(Au.NONE),this.elt[1]=new Qc(Au.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Qc(o,s,a),this.elt[1]=new Qc(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Qc(Au.NONE,Au.NONE,Au.NONE),this.elt[1]=new Qc(Au.NONE,Au.NONE,Au.NONE),this.elt[u].setLocations(l,c,h)}};Jc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Jc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Jc.prototype.isNull=function(t){return this.elt[t].isNull()},Jc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Jc.prototype.isLine=function(t){return this.elt[t].isLine()},Jc.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Qc(t.elt[n]):e.elt[n].merge(t.elt[n])},Jc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Jc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(qc.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Jc.prototype.toString=function(){var t=new Fu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Jc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Jc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Jc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(qc.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Jc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Jc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Jc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Qc(this.elt[t].location[0]))},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.toLineLabel=function(t){for(var e=new Jc(Au.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Kc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ml,this._pts=new Ml,this._label=new Jc(Au.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ml,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Kc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=fl.isCCW(this._ring.getCoordinates())},Kc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Kc.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Hc("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Hc("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();sl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Kc.prototype.getLinearRing=function(){return this._ring},Kc.prototype.getCoordinate=function(t){return this._pts.get(t)},Kc.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Kc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Kc.prototype.isHole=function(){return this._isHole},Kc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Kc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!fl.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Kc.prototype.addHole=function(t){this._holes.add(t)},Kc.prototype.isShell=function(){return null===this._shell},Kc.prototype.getLabel=function(){return this._label},Kc.prototype.getEdges=function(){return this._edges},Kc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Kc.prototype.getShell=function(){return this._shell},Kc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,qc.RIGHT);if(r===Au.NONE)return null;if(this._label.getLocation(n)===Au.NONE)return this._label.setLocation(n,r),null}},Kc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Kc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var $c=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kc),th=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ml,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new $c(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kc),eh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};eh.prototype.setVisited=function(t){this._isVisited=t},eh.prototype.setInResult=function(t){this._isInResult=t},eh.prototype.isCovered=function(){return this._isCovered},eh.prototype.isCoveredSet=function(){return this._isCoveredSet},eh.prototype.setLabel=function(t){this._label=t},eh.prototype.getLabel=function(){return this._label},eh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},eh.prototype.updateIM=function(t){sl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},eh.prototype.isInResult=function(){return this._isInResult},eh.prototype.isVisited=function(){return this._isVisited},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh};var nh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Jc(0,Au.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Au.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Au.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Jc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Jc)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),s=t._label.getLocation(i);s===Au.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Au.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Au.BOUNDARY:n=Au.INTERIOR;break;case Au.INTERIOR:default:n=Au.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(eh),rh=function(){this.nodeMap=new Xl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};rh.prototype.find=function(t){return this.nodeMap.get(t)},rh.prototype.addNode=function(){if(arguments[0]instanceof Lu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof nh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},rh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},rh.prototype.iterator=function(){return this.nodeMap.values().iterator()},rh.prototype.values=function(){return this.nodeMap.values()},rh.prototype.getBoundaryNodes=function(t){for(var e=new Ml,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Au.BOUNDARY&&e.add(r)}return e},rh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh};var ih=function(){},oh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.isNorthern=function(t){return t===ih.NE||t===ih.NW},ih.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ih.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ih.isInHalfPlane=function(t,e){return e===ih.SE?t===ih.SE||t===ih.SW:t===e||t===e+1},ih.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new xu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ih.NE:ih.SE:e>=0?ih.NW:ih.SW}if(arguments[0]instanceof Lu&&arguments[1]instanceof Lu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new xu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ih.NE:ih.SE:r.y>=n.y?ih.NW:ih.SW}},oh.NE.get=function(){return 0},oh.NW.get=function(){return 1},oh.SW.get=function(){return 2},oh.SE.get=function(){return 3},Object.defineProperties(ih,oh);var sh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};sh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:fl.computeOrientation(t._p0,t._p1,this._p1)},sh.prototype.getDy=function(){return this._dy},sh.prototype.getCoordinate=function(){return this._p0},sh.prototype.setNode=function(t){this._node=t},sh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},sh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},sh.prototype.getDirectedCoordinate=function(){return this._p1},sh.prototype.getDx=function(){return this._dx},sh.prototype.getLabel=function(){return this._label},sh.prototype.getEdge=function(){return this._edge},sh.prototype.getQuadrant=function(){return this._quadrant},sh.prototype.getNode=function(){return this._node},sh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},sh.prototype.computeLabel=function(t){},sh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ih.quadrant(this._dx,this._dy),sl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},sh.prototype.interfaces_=function(){return[Cu]},sh.prototype.getClass=function(){return sh};var ah=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Jc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Hc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,qc.LEFT)===Au.INTERIOR&&t._label.getLocation(n,qc.RIGHT)===Au.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[qc.LEFT]+"/"+this._depth[qc.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Au.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Au.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===qc.LEFT&&(r=-1);var i=qc.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Au.EXTERIOR&&e===Au.INTERIOR?1:t===Au.INTERIOR&&e===Au.EXTERIOR?-1:0},e}(sh),uh=function(){};uh.prototype.createNode=function(t){return new nh(t,null)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var lh=function(){if(this._edges=new Ml,this._nodes=null,this._edgeEndList=new Ml,0===arguments.length)this._nodes=new rh(new uh);else if(1===arguments.length){var t=arguments[0];this._nodes=new rh(t)}};lh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},lh.prototype.find=function(t){return this._nodes.find(t)},lh.prototype.addNode=function(){if(arguments[0]instanceof nh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Lu){var e=arguments[0];return this._nodes.addNode(e)}},lh.prototype.getNodeIterator=function(){return this._nodes.iterator()},lh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},lh.prototype.debugPrintln=function(t){Yu.out.println(t)},lh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Au.BOUNDARY},lh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},lh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&fl.computeOrientation(t,e,r)===fl.COLLINEAR&&ih.quadrant(t,e)===ih.quadrant(n,r)},lh.prototype.getEdgeEnds=function(){return this._edgeEndList},lh.prototype.debugPrint=function(t){Yu.out.print(t)},lh.prototype.getEdgeIterator=function(){return this._edges.iterator()},lh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},lh.prototype.insertEdge=function(t){this._edges.add(t)},lh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},lh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new ah(r,!0),o=new ah(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},lh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},lh.prototype.getNodes=function(){return this._nodes.values()},lh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh},lh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var ch=function(){this._geometryFactory=null,this._shellList=new Ml;var t=arguments[0];this._geometryFactory=t};ch.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},ch.prototype.computePolygons=function(t){for(var e=new Ml,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},ch.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Hc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},ch.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ml,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},ch.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},ch.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ml,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new th(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},ch.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},ch.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ch.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&fl.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},ch.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return sl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},ch.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];lh.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Ml,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){};hh.prototype.getBounds=function(){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var fh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};fh.prototype.getItem=function(){return this._item},fh.prototype.getBounds=function(){return this._bounds},fh.prototype.interfaces_=function(){return[hh,Eu]},fh.prototype.getClass=function(){return fh};var ph=function(){this._size=null,this._items=null,this._size=0,this._items=new Ml,this._items.add(null)};ph.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},ph.prototype.size=function(){return this._size},ph.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},ph.prototype.clear=function(){this._size=0,this._items.clear()},ph.prototype.isEmpty=function(){return 0===this._size},ph.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph};var dh=function(){};dh.prototype.visitItem=function(t){},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var yh=function(){};yh.prototype.insert=function(t,e){},yh.prototype.remove=function(t,e){},yh.prototype.query=function(){},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var gh=function(){if(this._childBoundables=new Ml,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},vh={serialVersionUID:{configurable:!0}};gh.prototype.getLevel=function(){return this._level},gh.prototype.size=function(){return this._childBoundables.size()},gh.prototype.getChildBoundables=function(){return this._childBoundables},gh.prototype.addChildBoundable=function(t){sl.isTrue(null===this._bounds),this._childBoundables.add(t)},gh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},gh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},gh.prototype.interfaces_=function(){return[hh,Eu]},gh.prototype.getClass=function(){return gh},vh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(gh,vh);var mh=function(){};mh.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},mh.min=function(t){return mh.sort(t),t.get(0)},mh.sort=function(t,e){var n=t.toArray();e?$l.sort(n,e):$l.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},mh.singletonList=function(t){var e=new Ml;return e.add(t),e};var _h=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};_h.prototype.expandToQueue=function(t,e){var n=_h.isComposite(this._boundable1),r=_h.isComposite(this._boundable2);if(n&&r)return _h.area(this._boundable1)>_h.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new xu("neither boundable is composite")},_h.prototype.isLeaves=function(){return!(_h.isComposite(this._boundable1)||_h.isComposite(this._boundable2))},_h.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},_h.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new _h(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},_h.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},_h.prototype.getDistance=function(){return this._distance},_h.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},_h.prototype.interfaces_=function(){return[Cu]},_h.prototype.getClass=function(){return _h},_h.area=function(t){return t.getBounds().getArea()},_h.isComposite=function(t){return t instanceof gh};var bh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ml,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];sl.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Sh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};bh.prototype.getNodeCapacity=function(){return this._nodeCapacity},bh.prototype.lastNode=function(t){return t.get(t.size()-1)},bh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof gh?e+=this.size(r):r instanceof fh&&(e+=1)}return e}},bh.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof fh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},bh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ml:t}if(1===arguments.length){for(var e=arguments[0],n=new Ml,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof gh){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof fh?n.add(i.getItem()):sl.shouldNeverReachHere()}return n.size()<=0?null:n}},bh.prototype.insert=function(t,e){sl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new fh(t,e))},bh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ml;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(sl.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof gh?this.boundablesAtLevel(n,s,i):(sl.isTrue(s instanceof fh),-1===n&&i.add(s))}return null}},bh.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Ml;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(Du(arguments[2],dh)&&arguments[0]instanceof Object&&arguments[1]instanceof gh)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof gh?t.query(o,c,a):c instanceof fh?a.visitItem(c.getItem()):sl.shouldNeverReachHere())}else if(Du(arguments[2],El)&&arguments[0]instanceof Object&&arguments[1]instanceof gh)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),y=0;y<d.size();y++){var g=d.get(y);t.getIntersectsOp().intersects(g.getBounds(),h)&&(g instanceof gh?t.query(h,g,p):g instanceof fh?p.add(g.getItem()):sl.shouldNeverReachHere())}},bh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},bh.prototype.getRoot=function(){return this.build(),this._root},bh.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof gh&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}},bh.prototype.createHigherLevels=function(t,e){sl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},bh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof gh){var i=this.depth(r);i>e&&(e=i)}}return e+1}},bh.prototype.createParentBoundables=function(t,e){var n=this;sl.isTrue(!t.isEmpty());var r=new Ml;r.add(this.createNode(e));var i=new Ml(t);mh.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},bh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},bh.prototype.interfaces_=function(){return[Eu]},bh.prototype.getClass=function(){return bh},bh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Sh.IntersectsOp.get=function(){return xh},Sh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Sh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(bh,Sh);var xh=function(){},wh=function(){};wh.prototype.distance=function(t,e){},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh};var Ph=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){sl.isTrue(t.length>0);for(var n=new Ml,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Ch(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Ml;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Du(arguments[2],dh)&&arguments[0]instanceof Object&&arguments[1]instanceof gh){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(Du(arguments[2],El)&&arguments[0]instanceof Object&&arguments[1]instanceof gh){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){sl.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Ml(t);mh.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Du(arguments[0],wh)){var t=arguments[0],n=new _h(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof _h){var r=arguments[0];return this.nearestNeighbour(r,wu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Du(arguments[1],wh)){var i=arguments[0],o=arguments[1],s=new _h(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof _h&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,c=null,h=new ph;for(h.add(a);!h.isEmpty()&&l>0;){var f=h.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,c=f):f.expandToQueue(h,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],v=new fh(d,y),m=new _h(this.getRoot(),v,g);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[yh,Eu]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Ch},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Tu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Tu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(bh),Ch=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Ju(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gh),Oh=function(){};Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Oh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Oh.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Oh.relativeSign(e.x,n.x),i=Oh.relativeSign(e.y,n.y);switch(t){case 0:return Oh.compareValue(r,i);case 1:return Oh.compareValue(i,r);case 2:return Oh.compareValue(i,-r);case 3:return Oh.compareValue(-r,i);case 4:return Oh.compareValue(-r,-i);case 5:return Oh.compareValue(-i,-r);case 6:return Oh.compareValue(-i,r);case 7:return Oh.compareValue(r,-i)}return sl.shouldNeverReachHere("invalid octant value"),0},Oh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Th=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Lu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Th.prototype.getCoordinate=function(){return this.coord},Th.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Th.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Oh.compare(this._segmentOctant,this.coord,e.coord)},Th.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Th.prototype.isInterior=function(){return this._isInterior},Th.prototype.interfaces_=function(){return[Cu]},Th.prototype.getClass=function(){return Th};var Eh=function(){this._nodeMap=new Xl,this._edge=null;var t=arguments[0];this._edge=t};Eh.prototype.getSplitCoordinates=function(){var t=new Nl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Eh.prototype.addCollapsedNodes=function(){var t=new Ml;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Eh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Eh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Bu(e+1))}},Eh.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Lu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Lu(e.coord))},Eh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Eh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Eh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Eh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Bu(e[0])),r=i}},Eh.prototype.getEdge=function(){return this._edge},Eh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Eh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Lu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new Lu(e.coord)),new Nh(o,this._edge.getData())},Eh.prototype.add=function(t,e){var n=new Th(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(sl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Eh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new il("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new il("bad split edge end point at "+i)},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh};var Lh=function(){};Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new xu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Lu&&arguments[1]instanceof Lu){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new xu("Cannot compute the octant for two identical points "+i);return Lh.octant(s,a)}};var Mh=function(){};Mh.prototype.getCoordinates=function(){},Mh.prototype.size=function(){},Mh.prototype.getCoordinate=function(t){},Mh.prototype.isClosed=function(){},Mh.prototype.setData=function(t){},Mh.prototype.getData=function(){},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh};var Ih=function(){};Ih.prototype.addIntersection=function(t,e){},Ih.prototype.interfaces_=function(){return[Mh]},Ih.prototype.getClass=function(){return Ih};var Nh=function(){this._nodeList=new Eh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Nh.prototype.getCoordinates=function(){return this._pts},Nh.prototype.size=function(){return this._pts.length},Nh.prototype.getCoordinate=function(t){return this._pts[t]},Nh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Nh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Nh.prototype.setData=function(t){this._data=t},Nh.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Lh.octant(t,e)},Nh.prototype.getData=function(){return this._data},Nh.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Lu(n.getIntersection(i));this.addIntersection(o,r)}},Nh.prototype.toString=function(){return rl.toLineString(new Cc(this._pts))},Nh.prototype.getNodeList=function(){return this._nodeList},Nh.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Nh.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Nh.prototype.interfaces_=function(){return[Ih]},Nh.prototype.getClass=function(){return Nh},Nh.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ml;return Nh.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var Ah=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Lu,this.p1=new Lu;else if(1===arguments.length){var t=arguments[0];this.p0=new Lu(t.p0),this.p1=new Lu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Lu(e,n),this.p1=new Lu(r,i)}},Rh={serialVersionUID:{configurable:!0}};Ah.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ah.prototype.orientationIndex=function(){if(arguments[0]instanceof Ah){var t=arguments[0],e=fl.orientationIndex(this.p0,this.p1,t.p0),n=fl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Lu){var r=arguments[0];return fl.orientationIndex(this.p0,this.p1,r)}},Ah.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Ah.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ah.prototype.equals=function(t){if(!(t instanceof Ah))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Ah.prototype.intersection=function(t){var e=new ll;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Ah.prototype.project=function(){if(arguments[0]instanceof Lu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Lu(t);var e=this.projectionFactor(t),n=new Lu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Ah){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Ah(s,a)}},Ah.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ah.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ah.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Ah.prototype.distancePerpendicular=function(t){return fl.distancePointLinePerpendicular(t,this.p0,this.p1)},Ah.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ah.prototype.midPoint=function(){return Ah.midPoint(this.p0,this.p1)},Ah.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?wu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Ah.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=wu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Ah.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Ah.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ah.prototype.getLength=function(){return this.p0.distance(this.p1)},Ah.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Ah.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Ah.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Ah.prototype.lineIntersection=function(t){try{return Qu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Xu))throw t}return null},Ah.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ah.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new Lu(n-u,r+a)},Ah.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Ah.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||wu.isNaN(e))&&(e=1),e},Ah.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ah.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ah.prototype.distance=function(){if(arguments[0]instanceof Ah){var t=arguments[0];return fl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Lu){var e=arguments[0];return fl.distancePointLine(e,this.p0,this.p1)}},Ah.prototype.pointAlong=function(t){var e=new Lu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Ah.prototype.hashCode=function(){var t=wu.doubleToLongBits(this.p0.x);t^=31*wu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=wu.doubleToLongBits(this.p1.x);return n^=31*wu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Ah.prototype.interfaces_=function(){return[Cu,Eu]},Ah.prototype.getClass=function(){return Ah},Ah.midPoint=function(t,e){return new Lu((t.x+e.x)/2,(t.y+e.y)/2)},Rh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ah,Rh);var Dh=function(){this.tempEnv1=new Ju,this.tempEnv2=new Ju,this._overlapSeg1=new Ah,this._overlapSeg2=new Ah};Dh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh};var kh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};kh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},kh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},kh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},kh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},kh.prototype.setId=function(t){this._id=t},kh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},kh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Ju(t,e)}return this._env},kh.prototype.getEndIndex=function(){return this._end},kh.prototype.getStartIndex=function(){return this._start},kh.prototype.getContext=function(){return this._context},kh.prototype.getId=function(){return this._id},kh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var jh=function(){};jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.getChainStartIndices=function(t){var e=0,n=new Ml;n.add(new Bu(e));do{var r=jh.findChainEnd(t,e);n.add(new Bu(r)),e=r}while(e<t.length-1);return jh.toIntArray(n)},jh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ih.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ih.quadrant(t[i-1],t[i])===r);)i++;return i-1},jh.getChains=function(){if(1===arguments.length){var t=arguments[0];return jh.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Ml,i=jh.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new kh(e,i[o],i[o+1],n);r.add(s)}return r}},jh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Fh=function(){};Fh.prototype.computeNodes=function(t){},Fh.prototype.getNodedSubstrings=function(){},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var Bh=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Bh.prototype.setSegmentIntersector=function(t){this._segInt=t},Bh.prototype.interfaces_=function(){return[Fh]},Bh.prototype.getClass=function(){return Bh};var Uh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ml,this._index=new Ph,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Nh.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=jh.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Gh(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Gh},Object.defineProperties(e,n),e}(Bh),Gh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dh),qh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},zh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};qh.prototype.getEndCapStyle=function(){return this._endCapStyle},qh.prototype.isSingleSided=function(){return this._isSingleSided},qh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=qh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=qh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==qh.JOIN_ROUND&&(this._quadrantSegments=qh.DEFAULT_QUADRANT_SEGMENTS)},qh.prototype.getJoinStyle=function(){return this._joinStyle},qh.prototype.setJoinStyle=function(t){this._joinStyle=t},qh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},qh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},qh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},qh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},qh.prototype.getMitreLimit=function(){return this._mitreLimit},qh.prototype.setMitreLimit=function(t){this._mitreLimit=t},qh.prototype.setSingleSided=function(t){this._isSingleSided=t},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh},qh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},zh.CAP_ROUND.get=function(){return 1},zh.CAP_FLAT.get=function(){return 2},zh.CAP_SQUARE.get=function(){return 3},zh.JOIN_ROUND.get=function(){return 1},zh.JOIN_MITRE.get=function(){return 2},zh.JOIN_BEVEL.get=function(){return 3},zh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},zh.DEFAULT_MITRE_LIMIT.get=function(){return 5},zh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(qh,zh);var Vh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=fl.COUNTERCLOCKWISE,this._inputLine=t||null},Zh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Vh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Vh.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Vh.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Vh.prototype.isShallowConcavity=function(t,e,n,r){return fl.computeOrientation(t,e,n)===this._angleOrientation&&fl.distancePointLine(e,t,n)<r},Vh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Vh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Vh.prototype.isConcave=function(t,e,n){var r=fl.computeOrientation(t,e,n)===this._angleOrientation;return r},Vh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=fl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Vh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Vh.DELETE;)e++;return e},Vh.prototype.isShallow=function(t,e,n,r){return fl.distancePointLine(e,t,n)<r},Vh.prototype.collapseLine=function(){for(var t=new Nl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Vh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.simplify=function(t,e){return new Vh(t).simplify(e)},Zh.INIT.get=function(){return 0},Zh.DELETE.get=function(){return 1},Zh.KEEP.get=function(){return 1},Zh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Vh,Zh);var Wh=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ml},Hh={COORDINATE_ARRAY_TYPE:{configurable:!0}};Wh.prototype.getCoordinates=function(){return this._ptList.toArray(Wh.COORDINATE_ARRAY_TYPE)},Wh.prototype.setPrecisionModel=function(t){this._precisionModel=t},Wh.prototype.addPt=function(t){var e=new Lu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Wh.prototype.revere=function(){},Wh.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Wh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Wh.prototype.toString=function(){return(new Rc).createLineString(this.getCoordinates()).toString()},Wh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Lu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Wh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Hh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Wh,Hh);var Xh=function(){},Yh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.toDegrees=function(t){return 180*t/Math.PI},Xh.normalize=function(t){for(;t>Math.PI;)t-=Xh.PI_TIMES_2;for(;t<=-Math.PI;)t+=Xh.PI_TIMES_2;return t},Xh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Xh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Xh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Xh.interiorAngle=function(t,e,n){var r=Xh.angle(e,t),i=Xh.angle(e,n);return Math.abs(i-r)},Xh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Xh.PI_TIMES_2;t>=Xh.PI_TIMES_2&&(t=0)}else{for(;t>=Xh.PI_TIMES_2;)t-=Xh.PI_TIMES_2;t<0&&(t=0)}return t},Xh.angleBetween=function(t,e,n){var r=Xh.angle(e,t),i=Xh.angle(e,n);return Xh.diff(r,i)},Xh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Xh.toRadians=function(t){return t*Math.PI/180},Xh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Xh.COUNTERCLOCKWISE:n<0?Xh.CLOCKWISE:Xh.NONE},Xh.angleBetweenOriented=function(t,e,n){var r=Xh.angle(e,t),i=Xh.angle(e,n)-r;return i<=-Math.PI?i+Xh.PI_TIMES_2:i>Math.PI?i-Xh.PI_TIMES_2:i},Yh.PI_TIMES_2.get=function(){return 2*Math.PI},Yh.PI_OVER_2.get=function(){return Math.PI/2},Yh.PI_OVER_4.get=function(){return Math.PI/4},Yh.COUNTERCLOCKWISE.get=function(){return fl.COUNTERCLOCKWISE},Yh.CLOCKWISE.get=function(){return fl.CLOCKWISE},Yh.NONE.get=function(){return fl.COLLINEAR},Object.defineProperties(Xh,Yh);var Qh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ah,this._seg1=new Ah,this._offset0=new Ah,this._offset1=new Ah,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new ll,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===qh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Jh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Qh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=fl.computeOrientation(this._s0,this._s1,this._s2),r=n===fl.CLOCKWISE&&this._side===qc.LEFT||n===fl.COUNTERCLOCKWISE&&this._side===qc.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Qh.prototype.addLineEndCap=function(t,e){var n=new Ah(t,e),r=new Ah;this.computeOffsetSegment(n,qc.LEFT,this._distance,r);var i=new Ah;this.computeOffsetSegment(n,qc.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case qh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,fl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case qh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case qh.CAP_SQUARE:var u=new Lu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new Lu(r.p1.x+u.x,r.p1.y+u.y),c=new Lu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Qh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Qh.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Qu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Xu))throw t;o=new Lu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Qh.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===fl.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},Qh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Qh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===qh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===qh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Qh.prototype.createSquare=function(t){this._segList.addPt(new Lu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Lu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Lu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Lu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Qh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Qh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Qh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Qh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Qh.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Xh.angle(i,this._seg0.p0),s=Xh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Xh.normalize(o+s),u=Xh.normalize(a+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new Lu(h,f),d=new Ah(i,p),y=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===qc.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},Qh.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===qc.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Qh.prototype.addFilletArc=function(t,e,n,r,i){var o=r===fl.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new Lu;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Qh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Qh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Lu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Lu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Qh.prototype.createCircle=function(t){var e=new Lu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Qh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Qh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Wh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Qh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Qh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===qh.JOIN_BEVEL||this._bufParams.getJoinStyle()===qh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,fl.CLOCKWISE,this._distance))},Qh.prototype.closeRing=function(){this._segList.closeRing()},Qh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Jh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Jh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Jh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Jh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Qh,Jh);var Kh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Kh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Al.reverse(o),o},Kh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Vh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],qc.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Vh.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],qc.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Kh.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===qc.RIGHT&&(r=-r);var i=Vh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Kh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Vh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],qc.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Vh.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],qc.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Kh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case qh.CAP_ROUND:e.createCircle(t);break;case qh.CAP_SQUARE:e.createSquare(t)}},Kh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Kh.prototype.getBufferParameters=function(){return this._bufParams},Kh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Kh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Kh.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Kh.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Vh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],qc.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Vh.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],qc.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Kh.prototype.getSegGen=function(t){return new Qh(this._precisionModel,this._bufParams,t)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Kh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Lu(t[n]);return e};var $h=function(){this._subgraphs=null,this._seg=new Ah,this._cga=new fl;var t=arguments[0];this._subgraphs=t},tf={DepthSegment:{configurable:!0}};$h.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Ml,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Du(arguments[2],El)&&arguments[0]instanceof Lu&&arguments[1]instanceof ah)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||fl.computeOrientation(t._seg.p0,t._seg.p1,s)===fl.RIGHT)){var f=a.getDepth(qc.LEFT);t._seg.p0.equals(l[c])||(f=a.getDepth(qc.RIGHT));var p=new ef(t._seg,f);u.add(p)}}else if(Du(arguments[2],El)&&arguments[0]instanceof Lu&&Du(arguments[1],El))for(var d=arguments[0],y=arguments[1],g=arguments[2],v=y.iterator();v.hasNext();){var m=v.next();m.isForward()&&t.findStabbedSegments(d,m,g)}},$h.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:mh.min(e)._leftDepth},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},tf.DepthSegment.get=function(){return ef},Object.defineProperties($h,tf);var ef=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Ah(t),this._leftDepth=e};ef.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},ef.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},ef.prototype.toString=function(){return this._upwardSeg.toString()},ef.prototype.interfaces_=function(){return[Cu]},ef.prototype.getClass=function(){return ef};var nf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};nf.prototype.area=function(){return nf.area(this.p0,this.p1,this.p2)},nf.prototype.signedArea=function(){return nf.signedArea(this.p0,this.p1,this.p2)},nf.prototype.interpolateZ=function(t){if(null===t)throw new xu("Supplied point is null.");return nf.interpolateZ(t,this.p0,this.p1,this.p2)},nf.prototype.longestSideLength=function(){return nf.longestSideLength(this.p0,this.p1,this.p2)},nf.prototype.isAcute=function(){return nf.isAcute(this.p0,this.p1,this.p2)},nf.prototype.circumcentre=function(){return nf.circumcentre(this.p0,this.p1,this.p2)},nf.prototype.area3D=function(){return nf.area3D(this.p0,this.p1,this.p2)},nf.prototype.centroid=function(){return nf.centroid(this.p0,this.p1,this.p2)},nf.prototype.inCentre=function(){return nf.inCentre(this.p0,this.p1,this.p2)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},nf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},nf.det=function(t,e,n,r){return t*r-e*n},nf.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},nf.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},nf.isAcute=function(t,e,n){return!!Xh.isAcute(t,e,n)&&!!Xh.isAcute(e,n,t)&&!!Xh.isAcute(n,t,e)},nf.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*nf.det(o,s,a,u),c=nf.det(s,o*o+s*s,u,a*a+u*u),h=nf.det(o,o*o+s*s,a,a*a+u*u);return new Lu(r-c/l,i+h/l)},nf.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Qu(t.x+n/2,t.y+r/2,1),o=new Qu(t.x-r+n/2,t.y+n+r/2,1);return new Qu(i,o)},nf.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new Lu(t.x+i*o,t.y+i*s)},nf.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,c=o*s-r*u,h=r*a-i*s,f=l*l+c*c+h*h,p=Math.sqrt(f)/2;return p},nf.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new Lu(r,i)},nf.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new Lu(a,u)};var rf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ml;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};rf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Au.EXTERIOR,Au.INTERIOR)},rf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=qc.LEFT;this._distance<0&&(n=-this._distance,r=qc.RIGHT);var i=t.getExteriorRing(),o=Al.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,Au.EXTERIOR,Au.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=Al.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,qc.opposite(r),Au.INTERIOR,Au.EXTERIOR)}},rf.prototype.isTriangleErodedCompletely=function(t,e){var n=new nf(t[0],t[1],t[2]),r=n.inCentre();return fl.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},rf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Al.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Au.EXTERIOR,Au.INTERIOR)},rf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Nh(t,new Jc(0,Au.BOUNDARY,e,n));this._curveList.add(r)},rf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},rf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<mc.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=mc.MINIMUM_VALID_SIZE&&fl.isCCW(t)&&(o=i,s=r,n=qc.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},rf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof gc?this.addPolygon(t):t instanceof fc?this.addLineString(t):t instanceof dc?this.addPoint(t):(t instanceof vc||t instanceof oc||t instanceof _c||t instanceof ic)&&this.addCollection(t)},rf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},rf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf};var of=function(){};of.prototype.locate=function(t){},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of};var sf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};sf.prototype.next=function(){if(this._atStart)return this._atStart=!1,sf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ll;var t=this._parent.getGeometryN(this._index++);return t instanceof ic?(this._subcollectionIterator=new sf(t),this._subcollectionIterator.next()):t},sf.prototype.remove=function(){throw new Error(this.getClass().getName())},sf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},sf.prototype.interfaces_=function(){return[Tl]},sf.prototype.getClass=function(){return sf},sf.isAtomic=function(t){return!(t instanceof ic)};var af=function(){this._geom=null;var t=arguments[0];this._geom=t};af.prototype.locate=function(t){return af.locate(t,this._geom)},af.prototype.interfaces_=function(){return[of]},af.prototype.getClass=function(){return af},af.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&fl.isPointInRing(t,e.getCoordinates())},af.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!af.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(af.isPointInRing(t,i))return!1}return!0},af.containsPoint=function(t,e){if(e instanceof gc)return af.containsPointInPolygon(t,e);if(e instanceof ic)for(var n=new sf(e);n.hasNext();){var r=n.next();if(r!==e&&af.containsPoint(t,r))return!0}return!1},af.locate=function(t,e){return e.isEmpty()?Au.EXTERIOR:af.containsPoint(t,e)?Au.INTERIOR:Au.EXTERIOR};var uf=function(){this._edgeMap=new Xl,this._edgeList=null,this._ptInAreaLocation=[Au.NONE,Au.NONE]};uf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},uf.prototype.propagateSideLabels=function(t){for(var e=Au.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,qc.LEFT)!==Au.NONE&&(e=r.getLocation(t,qc.LEFT))}if(e===Au.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,qc.ON)===Au.NONE&&a.setLocation(t,qc.ON,i),a.isArea(t)){var u=a.getLocation(t,qc.LEFT),l=a.getLocation(t,qc.RIGHT);if(l!==Au.NONE){if(l!==i)throw new Hc("side location conflict",s.getCoordinate());u===Au.NONE&&sl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else sl.isTrue(a.getLocation(t,qc.LEFT)===Au.NONE,"found single null side"),a.setLocation(t,qc.RIGHT,i),a.setLocation(t,qc.LEFT,i)}}},uf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},uf.prototype.print=function(t){Yu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},uf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},uf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,qc.LEFT);sl.isTrue(r!==Au.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();sl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,qc.LEFT),u=s.getLocation(t,qc.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},uf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},uf.prototype.iterator=function(){return this.getEdges().iterator()},uf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ml(this._edgeMap.values())),this._edgeList},uf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Au.NONE&&(this._ptInAreaLocation[t]=af.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},uf.prototype.toString=function(){var t=new Fu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},uf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},uf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Au.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=Au.NONE;if(e[u])l=Au.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},uf.prototype.getDegree=function(){return this._edgeMap.size()},uf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var lf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Hc("no outgoing dirEdge found",this.getCoordinate());sl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ih.isNorthern(i)&&ih.isNorthern(o)?n:ih.isNorthern(i)||ih.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(sl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Yu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ml;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(qc.LEFT),r=t.getDepth(qc.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n),o=this.computeDepths(0,e,i);if(o!==r)throw new Hc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=u,c=s;c<a;c++){var h=this._edgeList.get(c);h.setEdgeDepths(qc.RIGHT,l),l=h.getDepth(qc.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(sl.isTrue(null!==n,"found null for first outgoing dirEdge"),sl.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Au.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Au.INTERIOR;break}if(r.isInResult()){t=Au.EXTERIOR;break}}}if(t===Au.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Au.INTERIOR):(s.isInResult()&&(i=Au.EXTERIOR),a.isInResult()&&(i=Au.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Jc(Au.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Au.INTERIOR&&o!==Au.BOUNDARY||this._label.setLocation(i,Au.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uf),cf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new nh(t,new lf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uh),hf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};hf.prototype.compareTo=function(t){var e=t;return hf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},hf.prototype.interfaces_=function(){return[Cu]},hf.prototype.getClass=function(){return hf},hf.orientation=function(t){return 1===Al.increasingDirection(t)},hf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var ff=function(){this._edges=new Ml,this._ocaMap=new Xl};ff.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},ff.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},ff.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},ff.prototype.iterator=function(){return this._edges.iterator()},ff.prototype.getEdges=function(){return this._edges},ff.prototype.get=function(t){return this._edges.get(t)},ff.prototype.findEqualEdge=function(t){var e=new hf(t.getCoordinates());return this._ocaMap.get(e)},ff.prototype.add=function(t){this._edges.add(t);var e=new hf(t.getCoordinates());this._ocaMap.put(e,t)},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var pf=function(){};pf.prototype.processIntersections=function(t,e,n,r){},pf.prototype.isDone=function(){},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var df=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};df.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(df.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},df.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},df.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},df.prototype.getLineIntersector=function(){return this._li},df.prototype.hasProperIntersection=function(){return this._hasProper},df.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},df.prototype.hasIntersection=function(){return this._hasIntersection},df.prototype.isDone=function(){return!1},df.prototype.hasInteriorIntersection=function(){return this._hasInterior},df.prototype.interfaces_=function(){return[pf]},df.prototype.getClass=function(){return df},df.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var yf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Lu(t),this.segmentIndex=e,this.dist=n};yf.prototype.getSegmentIndex=function(){return this.segmentIndex},yf.prototype.getCoordinate=function(){return this.coord},yf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},yf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},yf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},yf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},yf.prototype.getDistance=function(){return this.dist},yf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},yf.prototype.interfaces_=function(){return[Cu]},yf.prototype.getClass=function(){return yf};var gf=function(){this._nodeMap=new Xl,this.edge=null;var t=arguments[0];this.edge=t};gf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},gf.prototype.iterator=function(){return this._nodeMap.values().iterator()},gf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},gf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},gf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Lu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Sf(o,new Jc(this.edge._label))},gf.prototype.add=function(t,e,n){var r=new yf(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},gf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var vf=function(){};vf.prototype.getChainStartIndices=function(t){var e=0,n=new Ml;n.add(new Bu(e));do{var r=this.findChainEnd(t,e);n.add(new Bu(r)),e=r}while(e<t.length-1);return vf.toIntArray(n)},vf.prototype.findChainEnd=function(t,e){for(var n=ih.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ih.quadrant(t[r-1],t[r])===n;)r++;return r-1},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf},vf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var mf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ju,this.env2=new Ju;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new vf;this.startIndex=e.getChainStartIndices(this.pts)};mf.prototype.getCoordinates=function(){return this.pts},mf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},mf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},mf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((a+u)/2);i<d&&(a<y&&this.computeIntersectsForChain(i,d,s,a,y,l),y<u&&this.computeIntersectsForChain(i,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},mf.prototype.getStartIndexes=function(){return this.startIndex},mf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf};var _f=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},bf={NULL_VALUE:{configurable:!0}};_f.prototype.getDepth=function(t,e){return this._depth[t][e]},_f.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},_f.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==_f.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===_f.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===_f.NULL_VALUE}},_f.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},_f.prototype.getDelta=function(t){return this._depth[t][qc.RIGHT]-this._depth[t][qc.LEFT]},_f.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Au.EXTERIOR:Au.INTERIOR},_f.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},_f.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==Au.EXTERIOR&&i!==Au.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=_f.depthAtLocation(i):t._depth[n][r]+=_f.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===Au.INTERIOR&&this._depth[o][s]++}},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.depthAtLocation=function(t){return t===Au.EXTERIOR?0:t===Au.INTERIOR?1:_f.NULL_VALUE},bf.NULL_VALUE.get=function(){return-1},Object.defineProperties(_f,bf);var Sf=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new gf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new _f,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Jc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new mf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ju;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Lu(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new Fu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,qc.ON),e.getLocation(1,qc.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,qc.LEFT),e.getLocation(1,qc.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,qc.RIGHT),e.getLocation(1,qc.RIGHT),2))},e}(eh),xf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new ff,this._bufParams=t||null};xf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},xf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Jc(t.getLabel())).flip(),n.merge(r);var i=xf.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(xf.depthDelta(t.getLabel()))},xf.prototype.buildSubgraphs=function(t,e){for(var n=new Ml,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new $h(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},xf.prototype.createSubgraphs=function(t){for(var e=new Ml,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Yc;i.create(r),e.add(i)}}return mh.sort(e,mh.reverseOrder()),e},xf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},xf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Uh,n=new ll;return n.setPrecisionModel(t),e.setSegmentIntersector(new df(n)),e},xf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Kh(n,this._bufParams),i=new rf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new lh(new cf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new ch(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},xf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Sf(i.getCoordinates(),new Jc(s));this.insertUniqueEdge(a)}}},xf.prototype.setNoder=function(t){this._workingNoder=t},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.depthDelta=function(t){var e=t.getLocation(0,qc.LEFT),n=t.getLocation(0,qc.RIGHT);return e===Au.INTERIOR&&n===Au.EXTERIOR?1:e===Au.EXTERIOR&&n===Au.INTERIOR?-1:0},xf.convertSegStrings=function(t){for(var e=new Rc,n=new Ml;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var wf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};wf.prototype.rescale=function(){var t=this;if(Du(arguments[0],Cl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Yu.out.println(i)}},wf.prototype.scale=function(){var t=this;if(Du(arguments[0],Cl)){for(var e=arguments[0],n=new Ml,r=e.iterator();r.hasNext();){var i=r.next();n.add(new Nh(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new Lu(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=Al.removeRepeatedPoints(s);return u}},wf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},wf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},wf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},wf.prototype.interfaces_=function(){return[Fh]},wf.prototype.getClass=function(){return wf};var Pf=function(){this._li=new ll,this._segStrings=null;var t=arguments[0];this._segStrings=t},Cf={fact:{configurable:!0}};Pf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new il("found endpt/interior pt intersection at index "+l+" :pt "+i)},Pf.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],y=c.getCoordinates()[h+1],g=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,y,g,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,v)))throw new il("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+v)}},Pf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Pf.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length-2;i++)this.checkCollapse(r[i],r[i+1],r[i+2])},Pf.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Pf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new il("found non-noded collapse at "+Pf.fact.createLineString([t,e,n]))},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Cf.fact.get=function(){return new Rc},Object.defineProperties(Pf,Cf);var Of=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new xu("Scale factor must be non-zero");1!==e&&(this._pt=new Lu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Lu,this._p1Scaled=new Lu),this.initCorners(this._pt)},Tf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Of.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return sl.isTrue(!(s&&a),"Found bad envelope test"),a},Of.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Lu(this._maxx,this._maxy),this._corner[1]=new Lu(this._minx,this._maxy),this._corner[2]=new Lu(this._minx,this._miny),this._corner[3]=new Lu(this._maxx,this._miny)},Of.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Of.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Of.prototype.getCoordinate=function(){return this._originalPt},Of.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Of.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Of.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ju(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Of.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Of.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Of.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Tf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Of,Tf);var Ef=function(){this.tempEnv1=new Ju,this.selectedSegment=new Ah};Ef.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef};var Lf=function(){this._index=null;var t=arguments[0];this._index=t},Mf={HotPixelSnapAction:{configurable:!0}};Lf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new If(e,n,r);return this._index.query(i,{interfaces_:function(){return[dh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Mf.HotPixelSnapAction.get=function(){return If},Object.defineProperties(Lf,Mf);var If=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ef),Nf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ml};Nf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Nf.prototype.isDone=function(){return!1},Nf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Nf.prototype.interfaces_=function(){return[pf]},Nf.prototype.getClass=function(){return Nf};var Af=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ll,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Af.prototype.checkCorrectness=function(t){var e=Nh.getNodedSubstrings(t),n=new Pf(e);try{n.checkValid()}catch(t){if(!(t instanceof Hu))throw t;t.printStackTrace()}},Af.prototype.getNodedSubstrings=function(){return Nh.getNodedSubstrings(this._nodedSegStrings)},Af.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Af.prototype.findInteriorIntersections=function(t,e){var n=new Nf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Af.prototype.computeVertexSnaps=function(){var t=this;if(Du(arguments[0],Cl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof Nh)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new Of(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},Af.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Uh,this._pointSnapper=new Lf(this._noder.getIndex()),this.snapRound(t,this._li)},Af.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new Of(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},Af.prototype.interfaces_=function(){return[Fh]},Af.prototype.getClass=function(){return Af};var Rf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new qh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Df={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Rf.prototype.bufferFixedPrecision=function(t){var e=new wf(new Af(new Mc(1)),t.getScale()),n=new xf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Rf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Rf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Hc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Rf.precisionScaleFactor(this._argGeom,this._distance,n),i=new Mc(r);this.bufferFixedPrecision(i)}},Rf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Mc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Rf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Rf.prototype.bufferOriginalPrecision=function(){try{var t=new xf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof il))throw t;this._saveException=t}},Rf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Rf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Rf(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof yl&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new Rf(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof qh&&arguments[0]instanceof yl&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],h=arguments[2],f=new Rf(l,h),p=f.getResultGeometry(c);return p}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],v=arguments[3],m=new Rf(d);m.setQuadrantSegments(g),m.setEndCapStyle(v);var _=m.getResultGeometry(y);return _}},Rf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=ku.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Df.CAP_ROUND.get=function(){return qh.CAP_ROUND},Df.CAP_BUTT.get=function(){return qh.CAP_FLAT},Df.CAP_FLAT.get=function(){return qh.CAP_FLAT},Df.CAP_SQUARE.get=function(){return qh.CAP_SQUARE},Df.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Rf,Df);var kf=function(){this._pt=[new Lu,new Lu],this._distance=wu.NaN,this._isNull=!0};kf.prototype.getCoordinates=function(){return this._pt},kf.prototype.getCoordinate=function(t){return this._pt[t]},kf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},kf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},kf.prototype.getDistance=function(){return this._distance},kf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf};var jf=function(){};jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.computeDistance=function(){if(arguments[2]instanceof kf&&arguments[0]instanceof fc&&arguments[1]instanceof Lu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Ah,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof kf&&arguments[0]instanceof gc&&arguments[1]instanceof Lu){var a=arguments[0],u=arguments[1],l=arguments[2];jf.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)jf.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof kf&&arguments[0]instanceof yl&&arguments[1]instanceof Lu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof fc)jf.computeDistance(h,f,p);else if(h instanceof gc)jf.computeDistance(h,f,p);else if(h instanceof ic)for(var d=h,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);jf.computeDistance(g,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof kf&&arguments[0]instanceof Ah&&arguments[1]instanceof Lu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var Ff=function(t){this._maxPtDist=new kf,this._inputGeom=t||null},Bf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ff.prototype.computeMaxMidpointDistance=function(t){var e=new Gf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ff.prototype.computeMaxVertexDistance=function(t){var e=new Uf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ff.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ff.prototype.getDistancePoints=function(){return this._maxPtDist},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Bf.MaxPointDistanceFilter.get=function(){return Uf},Bf.MaxMidpointDistanceFilter.get=function(){return Gf},Object.defineProperties(Ff,Bf);var Uf=function(t){this._maxPtDist=new kf,this._minPtDist=new kf,this._geom=t||null};Uf.prototype.filter=function(t){this._minPtDist.initialize(),jf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Uf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Uf.prototype.interfaces_=function(){return[ml]},Uf.prototype.getClass=function(){return Uf};var Gf=function(t){this._maxPtDist=new kf,this._minPtDist=new kf,this._geom=t||null};Gf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Lu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),jf.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Gf.prototype.isDone=function(){return!1},Gf.prototype.isGeometryChanged=function(){return!1},Gf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gf.prototype.interfaces_=function(){return[rc]},Gf.prototype.getClass=function(){return Gf};var qf=function(t){this._comps=t||null};qf.prototype.filter=function(t){t instanceof gc&&this._comps.add(t)},qf.prototype.interfaces_=function(){return[nc]},qf.prototype.getClass=function(){return qf},qf.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return qf.getPolygons(t,new Ml)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof gc?n.add(e):e instanceof ic&&e.apply(new qf(n)),n}};var zf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};zf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof mc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof fc&&this._lines.add(t)},zf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},zf.prototype.interfaces_=function(){return[dl]},zf.prototype.getClass=function(){return zf},zf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(zf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(zf.getLines(e,n))}},zf.getLines=function(){if(1===arguments.length){var t=arguments[0];return zf.getLines(t,!1)}if(2===arguments.length){if(Du(arguments[0],Cl)&&Du(arguments[1],Cl)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();zf.getLines(i,n)}return n}if(arguments[0]instanceof yl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new Ml;return o.apply(new zf(a,s)),a}if(arguments[0]instanceof yl&&Du(arguments[1],Cl)){var u=arguments[0],l=arguments[1];return u instanceof fc?l.add(u):u.apply(new zf(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Du(arguments[0],Cl)&&Du(arguments[1],Cl)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();zf.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof yl&&Du(arguments[1],Cl)){var y=arguments[0],g=arguments[1],v=arguments[2];return y.apply(new zf(g,v)),g}}};var Vf=function(){if(this._boundaryRule=_l.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new xu("Rule must be non-null");this._boundaryRule=t}};Vf.prototype.locateInternal=function(){if(arguments[0]instanceof Lu&&arguments[1]instanceof gc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Au.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===Au.EXTERIOR)return Au.EXTERIOR;if(r===Au.BOUNDARY)return Au.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===Au.INTERIOR)return Au.EXTERIOR;if(s===Au.BOUNDARY)return Au.BOUNDARY}return Au.INTERIOR}if(arguments[0]instanceof Lu&&arguments[1]instanceof fc){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Au.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?fl.isOnLine(a,l)?Au.INTERIOR:Au.EXTERIOR:Au.BOUNDARY}if(arguments[0]instanceof Lu&&arguments[1]instanceof dc){var c=arguments[0],h=arguments[1],f=h.getCoordinate();return f.equals2D(c)?Au.INTERIOR:Au.EXTERIOR}},Vf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?fl.locatePointInRing(t,e.getCoordinates()):Au.EXTERIOR},Vf.prototype.intersects=function(t,e){return this.locate(t,e)!==Au.EXTERIOR},Vf.prototype.updateLocationInfo=function(t){t===Au.INTERIOR&&(this._isIn=!0),t===Au.BOUNDARY&&this._numBoundaries++},Vf.prototype.computeLocation=function(t,e){var n=this;if(e instanceof dc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof fc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof gc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof oc)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof _c)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof ic)for(var l=new sf(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}},Vf.prototype.locate=function(t,e){return e.isEmpty()?Au.EXTERIOR:e instanceof fc||e instanceof gc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Au.BOUNDARY:this._numBoundaries>0||this._isIn?Au.INTERIOR:Au.EXTERIOR)},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Zf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Wf={INSIDE_AREA:{configurable:!0}};Zf.prototype.isInsideArea=function(){return this._segIndex===Zf.INSIDE_AREA},Zf.prototype.getCoordinate=function(){return this._pt},Zf.prototype.getGeometryComponent=function(){return this._component},Zf.prototype.getSegmentIndex=function(){return this._segIndex},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Wf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Zf,Wf);var Hf=function(t){this._pts=t||null};Hf.prototype.filter=function(t){t instanceof dc&&this._pts.add(t)},Hf.prototype.interfaces_=function(){return[nc]},Hf.prototype.getClass=function(){return Hf},Hf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof dc?mh.singletonList(t):Hf.getPoints(t,new Ml)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof dc?n.add(e):e instanceof ic&&e.apply(new Hf(n)),n}};var Xf=function(){this._locations=null;var t=arguments[0];this._locations=t};Xf.prototype.filter=function(t){(t instanceof dc||t instanceof fc||t instanceof gc)&&this._locations.add(new Zf(t,0,t.getCoordinate()))},Xf.prototype.interfaces_=function(){return[nc]},Xf.prototype.getClass=function(){return Xf},Xf.getLocations=function(t){var e=new Ml;return t.apply(new Xf(e)),e};var Yf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Vf,this._minDistanceLocation=null,this._minDistance=wu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Yf.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=qf.getPolygons(this._geom[n]);if(o.size()>0){var s=Xf.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Du(arguments[0],El)&&Du(arguments[1],El)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zf&&arguments[1]instanceof gc){var p=arguments[0],d=arguments[1],y=arguments[2],g=p.getCoordinate();if(Au.EXTERIOR!==this._ptLocator.locate(g,d))return this._minDistance=0,y[0]=p,y[1]=new Zf(d,g),null}},Yf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Yf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=zf.getLines(this._geom[0]),n=zf.getLines(this._geom[1]),r=Hf.getPoints(this._geom[0]),i=Hf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Yf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Yf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Yf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Yf.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof fc&&arguments[1]instanceof dc){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=fl.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new Ah(i[s],i[s+1]),l=u.closestPoint(o);r[0]=new Zf(e,s,l),r[1]=new Zf(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof fc&&arguments[1]instanceof fc){var c=arguments[0],h=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=c.getCoordinates(),d=h.getCoordinates(),y=0;y<p.length-1;y++)for(var g=0;g<d.length-1;g++){var v=fl.distanceLineLine(p[y],p[y+1],d[g],d[g+1]);if(v<t._minDistance){t._minDistance=v;var m=new Ah(p[y],p[y+1]),_=new Ah(d[g],d[g+1]),b=m.closestPoints(_);f[0]=new Zf(c,y,b[0]),f[1]=new Zf(h,g,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Yf.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Zf(o,0,o.getCoordinate()),n[1]=new Zf(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Yf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new xu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Yf.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Yf.distance=function(t,e){return new Yf(t,e).distance()},Yf.isWithinDistance=function(t,e,n){return new Yf(t,e,n).distance()<=n},Yf.nearestPoints=function(t,e){return new Yf(t,e).nearestPoints()};var Qf=function(){this._pt=[new Lu,new Lu],this._distance=wu.NaN,this._isNull=!0};Qf.prototype.getCoordinates=function(){return this._pt},Qf.prototype.getCoordinate=function(t){return this._pt[t]},Qf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Qf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Qf.prototype.toString=function(){return rl.toLineString(this._pt[0],this._pt[1])},Qf.prototype.getDistance=function(){return this._distance},Qf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var Jf=function(){};Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.computeDistance=function(){if(arguments[2]instanceof Qf&&arguments[0]instanceof fc&&arguments[1]instanceof Lu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Ah,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof gc&&arguments[1]instanceof Lu){var a=arguments[0],u=arguments[1],l=arguments[2];Jf.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Jf.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof yl&&arguments[1]instanceof Lu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof fc)Jf.computeDistance(h,f,p);else if(h instanceof gc)Jf.computeDistance(h,f,p);else if(h instanceof ic)for(var d=h,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Jf.computeDistance(g,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof Ah&&arguments[1]instanceof Lu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var Kf=function(){this._g0=null,this._g1=null,this._ptDist=new Qf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},$f={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Kf.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Kf.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new xu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Kf.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Kf.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Kf.prototype.computeOrientedDistance=function(t,e,n){var r=new tp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new ep(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Kf.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf},Kf.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Kf(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Kf(r,i);return s.setDensifyFraction(o),s.distance()}},$f.MaxPointDistanceFilter.get=function(){return tp},$f.MaxDensifiedByFractionDistanceFilter.get=function(){return ep},Object.defineProperties(Kf,$f);var tp=function(){this._maxPtDist=new Qf,this._minPtDist=new Qf,this._euclideanDist=new Jf,this._geom=null;var t=arguments[0];this._geom=t};tp.prototype.filter=function(t){this._minPtDist.initialize(),Jf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},tp.prototype.getMaxPointDistance=function(){return this._maxPtDist},tp.prototype.interfaces_=function(){return[ml]},tp.prototype.getClass=function(){return tp};var ep=function(){this._maxPtDist=new Qf,this._minPtDist=new Qf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};ep.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new Lu(u,l);n._minPtDist.initialize(),Jf.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},ep.prototype.isDone=function(){return!1},ep.prototype.isGeometryChanged=function(){return!1},ep.prototype.getMaxPointDistance=function(){return this._maxPtDist},ep.prototype.interfaces_=function(){return[rc]},ep.prototype.getClass=function(){return ep};var np=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},rp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};np.prototype.checkMaximumDistance=function(t,e,n){var r=new Kf(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+rl.toLineString(i[0],i[1])+")"}},np.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=np.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),np.VERBOSE&&Yu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},np.prototype.checkNegativeValid=function(){if(!(this._input instanceof gc||this._input instanceof _c||this._input instanceof ic))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},np.prototype.getErrorIndicator=function(){return this._errorIndicator},np.prototype.checkMinimumDistance=function(t,e,n){var r=new Yf(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+rl.toLineString(i[0],i[1])+" )"}},np.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},np.prototype.getErrorLocation=function(){return this._errorLocation},np.prototype.getPolygonLines=function(t){for(var e=new Ml,n=new zf(e),r=qf.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},np.prototype.getErrorMessage=function(){return this._errMsg},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np},rp.VERBOSE.get=function(){return!1},rp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(np,rp);var ip=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},op={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ip.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ip.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ip.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Ju(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Ju(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},ip.prototype.checkDistance=function(){var t=new np(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ip.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ip.prototype.checkPolygonal=function(){this._result instanceof gc||this._result instanceof _c||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ip.prototype.getErrorIndicator=function(){return this._errorIndicator},ip.prototype.getErrorLocation=function(){return this._errorLocation},ip.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ip.prototype.report=function(t){if(!ip.VERBOSE)return null;Yu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ip.prototype.getErrorMessage=function(){return this._errorMsg},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.isValidMsg=function(t,e,n){var r=new ip(t,e,n);return r.isValid()?null:r.getErrorMessage()},ip.isValid=function(t,e,n){return!!new ip(t,e,n).isValid()},op.VERBOSE.get=function(){return!1},op.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ip,op);var sp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};sp.prototype.getCoordinates=function(){return this._pts},sp.prototype.size=function(){return this._pts.length},sp.prototype.getCoordinate=function(t){return this._pts[t]},sp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},sp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Lh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},sp.prototype.setData=function(t){this._data=t},sp.prototype.getData=function(){return this._data},sp.prototype.toString=function(){return rl.toLineString(new Cc(this._pts))},sp.prototype.interfaces_=function(){return[Mh]},sp.prototype.getClass=function(){return sp};var ap=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ml,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};ap.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ap.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},ap.prototype.getIntersectionSegments=function(){return this._intSegments},ap.prototype.count=function(){return this._intersectionCount},ap.prototype.getIntersections=function(){return this._intersections},ap.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ap.prototype.setKeepIntersections=function(t){this._keepIntersections=t},ap.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ap.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},ap.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ap.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ap.prototype.interfaces_=function(){return[pf]},ap.prototype.getClass=function(){return ap},ap.createAllIntersectionsFinder=function(t){var e=new ap(t);return e.setFindAllIntersections(!0),e},ap.createAnyIntersectionFinder=function(t){return new ap(t)},ap.createIntersectionCounter=function(t){var e=new ap(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var up=function(){this._li=new ll,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};up.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},up.prototype.getIntersections=function(){return this._segInt.getIntersections()},up.prototype.isValid=function(){return this.execute(),this._isValid},up.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},up.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ap(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Uh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},up.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Hc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},up.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+rl.toLineString(t[0],t[1])+" and "+rl.toLineString(t[2],t[3])},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.computeIntersections=function(t){var e=new up(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var lp=function t(){this._nv=null;var e=arguments[0];this._nv=new up(t.toSegmentStrings(e))};lp.prototype.checkValid=function(){this._nv.checkValid()},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.toSegmentStrings=function(t){for(var e=new Ml,n=t.iterator();n.hasNext();){var r=n.next();e.add(new sp(r.getCoordinates(),r))}return e},lp.checkValid=function(t){new lp(t).checkValid()};var cp=function(t){this._mapOp=t};cp.prototype.map=function(t){for(var e=new Ml,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Rc.toGeometryArray(e))},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.map=function(t,e){return new cp(e).map(t)};var hp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ml,this._resultLineList=new Ml;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};hp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},hp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},hp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},hp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Zp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},hp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},hp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},hp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},hp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(sl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Zp.isResultOfOp(r,e)&&e===Zp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp};var fp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ml;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};fp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},fp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Zp.INTERSECTION)){var r=n.getLabel();Zp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},fp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};pp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},pp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof mc&&!r.isEmpty()||(n=!1);for(var i=new Ml,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof mc||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new Ml;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},pp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},pp.prototype.getInputGeometry=function(){return this._inputGeom},pp.prototype.transformMultiLineString=function(t,e){for(var n=new Ml,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},pp.prototype.transformCoordinates=function(t,e){return this.copy(t)},pp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},pp.prototype.transformMultiPoint=function(t,e){for(var n=new Ml,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},pp.prototype.transformMultiPolygon=function(t,e){for(var n=new Ml,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},pp.prototype.copy=function(t){return t.copy()},pp.prototype.transformGeometryCollection=function(t,e){for(var n=new Ml,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Rc.toGeometryArray(n)):this._factory.buildGeometry(n)},pp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof dc)return this.transformPoint(t,null);if(t instanceof vc)return this.transformMultiPoint(t,null);if(t instanceof mc)return this.transformLinearRing(t,null);if(t instanceof fc)return this.transformLineString(t,null);if(t instanceof oc)return this.transformMultiLineString(t,null);if(t instanceof gc)return this.transformPolygon(t,null);if(t instanceof _c)return this.transformMultiPolygon(t,null);if(t instanceof ic)return this.transformGeometryCollection(t,null);throw new xu("Unknown Geometry subtype: "+t.getClass().getName())},pp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ah,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof fc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};dp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Lu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Lu(o)))}},dp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},dp.prototype.snapTo=function(t){var e=new Nl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},dp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Lu(i),!1)}},dp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=wu.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},dp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var yp=function(t){this._srcGeom=t||null},gp={SNAP_PRECISION_FACTOR:{configurable:!0}};yp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new vp(e,n).transform(this._srcGeom)},yp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new vp(t,n,!0).transform(this._srcGeom),i=r;return e&&Du(i,yc)&&(i=r.buffer(0)),i},yp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},yp.prototype.extractTargetCoordinates=function(t){for(var e=new Jl,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},yp.prototype.computeMinimumSegmentLength=function(t){for(var e=wu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new yp(t);r[0]=i.snapTo(e,n);var o=new yp(e);return r[1]=o.snapTo(r[0],n),r},yp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=yp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Mc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(yp.computeOverlaySnapTolerance(i),yp.computeOverlaySnapTolerance(o))}},yp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*yp.SNAP_PRECISION_FACTOR},yp.snapToSelf=function(t,e,n){return new yp(t).snapToSelf(e,n)},gp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(yp,gp);var vp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new dp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pp),mp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};mp.prototype.getCommon=function(){return wu.longBitsToDouble(this._commonBits)},mp.prototype.add=function(t){var e=wu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=mp.signExpBits(this._commonBits),this._isFirst=!1,null):mp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=mp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=mp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},mp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=wu.longBitsToDouble(t),n=wu.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},mp.signExpBits=function(t){return t>>52},mp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},mp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(mp.getBit(t,r)!==mp.getBit(e,r))return n;n++}return 52};var _p=function(){this._commonCoord=null,this._ccFilter=new Sp},bp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};_p.prototype.addCommonBits=function(t){var e=new xp(this._commonCoord);t.apply(e),t.geometryChanged()},_p.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Lu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new xp(e);return t.apply(n),t.geometryChanged(),t},_p.prototype.getCommonCoordinate=function(){return this._commonCoord},_p.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},bp.CommonCoordinateFilter.get=function(){return Sp},bp.Translater.get=function(){return xp},Object.defineProperties(_p,bp);var Sp=function(){this._commonBitsX=new mp,this._commonBitsY=new mp};Sp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Sp.prototype.getCommonCoordinate=function(){return new Lu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Sp.prototype.interfaces_=function(){return[ml]},Sp.prototype.getClass=function(){return Sp};var xp=function(){this.trans=null;var t=arguments[0];this.trans=t};xp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},xp.prototype.isDone=function(){return!1},xp.prototype.isGeometryChanged=function(){return!0},xp.prototype.interfaces_=function(){return[rc]},xp.prototype.getClass=function(){return xp};var wp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};wp.prototype.selfSnap=function(t){return new yp(t).snapTo(t,this._snapTolerance)},wp.prototype.removeCommonBits=function(t){this._cbr=new _p,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},wp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},wp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Zp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},wp.prototype.checkValid=function(t){t.isValid()||Yu.out.println("Snapped geometry is invalid")},wp.prototype.computeSnapTolerance=function(){this._snapTolerance=yp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},wp.prototype.snap=function(t){var e=this.removeCommonBits(t);return yp.snap(e[0],e[1],this._snapTolerance)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.overlayOp=function(t,e,n){return new wp(t,e).getResultGeometry(n)},wp.union=function(t,e){return wp.overlayOp(t,e,Zp.UNION)},wp.intersection=function(t,e){return wp.overlayOp(t,e,Zp.INTERSECTION)},wp.symDifference=function(t,e){return wp.overlayOp(t,e,Zp.SYMDIFFERENCE)},wp.difference=function(t,e){return wp.overlayOp(t,e,Zp.DIFFERENCE)};var Pp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Pp.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Zp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof il))throw t;r=t}if(!n)try{e=wp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof il?r:t}return e},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.overlayOp=function(t,e,n){return new Pp(t,e).getResultGeometry(n)},Pp.union=function(t,e){return Pp.overlayOp(t,e,Zp.UNION)},Pp.intersection=function(t,e){return Pp.overlayOp(t,e,Zp.INTERSECTION)},Pp.symDifference=function(t,e){return Pp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Pp.difference=function(t,e){return Pp.overlayOp(t,e,Zp.DIFFERENCE)};var Cp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Cp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp};var Op=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Tp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Op.prototype.isDelete=function(){return this._eventType===Op.DELETE},Op.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Op.prototype.getObject=function(){return this._obj},Op.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Op.prototype.getInsertEvent=function(){return this._insertEvent},Op.prototype.isInsert=function(){return this._eventType===Op.INSERT},Op.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Op.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Op.prototype.interfaces_=function(){return[Cu]},Op.prototype.getClass=function(){return Op},Tp.INSERT.get=function(){return 1},Tp.DELETE.get=function(){return 2},Object.defineProperties(Op,Tp);var Ep=function(){};Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep};var Lp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Lp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Lp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Lp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Lp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Lp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Lp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Lp.prototype.hasProperIntersection=function(){return this._hasProper},Lp.prototype.hasIntersection=function(){return this._hasIntersection},Lp.prototype.isDone=function(){return this._isDone},Lp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Lp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Lp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Mp=function(t){function e(){t.call(this),this.events=new Ml,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){mh.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Lp&&Du(arguments[0],El)&&Du(arguments[1],El)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Du(arguments[0],El)&&arguments[1]instanceof Lp){var s=arguments[0],a=arguments[1],u=arguments[2];u?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Cp(n,i),s=new Op(e,n.getMinX(i),o);this.events.add(s),this.events.add(new Op(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1],o=r.iterator();o.hasNext();){var s=o.next();this.addEdge(s,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ep),Ip=function(){this._min=wu.POSITIVE_INFINITY,this._max=wu.NEGATIVE_INFINITY},Np={NodeComparator:{configurable:!0}};Ip.prototype.getMin=function(){return this._min},Ip.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Ip.prototype.getMax=function(){return this._max},Ip.prototype.toString=function(){return rl.toLineString(new Lu(this._min,0),new Lu(this._max,0))},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip},Np.NodeComparator.get=function(){return Ap},Object.defineProperties(Ip,Np);var Ap=function(){};Ap.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},Ap.prototype.interfaces_=function(){return[Tu]},Ap.prototype.getClass=function(){return Ap};var Rp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ip),Dp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ip),kp=function(){this._leaves=new Ml,this._root=null,this._level=0};kp.prototype.buildTree=function(){mh.sort(this._leaves,new Ip.NodeComparator);for(var t=this._leaves,e=null,n=new Ml;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},kp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Rp(t,e,n))},kp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},kp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},kp.prototype.printNode=function(t){Yu.out.println(rl.toLineString(new Lu(t._min,this._level),new Lu(t._max,this._level)))},kp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},kp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Dp(t.get(n),t.get(n+1));e.add(i)}}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var jp=function(){this._items=new Ml};jp.prototype.visitItem=function(t){this._items.add(t)},jp.prototype.getItems=function(){return this._items},jp.prototype.interfaces_=function(){return[dh]},jp.prototype.getClass=function(){return jp};var Fp=function(){this._index=null;var t=arguments[0];if(!Du(t,yc))throw new xu("Argument must be Polygonal");this._index=new Gp(t)},Bp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Fp.prototype.locate=function(t){var e=new hl(t),n=new Up(e);return this._index.query(t.y,t.y,n),e.getLocation()},Fp.prototype.interfaces_=function(){return[of]},Fp.prototype.getClass=function(){return Fp},Bp.SegmentVisitor.get=function(){return Up},Bp.IntervalIndexedGeometry.get=function(){return Gp},Object.defineProperties(Fp,Bp);var Up=function(){this._counter=null;var t=arguments[0];this._counter=t};Up.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Up.prototype.interfaces_=function(){return[dh]},Up.prototype.getClass=function(){return Up};var Gp=function(){this._index=new kp;var t=arguments[0];this.init(t)};Gp.prototype.init=function(t){for(var e=zf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Gp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Ah(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Gp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new jp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp};var qp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Lc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Vf,2===arguments.length){var e=arguments[0],n=arguments[1],r=_l.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,qc.ON)===Au.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new Lp(n,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof mc||this._parentGeom instanceof gc||this._parentGeom instanceof _c,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Lp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof dc){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,Au.INTERIOR)}else if(arguments[0]instanceof Lu){var n=arguments[0];this.insertPoint(this._argIndex,n,Au.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Au.EXTERIOR,Au.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Au.INTERIOR,Au.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Au.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Au.BOUNDARY)},e.prototype.addLineString=function(t){var e=Al.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Sf(e,new Jc(this._argIndex,Au.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),sl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Au.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Al.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;fl.isCCW(r)&&(i=n,o=e);var s=new Sf(r,new Jc(this._argIndex,Au.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Au.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Jc(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Mp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof _c&&(this._useBoundaryDeterminationRule=!1),e instanceof gc)this.addPolygon(e);else if(e instanceof fc)this.addLineString(e);else if(e instanceof dc)this.addPoint(e);else if(e instanceof vc)this.addCollection(e);else if(e instanceof oc)this.addCollection(e);else if(e instanceof _c)this.addCollection(e);else{if(!(e instanceof ic))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Du(this._parentGeom,yc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Fp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Au.BOUNDARY:Au.INTERIOR},e}(lh),zp=function(){if(this._li=new ll,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new qp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=_l.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new qp(0,e,r),this._arg[1]=new qp(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new qp(0,i,s),this._arg[1]=new qp(1,o,s)}};zp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},zp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var Vp=function(){};Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Vp.map=function(){if(arguments[0]instanceof yl&&Du(arguments[1],Vp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ml,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Du(arguments[0],Cl)&&Du(arguments[1],Vp.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Ml,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Vp.MapOp=function(){};var Zp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Vf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new ff,this._resultPolyList=new Ml,this._resultLineList=new Ml,this._resultPointList=new Ml,this._graph=new lh(new cf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Jc(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Ml;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Au.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ml,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ml;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),lp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ch(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new hp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new fp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,qc.RIGHT),i.getLocation(1,qc.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(sl.isTrue(!r.isNull(i,qc.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,qc.LEFT,r.getLocation(i,qc.LEFT)),sl.isTrue(!r.isNull(i,qc.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,qc.RIGHT,r.getLocation(i,qc.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zp);Zp.overlayOp=function(t,e,n){return new Zp(t,e).getResultGeometry(n)},Zp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Zp.createEmptyResult(Zp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return cp.map(t,{interfaces_:function(){return[Vp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Pp.overlayOp(t,e,Zp.INTERSECTION)},Zp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Pp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Zp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Zp.INTERSECTION:o=Math.min(r,i);break;case Zp.UNION:o=Math.max(r,i);break;case Zp.DIFFERENCE:o=r;break;case Zp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Zp.createEmptyResult=function(t,e,n,r){var i=null;switch(Zp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Zp.difference=function(t,e){return t.isEmpty()?Zp.createEmptyResult(Zp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Pp.overlayOp(t,e,Zp.DIFFERENCE))},Zp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Zp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===Au.BOUNDARY&&(i=Au.INTERIOR),o===Au.BOUNDARY&&(o=Au.INTERIOR),s){case Zp.INTERSECTION:return i===Au.INTERIOR&&o===Au.INTERIOR;case Zp.UNION:return i===Au.INTERIOR||o===Au.INTERIOR;case Zp.DIFFERENCE:return i===Au.INTERIOR&&o!==Au.INTERIOR;case Zp.SYMDIFFERENCE:return i===Au.INTERIOR&&o!==Au.INTERIOR||i!==Au.INTERIOR&&o===Au.INTERIOR}return!1}},Zp.INTERSECTION=1,Zp.UNION=2,Zp.DIFFERENCE=3,Zp.SYMDIFFERENCE=4;var Wp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Vf,this._seg=new Ah;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Wp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Wp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Au.BOUNDARY:this._ptLocator.locate(t,this._g)},Wp.prototype.extractLinework=function(t){var e=new Hp;t.apply(e);var n=e.getLinework(),r=Rc.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Hp=function(){this._linework=null,this._linework=new Ml};Hp.prototype.getLinework=function(){return this._linework},Hp.prototype.filter=function(t){if(t instanceof gc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Hp.prototype.interfaces_=function(){return[nc]},Hp.prototype.getClass=function(){return Hp};var Xp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Xp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Xp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Xp.prototype.getPoints=function(t){for(var e=new Ml,n=zf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Xp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Lu(l-u,c+a);r.add(h)}if(this._doRight){var f=new Lu(l+u,c-a);r.add(f)}},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Yp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ml;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Wp(this._geom[0],this._boundaryDistanceTolerance),new Wp(this._geom[1],this._boundaryDistanceTolerance),new Wp(this._geom[2],this._boundaryDistanceTolerance)]},Qp={TOLERANCE:{configurable:!0}};Yp.prototype.reportResult=function(t,e,n){Yu.out.println("Overlay result invalid - A:"+Au.toLocationSymbol(e[0])+" B:"+Au.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Au.toLocationSymbol(e[2]))},Yp.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Yp.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Yp.hasLocation(this._location,Au.BOUNDARY)||this.isValidResult(i,this._location)}},Yp.prototype.addTestPts=function(t){var e=new Xp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Yp.prototype.isValidResult=function(t,e){var n=Zp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Au.INTERIOR);return r||this.reportResult(t,e,n),r},Yp.prototype.getInvalidLocation=function(){return this._invalidLocation},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Yp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(yp.computeSizeBasedSnapTolerance(t),yp.computeSizeBasedSnapTolerance(e))},Yp.isValid=function(t,e,n,r){return new Yp(t,e,r).isValid(n)},Qp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Yp,Qp);var Jp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Jp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Jp.prototype.combine=function(){for(var t=new Ml,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Jp(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new Jp(Jp.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Jp(Jp.createList(o,s,a));return u.combine()}},Jp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Jp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ml;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Ml;return s.add(r),s.add(i),s.add(o),s}};var Kp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ml)},$p={STRTREE_NODE_CAPACITY:{configurable:!0}};Kp.prototype.reduceToGeometries=function(t){for(var e=new Ml,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Du(r,El)?i=this.unionTree(r):r instanceof yl&&(i=r),e.add(i)}return e},Kp.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ml,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Kp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Jp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Kp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ph(Kp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Kp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Kp.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Kp.getGeometry(e,n),Kp.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Kp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Kp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Kp.prototype.unionActual=function(t,e){return Kp.restrictToPolygons(t.union(e))},Kp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Kp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ml,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Jp.combine(r)},Kp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Kp.restrictToPolygons=function(t){if(Du(t,yc))return t;var e=qf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Rc.toPolygonArray(e))},Kp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Kp.union=function(t){return new Kp(t).union()},$p.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Kp,$p);var td=function(){};function ed(){return new nd}function nd(){this.reset()}td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Pp.overlayOp(t,e,Zp.UNION)},nd.prototype={constructor:nd,reset:function(){this.s=this.t=0},add:function(t){id(rd,t,this.t),id(this,rd.s,this.s),this.s?this.t+=rd.t:this.s=rd.t},valueOf:function(){return this.s}};var rd=new nd;function id(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var od=1e-6,sd=Math.PI,ad=sd/2,ud=sd/4,ld=2*sd,cd=180/sd,hd=sd/180,fd=Math.abs,pd=Math.atan,dd=Math.atan2,yd=Math.cos,gd=Math.sin,vd=Math.sqrt;function md(t){return t>1?0:t<-1?sd:Math.acos(t)}function _d(t){return t>1?ad:t<-1?-ad:Math.asin(t)}function bd(){}function Sd(t,e){t&&Cd.hasOwnProperty(t.type)&&Cd[t.type](t,e)}var xd,wd,Pd={Feature:function(t,e){Sd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Sd(n[r].geometry,e)}},Cd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Od(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Od(n[r],e,0)},Polygon:function(t,e){Td(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Td(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Sd(n[r],e)}};function Od(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Td(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Od(t[n],e,1);e.polygonEnd()}function Ed(t){return[dd(t[1],t[0]),_d(t[2])]}function Ld(t){var e=t[0],n=t[1],r=yd(n);return[r*yd(e),r*gd(e),gd(n)]}function Md(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Id(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Nd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ad(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Rd(t){var e=vd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Dd(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function kd(t,e){return[t>sd?t-ld:t<-sd?t+ld:t,e]}function jd(t){return function(e,n){return[(e+=t)>sd?e-ld:e<-sd?e+ld:e,n]}}function Fd(t){var e=jd(t);return e.invert=jd(-t),e}function Bd(t,e){var n=yd(t),r=gd(t),i=yd(e),o=gd(e);function s(t,e){var s=yd(e),a=yd(t)*s,u=gd(t)*s,l=gd(e),c=l*n+a*r;return[dd(u*i-c*o,a*n-l*r),_d(c*i+u*o)]}return s.invert=function(t,e){var s=yd(e),a=yd(t)*s,u=gd(t)*s,l=gd(e),c=l*i-u*o;return[dd(u*i+l*o,a*n+c*r),_d(c*n-a*r)]},s}function Ud(t,e){(e=Ld(e))[0]-=t,Rd(e);var n=md(-e[1]);return((-e[2]<0?-n:n)+ld-od)%ld}function Gd(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:bd,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function qd(t,e){return fd(t[0]-e[0])<od&&fd(t[1]-e[1])<od}function zd(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Vd(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(qd(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new zd(r,t,null,!0)),u.push(n.o=new zd(r,null,n,!1)),a.push(n=new zd(s,t,null,!1)),u.push(n.o=new zd(s,null,n,!0))}}),a.length){for(u.sort(e),Zd(a),Zd(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Zd(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Wd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hd(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}ed(),ed(),ed(),kd.invert=kd,1===(xd=Wd).length&&(wd=xd,xd=function(t,e){return Wd(wd(t),e)});var Xd=1e9,Yd=-Xd,Qd=ed();function Jd(t){return t}ed(),ed(),ed();var Kd=1/0,$d=Kd,ty=-Kd,ey=ty,ny={point:function(t,e){t<Kd&&(Kd=t),t>ty&&(ty=t),e<$d&&($d=e),e>ey&&(ey=e)},lineStart:bd,lineEnd:bd,polygonStart:bd,polygonEnd:bd,result:function(){var t=[[Kd,$d],[ty,ey]];return ty=ey=-($d=Kd=1/0),t}};function ry(t,e,n,r){return function(i,o){var s,a,u,l=e(o),c=i.invert(r[0],r[1]),h=Gd(),f=e(h),p=!1,d={point:y,lineStart:v,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=S,a=[],s=[]},polygonEnd:function(){d.point=y,d.lineStart=v,d.lineEnd=m,a=Hd(a);var t=function(t,e){var n=e[0],r=e[1],i=[gd(n),-yd(n),0],o=0,s=0;Qd.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+ud,d=gd(p),y=yd(p),g=0;g<c;++g,f=m,d=b,y=S,h=v){var v=l[g],m=v[0],_=v[1]/2+ud,b=gd(_),S=yd(_),x=m-f,w=x>=0?1:-1,P=w*x,C=P>sd,O=d*b;if(Qd.add(dd(O*w*gd(P),y*S+O*yd(P))),o+=C?x+w*ld:x,C^f>=n^m>=n){var T=Id(Ld(h),Ld(v));Rd(T);var E=Id(i,T);Rd(E);var L=(C^x>=0?-1:1)*_d(E[2]);(r>L||r===L&&(T[0]||T[1]))&&(s+=C^x>=0?1:-1)}}return(o<-1e-6||o<od&&Qd<-1e-6)^1&s}(s,c);a.length?(p||(o.polygonStart(),p=!0),Vd(a,oy,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function g(t,e){var n=i(t,e);l.point(n[0],n[1])}function v(){d.point=g,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function S(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&i){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(iy))}return d}}function iy(t){return t.length>1}function oy(t,e){return((t=t.x)[0]<0?t[1]-ad-od:ad-t[1])-((e=e.x)[0]<0?e[1]-ad-od:ad-e[1])}ed();var sy=ry(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?sd:-sd,u=fd(o-n);fd(u-sd)<od?(t.point(n,r=(r+s)/2>0?ad:-ad),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=sd&&(fd(n-i)<od&&(n-=i*od),fd(o-a)<od&&(o-=a*od),r=function(t,e,n,r){var i,o,s=gd(t-n);return fd(s)>od?pd((gd(e)*(o=yd(r))*gd(n)-gd(r)*(i=yd(e))*gd(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*ad,r.point(-sd,i),r.point(0,i),r.point(sd,i),r.point(sd,0),r.point(sd,-i),r.point(0,-i),r.point(-sd,-i),r.point(-sd,0),r.point(-sd,i);else if(fd(t[0]-e[0])>od){var o=t[0]<e[0]?sd:-sd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-sd,-ad]);function ay(t){return function(e){var n=new uy;for(var r in t)n[r]=t[r];return n.stream=e,n}}function uy(){}function ly(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&Pd.hasOwnProperty(t.type)?Pd[t.type](t,e):Sd(t,e)}(n,t.stream(ny));var s=ny.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}uy.prototype={constructor:uy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cy=yd(30*hd);function hy(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,c,h,f,p,d,y,g){var v=l-r,m=c-i,_=v*v+m*m;if(_>4*e&&y--){var b=s+f,S=a+p,x=u+d,w=vd(b*b+S*S+x*x),P=_d(x/=w),C=fd(fd(x)-1)<od||fd(o-h)<od?(o+h)/2:dd(S,b),O=t(C,P),T=O[0],E=O[1],L=T-r,M=E-i,I=m*L-v*M;(I*I/_>e||fd((v*L+m*M)/_-.5)>.3||s*f+a*p+u*d<cy)&&(n(r,i,o,s,a,u,T,E,C,b/=w,S/=w,x,y,g),g.point(T,E),n(T,E,C,b,S,x,l,c,h,f,p,d,y,g))}}return function(e){var r,i,o,s,a,u,l,c,h,f,p,d,y={point:g,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,y.point=m,e.lineStart()}function m(r,i){var o=Ld([r,i]),s=t(r,i);n(c,h,l,f,p,d,c=s[0],h=s[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){y.point=g,e.lineEnd()}function b(){v(),y.point=S,y.lineEnd=x}function S(t,e){m(r=t,e),i=c,o=h,s=f,a=p,u=d,y.point=m}function x(){n(c,h,l,f,p,d,i,o,r,s,a,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return ay({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var fy=ay({point:function(t,e){this.stream.point(t*hd,e*hd)}});function py(t){return function(t){var e,n,r,i,o,s,a,u,l,c,h=150,f=480,p=250,d=0,y=0,g=0,v=0,m=0,_=null,b=sy,S=null,x=Jd,w=.5,P=hy(T,w);function C(t){return[(t=o(t[0]*hd,t[1]*hd))[0]*h+n,r-t[1]*h]}function O(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*cd,t[1]*cd]}function T(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function E(){o=Dd(i=function(t,e,n){return(t%=ld)?e||n?Dd(Fd(t),Bd(e,n)):Fd(t):e||n?Bd(e,n):kd}(g,v,m),e);var t=e(d,y);return n=f-t[0]*h,r=p+t[1]*h,L()}function L(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=fy(b(i,P(x(c=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?function(t,e){var n=yd(t),r=n>0,i=fd(n)>od;function o(t,e){return yd(t)*yd(e)>n}function s(t,e,r){var i=[1,0,0],o=Id(Ld(t),Ld(e)),s=Md(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,c=-n*a/u,h=Id(i,o),f=Ad(i,l);Nd(f,Ad(o,c));var p=h,d=Md(f,p),y=Md(p,p),g=d*d-y*(Md(f,f)-1);if(!(g<0)){var v=vd(g),m=Ad(p,(-d-v)/y);if(Nd(m,f),m=Ed(m),!r)return m;var _,b=t[0],S=e[0],x=t[1],w=e[1];S<b&&(_=b,b=S,S=_);var P=S-b,C=fd(P-sd)<od;if(!C&&w<x&&(_=x,x=w,w=_),C||P<od?C?x+w>0^m[1]<(fd(m[0]-b)<od?x:w):x<=m[1]&&m[1]<=w:P>sd^(b<=m[0]&&m[0]<=S)){var O=Ad(p,(-d+v)/y);return Nd(O,f),[m,Ed(O)]}}}function a(e,n){var i=r?t:sd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ry(o,function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],y=o(h,f),g=r?y?0:a(h,f):y?a(h+(h<0?sd:-sd),f):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=s(e,d))||qd(e,p)||qd(d,p))&&(d[0]+=od,d[1]+=od,y=o(d[0],d[1])),y!==u)c=0,y?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^y){var v;g&n||!(v=s(d,e,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!y||e&&qd(e,d)||t.point(d[0],d[1]),e=d,u=y,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=yd(e),a=gd(e),u=r*n;null==i?(i=e+r*ld,o=e-u/2):(i=Ud(s,i),o=Ud(s,o),(r>0?i<o:i>o)&&(i+=r*ld));for(var l,c=i;r>0?c>o:c<o;c-=u)l=Ed([s,-a*yd(c),-a*gd(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)},r?[0,-t]:[-sd,t-sd])}(_=t*hd,6*hd):(_=null,sy),L()):_*cd},C.clipExtent=function(t){return arguments.length?(x=null==t?(S=s=a=u=null,Jd):function(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(r,i){return fd(r[0]-t)<od?i>0?0:3:fd(r[0]-n)<od?i>0?2:1:fd(r[1]-e)<od?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,f,p,d,y,g,v,m,_=s,b=Gd(),S={point:x,lineStart:function(){S.point=w,l&&l.push(c=[]),v=!0,g=!1,d=y=NaN},lineEnd:function(){u&&(w(h,f),p&&g&&b.rejoin(),u.push(b.result())),S.point=x,g&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,c=a.length,h=a[0],f=h[0],p=h[1];u<c;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=r?p>r&&(f-o)*(r-s)>(p-s)*(t-o)&&++e:p<=r&&(f-o)*(r-s)<(p-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Hd(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Vd(u,a,e,o,s),s.polygonEnd()),_=s,u=l=c=null}};function x(t,e){i(t,e)&&_.point(t,e)}function w(o,s){var a=i(o,s);if(l&&c.push([o,s]),v)h=o,f=s,p=a,v=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&g)_.point(o,s);else{var u=[d=Math.max(Yd,Math.min(Xd,d)),y=Math.max(Yd,Math.min(Xd,y))],b=[o=Math.max(Yd,Math.min(Xd,o)),s=Math.max(Yd,Math.min(Xd,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,b,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),m=!1):(g||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,y=s,g=a}return S}}(S=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==S?null:[[S,s],[a,u]]},C.scale=function(t){return arguments.length?(h=+t,E()):h},C.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],E()):[f,p]},C.center=function(t){return arguments.length?(d=t[0]%360*hd,y=t[1]%360*hd,E()):[d*cd,y*cd]},C.rotate=function(t){return arguments.length?(g=t[0]%360*hd,v=t[1]%360*hd,m=t.length>2?t[2]%360*hd:0,E()):[g*cd,v*cd,m*cd]},C.precision=function(t){return arguments.length?(P=hy(T,w=t*t),L()):vd(w)},C.fitExtent=function(t,e){return ly(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return ly(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&O,E()}}(function(){return t})()}var dy=function(t,e){var n=yd(t),r=yd(e),i=function(t){return(t=md(t))&&t/gd(t)}(n*r);return[i*r*gd(t),i*gd(e)]};function yy(t,e,r,i){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return U(t,function(t){var n=yy(t,e,r,i);n&&u.push(n)}),d(u)}var l=function(t){var e=cn(t).geometry.coordinates,r=[-e[0],-e[1]];return py(dy).scale(79.4188).clipAngle(179.999).rotate(r).scale(n)}(a),c={type:a.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(a.coordinates,l)},h=(new Uc).read(c),f=b(S(e,r),"meters"),p=Rf.bufferOp(h,f,i);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((p=(new Gc).write(p)).coordinates))return s({type:p.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(p.coordinates,l)},o)}function gy(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=bu.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],n.properties):v(o,n.properties)}function vy(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,c=2*e/ve([i,u],[s,u],n)*(s-i),h=2*e/ve([l,o],[l,a],n)*(a-o),f=c/2,p=2*f,y=Math.sqrt(3)/2*h,g=s-i,v=a-o,m=.75*p,_=y,b=(g-p)/(p-f/2),S=Math.floor(b),x=(S*m-f/2-g)/2-f/2+m/2,w=Math.floor((v-y)/y),P=(v-w*y)/2,C=w*y-v>y/2;C&&(P-=y/4);for(var O=[],T=[],E=0;E<6;E++){var L=2*Math.PI/6*E;O.push(Math.cos(L)),T.push(Math.sin(L))}for(var M=[],I=0;I<=S;I++)for(var N=0;N<=w;N++){var A=I%2==1;if(!(0===N&&A||0===N&&C)){var R=I*m+i-x,D=N*_+o+P;if(A&&(D-=y/2),!0===n.triangles)_y([R,D],c/2,h/2,JSON.parse(r),O,T).forEach(function(t){n.mask?gy(n.mask,t)&&M.push(t):M.push(t)});else{var k=my([R,D],c/2,h/2,JSON.parse(r),O,T);n.mask?gy(n.mask,k)&&M.push(k):M.push(k)}}}return d(M)}function my(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),c([s],r)}function _y(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(c([u],r))}return s}function by(t){return v(t)}function Sy(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/ve([o,s],[a,s],r)*(a-o),h=n/ve([o,s],[o,u],r)*(u-s),f=a-o,p=u-s,y=Math.floor(f/l),g=Math.floor(p/h),v=(p-g*h)/2,m=o+(f-y*l)/2,_=0;_<y;_++){for(var b=s+v,S=0;S<g;S++){var x=c([[[m,b],[m,b+h],[m+l,b+h],[m+l,b],[m,b]]],r.properties);r.mask?os(r.mask,x)&&i.push(x):i.push(x),b+=h}m+=l}return d(i)}(t,e,e,n)}function xy(t,e,n){void 0===n&&(n={});for(var r=[],i=e/ve([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ve([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),f=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=c([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),f=c([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=c([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),f=c([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(gy(n.mask,h)&&r.push(h),gy(n.mask,f)&&r.push(f)):(r.push(h),r.push(f)),l+=o,u++}s++,a+=i}return d(r)}dy.invert=function(t,e){var n=vd(t*t+e*e),r=function(t){return t}(n),i=gd(r),o=yd(r);return[dd(t*i,n*o),_d(n&&e*i/n)]},e.along=function(t,e,n){void 0===n&&(n={});for(var r=it(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=ln(r[o],r[o-1])-180;return an(r[o],s,a,n)}return u(r[o])}i+=ve(r[o],r[o+1],n)}return u(r[r.length-1])},e.angle=function(t,e,n,r){if(void 0===r&&(r={}),!L(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=w(!0!==r.mercator?ln(i,o):_i(i,o)),u=w(!0!==r.mercator?ln(s,o):_i(s,o)),l=Math.abs(a-u);return!0===r.explementary?360-l:l},e.applyFilter=Ra,e.area=xr,e.areaFactors=o,e.bbox=J,e.bboxClip=function(t,e){var n=it(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach(function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=hi(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=hi(a=t[r],e);;){if(!(l|i)){c.push(s),i!==o?(c.push(a),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(a);break}if(l&i)break;l?l=hi(s=ci(s,a,l,e),e):i=hi(a=ci(s,a,i,e),e)}l=o}c.length&&n.push(c)}(t,e,s)}),1===s.length?f(s[0],i):y(s,i);case"Polygon":return c(fi(o,e),i);case"MultiPolygon":return v(o.map(function(t){return fi(t,e)}),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=rn,e.bearing=ln,e.bearingToAngle=w,e.bearingToAzimuth=w,e.bezier=nn,e.bezierSpline=nn,e.booleanClockwise=Ci,e.booleanContains=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":switch(o){case"Point":return Xo(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Xo(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(Xo(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Er(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Er({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Er({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Er(o,t,{ignoreEndVertices:!0})&&(n=!0),!Er(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return de(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=J(t),o=J(e);if(!Ho(i,o))return!1;for(;r<e.coordinates.length-1;r++)if(de({type:"Point",coordinates:Yo(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=J(t),r=J(e);if(!Ho(n,r))return!1;for(var i=it(e).coordinates,o=0,s=i;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++)if(!de(u[a],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!de(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Qo(n,r);case"Polygon":return Ko(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Qo(r,n);case"LineString":return function(t,e){if(hr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),$o(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return Jo(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ko(r,n);case"LineString":return Jo(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=zo,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new is({precision:6}).compare(Ze(t),Ze(e))},e.booleanIntersects=os,e.booleanOverlap=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new is({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],c=r.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":V(t,function(t){V(e,function(e){gi(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":V(t,function(t){V(e,function(e){hr(t,e).features.length&&s++})})}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==ms(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==ms(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Un(Ze(t)).features,r=Un(Ze(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!vs(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=de,e.booleanPointOnLine=Er,e.booleanWithin=Mr,e.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return U(t,function(t){var n=yy(t,e,r,i);n&&o.push(n)}),d(o);case"FeatureCollection":return j(t,function(t){var n=yy(t,e,r,i);n&&j(n,function(t){t&&o.push(t)})}),d(o)}return yy(t,e,r,i)},e.center=cn,e.centerMean=la,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var r=e.weight,i=la(t,{weight:e.weight}),o=d([]);j(t,function(t){var e;o.features.push(hn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return function t(e,n,r,i,o){var s=i.tolerance||.001,a=0,l=0,c=0,h=0;if(j(r,function(t){var n,r=null===(n=t.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!E(i=Number(i)))throw new Error("weight value must be a number");if(i>0){h+=1;var o=i*ve(t,e);0===o&&(o=1);var s=i/o;a+=t.geometry.coordinates[0]*s,l+=t.geometry.coordinates[1]*s,c+=s}}),h<1)throw new Error("no features to measure");var f=a/c,p=l/c;return 1===h||0===o||Math.abs(f-n[0])<s&&Math.abs(p-n[1])<s?u([f,p],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([f,p]),t([f,p],e,r,i,o-1))}(i.geometry.coordinates,[0,0],o,s,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),ot(e)){case"Point":return u(K(e),n.properties);case"Polygon":var r=[];A(e,function(t){r.push(t)});var i,o,s,a,l,c,h,f,p=hn(e,{properties:n.properties}),d=p.geometry.coordinates,y=0,g=0,v=0,m=r.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(i=0;i<r.length-1;i++)a=(o=m[i])[0],c=o[1],l=(s=m[i+1])[0],v+=f=a*(h=s[1])-l*c,y+=(a+l)*f,g+=(c+h)*f;if(0===v)return p;var _=1/(.5*v*6);return u([d[0]+_*y,d[1]+_*g],n.properties);default:var b=pe(e);return b?t(b,{properties:n.properties}):hn(e,{properties:n.properties})}},e.centroid=hn,e.circle=un,e.cleanCoords=Ze,e.clone=xe,e.clusterEach=Ia,e.clusterReduce=Na,e.clusters=ja,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=xe(t)),n.minPoints=n.minPoints||3;var r=new cs.DBSCAN,i=r.run(B(t),O(e,n.units),n.minPoints,ve),o=-1;return i.forEach(function(e){o++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"})}),r.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=xe(t));var r=B(t),i=r.slice(0,e.numberOfClusters),o=gs(r,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),j(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},e.collect=function(t,e,n,r){var i=wt(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=J(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){de([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[r]=o}),t},e.collectionOf=rt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return j(t,function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=me(function(t){var e=[],n={};return j(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}}),d(e)}(t));if(r.features=r.features.filter(function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(r,i,e),a=ve(i,o,e),u=ve(r,o,e);return s<=n&&a<=n&&u<=n}),r.features.length<1)return null;var i=Ve(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),s(i)},e.containsNumber=tt,e.convertArea=T,e.convertDistance=O,e.convertLength=O,e.convex=pe,e.coordAll=B,e.coordEach=A,e.coordReduce=R,e.createBins=Aa,e.degrees2radians=C,e.degreesToRadians=C,e.destination=an,e.difference=function(t,e){var n=it(t),r=it(e),i=t.properties||{},o=bu.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?c(o[0],i):v(o,i)},e.dissolve=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;rt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return kr(v(bu.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};j(t,function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=v(bu.union.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a.properties[n]=o[s],r.push(a)}return kr(d(r))},e.distance=ve,e.distanceToDegrees=x,e.distanceToRadians=S,e.distanceWeight=da,e.earthRadius=n,e.ellipse=aa,e.envelope=on,e.explode=fn,e.factors=r,e.feature=s,e.featureCollection=d,e.featureEach=j,e.featureOf=nt,e.featureReduce=F,e.filterProperties=ka,e.findPoint=Y,e.findSegment=X,e.flatten=kr,e.flattenEach=q,e.flattenReduce=z,e.flip=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=xe(t)),A(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},e.geojsonType=et,e.geomEach=U,e.geomReduce=G,e.geometry=a,e.geometryCollection=m,e.getCluster=Ma,e.getCoord=K,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=K(t),e=K(e),r=r||{},i=i||100,o=o||10,new Qr({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},e.helpers=N,e.hexGrid=vy,e.inside=de,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(rt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=J(t);switch(r){case"point":case"points":s=Rr(a,e,n);break;case"square":case"squares":s=Sy(a,e,n);break;case"hex":case"hexes":s=vy(a,e,n);break;case"triangle":case"triangles":s=xy(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return j(s,function(e){var s=0,a=0;j(t,function(t){var u,l=ve("point"===r?e:hn(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=xe(e);l.properties[i]=s/a,u.push(l)}),d(u)},e.intersect=gy,e.invariant=st,e.isNumber=E,e.isObject=L,e.isobands=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!L(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return j(t,function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Eo(To(Ii(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,r.push(u)}return r}(s,e,r);return d((a=function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!L(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ct({},i,o[e]);return n[r]=t[r],v(t.groupedRings,n)}))},e.isolines=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!L(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return j(t,function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return d(function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach(function(t){A(t,f)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ct({},r,i[s]);u[n]=a;var l=y(pt(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t))},e.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=mr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(u([o[0],o[1]]))}})}),r},e.length=Or,e.lengthToDegrees=x,e.lengthToRadians=S,e.lineArc=ei,e.lineChunk=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return q(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Or(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Tr(t,e*s,e*(s+1),{units:n}))}(t,e,r,function(t){o.push(t)})}),d(o)},e.lineDistance=Or,e.lineEach=W,e.lineIntersect=hr,e.lineOffset=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return ko(t,e,r);case"MultiLineString":var s=[];return q(t,function(t){s.push(ko(t,e,r).geometry.coordinates)}),y(s,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=gi,e.lineReduce=H,e.lineSegment=Un,e.lineSlice=function(t,e,n){var r=$(n);if("LineString"!==ot(n))throw new Error("line must be a LineString");for(var i,o=pr(n,t),s=pr(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),f(a,n.properties)},e.lineSliceAlong=Tr,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=ot(t),r=ot(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Dr(e,{precision:7});switch(r){case"Point":return Kr(t,i);case"MultiPoint":return Jr(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Jr(t,hr(t,i))}},e.lineString=f,e.lineStringToPolygon=si,e.lineStrings=p,e.lineToPolygon=si,e.mask=function(t,e){var n,r=function(t){return c(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return("FeatureCollection"===t.type?by(2===(n=t).features.length?bu.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):bu.union.apply(bu,n.features.map(function(t){return t.geometry.coordinates}))):by(bu.union(t.geometry.coordinates))).geometry.coordinates.forEach(function(t){r.geometry.coordinates.push(t[0])}),r},e.meta=Q,e.midpoint=function(t,e){return an(t,ve(t,e)/2,ln(t,e))},e.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=da(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),a=[];j(t,function(t){var e=t.properties||{};a.push(e[n])});for(var u=ya(a),l=function(t){for(var e=ya(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(a),c=0,h=0,f=0,p=0,d=s.length,y=0;y<d;y++){for(var g=0,v=0;v<d;v++)c+=s[y][v]*(a[y]-u)*(a[v]-u),h+=s[y][v],f+=Math.pow(s[y][v]+s[v][y],2),g+=s[y][v]+s[v][y];p+=Math.pow(g,2)}var m=c/h/l,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,S=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:S,zNorm:(m-_)/S}},e.multiLineString=y,e.multiPoint=g,e.multiPolygon=v,e.nearest=Bn,e.nearestPoint=Bn,e.nearestPointOnLine=pr,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return U(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return j(o,function(t){var n=yr(t,e,{units:r});n<s&&(s=n,a=t)}),a&&(a.properties=ct({dist:s},a.properties,i)),a},e.planepoint=function(t,e){var n=K(t),r=it(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],y=void 0!==s?s:r[1][2],g=r[2][0],v=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-c)*(l-d)+f*(u-p)*(l-v)+y*(u-g)*(l-h)-y*(u-c)*(l-v)-m*(u-p)*(l-h)-f*(u-g)*(l-d))/((u-c)*(l-d)+(u-p)*(l-v)+(u-g)*(l-h)-(u-c)*(l-v)-(u-p)*(l-h)-(u-g)*(l-d))},e.point=u,e.pointGrid=Rr,e.pointOnFeature=_r,e.pointOnLine=pr,e.pointOnSurface=_r,e.pointToLineDistance=yr,e.points=l,e.pointsWithinPolygon=ge,e.polygon=c,e.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return U(t,function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=c(o).geometry),ha(s,a),o=a.slice(0);n.push(c(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<r;l++)a=[[[]]],s=t,l>0&&(s=v(o).geometry),fa(s,a),o=a.slice(0);n.push(v(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(n)},e.polygonTangents=function(t,e){var n,r,i,o,s=$(t),a=$(e),l=J(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Bn(t,fn(e))).properties.featureIndex),ot(e)){case"Polygon":n=a[0][c],r=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(r=a[0][c]),o=Pi(a[0][0],a[0][a[0].length-1],s);var f=xi(a[0],s,o,i,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var p=0,y=0,g=0,v=0;v<a[0].length;v++){p=v;for(var m=!1,_=0;_<a[0][v].length;_++){if(y=_,g===c){m=!0;break}g++}if(m)break}n=a[0][p][y],r=a[0][p][y],o=Pi(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=xi(t[0],s,o,i,n,r);n=e[0],r=e[1]})}return d([u(n),u(r)])},e.polygonToLine=ri,e.polygonToLineString=ri,e.polygonize=function(t){var e=qo.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){Go.findEdgeRingContaining(t,r)&&r.push(t)}),d(r.map(function(t){return t.toPolygon()}))},e.polygons=h,e.projection=Sa,e.propEach=D,e.propReduce=k,e.propertiesContainsFilter=Da,e.radians2degrees=P,e.radiansToDegrees=P,e.radiansToDistance=b,e.radiansToLength=b,e.random=La,e.randomLineString=Oa,e.randomPoint=Pa,e.randomPolygon=Ca,e.randomPosition=wa,e.rewind=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=xe(t));var i=[];switch(t.type){case"GeometryCollection":return U(t,function(t){Oi(t,n)}),t;case"FeatureCollection":return j(t,function(t){j(Oi(t,n),function(t){i.push(t)})}),d(i)}return Oi(t,n)},e.rhumbBearing=_i,e.rhumbDestination=Si,e.rhumbDistance=dr,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},e.sector=function(t,e,n,r,i){if(!L(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(mi(n)===mi(r))return un(t,e,i);var s=$(t),a=ei(t,e,n,r,i),u=[[s]];return A(a,function(t){u[0].push(t)}),u[0].push(s),c(u,o)},e.segmentEach=V,e.segmentReduce=Z,e.shortestPath=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!E(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var a=K(t),l=K(e);switch(t=u(a),e=u(l),ot(o)){case"FeatureCollection":if(0===o.features.length)return f([a,l]);break;case"Polygon":o=d([s(it(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=J(No(rn(J(c)),1.15));r||(r=ve([h[0],h[1]],[h[2],h[1]],n)/100),c.features.pop(),c.features.pop();for(var p=h[0],y=h[1],g=h[2],v=h[3],m=r/ve([p,y],[g,y],n)*(g-p),_=r/ve([p,y],[p,v],n)*(v-y),b=g-p,S=v-y,x=Math.floor(b/m),w=Math.floor(S/_),P=(b-x*m)/2,C=[],O=[],T=[],M=[],I=1/0,N=1/0,A=v-(S-w*_)/2,R=0;A>=y;){for(var D=[],k=[],j=p+P,F=0;j<=g;){var B=u([j,A]),U=Ps(B,o);D.push(U?0:1),k.push(j+"|"+A);var G=ve(B,t);!U&&G<I&&(I=G,T={x:F,y:R});var q=ve(B,e);!U&&q<N&&(N=q,M={x:F,y:R}),j+=m,F++}O.push(D),C.push(k),A-=_,R++}var z=new Ss(O,{diagonal:!0}),V=z.grid[T.y][T.x],Z=z.grid[M.y][M.x],W=bs.search(z,V,Z),H=[a];return W.forEach(function(t){var e=C[t.x][t.y].split("|");H.push([+e[0],+e[1]])}),H.push(l),Ze(f(H))},e.simplify=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=xe(t)),U(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Ze(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Ke(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Ke(t,e,n)});break;case"Polygon":t.coordinates=$e(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return $e(t,e,n)})}}(t,n,r)}),t},e.square=sn,e.squareGrid=Sy,e.standardDeviationalEllipse=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!L(i))throw new Error("properties must be a number");var o=B(t).length,s=la(t,{weight:r}),a=0,u=0,l=0;j(t,function(t){var e=t.properties[r]||1,n=ca($(t),$(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,p=Math.atan((c+h)/f),y=180*p/Math.PI,g=0,v=0,m=0;j(t,function(t){var e=t.properties[r]||1,n=ca($(t),$(s));g+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,v+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,m+=e});var _=Math.sqrt(2*g/m),b=Math.sqrt(2*v/m),S=aa(s,_,b,{units:"degrees",angle:y,steps:n,properties:i}),x=ge(t,d([S])),w={meanCenterCoordinates:$(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*B(x).length/o};return S.properties.standardDeviationalEllipse=w,S},e.tag=function(t,e,n,r){return t=xe(t),e=xe(e),j(t,function(t){t.properties||(t.properties={}),j(e,function(e){void 0===t.properties[r]&&de(t,e)&&(t.properties[r]=e.properties[n])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Fn(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Fn(t))}),e},e.tin=me,e.toMercator=ga,e.toWgs84=va,e.transformRotate=Io,e.transformScale=No,e.transformTranslate=function(t,e,n,r){if(!L(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=xe(t)),A(t,function(t){var r=$(Si(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=xy,e.truncate=Dr,e.union=function(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=bu.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],n.properties):v(o,n.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return q(t,function(t){"Polygon"===t.geometry.type&&j(Fr(t),function(n){e.push(c(n.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=M,e.validateId=I,e.voronoi=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return rt(t,"Point","points"),d(function(){var t=Os,e=Ts,n=null;function r(r){return new oa(r.map(function(n,i){var o=[Math.round(t(n,i,r)/na)*na,Math.round(e(n,i,r)/na)*na];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Cs(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Cs(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(sa))},e.within=ge,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(70))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolyline=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="LineString",(0,o.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Geometry),r(e,null,[{key:"getPolylinesCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t[n].geometry.length;r++){for(var i=[],o=t[n].geometry[r].coordinates,s=0;s<o.length;s++)i.push([o[s].x,o[s].y]);e.push(i)}return e}},{key:"getPolylinesCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.lineString(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPolyline=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolygon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.type="Polygon",n.exterior=[],n.interior=[],(0,o.extend)(n,t),n.exterior.length>0&&n.coordinates.push(n.exterior),n.interior.length>0)for(var r=0;r<n.interior.length;r++)n.coordinates.push(n.interior[r]);return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Geometry),r(e,null,[{key:"getPolygonsCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t[n].geometry.length;r++){for(var i=[],o=t[n].geometry[r].exterior,s=[],a=t[n].geometry[r].interior,u=[],l=0;l<o.length;l++)s.push([o[l].x,o[l].y]);for(var c=0;c<a.length;c++){for(var h=[],f=0;f<a[c].length;f++)h.push([a[c][f].x,a[c][f].y]);u.push(h)}i.push(s),i=i.concat(u),e.push(i)}return e}},{key:"getPolygonsCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.polygon(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPolygon=l,Zondy.Service.VPolygon=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBase=void 0;var r=n(0),i=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,r.desInfo=void 0!==n.desInfo?n.desInfo:null,r.idstr=void 0!==n.idstr?n.idstr:"",r.angleType=void 0!==n.angleType?n.angleType:0,r.isDissolve=void 0===n.isDissolve||n.isDissolve,r.isDynPrj=void 0!==n.isDynPrj&&n.isDynPrj,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.ClassBufferBase=o,r.Zondy.Service.ClassBufferBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBase=void 0;var r=n(0),i=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.sfGeometryXML=void 0!==n.sfGeometryXML?n.sfGeometryXML:null,r.attStrctXML=void 0!==n.attStrctXML?n.attStrctXML:null,r.attRowsXML=void 0!==n.attRowsXML?n.attRowsXML:null,r.traceRadius=void 0!==n.traceRadius?n.traceRadius:1e-4,r.resultName=void 0!==n.resultName?n.resultName:null,r.inFormat=void 0!==n.inFormat?n.inFormat:"json",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.FeatureBuffBase=o,r.Zondy.Service.FeatureBuffBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayBase=void 0;var r=n(0),i=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo1=void 0!==n.srcInfo1?n.srcInfo1:null,r.desInfo=void 0!==n.desInfo?n.desInfo:null,r.attOptType=void 0!==n.attOptType?n.attOptType:1,r.infoOptType=void 0!==n.infoOptType?n.infoOptType:1,r.overType=void 0!==n.overType?n.overType:3,r.isCleanNode=void 0!==n.isCleanNode&&n.isCleanNode,r.isLabelPnt=void 0!==n.isLabelPnt&&n.isLabelPnt,r.isValidReg=void 0!==n.isValidReg&&n.isValidReg,r.isReCalculate=void 0===n.isReCalculate||n.isReCalculate,r.radius=void 0!==n.radius?n.radius:.001,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.OverlayBase=o,r.Zondy.Service.OverlayBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBase=void 0;var r=n(0),i=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.clsName=void 0!==n.clsName?n.clsName:null,r.desClsName=void 0!==n.desClsName?n.desClsName:null,r.resultName=void 0!==n.resultName?n.resultName:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.ProjectBase=o,r.Zondy.Service.ProjectBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalServiceBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=(n(7),n(3)),a=n(84),u=n(85);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.dots=void 0!==n.dots?n.dots:null,r.projectInfo=void 0!==n.projectInfo?n.projectInfo:null,r.projectInfoBySRSID=void 0!==n.projectInfoBySRSID?n.projectInfoBySRSID:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"execute",value:function(t,e,n){t instanceof a.CProjectParam&&(this.projectInfo=t),t instanceof u.CProjectBySRSID&&(this.projectInfoBySrsID=t);var r={};r.Dots=this.dots,r.ProjectInfo=this.projectInfo,r.ProjectInfoBySrsID=this.projectInfoBySrsID;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.CalServiceBase=l,i.Zondy.Service.CalServiceBase=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectParam=void 0;var r=n(0),i=n(1),o=function(t){var e=t||{};(0,i.extend)(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};e.CProjectParam=o,r.Zondy.Service.CProjectParam=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectBySRSID=void 0;var r=n(0),i=(n(117),function(t,e){this.DesSrsID=t,this.GdbInfo=e});e.CProjectBySRSID=i,r.Zondy.Service.CProjectBySRSID=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfoAttribute=void 0;var r=n(0),i=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};e.FolderInfoAttribute=i,r.Zondy.Object.Theme.FolderInfoAttribute=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readHref=void 0;var r=n(0),i=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")};e.readHref=i,r.Zondy.XLink.readHref=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(37);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"read",value:function(t){if((0,o.isDocument)(t))return this.readFromDocument(t);if((0,o.isNode)(t))return this.readFromNode(t);if("string"==typeof t){var e=(0,o.parse)(t);return this.readFromDocument(e)}return null}},{key:"readFromDocument",value:function(t){}},{key:"readFromNode",value:function(t){}}]),t}();e.default=s,i.Zondy.Format.XML=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.writeStringTextNode=e.writeNonNegativeIntegerTextNode=e.writeDecimalTextNode=e.writeDateTimeTextNode=e.writeCDATASection=e.writeBooleanTextNode=e.readString=e.readNonNegativeIntegerString=e.readNonNegativeInteger=e.readDecimalString=e.readDecimal=e.readDateTime=e.readBooleanString=e.readBoolean=void 0;var r=n(0),i=n(37),o=n(328),s=function(t){var e=(0,i.getAllTextContent)(t,!1);return a(e)},a=function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0},u=function(t){var e=(0,i.getAllTextContent)(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3},l=function(t){var e=(0,i.getAllTextContent)(t,!1);return c(e)},c=function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0},h=function(t){var e=(0,i.getAllTextContent)(t,!1);return f(e)},f=function(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0},p=function(t){return(0,i.getAllTextContent)(t,!1).trim()},d=function(t,e){_(t,e?"1":"0")},y=function(t,e){t.appendChild(i.DOCUMENT.createCDATASection(e))},g=function(t,e){var n=new Date(1e3*e),r=n.getUTCFullYear()+"-"+(0,o.padNumber)(n.getUTCMonth()+1,2)+"-"+(0,o.padNumber)(n.getUTCDate(),2)+"T"+(0,o.padNumber)(n.getUTCHours(),2)+":"+(0,o.padNumber)(n.getUTCMinutes(),2)+":"+(0,o.padNumber)(n.getUTCSeconds(),2)+"Z";t.appendChild(i.DOCUMENT.createTextNode(r))},v=function(t,e){var n=e.toPrecision();t.appendChild(i.DOCUMENT.createTextNode(n))},m=function(t,e){var n=e.toString();t.appendChild(i.DOCUMENT.createTextNode(n))},_=function(t,e){t.appendChild(i.DOCUMENT.createTextNode(e))};e.readBoolean=s,e.readBooleanString=a,e.readDateTime=u,e.readDecimal=l,e.readDecimalString=c,e.readNonNegativeInteger=h,e.readNonNegativeIntegerString=f,e.readString=p,e.writeBooleanTextNode=d,e.writeCDATASection=y,e.writeDateTimeTextNode=g,e.writeDecimalTextNode=v,e.writeNonNegativeIntegerTextNode=m,e.writeStringTextNode=_,r.Zondy.xsd.readBoolean=s,r.Zondy.xsd.readBooleanString=a,r.Zondy.xsd.readDateTime=u,r.Zondy.xsd.readDecimal=l,r.Zondy.xsd.readDecimalString=c,r.Zondy.xsd.readNonNegativeInteger=h,r.Zondy.xsd.readNonNegativeIntegerString=f,r.Zondy.xsd.readString=p,r.Zondy.xsd.writeBooleanTextNode=d,r.Zondy.xsd.writeCDATASection=y,r.Zondy.xsd.writeDateTimeTextNode=g,r.Zondy.xsd.writeDecimalTextNode=v,r.Zondy.xsd.writeNonNegativeIntegerTextNode=m,r.Zondy.xsd.writeStringTextNode=_},function(t,e,n){"use strict";(function(e){var r=n(8),i=n(338),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(165):void 0!==e&&(t=n(165)),t}(),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function(t){a.headers[t]=r.merge(o)}),t.exports=a}).call(this,n(70))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(26);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new o.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}return r(t,[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,n,r,i,o,s){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var u=this._ctx.createRadialGradient(t,e,n,r,i,o),l=0,c=s.length;l<c;l++)u.addColorStop(s[l][0],s[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,n,r,i){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var s=this._ctx.createLinearGradient(t,e,n,r),a=0,u=i.length;a<u;a++)s.addColorStop(i[a][0],i[a][1]);return s.__nonRecursion=!0,s}},{key:"getStepColors",value:function(t,e,n){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var r=[],i=((e=this.getData(e))[0]-t[0])/n,o=(e[1]-t[1])/n,s=(e[2]-t[2])/n,a=(e[3]-t[3])/n,u=0,l=t[0],c=t[1],h=t[2],f=t[3];u<n;u++)r[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),f.toFixed(4)-0],"rgba"),l+=i,c+=o,h+=s,f+=a;return l=e[0],c=e[1],h=e[2],f=e[3],r[u]=this.toColor([l,c,h,f],"rgba"),r}},{key:"getGradientColors",value:function(t,e){var n=[],r=t.length;if(void 0===e&&(e=20),1===r)n=this.getStepColors(t[0],t[0],e);else if(r>1)for(var i=0,o=r-1;i<o;i++){var s=this.getStepColors(t[i],t[i+1],e);i<o-1&&s.pop(),n=n.concat(s)}return n}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var n=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=n[0],t[2]=n[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],n=0;return t.replace(/[\d.]+/g,function(t){n<3?t|=0:t=+t,e[n++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=this.getData(t),r=n[3];return void 0===r&&(r=1),t.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):t.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):e.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,n=(240&t)<<4,r=15&t;t="#"+((1<<24)+(e<<4)+e+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var r=this.getData(t),i=0;i<3;i++)r[i]=1===n?r[i]*(1-e)|0:(255-r[i])*e+r[i]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,n){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===n&&(n=.5);for(var r=2*(n=1-this.adjust(n,[0,1]))-1,i=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),s=i[3]-o[3],a=((r*s==-1?r:(r+s)/(1+r*s))+1)/2,u=1-a,l=[],c=0;c<3;c++)l[c]=i[c]*a+o[c]*u;var h=i[3]*n+o[3]*(1-n);return h=Math.max(0,Math.min(1,h)),1===i[3]&&1===o[3]?this.toColor(l,"rgb"):(l[3]=h,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var n,r,i=(e=this.normalize(e)).match(this.colorRegExp);if(null===i)throw new Error("The color format error");var o,s=[];if(i[2])o=[(n=i[2].replace("#","").split(""))[0]+n[1],n[2]+n[3],n[4]+n[5]],s=this.map(o,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(i[4]){var a=i[4].split(",");r=a[3],o=a.slice(0,3),s=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==r&&s.push(this.adjust(parseFloat(r),[0,1]))}else if(i[5]||i[6]){var u=(i[5]||i[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],h=u[2];r=u[3],(s=this.map([c,h],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==r&&s.push(this.adjust(parseFloat(r),[0,1]))}return s}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var n=this.getData(this.toRGBA(t));return n[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var n=t?t.length:0,r=0;r<n;r++)t[r]=e(t[r]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,n,r,i=t[0],o=t[1],s=t[2];if(0===o)e=255*s,n=255*s,r=255*s;else{var a=6*i;6===a&&(a=0);var u=0|a,l=s*(1-o),c=s*(1-o*(a-u)),h=s*(1-o*(1-(a-u))),f=0,p=0,d=0;0===u?(f=s,p=h,d=l):1===u?(f=c,p=s,d=l):2===u?(f=l,p=s,d=h):3===u?(f=l,p=c,d=s):4===u?(f=h,p=l,d=s):(f=s,p=l,d=c),e=255*f,n=255*p,r=255*d}return[e,n,r]}},{key:"_HSL_2_RGB",value:function(t){var e,n,r,i=t[0],o=t[1],s=t[2];if(0===o)e=255*s,n=255*s,r=255*s;else{var a,u=2*s-(a=s<.5?s*(1+o):s+o-o*s);e=255*this._HUE_2_RGB(u,a,i+1/3),n=255*this._HUE_2_RGB(u,a,i),r=255*this._HUE_2_RGB(u,a,i-1/3)}return[e,n,r]}},{key:"_HUE_2_RGB",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),u=a-s,l=a;if(0===u)e=0,n=0;else{n=u/a;var c=((a-r)/6+u/2)/u,h=((a-i)/6+u/2)/u,f=((a-o)/6+u/2)/u;r===a?e=f-h:i===a?e=1/3+c-f:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,n*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),u=a-s,l=(a+s)/2;if(0===u)e=0,n=0;else{n=l<.5?u/(a+s):u/(2-a-s);var c=((a-r)/6+u/2)/u,h=((a-i)/6+u/2)/u,f=((a-o)/6+u/2)/u;r===a?e=f-h:i===a?e=1/3+c-f:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,n*=100,l*=100]}}]),t}();e.Color=s,i.Zondy.LevelRenderer.Tool.Color=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var r=n(0);var i=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};i.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},i.catchBrushException=!1,i.debugMode=0,e.Config=i,r.Zondy.LevelRenderer.Config=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicImage=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicimage",n._imageCache={},n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,n,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,o=this.style||{};n&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var s=o.image,a=this;if("string"==typeof s){var u=s;this._imageCache[u]?s=this._imageCache[u]:((s=new Image).onload=function(){s.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(a),e._refreshTimeout=setTimeout(function(){r&&r(e._needsRefresh),e._needsRefresh=[]},10)},s.src=u,this._imageCache[u]=s)}if(s){if("IMG"===s.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!==s.readyState)return}else if(!s.complete)return;var l=o.width||s.width,c=o.height||s.height,h=o.x+i[0],f=o.y+i[1];if(!s.width||!s.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var p=o.sx+i[0]||0,d=o.sy+i[1]||0;t.drawImage(s,p,d,o.sWidth,o.sHeight,h,f,l,c)}else if(o.sx&&o.sy){var y=o.sx+i[0],g=o.sy+i[1],v=l-y,m=c-g;t.drawImage(s,y,g,v,m,h,f,l,c)}else t.drawImage(s,h,f,l,c);o.width||(o.width=l),o.height||(o.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),e}();s._needsRefresh=[],s._refreshTimeout=null,e.SmicImage=s,i.Zondy.LevelRenderer.SmicImage=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pointList=t,n.CLASS_NAME="Zondy.Feature.ShapeParameters.Line",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.pointList=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Line=s,i.Zondy.Feature.ShapeParameters.Line=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return i.x=isNaN(t)?0:t,i.y=isNaN(n)?0:n,i.r=isNaN(r)?0:r,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Circle=s,i.Zondy.Feature.ShapeParameters.Circle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPoint=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicpoint",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}]),e}();e.SmicPoint=s,i.Zondy.LevelRenderer.SmicPoint=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicBrokenLine=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6),s=n(57),a=n(9);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.brushTypeOnly="stroke",n.textPosition="end",n.type="smicbroken-line",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.pointList;if(!(r.length<2)){var i=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,s,u,l=a.SUtil.SUtil_smoothBezier(r,e.smooth,!1,e.smoothConstraint,n);t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var c=0;c<i-1;c++)o=l[2*c],s=l[2*c+1],u=[r[c+1][0]+n[0],r[c+1][1]+n[1]],t.bezierCurveTo(o[0],o[1],s[0],s[1],u[0],u[1])}else if("spline"===e.smooth&&(i=(r=a.SUtil.SUtil_smoothSpline(r,null,null,n)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var h=e.lineWidth||1,f=h,p=h;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var d=1;d<i;d++)a.SUtil.SUtil_dashedLineTo(t,r[d-1][0]+n[0],r[d-1][1]+n[1],r[d][0]+n[0],r[d][1]+n[1],h,[f,p])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,g=y,v=y,m=y,_=y;"dashot"===e.lineType&&(g*=4,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=y,v+=y,m=1,_+=y)),"longdashdot"===e.lineType&&(g*=8,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=y,v+=y,m=1,_+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<i;b++)a.SUtil.SUtil_dashedLineTo(t,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],y,[g,v,m,_])}}else{t.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var S=1;S<i;S++)t.lineTo(r[S][0]+n[0],r[S][1]+n[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return s.SmicPolygon.prototype.getRect.apply(this,[t,e])}},{key:"brush",value:function(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),n.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style),this.afterBrush(t)}}]),e}();e.SmicBrokenLine=u,i.Zondy.LevelRenderer.SmicBrokenLine=u},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerEvent=e.BroadcastEvent=e.SubscribeEvent=e.BroadcastPrefix=e.SubscribePrefix=void 0;var r=n(0),i=(e.SubscribePrefix="/subscribe",e.BroadcastPrefix="/broadcast",e.SubscribeEvent={OPEN:"subscribeOpen",MESSAGE:"subscribeMessage",CLOSE:"subscribeClose",ERROR:"subscribeError"}),o=e.BroadcastEvent={OPEN:"broadcastOpen",MESSAGE:"broadcastMessage",CLOSE:"broadcastClose",ERROR:"broadcastError"};e.LayerEvent={UPDATE:"layerupdate"};r.Zondy.Event.SubscribeEvent=i,r.Zondy.Event.BroadcastEvent=o,r.Zondy.Event.LayerEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=void 0;var r=n(392),i=e.TimeDimensionUtil={getTimeDuration:function(t){return r.iso8601.Period.parse(t,!0)},addTimeDuration:function(t,e,n){void 0===n&&(n=!0),("string"==typeof e||e instanceof String)&&(e=this.getTimeDuration(e));var r=e.length,i=n?"getUTC":"get",o=n?"setUTC":"set";r>0&&0!=e[0]&&t[o+"FullYear"](t[i+"FullYear"]()+e[0]),r>1&&0!=e[1]&&t[o+"Month"](t[i+"Month"]()+e[1]),r>2&&0!=e[2]&&t[o+"Date"](t[i+"Date"]()+7*e[2]),r>3&&0!=e[3]&&t[o+"Date"](t[i+"Date"]()+e[3]),r>4&&0!=e[4]&&t[o+"Hours"](t[i+"Hours"]()+e[4]),r>5&&0!=e[5]&&t[o+"Minutes"](t[i+"Minutes"]()+e[5]),r>6&&0!=e[6]&&t[o+"Seconds"](t[i+"Seconds"]()+e[6])},subtractTimeDuration:function(t,e,n){("string"==typeof e||e instanceof String)&&(e=this.getTimeDuration(e));for(var r=[],i=0,o=e.length;i<o;i++)r.push(-e[i]);this.addTimeDuration(t,r,n)},parseAndExplodeTimeRange:function(t,e){var n=t.split("/"),r=new Date(Date.parse(n[0])),i=new Date(Date.parse(n[1])),o=n.length>2&&n[2].length?n[2]:"P1D";return void 0!==e&&null!==e&&(o=e),this.explodeTimeRange(r,i,o)},explodeTimeRange:function(t,e,n,r){var i=this.getTimeDuration(n),o=[],s=new Date(t.getTime()),a=null,u=null,l=null,c=null;if(void 0!==r){var h=r.split("/");a=h[0].split(":")[0],u=h[0].split(":")[1],l=h[1].split(":")[0],c=h[1].split(":")[1]}for(;s<e;)(void 0===r||s.getUTCHours()>=a&&s.getUTCHours()<=l)&&(s.getUTCHours()!=a||s.getUTCMinutes()>=u)&&(s.getUTCHours()!=l||s.getUTCMinutes()<=c)&&o.push(s.getTime()),this.addTimeDuration(s,i);return s>=e&&o.push(e.getTime()),o},parseTimeInterval:function(t){var e=t.split("/");if(2!=e.length)throw"Incorrect ISO9601 TimeInterval: "+t;var n=Date.parse(e[0]),r=null,i=null;return isNaN(n)?(i=this.getTimeDuration(e[0]),r=Date.parse(e[1]),n=new Date(r),this.subtractTimeDuration(n,i,!0),r=new Date(r)):(r=Date.parse(e[1]),isNaN(r)?(i=this.getTimeDuration(e[1]),r=new Date(n),this.addTimeDuration(r,i,!0)):r=new Date(r),n=new Date(n)),[n,r]},parseTimesExpression:function(t,e){var n=[];if(!t)return n;if("string"==typeof t||t instanceof String)for(var r,i,o=t.split(","),s=0,a=o.length;s<a;s++)3==(r=o[s]).split("/").length?n=n.concat(this.parseAndExplodeTimeRange(r,e)):(i=Date.parse(r),isNaN(i)||n.push(i));else n=t;return n.sort(function(t,e){return t-e})},intersect_arrays:function(t,e){for(var n=t.slice(0),r=e.slice(0),i=[];n.length>0&&r.length>0;)n[0]<r[0]?n.shift():n[0]>r[0]?r.shift():(i.push(n.shift()),r.shift());return i},union_arrays:function(t,e){for(var n=t.slice(0),r=e.slice(0),i=[];n.length>0&&r.length>0;)n[0]<r[0]?i.push(n.shift()):n[0]>r[0]?i.push(r.shift()):(i.push(n.shift()),r.shift());return n.length>0?i=i.concat(n):r.length>0&&(i=i.concat(r)),i},sort_and_deduplicate:function(t){for(var e=[],n=null,r=0,i=(t=t.slice(0).sort(function(t,e){return t-e})).length;r<i;r++)t[r]!==n&&(e.push(t[r]),n=t[r]);return e}};L.zondy.TimeDimensionUtil=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var i=e.TimeDimensionLayer=(r.default.Layer||r.default.Class).extend({includes:r.default.Evented||r.default.Mixin.Events,options:{opacity:1,zIndex:1},initialize:function(t,e){r.default.setOptions(this,e||{}),this._map=null,this._baseLayer=t,this._currentLayer=null,this._timeDimension=this.options.timeDimension||null},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t,!this._timeDimension&&t.timeDimension&&(this._timeDimension=t.timeDimension),this._timeDimension.on("timeloading",this._onNewTimeLoading,this),this._timeDimension.on("timeload",this._update,this),this._timeDimension.registerSyncedLayer(this),this._update()},onRemove:function(t){this._timeDimension.unregisterSyncedLayer(this),this._timeDimension.off("timeloading",this._onNewTimeLoading,this),this._timeDimension.off("timeload",this._update,this),this.eachLayer(t.removeLayer,t),this._map=null},eachLayer:function(t,e){return t.call(e,this._baseLayer),this},setZIndex:function(t){return this.options.zIndex=t,this._baseLayer.setZIndex&&this._baseLayer.setZIndex(t),this._currentLayer&&this._currentLayer.setZIndex&&this._currentLayer.setZIndex(t),this},setOpacity:function(t){return this.options.opacity=t,this._baseLayer.setOpacity&&this._baseLayer.setOpacity(t),this._currentLayer&&this._currentLayer.setOpacity&&this._currentLayer.setOpacity(t),this},bringToBack:function(){if(this._currentLayer)return this._currentLayer.bringToBack(),this},bringToFront:function(){if(this._currentLayer)return this._currentLayer.bringToFront(),this},_onNewTimeLoading:function(t){this.fire("timeload",{time:t.time})},isReady:function(t){return!0},_update:function(){return!0},getBaseLayer:function(){return this._baseLayer},getBounds:function(){var t=new r.default.LatLngBounds;return this._currentLayer&&t.extend(this._currentLayer.getBounds?this._currentLayer.getBounds():this._currentLayer.getLatLng()),t}});r.default.zondy.TimeDimensionLayer=function(t,e){return new i(t,e)}},function(t,e,n){var r=n(208),i=n(103),o=n(104);function s(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[t]=i(arguments[1]):s[t]=o(arguments[1]):s[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?s.apply(e,t):s(t)});if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}r(s),t.exports=s},function(t,e,n){var r=.017453292519943295,i=n(209),o=n(210);t.exports=function(t){var e,n,s,a={},u={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),u[e[0].toLowerCase()]=e[1]});var l={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*r},lat_1:function(t){a.lat1=t*r},lat_2:function(t){a.lat2=t*r},lat_ts:function(t){a.lat_ts=t*r},lon_0:function(t){a.long0=t*r},lon_1:function(t){a.long1=t*r},lon_2:function(t){a.long2=t*r},alpha:function(t){a.alpha=parseFloat(t)*r},lonc:function(t){a.longc=t*r},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(t){a.units=t,o[t]&&(a.to_meter=o[t].to_meter)},from_greenwich:function(t){a.from_greenwich=t*r},pm:function(t){a.from_greenwich=(i[t]?i[t]:parseFloat(t))*r},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(a.axis=t)}};for(e in u)n=u[e],e in l?"function"==typeof(s=l[e])?s(n):a[s]=n:a[e]=n;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},function(t,e,n){var r=.017453292519943295,i=n(60);function o(t,e,n){t[e]=n.map(function(t){var e={};return s(t,e),e}).reduce(function(t,e){return i(t,e)},{})}function s(t,e){var n;Array.isArray(t)?("PARAMETER"===(n=t.shift())&&(n=t.shift()),1===t.length?Array.isArray(t[0])?(e[n]={},s(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],o(e,n,t)):t.every(function(t){return Array.isArray(t)})?o(e,n,t):s(t,e[n])):e[n]=!0):e[t]=!0}function a(t){return t*r}t.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),r=n.shift(),o=n.shift();n.unshift(["name",o]),n.unshift(["type",r]),n.unshift("output");var u={};return s(n,u),function(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",a],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["alpha","azimuth",a],["srsCode","name"]].forEach(function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(u.output),i(e,u.output)}},function(t,e,n){var r=.017453292519943295,i=57.29577951308232,o=1,s=2,a=n(218),u=n(219),l=n(59),c=n(106);t.exports=function t(e,n,h){var f;function p(t,e){return(t.datum.datum_type===o||t.datum.datum_type===s)&&"WGS84"!==e.datumCode}return Array.isArray(h)&&(h=c(h)),e.datum&&n.datum&&(p(e,n)||p(n,e))&&(t(e,f=new l("WGS84"),h),e=f),"enu"!==e.axis&&u(e,!1,h),"longlat"===e.projName?(h.x*=r,h.y*=r):(e.to_meter&&(h.x*=e.to_meter,h.y*=e.to_meter),e.inverse(h)),e.from_greenwich&&(h.x+=e.from_greenwich),h=a(e.datum,n.datum,h),n.from_greenwich&&(h.x-=n.from_greenwich),"longlat"===n.projName?(h.x*=i,h.y*=i):(n.forward(h),n.to_meter&&(h.x/=n.to_meter,h.y/=n.to_meter)),"enu"!==n.axis&&u(n,!0,h),h}},function(t,e){t.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},function(t,e){var n=6,r="AJSAJS",i="AFAFAF",o=65,s=73,a=79,u=86,l=90;function c(t){return t*(Math.PI/180)}function h(t){return t/Math.PI*180}function f(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,u,l,c,p,d,y=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,m=e;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,d=(p=m/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*p)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*p)+151*g*g*g/96*Math.sin(6*p),o=y/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),a=.006739496752268451*Math.cos(d)*Math.cos(d),u=.99330562*y/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),l=v/(.9996*o);var _=d-o*Math.tan(d)/u*(l*l/2-(5+3*s+10*a-4*a*a-.06065547077041606)*l*l*l*l/24+(61+90*s+298*a+45*s*s-1.6983531815716497-3*a*a)*l*l*l*l*l*l/720);_=h(_);var b,S=(l-(1+2*s+a)*l*l*l/6+(5-2*a+28*s-3*a*a+.05391597401814761+24*s*s)*l*l*l*l*l/120)/Math.cos(d);if(S=c+h(S),t.accuracy){var x=f({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:x.lat,right:x.lon,bottom:_,left:S}}else b={lat:_,lon:S};return b}function p(t){var e=t%n;return 0===e&&(e=n),e}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,c=null,h="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;h+=e,f++}var d=parseInt(h,10);if(0===f||f+3>n)throw"MGRSPoint bad conversion from: "+t;var g=t.charAt(f++);if(g<="A"||"B"===g||"Y"===g||g>="Z"||"I"===g||"O"===g)throw"MGRSPoint zone letter "+g+" not handled: "+t;c=t.substring(f,f+=2);for(var v=p(d),m=function(t,e){var n=r.charCodeAt(e-1),i=1e5,u=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===a&&n++,n>l){if(u)throw"Bad character: "+t;n=o,u=!0}i+=1e5}return i}(c.charAt(0),v),_=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=i.charCodeAt(e-1),r=0,l=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===a&&n++,n>u){if(l)throw"Bad character: "+t;n=o,l=!0}r+=1e5}return r}(c.charAt(1),v);_<y(g);)_+=2e6;var b=n-f;if(b%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var S,x,w,P=b/2,C=0,O=0;return P>0&&(S=1e5/Math.pow(10,P),x=t.substring(f,f+P),C=parseFloat(x)*S,w=t.substring(f+P),O=parseFloat(w)*S),{easting:C+m,northing:O+_,zoneLetter:g,zoneNumber:d,accuracy:S}}function y(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.forward=function(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,c="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var c=p(n),h=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return function(t,e,n){var c=n-1,h=r.charCodeAt(c),f=i.charCodeAt(c),p=h+t-1,d=f+e,y=!1;p>l&&(p=p-l+o-1,y=!0);(p===s||h<s&&p>s||(p>s||h<s)&&y)&&p++;(p===a||h<a&&p>a||(p>a||h<a)&&y)&&++p===s&&p++;p>l&&(p=p-l+o-1);d>u?(d=d-u+o-1,y=!0):y=!1;(d===s||f<s&&d>s||(d>s||f<s)&&y)&&d++;(d===a||f<a&&d>a||(d>a||f<a)&&y)&&++d===s&&d++;d>u&&(d=d-u+o-1);return String.fromCharCode(p)+String.fromCharCode(d)}(h,f,c)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+c.substr(c.length-5,e)}(function(t){var e,n,r,i,o,s,a,u=t.lat,l=t.lon,h=6378137,f=c(u),p=c(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60);u>=56&&u<64&&l>=3&&l<12&&(a=32);u>=72&&u<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37));s=c(6*(a-1)-180+3),.006739496752268451,e=h/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),r=.006739496752268451*Math.cos(f)*Math.cos(f),i=Math.cos(f)*(p-s),o=h*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var d=.9996*e*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,y=.9996*(o+e*Math.tan(f)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(d),zoneNumber:a,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)},e.inverse=function(t){var e=f(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},e.toPoint=function(t){var e=f(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},function(t,e,n){var r=n(30),i=n(31),o=n(32),s=n(33),a=n(34),u=n(4),l=Math.PI/2,c=n(29),h=n(22);e.init=function(){this.e0=r(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,n,r,i=t.x,o=t.y,s=u(i-this.long0),l=Math.sin(o),c=Math.cos(o);if(this.sphere){var h=c*Math.sin(s);if(Math.abs(Math.abs(h)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+h)/(1-h)),e=Math.acos(c*Math.cos(s)/Math.sqrt(1-h*h)),o<0&&(e=-e),r=this.a*this.k0*(e-this.lat0)}else{var f=c*s,p=Math.pow(f,2),d=this.ep2*Math.pow(c,2),y=Math.tan(o),g=Math.pow(y,2);e=1-this.es*Math.pow(l,2);var v=this.a/Math.sqrt(e),m=this.a*a(this.e0,this.e1,this.e2,this.e3,o);n=this.k0*v*f*(1+p/6*(1-g+d+p/20*(5-18*g+Math.pow(g,2)+72*d-58*this.ep2)))+this.x0,r=this.k0*(m-this.ml0+v*y*(p*(.5+p/24*(5-g+9*d+4*Math.pow(d,2)+p/30*(61-58*g+Math.pow(g,2)+600*d-330*this.ep2)))))+this.y0}return t.x=n,t.y=r,t},e.inverse=function(t){var e,n,r,i,o,s;if(this.sphere){var a=Math.exp(t.x/(this.a*this.k0)),f=.5*(a-1/a),p=this.lat0+t.y/(this.a*this.k0),d=Math.cos(p);e=Math.sqrt((1-d*d)/(1+f*f)),o=h(e),p<0&&(o=-o),s=0===f&&0===d?this.long0:u(Math.atan2(f,d)+this.long0)}else{var y=t.x-this.x0,g=t.y-this.y0;for(n=e=(this.ml0+g/this.k0)/this.a,i=0;n+=r=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,!(Math.abs(r)<=1e-10);i++)if(i>=6)return 95;if(Math.abs(n)<l){var v=Math.sin(n),m=Math.cos(n),_=Math.tan(n),b=this.ep2*Math.pow(m,2),S=Math.pow(b,2),x=Math.pow(_,2),w=Math.pow(x,2);e=1-this.es*Math.pow(v,2);var P=this.a/Math.sqrt(e),C=P*(1-this.es)/e,O=y/(P*this.k0),T=Math.pow(O,2);o=n-P*_*T/C*(.5-T/24*(5+3*x+10*b-4*S-9*this.ep2-T/30*(61+90*x+298*b+45*w-252*this.ep2-3*S))),s=u(this.long0+O*(1-T/6*(1+2*x+b-T/20*(5-2*b+28*x-3*S+8*this.ep2+24*w)))/m)}else o=l*c(g),s=this.long0}return t.x=s,t.y=o,t},e.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},function(t,e){t.exports=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynShowStyle=void 0;var r=n(0),i=n(1),o=(n(111),n(5),n(45),n(65),n(66),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0});e.DynShowStyle=o,r.Zondy.Object.DynShowStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynNoteInfo=void 0;var r=n(0),i=n(1),o=n(5),s=(n(112),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:o.FontShape.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0});e.CDynNoteInfo=s,r.Zondy.Object.CDynNoteInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynNoteLableType=void 0;var r=n(0),i=n(1),o=(n(113),n(114),n(115),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.DynNoteLableType=o,r.Zondy.Object.DynNoteLableType=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LablePntInfo=void 0;var r=n(0),i=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Ang=void 0!==e.Ang&&null!==e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!==e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!==e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!==e.PntType?e.PntType:0});e.LablePntInfo=o,r.Zondy.Object.LablePntInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelLinInfo=void 0;var r=n(0),i=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!==e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!==e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!==e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!==e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!==e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!==e.SpreadType?e.SpreadType:null});e.LabelLinInfo=o,r.Zondy.Object.LabelLinInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelRegInfo=void 0;var r=n(0),i=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!==e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!==e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!==e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!==e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!==e.RegType?e.RegType:0});e.LabelRegInfo=o,r.Zondy.Object.LabelRegInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyleExtend=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};e.CDisplayStyleExtend=o,r.Zondy.Object.CDisplayStyleExtend=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGDBInfo=void 0;var r=n(0),i=function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null};e.CGDBInfo=i,r.Zondy.Object.CGDBInfo=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var r=n(0),i=n(1),o=n(19),s=(n(119),n(5),n(120)),a=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.AttValue=void 0!==e.AttValue&&null!==e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!==e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!==e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!==e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!==e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!==e.GraphicInfo?e.GraphicInfo:null};a.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},a.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new s.WebGraphicsInfo(this.GraphicInfo)},a.prototype.getAttValueArray=function(){return this.AttValue},a.prototype.getRectBound=function(){var t=this.bound;return null!==t?new o.Rectangle(t):t},a.prototype.getGeometry=function(){return this.fGeom},a.prototype.getFID=function(){return this.FID},a.prototype.setAttValues=function(t){this.AttValue=t},a.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new o.Rectangle(t)),t instanceof String&&(e=new o.Rectangle(t)),t instanceof o.Rectangle&&(e=t),t instanceof ol.extent&&(e=new o.Rectangle).setByOL(t),this.bound=e},a.prototype.setFID=function(t){this.FID=t},a.prototype.setFType=function(t){this.ftype=t},a.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},e.Feature=a,r.Zondy.Object.Feature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGeometry=void 0;var r=n(0),i=n(1),o=(n(67),n(68),n(69),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.PntGeom=void 0!==e.PntGeom&&null!==e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!==e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!==e.RegGeom?e.RegGeom:null});o.prototype.setPntGeom=function(t){this.PntGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setLine=function(t){this.LinGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setRegGeom=function(t){this.RegGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},e.FeatureGeometry=o,r.Zondy.Object.FeatureGeometry=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGraphicsInfo=void 0;var r=n(0),i=n(1),o=(n(5),n(65),n(45),n(66),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.InfoType=void 0!==e.InfoType&&null!==e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.WebGraphicsInfo=o,r.Zondy.Object.WebGraphicsInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(18),o=n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Tangram),r(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getLinearRing(0).getCoordinates(),n=e.length,r=0;r<n;r++)this.pointArr[r]=new o.Point2D(e[r][0],e[r][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),e}();e.Polygon=s,Zondy.Object.Polygon=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourNoteParam=void 0;var r=n(0),i=function(t){var e=void 0!=t?t:{};this.IsClipLine=void 0==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=void 0!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=void 0!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=void 0!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=void 0!=e.MaxAngle?e.MaxAngle:90,this.MinDist=void 0!=e.MinDist?e.MinDist:10,this.IsAbs=void 0!=e.IsAbs&&e.IsAbs,this.IsComma=void 0!=e.IsComma&&e.IsComma,this.DigitNum=void 0!=e.DigitNum?e.DigitNum:0,this.FormatNo=void 0!=e.FormatNo?e.FormatNo:0,this.LogFlag=void 0!=e.LogFlag?e.LogFlag:0,this.Prefix=void 0!=e.Prefix?e.Prefix:"",this.Suffix=void 0!=e.Suffix?e.Suffix:"",this.ColorNo=void 0!=e.ColorNo?e.ColorNo:0,this.FixSize=void 0!=e.FixSize?e.FixSize:.01,this.FontNo=void 0!=e.FontNo?e.FontNo:0};e.ContourNoteParam=i,r.Zondy.Object.ContourAnalyse.ContourNoteParam=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourParam=void 0;var r=n(0),i=(n(122),n(124),n(125),function(t){var e=void 0!=t?t:{};this.IsSmoothLine=void 0!==e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!==e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!==e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!==e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!==e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!==e.MapWay?e.MapWay:1,this.FrameWidth=void 0!==e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!==e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!==e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!==e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!==e.NoteParam?e.NoteParam:new r.Zondy.Object.ContourAnalyse.ContourNoteParam,this.SlopLineParam=void 0!==e.SlopLineParam?e.SlopLineParam:new r.Zondy.Object.ContourAnalyse.SlopLineParam,this.ZValues=void 0!==e.ZValues?e.ZValues:new r.Zondy.Object.ContourAnalyse.ContourZValue});e.ContourParam=i,r.Zondy.Object.ContourAnalyse.ContourParam=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=void 0;var r=n(0),i=function(t){var e=void 0!==t?t:{};this.XScale=void 0!==e.XScale?e.XScale:2,this.YScale=void 0!==e.YScale?e.YScale:10,this.LineType=void 0!==e.LineType?e.LineType:0,this.SubLineType=void 0!==e.SubLineType?e.SubLineType:0};e.SlopLineParam=i,r.Zondy.Object.ContourAnalyse.SlopLineParam=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourZValue=void 0;var r=n(0),i=(n(45),n(126),function(t){var e=void 0!=t?t:{};this.ZValue=void 0!=e.ZValue?e.ZValue:1,this.LineInfo=void 0!=e.LineInfo?e.LineInfo:null,this.RegInfo=void 0!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=void 0!=e.IsOutputNote&&e.IsOutputNote});e.ContourZValue=i,r.Zondy.Object.ContourAnalyse.ContourZValue=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourRegionInfo=void 0;var r=n(0),i=function(t){var e=void 0!=t?t:{};this.PatID=void 0!=e.PatID?e.PatID:0,this.FillMode=void 0!=e.FillMode?e.FillMode:0,this.FillColor=void 0!=e.FillColor?e.FillColor:1,this.PatHeight=void 0!=e.PatHeight?e.PatHeight:1,this.PatWidth=void 0!=e.PatWidth?e.PatWidth:1,this.PatAngle=void 0!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!=e.PatColor?e.PatColor:1,this.OutPenWidth=void 0!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=void 0!=e.OverMethod?e.OverMethod:0};e.ContourRegionInfo=i,r.Zondy.Object.ContourAnalyse.ContourRegionInfo=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeshingParam=void 0;var r=n(0),i=function(t){var e=void 0!==t?t:{};this.SfClsURL=void 0!==e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.XCellNum=void 0!==e.XCellNum?e.XCellNum:200,this.Bound=void 0!==e.Bound?e.Bound:null,this.CalN=void 0!==e.CalN?e.CalN:null,this.CalM=void 0!==e.CalM?e.CalM:null,this.bIsCalInValidCtrlPnt=void 0!==e.bIsCalInValidCtrlPnt&&e.bIsCalInValidCtrlPnt,this.nYCtrlNum=void 0!==e.nYCtrlNum?e.nYCtrlNum:null,this.nXCtrlNum=void 0!==e.nXCtrlNum?e.nXCtrlNum:null,this.nLayerNum=void 0!==e.nLayerNum?e.nLayerNum:null};e.MeshingParam=i,r.Zondy.Object.ContourAnalyse.MeshingParam=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonServiceBase=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(129),a=n(130),u=n(131);var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,(0,o.isArray)(e)?(r.urls=e,r.length=e.length,r.totalTimes=r.length,1===r.length?r.url=e[0]:(r.index=parseInt(Math.random()*r.length),r.url=e[r.index])):(r.totalTimes=1,r.url=e),(n=n||{})&&(0,o.extend)(this,n),r.isInTheSameDomain=(0,o.isInTheSameDomain)(r.url),r.events=new s.Events(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners)}return r(t,[{key:"destroy",value:function(){var t=this;(0,o.isArray)(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(n,n.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=(0,o.isInTheSameDomain)(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=(0,o.transformResult)(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=t=(0,o.transformResult)(t);this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=(0,o.urlAppend)(t.url,(0,o.getParameterString)(t.params||{}))),t.params=t.data),u.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(e){var n=void 0;return n=e.text?function(){return e.text()}:function(){return e.json()},200==e.status?new Promise(function(r){n().then(function(e){if(e){var n=null;if("string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(n=(new a.JSONFormat).read(e)):(n={},"true"===e.toLowerCase()?n.succeed=!0:(n.succeed=!1,n.error=!0)),(!n&&isNaN(n)||n.error)&&(n=n&&n.error?{error:n.error}:{error:!0}),n.error)(t.scope?(0,o.bind)(t.failure,t.scope):t.failure)(n);else isNaN(n)||(n={value:n}),"string"==typeof n&&(n={value:n}),"[object Array]"!==Object.prototype.toString.call(n)?n.succeed=void 0===n.succeed||n.succeed:n={value:n,succeed:!0},(t.scope?(0,o.bind)(t.success,t.scope):t.success)(n)}}),r(e.status)},function(t){console.log("Fetch",t)}):new Promise(function(r){n().then(function(e){if(e){var n=null;"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(n=(new a.JSONFormat).read(e)):(n={}).succeed=!1,(!n&&isNaN(n)||!n.success)&&(n={succeed:!1}),(t.scope?(0,o.bind)(t.failure,t.scope):t.failure)(n)}}),r(e.status)},function(t){console.log("Fetch",t)})}).catch(function(e){(t.scope?(0,o.bind)(t.failure,t.scope):t.failure)({error:!0,value:{}})}).then(function(t,e){})}}]),t}();e.CommonServiceBase=l,i.Zondy.Service.CommonServiceBase=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=function(t,e,n,r){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},(0,i.extend)(this,r),null!=n)for(var o=0,s=n.length;o<s;o++)this.addEventType(n[o])};o.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},o.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},o.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},o.prototype.register=function(t,e,n,s){if(t in o&&!this.extensions[t]&&(this.extensions[t]=new o[t](this)),null!=n&&-1!==(0,i.indexOf)(this.eventTypes,t)){null==e&&(e=this.object);var a=this.listeners[t];a||(a=[],this.listeners[t]=a,this.extensionCount[t]=0);var u={obj:e,func:n};s?(a.splice(this.extensionCount[t],0,u),"object"===(void 0===s?"undefined":r(s))&&s.extension&&this.extensionCount[t]++):a.push(u)}},o.prototype.registerPriority=function(t,e,n){this.register(t,e,n,!0)},o.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},o.prototype.unregister=function(t,e,n){null==e&&(e=this.object);var r=this.listeners[t];if(null!=r)for(var i=0,o=r.length;i<o;i++)if(r[i].obj===e&&r[i].func===n){r.splice(i,1);break}},o.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},o.prototype.triggerEvent=function(t,e){var n=this.listeners[t];if(n&&0!=n.length){var r;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var i=0,o=(n=n.slice()).length;i<o;i++){var s=n[i];if(void 0!=(r=s.func.apply(s.obj,[e.result]))&&0==r)break}return r}},e.Events=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),(0,i.extend)(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,n,r,i=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(n=this.write.apply(this,[e,this.pretty]),r=this.write.apply(this,[t[e],this.pretty]),null!=n&&null!=r&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),o=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(t){var e,n=["["];this.level+=1;for(var r=0,i=t.length;r<i;++r)null!=(e=this.write.apply(this,[t[r],this.pretty]))&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,n){var r=e[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};o.prototype.read=function(t,e){var n;if(this.nativeJSON)try{n=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=n),n},o.prototype.write=function(t,e){this.pretty=!!e;var n=null,i=void 0===t?"undefined":r(t);if(this.serialize[i])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[i].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return n},o.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},o.prototype.writeNewline=function(){return this.pretty?this.newline:""},o.prototype.writeSpace=function(){return this.pretty?this.space:""},e.JSONFormat=o,Zondy.Service.JSONFormat=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FetchRequest=e.RequestTimeout=e.CORS=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(1);n(263),n(267);var i=window.fetch,o=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,s=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,a=Zondy.FetchRequest={commit:function(t,e,n,r){switch(t=t?t.toUpperCase():t){case"GET":return this._get(e,n,r);case"POST":return this._post(e,n,r);case"PUT":return this._put(e,n,r);case"DELETE":return this._delete(e,n,r);default:return this._get(e,n,r)}},_get:function(t,e,n){n=n||{};return t=this._processUrl(t,n),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,n):this._fetch(t,e,n,"GET")},_delete:function(t,e,n){n=n||{};return t=this._processUrl(t,n),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&o?this._fetch(t,e,n,"DELETE"):this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,n)},_post:function(t,e,n){return n=n||{},this._fetch(this._processUrl(t,n),e,n,"POST")},_put:function(t,e,n){return n=n||{},this._fetch(this._processUrl(t,n),e,n,"PUT")},urlIsLong:function(t){for(var e=0,n=null,r=0,i=t.length;r<i;r++)(n=t.charCodeAt(r))<127?e++:128<=n&&n<=2047?e+=2:2048<=n&&n<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,n,r){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof n&&(n=JSON.stringify(n)),this._post(e,n,r)},_processUrl:function(t,e){return this._isMVTRequest(t)?t:(e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t)},_fetch:function(t,e,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,i(t,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?e:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:s}).then(function(t){return t})):i(t,{method:r,body:"PUT"===r||"POST"===r?e:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:s}).then(function(t){return t}).catch(function(t){return t})},_timeout:function(t,e){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},t),e.then(n,r)})},_getParameterString:function(t){var e=[];for(var n in t){var i=t[n];if(null!=i&&"function"!=typeof i){var o;if("object"===(void 0===i?"undefined":r(i))&&i.constructor===Array){for(var s,a=[],u=0,l=i.length;u<l;u++)s=i[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o="["+a.join(",")+"]"}else o=encodeURIComponent(i);e.push(encodeURIComponent(n)+"="+o)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};e.CORS=o,e.RequestTimeout=s,e.FetchRequest=a,Zondy.Service.FetchRequest=a,Zondy.Service.CORS=o,Zondy.Service.RequestTimeout=s},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDBInfo=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(23),o=n(3);n(1);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.serverName=void 0!==n.serverName?n.serverName:null,r.gdbName=void 0!==n.gdbName?n.gdbName:null,r.dsName=void 0!==n.dsName?n.dsName:null,r.rcsName=void 0!==n.rcsName?n.rcsName:null,r.User=void 0!==n.User?n.User:null,r.Password=void 0!==n.Password?n.Password:null,r.containAll=void 0===n.containAll||n.containAll,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CatalogService),r(e,[{key:"getServerList",value:function(t,e){this.partUrl="datasource?f=json";var n=this.getFullUrl();new o.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"?f=json":n.partUrl="datasource/"+n.serverName+"?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"?f=json";var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,n){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?f=json";var i=r.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}},{key:"AttachGDB",value:function(t,e,n){var r=this;if(null!==r.serverName&&null!==r.gdbName&&null!==t){r.partUrl="gdb/attach/"+r.gdbName+"?gdbSvrName="+r.serverName+"&path="+t+"&f=json",null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var i=r.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var n=this;if(null!==n.serverName&&null!==n.gdbName){n.partUrl="gdb/detach/"+n.gdbName+"?gdbSvrName="+n.serverName,null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,n){var r=this;if(null!==r.serverName&&null!==r.gdbName&&("mapgislocal"!==r.serverName.toLowerCase()||null!==t)){r.partUrl="gdb/creat/"+r.gdbName+"?gdbSvrName="+r.serverName+"&path="+t+"&f=json",null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var i=r.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var n=this;if(null!==n.serverName&&null!==n.gdbName){n.partUrl="gdb/delete/"+n.gdbName+"?gdbSvrName="+n.serverName,null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.GDBInfo=s,Zondy.Catalog.GDBInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=e.VPolyline=e.VPolygon=e.VPoint=e.BaseParameter=e.ObjectIdsParameter=e.RectangleParameter=e.GeometryParameter=e.SQLParameter=e.FeatureService=e.QueryUnifyParameter=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=void 0;var r=n(276),i=n(277),o=n(71),s=n(278),a=n(137),u=n(279),l=n(138),c=n(139),h=n(140),f=n(136),p=n(72),d=n(280),y=n(48),g=n(135),v=n(36),m=n(281),_=n(283),b=n(284),S=n(285),x=n(286),w=n(287),P=n(24),C=n(73),O=n(78),T=n(77),E=n(288);e.EditDocFeature=r.EditDocFeature,e.EditLayerFeature=i.EditLayerFeature,e.EditServiceBase=o.EditServiceBase,e.MultiGeoQuery=s.MultiGeoQuery,e.MultiGeoQueryParameter=a.MultiGeoQueryParameter,e.ObjClsQuery=u.ObjClsQuery,e.ObjClsQueryParameter=l.ObjClsQueryParameter,e.QueryByLayerParameter=c.QueryByLayerParameter,e.QueryDocFeature=h.QueryDocFeature,e.QueryFeatureRule=f.QueryFeatureRule,e.QueryFeatureStruct=p.QueryFeatureStruct,e.QueryLayerFeature=d.QueryLayerFeature,e.QueryParameter=y.QueryParameter,e.QueryParameterBase=g.QueryParameterBase,e.QueryServiceBase=v.QueryServiceBase,e.QueryUnifyParameter=m.QueryUnifyParameter,e.FeatureService=_.FeatureService,e.SQLParameter=b.SQLParameter,e.GeometryParameter=S.GeometryParameter,e.RectangleParameter=x.RectangleParameter,e.ObjectIdsParameter=w.ObjectIdsParameter,e.BaseParameter=P.BaseParameter,e.VPoint=C.VPoint,e.VPolygon=O.VPolygon,e.VPolyline=T.VPolyline,e.VFeature=E.VFeature},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameterBase=void 0;var r=n(0),i=n(1),o=n(72),s=n(136);var a=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};(0,i.extend)(this,n),this.geometry=void 0!==n.geometry?n.geometry:null,this.where=void 0!==n.where?n.where:null,this.rule=void 0!==n.rule?n.rule:new s.QueryFeatureRule,this.objectIds=void 0!==n.objectIds?n.objectIds:null,this.pageIndex=void 0!==n.pageIndex?n.pageIndex:0,this.recordNumber=void 0!==n.recordNumber?n.recordNumber:20,this.resultFormat=void 0!==n.resultFormat?n.resultFormat:"json",this.struct=void 0!==n.struct?n.struct:new o.QueryFeatureStruct,this.orderField=void 0!==n.orderField?n.orderField:null,this.rtnLabel=void 0!==n.rtnLabel&&n.rtnLabel,this.fields=n.fields||"",this.coordPrecision=n.coordPrecision||0===n.coordPrecision?n.coordPrecision:2,this.isAsc=void 0!==n.isAsc&&n.isAsc,this.cursorType=void 0!==n.cursorType?n.cursorType:"forward",this.proj=n.proj||null,this.guid=n.guid||"__readonly_user__"};e.QueryParameterBase=a,r.Zondy.Service.QueryParameterBase=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureRule=void 0;var r=n(0),i=n(1),o=function(t){var e=t||{};(0,i.extend)(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};o.prototype.toJSON=function(){return(0,i.toJSON)(this)},e.QueryFeatureRule=o,r.Zondy.Service.QueryFeatureRule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQueryParameter=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,t+="&geometryType="+this.geometryType,t+="&nearDis="+this.nearDis},e.MultiGeoQueryParameter=o,r.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQueryParameter=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!==this.objectIds?t+="&objectIds="+this.objectIds:null!==this.where&&(t+="&where="+this.where),t},e.ObjClsQueryParameter=o,r.Zondy.Service.ObjClsQueryParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryByLayerParameter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=n(0),s=n(48);n(72);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.gdbp=void 0!==t?t:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.QueryParameter),r(e,[{key:"getParameterURL",value:function(){return i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),e}();e.QueryByLayerParameter=a,o.Zondy.Service.QueryByLayerParameter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDocFeature=void 0;var r=n(0),i=n(36);var o=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.queryParam=t,s.docName=n,s.layerIndex=void 0==r?-1:r,s.mapIndex=0,s.partUrl="docs/"+s.docName+"/"+s.mapIndex.toString()+"/"+s.layerIndex.toString()+"/query",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.QueryServiceBase),e}();e.QueryDocFeature=o,r.Zondy.Service.QueryDocFeature=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAllOtherDataItemInfoSource=void 0;var r=n(0),i={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=i,r.Zondy.Object.Theme.CAllOtherDataItemInfoSource=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};e.CAnnInfo=o,r.Zondy.Object.Theme.CAnnInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartLabelFormat=void 0;var r=n(0),i={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=i,r.Zondy.Object.Theme.CChartLabelFormat=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartTheme=void 0;var r=n(0),i=n(12),o=n(145);n(146),n(149);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.ChartType=void 0!==n.ChartType?n.ChartType:o.CChartType.Bar,r.ChartThemeInfoArr=void 0!==n.ChartThemeInfoArr?n.ChartThemeInfoArr:null,r.RepresentInfo=void 0!==n.RepresentInfo?n.RepresentInfo:null,r.Type="CChartTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CChartTheme=s,r.Zondy.Object.Theme.CChartTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartType=void 0;var r=n(0),i={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=i,r.Zondy.Object.Theme.CChartType=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeInfo=void 0;var r=n(0),i=n(16);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.Expression=void 0!==t?t:"",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CThemeInfo),e}();e.CChartThemeInfo=o,r.Zondy.Object.Theme.CChartThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLinInfo=void 0;var r=n(0),i=n(1),o=n(5),s=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:o.CLinAdjustType.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:o.CLinHeadType.Round,this.JointType=void 0!==e.JointType?e.JointType:o.CLinJointType.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:o.CLinStyleMakeType.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CLinInfo=s,r.Zondy.Object.Theme.CLinInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegInfo=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};e.CRegInfo=o,r.Zondy.Object.Theme.CRegInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeRepresentInfo=void 0;var r=n(0),i=n(1),o=n(142),s=n(143),a=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new o.CAnnInfo,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:s.CChartLabelFormat.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};e.CChartThemeRepresentInfo=a,r.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDotDensityTheme=void 0;var r=n(0),i=n(12);n(50);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.Expression=void 0!==n.Expression?n.Expression:"",r.Info=void 0!==n.Info?n.Info:null,r.Value=void 0!==n.Value?n.Value:null,r.Type="CDotDensityTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CDotDensityTheme=o,r.Zondy.Object.Theme.CDotDensityTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFourColorTheme=void 0;var r=n(0),i=n(12);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.ClrInfo=void 0!==n.ClrInfo?n.ClrInfo:[25,57,89,121],r.Type="CFourColorTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CFourColorTheme=o,r.Zondy.Object.Theme.CFourColorTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGraduatedSymbolTheme=void 0;var r=n(0),i=n(12);n(50);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.BaseValue=void 0!==n.BaseValue?n.BaseValue:141e-6,r.DispMinus=void 0!==n.DispMinus&&n.DispMinus,r.DispZero=void 0!==n.DispZero&&n.DispZero,r.Expression=void 0!==n.Expression?n.Expression:null,r.MinusPntInfo=void 0!==n.MinusPntInfo?n.MinusPntInfo:null,r.PlusPntInfo=void 0!==n.PlusPntInfo?n.PlusPntInfo:null,r.ZeroPntInfo=void 0!==n.ZeroPntInfo?n.ZeroPntInfo:null,r.Type="CGraduatedSymbolTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CGraduatedSymbolTheme=o,r.Zondy.Object.Theme.CGraduatedSymbolTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMultiClassTheme=void 0;var r=n(0),i=n(12);n(16),n(154);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,r.ExpInfoArr=void 0!==n.ExpInfoArr?n.ExpInfoArr:null,r.MultiClassThemeInfoArr=void 0!==n.MultiClassThemeInfoArr?n.MultiClassThemeInfoArr:null,r.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,r.Type="CMultiClassTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CMultiClassTheme=o,r.Zondy.Object.Theme.CMultiClassTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpInfo=void 0;var r=n(0),i=n(1),o=function(t,e,n){var r=void 0!==n?n:{};(0,i.extend)(this,r),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};e.ExpInfo=o,r.Zondy.Object.Theme.ExpInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRandomTheme=void 0;var r=n(0),i=n(12);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.Type="CRandomTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CRandomTheme=o,r.Zondy.Object.Theme.CRandomTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeTheme=void 0;var r=n(0),i=n(12),o=n(141);n(16),n(157);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.AllOtherDataItemInfoSource=void 0!==n.AllOtherDataItemInfoSource?n.AllOtherDataItemInfoSource:o.CAllOtherDataItemInfoSource.DefaultThemeInfo,r.Expression=void 0!==n.Expression?n.Expression:"",r.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,r.RangeThemeInfoArr=void 0!==n.RangeThemeInfoArr?n.RangeThemeInfoArr:null,r.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,r.Type="CRangeTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CRangeTheme=s,r.Zondy.Object.Theme.CRangeTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeThemeInfo=void 0;var r=n(0),i=n(16);var o=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.StartValue=void 0!==t?t:"",o.EndValue=void 0!==n?n:"",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CThemeInfo),e}();e.CRangeThemeInfo=o,r.Zondy.Object.Theme.CRangeThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSimpleTheme=void 0;var r=n(0),i=n(12),o=n(16);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.ThemeInfo=void 0!==n.ThemeInfo?n.ThemeInfo:new o.CThemeInfo,r.Type="CSimpleTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CSimpleTheme=s,r.Zondy.Object.Theme.CSimpleTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueTheme=void 0;var r=n(0),i=n(12);n(16),n(160);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,r.Expression=void 0!==n.Expression?n.Expression:"",r.UniqueThemeInfoArr=void 0!==n.UniqueThemeInfoArr?n.UniqueThemeInfoArr:null,r.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,r.Type="CUniqueTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CTheme),e}();e.CUniqueTheme=o,r.Zondy.Object.Theme.CUniqueTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueThemeInfo=void 0;var r=n(0),i=n(16);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.Value=void 0!==t?t:"",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CThemeInfo),e}();e.CUniqueThemeInfo=o,r.Zondy.Object.Theme.CUniqueThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfo=void 0;var r=n(0),i=(n(86),function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null});e.FolderInfo=i,r.Zondy.Object.Theme.FolderInfo=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=void 0;var r=n(0),i=(n(12),function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null});e.ThemesInfo=i,r.Zondy.Object.Theme.ThemesInfo=i},function(t,e,n){t.exports=n(335)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(8),i=n(339),o=n(341),s=n(342),a=n(343),u=n(166);t.exports=function(t){return new Promise(function(e,l){var c=t.data,h=t.headers;r.isFormData(c)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+d)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:t,request:f};i(e,l,r),f=null}},f.onerror=function(){l(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=n(344),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(h,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),l(t),f=null)}),void 0===c&&(c=null),f.send(c)})}},function(t,e,n){"use strict";var r=n(340);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRenderer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(170);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.CLASS_NAME="Zondy.LevelRenderer"}return r(t,[{key:"destroy",value:function(){this.dispose()}},{key:"init",value:function(e){var n=new s.Render((0,o.newGuid)(),e);return t._instances[n.id]=n,n}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var n in t._instances)t._instances[n].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}]),t}();e.LevelRenderer=a,i.Zondy.LevelRenderer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Render=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(171),a=n(180),u=n(181),l=n(182);var c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new s.Storage,this.painter=new a.Painter(n,this.storage),this.handler=new u.Handler(n,this.storage,this.painter),this.animatingElements=[],this.animation=new l.Animation({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="Zondy.LevelRenderer.Render"}return r(t,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,n){if("string"==typeof t&&(t=this.storage.get(t)),t){var r;if(e){for(var i=e.split("."),s=t,a=0,u=i.length;a<u;a++)s&&(s=s[i[a]]);s&&(r=s)}else r=t;if(!r)return;var l=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(0,o.indexOf)(l,t);l.splice(e,1)}})}}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,n){return this.painter.toDataURL(t,e,n)}},{key:"shapeToImage",value:function(t,e,n){var r=(0,o.newGuid)();return this.painter.shapeToImage(r,t,e,n)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var n=0,r=e.length;n<r;n++)t.storage.mod(e[n].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}]),t}();e.Render=c,i.Zondy.LevelRenderer.Render=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(172);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="Zondy.LevelRenderer.Storage"}return r(t,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var i=this._hoverElements[n];if(i.updateTransform(),t(i))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var s=0,a=this._shapeList.length;s<a;s++)if(t(this._shapeList[s]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var n=[],r=this._hoverElements.length,i=0;i<r;i++){n.push(this._hoverElements[i]);var o=this._hoverElements[i].hoverConnect;if(o)for(var s,a=0,u=(o=o instanceof Array?o:[o]).length;a<u;a++)(s=o[a].id?o[a]:this.get(o[a]))&&n.push(s)}if(n.sort(t.shapeCompareFunc),e)for(var l=0,c=n.length;l<c;l++)n[l].updateTransform();return n}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,n=0;n<e;n++){var r=this._roots[n];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var i=this._shapeList.length,o=0;o<i;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"===t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var n=0;n<t._children.length;n++){var r=t._children[n];r.__dirty=t.__dirty||r.__dirty,this._updateAndAddShape(r,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var n=this._elements[t];if(n&&(n.modSelf(),e))if(e.parent||e._storage||e.__startClip){var r={};for(var i in e)"parent"!==i&&"_storage"!==i&&"__startClip"!==i&&e.hasOwnProperty(i)&&(r[i]=e[i]);(0,o.merge)(n,r,!0)}else(0,o.merge)(n,e,!0);return this}},{key:"drift",value:function(t,e,n){var r=this._elements[t];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(e=0),(!r.ondrift||r.ondrift&&!r.ondrift(e,n))&&r.drift(e,n)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof s.Group&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof s.Group&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var r=t.length,i=0;i<r;i++)this.delRoot(t[i]);else{var a;a="string"==typeof t?this._elements[t]:t;var u=(0,o.indexOf)(this._roots,a);u>=0&&(this.delFromMap(a.id),this._roots.splice(u,1),a instanceof s.Group&&a.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof s.Group&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof s.Group&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}]),t}();e.Storage=a,i.Zondy.LevelRenderer.Storage=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(40),a=n(51);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.id=null,n.type="group",n.clipShape=null,n._children=[],n._storage=null,n.__dirty=!0,n.ignore=!1,(0,o.extend)(n,t),n.id=n.id||(0,o.newGuid)(),n.CLASS_NAME="Zondy.LevelRenderer.Group",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.mixin)(s.Eventful,a.Transformable)),r(e,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!==this&&t.parent!==this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var n=(0,o.indexOf)(this._children,t);this._children.splice(n,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i)}}},{key:"traverse",value:function(t,e){for(var n=!!e,r=0;r<this._children.length;r++){var i=this._children[r];n?t.call(e,i):t(i),"group"===i.type&&i.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToMap(n),"group"===n.type&&n.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),e}();e.Group=u,i.Zondy.LevelRenderer.Group=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(26),s=n(52);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new o.Util,this.curve=new s.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}return r(t,[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,n,r){if(!e||!t)return!1;var i=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,n,r);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,n,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var s="out"===e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,n,r,s);case"rose":return this.isInsideCircle(e,n,r,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,n,r){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,n,r):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,n,r);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,n,r);case"smicbroken-line":var i=n,o=r;return t.refOriginalPosition&&(i=n-t.refOriginalPosition[0],o=r-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,i,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,n,r);case"smicring":var s=e.x,a=e.y;return t.refOriginalPosition&&(s=e.x+t.refOriginalPosition[0],a=e.y+t.refOriginalPosition[1]),this.isInsideRing(s,a,e.r0,e.r,n,r);case"circle":return this.isInsideCircle(e.x,e.y,e.r,n,r);case"smicpoint":var u=n,l=r;return t.refOriginalPosition&&(u=n-t.refOriginalPosition[0],l=r-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,h=-h),this.isInsideSector(e.x,e.y,e.r0,e.r,c,h,!e.clockWise,n,r);case"smicsector":var f=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(f=-f,p=-p);var d=e.x,y=e.y;return t.refOriginalPosition&&(d=e.x+t.refOriginalPosition[0],y=e.y+t.refOriginalPosition[1]),this.isInsideSector(d,y,e.r0,e.r,f,p,!e.clockWise,n,r);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,n,r);case"smicpolygon":var g=n,v=r;if(t.refOriginalPosition&&(g=n-t.refOriginalPosition[0],v=r-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,g,v),_=t.holePolygonPointLists,b=!1,S=0,x=_.length;S<x;S++){var w=_[S];!0===this.isInsidePolygon(w,g,v)&&(b=!0)}return!0===m&&!1===b}return this.isInsidePolygon(e.pointList,g,v);case"text":var P=e.__rect||t.getRect(e);return this.isInsideRect(P.x,P.y,P.width,P.height,n,r);case"smictext":var C=t.getTextBackground(e);return this.isInsidePolygon(C,n,r);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,n,r);case"smicimage":var O=e.x,T=e.y;return t.refOriginalPosition&&(O=e.x+t.refOriginalPosition[0],T=e.y+t.refOriginalPosition[1]),this.isInsideRect(O,T,e.width,e.height,n,r)}}},{key:"_buildPathMethod",value:function(t,e,n,r,i){return e.beginPath(),t.buildPath(e,n),e.closePath(),e.isPointInPath(r,i)}},{key:"isOutside",value:function(t,e,n,r){return!this.isInside(t,e,n,r)}},{key:"isInsideLine",value:function(t,e,n,r,i,o,s){if(0===i)return!1;var a=Math.max(i,5),u=0;if(s>e+a&&s>r+a||s<e-a&&s<r-a||o>t+a&&o>n+a||o<t-a&&o<n-a)return!1;if(t===n)return Math.abs(o-t)<=a/2;var l=(u=(e-r)/(t-n))*o-s+(t*r-n*e)/(t-n);return l*l/(u*u+1)<=a/2*a/2}},{key:"isInsideCubicStroke",value:function(t,e,n,r,i,o,s,a,u,l,c){if(0===u)return!1;var h=Math.max(u,5);return!(c>e+h&&c>r+h&&c>o+h&&c>a+h||c<e-h&&c<r-h&&c<o-h&&c<a-h||l>t+h&&l>n+h&&l>i+h&&l>s+h||l<t-h&&l<n-h&&l<i-h&&l<s-h)&&this.curve.cubicProjectPoint(t,e,n,r,i,o,s,a,l,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(t,e,n,r,i,o,s,a,u){if(0===s)return!1;var l=Math.max(s,5);return!(u>e+l&&u>r+l&&u>o+l||u<e-l&&u<r-l&&u<o-l||a>t+l&&a>n+l&&a>i+l||a<t-l&&a<n-l&&a<i-l)&&this.curve.quadraticProjectPoint(t,e,n,r,i,o,a,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,n,r,i,o,s,a,u){var l=this.PI2;if(0===s)return!1;var c=Math.max(s,5);a-=t,u-=e;var h=Math.sqrt(a*a+u*u);if(h-c>n||h+c<n)return!1;if(Math.abs(r-i)>=l)return!0;if(o){var f=r;r=this.normalizeRadian(i),i=this.normalizeRadian(f)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=l);var p=Math.atan2(u,a);return p<0&&(p+=l),p>=r&&p<=i||p+l>=r&&p+l<=i}},{key:"isInsideBrokenLine",value:function(t,e,n,r){for(var i=Math.max(e,10),o=0,s=t.length-1;o<s;o++){var a=t[o][0],u=t[o][1],l=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(a,u,l,c,i,n,r))return!0}return!1}},{key:"isInsideRing",value:function(t,e,n,r,i,o){var s=(i-t)*(i-t)+(o-e)*(o-e);return s<r*r&&s>n*n}},{key:"isInsideRect",value:function(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}},{key:"isInsideCircle",value:function(t,e,n,r,i){return(r-t)*(r-t)+(i-e)*(i-e)<n*n}},{key:"isInsideSector",value:function(t,e,n,r,i,o,s,a,u){return this.isInsideArcStroke(t,e,(n+r)/2,i,o,s,r-n,a,u)}},{key:"isInsidePolygon",value:function(t,e,n){for(var r=t.length,i=0,o=0,s=r-1;o<r;o++){var a=t[s][0],u=t[s][1],l=t[o][0],c=t[o][1];i+=this.windingLine(a,u,l,c,e,n),s=o}return 0!==i}},{key:"windingLine",value:function(t,e,n,r,i,o){return o>e&&o>r||o<e&&o<r?0:r==e?0:(o-e)/(r-e)*(n-t)+t>i?r<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,n,r,i,o,s,a,u,l){var c=this.curve,h=this.roots,f=this.extrema;if(l>e&&l>r&&l>o&&l>a||l<e&&l<r&&l<o&&l<a)return 0;var p=c.cubicRootAt(e,r,o,a,l,h);if(0===p)return 0;for(var d,y,g=0,v=-1,m=0;m<p;m++){var _=h[m];c.cubicAt(t,n,i,s,_)<u||(v<0&&(v=c.cubicExtrema(e,r,o,a,f),f[1]<f[0]&&v>1&&this.swapExtrema(),d=c.cubicAt(e,r,o,a,f[0]),v>1&&(y=c.cubicAt(e,r,o,a,f[1]))),2===v?_<f[0]?g+=d<e?1:-1:_<f[1]?g+=y<d?1:-1:g+=a<y?1:-1:_<f[0]?g+=d<e?1:-1:g+=a<d?1:-1)}return g}},{key:"windingQuadratic",value:function(t,e,n,r,i,o,s,a){var u=this.curve,l=this.roots;if(a>e&&a>r&&a>o||a<e&&a<r&&a<o)return 0;var c=u.quadraticRootAt(e,r,o,a,l);if(0===c)return 0;var h=u.quadraticExtremum(e,r,o);if(h>=0&&h<=1){for(var f=0,p=u.quadraticAt(e,r,o,h),d=0;d<c;d++){u.quadraticAt(t,n,i,l[d])>s||(l[d]<h?f+=p<e?1:-1:f+=o<p?1:-1)}return f}return u.quadraticAt(t,n,i,l[0])>s?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,n,r,i,o,s,a){var u=this.roots,l=this.PI2;if((a-=e)>n||a<-n)return 0;var c=Math.sqrt(n*n-a*a);if(u[0]=-c,u[1]=c,Math.abs(r-i)>=l){r=0,i=l;var h=o?1:-1;return s>=u[0]+t&&s<=u[1]+t?h:0}if(o){var f=r;r=this.normalizeRadian(i),i=this.normalizeRadian(f)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=l);for(var p=0,d=0;d<2;d++){var y=u[d];if(y+t>s){var g=Math.atan2(a,y),v=o?1:-1;g<0&&(g=l+g),(g>=r&&g<=i||g+l>=r&&g+l<=i)&&(g>Math.PI/2&&g<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(t,e,n,r,i){for(var o=0,s=0,a=0,u=0,l=0,c=!0,h=!0,f="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,d=0;d<t.length;d++){var y=t[d],g=y.points;if(c||"M"===y.command){if(d>0&&(p&&(o+=this.windingLine(s,a,u,l,r,i)),0!==o))return!0;u=g[g.length-2],l=g[g.length-1],c=!1,h&&"A"!==y.command&&(h=!1,s=u,a=l)}switch(y.command){case"M":s=g[0],a=g[1];break;case"L":if(f&&this.isInsideLine(s,a,g[0],g[1],e,r,i))return!0;p&&(o+=this.windingLine(s,a,g[0],g[1],r,i)),s=g[0],a=g[1];break;case"C":if(f&&this.isInsideCubicStroke(s,a,g[0],g[1],g[2],g[3],g[4],g[5],e,r,i))return!0;p&&(o+=this.windingCubic(s,a,g[0],g[1],g[2],g[3],g[4],g[5],r,i)),s=g[4],a=g[5];break;case"Q":if(f&&this.isInsideQuadraticStroke(s,a,g[0],g[1],g[2],g[3],e,r,i))return!0;p&&(o+=this.windingQuadratic(s,a,g[0],g[1],g[2],g[3],r,i)),s=g[2],a=g[3];break;case"A":var v=g[0],m=g[1],_=g[2],b=g[3],S=g[4],x=g[5],w=Math.cos(S)*_+v,P=Math.sin(S)*b+m;h?(h=!1,u=w,l=P):o+=this.windingLine(s,a,w,P);var C=(r-v)*b/_+v;if(f&&this.isInsideArcStroke(v,m,b,S,S+x,1-g[7],e,C,i))return!0;p&&(o+=this.windingArc(v,m,b,S,S+x,1-g[7],C,i)),s=Math.cos(S+x)*_+v,a=Math.sin(S+x)*b+m;break;case"z":if(f&&this.isInsideLine(s,a,u,l,e,r,i))return!0;c=!0}}return p&&(o+=this.windingLine(s,a,u,l,r,i)),0!==o}},{key:"getTextWidth",value:function(t,e){var n=t+":"+e;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var r=0,i=0,o=(t=(t+"").split("\n")).length;i<o;i++)r=Math.max(this._ctx.measureText(t[i]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(t,e){var n=t+":"+e;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}]),t}();e.Area=a,i.Zondy.LevelRenderer.Tool.Area=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeBoundingBox=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(52),s=n(53);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}return r(t,[{key:"computeBoundingBox",value:function(t,e,n){if(0!==t.length){for(var r=t[0][0],i=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var u=t[a];u[0]<r&&(r=u[0]),u[0]>i&&(i=u[0]),u[1]<o&&(o=u[1]),u[1]>s&&(s=u[1])}e[0]=r,e[1]=o,n[0]=i,n[1]=s}}},{key:"cubeBezier",value:function(t,e,n,r,i,s){var a=new o.Curve,u=[];a.cubicExtrema(t[0],e[0],n[0],r[0],u);for(var l=0;l<u.length;l++)u[l]=a.cubicAt(t[0],e[0],n[0],r[0],u[l]);var c=[];a.cubicExtrema(t[1],e[1],n[1],r[1],c);for(var h=0;h<c.length;h++)c[h]=a.cubicAt(t[1],e[1],n[1],r[1],c[h]);u.push(t[0],r[0]),c.push(t[1],r[1]);var f=Math.min.apply(null,u),p=Math.max.apply(null,u),d=Math.min.apply(null,c),y=Math.max.apply(null,c);i[0]=f,i[1]=d,s[0]=p,s[1]=y}},{key:"quadraticBezier",value:function(t,e,n,r,i){var s=new o.Curve,a=s.quadraticExtremum(t[0],e[0],n[0]),u=s.quadraticExtremum(t[1],e[1],n[1]),l=1-(a=Math.max(Math.min(a,1),0)),c=1-(u=Math.max(Math.min(u,1),0)),h=l*l*t[0]+2*l*a*e[0]+a*a*n[0],f=l*l*t[1]+2*l*a*e[1]+a*a*n[1],p=c*c*t[0]+2*c*u*e[0]+u*u*n[0],d=c*c*t[1]+2*c*u*e[1]+u*u*n[1];r[0]=Math.min(t[0],n[0],h,p),r[1]=Math.min(t[1],n[1],f,d),i[0]=Math.max(t[0],n[0],h,p),i[1]=Math.max(t[1],n[1],f,d)}},{key:"arc",value:function(t,e,n,r,i,o,a,u){var l=new s.Vector,c=l.create(),h=l.create(),f=l.create();if(c[0]=Math.cos(r)*n+t,c[1]=Math.sin(r)*n+e,h[0]=Math.cos(i)*n+t,h[1]=Math.sin(i)*n+e,l.min(a,c,h),l.max(u,c,h),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),r>i&&!o?i+=2*Math.PI:r<i&&o&&(r+=2*Math.PI),o){var p=i;i=r,r=p}for(var d=0;d<i;d+=Math.PI/2)d>r&&(f[0]=Math.cos(d)*n+t,f[1]=Math.sin(d)*n+e,l.min(a,f,a),l.max(u,f,u))}}]),t}();e.ComputeBoundingBox=a,i.Zondy.LevelRenderer.Tool.ComputeBoundingBox=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Env=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;return function(t){var n=e.os={},r=e.browser={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=t.match(/(iPad).*OS\s([\d_]+)/),a=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&t.match(/TouchPad/),h=t.match(/Kindle\/([\d.]+)/),f=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),_=t.match(/MSIE ([\d.]+)/),b=i&&t.match(/Mobile\//)&&!v,S=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v;return(r.webkit=!!i)&&(r.version=i[1]),o&&(n.android=!0,n.version=o[2]),u&&!a&&(n.ios=n.iphone=!0,n.version=u[2].replace(/_/g,".")),s&&(n.ios=n.ipad=!0,n.version=s[2].replace(/_/g,".")),a&&(n.ios=n.ipod=!0,n.version=a[3]?a[3].replace(/_/g,"."):null),l&&(n.webos=!0,n.version=l[2]),c&&(n.touchpad=!0),p&&(n.blackberry=!0,n.version=p[2]),d&&(n.bb10=!0,n.version=d[2]),y&&(n.rimtabletos=!0,n.version=y[2]),g&&(r.playbook=!0),h&&(n.kindle=!0,n.version=h[1]),f&&(r.silk=!0,r.version=f[1]),!f&&n.android&&t.match(/Kindle Fire/)&&(r.silk=!0),v&&(r.chrome=!0,r.version=v[1]),m&&(r.firefox=!0,r.version=m[1]),_&&(r.ie=!0,r.version=_[1]),b&&(t.match(/Safari/)||n.ios)&&(r.safari=!0),S&&(r.webview=!0),_&&(r.ie=!0,r.version=_[1]),n.tablet=!!(s||g||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(o||u||l||p||d||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:r,os:n,canvasSupported:!!document.createElement("canvas").getContext}}(navigator.userAgent)}return r(t,[{key:"destory",value:function(){return!0}}]),t}();e.Env=o,i.Zondy.LevelRenderer.Tool.Env=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}return r(t,[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}]),t}();e.Event=o,i.Zondy.LevelRenderer.Tool.Event=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Http=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}return i(t,[{key:"get",value:function(t,e,n){if("object"===(void 0===t?"undefined":r(t))){var i=t;t=i.url,e=i.onsuccess,n=i.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):n&&n(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),t}();e.Http=s,o.Zondy.LevelRenderer.Tool.Http=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}return r(t,[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}]),t}();e.Math=o,i.Zondy.LevelRenderer.Tool.Math=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}return r(t,[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=e[1]*n[0]+e[3]*n[1],t[2]=e[0]*n[2]+e[2]*n[3],t[3]=e[1]*n[2]+e[3]*n[3],t[4]=e[0]*n[4]+e[2]*n[5]+e[4],t[5]=e[1]*n[4]+e[3]*n[5]+e[5],t}},{key:"translate",value:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}},{key:"rotate",value:function(t,e,n){var r=e[0],i=e[2],o=e[4],s=e[1],a=e[3],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*l,t[1]=-r*l+s*c,t[2]=i*c+a*l,t[3]=-i*l+c*a,t[4]=c*o+l*u,t[5]=c*u-l*o,t}},{key:"scale",value:function(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}},{key:"invert",value:function(t,e){var n=e[0],r=e[2],i=e[4],o=e[1],s=e[3],a=e[5],u=n*s-o*r;return u?(u=1/u,t[0]=s*u,t[1]=-o*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*a-s*i)*u,t[5]=(o*i-n*a)*u,t):null}},{key:"mulVector",value:function(t,e,n){var r=e[0],i=e[2],o=e[4],s=e[1],a=e[3],u=e[5];return t[0]=n[0]*r+n[1]*i+o,t[1]=n[0]*s+n[1]*a+u,t}}]),t}();e.Matrix=o,i.Zondy.LevelRenderer.Tool.Matrix=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaintLayer=e.Painter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(26),a=n(51),u=n(92),l=n(9),c=n(93);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(){function t(e,n){h(this,t),this.root=e,this.storage=n,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="Zondy.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom((0,o.newGuid)(),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var i=new p((0,o.newGuid)(),this);this._layers.hover=i,r.appendChild(i.dom),i.initContext(),i.dom.onselectstart=a,i.dom.style["-webkit-user-select"]="none",i.dom.style["user-select"]="none",i.dom.style["-webkit-touch-callout"]="none";var s=this;function a(){return!1}this.updatePainter=function(t,e){s.refreshShapes(t,e)}}return r(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var n=this.storage.getShapeList(!0);return this._paintList(n,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var n,r,i;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var s=[],a=0,c=t.length;a<c;a++){var h=t[a];if(r!==h.zlevel&&(n&&n.needTransform&&i.restore(),i=(n=this.getLayer(h.zlevel)).ctx,r=h.zlevel,n.unusedCount=0,(n.dirty||e)&&n.clear(),n.needTransform&&(i.save(),n.setTransform(i))),i&&h.__startClip){var f=h.__startClip;if(i.save(),f.needTransform){var p=f.transform;l.SUtil.Util_matrix.invert(s,p),i.transform(p[0],p[1],p[2],p[3],p[4],p[5])}if(i.beginPath(),f.buildPath(i,f.style),i.clip(),f.needTransform){var d=s;i.transform(d[0],d[1],d[2],d[3],d[4],d[5])}}if((n&&n.dirty||e)&&!h.invisible&&(!h.onbrush||h.onbrush&&!h.onbrush(i,!1)))if(u.Config.catchBrushException)try{h.brush(i,!1,this.updatePainter)}catch(t){}else h.brush(i,!1,this.updatePainter);i&&h.__stopClip&&i.restore(),h.__dirty=!1}for(var y in i&&n&&n.needTransform&&i.restore(),this._layers)if("hover"!==y){var g=this._layers[y];g.dirty=!1,1===g.unusedCount&&g.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var n=this._zlevelList.length,r=null,i=-1;if(n>0&&t>this._zlevelList[0]){for(i=0;i<n-1&&!(this._zlevelList[i]<t&&this._zlevelList[i+1]>t);i++);r=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,t),e=new p((0,o.newGuid)(),this);var a=r?r.dom:this._bgDom;a.nextSibling?a.parentNode.insertBefore(e.dom,a.nextSibling):a.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new s.Util).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,n={};for(var r in e)"hover"!==r&&(n[r]=e[r].elCount,e[r].elCount=0);for(var i=0;i<t.length;i++){var o=t[i],s=e[o.zlevel];if(s){if(s.elCount++,s.dirty)continue;s.dirty=o.__dirty}}for(var a in e)"hover"!==a&&n[a]!==e[a].elCount&&(e[a].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];this.storage.mod(i.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!==t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new s.Util).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var n=this._layers[t];n&&(new s.Util).merge(n,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new s.Util).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,n=t.length;e<n;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),n=this._getHeight();if(t.style.display="",this._width!==e||n!==this._height){for(var r in this._width=e,this._height=n,t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers[r].resize(e,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,n,r){var i=t.createDom((0,o.newGuid)(),"canvas",this);this._bgDom.appendChild(i);var s=i.getContext("2d");1!==t.devicePixelRatio&&s.scale(t.devicePixelRatio,t.devicePixelRatio),s.fillStyle=n||"#fff",s.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),s.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(s,!1)))if(u.Config.catchBrushException)try{t.brush(s,!1,a.updatePainter)}catch(t){}else t.brush(s,!1,a.updatePainter)},{normal:"up",update:!0});var l=i.toDataURL(e,r);return s=null,this._bgDom.removeChild(i),l}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var n=this.getLayer(t.zlevel);if(n.needTransform&&(e.save(),n.setTransform(e)),u.Config.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(t){}else t.brush(e,!0,this.updatePainter);n.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,n,r,i){var o=document.createElement("canvas"),s=o.getContext("2d"),a=i||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=r+"px",o.setAttribute("width",n*a),o.setAttribute("height",r*a),s.clearRect(0,0,n*a,r*a);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s,!1);var l=new c.SmicImage({id:t,style:{x:0,y:0,image:o}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(n,r,i,o){return e._shapeToImage(n,r,i,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,n,r){var i=document.createElement(n),o=r._width,s=r._height;return i.style.position="absolute",i.style.left=0,i.style.top=0,i.style.width=o+"px",i.style.height=s+"px",i.setAttribute("width",o*t.devicePixelRatio),i.setAttribute("height",s*t.devicePixelRatio),i.setAttribute("id",e),i}}]),t}(),p=function(t){function e(t,n){h(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.dom=null,r.domBack=null,r.ctxBack=null,r.painter=n,r.unusedCount=0,r.config=null,r.dirty=!0,r.elCount=0,r.clearColor=0,r.motionBlur=!1,r.lastFrameAlpha=.7,r.zoomable=!1,r.panable=!1,r.maxZoom=1/0,r.minZoom=0,r.ctx=null,r.dom=f.createDom((0,o.newGuid)(),"canvas",n),r.dom.onselectstart=function(){return!1},r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none",r.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Transformable),r(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,a.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!==f.devicePixelRatio&&this.ctx.scale(f.devicePixelRatio,f.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=f.createDom((0,o.newGuid)(),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!==f.devicePixelRatio&&this.ctxBack.scale(f.devicePixelRatio,f.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*f.devicePixelRatio),this.dom.setAttribute("height",e*f.devicePixelRatio),1!==f.devicePixelRatio&&this.ctx.scale(f.devicePixelRatio,f.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*f.devicePixelRatio),this.domBack.setAttribute("height",e*f.devicePixelRatio),1!==f.devicePixelRatio&&this.ctxBack.scale(f.devicePixelRatio,f.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,n=t.width,r=t.height,i=this.clearColor,o=this.motionBlur,s=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,n/f.devicePixelRatio,r/f.devicePixelRatio)),i?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,n/f.devicePixelRatio,r/f.devicePixelRatio),e.restore()):e.clearRect(0,0,n/f.devicePixelRatio,r/f.devicePixelRatio),o){var a=this.domBack;e.save(),e.globalAlpha=s,e.drawImage(a,0,0,n/f.devicePixelRatio,r/f.devicePixelRatio),e.restore()}}}]),e}();e.Painter=f,i.Zondy.LevelRenderer.Painter=f,e.PaintLayer=p,i.Zondy.LevelRenderer.PaintLayer=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Handler=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(40),s=n(92),a=n(9);var u=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));i.root=t,i.storage=n,i.painter=r,i._lastX=0,i._lastY=0,i._mouseX=0,i._mouseY=0,i._findHover=null,i._domHover=null,i._findHover=function(t,e){return function(n,r,i){return t.call(e,n,r,i)}}(function(t,e,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id===t.id||t.isSilent())return!1;var i=r._event;if(t.isCover(e,n)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,s=null;t.refDataHoverGroup&&(s=t.refDataHoverGroup);for(var a=r.storage._shapeList,u=0,l=a.length;u<l;u++){var c=a[u];c.refDataID&&o===c.refDataID&&(s?c.refDataHoverGroup&&s===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(t);for(var h=t.parent;h;){if(h.clipShape&&!h.clipShape.isCover(r._mouseX,r._mouseY))return!1;h=h.parent}return r._lastHover!==t&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=t,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0}return!1},i),i._domHover=r.getDomHover(),i.CLASS_NAME="Zondy.LevelRenderer.Handler";var o={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(s.Config.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,s.Config.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,s.Config.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,n=this.painter.getLayers(),r=!1;for(var i in n)if("hover"!==i){var o=n[i],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var u=o.__zoom;u*=e,e=(u=Math.max(Math.min(o.maxZoom,u),o.minZoom))/o.__zoom,o.__zoom=u,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,o.dirty=!0,r=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=a.SUtil.Util_event.getX(t),this._mouseY=a.SUtil.Util_event.getY(t);var e=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),o=!1;for(var u in i)if("hover"!==u){var l=i[u];l.panable&&(r="move",l.position[0]+=e,l.position[1]+=n,o=!0,l.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!==this.root)for(;e&&9!==e.nodeType;){if(e===this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(s.Config.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2===this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&a.SUtil.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<s.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<s.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&a.SUtil.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(n){return t.call(e,n)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=e.length;for(;n--;){var r=e[n];t["_"+r+"Handler"]=u(o[r],t)}}(i),window.addEventListener?(window.addEventListener("resize",i._resizeHandler),a.SUtil.Util_env.os.tablet||a.SUtil.Util_env.os.phone?(t.addEventListener("touchstart",i._touchstartHandler),t.addEventListener("touchmove",i._touchmoveHandler),t.addEventListener("touchend",i._touchendHandler)):(t.addEventListener("click",i._clickHandler),t.addEventListener("dblclick",i._dblclickHandler),t.addEventListener("mousewheel",i._mousewheelHandler),t.addEventListener("mousemove",i._mousemoveHandler),t.addEventListener("mousedown",i._mousedownHandler),t.addEventListener("mouseup",i._mouseupHandler)),t.addEventListener("DOMMouseScroll",i._mousewheelHandler),t.addEventListener("mouseout",i._mouseoutHandler)):(window.attachEvent("onresize",i._resizeHandler),t.attachEvent("onclick",i._clickHandler),t.ondblclick=i._dblclickHandler,t.attachEvent("onmousewheel",i._mousewheelHandler),t.attachEvent("onmousemove",i._mousemoveHandler),t.attachEvent("onmouseout",i._mouseoutHandler),t.attachEvent("onmousedown",i._mousedownHandler),t.attachEvent("onmouseup",i._mouseupHandler)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Eventful),r(e,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,o.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var n=s.Config.EVENT;switch(t){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),a.SUtil.Util_env.os.tablet||a.SUtil.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget===e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var n=e;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,s.Config.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,s.Config.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,s.Config.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,n,r){var i="on"+e,o={type:e,event:n,target:t,cancelBubble:!1},s=t;for(r&&(o.dragged=r);s&&(s[i]&&(o.cancelBubble=s[i](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):r||this.dispatch(e,{type:e,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=a.SUtil.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],i=n.length-1;i>=0;i--){var o=n[i];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),r[0]=this._mouseX,r[1]=this._mouseY,t.needTransform&&(a.SUtil.Util_matrix.invert(e,t.transform),a.SUtil.Util_vector.applyTransform(r,r,e))),this._findHover(o,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<e.length;n++){var r=e[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var n="touchend"!==t.type?t.targetTouches[0]:t.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();t.zrenderX=n.clientX-r.left,t.zrenderY=n.clientY-r.top}}else{var i=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;i&&i!==this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+i.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+i.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),e}();e.Handler=u,i.Zondy.LevelRenderer.Handler=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.Animation=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),s=n(1),a=n(26),u=n(40),l=n(183),c=n(9);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(t){function e(t){h(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,(0,s.extend)(n,t),n.CLASS_NAME="Zondy.LevelRenderer.Animation",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Eventful),i(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new a.Util).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,n=this._clips,r=n.length,i=[],o=[],s=0;s<r;s++){var a=n[s],u=a.step(t);u&&(i.push(u),o.push(a))}this.stage.update&&this.stage.update();for(var l=0;l<r;)n[l]._needsRemove?(n[l]=n[r-1],n.pop(),r--):l++;r=i.length;for(var c=0;c<r;c++)o[c].fire(i[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function n(){e._running&&(e._update(),t(n))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var n=new p(t,(e=e||{}).loop,e.getter,e.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(t,e,n){return(e-t)*n+t}},{key:"_interpolateArray",value:function(t,n,r,i,o){var s=t.length;if(1===o)for(var a=0;a<s;a++)i[a]=e._interpolateNumber(t[a],n[a],r);else for(var u=t[0].length,l=0;l<s;l++)for(var c=0;c<u;c++)i[l][c]=e._interpolateNumber(t[l][c],n[l][c],r)}},{key:"_isArrayLike",value:function(t){switch(void 0===t?"undefined":r(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,n,r,i,o,s,a,u,l){var c=t.length;if(1===l)for(var h=0;h<c;h++)u[h]=e._catmullRomInterpolate(t[h],n[h],r[h],i[h],o,s,a);else for(var f=t[0].length,p=0;p<c;p++)for(var d=0;d<f;d++)u[p][d]=e._catmullRomInterpolate(t[p][d],n[p][d],r[p][d],i[p][d],o,s,a)}},{key:"_catmullRomInterpolate",value:function(t,e,n,r,i,o,s){var a=.5*(n-t),u=.5*(r-e);return(2*(e-n)+a+u)*s+(-3*(e-n)-2*a-u)*o+a*i+e}},{key:"_cloneValue",value:function(t){var n=Array.prototype.slice;if(e._isArrayLike(t)){var r=t.length;if(e._isArrayLike(t[0])){for(var i=[],o=0;o<r;o++)i.push(n.call(t[o]));return i}return n.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(),p=function(){function t(e,n,r,i){h(this,t),this._tracks={},this._target=e,this._loop=n||!1,this._getter=r||function(t,e){return t[e]},this._setter=i||function(t,e,n){t[e]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator"}return i(t,[{key:"when",value:function(t,e){for(var n in e)this._tracks[n]||(this._tracks[n]=[],0!==t&&this._tracks[n].push({time:0,value:f._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(t,10),value:e[n]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,n=this._setter,r=this._getter,i=e._onframeList.length,o="spline"===t,s=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,n=0;n<t;n++)e._doneList[n].call(e)}},a=function(a,u){var h=a.length;if(h){var p=a[0].value,d=f._isArrayLike(p),y=!1,g=d&&f._isArrayLike(p[0])?2:1;a.sort(function(t,e){return t.time-e.time});for(var v=a[h-1].time,m=[],_=[],b=0;b<h;b++){m.push(a[b].time/v);var S=a[b].value;"string"==typeof S&&(0===(S=c.SUtil.Util_color.toArray(S)).length&&(S[0]=S[1]=S[2]=0,S[3]=1),y=!0),_.push(S)}var x,w,P,C,O,T,E,L=0,M=0;if(y)var I=[0,0,0,0];var N=new l.Clip({target:e._target,life:v,loop:e._loop,delay:e._delay,onframe:function(t,s){if(s<M){for(x=Math.min(L+1,h-1),w=x;w>=0&&!(m[w]<=s);w--);w=Math.min(w,h-2)}else{for(w=L;w<h&&!(m[w]>s);w++);w=Math.min(w-1,h-2)}L=w,M=s;var a=m[w+1]-m[w];if(0!==a){if(P=(s-m[w])/a,o)if(O=_[w],C=_[0===w?w:w-1],T=_[w>h-2?h-1:w+1],E=_[w>h-3?h-1:w+2],d)f._catmullRomInterpolateArray(C,O,T,E,P,P*P,P*P*P,r(t,u),g);else{var l=void 0;l=y?f.rgba2String(I):f._catmullRomInterpolate(C,O,T,E,P,P*P,P*P*P),n(t,u,l)}else if(d)f._interpolateArray(_[w],_[w+1],P,r(t,u),g);else{var c=void 0;y?(f._interpolateArray(_[w],_[w+1],P,I,1),c=f.rgba2String(I)):c=f._interpolateNumber(_[w],_[w+1],P),n(t,u,c)}for(w=0;w<i;w++)e._onframeList[w](t,s)}},ondestroy:s});t&&"spline"!==t&&(N.easing=t),e._clipList.push(N),e._clipCount++,e.animation.add(N)}};for(var u in this._tracks)a(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();e.Animation=f,o.Zondy.LevelRenderer.Animation=f,e.Animator=p,o.Zondy.LevelRenderer.Animation.Animator=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(184);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}return r(t,[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new o.Easing,n=(t-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?e[this.easing]:this.easing,i="function"==typeof r?r(n):n;return this.fire("frame",i),1===n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+t]&&this["on"+t](this._targetPool[n],e)}}]),t}();e.Clip=s,i.Zondy.LevelRenderer.Animation.Clip=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}return r(t,[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}]),t}();e.Easing=o,i.Zondy.LevelRenderer.Animation.Easing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i));return o.x=isNaN(t)?0:t,o.y=isNaN(t)?0:n,o.width=isNaN(r)?0:r,o.height=isNaN(i)?0:i,o.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Rectangle=s,i.Zondy.Feature.ShapeParameters.Rectangle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));return i.x=t,i.y=n,i.text=r,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Label",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Label=s,i.Zondy.Feature.ShapeParameters.Label=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(15);var s=function(t){function e(t,n,r,i,o,s,a,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s,a,u,l));return c.x=t,c.y=n,c.image=r,c.width=i,c.height=o,c.sx=s,c.sy=a,c.sWidth=u,c.sHeight=l,c.CLASS_NAME="Zondy.Feature.ShapeParameters.Image",c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),r(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Image=s,i.Zondy.Feature.ShapeParameters.Image=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicText=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smictext",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicText",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r.textFont&&(t.font=r.textFont),t.textAlign=r.textAlign||"start",t.textBaseline=r.textBaseline||"middle";var i,o=(r.text+"").split("\n"),a=s.SUtil.Util_area.getTextHeight("ZH",r.textFont),u=this.getRectNoRotation(r),l=r.x+n[0];i="top"===r.textBaseline?u.y:"bottom"===r.textBaseline?u.y+a:u.y+a/2;for(var c=r.x+n[0],h=r.y+n[1],f=0,p=o.length;f<p;f++){switch(r.labelRect&&(t.fillRect(u.x-2,u.y,u.width+4,u.height),t.fillStyle=r.strokeColor,t.strokeRect(u.x-2,u.y,u.width+4,u.height),t.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(c,h),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?t.strokeText(o[f],0,a*f,r.maxWidth):t.strokeText(o[f],0,a*f):"bottom"===r.textBaseline?r.maxWidth?t.strokeText(o[f],0,a*(f+1)-u.height,r.maxWidth):t.strokeText(o[f],0,a*(f+1)-u.height):r.maxWidth?t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2,r.maxWidth):t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2),t.restore()):r.maxWidth?t.strokeText(o[f],l,i,r.maxWidth):t.strokeText(o[f],l,i),this.setCtxGlobalAlpha(t,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(t.save(),t.translate(c,h),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",r)):"bottom"===r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*(f+1)-u.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*(f+1)-u.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*(f+1)-u.height),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*(f+1)-u.height),this.setCtxGlobalAlpha(t,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*(f+1)-u.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],0,a*(f+1)-u.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r)),t.restore()):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[f],l,i),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[f],l,i),this.setCtxGlobalAlpha(t,"reset",r));break;default:this.setCtxGlobalAlpha(t,"fill",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(c,h),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?t.fillText(o[f],0,a*f,r.maxWidth):t.fillText(o[f],0,a*f):"bottom"===r.textBaseline?r.maxWidth?t.fillText(o[f],0,a*(f+1)-u.height,r.maxWidth):t.fillText(o[f],0,a*(f+1)-u.height):r.maxWidth?t.fillText(o[f],0,a*(f+1)-u.height/2-a/2,r.maxWidth):t.fillText(o[f],0,a*(f+1)-u.height/2-a/2),t.restore()):r.maxWidth?t.fillText(o[f],l,i,r.maxWidth):t.fillText(o[f],l,i),this.setCtxGlobalAlpha(t,"reset",r)}i+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,n,r,i,o=this.getTextBackground(t,!0),s=0,a=o.length;s<a;s++){var u=o[s];0===s?(e=u[0],r=u[0],n=u[1],i=u[1]):(u[0]<e&&(e=u[0]),u[0]>r&&(r=u[0]),u[1]<n&&(n=u[1]),u[1]>i&&(i=u[1]))}return t.__rect={x:e,y:n,width:r-e,height:i-n},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=s.SUtil.Util_area.getTextHeight("ZH",t.textFont),i=s.SUtil.Util_area.getTextWidth(t.text,t.textFont),o=s.SUtil.Util_area.getTextHeight(t.text,t.textFont),a=t.x+n[0];"end"===t.textAlign||"right"===t.textAlign?a-=i:"center"===t.textAlign&&(a-=i/2),e="top"===t.textBaseline?t.y+n[1]:"bottom"===t.textBaseline?t.y+n[1]-o:t.y+n[1]-o/2;var u,l=!1;if(t.maxWidth){var c=parseInt(t.maxWidth);c<i&&(u=i,l=!0,i=c),a=t.x+n[0],"end"===t.textAlign||"right"===t.textAlign?a-=i:"center"===t.textAlign&&(a-=i/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(i+=u&&!0===l?r/3*(i/u):r/3));return{x:a,y:e,width:i,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if((!e||!1===e)&&t.__textBackground)return t.__textBackground;var r=this.getRectNoRotation(t),i=t.x+n[0],o=t.y+n[1],s=[];if(t.textRotation&&0!==t.textRotation){var a=t.textRotation,u=this.getRotatedLocation(r.x,r.y,i,o,a),l=this.getRotatedLocation(r.x+r.width,r.y,i,o,a),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,o,a),h=this.getRotatedLocation(r.x,r.y+r.height,i,o,a);s.push(u),s.push(l),s.push(c),s.push(h)}else{var f=[r.x,r.y],p=[r.x+r.width,r.y],d=[r.x+r.width,r.y+r.height],y=[r.x,r.y+r.height];s.push(f),s.push(p),s.push(d),s.push(y)}return t.__textBackground=s,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,n,r,i){var o,s,a=new Array;return e=-e,r=-r,i=-i,o=(t-n)*Math.cos(i/180*Math.PI)-(e-r)*Math.sin(i/180*Math.PI)+n,s=(t-n)*Math.sin(i/180*Math.PI)+(e-r)*Math.cos(i/180*Math.PI)+r,a[0]=o,a[1]=-s,a}}]),e}();e.SmicText=a,i.Zondy.LevelRenderer.SmicText=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicCircle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smiccircle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicCircle",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1];return t.moveTo(r+e.r,i),t.arc(r,i,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1],o=t.r;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-o-e/2),y:Math.round(i-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}]),e}();e.SmicCircle=s,i.Zondy.LevelRenderer.SmicCircle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRectangle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicrectangle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,i,o,s,a=this.refOriginalPosition,u=e.x+a[0],l=e.y+a[1],c=e.width,h=e.height,f=e.radius;"number"==typeof f?n=r=i=o=f:f instanceof Array?1===f.length?n=r=i=o=f[0]:2===f.length?(n=i=f[0],r=o=f[1]):3===f.length?(n=f[0],r=o=f[1],i=f[2]):(n=f[0],r=f[1],i=f[2],o=f[3]):n=r=i=o=0,n+r>c&&(n*=c/(s=n+r),r*=c/s),i+o>c&&(i*=c/(s=i+o),o*=c/s),r+i>h&&(r*=h/(s=r+i),i*=h/s),n+o>h&&(n*=h/(s=n+o),o*=h/s),t.moveTo(u+n,l),t.lineTo(u+c-r,l),0!==r&&t.quadraticCurveTo(u+c,l,u+c,l+r),t.lineTo(u+c,l+h-i),0!==i&&t.quadraticCurveTo(u+c,l+h,u+c-i,l+h),t.lineTo(u+o,l+h),0!==o&&t.quadraticCurveTo(u,l+h,u,l+h-o),t.lineTo(u,l+n),0!==n&&t.quadraticCurveTo(u,l,u+n,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+n[0],e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-e/2),y:Math.round(t.y+n[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}]),e}();e.SmicRectangle=s,i.Zondy.LevelRenderer.SmicRectangle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicSector=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicsector",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1],o=e.r0||0,a=e.r,u=e.startAngle,l=e.endAngle,c=e.clockWise||!1;u=s.SUtil.Util_math.degreeToRadian(u),l=s.SUtil.Util_math.degreeToRadian(l),c||(u=-u,l=-l);var h=s.SUtil.Util_math.cos(u),f=s.SUtil.Util_math.sin(u);t.moveTo(h*o+r,f*o+i),t.lineTo(h*a+r,f*a+i),t.arc(r,i,a,u,l,!c),t.lineTo(s.SUtil.Util_math.cos(l)*o+r,s.SUtil.Util_math.sin(l)*o+i),0!==o&&t.arc(r,i,o,l,u,c),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,n=s.SUtil.Util_vector.create(),r=s.SUtil.Util_vector.create(),i=s.SUtil.Util_vector.create(),o=s.SUtil.Util_vector.create(),a=t.x+e[0],u=t.y+e[1],l=t.r0||0,c=t.r,h=s.SUtil.Util_math.degreeToRadian(t.startAngle),f=s.SUtil.Util_math.degreeToRadian(t.endAngle),p=t.clockWise;return p||(h=-h,f=-f),l>1?s.SUtil.Util_computeBoundingBox.arc(a,u,l,h,f,!p,n,i):(n[0]=i[0]=a,n[1]=i[1]=u),s.SUtil.Util_computeBoundingBox.arc(a,u,c,h,f,!p,r,o),s.SUtil.Util_vector.min(n,n,r),s.SUtil.Util_vector.max(i,i,o),t.__rect={x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},t.__rect}}]),e}();e.SmicSector=a,i.Zondy.LevelRenderer.SmicSector=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeVector=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(27),a=n(97),u=n(96),l=n(57);function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var h=function(t){function e(t,n,r,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(!t.fGeom)return c(a);a.dataBounds=t.bound,a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=r||{},a.CLASS_NAME="Zondy.Theme.ThemeVector",a.style=r||{},i&&(0,o.copyAttributesWithClip)(a,i,["shapeOptions","dataBounds"]),s&&(0,o.copyAttributesWithClip)(a.shapeOptions,s);t.fGeom;switch(a.lonlat=[(a.dataBounds.xmin+a.dataBounds.xmax)/2,(a.dataBounds.ymin+a.dataBounds.ymax)/2],a.location=a.getLocalXY(a.lonlat),t.ftype){case 0:break;case 1:a.pointsToTF(t.fGeom.PntGeom);break;case 2:a.linesToTF(t.fGeom.LinGeom);break;case 3:a.regsToTF(t.fGeom.RegGeom)}return a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Theme),r(e,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function(t){if(!(null==t||t.length<=0)){t.components;for(var e=[],n=[],r=this.location,i=[],s=this.nodesClipPixel,a=0;a<t.length;a++){var l=t[a];if(n=[],e=this.getLocalXY([l.Dot.x,l.Dot.y]),n[0]=e[0]-r[0],n[1]=e[1]-r[1],i.length>0){var c=i[i.length-1];if(Math.abs(c[0]-n[0])<=s&&Math.abs(c[1]-n[1])<=s)continue}i.push(n);var h=new Object;h.r=6,(h=(0,o.copyAttributesWithClip)(h,this.style)).x=n[0],h.y=n[1];var f=new u.SmicPoint({style:h,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=r,f.refDataID=this.data.FID,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,o.copyAttributesWithClip)(f,this.shapeOptions),this.shapes.push(f)}}}},{key:"linesToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.lineToTF(t[e])}},{key:"lineToTF",value:function(t){var e=[];if(null!=t.Line&&null!=t.Line.Arcs&&t.Line.Arcs.length>0)for(var n=t.Line.Arcs,r=0;r<n.length;r++)for(var i=n[r].Dots,s=0;s<i.length;s++)e.push([i[s].x,i[s].y]);if(!(e.length<=0)){var u=[],l=[],c=this.location,h=[],f=this.nodesClipPixel;for(r=0;r<e.length;r++){var p=e[r];if(l=[],u=this.getLocalXY(p),l[0]=u[0]-c[0],l[1]=u[1]-c[1],h.length>0){var d=h[h.length-1];if(Math.abs(d[0]-l[0])<=f&&Math.abs(d[1]-l[1])<=f)continue}h.push(l)}if(h.length<2)return null;var y=new Object;(y=(0,o.copyAttributesWithClip)(y,this.style,["pointList"])).pointList=h;var g=new a.SmicBrokenLine({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(g.highlightStyle=this.highlightStyle),g.refOriginalPosition=this.location,g.refDataID=this.data.FID,g.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,o.copyAttributesWithClip)(g,this.shapeOptions),this.shapes.push(g)}}},{key:"regsToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.regToTF(t[e])}},{key:"regToTF",value:function(t){var e=t.Rings;if(!(null==e||e.length<=0)){for(var n=[],r=[],i=this.location,s=[],a=[],u=[],c=this.nodesClipPixel,h=0;h<e.length;h++){if(0===h){if(s=[],null!=e[h]&&null!=e[h].Arcs&&e[h].Arcs.length>0)for(var f=e[h].Arcs,p=0;p<f.length;p++)for(var d=f[p].Dots,y=0;y<d.length;y++){if(r=[],n=this.getLocalXY([d[y].x,d[y].y]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],s.length>0){var g=s[s.length-1];if(Math.abs(g[0]-r[0])<=c&&Math.abs(g[1]-r[1])<=c)continue}s.push(r)}}else if(a=[],null!=e[h]&&null!=e[h].Arcs&&e[h].Arcs.length>0)for(f=e[h].Arcs,p=0;p<f.length;p++)for(d=f[p].Dots,y=0;y<d.length;y++){if(r=[],n=this.getLocalXY([d[y].x,d[y].y]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-r[0])<=c&&Math.abs(v[1]-r[1])<=c)continue}a.push(r)}a.length<2||u.push(a)}if(!(s.length<2)){var m={};(m=(0,o.copyAttributesWithClip)(m,this.style,["pointList"])).pointList=s;var _=new l.SmicPolygon({style:m,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(_.highlightStyle=this.highlightStyle),_.refOriginalPosition=this.location,_.refDataID=this.data.FID,_.isHoverByRefDataID=this.isMultiHover,u.length>0&&(_.holePolygonPointLists=u),this.shapeOptions&&(0,o.copyAttributesWithClip)(_,this.shapeOptions),this.shapes.push(_)}}}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var i=this.shapes[n];i.refOriginalPosition=t,e.addShape(i)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}]),e}();e.ThemeVector=h,i.Zondy.Theme.ThemeVector=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphThemeLayer=e.graphThemeLayer=void 0;var r=n(0),i=(n(2),n(39)),o=n(47),s=n(27),a=n(19),u=n(7),l=i.ThemeLayer.extend({options:{isOverLay:!0},initialize:function(t,e,n){var r=[];r.push(t),r.push(n),i.ThemeLayer.prototype.initialize.apply(this,r),this.chartsType=e,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){var e=this;if(e.fire("beforefeaturesadded",{features:t}),t instanceof o.FeatureSet){var n=null,r=t.AttStruct,i=t.SFEleArray;if(null!=i&&i.length>0)for(var s=0;s<i.length;s++){var a=i[s];if(null!=a.AttValue&&a.AttValue.length>0){n={};for(var u=0;u<a.AttValue.length;u++)n[r.FldName[u]]=a.AttValue[u];n.FID=a.FID}a.attributes=n,e.features.push(a)}}e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var n=e.features;if(t&&t instanceof window.L.LatLngBounds){var r=this._map.options.crs;t=window.L.bounds(r.project(t.getSouthWest()),r.project(t.getNorthEast())),t=new a.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}for(var i=0,o=n.length;i<o;i++){var s=n[i],u=s.bound;if(!t||t.intersectsBounds(u)){var l=e.cache,c=s.FID;if(!l[c]){l[c]=c;var h=e.createThematicFeature(s),f=e.overlayWeightField&&s.attributes[e.overlayWeightField]&&!isNaN(s.attributes[e.overlayWeightField]);h&&f&&(h.__overlayWeight=s.attributes[e.overlayWeightField]),h&&e.charts.push(h)}}}e.drawCharts()},createThematicFeature:function(t){var e,n=this;return s.Theme[n.chartsType]&&n.themeFields&&n.chartsSetting&&(e=new s.Theme[n.chartsType](t,n,n.themeFields,n.chartsSetting,null,n.options)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e},isQuadrilateralOverLap:function(t,e){var n=[{x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymin},{x:t.xmax,y:t.ymax},{x:t.xmin,y:t.ymax}],r=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],i=n.length,o=r.length;if(4!==i||4!==o)return null;for(var s=!1,a=0;a<i;a++)if(this.isPointInPoly(n[a],r)){s=!0;break}for(var u=0;u<o;u++)if(this.isPointInPoly(r[u],n)){s=!0;break}for(var l=0;l<i-1&&!s;l++)for(var c=0;c<o-1;c++){if("Zondy.Object.Point2D"===this.lineIntersection(n[l],n[l+1],r[c],r[c+1]).CLASS_NAME){s=!0;break}}return s},lineIntersection:function(t,e,n,r){var i,o,s=null,a=(r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x),l=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),c=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(0!==c)o=l/c,s=(i=a/c)>=0&&o<=1&&i<=1&&o>=0?new u.Point2D(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y)):"No Intersection";else if(0===a&&0===l){var h=Math.max(t.y,e.y),f=Math.min(t.y,e.y),p=Math.max(t.x,e.x),d=Math.min(t.x,e.x);s=(n.y>=f&&n.y<=h||r.y>=f&&r.y<=h)&&n.x>=d&&n.x<=p||r.x>=d&&r.x<=p?"Coincident":"Parallel"}else s="Parallel";return s},isPointInPoly:function(t,e){for(var n=!1,r=-1,i=e.length,o=i-1;++r<i;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(n=!n);return n},isChartInMap:function(t,e){for(var n=t,r=!1,i=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],o=0,s=i.length;o<s;o++){var a=i[o];if(a.x>=n.xmin&&a.x<=n.xmax&&a.y>=n.ymin&&a.y<=n.ymax){r=!0;break}}return r},isSuitableChart:function(t,e,n){return Math.abs(n)<=1},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){this.clearCache(),i.ThemeLayer.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),i.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),i.ThemeLayer.prototype.redraw.apply(this,arguments)},clear:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()},getWeightFieldValue:function(t,e,n){if((void 0===n||isNaN(n))&&(n=0),!t.attributes)return n;var r=t.attributes[e];return(void 0===r||isNaN(r))&&(r=n),r},_sortChart:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var t=this.charts,e=0,n=t.length;e<n;e++)for(var r=t[e],i=r.resetLocation(),o=r.shapes,s=0,a=o.length;s<a;s++)o[s].refOriginalPosition=i,this.renderer.addShape(o[s])},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),n=this._map.options.crs;e=window.L.bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()));var r=t.charts,i=[],o=t.getLocalXY(e.min),s=t.getLocalXY(e.max),u=new a.Rectangle;u.xmin=Math.min(parseFloat(o[0]),parseFloat(s[0])),u.xmax=Math.max(parseFloat(o[0]),parseFloat(s[0])),u.ymin=Math.min(parseFloat(o[1]),parseFloat(s[1])),u.ymax=Math.max(parseFloat(o[1]),parseFloat(s[1]));for(var l=0,c=r.length;l<c;l++){var h=r[l],f=h.resetLocation(),p=h.chartBounds;if(!u||t.isChartInMap(u,p)){var d=t._map.getZoom()-t.options.fitZoom;if(!(u&&t.options.fitZoom>-1)||t.isSuitableChart(u,p,d)){for(var y=!1,g=0;g<i.length;g++)if(t.isQuadrilateralOverLap(p,i[g])){y=!0;break}if(!y){i.push(p);for(var v=h.shapes,m=0,_=v.length;m<_;m++)v[m].refOriginalPosition=f,t.renderer.addShape(v[m])}}}}}}),c=e.graphThemeLayer=function(t,e,n){return new l(t,e,n)};e.GraphThemeLayer=l,r.Zondy.Map.graphThemeLayer=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbol=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(17);var s=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.setting=null,i&&i.codomain&&(a.setting=i,a.DVBCodomain=a.setting.codomain),a.CLASS_NAME="Zondy.Theme.RankSymbol",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Graph),r(e,[{key:"destroy",value:function(){this.setting=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,n=this.height,r=this.location;this.origonPoint=[r[0]-e/2,r[1]-n/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+n,i[0]+e,i[1]];var o=this.chartBox,s=this.DVBParameter;this.dataViewBox=[o[0]+s[0],o[1]-s[1],o[2]-s[2],o[3]+s[3]];var a=this.dataViewBox;return!(a[0]>=a[2]||a[1]<=a[3])&&(this.DVBOrigonPoint=[a[0],a[3]],this.DVBWidth=Math.abs(a[2]-a[0]),this.DVBHeight=Math.abs(a[1]-a[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0)}}]),e}();e.RankSymbol=s,i.Zondy.Theme.RankSymbol=s},function(t,e){t.exports=function(){try{return echarts}catch(t){return{}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeDimensionPlayer=e.TimeDimensionPlayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var i=e.TimeDimensionPlayer=(r.default.Layer||r.default.Class).extend({includes:r.default.Evented||r.default.Mixin.Events,initialize:function(t,e){r.default.setOptions(this,t),this._timeDimension=e,this._paused=!1,this._buffer=this.options.buffer||5,this._minBufferReady=this.options.minBufferReady||1,this._waitingForBuffer=!1,this._loop=this.options.loop||!1,this._steps=1,this._timeDimension.on("timeload",function(t){this.release(),this._waitingForBuffer=!1}.bind(this)),this.setTransitionTime(this.options.transitionTime||1e3),this._timeDimension.on("limitschanged availabletimeschanged timeload",function(t){this._timeDimension.prepareNextTimes(this._steps,this._minBufferReady,this._loop)}.bind(this))},_tick:function(){var t=this._getMaxIndex(),e=this._timeDimension.getCurrentTimeIndex()>=t&&this._steps>0,n=0==this._timeDimension.getCurrentTimeIndex()&&this._steps<0;if((e||n)&&!this._loop)return this.pause(),this.stop(),void this.fire("animationfinished");if(!this._paused){var r=0,i=this._bufferSize;if(this._minBufferReady>0)if(r=this._timeDimension.getNumberNextTimesReady(this._steps,i,this._loop),this._waitingForBuffer){if(r<i)return console.log("Waiting until buffer is loaded. "+r+" of "+i+" loaded"),void this.fire("waiting",{buffer:i,available:r});console.log("Buffer is fully loaded!"),this.fire("running"),this._waitingForBuffer=!1}else if(r<this._minBufferReady)return console.log("Force wait for load buffer. "+r+" of "+i+" loaded"),this._waitingForBuffer=!0,this._timeDimension.prepareNextTimes(this._steps,i,this._loop),void this.fire("waiting",{buffer:i,available:r});this.pause(),this._timeDimension.nextTime(this._steps,this._loop),i>0&&this._timeDimension.prepareNextTimes(this._steps,i,this._loop)}},_getMaxIndex:function(){return Math.min(this._timeDimension.getAvailableTimes().length-1,this._timeDimension.getUpperLimitIndex()||1/0)},start:function(t){if(!this._intervalID){this._steps=t||1,this._waitingForBuffer=!1;var e=!1;this.options.startOver&&this._timeDimension.getCurrentTimeIndex()===this._getMaxIndex()&&(this._timeDimension.setCurrentTimeIndex(this._timeDimension.getLowerLimitIndex()||0),e=!0),this.release(),this._intervalID=window.setInterval(r.default.bind(this._tick,this),this._transitionTime),e||this._tick(),this.fire("play"),this.fire("running")}},stop:function(){this._intervalID&&(clearInterval(this._intervalID),this._intervalID=null,this._waitingForBuffer=!1,this.fire("stop"))},pause:function(){this._paused=!0},release:function(){this._paused=!1},getTransitionTime:function(){return this._transitionTime},isPlaying:function(){return!!this._intervalID},isWaiting:function(){return this._waitingForBuffer},isLooped:function(){return this._loop},setLooped:function(t){this._loop=t,this.fire("loopchange",{loop:t})},setTransitionTime:function(t){this._transitionTime=t,"function"==typeof this._buffer?(this._bufferSize=this._buffer.call(this,this._transitionTime,this._minBufferReady,this._loop),console.log("Buffer size changed to "+this._bufferSize)):this._bufferSize=this._buffer,this._intervalID&&(this.stop(),this.start(this._steps)),this.fire("speedchange",{transitionTime:t,buffer:this._bufferSize})},getSteps:function(){return this._steps}}),o=e.timeDimensionPlayer=function(t,e){return new i(t,e)};r.default.zondy.TimeDimensionPlayer=o},function(t,e,n){"use strict";n(198)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=e.AnimatedMarkerLayer=e.MarkerClusterLayer=e.ClusterLayer=e.HeaterLayer=e.StreamLayer=e.MapvLayer=e.EchartsLayer=e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=e.OGCWMSInfo=e.OGCWMTSInfo=e.WMTSCapabilities=e.WMSCapabilities=e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=void 0,e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=void 0,e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.EPSG4610=e.EPSG4490=e.EPSG4214=e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.BaiduTileLayer=e.TDTLayer=e.ArcGISLayer=e.crs=e.CRS=e.MapVectorLayer=e.MapWMTSLayer=e.MapTileLayer=e.MapDocLayer=e.L=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(199),o=n(10),s=n(11),a=n(260),u=n(269),l=n(270),c=n(134),h=n(289),f=n(304),p=n(312),d=n(318),y=n(321),g=n(325),v=n(353),m=n(360),_=n(374);e.L=r.default,e.MapDocLayer=i.MapDocLayer,e.MapTileLayer=i.MapTileLayer,e.MapWMTSLayer=i.MapWMTSLayer,e.MapVectorLayer=i.MapVectorLayer,e.CRS=i.CRS,e.crs=i.crs,e.ArcGISLayer=i.ArcGISLayer,e.TDTLayer=i.TDTLayer,e.BaiduTileLayer=i.BaiduTileLayer,e.TiandituType=i.TiandituType,e.GoogleLayerType=i.GoogleLayerType,e.ArcGISLayerType=i.ArcGISLayerType,e.OpenStreetLayerType=i.OpenStreetLayerType,e.EPSG4214=y.EPSG4214,e.EPSG4490=y.EPSG4490,e.EPSG4610=y.EPSG4610,e.ServiceBase=o.ServiceBase,e.AnyLine=s.AnyLine,e.Arc=s.Arc,e.Zondy=s.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=s.CAttDataRow,e.CDisplayStyle=s.CDisplayStyle,e.CDisplayStyleExtend=s.CDisplayStyleExtend,e.CDynNoteInfo=s.CDynNoteInfo,e.CGDBInfo=s.CGDBInfo,e.Circle=s.Circle,e.CLineInfo=s.CLineInfo,e.CPointInfo=s.CPointInfo,e.CRegionInfo=s.CRegionInfo,e.DynNoteLableType=s.DynNoteLableType,e.DynShowStyle=s.DynShowStyle,e.XClsType=s.XClsType,e.VectClsType=s.VectClsType,e.FeatureType=s.FeatureType,e.FontShape=s.FontShape,e.LabelLinType=s.LabelLinType,e.LabelRegType=s.LabelRegType,e.LabelPntType=s.LabelPntType,e.RepeatType=s.RepeatType,e.LabelSpreadType=s.LabelSpreadType,e.LineConstrain=s.LineConstrain,e.EightDirType=s.EightDirType,e.ISShowArc=s.ISShowArc,e.NetAnalyType=s.NetAnalyType,e.NetElemType=s.NetElemType,e.CLinAdjustType=s.CLinAdjustType,e.CLinHeadType=s.CLinHeadType,e.CLinJointType=s.CLinJointType,e.CLinStyleMakeType=s.CLinStyleMakeType,e.CItemType=s.CItemType,e.MapType=s.MapType,e.LayerStatusType=s.LayerStatusType,e.Feature=s.Feature,e.FeatureGeometry=s.FeatureGeometry,e.FeatureGraphicBase=s.FeatureGraphicBase,e.FeatureSet=s.FeatureSet,e.GLine=s.GLine,e.GPoint=s.GPoint,e.GRegion=s.GRegion,e.LabelLinInfo=s.LabelLinInfo,e.LabelRegInfo=s.LabelRegInfo,e.LablePntInfo=s.LablePntInfo,e.MultiPolygon=s.MultiPolygon,e.Point2D=s.Point2D,e.Polygon=s.Polygon,e.PolyLine=s.PolyLine,e.Rectangle=s.Rectangle,e.Tangram=s.Tangram,e.VectCls=s.VectCls,e.WebGraphicsInfo=s.WebGraphicsInfo,e.extend=s.extend,e.isArray=s.isArray,e.extendDeep=s.extendDeep,e.copy=s.copy,e.copyExcluce=s.copyExcluce,e.reset=s.reset,e.getElement=s.getElement,e.isElement=s.isElement,e.removeItem=s.removeItem,e.indexOf=s.indexOf,e.modifyDOMElement=s.modifyDOMElement,e.applyDefaults=s.applyDefaults,e.getParameterString=s.getParameterString,e.getWFParameterString=s.getWFParameterString,e.urlAppend=s.urlAppend,e.getParameters=s.getParameters,e.IS_GECKO=s.IS_GECKO,e.Browser=s.Browser,e.getBrowser=s.getBrowser,e.isSupportCanvas=s.isSupportCanvas,e.supportCanvas=s.supportCanvas,e.isInTheSameDomain=s.isInTheSameDomain,e.toJSON=s.toJSON,e.transformResult=s.transformResult,e.copyAttributes=s.copyAttributes,e.copyAttributesWithClip=s.copyAttributesWithClip,e.cloneObject=s.cloneObject,e.newGuid=s.newGuid,e.bind=s.bind,e.bindAsEventListener=s.bindAsEventListener,e.getTopAnalysisResult=s.getTopAnalysisResult,e.ChineseToUtf8=s.ChineseToUtf8,e.DeepMerge=s.DeepMerge,e.merge=s.merge,e.mixin=s.mixin,e.ContourNoteParam=a.ContourNoteParam,e.ContourParam=a.ContourParam,e.ContourZValue=a.ContourZValue,e.ContourRegionInfo=a.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=a.NetAnalyse,e.NetAnalysisExtent=a.NetAnalysisExtent,e.SlopLineParam=a.SlopLineParam,e.CommonServiceBase=u.CommonServiceBase,e.Events=u.Events,e.CORS=u.CORS,e.RequestTimeout=u.RequestTimeout,e.FetchRequest=u.FetchRequest,e.IgsServiceBase=u.IgsServiceBase,e.JSONFormat=u.JSONFormat,e.ColorInfo=l.ColorInfo,e.GDBInfo=l.GDBInfo,e.MapDoc=l.MapDoc,e.CatalogService=l.CatalogService,e.TileLayer=l.TileLayer,e.VectorLayer=l.VectorLayer,e.EditDocFeature=c.EditDocFeature,e.EditLayerFeature=c.EditLayerFeature,e.EditServiceBase=c.EditServiceBase,e.MultiGeoQuery=c.MultiGeoQuery,e.MultiGeoQueryParameter=c.MultiGeoQueryParameter,e.ObjClsQuery=c.ObjClsQuery,e.ObjClsQueryParameter=c.ObjClsQueryParameter,e.QueryByLayerParameter=c.QueryByLayerParameter,e.QueryDocFeature=c.QueryDocFeature,e.QueryFeatureRule=c.QueryFeatureRule,e.QueryFeatureStruct=c.QueryFeatureStruct,e.QueryLayerFeature=c.QueryLayerFeature,e.QueryParameter=c.QueryParameter,e.QueryParameterBase=c.QueryParameterBase,e.QueryServiceBase=c.QueryServiceBase,e.AnalysisBase=h.AnalysisBase,e.ClassBufferBase=h.ClassBufferBase,e.ClassBufferByMultiplyRing=h.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=h.ClassBufferBySingleRing,e.ClipBase=h.ClipBase,e.ClipByCircle=h.ClipByCircle,e.ClipByLayer=h.ClipByLayer,e.ClipByPolygon=h.ClipByPolygon,e.ContourAnalyse=h.ContourAnalyse,e.FeatureBuffBase=h.FeatureBuffBase,e.FeatureBuffByMultiplyRing=h.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=h.FeatureBuffBySingleRing,e.NetAnalysis=h.NetAnalysis,e.OverlayBase=h.OverlayBase,e.OverlayByLayer=h.OverlayByLayer,e.OverlayByPolygon=h.OverlayByPolygon,e.ProjectBase=h.ProjectBase,e.ProjectByLayer=h.ProjectByLayer,e.ProjectBySRID=h.ProjectBySRID,e.CalArea=f.CalArea,e.CalPolyLineLength=f.CalPolyLineLength,e.CalServiceBase=f.CalServiceBase,e.CProjectBySRSID=f.CProjectBySRSID,e.CProjectParam=f.CProjectParam,e.GeometryAnalysisBase=f.GeometryAnalysisBase,e.ProjectDots=f.ProjectDots,e.ProjectRang=f.ProjectRang,e.Smooth=f.Smooth,e.TopAnalysis=f.TopAnalysis,e.GetDocImageService=p.GetDocImageService,e.GetLayerImageService=p.GetLayerImageService,e.GetMapImageService=p.GetMapImageService,e.GetMapInfoService=p.GetMapInfoService,e.GetTileImageService=p.GetTileImageService,e.MapServiceBase=p.MapServiceBase,e.CAllOtherDataItemInfoSource=d.CAllOtherDataItemInfoSource,e.CAnnInfo=d.CAnnInfo,e.CChartLabelFormat=d.CChartLabelFormat,e.CChartTheme=d.CChartTheme,e.CChartThemeInfo=d.CChartThemeInfo,e.CChartThemeRepresentInfo=d.CChartThemeRepresentInfo,e.CChartType=d.CChartType,e.CDotDensityTheme=d.CDotDensityTheme,e.CFourColorTheme=d.CFourColorTheme,e.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme,e.CLinInfo=d.CLinInfo,e.CMultiClassTheme=d.CMultiClassTheme,e.CPntInfo=d.CPntInfo,e.CRandomTheme=d.CRandomTheme,e.CRangeTheme=d.CRangeTheme,e.CRangeThemeInfo=d.CRangeThemeInfo,e.CRegInfo=d.CRegInfo,e.CSimpleTheme=d.CSimpleTheme,e.CTheme=d.CTheme,e.CThemeInfo=d.CThemeInfo,e.CUniqueTheme=d.CUniqueTheme,e.CUniqueThemeInfo=d.CUniqueThemeInfo,e.ExpInfo=d.ExpInfo,e.FolderInfo=d.FolderInfo,e.FolderInfoAttribute=d.FolderInfoAttribute,e.ItemValue=d.ItemValue,e.ThemeOper=d.ThemeOper,e.ThemesInfo=d.ThemesInfo,e.WMSCapabilities=g.WMSCapabilities,e.WMTSCapabilities=g.WMTSCapabilities,e.OGCWMTSInfo=g.OGCWMTSInfo,e.OGCWMSInfo=g.OGCWMSInfo,e.GeoFeatureThemeLayer=v.GeoFeatureThemeLayer,e.ThemeLayer=v.ThemeLayer,e.RangeThemeLayer=v.RangeThemeLayer,e.UniqueThemeLayer=v.UniqueThemeLayer,e.GraphThemeLayer=v.GraphThemeLayer,e.graphThemeLayer=v.graphThemeLayer,e.RandomThemeLayer=v.RandomThemeLayer,e.SimpleThemeLayer=v.SimpleThemeLayer,e.RankSymbolThemeLayer=v.RankSymbolThemeLayer,e.ThemeStyle=v.ThemeStyle,e.Bar=m.Bar,e.Bar3D=m.Bar3D,e.OverlayCircle=m.OverlayCircle,e.Graph=m.Graph,e.Line=m.Line,e.Pie=m.Pie,e.OverlayPoint=m.OverlayPoint,e.RankSymbol=m.RankSymbol,e.Ring=m.Ring,e.ThemeVector=m.ThemeVector,e.ShapeFactory=m.ShapeFactory,e.ShapeParameters=m.ShapeParameters,e.FeatureCircle=m.FeatureCircle,e.Image=m.Image,e.Label=m.Label,e.FeatureLine=m.FeatureLine,e.Point=m.Point,e.FeaturePolygon=m.FeaturePolygon,e.FeatureRectangle=m.FeatureRectangle,e.Sector=m.Sector,e.FeatureTheme=m.FeatureTheme,e.LevelRenderer=m.LevelRenderer,e.Render=m.Render,e.Animation=m.Animation,e.Animator=m.Animator,e.Area=m.Area,e.Clip=m.Clip,e.Color=m.Color,e.ComputeBoundingBox=m.ComputeBoundingBox,e.Config=m.Config,e.LevelRendererCurve=m.LevelRendererCurve,e.Easing=m.Easing,e.Env=m.Env,e.LevelRendererEvent=m.LevelRendererEvent,e.Eventful=m.Eventful,e.Group=m.Group,e.Handler=m.Handler,e.Http=m.Http,e.Math=m.Math,e.Matrix=m.Matrix,e.Painter=m.Painter,e.PaintLayer=m.PaintLayer,e.Shape=m.Shape,e.SmicBrokenLine=m.SmicBrokenLine,e.SmicCircle=m.SmicCircle,e.SmicEllipse=m.SmicEllipse,e.SmicImage=m.SmicImage,e.SmicIsogon=m.SmicIsogon,e.SmicPoint=m.SmicPoint,e.SmicPolygon=m.SmicPolygon,e.SmicRectangle=m.SmicRectangle,e.SmicRing=m.SmicRing,e.SmicSector=m.SmicSector,e.SmicStar=m.SmicStar,e.SmicText=m.SmicText,e.Storage=m.Storage,e.Transformable=m.Transformable,e.Util=m.Util,e.LevelRendererVector=m.LevelRendererVector,e.SUtil=m.SUtil,e.EchartsLayer=_.EchartsLayer,e.MapvLayer=_.MapvLayer,e.StreamLayer=_.StreamLayer,e.HeaterLayer=_.HeaterLayer,e.ClusterLayer=_.ClusterLayer,e.MarkerClusterLayer=_.MarkerClusterLayer,e.AnimatedMarkerLayer=_.AnimatedMarkerLayer,e.TimeDimension=_.TimeDimension,e.TimeDimensionControl=_.TimeDimensionControl,e.TimeDimensionLayer=_.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=_.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=_.TimeDimensionLayerWMS,e.TimeDimensionPlayer=_.TimeDimensionPlayer,e.TimeDimensionUtil=_.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.ArcGISLayer=e.BaiduTileLayer=e.TDTLayer=e.crs=e.CRS=e.MapVectorLayer=e.GeneralWMTSLayer=e.MapWMTSLayer=e.MapTileLayer=e.MapDocLayer=void 0;var r=n(200),i=n(201),o=n(202),s=n(203),a=n(204),u=n(41),l=n(249),c=n(250),h=n(251),f=n(252);e.MapDocLayer=r.MapDocLayer,e.MapTileLayer=i.MapTileLayer,e.MapWMTSLayer=o.MapWMTSLayer,e.GeneralWMTSLayer=s.GeneralWMTSLayer,e.MapVectorLayer=a.MapVectorLayer,e.CRS=u.CRS,e.crs=u.crs,e.TDTLayer=l.TDTLayer,e.BaiduTileLayer=c.BaiduTileLayer,e.ArcGISLayer=h.ArcGISLayer,e.TiandituType=f.TiandituType,e.GoogleLayerType=f.GoogleLayerType,e.ArcGISLayerType=f.ArcGISLayerType,e.OpenStreetLayerType=f.OpenStreetLayerType},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.L=e.MapDocLayer=void 0;var r=n(0),i=n(2),o=n(1),s=window.L.TileLayer.extend({options:{layers:null,filters:null,style:null,f:null,proj:null,guid:null,cache:!1,keepCache:!0,tileSize:256,attribution:"Zondy Map doc Data"},initialize:function(t,e){var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var r=e&&e.ip?e.ip:"localhost",i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+r+":"+i+"/igs/rest/mrms/docs/"+t)}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/docs/"+t);window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=t.options.crs,this._initLayerUrl(),window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),r=this._crs.project(e.getSouthEast()),i="&bbox="+n.x+","+r.y+","+r.x+","+n.y;return this.options.keepCache||(i+="&temp="+Math.random()),this._layerUrl+encodeURI(i)},_initLayerUrl:function(){var t=this.url+"?";t+=encodeURI(this._initAllRequestParams().join("&")),this._layerUrl=t},_initAllRequestParams:function(){var t=this.options||{},e=[],n=t.f||"png";e.push("f="+n);var r=this.options.tileSize;r instanceof window.L.Point||(r=window.L.point(r,r)),e.push("w="+r.x),e.push("h="+r.y),t.layers&&e.push("layers="+t.layers),t.filters&&e.push("filters="+t.filters),t.style&&e.push("style="+JSON.stringify(t.style));var i=t.guid||(0,o.newGuid)();return e.push("guid="+i),t.proj&&e.push("proj="+t.proj),void 0!==t.cache&&null!==t.isAntialiasing&&e.push("cache="+t.cache),void 0!==t.update&&null!==t.isAntialiasing&&e.push("update="+t.update),t.mode&&e.push("mode="+t.mode),void 0!==t.isAntialiasing&&null!==t.isAntialiasing&&e.push("isAntialiasing="+t.isAntialiasing),e},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},refreshMap:function(t){null!==t&&(this.options.guid=t),this._initLayerUrl(),this.redraw()}});e.MapDocLayer=s,r.Zondy.Map.MapDocLayer=s,e.L=i.L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapTileLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({options:{yAxis:"down",origin:[-180,90],tileSize:256,attribution:"Zondy Map Tile Data"},initialize:function(t,e){var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var r=e&&e.ip?e.ip:"localhost",i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+r+":"+i+"/igs/rest/mrms/tile/"+t)}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/tile/"+t);this.options.origin=e.origin?e.origin:null,window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.GridLayer.prototype.initialize(arguments[1]),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=this._crs.projection.bounds,n=[e.min.x,e.max.y];this._origin=this.options.origin?this.options.origin:n,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.url+"/{z}/{y}/{x}?size="+this.options.tileSize;return e=e.replace("{x}",t.x.toString()).replace("{y}",t.y.toString()).replace("{z}",t.z.toString())}}));e.MapTileLayer=i,r.Zondy.Map.MapTileLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapWMTSLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({options:{version:"1.0.0",style:"",serverName:"",tilematrixSet:"",layer:"",format:"image/png",tileSize:256,attribution:"Zondy WMTS Data",noWrap:!0},initialize:function(t){if(t.url)t.url.indexOf("?")>-1?this._url=t.url.split("?")[0]:this._url=t.url;else{var e="/igs/rest/ogc/WMTSServer";t.serverName&&""!==t.serverName&&(e="/igs/rest/ogc/"+t.serverName+"/WMTSServer");var n=t&&t.domain?t.domain:"";if(""===n){this.networkProtocol=void 0!==t.networkProtocol?t.networkProtocol:location.protocol.split(":")[0]||"http";var r=t&&t.ip?t.ip:"localhost",i=t&&t.port?t.port:"6163";this._url=encodeURI(this.networkProtocol+"://"+r+":"+i+e)}else this._url=encodeURI(n+e)}this._url.toLowerCase().indexOf("ime-cloud")>-1?this._url+="?service=WMTS&REQUEST=GetTile":this._url+="?service=WMTS&request=GetTile",this.options.origin=t.origin?t.origin:null,window.L.setOptions(this,t)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=this._crs.projection.bounds,n=[e.min.x,e.max.y];this._origin=this.options.origin?this.options.origin:n,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getZoomForUrl(),n=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),r={version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,layer:this.options.layer,tilematrix:e,tilerow:t.y,tilecol:t.x};return n.indexOf("tianditu")>-1?r.tilematrixSet="c":n.indexOf("geoserver")>-1&&(r.tilematrix=this.options.tilematrixSet+":"+e),this.options.token&&(n.indexOf("tianditu")>-1?r.tk=this.options.token:r.token=this.options.token),n+window.L.Util.getParamString(r,n)}}));e.MapWMTSLayer=i,r.Zondy.Map.MapWMTSLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralWMTSLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({url:"",options:{version:"1.0.0",style:"default",tilematrixSet:"",layer:"",format:"image/png",tileSize:256,attribution:"WMTS Data"},initialize:function(t,e){this._url=encodeURI(t),window.L.setOptions(this,e)},onAdd:function(t){window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getZoomForUrl(),n=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),r={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,layer:this.options.layer,tilematrix:this.options.tilematrixIds[e],height:this.options.tileSize,width:this.options.tileSize,tilerow:t.y,tilecol:t.x},i=window.L.Util.getParamString(r,n);return n+"?"+(i=i.slice(1,i.length))}}));e.GeneralWMTSLayer=i,r.Zondy.Map.GeneralWMTSLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapVectorLayer=void 0;var r=n(0),i=(n(2),n(1)),o=window.L.TileLayer.extend({options:{gdbps:null,filters:null,style:null,f:null,keepCache:!0,guid:null,attribution:"Zondy Map vector Data",proj:null},initialize:function(t,e){(e=e||{}).gdbps=t;var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var r=e&&e.ip?e.ip:"localhost",i=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+r+":"+i+"/igs/rest/mrms/layers")}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/layers");window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=t.options.crs,this._initLayerUrl(),window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),r=this._crs.project(e.getSouthEast()),i="&bbox="+n.x+","+r.y+","+r.x+","+n.y;return this.options.keepCache||(i+="&temp="+Math.random()),this._layerUrl+encodeURI(i)},_initLayerUrl:function(){var t=this.url+"?";t+=encodeURI(this._initAllRequestParams().join("&")),this._layerUrl=t},_initAllRequestParams:function(){var t=this.options||{},e=[],n=t.f||"png";e.push("f="+n),t.gdbps&&e.push("gdbps="+t.gdbps);var r=this.options.tileSize;r instanceof window.L.Point||(r=window.L.point(r,r)),e.push("w="+r.x),e.push("h="+r.y),t.filters&&e.push("filters="+t.filters),t.style&&e.push("style="+JSON.stringify(t.style)),t.proj&&e.push("proj="+t.proj);var o=t.guid||(0,i.newGuid)();return e.push("guid="+o),void 0!==t.isAntialiasing&&null!==t.isAntialiasing&&e.push("isAntialiasing="+t.isAntialiasing),e},redraw:function(){if(this._map){this._removeAllTiles();var t=(0,i.newGuid)();this.options.guid=t,this._initLayerUrl(),this._update()}return this}});e.MapVectorLayer=o,r.Zondy.Map.MapVectorLayer=o},function(t,e,n){var r=n(206);r.defaultDatum="WGS84",r.Proj=n(59),r.WGS84=new r.Proj("WGS84"),r.Point=n(220),r.toPoint=n(106),r.defs=n(102),r.transform=n(105),r.mgrs=n(107),r.version=n(221).version,n(222)(r),t.exports=r},function(t,e,n){var r=n(59),i=n(105),o=r("WGS84");function s(t,e,n){var r;return Array.isArray(n)?(r=i(t,e,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):i(t,e,n)}function a(t){return t instanceof r?t:t.oProj?t.oProj:r(t)}t.exports=function(t,e,n){t=a(t);var r,i=!1;return void 0===e?(e=t,t=o,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=o,i=!0),e=a(e),n?s(t,e,n):(r={forward:function(n){return s(t,e,n)},inverse:function(n){return s(e,t,n)}},i&&(r.oProj=e),r)}},function(t,e,n){var r=n(102),i=n(104),o=n(103);t.exports=function(t){return function(t){return"string"==typeof t}(t)?function(t){return t in r}(t)?r[t]:function(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,n){return e+1+t.indexOf(n)},0)}(t)?i(t):function(t){return"+"===t[0]}(t)?o(t):void 0:t}},function(t,e){t.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},function(t,e){e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667},function(t,e){e.ft={to_meter:.3048},e["us-ft"]={to_meter:1200/3937}},function(t,e,n){var r=[n(212),n(213)],i={},o=[];function s(t,e){var n=o.length;return t.names?(o[n]=t,t.names.forEach(function(t){i[t.toLowerCase()]=n}),this):(console.log(e),!0)}e.add=s,e.get=function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==i[e]&&o[i[e]]?o[i[e]]:void 0},e.start=function(){r.forEach(s)}},function(t,e,n){var r=n(21),i=Math.PI/2,o=57.29577951308232,s=n(4),a=Math.PI/4,u=n(42),l=n(43);e.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},e.forward=function(t){var e,n,r=t.x,l=t.y;if(l*o>90&&l*o<-90&&r*o>180&&r*o<-180)return null;if(Math.abs(Math.abs(l)-i)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*s(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(a+.5*l));else{var c=Math.sin(l),h=u(this.e,l,c);e=this.x0+this.a*this.k0*s(r-this.long0),n=this.y0-this.a*this.k0*Math.log(h)}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=i-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(n=l(this.e,a)))return null}return e=s(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},e.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},function(t,e){function n(t){return t}e.init=function(){},e.forward=n,e.inverse=n,e.names=["longlat","identity"]},function(t,e,n){var r=n(215),i=n(216),o=n(60),s=n(217);t.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=r[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var n=i[t.ellps]?i[t.ellps]:i.WGS84;o(t,n)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=s(t)),t}},function(t,e){e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(t,e){e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(t,e){var n=Math.PI/2,r=function(t){if(!(this instanceof r))return new r(t);this.datum_type=4,t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=5),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=484813681109536e-20,this.datum_params[4]*=484813681109536e-20,this.datum_params[5]*=484813681109536e-20,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=t.grids?3:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,3===this.datum_type&&(this.grids=t.grids))};r.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,r,i,o,s,a,u,l=t.x,c=t.y,h=t.z?t.z:0;if(c<-n&&c>-1.001*n)c=-n;else if(c>n&&c<1.001*n)c=n;else if(c<-n||c>n)return null;return l>Math.PI&&(l-=2*Math.PI),s=Math.sin(c),u=Math.cos(c),a=s*s,e=((o=this.a/Math.sqrt(1-this.es*a))+h)*u*Math.cos(l),r=(o+h)*u*Math.sin(l),i=(o*(1-this.es)+h)*s,t.x=e,t.y=r,t.z=i,0},geocentric_to_geodetic:function(t){var e,r,i,o,s,a,u,l,c,h,f,p,d,y,g,v,m=t.x,_=t.y,b=t.z?t.z:0;if(!1,e=Math.sqrt(m*m+_*_),r=Math.sqrt(m*m+_*_+b*b),e/this.a<1e-12){if(!0,y=0,r/this.a<1e-12)return g=n,void(v=-this.b)}else y=Math.atan2(_,m);i=b/r,o=e/r,s=1/Math.sqrt(1-this.es*(2-this.es)*o*o),l=o*(1-this.es)*s,c=i*s,d=0;do{d++,v=e*l+b*c-(u=this.a/Math.sqrt(1-this.es*c*c))*(1-this.es*c*c),a=this.es*u/(u+v),p=(f=i*(s=1/Math.sqrt(1-a*(2-a)*o*o)))*l-(h=o*(1-a)*s)*c,l=h,c=f}while(p*p>1e-24&&d<30);return g=Math.atan(f/Math.abs(h)),t.x=y,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,r,i,o,s,a,u,l,c,h,f,p,d,y,g,v,m,_=t.x,b=t.y,S=t.z?t.z:0;if(_=parseFloat(_),b=parseFloat(b),S=parseFloat(S),m=!1,0!==_)e=Math.atan2(b,_);else if(b>0)e=n;else if(b<0)e=-n;else if(m=!0,e=0,S>0)r=n;else{if(!(S<0))return r=n,void(i=-this.b);r=-n}return s=_*_+b*b,a=1.0026*S,p=(o=Math.sqrt(s))/(l=Math.sqrt(a*a+s)),f=(h=a/l)*h*h,u=S+this.b*this.ep2*f,v=o-this.a*this.es*p*p*p,d=u/(c=Math.sqrt(u*u+v*v)),y=v/c,g=this.a/Math.sqrt(1-this.es*d*d),i=y>=.3826834323650898?o/y-g:y<=-.3826834323650898?o/-y-g:S/d+g*(this.es-1),!1===m&&(r=Math.atan(d/y)),t.x=e,t.y=r,t.z=i,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],r=this.datum_params[2],i=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=a*(t.x-s*t.y+o*t.z)+e,l=a*(s*t.x+t.y-i*t.z)+n,c=a*(-o*t.x+i*t.y+t.z)+r;t.x=u,t.y=l,t.z=c}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],r=this.datum_params[2],i=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=(t.x-e)/a,l=(t.y-n)/a,c=(t.z-r)/a;t.x=u+s*l-o*c,t.y=-s*u+l+i*c,t.z=o*u-i*l+c}}},t.exports=r},function(t,e){var n=1,r=2;t.exports=function(t,e,i){var o,s,a;function u(t){return t===n||t===r}if(t.compare_datums(e))return i;if(5===t.datum_type||5===e.datum_type)return i;var l=t.a,c=t.es,h=e.a,f=e.es,p=t.datum_type;if(3===p)if(0===this.apply_gridshift(t,0,i))t.a=6378137,t.es=.006694379990141316;else{if(!t.datum_params)return t.a=l,t.es=t.es,i;for(o=1,s=0,a=t.datum_params.length;s<a;s++)o*=t.datum_params[s];if(0===o)return t.a=l,t.es=t.es,i;p=t.datum_params.length>3?r:n}return 3===e.datum_type&&(e.a=6378137,e.es=.006694379990141316),(t.es!==e.es||t.a!==e.a||u(p)||u(e.datum_type))&&(t.geodetic_to_geocentric(i),u(t.datum_type)&&t.geocentric_to_wgs84(i),u(e.datum_type)&&e.geocentric_from_wgs84(i),e.geocentric_to_geodetic(i)),3===e.datum_type&&this.apply_gridshift(e,1,i),t.a=l,t.es=c,e.a=h,e.es=f,i}},function(t,e){t.exports=function(t,e,n){var r,i,o,s=n.x,a=n.y,u=n.z||0;for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=s,i="x"):1===o?(r=a,i="y"):(r=u,i="z"),t.axis[o]){case"e":n[i]=r;break;case"w":n[i]=-r;break;case"n":n[i]=r;break;case"s":n[i]=-r;break;case"u":void 0!==n[i]&&(n.z=r);break;case"d":void 0!==n[i]&&(n.z=-r);break;default:return null}return n}},function(t,e,n){var r=n(107);function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(t){return new i(r.toPoint(t))},i.prototype.toMGRS=function(t){return r.forward([this.x,this.y],t)},t.exports=i},function(t){t.exports={name:"proj4",version:"2.3.15",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},function(t,e,n){var r=[n(108),n(223),n(224),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(238),n(239),n(240),n(241),n(242),n(245),n(246),n(247),n(248)];t.exports=function(t){r.forEach(function(e){t.Proj.projections.add(e)})}},function(t,e,n){var r=n(108);e.dependsOn="tmerc",e.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.init.apply(this),this.forward=r.forward,this.inverse=r.inverse)},e.names=["Universal Transverse Mercator System","utm"]},function(t,e,n){var r=n(225),i=n(4);e.init=function(){r.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},e.forward=function(t){var e,n,o,s;return t.x=i(t.x-this.long0),r.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},e.inverse=function(t){var e,n,o,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var u=2*Math.atan2(a,this.R2);e=Math.sin(u),n=Math.cos(u),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),o=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,r.inverse.apply(this,[t]),t.x=i(t.x+this.long0),t},e.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},function(t,e,n){var r=Math.PI/4,i=n(226),o=Math.PI/2;e.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r)/(Math.pow(Math.tan(.5*this.lat0+r),this.C)*i(this.e*t,this.ratexp))},e.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+r),this.C)*i(this.e*Math.sin(n),this.ratexp))-o,t.x=this.C*e,t},e.inverse=function(t){for(var e=t.x/this.C,n=t.y,s=Math.pow(Math.tan(.5*n+r)/this.K,1/this.C),a=20;a>0&&(n=2*Math.atan(s*i(this.e*Math.sin(t.y),-.5*this.e))-o,!(Math.abs(n-t.y)<1e-14));--a)t.y=n;return a?(t.x=e,t.y=n,t):null},e.names=["gauss"]},function(t,e){t.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},function(t,e,n){var r=Math.PI/2,i=n(29),o=n(21),s=n(42),a=n(43),u=n(4);e.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(r+t))*Math.pow((1-e)/(1+e),.5*n)},e.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+i(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/s(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=o(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},e.forward=function(t){var e,n,i,o,a,l,c=t.x,h=t.y,f=Math.sin(h),p=Math.cos(h),d=u(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=1e-10&&Math.abs(h+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*f+this.coslat0*p*Math.cos(d)),t.x=this.a*e*p*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*p*Math.cos(d))+this.y0,t):(n=2*Math.atan(this.ssfn_(h,f,this.e))-r,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=s(this.e,h*this.con,this.con*f),l=2*this.a*this.k0*a/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+o*Math.cos(d)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(d))),t.y=e*(this.cosX0*i-this.sinX0*o*Math.cos(d))+this.y0),t.x=e*o*Math.sin(d)+this.x0,t))},e.inverse=function(t){var e,n,i,o,s;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,l<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?u(this.long0+Math.atan2(t.x,-1*t.y)):u(this.long0+Math.atan2(t.x,t.y)):u(this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(l<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*a(this.e,i),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=1e-10?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=u(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*a(this.e,Math.tan(.5*(r+s)));return t.x=e,t.y=n,t},e.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},function(t,e){e.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},e.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},e.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=l,t},e.names=["somerc"]},function(t,e,n){var r=n(42),i=n(4),o=n(43),s=Math.PI/2,a=Math.PI/4;e.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var o,s,a=r(this.e,this.lat0,t),u=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(u*u<1&&(u=1),isNaN(this.longc)){var l=r(this.e,this.lat1,Math.sin(this.lat1)),c=r(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(u+Math.sqrt(u*u-1))*Math.pow(a,this.bl):this.el=(u-Math.sqrt(u*u-1))*Math.pow(a,this.bl);var h=Math.pow(l,this.bl),f=Math.pow(c,this.bl);s=.5*((o=this.el/h)-1/o);var p=(this.el*this.el-f*h)/(this.el*this.el+f*h),d=(f-h)/(f+h),y=i(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*y)/d)/this.bl,this.long0=i(this.long0);var g=i(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/s),this.alpha=Math.asin(u*Math.sin(this.gamma0))}else o=this.lat0>=0?u+Math.sqrt(u*u-1):u-Math.sqrt(u*u-1),this.el=o*Math.pow(a,this.bl),s=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/u),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha))},e.forward=function(t){var e,n,o,u=t.x,l=t.y,c=i(u-this.long0);if(Math.abs(Math.abs(l)-s)<=1e-10)o=l>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(a+o*this.gamma0*.5)),e=-1*o*s*this.al/this.bl;else{var h=r(this.e,l,Math.sin(l)),f=this.el/Math.pow(h,this.bl),p=.5*(f-1/f),d=.5*(f+1/f),y=Math.sin(this.bl*c),g=(p*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/d;n=Math.abs(Math.abs(g)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=1e-10?this.al*this.bl*c:this.al*Math.atan2(p*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},e.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),a=.5*(r-1/r),u=.5*(r+1/r),l=Math.sin(this.bl*e/this.al),c=(l*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/u,h=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<1e-10?(t.x=this.long0,t.y=s):Math.abs(c+1)<1e-10?(t.x=this.long0,t.y=-1*s):(t.y=o(this.e,h),t.x=i(this.long0-Math.atan2(a*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},e.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},function(t,e,n){var r=n(21),i=n(42),o=Math.PI/2,s=n(29),a=n(4),u=n(43);e.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=r(this.e,e,n),s=i(this.e,this.lat1,e),a=Math.sin(this.lat2),u=Math.cos(this.lat2),l=r(this.e,a,u),c=i(this.e,this.lat2,a),h=i(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(o/l)/Math.log(s/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},e.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=s(n)*(o-2e-10));var r,u,l=Math.abs(Math.abs(n)-o);if(l>1e-10)r=i(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;u=0}var c=this.ns*a(e-this.long0);return t.x=this.k0*(u*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(c))+this.y0,t},e.inverse=function(t){var e,n,r,i,s,l=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+c*c),n=1):(e=-Math.sqrt(l*l+c*c),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*l,n*c)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=u(this.e,r)))return null}else i=-o;return s=a(h/this.ns+this.long0),t.x=s,t.y=i,t},e.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},function(t,e,n){var r=n(4);e.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},e.forward=function(t){var e,n,i,o,s,a,u,l=t.x,c=t.y,h=r(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),a=this.n*s,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(a)/1,t.x=u*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},e.inverse=function(t){var e,n,r,i,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,l+=1}while(0===a&&l<15);return l>=15?null:t},e.names=["Krovak","krovak"]},function(t,e,n){var r=n(34),i=n(30),o=n(31),s=n(32),a=n(33),u=n(61),l=n(4),c=n(35),h=n(62),f=Math.PI/2;e.init=function(){this.sphere||(this.e0=i(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*r(this.e0,this.e1,this.e2,this.e3,this.lat0))},e.forward=function(t){var e,n,i=t.x,o=t.y;if(i=l(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var s=Math.sin(o),a=Math.cos(o),c=u(this.a,this.e,s),h=Math.tan(o)*Math.tan(o),f=i*Math.cos(o),p=f*f,d=this.es*a*a/(1-this.es);e=c*f*(1-p*h*(1/6-(8-h+8*d)*p/120)),n=this.a*r(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*s/a*p*(.5+(5-h+6*d)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=this.ml0/this.a+i,a=h(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-f)<=1e-10)return t.x=this.long0,t.y=f,i<0&&(t.y*=-1),t;var p=u(this.a,this.e,Math.sin(a)),d=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(a),2),g=r*this.a/p,v=g*g;e=a-p*Math.tan(a)/d*g*g*(.5-(1+3*y)*g*g/24),n=g*(1-v*(y/3+(1+3*y)*y*v/15))/Math.cos(a)}return t.x=l(n+this.long0),t.y=c(e),t},e.names=["Cassini","Cassini_Soldner","cass"]},function(t,e,n){var r=Math.PI/2,i=Math.PI/4,o=n(63),s=n(4);e.S_POLE=1,e.N_POLE=2,e.EQUIT=3,e.OBLIQ=4,e.init=function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=o(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=o(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},e.forward=function(t){var e,n,a,u,l,c,h,f,p,d,y=t.x,g=t.y;if(y=s(y-this.long0),this.sphere){if(l=Math.sin(g),d=Math.cos(g),a=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*a:1+this.sinph0*l+this.cosph0*d*a)<=1e-10)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(y),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(g+this.phi0)<1e-10)return null;n=i-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(y),n*=a}}else{switch(h=0,f=0,p=0,a=Math.cos(y),u=Math.sin(y),l=Math.sin(g),c=o(this.e,l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=c/this.qp,f=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:p=1+this.sinb1*h+this.cosb1*f*a;break;case this.EQUIT:p=1+f*a;break;case this.N_POLE:p=r+g,c=this.qp-c;break;case this.S_POLE:p=g-r,c=this.qp+c}if(Math.abs(p)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*h-this.sinb1*f*a):(p=Math.sqrt(2/(1+f*a)))*h*this.ymf,e=this.xmf*p*f*u;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(p=Math.sqrt(c))*u,n=a*(this.mode===this.S_POLE?p:-p)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,o,a,u,l,c=t.x/this.a,h=t.y/this.a;if(this.sphere){var f,p=0,d=0;if((n=.5*(f=Math.sqrt(c*c+h*h)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=1e-10?0:Math.asin(h*d/f),c*=d,h=p*f;break;case this.OBLIQ:n=Math.abs(f)<=1e-10?this.phi0:Math.asin(p*this.sinph0+h*d*this.cosph0/f),c*=d*this.cosph0,h=(p-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:h=-h,n=r-n;break;case this.S_POLE:n-=r}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,h):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,h*=this.dd,(u=Math.sqrt(c*c+h*h))<1e-10)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*u/this.rq),i=Math.cos(o),c*=o=Math.sin(o),this.mode===this.OBLIQ?(l=i*this.sinb1+h*o*this.cosb1/u,a=this.qp*l,h=u*this.cosb1*i-h*this.sinb1*o):(l=h*o/u,a=this.qp*l,h=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(a=c*c+h*h))return t.x=0,t.y=this.phi0,t;l=1-a/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(c,h),n=this.authlat(Math.asin(l),this.apa)}return t.x=s(this.long0+e),t.y=n,t},e.P00=.3333333333333333,e.P01=.17222222222222222,e.P02=.10257936507936508,e.P10=.06388888888888888,e.P11=.0664021164021164,e.P20=.016415012942191543,e.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},e.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},e.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},function(t,e,n){var r=n(21),i=n(63),o=n(4),s=n(22);e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=r(this.e3,this.sin_po,this.cos_po),this.qs1=i(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=r(this.e3,this.sin_po,this.cos_po),this.qs2=i(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=i(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},e.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=i(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*o(e-this.long0),u=s*Math.sin(a)+this.x0,l=this.rh-s*Math.cos(a)+this.y0;return t.x=u,t.y=l,t},e.inverse=function(t){var e,n,r,i,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),s=o(i/this.ns0+this.long0),t.x=s,t.y=a,t},e.phi1z=function(t,e){var n,r,i,o,a,u=s(.5*e);if(t<1e-10)return u;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(u),r=Math.cos(u),u+=a=.5*(o=1-(i=t*n)*i)*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-i)/(1+i))),Math.abs(a)<=1e-7)return u;return null},e.names=["Albers_Conic_Equal_Area","Albers","aea"]},function(t,e,n){var r=n(4),i=n(22);e.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},e.forward=function(t){var e,n,i,o,s,a,u,l=t.x,c=t.y;return i=r(l-this.long0),e=Math.sin(c),n=Math.cos(c),o=Math.cos(i),1,(s=this.sin_p14*e+this.cos_p14*n*o)>0||Math.abs(s)<=1e-10?(a=this.x0+1*this.a*n*Math.sin(i)/s,u=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*o)/s):(a=this.x0+this.infinity_dist*n*Math.sin(i),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=a,t.y=u,t},e.inverse=function(t){var e,n,o,s,a,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),o=Math.cos(s),u=i(o*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),a=r(this.long0+a)):(u=this.phic0,a=0),t.x=a,t.y=u,t},e.names=["gnom"]},function(t,e,n){var r=n(4),i=n(63),o=n(21),s=n(237);e.init=function(){this.sphere||(this.k0=o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},e.forward=function(t){var e,n,o=t.x,s=t.y,a=r(o-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var u=i(this.e,Math.sin(s));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=r(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=s(this.e,2*t.y*this.k0/this.a),e=r(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},e.names=["cea"]},function(t,e){var n=Math.PI/2;t.exports=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*n:n;for(var i,o,s,a,u=Math.asin(.5*e),l=0;l<30;l++)if(o=Math.sin(u),s=Math.cos(u),a=t*o,u+=i=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return u;return NaN}},function(t,e,n){var r=n(4),i=n(35);e.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},e.forward=function(t){var e=t.x,n=t.y,o=r(e-this.long0),s=i(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t},e.inverse=function(t){var e=t.x,n=t.y;return t.x=r(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=i(this.lat0+(n-this.y0)/this.a),t},e.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},function(t,e,n){var r=n(30),i=n(31),o=n(32),s=n(33),a=n(4),u=n(35),l=n(34),c=n(61);e.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=r(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*l(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,n,r,i=t.x,o=t.y,s=a(i-this.long0);if(r=s*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(u(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*s,n=-1*this.ml0;else{var h=c(this.a,this.e,Math.sin(o))/Math.tan(o);e=h*Math.sin(r),n=this.a*l(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+h*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},e.inverse=function(t){var e,n,r,i,o,s,u,c,h;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=a(r/this.a+this.long0),n=0;else{var f;for(s=this.lat0+i/this.a,u=r*r/this.a/this.a+s*s,c=s,o=20;o;--o)if(c+=h=-1*(s*(c*(f=Math.tan(c))+1)-c-.5*(c*c+u)*f)/((c-s)/f-1),Math.abs(h)<=1e-10){n=c;break}e=a(this.long0+Math.asin(r*Math.tan(c)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=1e-10)n=0,e=a(this.long0+r/this.a);else{var p,d,y,g,v;for(s=(this.ml0+i)/this.a,u=r*r/this.a/this.a+s*s,c=s,o=20;o;--o)if(v=this.e*Math.sin(c),p=Math.sqrt(1-v*v)*Math.tan(c),d=this.a*l(this.e0,this.e1,this.e2,this.e3,c),y=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=h=(s*(p*(g=d/this.a)+1)-g-.5*p*(g*g+u))/(this.es*Math.sin(2*c)*(g*g+u-2*s*g)/(4*p)+(s-g)*(p*y-2/Math.sin(2*c))-y),Math.abs(h)<=1e-10){n=c;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=a(this.long0+Math.asin(r*p/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},e.names=["Polyconic","poly"]},function(t,e){e.iterations=1,e.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},e.forward=function(t){var e,n=t.x,r=(t.y-this.lat0)/484813681109536e-20*1e-5,i=n-this.long0,o=1,s=0;for(e=1;e<=10;e++)o*=r,s+=this.A[e]*o;var a,u=s,l=i,c=1,h=0,f=0,p=0;for(e=1;e<=6;e++)a=h*u+c*l,c=c*u-h*l,h=a,f=f+this.B_re[e]*c-this.B_im[e]*h,p=p+this.B_im[e]*c+this.B_re[e]*h;return t.x=p*this.a+this.x0,t.y=f*this.a+this.y0,t},e.inverse=function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,s=(i-this.y0)/this.a,a=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*s+u*a,u=u*s-l*a,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,y=h,g=s,v=a;for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var m=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*h,d=d*c-y*h,y=p,m+=e*(this.B_re[e]*d-this.B_im[e]*y),_+=e*(this.B_im[e]*d+this.B_re[e]*y);var b=m*m+_*_;c=(g*m+v*_)/b,h=(v*m-g*_)/b}var S=c,x=h,w=1,P=0;for(e=1;e<=9;e++)w*=S,P+=this.D[e]*w;var C=this.lat0+484813681109536e-20*P*1e5,O=this.long0+x;return t.x=O,t.y=C,t},e.names=["New_Zealand_Map_Grid","nzmg"]},function(t,e,n){var r=n(4);e.init=function(){},e.forward=function(t){var e=t.x,n=t.y,i=r(e-this.long0),o=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=s,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=r(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},e.names=["Miller_Cylindrical","mill"]},function(t,e,n){var r=n(4),i=n(35),o=n(243),s=n(109),a=n(244),u=Math.PI/2,l=n(22);e.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=o(this.es)},e.forward=function(t){var e,n,i=t.x,o=t.y;if(i=r(i-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(o),u=20;u;--u){var l=(this.m*o+Math.sin(o)-a)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<1e-10)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var c=Math.sin(o),h=Math.cos(o);n=this.a*s(o,c,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=l((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=l(Math.sin(e)/this.n)),o=r(o+this.long0),e=i(e)):(e=a(t.y/this.a,this.es,this.en),(s=Math.abs(e))<u?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=r(n)):s-1e-10<u&&(o=this.long0)),t.x=o,t.y=e,t},e.names=["Sinusoidal","sinu"]},function(t,e){var n=.01068115234375;t.exports=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*n))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*n)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e}},function(t,e,n){var r=n(109);t.exports=function(t,e,n){for(var i=1/(1-e),o=t,s=20;s;--s){var a=Math.sin(o),u=1-e*a*a;if(o-=u=(r(o,a,Math.cos(o),n)-t)*(u*Math.sqrt(u))*i,Math.abs(u)<1e-10)return o}return o}},function(t,e,n){var r=n(4);e.init=function(){},e.forward=function(t){for(var e=t.x,n=t.y,i=r(e-this.long0),o=n,s=Math.PI*Math.sin(n),a=0;;a++){var u=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=u,Math.abs(u)<1e-10)break}o/=2,Math.PI/2-Math.abs(n)<1e-10&&(i=0);var l=.900316316158*this.a*i*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=c,t},e.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=r(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=i,t.y=o,t},e.names=["Mollweide","moll"]},function(t,e,n){var r=n(30),i=n(31),o=n(32),s=n(33),a=n(21),u=n(34),l=n(4),c=n(35),h=n(62);e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=r(this.es),this.e1=i(this.es),this.e2=o(this.es),this.e3=s(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a(this.e,this.sinphi,this.cosphi),this.ml1=u(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a(this.e,this.sinphi,this.cosphi),this.ml2=u(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=u(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},e.forward=function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=u(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*l(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},e.inverse=function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=l(this.long0+o/this.ns),r=c(this.g-n/this.a),t.x=i,t.y=r,t;var s=this.g-n/this.a;return r=h(s,this.e0,this.e1,this.e2,this.e3),i=l(this.long0+o/this.ns),t.x=i,t.y=r,t},e.names=["Equidistant_Conic","eqdc"]},function(t,e,n){var r=n(4),i=Math.PI/2,o=n(22);e.init=function(){this.R=this.a},e.forward=function(t){var e,n,s=t.x,a=t.y,u=r(s-this.long0);Math.abs(a)<=1e-10&&(e=this.x0+this.R*u,n=this.y0);var l=o(2*Math.abs(a/Math.PI));(Math.abs(u)<=1e-10||Math.abs(Math.abs(a)-i)<=1e-10)&&(e=this.x0,n=a>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),h=c*c,f=Math.sin(l),p=Math.cos(l),d=p/(f+p-1),y=d*d,g=d*(2/f-1),v=g*g,m=Math.PI*this.R*(c*(d-v)+Math.sqrt(h*(d-v)*(d-v)-(v+h)*(y-v)))/(v+h);u<0&&(m=-m),e=this.x0+m;var _=h+d;return m=Math.PI*this.R*(g*_-c*Math.sqrt((v+h)*(h+1)-_*_))/(v+h),n=a>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},e.inverse=function(t){var e,n,i,o,s,a,u,l,c,h,f,p;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,s=(i=t.x/f)*i+(o=t.y/f)*o,f=3*(o*o/(l=-2*(a=-Math.abs(o)*(1+s))+1+2*o*o+s*s)+(2*(u=a-2*o*o+i*i)*u*u/l/l/l-9*a*u/l/l)/27)/(c=(a-u*u/3/l)/l)/(h=2*Math.sqrt(-c/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,n=t.y>=0?(-h*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI:-(-h*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI,e=Math.abs(i)<1e-10?this.long0:r(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-o*o)+s*s))/2/i),t.x=e,t.y=n,t},e.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},function(t,e,n){var r=n(4),i=Math.PI/2,o=n(34),s=n(30),a=n(31),u=n(32),l=n(33),c=n(61),h=n(22),f=n(62);e.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},e.forward=function(t){var e,n,h,f,p,d,y,g,v,m,_,b,S,x,w,P,C,O,T,E,L,M,I=t.x,N=t.y,A=Math.sin(t.y),R=Math.cos(t.y),D=r(I-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(i-N)*Math.sin(D),t.y=this.y0-this.a*(i-N)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(i+N)*Math.sin(D),t.y=this.y0+this.a*(i+N)*Math.cos(D),t):(O=this.sin_p12*A+this.cos_p12*R*Math.cos(D),C=(P=Math.acos(O))/Math.sin(P),t.x=this.x0+this.a*C*R*Math.sin(D),t.y=this.y0+this.a*C*(this.cos_p12*A-this.sin_p12*R*Math.cos(D)),t):(e=s(this.es),n=a(this.es),h=u(this.es),f=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*o(e,n,h,f,i),d=this.a*o(e,n,h,f,N),t.x=this.x0+(p-d)*Math.sin(D),t.y=this.y0-(p-d)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*o(e,n,h,f,i),d=this.a*o(e,n,h,f,N),t.x=this.x0+(p+d)*Math.sin(D),t.y=this.y0+(p+d)*Math.cos(D),t):(y=A/R,g=c(this.a,this.e,this.sin_p12),v=c(this.a,this.e,A),m=Math.atan((1-this.es)*y+this.es*g*this.sin_p12/(v*R)),T=0===(_=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(D)))?Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(_)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.asin(Math.sin(D)*Math.cos(m)/Math.sin(_)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),P=g*T*(1-(E=T*T)*(w=(S=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es))*S)*(1-w)/6+(L=E*T)/8*(x=b*S)*(1-2*w)+(M=L*T)/120*(w*(4-7*w)-3*b*b*(1-7*w))-M*T/48*x),t.x=this.x0+P*Math.sin(_),t.y=this.y0+P*Math.cos(_),t))},e.inverse=function(t){var e,n,p,d,y,g,v,m,_,b,S,x,w,P,C,O,T,E,L,M,I,N;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i*this.a)return;return n=e/this.a,p=Math.sin(n),d=Math.cos(n),y=this.long0,Math.abs(e)<=1e-10?g=this.lat0:(g=h(d*this.sin_p12+t.y*p*this.cos_p12/e),v=Math.abs(this.lat0)-i,y=Math.abs(v)<=1e-10?this.lat0>=0?r(this.long0+Math.atan2(t.x,-t.y)):r(this.long0-Math.atan2(-t.x,t.y)):r(this.long0+Math.atan2(t.x*p,e*this.cos_p12*d-t.y*this.sin_p12*p))),t.x=y,t.y=g,t}return m=s(this.es),_=a(this.es),b=u(this.es),S=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(x=this.a*o(m,_,b,S,i),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f((x-e)/this.a,m,_,b,S),y=r(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=g,t):Math.abs(this.sin_p12+1)<=1e-10?(x=this.a*o(m,_,b,S,i),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f((e-x)/this.a,m,_,b,S),y=r(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),C=Math.atan2(t.x,t.y),w=c(this.a,this.e,this.sin_p12),O=Math.cos(C),E=-(T=this.e*this.cos_p12*O)*T/(1-this.es),L=3*this.es*(1-E)*this.sin_p12*this.cos_p12*O/(1-this.es),N=1-E*(I=(M=e/w)-E*(1+E)*Math.pow(M,3)/6-L*(1+3*E)*Math.pow(M,4)/24)*I/2-M*I*I*I/6,P=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*O),y=r(this.long0+Math.asin(Math.sin(C)*Math.sin(I)/Math.cos(P))),g=Math.atan((1-this.es*N*this.sin_p12/Math.sin(P))*Math.tan(P)/(1-this.es)),t.x=y,t.y=g,t)},e.names=["Azimuthal_Equidistant","aeqd"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TDTLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,url:"http://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],version:"1.0.0",tilematrixSet:"",tileSize:256,matrixIds:null,layer:"",attribution:""},initialize:function(t){if(t=t||{},window.L.setOptions(this,t),this.options.baseURL){var e=this.options.baseURL.split("gov.cn/")[1];this.options.baseURL.indexOf("?")>0&&(e=e.split("?")[0]),this.options.layerType=e.substring(0,e.length-7)}this.options.layer=this.options.isLabel&&this.layerLabelMap[this.options.layerType]?this.layerLabelMap[this.options.layerType]:this.options.layerType,"ter"===this.options.layerType?this.options.maxZoom=14:this.options.maxZoom=18,this._url=this.options.url,this.options.ip=this.options.ip?this.options.ip:"localhost",this.options.port=this.options.port?this.options.port:"6163",window.L.stamp(this)},onAdd:function(t){if(this._crs=this.options.crs||t.options.crs,this.options.tilematrixSet="EPSG:4326"===this._crs.code?"c":"w",this.options.layerType.indexOf("igs")>0){var e,n="http://{ip}:{port}/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?",r=this.options&&this.options.domain?this.options.domain:"";switch(""===r?(this.networkProtocol=void 0!==this.options.networkProtocol?this.options.networkProtocol:location.protocol.split(":")[0]||"http",n=this.networkProtocol+"://"+this.options.ip+":"+this.options.port+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"):n=r+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?",this.options.layerType){case"vec_igs":e="vector";break;case"img_igs":e="raster";break;case"cva_igs":e="vectorAnno";break;case"cia_igs":e="rasterAnno";break;default:e="vector"}this._url=n.replace("{layerType}",e)}else this.options.baseURL?(this._url=this.options.baseURL,this.options.baseURL.indexOf("?")<0&&(this._url+="?")):this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet);window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e,n=this._getZoomForUrl(),r=this.options.matrixIds?this.options.matrixIds[n].identifier:n,i={};return this.options.layerType.indexOf("igs")>0?e=this._url.replace("{x}",t.x).replace("{y}",t.y).replace("{z}",r):(e=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),i={request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:r,tilerow:t.y,tilecol:t.x}),this.options.token&&(i.tk=this.options.token),(e+="service=WMTS")+window.L.Util.getParamString(i,e)}}));e.TDTLayer=i,r.Zondy.Map.TDTLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaiduTileLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({style:{light:"light",visualization:"visualization",redalert:"redalert",grassgreen:"grassgreen",pink:"pink",bluish:"bluish",darkgreen:"darkgreen",grayscale:"grayscale",hardedge:"hardedge",midnight:"midnight",default:"pl"},url:"http://api2.map.bdimg.com/customimage/tile?&udt=20180601&scale=1&x={x}&y={y}&z={z}&ak={baidukey}&styles={styles}",options:{minZoom:3,maxZoom:18,subdomains:[0,1,2],errorTileUrl:"",zoomOffset:0,tms:!0,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,baidukey:"HmkUGKETQBkEcd6aj3udNZ3W5hKXmXSi",id:"dark",styles:"pl"},initialize:function(t){window.L.setOptions(this,t)},onAdd:function(t){window.L.TileLayer.prototype.onAdd.call(this,t)},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},getTileUrl:function(t){var e={s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl(),styles:this.options.styles,ak:this.options.baidukey};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return window.L.Util.template(this.url,window.L.Util.extend(e,this.options))}}));e.BaiduTileLayer=i,r.Zondy.Map.BaiduTileLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGISLayer=void 0;var r=n(0),i=(n(2),window.L.TileLayer.extend({options:{layerType:"NGS_Topo_US_2D",url:"http://services.arcgisonline.com/ArcGIS/rest/services/{layerType}/MapServer/tile/{z}/{y}/{x}.jpg",tileSize:256,f:"image",format:"png",dpi:96,transparent:!0,attribution:"ArcGIS",layers:""},initialize:function(t){t=t||{},window.L.setOptions(this,t),window.L.stamp(this)},onAdd:function(t){this._url=this.options.url,this.options.layerType&&this._url.indexOf("{layerType}/MapServer/tile/{z}/{y}/{x}")>0?this._url=this.options.url.replace("{layerType}",this.options.layerType):this._crs=this.options.crs||t.options.crs,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=null;if(this._url.indexOf("tile/{z}/{y}/{x}")>0){var n=this._getZoomForUrl();e=this._url.replace("{x}",t.x).replace("{y}",t.y).replace("{z}",n)}else{var r=this._tileCoordsToBounds(t),i=this._crs.project(r.getNorthWest()),o=this._crs.project(r.getSouthEast()),s={bbox:i.x+","+o.y+","+o.x+","+i.y,f:this.options.f,format:this.options.format,transparent:this.options.transparent,size:this.options.tileSize+","+this.options.tileSize,bboxsr:this._crs.code.split(":")[1],imagesr:this._crs.code.split(":")[1],dpi:96,layers:this.options.layers},a=window.L.Util.getParamString(s,e);a=a.slice(1,a.length),e=this._url+"/export?"+a}return e}}));e.ArcGISLayer=i,r.Zondy.Map.ArcGISLayer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={VEC:"vec",IMG:"img",CVA:"cva",CIA:"cia",VEC_IGS:"vec_igs",IMG_IGS:"img_igs",CVA_IGS:"cva_igs",CIA_IGS:"cia_igs"};e.TiandituType=r,Zondy.Enum.Map.TiandituType=Zondy.Enum.TiandituType=r;var i={VEC:"vector",RASTER:"raster",ROAD:"road",TERRAIN:"terrain",VEC_IGS:"vector_igs",RASTER_IGS:"raster_igs",ROAD_IGS:"road_igs",TERRAIN_IGS:"terrain_igs"};e.GoogleLayerType=i,Zondy.Enum.Map.GoogleLayerType=Zondy.Enum.GoogleLayerType=i;var o={ImageryWorld2D:"ESRI_Imagery_World_2D",StreetMapWorld2D:"ESRI_StreetMap_World_2D",TopoUS2D:"NGS_Topo_US_2D",WorldImagery:"World_Imagery",WorldPhysical:"World_Physical_Map",WorldShadedRelief:"World_Shaded_Relief",WorldStreet:"World_Street_Map",WorldTerrainBase:"World_Terrain_Base",WorldTopo:"World_Topo_Map",NatGeoWorldMap:"NatGeo_World_Map",OceanBasemap:"Ocean_Basemap",USATopoMaps:"USA_Topo_Maps"};e.ArcGISLayerType=o,Zondy.Enum.Map.ArcGISLayerType=Zondy.Enum.ArcGISLayerType=o;var s={LandScape:"landscape",CYCLE:"cycle",CycleTransport:"transport",OSM:"openstreetmap",OSM_HYB:"hyb",OSM_Quest:"mapquest",OSM_Q_SAT:"OSM_sat"};e.OpenStreetLayerType=s,Zondy.Enum.Map.OpenStreetLayerType=Zondy.Enum.OpenStreetLayerType=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var r=n(0),i=n(1),o=function(t,e){this.ArcID=0;var n=void 0!==e?e:{};(0,i.extend)(this,n),this.Dots=void 0!==t&&null!==t?t:null};e.Arc=o,r.Zondy.Object.Arc=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttDataRow=void 0;var r=n(0),i=n(1),o=function(t,e,n){var r=void 0!==n?n:{};(0,i.extend)(this,r),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};e.CAttDataRow=o,r.Zondy.Object.CAttDataRow=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyle=void 0;var r=n(0),i=n(1),o=(n(110),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow});e.CDisplayStyle=o,r.Zondy.Object.CDisplayStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(18);n(7);var s=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.point=void 0!==t&&null!==t?t:null,o.radious=void 0!==n&&null!==n?n:null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Tangram),r(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){var e=t.getCenter(),n=t.getRadius();this.point=new i.Zondy.Object.Point2D(e[0],e[1]),this.radious=n}}},{key:"toString",value:function(){return null===this.point||0===this.point.length||null===this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),e}();e.Circle=s,i.Zondy.Object.Circle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolygon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(18),o=n(7),s=n(121);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.polygonArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Tangram),r(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){this.polygonArr=[];for(var e=t.getLinearRingCount(),n=t.getLinearRings(),r=0;r<e;r++){for(var i=n[r].getCoordinates(),a=i.length,u=[],l=0;l<a;l++)u[l]=new o.Point2D(i[l][0],i[l][1]);this.polygonArr[r]=new s.Polygon(u)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null===this.polygonArr||0===this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),e}();e.MultiPolygon=a,Zondy.Object.MultiPolygon=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyLine=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(18),o=n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.nearDis=void 0!==r.nearDis&&null!==r.nearDis?parseFloat(r.nearDis):null,i.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Tangram),r(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getCoordinates(),n=e.length,r=0;r<n;r++)this.pointArr[r]=new o.Point2D(e[r][0],e[r][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!==this.nearDis&&(t+=";"+this.nearDis),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),e}();e.PolyLine=s,Zondy.Object.PolyLine=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectCls=void 0;var r=n(0),i=n(1),o=n(5),s=(n(44),function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.clsType=void 0!==e.clsType?e.clsType:o.VectClsType.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null});e.VectCls=s,r.Zondy.Object.VectCls=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleParse=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=void 0;var r=n(122),i=n(123),o=n(125),s=n(126),a=n(127),u=n(261),l=n(262),c=n(124),h=n(268);e.ContourNoteParam=r.ContourNoteParam,e.ContourParam=i.ContourParam,e.ContourZValue=o.ContourZValue,e.ContourRegionInfo=s.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=u.NetAnalyse,e.NetAnalysisExtent=l.NetAnalysisExtent,e.SlopLineParam=c.SlopLineParam,e.RuleParse=h.RuleParse},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalyse=void 0;var r=n(0),i=n(1),o=function(t){var e=void 0!==t?t:{};(0,i.extend)(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};e.NetAnalyse=o,r.Zondy.Object.NetAnalyse=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysisExtent=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=(n(1),n(10)),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.netClsUrl=void 0!==n.netClsUrl?n.netClsUrl:null,r.flagPosStr=void 0!==n.flagPosStr?n.flagPosStr:null,r.analyTp=void 0!==n.analyTp?n.analyTp:"UserMode",r.weight=void 0!==n.weight?n.weight:",Weight1,Weight1",r.outFormat=void 0!==n.outFormat?n.outFormat:"JSON",r.elementType=void 0!==n.elementType?n.elementType:2,r.nearDis=void 0!==n.nearDis?n.nearDis:.001,r.barrierPosStr=void 0!==n.barrierPosStr?n.barrierPosStr:null,r.roadName=void 0!==n.roadName?n.roadName:"name",r.baseUrl="igs/rest/netAnaly",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),r(e,[{key:"getNetInfo",value:function(t,e,n,r){null!=t&&void 0!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"addNetFlag",value:function(t,e,n,r,i){var o={};null!=r&&"POST"==r.toUpperCase()?(o.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var a=this.getFullUrl(),u=new s.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:e,processFailed:n}});null!=r&&"POST"==r.toUpperCase()?u.processAsync({method:"POST",data:JSON.stringify(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):u.processAsync()}},{key:"netAnalyse",value:function(t,e,n,r){this.partUrl="netAnalyse";var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,n,r){this.partUrl="comNetAnalyse";var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,n,r){this.partUrl="pluNetAnalyse";var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.NetAnalysisExtent=a,i.Zondy.Service.NetAnalysisExtent=a},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(264));window.Promise=r.default},function(t,e,n){"use strict";(function(r){var i,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(r,a){"object"===s(e)&&void 0!==t?t.exports=a():void 0===(o="function"==typeof(i=a)?i.call(e,n,e,t):i)||(t.exports=o)}(0,function(){var t=setTimeout;function e(){}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void o(e.promise,t)}i(e.promise,r)}else(1===t._state?i:o)(e.promise,t._value)})):t._deferreds.push(e)}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":s(e))||"function"==typeof e)){var n=e.then;if(e instanceof l)return t._state=3,t._value=e,void a(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,a(t)}catch(e){o(t,e)}}function o(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&l._immediateFn(function(){t._handled||l._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)n(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,i(e,t))},function(t){n||(n=!0,o(e,t))})}catch(t){if(n)return;n=!0,o(e,t)}}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}var c=l.prototype;return c.catch=function(t){return this.then(null,t)},c.then=function(t,r){var i=new this.constructor(e);return n(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,r,i)),i},l.all=function(t){return new l(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"===(void 0===a?"undefined":s(a))||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){o(t,e)},n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])})},l.resolve=function(t){return t&&"object"===(void 0===t?"undefined":s(t))&&t.constructor===l?t:new l(function(e){e(t)})},l.reject=function(t){return new l(function(e,n){n(t)})},l.race=function(t){return new l(function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)})},l._immediateFn="function"==typeof r&&function(t){r(t)}||function(e){t(e,0)},l._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},l})}).call(this,n(265).setImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(266),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(132))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){c(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},r=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(e){var n=a.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(c,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return o[i]=s,r(i),i++},u.clearImmediate=l}function l(t){delete o[t]}function c(t){if(s)setTimeout(c,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{l(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(132),n(70))},function(t,e,n){"use strict";!function(e){if(e.__disableNativeFetch||!e.fetch){a.prototype.append=function(t,e){t=o(t),e=s(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},a.prototype.delete=function(t){delete this.map[o(t)]},a.prototype.get=function(t){var e=this.map[o(t)];return e?e[0]:null},a.prototype.getAll=function(t){return this.map[o(t)]||[]},a.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},a.prototype.set=function(t,e){this.map[o(t)]=[s(e)]},a.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var n={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var i=[301,302,303,307,308];d.redirect=function(t,e){if(-1===i.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},e.Headers=a,e.Request=f,e.Response=d,e.fetch=function(t,e){return new Promise(function(r,i){var o;o=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var s=new XMLHttpRequest;var u=!1;function l(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599){if(u)return;return u=!0,void i(new TypeError("Network request failed"))}var e={status:t,statusText:s.statusText,headers:function(t){var e=new a;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in s?s.response:s.responseText;u||(u=!0,r(new d(n,e)))}}s.onreadystatechange=l,s.onload=l,s.onerror=function(){u||(u=!0,i(new TypeError("Network request failed")))},s.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in s&&n.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,void 0!==t&&t.exports&&(t.exports=e.fetch)}function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function h(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(n.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(n.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return function(t,e){var n=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(i)||r.match(i),s=[t];return o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,s),l(n)}(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t,e){var n=(e=e||{}).body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=function(t){var e=t.toUpperCase();return r.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n,e)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function d(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof a?e.headers:new a(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:void 0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=e.MapRules=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}],o=e.IgserverRules=[{type:"DynamicTile",id:2,title:"",description:"IGSMap2D",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"IGSMap2D",id:3,title:"",description:"IGServerREST",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSTile",id:5,title:"",description:"IGServerREST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"WMS",id:8,title:"WMS",description:"OGC-WMS",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WMTS",id:10,title:"WMTS",description:"OGC-WMTS",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}}],s=e.RuleParse=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"get",value:function(t,e,n,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GetMap",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"mapboxgl",l=void 0;if("number"==typeof t?l=o.find(function(e){return e.id===t}):"string"==typeof t&&(l=o.find(function(e){return e.title==t})),l){var c=l[s][a];for(c=(c=c.replace("{ip}",e)).replace("{port}",n);c.indexOf("{serverName}")>=0;)c=c.replace("{serverName}",r);var h=void 0;switch(u){case"mapboxgl":h=i.filter(function(t){return"mapboxgl"===t.type}),c=(c=(c=c.replace("{level}/{row}/{col}",h[0].rule)).replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}")).replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":h=i.filter(function(t){return"cesium"===t.type}),c=c.replace("{level}/{row}/{col}",h[0].rule)}return c}}},{key:"GetCapabilities",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,n,r,i,"GetCapabilities")}},{key:"GetMap",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mapboxgl";return this.get(t,e,n,r,i,"GetMap",o)}},{key:"GetFeatureInfo",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,n,r,i,"GetFeatureInfo")}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=void 0;var r=n(128),i=n(129),o=n(131),s=n(3),a=n(130);e.CommonServiceBase=r.CommonServiceBase,e.Events=i.Events,e.CORS=o.CORS,e.RequestTimeout=o.RequestTimeout,e.FetchRequest=o.FetchRequest,e.IgsServiceBase=s.IgsServiceBase,e.JSONFormat=a.JSONFormat;var u={Events:i.Events,CommonServiceBase:r.CommonServiceBase,CORS:o.CORS,RequestTimeout:o.RequestTimeout,FetchRequest:o.FetchRequest,IgsServiceBase:s.IgsServiceBase,JSONFormat:a.JSONFormat};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=void 0;var r=n(271),i=n(133),o=n(272),s=n(23),a=n(273),u=n(274),l=n(275);e.ColorInfo=r.ColorInfo,e.GDBInfo=i.GDBInfo,e.MapDoc=o.MapDoc,e.CatalogService=s.CatalogService,e.TileLayer=a.TileLayer,e.VectorLayer=u.VectorLayer,e.SystomInfo=l.SystomInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInfo=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.SystemLibID=void 0!==n.SystemLibID?n.SystemLibID:0,r.ColorNO=void 0!==n.ColorNO?n.ColorNO:6,r.Red=void 0!==n.Red?n.Red:0,r.Green=void 0!==n.Green?n.Green:0,r.Blue=void 0!==n.Blue?n.Blue:0,r.addNew=void 0!==n.addNew&&n.addNew,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CatalogService),r(e,[{key:"getColorNO",value:function(t,e,n){var r=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(r.SystemLibID=t.SystemLibID),void 0!==t.Red&&(r.Red=t.Red),void 0!==t.Green&&(r.Green=t.Green),void 0!==t.Blue&&(r.Blue=t.Blue),void 0!==t.addNew&&(r.addNew=t.addNew)),r.partUrl="ColorLib/getColorNO?f=json&libID="+r.SystemLibID+"&r="+r.Red+"&g="+r.Green+"&b="+r.Blue+"&addNew="+r.addNew;var i=r.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getColorRGB",value:function(t,e,n){var r=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(r.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(r.ColorNO=t.ColorNO)),r.partUrl="ColorLib/getColorRGB?f=json&libID="+r.SystemLibID+"&colorNO="+r.ColorNO;var i=r.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.ColorInfo=s,Zondy.Catalog.ColorInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDoc=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(23),a=n(3);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.docName=void 0!==n.docName?n.docName:null,r.mapIndex=void 0!==n.mapIndex?n.mapIndex:0,r.layerID=void 0!==n.layerID?n.layerID:0,r.version=void 0!==n.version?n.version:2,r.include=void 0!==n.include?n.include:"{includeDetails:true,includeSubs:false}",r.returnFullStyle=void 0!==n.returnFullStyle&&n.returnFullStyle,r.guid=void 0!==n.guid?n.guid:(0,o.newGuid)(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.CatalogService),r(e,[{key:"getMapDocList",value:function(t,e){this.partUrl="docs?v="+this.version+"&f=json";var n=this.getFullUrl();new a.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,n,r,i){var s=this;if("boolean"==typeof i&&(s.returnFullStyle=i),"boolean"==typeof e||"boolean"==typeof n){var u={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof n&&n};s.include=(0,o.toJSON)(u)}s.partUrl="docs/"+s.docName+"?include="+s.include+"&returnFullStyle="+s.returnFullStyle+"&guid="+s.guid+"&f=json";var l=s.getFullUrl();new a.IgsServiceBase(l,{eventListeners:{scope:s,processCompleted:t,processFailed:r}}).processAsync()}},{key:"getMapInfo",value:function(t,e,n){var r=this;"boolean"==typeof e&&(r.returnFullStyle=e),r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var i=r.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:n}}).processAsync()}},{key:"getMapDocTree",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"?tree=true&guid="+n.guid+"&f=json";var r=n.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerID+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var r=n.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers?f=json";var r=n.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/delete?layerIDs="+n.layerID+"&guid="+n.guid+"&f=json";var r=n.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,n){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/add?guid="+r.guid+"&f=json";var i=r.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,n){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/index?guid="+r.guid+"&f=json";var i=r.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,n,r){this.partUrl="legendInfo/"+this.docName+"?f=json&layerIndexes="+t+"&fields="+e;var i=this.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:n,processFailed:r}}).processAsync()}}]),e}();e.MapDoc=u,i.Zondy.Catalog.MapDoc=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.tileName=void 0!==n.tileName?n.tileName:null,r.version=void 0!==n.version?n.version:"2.0",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CatalogService),r(e,[{key:"getTileList",value:function(t,e){var n=this;n.partUrl="tiles?f=json",this.version&&("2.0"===n.version?n.partUrl+="&v=2":n.partUrl+="&v="+n.version);var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var n=this;n.partUrl="tiles/"+n.tileName+"?f=json",n.version&&(n.partUrl+="&v="+n.version);var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}]),e}();e.TileLayer=s,Zondy.Catalog.TileLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(1),o=n(133),s=n(3),a=n(44);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GDBInfo),r(e,[{key:"getSfclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?user="+n.User+"&psw="+n.Password+"&containAll="+this.containAll+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0||"mapgislocalplus"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,n){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,n){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/"+t+"?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/"+t+"?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,n,r){this.partUrl="layerinfo?gdbpUrl="+t+"&f=json&encryptPassword="+r+"&proj="+this.proj;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,n){var r=this;if(null!==(t=null!==t?t:null)&&null!==r.serverName&&null!==r.gdbName){null!==r.User&&null!==r.Password?r.partUrl="datasource/"+r.User+":"+r.Password+"@":r.partUrl="datasource/",null===t.clsName&&(t.clsName=(0,i.newGuid)()),r.partUrl+=r.serverName+"/"+r.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null===t.attStruct&&(t.attStruct=new a.CAttStruct);var o=r.getFullUrl();new s.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,n,r){var i=this;if(null!==i.serverName&&null!==i.gdbName&&null!==t&&null!==e){i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=i.getFullUrl();new s.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:n,processFailed:r}}).processAsync()}}}]),e}();e.VectorLayer=u,Zondy.Catalog.VectorLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.f=n.f||"json",r.page=n.page||0,r.pageCount=n.pageCount||20,r.systemLib=n.systemLib||null,r.type=n.type||null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CatalogService),r(e,[{key:"GetSystemLibrary",value:function(t,e){this.partUrl="systemlibraries?f="+this.f;var n=this.getFullUrl();new o.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetSymbol",value:function(t,e){var n=this,r="symbols?&systemLib="+n.systemLib+"&type="+n.type;n.f&&(r+="&f="+n.f),n.page&&(r+="&page="+n.page),n.size&&(r+="&size="+n.pageCount),n.partUrl=r;var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}]),e}();e.SystomInfo=s,Zondy.Catalog.SystomInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditDocFeature=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(71),s=n(3);var a=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.docName=void 0!==t?t:null,o.mapIndex=0,o.layerIndex=void 0!==n?n:0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.EditServiceBase),r(e,[{key:"add",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/addFeatures?f="+r.f+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/updateFeatures?f="+r.f+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/deleteFeatures?f="+r.f+"&objectIds="+t+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}}}]),e}();e.EditDocFeature=a,i.Zondy.Service.EditDocFeature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditLayerFeature=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(71),s=n(3);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.gdbp=void 0!==t?t:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.EditServiceBase),r(e,[{key:"add",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="layer/addFeatures?f="+r.f+"&gdbp="+r.gdbp+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="layer/updateFeatures?f="+r.f+"&gdbp="+r.gdbp+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,n){var r=this;if(void 0!==t){r.partUrl="layer/deleteFeatures?f="+r.f+"&objectIds="+t+"&gdbp="+r.gdbp+"&guid="+r.guid;var i=r.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:e,processFailed:n}}).processAsync()}}}]),e}();e.EditLayerFeature=a,i.Zondy.Service.EditLayerFeature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQuery=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(36),s=n(137),a=n(3);var u=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.queryParam=t,s.mapName=n,s.mapIndex=0,s.layerIndex=r,s.baseUrl="igs/rest/extend/MultiGeo",s.partUrl="docs/"+s.mapName+"/"+s.mapIndex.toString()+"/"+s.layerIndex+"/Geoquery",s.partUrl+=t.getParameterURL(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.QueryServiceBase),r(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof s.MultiGeoQueryParameter){var n=null;"point"===this.queryParam.geometryType?n={pointArr:this.queryParam.geometry}:"line"===this.queryParam.geometryType?n={lineArr:this.queryParam.geometry}:"polygon"===this.queryParam.geometryType&&(n={PolygonObjs:this.queryParam.geometry});var r=this.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),e}();e.MultiGeoQuery=u,i.Zondy.Service.MultiGeoQuery=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQuery=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(36),s=n(138),a=n(3);var u=function(t){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=r||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return o.queryParam=t,o.gdbp=n,o.baseUrl="igs/rest/extend/dxlcz",o.partUrl="objlayer/query?gdbp="+n,o.partUrl+=t.getParameterURL(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.QueryServiceBase),r(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof s.ObjClsQueryParameter){var n=this.getFullUrl();new a.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.ObjClsQuery=u,i.Zondy.Service.ObjClsQuery=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryLayerFeature=void 0;var r=n(0),i=n(36);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.queryParam=t,i.partUrl="layer/query",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.QueryServiceBase),e}();e.QueryLayerFeature=o,r.Zondy.Service.QueryLayerFeature=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryUnifyParameter=void 0;var r=n(139),i=n(48),o=n(140),s=n(282);var a=e.QueryUnifyParameter=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.mix)(r.QueryByLayerParameter,i.QueryParameter,o.QueryDocFeature)),e}();e.default=a},function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;u&&i(this,new u)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}},o=!0,s=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c&&i(r,c),c&&i(r.prototype,c.prototype)}}catch(t){s=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}return r}function i(t,e){var n=!0,r=!1,i=void 0;try{for(var o,s=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if("constructor"!==a&&"prototype"!==a&&"name"!==a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,u)}}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}Object.defineProperty(e,"__esModule",{value:!0}),e.mix=r,e.copyProperties=i,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(24),o=n(134),s=n(11);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url;var n=this.url.split("http://");this._ip=n[1].split(":")[0];var r=n[1].split(":")[1].split("/");this._port=r[0],this.url.indexOf("igs/rest/mrfs/docs")>-1&&(this._mapId=r[r.length-1])}return r(t,null,[{key:"get",value:function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onreadystatechange=function(){4==r.readyState&&200==r.status||304==r.status?e.call(this,r.responseText):4===r.readyState&&200!==r.status&&304!==r.status&&n.call(this,r.responseText)},r.send()}}]),t}();a.prototype.query=function(t,e,n){t=i.BaseParameter.formatParam(t);var r,a,u=Object.assign({},t),l=void 0,c=void 0,h=void 0,f=void 0,p=void 0;if("string"==typeof(f=u.layers)&&(f=f.split(",")),a=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"],Object.keys(u).forEach(function(t){switch(t){case"pagination":u.recordNumber=u.pagination;break;case"orderBy":u.orderField=u.orderBy;break;case"spatialRelationType":u.MustInside="MustInside"===u.spatialRelationType,u.Intersect="Intersect"===u.spatialRelationType;break;case"objectIds":u.objectIds=u.objectIds.join(",")}}),u.hasOwnProperty("geometry")&&u.geometry||u.hasOwnProperty("rectangle")&&u.rectangle.length>0)if(l=new o.QueryFeatureRule({EnableDisplayCondition:u.enableDisplayCondition,MustInside:u.MustInside,CompareRectOnly:u.compareRectOnly,Intersect:u.Intersect}),!u.hasOwnProperty("geometry")&&u.rectangle.length>0)h=new s.Rectangle(u.rectangle[0],u.rectangle[1],u.rectangle[2],u.rectangle[3]),delete u.rectangle;else if("Point"===u.geometry.type)h=new s.Point2D(u.geometry.coordinates[0],u.geometry.coordinates[1],{nearDis:"0.001"}),delete u.geometry;else if("LineString"===u.geometry.type||"Polygon"===u.geometry.type){for(var d=[],y=0;y<u.geometry.coordinates.length;y++)d.push(new s.Point2D(u.geometry.coordinates[y][0],u.geometry.coordinates[y][1]));switch(u.geometry.type){case"LineString":h=new s.PolyLine(d);break;case"Polygon":h=new s.Polygon(d)}delete u.geometry}else if("MultiPolygon"===u.geometry.type){for(var g=[],v=0;v<u.geometry.coordinates.length;v++){for(var m=[],_=u.geometry.coordinates[v],b=0;b<_.length;b++)m.push(new s.Point2D(_[b][0],_[b][1]));g.push(new s.Polygon(m))}h=new s.MultiPolygon(g),delete u.geometry}r=new o.QueryFeatureStruct({IncludeGeometry:u.IncludeGeometry,IncludeAttribute:u.IncludeAttribute,IncludeWebGraphic:u.IncludeWebGraphic});var S=new RegExp("^[0-9]+$");if(f.length<=0)throw new Error("");if(S.test(f[0]))c=new o.QueryParameter,p=new o.QueryDocFeature(c,this._mapId,f.join(","),{ip:this._ip,port:this._port});else{if(!("string"==typeof f[0]&&f[0].indexOf("gdbp")>-1))throw new Error("Idgdbp");c=new o.QueryByLayerParameter(f),p=new o.QueryLayerFeature(c,{ip:this._ip,port:this._port})}h&&(c.geometry=h,c.rule=l),c.struct=r;for(var x=Object.assign({},u),w=0;w<a.length;w++)x.hasOwnProperty(a[w])&&delete x[a[w]];(0,s.extend)(c,x),p.query(function(t){e&&e(t)},function(t){n&&n(t)})},a.prototype.add=function(t,e,n,r){var i=this;this.getFieldAtt(e,function(o){var s=i.getFeatureSet(o,t);i.getFeatureService(e).add(s,n,r)})},a.prototype.update=function(t,e,n,r){var i=this;this.getFieldAtt(e,function(o){var s=i.getFeatureSet(o,t);i.getFeatureService(e).update(s,n,r)})},a.prototype.delete=function(t,e,n,r){t=t.join(","),this.getFeatureService(e).deletes(t,n,r)},a.prototype.getFeatureSet=function(t,e){for(var n=[],r=t.FieldAtt.FldType,i=0;i<r.length;i++)n.push(r[i].substr(3,r[i].length).toLowerCase());t.FieldAtt.FldType=n;for(var o=new s.FeatureSet({AttStruct:new s.CAttStruct(t.FieldAtt)}),a=0;a<e.length;a++){for(var u=e[a].hasOwnProperty("geometry")&&e[a].geometry,l=void 0,c=void 0,h=void 0,f=[],p=0;p<t.FieldAtt.FldName.length;p++)e[a].attributes.hasOwnProperty(t.FieldAtt.FldName[p])?f.push(e[a].attributes[t.FieldAtt.FldName[p]]):f.push(null);var d=new s.Feature({AttValue:f}),y=void 0;if(u){var g=e[a].geometryType,v=void 0,m=void 0,_=void 0,b=void 0,S=void 0,x=void 0,w=void 0,P=void 0;switch(l=e[a].geometry,g){case"Point":c=[];for(var C=0;C<l.length;C++)S=new s.GPoint(l[C].coordinates[0],l[C].coordinates[1]),c.push(S);v=new s.FeatureGeometry({PntGeom:c}),y=1,e[a].style&&(_=new s.CPointInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:1,PntInfo:_}));break;case"LineString":c=[];for(var O=0;O<l.length;O++){x=[];for(var T=0;T<l[O].coordinates.length;T++)x.push(new s.Point2D(l[O].coordinates[T].x,l[O].coordinates[T].y));w=new Arc(x),b=new s.AnyLine([w]),h=new s.GLine(b),c.push(h)}v=new s.FeatureGeometry({LinGeom:c}),y=2,e[a].style&&(_=new s.CLineInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:2,LinInfo:_}));break;case"Polygon":c=[];for(var E=0;E<l.length;E++){b=[];for(var L=[],M=0;M<l[E].exterior.length;M++)L.push(new s.Point2D(l[E].exterior[M].x,l[E].exterior[M].y));b.push(new s.AnyLine([new Arc(L)]));for(var I=0;I<l[E].interior.length;I++){for(var N=[],A=0;A<l[E].interior[I].length;A++)N.push(new s.Point2D(l[E].interior[I][A].x,l[E].interior[I][A].y));b.push(new s.AnyLine([new Arc(N)]))}P=new s.GRegion(b),c.push(P)}v=new s.FeatureGeometry({RegGeom:c}),y=3,e[a].style&&(_=new s.CRegionInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:3,RegInfo:_}))}d.fGeom=v,d.GraphicInfo=m,d.ftype=y}e[a].FID&&d.setFID(e[a].FID),o.addFeature(d)}return o},a.prototype.getFeatureService=function(t){return t.indexOf("gdbp")>=0?new o.EditLayerFeature(t):new o.EditDocFeature(this._mapId,t,{ip:this._ip,port:this._port})},a.prototype.getFieldAtt=function(t,e){var n=this;t.indexOf("gdbp")>=0?this.getGDBPInfo(t,e):this.getLayerInfo(t,function(t){n.getGDBPInfo(t,e)})},a.prototype.getGDBPInfo=function(t,e){a.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t),e(t)})},a.prototype.getLayerInfo=function(t,e){a.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){var n=(t=JSON.parse(t)).URL;e(n)})},e.FeatureService=a,s.Zondy.Service.FeatureService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SQLParameter=void 0;var r=n(24),i=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.where=void 0,(0,i.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.BaseParameter),e}();e.SQLParameter=o,i.Zondy.Service.SQLParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryParameter=void 0;var r=n(24),i=n(11),o=n(73),s=n(77),a=n(78);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.geometry=void 0,n.where=void 0,n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersect",(0,i.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.BaseParameter),e}();u.prototype.fromGeoJSON=function(t){if(t){switch(t.geometry.type){case"Point":this.geometry=new o.VPoint({coordinates:t.geometry.coordinates});break;case"LineString":this.geometry=new s.VPolyline({coordinates:t.geometry.coordinates});break;case"Polygon":this.geometry=new a.VPolygon({coordinates:t.geometry.coordinates[0]})}}},e.GeometryParameter=u,i.Zondy.Service.GeometryParameter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleParameter=void 0;var r=n(24),i=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.where=void 0,n.rectangle=[],n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersects",(0,i.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.BaseParameter),e}();e.RectangleParameter=o,i.Zondy.Service.RectangleParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectIdsParameter=void 0;var r=n(24),i=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.objectIds=[],(0,i.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.BaseParameter),e}();e.ObjectIdsParameter=o,i.Zondy.Service.ObjectIdsParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(11),o=n(73),s=n(77),a=n(78);var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geometry=void 0,this.geometryType=void 0,this.attributes=void 0,this.style=void 0,this.FID=void 0,(0,i.extend)(this,e)}return r(t,null,[{key:"fromQueryResult",value:function(e){if(!e.hasOwnProperty("SFEleArray")||!e.hasOwnProperty("AttStruct")||e.hasOwnProperty("SFEleArray")&&!e.SFEleArray||e.hasOwnProperty("AttStruct")&&!e.AttStruct)return[];for(var n=e.SFEleArray,r=e.AttStruct,i=[],u=void 0,l=0;l<n.length;l++){for(var c={},h=[],f=void 0,p=0;p<n[l].AttValue.length;p++)""!==n[l].AttValue[p]&&(c[r.FldName[p]]=n[l].AttValue[p]);if(n[l].fGeom)switch(n[l].ftype){case 1:for(var d=n[l].fGeom.PntGeom,y=0;y<d.length;y++){var g=new o.VPoint({coordinates:[d[y].Dot.x,d[y].Dot.y]});h.push(g),f="Point"}break;case 2:for(var v=n[l].fGeom.LinGeom,m=0;m<v.length;m++){var _=new s.VPolyline({coordinates:v[m].Line.Arcs[0].Dots});h.push(_),f="LineString"}break;case 3:for(var b=n[l].fGeom.RegGeom,S=0;S<b.length;S++){var x=new a.VPolygon;x.exterior=b[S].Rings[0].Arcs[0].Dots;for(var w=1;w<b[S].Rings.length;w++)x.interior.push(b[S].Rings[w].Arcs[0].Dots);h.push(x),f="Polygon"}}var P=void 0;if(n[l].GraphicInfo){var C=n[l].GraphicInfo;switch(C.InfoType){case 1:P=C.PntInfo;break;case 2:P=C.LinInfo;break;case 3:P=C.RegInfo}}u=new t({attributes:c,FID:n[l].FID,geometry:h,geometryType:f,style:P}),i.push(u)}return i}},{key:"fromGeoJSON",value:function(e){var n=void 0,r=[];if(!e.hasOwnProperty("type"))throw new Error("geoJSON");if("Feature"===e.type)return n=new t({geometry:t.geometry,attributes:e.properties});if("FeatureCollection"===e.type){for(var i=e.features,o=void 0,s=void 0,u=void 0,l=0;l<i.length;l++){switch(o=[],u=i[l].geometry.coordinates,i[l].geometry.type){case"Point":o.push(i[l].geometry);break;case"LineString":s=[];for(var c=0;c<u.length;c++)s.push({x:Number(u[c][0]),y:Number(u[c][1])});i[l].geometry.coordinates=s,o.push(i[l].geometry);break;case"Polygon":for(var h=new a.VPolygon,f=0;f<u[0].length;f++)h.exterior.push({x:Number(u[0][f][0]),y:Number(u[0][f][1])});for(var p=1;p<u.length;p++){for(var d=[],y=0;y<u[p].length;y++)d.push({x:Number(u[p][y][0]),y:Number(u[p][y][1])});h.exterior.push(d)}o.push(h)}n=new t({geometry:o,attributes:i[l].properties,geometryType:i[l].geometry.type}),r.push(n)}return r}throw new Error("geoJSON")}},{key:"toAntTableData",value:function(e){for(var n=[],r=t.fromQueryResult(e),i=0;i<r.length;i++)n.push(Object.assign(r[i].attributes,{key:r[i].FID?r[i].FID:i}));return n}},{key:"resultToGeojson",value:function(e){var n=t.fromQueryResult(e),r=[];n=JSON.parse(JSON.stringify(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));for(var i=void 0,o=0;o<n.length;o++)i=t.polygonToGeojson(n[o]),r=r.concat(i);return{type:"feature",features:r}}},{key:"polygonToGeojson",value:function(t){for(var e=void 0,n=[],r=t.geometry,i=t.properties,o=0;o<r.length;o++)e={},"Polygon"===r[o].type&&(r[o].coordinates=r[o].coordinates.concat(r[o].exterior,r[o].interior)),e.geometry=r[o],e.properties=i,n.push(e);return n}}]),t}();e.VFeature=u,i.Zondy.Service.VFeature=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=void 0;var r=n(14),i=n(79),o=n(290),s=n(291),a=n(49),u=n(292),l=n(293),c=n(294),h=n(295),f=n(80),p=n(296),d=n(297),y=n(298),g=n(81),v=n(299),m=n(300),_=n(82),b=n(301),S=n(302),x=n(303);e.AnalysisBase=r.AnalysisBase,e.ClassBufferBase=i.ClassBufferBase,e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=s.ClassBufferBySingleRing,e.ClipBase=a.ClipBase,e.ClipByCircle=u.ClipByCircle,e.ClipByLayer=l.ClipByLayer,e.ClipByPolygon=c.ClipByPolygon,e.ContourAnalyse=h.ContourAnalyse,e.FeatureBuffBase=f.FeatureBuffBase,e.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing,e.NetAnalysis=y.NetAnalysis,e.OverlayBase=g.OverlayBase,e.OverlayByLayer=v.OverlayByLayer,e.OverlayByPolygon=m.OverlayByPolygon,e.ProjectBase=_.ProjectBase,e.ProjectByLayer=b.ProjectByLayer,e.ProjectBySRID=S.ProjectBySRID,e.FunctionWareService=x.FunctionWareService},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferByMultiplyRing=void 0;var r=n(0),i=n(79);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.flowID="600232",r.radiusStr=void 0!==n.radiusStr?n.radiusStr:"2,4,8,10",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ClassBufferBase),e}();e.ClassBufferByMultiplyRing=o,r.Zondy.Service.ClassBufferByMultiplyRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBySingleRing=void 0;var r=n(0),i=n(79);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.leftRad=void 0!==n.leftRad?n.leftRad:.001,r.rightRad=void 0!==n.rightRad?n.rightRad:.001,r.isByAtt=void 0===n.isByAtt||n.isByAtt,r.fldName=void 0!==n.fldName?n.fldName:null,r.dynPrjRad=void 0!==n.dynPrjRad?n.dynPrjRad:0,r.flowID="600231",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ClassBufferBase),e}();e.ClassBufferBySingleRing=o,r.Zondy.Service.ClassBufferBySingleRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByCircle=void 0;var r=n(0),i=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,r.center=void 0!==n.center?n.center:null,r.radius=void 0!==n.radius?n.radius:null,r.step=void 0!==n.step?n.step:.001,r.flowID="600229",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ClipBase),e}();e.ClipByCircle=o,r.Zondy.Service.ClipByCircle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByLayer=void 0;var r=n(0),i=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo1=void 0!==n.srcInfo1?n.srcInfo1:null,r.srcInfo2=void 0!==n.srcInfo2?n.srcInfo2:null,r.flowID="600230",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ClipBase),e}();e.ClipByLayer=o,r.Zondy.Service.ClipByLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByPolygon=void 0;var r=n(0),i=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,r.strPos=void 0!==n.strPos?n.strPos:null,r.flowID="600228",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ClipBase),e}();e.ClipByPolygon=o,r.Zondy.Service.ClipByPolygon=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourAnalyse=void 0;var r=n(0),i=(n(1),n(14));n(3),n(127),n(123);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.flowID="600320",r.linSfclsURL=void 0!==n.linSfclsURL?n.linSfclsURL:null,r.regSfclsURL=void 0!==n.regSfclsURL?n.regSfclsURL:null,r.annoClsURL=void 0!==n.annoClsURL?n.annoClsURL:null,r.meshingParam=void 0!==n.meshingParam?n.meshingParam:null,r.contourParam=void 0!==n.contourParam?n.contourParam:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.ContourAnalyse=o,r.Zondy.Service.ContourAnalyse=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffByMultiplyRing=void 0;var r=n(0),i=n(80);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.radiusStr=void 0!==n.radiusStr?n.radiusStr:"0.003,0.002,0.001",r.flowID="600239",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.FeatureBuffBase),e}();e.FeatureBuffByMultiplyRing=o,r.Zondy.Service.FeatureBuffByMultiplyRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBySingleRing=void 0;var r=n(0),i=n(80);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.leftRad=void 0!==n.leftRad?n.leftRad:.001,r.rightRad=void 0!==n.rightRad?n.rightRad:.001,r.flowID="600238",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.FeatureBuffBase),e}();e.FeatureBuffBySingleRing=o,r.Zondy.Service.FeatureBuffBySingleRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysis=void 0;var r=n(0),i=n(14),o=n(5);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.netClsUrl=void 0!==n.netClsUrl?n.netClsUrl:null,r.flagPosStr=void 0!==n.flagPosStr?n.flagPosStr:null,r.barrierPosStr=void 0!==n.barrierPosStr?n.barrierPosStr:null,r.analyType=void 0!==n.analyType?n.analyType:o.NetAnalyType.UserMode,r.weight=void 0!==n.weight?n.weight:",Weight1,Weight1",r.elementType=void 0!==n.elementType?n.elementType:o.NetElemType.Edge,r.nearDis=void 0!==n.nearDis?n.nearDis:.001,r.outFormat=void 0!==n.outFormat?n.outFormat:"json",r.flowID="600233",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.AnalysisBase),e}();e.NetAnalysis=s,r.Zondy.Service.NetAnalysis=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByLayer=void 0;var r=n(0),i=n(81);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.srcInfo2=void 0!==n.srcInfo2?n.srcInfo2:null,r.flowID="600227",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.OverlayBase),e}();e.OverlayByLayer=o,r.Zondy.Service.OverlayByLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByPolygon=void 0;var r=n(0),i=n(81);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.strGRegionXML=void 0!==n.strGRegionXML?n.strGRegionXML:null,r.inFormat=void 0!==n.inFormat?n.inFormat:"json",r.flowID="600237",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.OverlayBase),e}();e.OverlayByPolygon=o,r.Zondy.Service.OverlayByPolygon=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectByLayer=void 0;var r=n(0),i=n(82),o=n(1);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{};(0,o.extend)(r,t);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.flowID="600235",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ProjectBase),e}();e.ProjectByLayer=s,r.Zondy.Service.ProjectByLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=void 0;var r=n(0),i=n(82),o=n(1);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{};(0,o.extend)(r,t);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.flowID="600234",i.srID=void 0!==r.srID?r.srID:32,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.ProjectBase),e}();e.ProjectBySRID=s,r.Zondy.Service.ProjectBySRID=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(14),s=n(3),a=n(1);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.guid=n.guid?n.guid:(0,a.newGuid)(),r.f=void 0!==n.f?n.f:"json",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.AnalysisBase),r(e,[{key:"executeWorkFlow",value:function(t,e,n,r,i,o){n||(n=!1);var a={};null!==o&&"POST"===o.toUpperCase()?(a.paraValues=e,this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+n+"&guid="+this.guid):this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+n+"&guid="+this.guid;var u=this.getFullUrl(),l=new s.IgsServiceBase(u,{eventListeners:{scope:this,processCompleted:r,processFailed:i}});null!==o&&"POST"===o.toUpperCase()?l.processAsync({method:"POST",data:JSON.stringify(a)}):l.processAsync()}},{key:"getInstanceMessage",value:function(t,e,n){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getInstanceOutPutValue",value:function(t,e,n,r){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:n,processFailed:r}}).processAsync()}},{key:"getInstanceResult",value:function(t,e,n){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getInstanceStatus",value:function(t,e,n){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getWorkFlowGroups",value:function(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfoByID",value:function(t,e,n){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getWorkFlowInfos",value:function(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfosByGroup",value:function(t,e,n){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getFolder1",value:function(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder2",value:function(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder3",value:function(t,e,n){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.FunctionWareService=u,i.Zondy.Service.FunctionWareService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=void 0;var r=n(305),i=n(306),o=n(83),s=n(85),a=n(84),u=n(20),l=n(307),c=n(308),h=n(309),f=n(310),p=n(311);e.CalArea=r.CalArea,e.CalPolyLineLength=i.CalPolyLineLength,e.CalServiceBase=o.CalServiceBase,e.CProjectBySRSID=s.CProjectBySRSID,e.CProjectParam=a.CProjectParam,e.GeometryAnalysisBase=u.GeometryAnalysisBase,e.ProjectDots=l.ProjectDots,e.ProjectRang=c.ProjectRang,e.Smooth=h.Smooth,e.TopAnalysis=f.TopAnalysis,e.CoordinateElpTrans=p.CoordinateElpTrans},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalArea=void 0;var r=n(0),i=n(83),o=n(1);n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{};(0,o.extend)(r,{dots:t});var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.partUrl="geomservice/calArea?f=json",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CalServiceBase),e}();e.CalArea=s,r.Zondy.Service.CalArea=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalPolyLineLength=void 0;var r=n(0),i=n(83),o=n(1);n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n||{};(0,o.extend)(r,{dots:t});var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return i.partUrl="geomservice/calLength?f=json",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.CalServiceBase),e}();e.CalPolyLineLength=s,r.Zondy.Service.CalPolyLineLength=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectDots=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=(n(7),n(84),n(3));var a=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=i||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.InputDots=t,s.SrcProjParam=n,s.DesProjParm=r,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var n={};n.InputDots=this.InputDots,n.SrcProjParam=this.SrcProjParam,n.DesProjParm=this.DesProjParm;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.ProjectDots=a,i.Zondy.Service.ProjectDots=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectRang=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.gdbsvrName=void 0!==n.gdbsvrName?n.gdbsvrName:"MapGISLocal",r.gdbName=void 0!==n.gdbName?n.gdbName:null,r.srefID=void 0!==n.srefID?n.srefID:0,r.desfID=void 0!==n.desfID?n.desfID:0,r.userName=void 0!==n.userName?n.userName:null,r.password=void 0!==n.password?n.password:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"execute",value:function(t,e,n){var r="";t&&(r=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null===this.userName||null===this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+r:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+r+"&userName="+this.userName+"&password="+this.password;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.ProjectRang=a,i.Zondy.Service.ProjectRang=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=(n(7),n(3));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.type=void 0!==n.type?n.type:0,r.step=void 0!==n.step?n.step:1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,n){if(2==this.type){if(t.length<4)return void alert("Beizer")}else if(t.length<3)return void alert("");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.Smooth=a,i.Zondy.Service.Smooth=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=n(3),a=(n(67),n(68),n(69),n(1));var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.pnt=void 0!==n.pnt?n.pnt:null,r.line=void 0!==n.line?n.line:null,r.reg=void 0!==n.reg?n.reg:null,r.nearDis=void 0!==n.nearDis?n.nearDis:.01,r.relativeObj=void 0!==n.relativeObj?n.relativeObj:null,r.p_onSuccess=void 0!==n.p_onSuccess?n.p_onSuccess:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=(0,a.getTopAnalysisResult)(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(i=this).p_onSuccess=t;var n={};n.NearDis=this.nearDis,n.Pnt=this.pnt,n.Line=this.line,n.Reg=this.reg,n.RelativeObj=this.relativeObj,i.partUrl="geomservice/topanalysis?f=json";var r=i.getFullUrl(),i=this;new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:i.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.TopAnalysis=u,i.Zondy.Service.TopAnalysis=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(20),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.points=void 0!==n.points?n.points:"",r.dx=void 0!==n.dx?n.dx:"",r.dy=void 0!==n.dy?n.dy:"",r.dz=void 0!==n.dz?n.dz:"",r.m=void 0!==n.m?n.m:"",r.wx=void 0!==n.wx?n.wx:"",r.wy=void 0!==n.wy?n.wy:"",r.wz=void 0!==n.wz?n.wz:"",r.srcsrsname=void 0!==n.srcsrsname?n.srcsrsname:"",r.dessrsname=void 0!==n.dessrsname?n.dessrsname:"",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),r(e,[{key:"coordinateTrans",value:function(t,e,n){var r={};null!==n&&"POST"===n.toUpperCase()?(r.paraValues="",this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname):(r=this,this.partUrl="geomservice/transcoordinate");var i=this.getFullUrl(),o=new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}});null!==n&&"POST"===n.toUpperCase()?o.processAsync({method:"POST",data:JSON.stringify(r)}):o.processAsync()}}]),e}();e.CoordinateElpTrans=a,i.Zondy.Service.CoordinateTransform=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=void 0;var r=n(313),i=n(314),o=n(315),s=n(316),a=n(317),u=n(25);e.GetDocImageService=r.GetDocImageService,e.GetLayerImageService=i.GetLayerImageService,e.GetMapImageService=o.GetMapImageService,e.GetMapInfoService=s.GetMapInfoService,e.GetTileImageService=a.GetTileImageService,e.MapServiceBase=u.MapServiceBase},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetDocImageService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(25),s=(n(85),n(1));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.docName=void 0!==n.docName?n.docName:null,r.cache=void 0!==n.cache&&n.cache,r.cache?(r.level=void 0!==n.level?n.level:0,r.row=void 0!==n.row?n.row:0,r.col=void 0!==n.col?n.col:0,r.update=void 0!==n.update&&n.update):(r.layers=void 0!==n.layers?n.layers:null,r.style=void 0!==n.style?n.style:null,r.picType=void 0!==n.picType?n.picType:"gif",r.bbox=void 0!==n.bbox?n.bbox:null,r.filters=void 0!==n.filters?n.filters:null,r.picWidth=void 0!==n.picWidth?n.picWidth:512,r.picHeight=void 0!==n.picHeight?n.picHeight:512,r.proj=void 0!==n.proj?n.proj:null,r.guid=void 0!==n.guid?n.guid:(0,s.newGuid)()),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),r(e,[{key:"GetMapImage",value:function(){return this.docName?(!0===this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!==this.bbox&&(this.partUrl+="bbox="+this.bbox),null!==this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!==this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!==this.layers&&(this.partUrl+="&layers="+this.layers),null!==this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.proj&&(this.partUrl+="&proj="+JSON.stringify(this.proj)),null!==this.picType&&(this.partUrl+="&f="+this.picType),null!==this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),e}();e.GetDocImageService=a,i.Zondy.Service.GetDocImageService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetLayerImageService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(25);n(116);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.gdbps=void 0!==n.gdbps?n.gdbps:null,r.picType=void 0!==n.picType?n.picType:"gif",r.style=void 0!==n.style?n.style:null,r.bbox=void 0!==n.bbox?n.bbox:null,r.filters=void 0!==n.filters?n.filters:null,r.picWidth=void 0!==n.picWidth?n.picWidth:512,r.picHeight=void 0!==n.picHeight?n.picHeight:512,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),r(e,[{key:"GetLayerImage",value:function(){if(null!==this.gdbps&&null!==this.picWidth&&null!==this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");for(var t=this.gdbps.split(","),e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.filters&&(this.partUrl+="&filters="+this.filters),null!==this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),e}();e.GetLayerImageService=s,i.Zondy.Service.GetLayerImageService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapImageService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(25),s=n(5);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.mapName=void 0!==n.mapName?n.mapName:null,r.mapType=void 0!==n.mapType?n.mapType:s.MapType.Doc,r.mapType===s.MapType.Tile?(r.level=void 0!==n.level?n.level:0,r.row=void 0!==n.row?n.row:0,r.col=void 0!==n.col?n.col:0):(r.picType=void 0!==n.picType?n.picType:"gif",r.picWidth=void 0!==n.picWidth?n.picWidth:512,r.picHeight=void 0!==n.picHeight?n.picHeight:512,r.xmin=void 0!==n.xmin?n.xmin:null,r.xmax=void 0!==n.xmax?n.xmax:null,r.ymin=void 0!==n.ymin?n.ymin:null,r.ymax=void 0!==n.ymax?n.ymax:null),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),r(e,[{key:"GetImage",value:function(){return this.mapName?(this.mapType===s.MapType.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!==this.xmin&&null!==this.xmax&&null!==this.ymin&&null!==this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),e}();e.GetMapImageService=a,i.Zondy.Service.GetMapImageService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapInfoService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(25),s=n(3),a=n(1);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.mapName=void 0!==n.mapName?n.mapName:null,r.guid=void 0!==n.guid?n.guid:(0,a.newGuid)(),r.token=n.token,r.type=n.type,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),r(e,[{key:"GetMapInfo",value:function(t,e){var n=this;if(n.mapName){n.partUrl="info/"+this.mapName;var r=[];n.guid&&r.push("guid="+n.guid),this.token&&r.push("token="+n.token),this.type&&r.push("type="+n.type),r.length>0&&(n.partUrl+="?"+r.join("&"));var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.GetMapInfoService=u,i.Zondy.Service.GetMapInfoService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTileImageService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(25);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.hdfName=void 0!==n.hdfName?n.hdfName:null,r.level=void 0!==n.level?n.level:0,r.row=void 0!==n.row?n.row:0,r.col=void 0!==n.col?n.col:0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),r(e,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),e}();e.GetTileImageService=s,i.Zondy.Service.GetTileImageService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=void 0;var r=n(141),i=n(142),o=n(143),s=n(144),a=n(146),u=n(149),l=n(145),c=n(150),h=n(151),f=n(152),p=n(147),d=n(153),y=n(50),g=n(155),v=n(156),m=n(157),_=n(148),b=n(158),S=n(12),x=n(16),w=n(159),P=n(160),C=n(154),O=n(161),T=n(86),E=n(319),L=n(320),M=n(162);e.CAllOtherDataItemInfoSource=r.CAllOtherDataItemInfoSource,e.CAnnInfo=i.CAnnInfo,e.CChartLabelFormat=o.CChartLabelFormat,e.CChartTheme=s.CChartTheme,e.CChartThemeInfo=a.CChartThemeInfo,e.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo,e.CChartType=l.CChartType,e.CDotDensityTheme=c.CDotDensityTheme,e.CFourColorTheme=h.CFourColorTheme,e.CGraduatedSymbolTheme=f.CGraduatedSymbolTheme,e.CLinInfo=p.CLinInfo,e.CMultiClassTheme=d.CMultiClassTheme,e.CPntInfo=y.CPntInfo,e.CRandomTheme=g.CRandomTheme,e.CRangeTheme=v.CRangeTheme,e.CRangeThemeInfo=m.CRangeThemeInfo,e.CRegInfo=_.CRegInfo,e.CSimpleTheme=b.CSimpleTheme,e.CTheme=S.CTheme,e.CThemeInfo=x.CThemeInfo,e.CUniqueTheme=w.CUniqueTheme,e.CUniqueThemeInfo=P.CUniqueThemeInfo,e.ExpInfo=C.ExpInfo,e.FolderInfo=O.FolderInfo,e.FolderInfoAttribute=T.FolderInfoAttribute,e.ItemValue=E.ItemValue,e.ThemeOper=L.ThemeOper,e.ThemesInfo=M.ThemesInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemValue=void 0;var r=n(0),i=n(1),o=n(5),s=function(t,e,n,r){var s=void 0!==r?r:{};(0,i.extend)(this,s),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==n?n:o.CItemType.RangeTheme};e.ItemValue=s,r.Zondy.Object.Theme.ItemValue=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeOper=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(10),s=n(1),a=n(3),u=n(153),l=n(158),c=n(144),h=n(152),f=n(150),p=n(155),d=n(151),y=n(159),g=n(156),v=n(86),m=n(161),_=n(162);var b=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n||{}).baseUrl="igs/rest/theme";var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.guid=null!==t?t:(0,s.newGuid)(),r.p_onSuccess=void 0!==n.p_onSuccess?n.p_onSuccess:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),r(e,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new m.FolderInfo;if((0,s.extendDeep)(e,t.result||t),null!==e&&null!==e.attribute&&e.attribute.length>0){for(var n=[],r=null,i=0;i<e.attribute.length;i++)if(n[i]=new _.ThemesInfo,null!==e.attribute[i]&&(n[i].LayerName=e.attribute[i].name,null!==(r=JSON.parse(e.attribute[i].value))&&r.length>0)){n[i].ThemeArr=[];for(var o=0;o<r.length;o++){switch(r[o].name){case"CMultiClassTheme":n[i].ThemeArr[o]=new u.CMultiClassTheme;break;case"CSimpleTheme":n[i].ThemeArr[o]=new l.CSimpleTheme;break;case"CChartTheme":n[i].ThemeArr[o]=new c.CChartTheme;break;case"CGraduatedSymbolTheme":n[i].ThemeArr[o]=new h.CGraduatedSymbolTheme;break;case"CDotDensityTheme":n[i].ThemeArr[o]=new f.CDotDensityTheme;break;case"CRandomTheme":n[i].ThemeArr[o]=new p.CRandomTheme;break;case"CFourColorTheme":n[i].ThemeArr[o]=new d.CFourColorTheme;break;case"CUniqueTheme":n[i].ThemeArr[o]=new y.CUniqueTheme;break;case"CRangeTheme":n[i].ThemeArr[o]=new g.CRangeTheme}(0,s.extendDeep)(n[i].ThemeArr[o],JSON.parse(r[o].value))}}null!==this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(n)}}},{key:"getThemesInfo",value:function(t,e,n,r){var i=this;i.p_onSuccess=n;var o=Math.random();i.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+i.guid;var s=i.getFullUrl();new a.IgsServiceBase(s,{eventListeners:{scope:i,processCompleted:i.onGetThemesInfoSuccess,processFailed:r}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,n,r){var i=Math.random();this.partUrl=t+"/remove?idxArr="+e+"&r="+i+"&guid="+this.guid;var o=this.getFullUrl();new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:n,processFailed:r}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,n,r,i){Math.random();this.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var o=this.getFullUrl(),s=new m.FolderInfo;if(null!==n&&n.length>0){s.name="ThemeInfo",s.attribute=[];for(var u=0;u<n.length;u++)if(s.attribute[u]=new v.FolderInfoAttribute,s.attribute[u].name=n[u].LayerName,null!==n[u].ThemeArr&&n[u].ThemeArr.length>0){for(var l=[],c=0;c<n[u].ThemeArr.length;c++)null!==n[u].ThemeArr[c]&&(l[c]=new v.FolderInfoAttribute(n[u].ThemeArr[c].Type,JSON.stringify(n[u].ThemeArr[c])));s.attribute[u].value=JSON.stringify(l)}}new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:r,processFailed:i}}).processAsync({method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,n,r,i){Math.random();this.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var o=this.getFullUrl(),s=new m.FolderInfo;if(null!==n&&n.length>0){s.name="ThemeInfo",s.attribute=[];for(var u=0;u<n.length;u++)if(s.attribute[u]=new v.FolderInfoAttribute,s.attribute[u].name=n[u].LayerName,null!==n[u].ThemeArr&&n[u].ThemeArr.length>0){for(var l=[],c=0;c<n[u].ThemeArr.length;c++)null!==n[u].ThemeArr[c]&&(l[c]=new v.FolderInfoAttribute(n[u].ThemeArr[c].Type,JSON.stringify(n[u].ThemeArr[c])));s.attribute[u].value=JSON.stringify(l)}}new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:r,processFailed:i}}).processAsync({method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.ThemeOper=b,i.Zondy.Service.ThemeOper=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4610=e.EPSG4490=e.EPSG4214=void 0;var r=n(322),i=n(323),o=n(324);e.EPSG4214=r.EPSG4214,e.EPSG4490=i.EPSG4490,e.EPSG4610=o.EPSG4610},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4214=void 0;var r=n(0),i=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4214=window.Zondy.Proj.CRS("EPSG:4214",{def:"+proj=longlat +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +no_defs",origin:[-180,90],resolutions:o,bounds:i.default.bounds([-180,-90],[180,90])});r.Zondy.CRS.EPSG4214=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4490=void 0;var r=n(0),i=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4490=window.Zondy.Proj.CRS("EPSG:4490",{def:"+proj=longlat +ellps=GRS80 +units=degrees +no_defs",origin:[-180,90],resolutions:o,bounds:i.default.bounds([-180,-90],[180,90])});r.Zondy.CRS.EPSG4490=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4610=void 0;var r=n(0),i=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4610=window.Zondy.Proj.CRS("EPSG:4610",{def:"+proj=longlat +a=6378140 +b=6356755.288157528 +units=degrees +no_defs",origin:[-180,90],resolutions:o,bounds:i.default.bounds([-180,-90],[180,90])});r.Zondy.CRS.EPSG4610=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMSInfo=e.OGCWMTSInfo=e.WMTSCapabilities=e.WMSCapabilities=void 0;var r=n(326),i=n(329),o=n(334),s=n(352);e.WMSCapabilities=r.WMSCapabilities,e.WMTSCapabilities=i.WMTSCapabilities,e.OGCWMTSInfo=o.OGCWMTSInfo,e.OGCWMSInfo=s.OGCWMSInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WMSCapabilities=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(87),s=function(t){return t&&t.__esModule?t:{default:t}}(n(88)),a=n(89),u=n(37);var l=[null,"http://www.opengis.net/wms"],c=(0,u.makeStructureNS)(l,{Service:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},p,t,e)}),Capability:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},h,t,e)})}),h=(0,u.makeStructureNS)(l,{Request:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},S,t,e)}),Exception:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)([],v,t,e)}),Layer:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},m,t,e)})}),f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.version=void 0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){this.version=t.getAttribute("version").trim();var e=(0,u.pushParseAndPop)({version:this.version},c,t,[]);return e||null}}]),e}(),p=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),KeywordList:(0,u.makeObjectPropertySetter)(I),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref),ContactInformation:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},d,t,e)}),Fees:(0,u.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,u.makeObjectPropertySetter)(a.readString),LayerLimit:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxWidth:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxHeight:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger)}),d=(0,u.makeStructureNS)(l,{ContactPersonPrimary:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},y,t,e)}),ContactPosition:(0,u.makeObjectPropertySetter)(a.readString),ContactAddress:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},g,t,e)}),ContactVoiceTelephone:(0,u.makeObjectPropertySetter)(a.readString),ContactFacsimileTelephone:(0,u.makeObjectPropertySetter)(a.readString),ContactElectronicMailAddress:(0,u.makeObjectPropertySetter)(a.readString)}),y=(0,u.makeStructureNS)(l,{ContactPerson:(0,u.makeObjectPropertySetter)(a.readString),ContactOrganization:(0,u.makeObjectPropertySetter)(a.readString)}),g=(0,u.makeStructureNS)(l,{AddressType:(0,u.makeObjectPropertySetter)(a.readString),Address:(0,u.makeObjectPropertySetter)(a.readString),City:(0,u.makeObjectPropertySetter)(a.readString),StateOrProvince:(0,u.makeObjectPropertySetter)(a.readString),PostCode:(0,u.makeObjectPropertySetter)(a.readString),Country:(0,u.makeObjectPropertySetter)(a.readString)}),v=(0,u.makeStructureNS)(l,{Format:(0,u.makeArrayPusher)(a.readString)}),m=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),KeywordList:(0,u.makeObjectPropertySetter)(I),SRS:(0,u.makeObjectPropertyPusher)(a.readString),EX_GeographicBoundingBox:(0,u.makeObjectPropertySetter)(function(t,e){var n=(0,u.pushParseAndPop)({},b,t,e);if(!n)return;var r=n.westBoundLongitude,i=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(void 0===r||void 0===i||void 0===o||void 0===s)return;return[r,i,o,s]}),BoundingBox:(0,u.makeObjectPropertyPusher)(function(t,e){var n=[(0,a.readDecimalString)(t.getAttribute("minx")),(0,a.readDecimalString)(t.getAttribute("miny")),(0,a.readDecimalString)(t.getAttribute("maxx")),(0,a.readDecimalString)(t.getAttribute("maxy"))],r=[(0,a.readDecimalString)(t.getAttribute("resx")),(0,a.readDecimalString)(t.getAttribute("resy"))];return{srs:t.getAttribute("SRS"),extent:n,res:r}}),Dimension:(0,u.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:(0,a.readBooleanString)(t.getAttribute("multipleValues")),nearestValue:(0,a.readBooleanString)(t.getAttribute("nearestValue")),current:(0,a.readBooleanString)(t.getAttribute("current")),values:(0,a.readString)(t)}}),Attribution:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},_,t,e)}),AuthorityURL:(0,u.makeObjectPropertyPusher)(function(t,e){var n=E(t,e);if(n)return n.name=t.getAttribute("name"),n;return}),Identifier:(0,u.makeObjectPropertyPusher)(a.readString),MetadataURL:(0,u.makeObjectPropertyPusher)(function(t,e){var n=E(t,e);if(n)return n.type=t.getAttribute("type"),n;return}),DataURL:(0,u.makeObjectPropertyPusher)(E),FeatureListURL:(0,u.makeObjectPropertyPusher)(E),Style:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},C,t,e)}),MinScaleDenominator:(0,u.makeObjectPropertySetter)(a.readDecimal),MaxScaleDenominator:(0,u.makeObjectPropertySetter)(a.readDecimal),Layer:(0,u.makeObjectPropertyPusher)(function(t,e){var n=e[e.length-1],r=(0,u.pushParseAndPop)({},m,t,e);if(!r)return;var i=(0,a.readBooleanString)(t.getAttribute("queryable"));void 0===i&&(i=n.queryable);r.queryable=void 0!==i&&i;var o=(0,a.readNonNegativeIntegerString)(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded);r.cascaded=o;var s=(0,a.readBooleanString)(t.getAttribute("opaque"));void 0===s&&(s=n.opaque);r.opaque=void 0!==s&&s;var l=(0,a.readBooleanString)(t.getAttribute("noSubsets"));void 0===l&&(l=n.noSubsets);r.noSubsets=void 0!==l&&l;var c=(0,a.readDecimalString)(t.getAttribute("fixedWidth"));c||(c=n.fixedWidth);r.fixedWidth=c;var h=(0,a.readDecimalString)(t.getAttribute("fixedHeight"));h||(h=n.fixedHeight);r.fixedHeight=h,["Style","SRS","AuthorityURL"].forEach(function(t){if(t in n){var e=r[t]||[];r[t]=e.concat(n[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var e=n[t];r[t]=e}}),r})}),_=(0,u.makeStructureNS)(l,{Title:(0,u.makeObjectPropertySetter)(a.readString),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref),LogoURL:(0,u.makeObjectPropertySetter)(M)}),b=(0,u.makeStructureNS)(l,{westBoundLongitude:(0,u.makeObjectPropertySetter)(a.readDecimal),eastBoundLongitude:(0,u.makeObjectPropertySetter)(a.readDecimal),southBoundLatitude:(0,u.makeObjectPropertySetter)(a.readDecimal),northBoundLatitude:(0,u.makeObjectPropertySetter)(a.readDecimal)}),S=(0,u.makeStructureNS)(l,{GetCapabilities:(0,u.makeObjectPropertySetter)(L),GetMap:(0,u.makeObjectPropertySetter)(L),GetFeatureInfo:(0,u.makeObjectPropertySetter)(L)}),x=(0,u.makeStructureNS)(l,{Format:(0,u.makeObjectPropertyPusher)(a.readString),DCPType:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},w,t,e)})}),w=(0,u.makeStructureNS)(l,{HTTP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},P,t,e)})}),P=(0,u.makeStructureNS)(l,{Get:(0,u.makeObjectPropertySetter)(E),Post:(0,u.makeObjectPropertySetter)(E)}),C=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),LegendURL:(0,u.makeObjectPropertyPusher)(M),StyleSheetURL:(0,u.makeObjectPropertySetter)(E),StyleURL:(0,u.makeObjectPropertySetter)(E)}),O=(0,u.makeStructureNS)(l,{Format:(0,u.makeObjectPropertySetter)(a.readString),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref)}),T=(0,u.makeStructureNS)(l,{Keyword:(0,u.makeArrayPusher)(a.readString)});function E(t,e){return(0,u.pushParseAndPop)({},O,t,e)}function L(t,e){return(0,u.pushParseAndPop)({},x,t,e)}function M(t,e){var n=E(t,e);if(n){var r=[(0,a.readNonNegativeIntegerString)(t.getAttribute("width")),(0,a.readNonNegativeIntegerString)(t.getAttribute("height"))];return n.size=r,n}}function I(t,e){return(0,u.pushParseAndPop)([],T,t,e)}e.WMSCapabilities=f,i.Zondy.Format.WMSCapabilities=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSorted=e.findIndex=e.stableSort=e.equals=e.find=e.remove=e.extend=e.reverseSubArray=e.linearFindNearest=e.includes=e.numberSafeCompareFunction=e.binarySearch=void 0;var r=n(0),i=function(t,e,n){for(var r=void 0,i=void 0,s=n||o,a=0,u=t.length,l=!1;a<u;)(i=+s(t[r=a+(u-a>>1)],e))<0?a=r+1:(u=r,l=!i);return l?a:~a},o=function(t,e){return t>e?1:t<e?-1:0},s=function(t,e){return t.indexOf(e)>=0},a=function(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1},u=function(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}},l=function(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]},c=function(t,e){var n=t.indexOf(e),r=n>-1;return r&&t.splice(n,1),r},h=function(t,e){for(var n=t.length>>>0,r=void 0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null},f=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},p=function(t,e){var n=t.length,r=Array(t.length),i=void 0;for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),i=0;i<t.length;i++)t[i]=r[i].value},d=function(t,e){var n=void 0;return!t.every(function(r,i){return n=i,!e(r,i,t)})?n:-1},y=function(t,e,n){var r=e||o;return t.every(function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)})};e.binarySearch=i,e.numberSafeCompareFunction=o,e.includes=s,e.linearFindNearest=a,e.reverseSubArray=u,e.extend=l,e.remove=c,e.find=h,e.equals=f,e.stableSort=p,e.findIndex=d,e.isSorted=y,r.Zondy.array.binarySearch=i,r.Zondy.array.numberSafeCompareFunction=o,r.Zondy.array.includes=s,r.Zondy.array.linearFindNearest=a,r.Zondy.array.reverseSubArray=u,r.Zondy.array.extend=l,r.Zondy.array.remove=c,r.Zondy.array.find=h,r.Zondy.array.equals=f,r.Zondy.array.stableSort=p,r.Zondy.array.findIndex=d,r.Zondy.array.isSorted=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareVersions=e.padNumber=void 0;var r=n(0),i=function(t,e,n){var r=void 0!==n?t.toFixed(n):""+t,i=r.indexOf(".");return(i=-1===i?r.length:i)>e?r:new Array(1+e-i).join("0")+r},o=function(t,e){for(var n=(""+t).split("."),r=(""+e).split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||"0",10),s=parseInt(r[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0};e.padNumber=i,e.compareVersions=o,r.Zondy.string.padNumber=i,r.Zondy.string.compareVersions=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WMTSCapabilities=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(330),s=h(n(333)),a=n(87),u=h(n(88)),l=n(89),c=n(37);function h(t){return t&&t.__esModule?t:{default:t}}var f=[null,"http://www.opengis.net/wmts/1.0"],p=[null,"http://www.opengis.net/ows/1.1"],d=(0,c.makeStructureNS)(f,{Contents:(0,c.makeObjectPropertySetter)(function(t,e){return(0,c.pushParseAndPop)({},g,t,e)})}),y=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.owsParser_=new s.default,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),r(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=t.getAttribute("version").trim(),n=this.owsParser_.readFromNode(t);return n?(n.version=e,(n=(0,c.pushParseAndPop)(n,d,t,[]))||null):null}}]),e}(),g=(0,c.makeStructureNS)(f,{Layer:(0,c.makeObjectPropertyPusher)(function(t,e){return(0,c.pushParseAndPop)({},v,t,e)}),TileMatrixSet:(0,c.makeObjectPropertyPusher)(function(t,e){return(0,c.pushParseAndPop)({},P,t,e)})}),v=(0,c.makeStructureNS)(f,{Style:(0,c.makeObjectPropertyPusher)(function(t,e){var n=(0,c.pushParseAndPop)({},m,t,e);if(!n)return;var r="true"===t.getAttribute("isDefault");return n.isDefault=r,n}),Format:(0,c.makeObjectPropertyPusher)(l.readString),TileMatrixSetLink:(0,c.makeObjectPropertyPusher)(function(t,e){return(0,c.pushParseAndPop)({},_,t,e)}),Dimension:(0,c.makeObjectPropertyPusher)(function(t,e){return(0,c.pushParseAndPop)({},x,t,e)}),ResourceURL:(0,c.makeObjectPropertyPusher)(function(t,e){var n=t.getAttribute("format"),r=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};n&&(o.format=n);r&&(o.template=r);i&&(o.resourceType=i);return o})},(0,c.makeStructureNS)(p,{Title:(0,c.makeObjectPropertySetter)(l.readString),Abstract:(0,c.makeObjectPropertySetter)(l.readString),BoundingBox:(0,c.makeObjectPropertySetter)(O),WGS84BoundingBox:(0,c.makeObjectPropertySetter)(O),Identifier:(0,c.makeObjectPropertySetter)(l.readString)})),m=(0,c.makeStructureNS)(f,{LegendURL:(0,c.makeObjectPropertyPusher)(function(t,e){var n={};return n.format=t.getAttribute("format"),n.href=(0,a.readHref)(t),n})},(0,c.makeStructureNS)(p,{Title:(0,c.makeObjectPropertySetter)(l.readString),Identifier:(0,c.makeObjectPropertySetter)(l.readString)})),_=(0,c.makeStructureNS)(f,{TileMatrixSet:(0,c.makeObjectPropertySetter)(l.readString),TileMatrixSetLimits:(0,c.makeObjectPropertySetter)(function(t,e){return(0,c.pushParseAndPop)([],b,t,e)})}),b=(0,c.makeStructureNS)(f,{TileMatrixLimits:(0,c.makeArrayPusher)(function(t,e){return(0,c.pushParseAndPop)({},S,t,e)})}),S=(0,c.makeStructureNS)(f,{TileMatrix:(0,c.makeObjectPropertySetter)(l.readString),MinTileRow:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),MaxTileRow:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),MinTileCol:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),MaxTileCol:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger)}),x=(0,c.makeStructureNS)(f,{Default:(0,c.makeObjectPropertySetter)(l.readString),Value:(0,c.makeObjectPropertyPusher)(l.readString)},(0,c.makeStructureNS)(p,{Identifier:(0,c.makeObjectPropertySetter)(l.readString)})),w=(0,c.makeStructureNS)(p,{LowerCorner:(0,c.makeArrayPusher)(T),UpperCorner:(0,c.makeArrayPusher)(T)}),P=(0,c.makeStructureNS)(f,{WellKnownScaleSet:(0,c.makeObjectPropertySetter)(l.readString),TileMatrix:(0,c.makeObjectPropertyPusher)(function(t,e){return(0,c.pushParseAndPop)({},C,t,e)})},(0,c.makeStructureNS)(p,{SupportedCRS:(0,c.makeObjectPropertySetter)(l.readString),Identifier:(0,c.makeObjectPropertySetter)(l.readString)})),C=(0,c.makeStructureNS)(f,{TopLeftCorner:(0,c.makeObjectPropertySetter)(T),ScaleDenominator:(0,c.makeObjectPropertySetter)(l.readDecimal),TileWidth:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),TileHeight:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),MatrixWidth:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger),MatrixHeight:(0,c.makeObjectPropertySetter)(l.readNonNegativeInteger)},(0,c.makeStructureNS)(p,{Identifier:(0,c.makeObjectPropertySetter)(l.readString)}));function O(t,e){var n=(0,c.pushParseAndPop)([],w,t,e);if(2==n.length)return(0,o.boundingExtent)(n)}function T(t,e){var n=(0,l.readString)(t).split(/\s+/);if(n&&2==n.length){var r=+n[0],i=+n[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}}e.WMTSCapabilities=y,i.Zondy.Format.WMTSCapabilities=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyTransform=e.intersectsSegment=e.scaleFromCenter=e.returnOrUpdate=e.isEmpty=e.intersects=e.getWidth=e.getTopRight=e.getTopLeft=e.getSize=e.getMargin=e.getIntersection=e.getIntersectionArea=e.getHeight=e.getForViewAndSize=e.getEnlargedArea=e.getCorner=e.getCenter=e.getBottomRight=e.getBottomLeft=e.getArea=e.forEachCorner=e.extendXY=e.extendRings=e.extendFlatCoordinates=e.extendCoordinates=e.extendCoordinate=e.extend=e.equals=e.createOrUpdateFromRings=e.createOrUpdateFromFlatCoordinates=e.createOrUpdateFromCoordinates=e.createOrUpdateFromCoordinate=e.createOrUpdateEmpty=e.createOrUpdate=e.createEmpty=e.coordinateRelationship=e.containsXY=e.containsExtent=e.containsCoordinate=e.closestSquaredDistanceXY=e.clone=e.buffer=e.boundingExtent=void 0;var r=n(0),i=n(331),o=n(332),s=function(t){for(var e=d(),n=0,r=t.length;n<r;++n)w(e,t[n]);return e},a=function(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},u=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},l=function(t,e,n){var r=void 0,i=void 0;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i},c=function(t,e){return f(t,e[0],e[1])},h=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},f=function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]},p=function(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],a=e[0],u=e[1],l=o.Relationship.UNKNOWN;return a<n?l|=o.Relationship.LEFT:a>i&&(l|=o.Relationship.RIGHT),u<r?l|=o.Relationship.BELOW:u>s&&(l|=o.Relationship.ABOVE),l===o.Relationship.UNKNOWN&&(l=o.Relationship.INTERSECTING),l},d=function(){return[1/0,1/0,-1/0,-1/0]},y=function(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]},g=function(t){return y(1/0,1/0,-1/0,-1/0,t)},v=function(t,e){var n=t[0],r=t[1];return y(n,r,n,r,e)},m=function(t,e){var n=g(e);return P(n,t)},_=function(t,e,n,r,i){var o=g(i);return C(o,t,e,n,r)},b=function(t,e){var n=g(e);return O(n,t)},S=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},x=function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},w=function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},P=function(t,e){for(var n=0,r=e.length;n<r;++n)w(t,e[n]);return t},C=function(t,e,n,r,i){for(;n<r;n+=i)T(t,e[n],e[n+1]);return t},O=function(t,e){for(var n=0,r=e.length;n<r;++n)P(t,e[n]);return t},T=function(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)},E=function(t,e,n){var r=void 0;return(r=e.call(n,M(t)))?r:(r=e.call(n,I(t)))?r:(r=e.call(n,q(t)))?r:(r=e.call(n,G(t)))||!1},L=function(t){var e=0;return Z(t)||(e=z(t)*k(t)),e},M=function(t){return[t[0],t[1]]},I=function(t){return[t[2],t[1]]},N=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},A=function(t,e){var n=void 0;return e===i.Corner.BOTTOM_LEFT?n=M(t):e===i.Corner.BOTTOM_RIGHT?n=I(t):e===i.Corner.TOP_LEFT?n=G(t):e===i.Corner.TOP_RIGHT&&(n=q(t)),n},R=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-r)},D=function(t,e,n,r,i){var o=e*r[0]/2,s=e*r[1]/2,a=Math.cos(n),u=Math.sin(n),l=o*a,c=o*u,h=s*a,f=s*u,p=t[0],d=t[1],g=p-l+f,v=p-l-f,m=p+l-f,_=p+l+f,b=d-c-h,S=d-c+h,x=d+c+h,w=d+c-h;return y(Math.min(g,v,m,_),Math.min(b,S,x,w),Math.max(g,v,m,_),Math.max(b,S,x,w),i)},k=function(t){return t[3]-t[1]},j=function(t,e){var n=F(t,e);return L(n)},F=function(t,e,n){var r=n||d();return V(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):g(r),r},B=function(t){return z(t)+k(t)},U=function(t){return[t[2]-t[0],t[3]-t[1]]},G=function(t){return[t[0],t[3]]},q=function(t){return[t[2],t[3]]},z=function(t){return t[2]-t[0]},V=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},Z=function(t){return t[2]<t[0]||t[3]<t[1]},W=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},H=function(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r},X=function(t,e,n){var r=!1,i=p(t,e),s=p(t,n);if(i===o.Relationship.INTERSECTING||s===o.Relationship.INTERSECTING)r=!0;else{var a=t[0],u=t[1],l=t[2],c=t[3],h=e[0],f=e[1],d=n[0],y=n[1],g=(y-f)/(d-h),v=void 0,m=void 0;s&o.Relationship.ABOVE&&!(i&o.Relationship.ABOVE)&&(r=(v=d-(y-c)/g)>=a&&v<=l),r||!(s&o.Relationship.RIGHT)||i&o.Relationship.RIGHT||(r=(m=y-(d-l)*g)>=u&&m<=c),r||!(s&o.Relationship.BELOW)||i&o.Relationship.BELOW||(r=(v=d-(y-u)/g)>=a&&v<=l),r||!(s&o.Relationship.LEFT)||i&o.Relationship.LEFT||(r=(m=y-(d-a)*g)>=u&&m<=c)}return r},Y=function(t,e,n){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,n){var r=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return y(r,i,o,s,n)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],n)};e.boundingExtent=s,e.buffer=a,e.clone=u,e.closestSquaredDistanceXY=l,e.containsCoordinate=c,e.containsExtent=h,e.containsXY=f,e.coordinateRelationship=p,e.createEmpty=d,e.createOrUpdate=y,e.createOrUpdateEmpty=g,e.createOrUpdateFromCoordinate=v,e.createOrUpdateFromCoordinates=m,e.createOrUpdateFromFlatCoordinates=_,e.createOrUpdateFromRings=b,e.equals=S,e.extend=x,e.extendCoordinate=w,e.extendCoordinates=P,e.extendFlatCoordinates=C,e.extendRings=O,e.extendXY=T,e.forEachCorner=E,e.getArea=L,e.getBottomLeft=M,e.getBottomRight=I,e.getCenter=N,e.getCorner=A,e.getEnlargedArea=R,e.getForViewAndSize=D,e.getHeight=k,e.getIntersectionArea=j,e.getIntersection=F,e.getMargin=B,e.getSize=U,e.getTopLeft=G,e.getTopRight=q,e.getWidth=z,e.intersects=V,e.isEmpty=Z,e.returnOrUpdate=W,e.scaleFromCenter=H,e.intersectsSegment=X,e.applyTransform=Y,r.Zondy.extent.boundingExtent=s,r.Zondy.extent.buffer=a,r.Zondy.extent.clone=u,r.Zondy.extent.closestSquaredDistanceXY=l,r.Zondy.extent.containsCoordinate=c,r.Zondy.extent.containsExtent=h,r.Zondy.extent.containsXY=f,r.Zondy.extent.coordinateRelationship=p,r.Zondy.extent.createEmpty=d,r.Zondy.extent.createOrUpdate=y,r.Zondy.extent.createOrUpdateEmpty=g,r.Zondy.extent.createOrUpdateFromCoordinate=v,r.Zondy.extent.createOrUpdateFromCoordinates=m,r.Zondy.extent.createOrUpdateFromFlatCoordinates=_,r.Zondy.extent.createOrUpdateFromRings=b,r.Zondy.extent.equals=S,r.Zondy.extent.extend=x,r.Zondy.extent.extendCoordinate=w,r.Zondy.extent.extendCoordinates=P,r.Zondy.extent.extendFlatCoordinates=C,r.Zondy.extent.extendRings=O,r.Zondy.extent.extendXY=T,r.Zondy.extent.forEachCorner=E,r.Zondy.extent.getArea=L,r.Zondy.extent.getBottomLeft=M,r.Zondy.extent.getBottomRight=I,r.Zondy.extent.getCenter=N,r.Zondy.extent.getCorner=A,r.Zondy.extent.getEnlargedArea=R,r.Zondy.extent.getForViewAndSize=D,r.Zondy.extent.getHeight=k,r.Zondy.extent.getIntersectionArea=j,r.Zondy.extent.getIntersection=F,r.Zondy.extent.getMargin=B,r.Zondy.extent.getSize=U,r.Zondy.extent.getTopLeft=G,r.Zondy.extent.getTopRight=q,r.Zondy.extent.getWidth=z,r.Zondy.extent.intersects=V,r.Zondy.extent.isEmpty=Z,r.Zondy.extent.returnOrUpdate=W,r.Zondy.extent.scaleFromCenter=H,r.Zondy.extent.intersectsSegment=X,r.Zondy.extent.applyTransform=Y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Corner=void 0;var r=n(0),i={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};e.Corner=i,r.Zondy.Enum.Corner=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Relationship=void 0;var r=n(0),i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};e.Relationship=i,r.Zondy.Enum.Relationship=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(87),s=function(t){return t&&t.__esModule?t:{default:t}}(n(88)),a=n(89),u=n(37);var l=[null,"http://www.opengis.net/ows/1.1"],c=(0,u.makeStructureNS)(l,{ServiceIdentification:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},w,t,e)}),ServiceProvider:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},P,t,e)}),OperationsMetadata:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},_,t,e)})}),h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=(0,u.pushParseAndPop)({},c,t,[]);return e||null}}]),e}(),f=(0,u.makeStructureNS)(l,{DeliveryPoint:(0,u.makeObjectPropertySetter)(a.readString),City:(0,u.makeObjectPropertySetter)(a.readString),AdministrativeArea:(0,u.makeObjectPropertySetter)(a.readString),PostalCode:(0,u.makeObjectPropertySetter)(a.readString),Country:(0,u.makeObjectPropertySetter)(a.readString),ElectronicMailAddress:(0,u.makeObjectPropertySetter)(a.readString)}),p=(0,u.makeStructureNS)(l,{Value:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,a.readString)(t)})}),d=(0,u.makeStructureNS)(l,{AllowedValues:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},p,t,e)})}),y=(0,u.makeStructureNS)(l,{Phone:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},b,t,e)}),Address:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},f,t,e)})}),g=(0,u.makeStructureNS)(l,{HTTP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},v,t,e)})}),v=(0,u.makeStructureNS)(l,{Get:(0,u.makeObjectPropertyPusher)(function(t,e){var n=(0,o.readHref)(t);if(!n)return;return(0,u.pushParseAndPop)({href:n},S,t,e)}),Post:void 0}),m=(0,u.makeStructureNS)(l,{DCP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},g,t,e)})}),_=(0,u.makeStructureNS)(l,{Operation:function(t,e){var n=t.getAttribute("name"),r=(0,u.pushParseAndPop)({},m,t,e);if(!r)return;e[e.length-1][n]=r}}),b=(0,u.makeStructureNS)(l,{Voice:(0,u.makeObjectPropertySetter)(a.readString),Facsimile:(0,u.makeObjectPropertySetter)(a.readString)}),S=(0,u.makeStructureNS)(l,{Constraint:(0,u.makeObjectPropertyPusher)(function(t,e){var n=t.getAttribute("name");if(!n)return;return(0,u.pushParseAndPop)({name:n},d,t,e)})}),x=(0,u.makeStructureNS)(l,{IndividualName:(0,u.makeObjectPropertySetter)(a.readString),PositionName:(0,u.makeObjectPropertySetter)(a.readString),ContactInfo:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},y,t,e)})}),w=(0,u.makeStructureNS)(l,{Abstract:(0,u.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,u.makeObjectPropertySetter)(a.readString),Fees:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),ServiceTypeVersion:(0,u.makeObjectPropertySetter)(a.readString),ServiceType:(0,u.makeObjectPropertySetter)(a.readString)}),P=(0,u.makeStructureNS)(l,{ProviderName:(0,u.makeObjectPropertySetter)(a.readString),ProviderSite:(0,u.makeObjectPropertySetter)(o.readHref),ServiceContact:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},x,t,e)})});e.default=h,i.Zondy.Format.OWS=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMTSInfo=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(10),s=function(t){return t&&t.__esModule?t:{default:t}}(n(163));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return n.baseUrl="igs/rest/ogc",r.ip=n.ip||"localhost",r.port=n.port||"6163",r.baseUrl=n.baseUrl,r.version=n.version||"1.0.0",r.serverName=n.serverName,r.name=n.name,r.style=n.style||"default",r.tileMatrixset=n.tileMatrixset,r.tileMatrix=n.tileMatrix,r.tileRow=n.tileRow,r.tileCol=n.tileCol,r.format=n.format||"image/png",r.infoFormat=n.infoFormat||"text/html",r.I=n.I,r.J=n.J,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),r(e,[{key:"getWMTSInfo",value:function(t,e){var n=this,r="";n.serverName&&""!==n.serverName&&(r+=n.serverName+"/"),r+="WMTSServer/1.0.0/WMTSCapabilities.xml",n.partUrl=r;var i=n.getFullUrl();(0,s.default)({method:"get",url:i}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var n=this;n.partUrl="WMTSServer?service=WMTS&request=GetFeatureInfo&version="+n.version+"&layer="+n.serverName+":"+n.name+"&style="+n.style+"&TileMatrixSet="+n.tileMatrixSet+"&TileMatrix="+n.tileMatrix+"&TileRow="+n.tileRow+"&TileCol="+n.tileCol+"&format="+n.format+"&InfoFormat="+n.infoFormat+"&I="+n.I+"&J="+n.J;var r=n.getFullUrl();(0,s.default)({method:"get",url:r}).then(t).catch(e)}}]),e}();e.OGCWMTSInfo=a,i.Zondy.OGC.OGCWMTSInfo=a},function(t,e,n){"use strict";var r=n(8),i=n(164),o=n(337),s=n(90);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=a(s);u.Axios=o,u.create=function(t){return a(r.merge(s,t))},u.Cancel=n(168),u.CancelToken=n(350),u.isCancel=n(167),u.all=function(t){return Promise.all(t)},u.spread=n(351),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var r=n(90),i=n(8),o=n(345),s=n(346);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=a},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(166);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";var r=n(8);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(8),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(8);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";var r=n(8),i=n(347),o=n(167),s=n(90),a=n(348),u=n(349);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(168);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMSInfo=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(10),s=function(t){return t&&t.__esModule?t:{default:t}}(n(163));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return n.baseUrl="igs/rest/ogc",r.ip=n.ip||"localhost",r.port=n.port||"6163",r.baseUrl=n.baseUrl,r.serverType=n.serverType,r.serverName=n.serverName,r.version=n.version||"1.1.1",r.layersName=n.layersName,r.style=n.style||"default",r.srs=n.srs,r.bbox=n.bbox,r.width=n.width||"1024",r.height=n.height||"768",r.format=n.format||"image/png",r.infoFormat=n.infoFormat||"text/html",r.I=n.I,r.J=n.J,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),r(e,[{key:"getWMSInfo",value:function(t,e){var n=this;n.partUrl=n.serverType+"/"+n.serverName+"/WMSServer?service=WMS&REQUEST=GetCapabilities&version="+n.version;var r=n.getFullUrl();(0,s.default)({method:"get",url:r}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var n=this;n.partUrl=n.serverType+"/"+n.serverName+"/WMSServer?layers="+n.layersName+"&version="+n.version+"&service=WMS&request=GetFeatureInfo&styles="+n.style+"&format="+n.format+"&bbox="+n.bbox+"&width="+n.width+"&height="+n.height+"&query_Layers="+n.layersName+"&info_Format="+n.infoFormat,"1.1.1"===n.version?n.partUrl+="&srs="+n.srs+"&&X="+n.I+"&Y="+n.J:"1.3.0"===n.version&&(n.partUrl+="&crs="+n.srs+"&&I="+n.I+"&J="+n.J);var r=n.getFullUrl();(0,s.default)({method:"get",url:r}).then(t).catch(e)}}]),e}();e.OGCWMSInfo=a,i.Zondy.OGC.OGCWMSInfo=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=void 0;var r=n(38),i=n(39),o=n(354),s=n(355),a=n(193),u=n(356),l=n(357),c=n(358),h=n(359);e.GeoFeatureThemeLayer=r.GeoFeatureThemeLayer,e.ThemeLayer=i.ThemeLayer,e.RangeThemeLayer=o.RangeThemeLayer,e.UniqueThemeLayer=s.UniqueThemeLayer,e.GraphThemeLayer=a.GraphThemeLayer,e.graphThemeLayer=a.graphThemeLayer,e.RandomThemeLayer=u.RandomThemeLayer,e.SimpleThemeLayer=l.SimpleThemeLayer,e.RankSymbolThemeLayer=c.RankSymbolThemeLayer,e.ThemeStyle=h.ThemeStyle},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rangeThemeLayer=void 0;var r=n(0),i=(n(2),n(1)),o=n(38),s=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,r=(0,i.copyAttributesWithClip)({},e.style),o=e.styleGroups,s=!1,a=null,u=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&u&&n.attributes){var l=e.themeField,c=n.attributes;for(var h in c)if(l===h){s=!0,a=c[h];break}}if(s&&u)for(var f=0,p=o.length;f<p;f++){if(f===p-1?a>=o[f].start&&a<=o[f].end:a>=o[f].start&&a<o[f].end){var d=o[f].style;r=(0,i.copyAttributesWithClip)(r,d)}}return r}}),a=e.rangeThemeLayer=function(t,e){return new s(t,e)};r.Zondy.Map.rangeThemeLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueThemeLayer=void 0;var r=n(0),i=(n(2),n(1)),o=n(38),s=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,r=(0,i.copyAttributesWithClip)({},e.style),o=e.styleGroups,s=!1,a=null,u=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&u&&n.attributes){var l=e.themeField,c=n.attributes;for(var h in c)if(l===h){s=!0,a=c[h];break}}if(s&&u)for(var f=0,p=o.length;f<p;f++)if(!a&&!o[f].value||a&&o[f].value&&a.toString()===o[f].value.toString()){var d=o[f].style;r=(0,i.copyAttributesWithClip)(r,d);break}return r}}),a=e.uniqueThemeLayer=function(t,e){return new s(t,e)};r.Zondy.Map.uniqueThemeLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomThemeLayer=void 0;var r=n(0),i=(n(2),n(1)),o=n(38),s=n(39),a=n(19),u=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.keepStyle=!0},getColor:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",n=0;n<6;n++)e+=t[Math.floor(16*Math.random())];return e},getStyleByData:function(){var t=(0,i.copyAttributesWithClip)({},this.style);return t.fillColor=this.getColor(),t},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var n=t.getSize();e.container.style.width=n.x+"px",e.container.style.height=n.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=window.L.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.zoomstartHandler=function(t){e.keepStyle=!1},t.on("zoomstart ",e.zoomstartHandler),e.zoomendHandler=function(t){e.keepStyle=!0},t.on("zoomend",e.zoomendHandler),e.update()}else t.removeLayer(e)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),t&&t instanceof window.L.LatLngBounds){var i=this._map.options.crs;t=window.L.bounds(i.project(t.getSouthWest()),i.project(t.getNorthEast())),t=new a.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}e.renderer.clearAll();for(var o=e.features,s=e.cache,u=e.cacheFields,l=e._map.getZoom(),c=e.maxCacheCount,h=0,f=o.length;h<f;h++){var p=o[h],d=p.bound;if(!t||t.intersectsBounds(d)){var y=p.FID+"_zoom_"+l.toString();if(s[y]&&e.keepStyle)s[y].updateAndAddShapes();else{var g=e.createThematicFeature(o[h]);if(!(g.getShapesCount()<1)&&(s[y]=g,u.push(y),u.length>c)){var v=u[0];u.splice(0,1),delete s[v]}}}}if(e.renderer.render(),r&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(m)}},redraw:function(){return this.keepStyle||this.clearCache(),s.ThemeLayer.prototype.redraw.apply(this,arguments)}}),l=e.randomThemeLayer=function(t,e){return new u(t,e)};r.Zondy.Map.randomThemeLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleThemeLayer=void 0;var r=n(0),i=(n(2),n(1)),o=n(38),s=n(39),a=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[]},getColor:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",n=0;n<6;n++)e+=t[Math.floor(16*Math.random())];return e},getStyleByData:function(){var t=(0,i.copyAttributesWithClip)({},this.style);return null==t.fillColor&&(t.fillColor=this.getColor()),this.style=t,t},redraw:function(){return s.ThemeLayer.prototype.redraw.apply(this,arguments)}}),u=e.simpleThemeLayer=function(t,e){return new a(t,e)};r.Zondy.Map.simpleThemeLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rankSymbolThemeLayer=void 0;var r=n(0),i=(n(2),n(27)),o=n(193),s=n(19),a=o.GraphThemeLayer.extend({initialize:function(t,e,n){o.GraphThemeLayer.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e,n=this;return i.Theme[n.symbolType]&&n.themeField&&n.symbolSetting&&(e=new i.Theme[n.symbolType](t,n,[n.themeField],n.symbolSetting,null,n.options)),!!e&&(e.assembleShapes(),e)},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),n=this._map.options.crs;e=window.L.bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()));var r=t.getLocalXY(e.min),i=t.getLocalXY(e.max),o=new s.Rectangle;o.xmin=Math.min(parseFloat(r[0]),parseFloat(i[0])),o.xmax=Math.max(parseFloat(r[0]),parseFloat(i[0])),o.ymin=Math.min(parseFloat(r[1]),parseFloat(i[1])),o.ymax=Math.max(parseFloat(r[1]),parseFloat(i[1]));for(var a=t.charts,u=[],l=0,c=a.length;l<c;l++){var h=a[l],f=h.resetLocation(),p=h.chartBounds;if(!o||t.isChartInMap(o,p)){var d=t._map.getZoom();t.options.fitZoom;if(!(o&&t.options.fitZoom>-1&&Math.abs(d-t.options.fitZoom)>1)){for(var y=!1,g=0;g<u.length;g++)if(t.isQuadrilateralOverLap(p,u[g])){y=!0;break}if(!y){u.push(p);for(var v=h.shapes,m=0,_=v.length;m<_;m++)v[m].refOriginalPosition=f,t.renderer.addShape(v[m])}}}}}}),u=e.rankSymbolThemeLayer=function(t,e,n){return new a(t,e,n)};r.Zondy.Map.rankSymbolThemeLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=void 0;var r=n(0),i=n(1);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,(0,i.extend)(this,e)};e.ThemeStyle=o,r.Zondy.Map.ThemeStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=void 0;var r=n(361),i=n(362),o=n(363),s=n(17),a=n(364),u=n(365),l=n(366),c=n(194),h=n(367),f=n(192),p=n(368),d=n(369);e.Bar=r.Bar,e.Bar3D=i.Bar3D,e.OverlayCircle=o.Circle,e.Graph=s.Graph,e.Line=a.Line,e.Pie=u.Pie,e.OverlayPoint=l.Point,e.RankSymbol=c.RankSymbol,e.Ring=h.Ring,e.ThemeVector=f.ThemeVector,e.ShapeFactory=p.ShapeFactory,e.ShapeParameters=p.ShapeParameters,e.FeatureCircle=p.FeatureCircle,e.Image=p.Image,e.Label=p.Label,e.FeatureLine=p.FeatureLine,e.Point=p.Point,e.FeaturePolygon=p.FeaturePolygon,e.FeatureRectangle=p.FeatureRectangle,e.Sector=p.Sector,e.FeatureTheme=p.FeatureTheme,e.LevelRenderer=d.LevelRenderer,e.Render=d.Render,e.Animation=d.Animation,e.Animator=d.Animator,e.Area=d.Area,e.Clip=d.Clip,e.Color=d.Color,e.ComputeBoundingBox=d.ComputeBoundingBox,e.Config=d.Config,e.LevelRendererCurve=d.LevelRendererCurve,e.Easing=d.Easing,e.Env=d.Env,e.LevelRendererEvent=d.LevelRendererEvent,e.Eventful=d.Eventful,e.Group=d.Group,e.Handler=d.Handler,e.Http=d.Http,e.Math=d.Math,e.Matrix=d.Matrix,e.Painter=d.Painter,e.PaintLayer=d.PaintLayer,e.Shape=d.Shape,e.SmicBrokenLine=d.SmicBrokenLine,e.SmicCircle=d.SmicCircle,e.SmicEllipse=d.SmicEllipse,e.SmicImage=d.SmicImage,e.SmicIsogon=d.SmicIsogon,e.SmicPoint=d.SmicPoint,e.SmicPolygon=d.SmicPolygon,e.SmicRectangle=d.SmicRectangle,e.SmicRing=d.SmicRing,e.SmicSector=d.SmicSector,e.SmicStar=d.SmicStar,e.SmicText=d.SmicText,e.Storage=d.Storage,e.Transformable=d.Transformable,e.Util=d.Util,e.LevelRendererVector=d.LevelRendererVector,e.SUtil=d.SUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(13),a=n(55),u=n(91),l=n(17);var c=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Bar",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var u=0,l=i.length;u<l;u++)if(i[u]<n[0]||i[u]>n[1])return;var c=this.calculateXShapeInfo();if(c){var h=c.xPositions,f=c.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(s.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(s.ShapeFactory.GraphAxis(this.shapeFactory,r,e,c)));for(var p=0;p<i.length;p++){var d=r[1]-(i[p]-n[0])/this.DVBUnitValue,y=[[h[p]-f/2,r[1]-1],[h[p]+f/2,r[1]-1],[h[p]+f/2,d],[h[p]-f/2,d]],g=new a.Polygon(y);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var v=e.barShadowStyle;v.shadowBlur&&(t.shadowBlur=v.shadowBlur),v.shadowColor&&(t.shadowColor=v.shadowColor),v.shadowOffsetX&&(t.shadowOffsetX=v.shadowOffsetX),v.shadowOffsetY&&(t.shadowOffsetY=v.shadowOffsetY)}g.style={},(0,o.copyAttributesWithClip)(g.style,t)}g.refDataID=this.data.FID,g.dataInfo={field:this.fields[p],value:i[p]},void 0!==e.barHoverAble&&(g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3===n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(a<=r)return null;o=a/r}else t=[o=s/(2*r+1),o,o];for(var u=0,l=0;l<r;l++)0===l?u=t[0]+o/2:u+=o+t[1],i.push(e[0]+u);return{xPositions:i,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,n=-1,r=0;r<t;r++){var i=this.shapes[r];if("Zondy.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var o=i.style,s=this.location[0]+o.pointList[0][0],a=this.location[0]+o.pointList[1][0];++n>=e.length&&(n%=e.length);var l=e[n][0],c=e[n][1],h=(new u.Color).getLinearGradient(s,0,a,0,[[0,l],[1,c]]);i.style.color=h}}}}]),e}();e.Bar=c,i.Zondy.Theme.Bar=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar3D=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(1),s=n(13),a=n(55),u=n(17);var l=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Bar3D",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var i=0,u=r.length;i<u;i++)if(r[i]<e[0]||r[i]>e[1])return;var l=this.calculateXShapeInfo();if(l){var c=l.xPositions,h=l.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(s.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(s.ShapeFactory.GraphAxis(this.shapeFactory,n,t,l)));for(var f=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,p=0;p<r.length;p++){var d=n[1]-(r[p]-e[0])/this.DVBUnitValue,y=c[p]-h/2,g=c[p]+h/2,v=[[y,d],[g,d],[g-f,d+f],[y-f,d+f]],m=[[g,d],[g-f,d+f],[g-f,n[1]+f],[g,n[1]]],_=[[y-f,n[1]+f],[g-f,n[1]+f],[g-f,d+f],[y-f,d+f]];f<=0&&(_=[[y,n[1]],[g,n[1]],[g,d],[y,d]]);var b=new a.Polygon(v),S=new a.Polygon(m),x=new a.Polygon(_);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,x.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,p,r[p]),S.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,p,r[p]),b.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,p,r[p]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,x.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),S.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),b.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),b.refDataID=S.refDataID=x.refDataID=this.data.FID,b.isHoverByRefDataID=S.isHoverByRefDataID=x.isHoverByRefDataID=!0,b.refDataHoverGroup=S.refDataHoverGroup=x.refDataHoverGroup=(0,o.newGuid)(),b.dataInfo=S.dataInfo=x.dataInfo={field:this.fields[p],value:r[p]},void 0!==t.barHoverAble&&(b.hoverable=S.hoverable=x.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(b.clickable=S.clickable=x.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(S)),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(x))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3===n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(a<=r)return null;o=a/r}else t=[o=s/(2*r+1),o,o];for(var u=0,l=0;l<r;l++)0===l?u=t[0]+o/2:u+=o+t[1],i.push(e[0]+u);return{xPositions:i,width:o}}}]),e}();e.Bar3D=l,i.Zondy.Theme.Bar3D=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(27),s=n(95),a=n(13),u=n(194);var l=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Circle",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.RankSymbol),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=o.Theme.getDataValues(this.data,this.fields,e);this.dataValues=n||[];var r=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var i=this.DVBCodomain;i&&i[1]-i[0]>0?this.DVBUnitValue=t.maxR/(i[1]-i[0]):this.DVBUnitValue=t.maxR;var u=this.DVBUnitValue,l=r[0]*u+t.minR;if(this.width=2*l,this.height=2*l,this.initBaseParameter()&&(!i||!(r[0]<i[0]||r[0]>i[1]))){var c=this.DVBCenterPoint,h=new s.Circle(c[0],c[1],l);h.style=a.ShapeFactory.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?h.style.fillColor=t.fillColor:h.style.fillColor="#ff9277",h.highlightStyle=a.ShapeFactory.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(h.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(h.clickable=t.circleClickAble),h.refDataID=this.data.FID,h.dataInfo={field:this.fields[0],r:l,value:r[0]},this.shapes.push(this.shapeFactory.createShape(h)),this.shapesConvertToRelativeCoordinate()}}}]),e}();e.Circle=l,i.Zondy.Theme.Circle=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(13),s=n(54),a=n(94),u=n(17);var l=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Line",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var u=this.calculateXShapeInfo();if(u){var l,c,h=u.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(o.ShapeFactory.GraphAxis(this.shapeFactory,e,t,u));for(var f=[],p=[],d=0,y=i.length;d<y;d++){if(i[d]<n[0]||i[d]>n[1])return null;l=h[d],c=e[1]-(i[d]-n[0])/r;var g=new s.Point(l,c);g.style=o.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,d,i[d]),g.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(g.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(g.clickable=t.pointClickAble),g.refDataID=this.data.FID,g.dataInfo={field:this.fields[d],value:i[d]},p.push(this.shapeFactory.createShape(g));var v=[l,c];f.push(v)}var m=new a.Line(f);m.style=o.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),m.clickable=!1,m.hoverable=!1;var _=this.shapeFactory.createShape(m);this.shapes.push(_),this.shapes=this.shapes.concat(p),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2===n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=r)return null;s=a/(r-1)}else t=[s=o/(r+1),s,s];for(var u=0,l=0;l<r;l++)0===l?u=t[0]:u+=s,i.push(e[0]+u);return{xPositions:i,width:0}}}]),e}();e.Line=l,i.Zondy.Theme.Line=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(13),s=n(56),a=n(17);var u=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Pie",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var a=0,u=0;u<n.length;u++)a+=Math.abs(n[u]);this.DVBUnitValue=360/a;for(var l=this.DVBUnitValue,c=this.DVBCenterPoint,h=0,f=0,p=h,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,y=0;y<n.length;y++){var g=Math.abs(n[y]);(f=0===y?h+g*l:y===g.length-1?p:h+g*l)-h>=360&&(f=359.9999999);var v=new s.Sector(c[0],c[1],d,h,f);if(void 0===t.sectorStyleByFields){var m=y%e.length;v.style=o.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else v.style=o.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,y,n[y]);v.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.FID,v.dataInfo={field:this.fields[y],value:n[y]},this.shapes.push(this.shapeFactory.createShape(v)),h=f}this.shapesConvertToRelativeCoordinate()}}}}]),e}();e.Pie=u,i.Zondy.Theme.Pie=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(13),s=n(54),a=n(17);var u=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Point",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,a=this.calculateXShapeInfo();if(a){var u,l,c=a.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(o.ShapeFactory.GraphAxis(this.shapeFactory,e,t,a));for(var h=0,f=i.length;h<f;h++){if(i[h]<n[0]||i[h]>n[1])return null;u=c[h],l=e[1]-(i[h]-n[0])/r;var p=new s.Point(u,l);p.style=o.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,h,i[h]),p.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.FID,p.dataInfo={field:this.fields[h],value:i[h]},this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2===n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=r)return null;s=a/(r-1)}else t=[s=o/(r+1),s,s];for(var u=0,l=0;l<r;l++)0===l?u=t[0]:u+=s,i.push(e[0]+u);return{xPositions:i,width:0}}}]),e}();e.Point=u,i.Zondy.Theme.Point=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(13),s=n(56),a=n(17);var u=function(t){function e(t,n,r,i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s));return a.CLASS_NAME="Zondy.Theme.Ring",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),r(e,[{key:"destroy",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var a=0,u=0;u<n.length;u++)a+=Math.abs(n[u]);this.DVBUnitValue=360/a;for(var l=this.DVBUnitValue,c=this.DVBCenterPoint,h=0,f=0,p=h,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,y=e.innerRingRadius>=0&&e.innerRingRadius<d,g=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&y?e.innerRingRadius:0,v=0;v<n.length;v++){var m=Math.abs(n[v]);f=0===v?h+m*l:v===m.length-1?p:h+m*l;var _=new s.Sector(c[0],c[1],d,h,f,g);if(void 0===e.sectorStyleByFields){var b=v%t.length;_.style=o.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else _.style=o.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,v,n[v]);_.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(_.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(_.clickable=e.sectorClickAble),_.refDataID=this.data.FID,_.dataInfo={field:this.fields[v],value:n[v]},this.shapes.push(this.shapeFactory.createShape(_)),h=f}this.shapesConvertToRelativeCoordinate()}}}}]),e}();e.Ring=u,i.Zondy.Theme.Ring=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=void 0;var r=n(13),i=n(15),o=n(95),s=n(187),a=n(186),u=n(94),l=n(54),c=n(55),h=n(185),f=n(56),p=n(27);e.ShapeFactory=r.ShapeFactory,e.ShapeParameters=i.ShapeParameters,e.FeatureCircle=o.Circle,e.Image=s.Image,e.Label=a.Label,e.FeatureLine=u.Line,e.Point=l.Point,e.FeaturePolygon=c.Polygon,e.FeatureRectangle=h.Rectangle,e.Sector=f.Sector,e.FeatureTheme=p.Theme},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=void 0;var r=n(169),i=n(170),o=n(182),s=n(173),a=n(183),u=n(91),l=n(174),c=n(92),h=n(52),f=n(184),p=n(175),d=n(176),y=n(40),g=n(172),v=n(181),m=n(177),_=n(178),b=n(179),S=n(180),x=n(6),w=n(97),P=n(189),C=n(370),O=n(93),T=n(371),E=n(96),L=n(57),M=n(190),I=n(372),N=n(191),A=n(373),R=n(188),D=n(171),k=n(51),j=n(26),F=n(53),B=n(9);e.LevelRenderer=r.LevelRenderer,e.Render=i.Render,e.Animation=o.Animation,e.Animator=o.Animator,e.Area=s.Area,e.Clip=a.Clip,e.Color=u.Color,e.ComputeBoundingBox=l.ComputeBoundingBox,e.Config=c.Config,e.LevelRendererCurve=h.Curve,e.Easing=f.Easing,e.Env=p.Env,e.LevelRendererEvent=d.Event,e.Eventful=y.Eventful,e.Group=g.Group,e.Handler=v.Handler,e.Http=m.Http,e.Math=_.Math,e.Matrix=b.Matrix,e.Painter=S.Painter,e.PaintLayer=S.PaintLayer,e.Shape=x.Shape,e.SmicBrokenLine=w.SmicBrokenLine,e.SmicCircle=P.SmicCircle,e.SmicEllipse=C.SmicEllipse,e.SmicImage=O.SmicImage,e.SmicIsogon=T.SmicIsogon,e.SmicPoint=E.SmicPoint,e.SmicPolygon=L.SmicPolygon,e.SmicRectangle=M.SmicRectangle,e.SmicRing=I.SmicRing,e.SmicSector=N.SmicSector,e.SmicStar=A.SmicStar,e.SmicText=R.SmicText,e.Storage=D.Storage,e.Transformable=k.Transformable,e.Util=j.Util,e.LevelRendererVector=F.Vector,e.SUtil=B.SUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicEllipse=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicellipse",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=.5522848,i=e.x+n[0],o=e.y+n[1],s=e.a,a=e.b,u=s*r,l=a*r;t.moveTo(i-s,o),t.bezierCurveTo(i-s,o-l,i-u,o-a,i,o-a),t.bezierCurveTo(i+u,o-a,i+s,o-l,i+s,o),t.bezierCurveTo(i+s,o+l,i+u,o+a,i,o+a),t.bezierCurveTo(i-u,o+a,i-s,o+l,i-s,o),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.a-e/2),y:Math.round(t.x+n[1]-t.b-e/2),width:2*t.a+e,height:2*t.b+e},t.__rect}}]),e}();e.SmicEllipse=s,i.Zondy.LevelRenderer.SmicEllipse=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicIsogon=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicisogon",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=s.SUtil.Util_math.sin,i=s.SUtil.Util_math.cos,o=Math.PI,a=e.n;if(a&&!(a<2)){var u=e.x+n[0],l=e.y+n[1],c=e.r,h=2*o/a,f=-o/2,p=u+c*i(f),d=l+c*r(f);f+=h;var y=e.pointList=[];y.push([p,d]);for(var g=0,v=a-1;g<v;g++)y.push([u+c*i(f),l+c*r(f)]),f+=h;y.push([p,d]),t.moveTo(y[0][0],y[0][1]);for(var m=0;m<y.length;m++)t.lineTo(y[m][0],y[m][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicIsogon=a,i.Zondy.LevelRenderer.SmicIsogon=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRing=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicring",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!1),t.moveTo(e.x+n[0]+e.r0,e.y+n[1]),t.arc(e.x+n[0],e.y+n[1],e.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicRing=s,i.Zondy.LevelRenderer.SmicRing=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicStar=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicstar",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),r(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=e.n;if(r&&!(r<2)){var i=s.SUtil.Util_math.sin,o=s.SUtil.Util_math.cos,a=Math.PI,u=e.x+n[0],l=e.y+n[1],c=e.r,h=e.r0;null==h&&(h=r>4?c*o(2*a/r)/o(a/r):c/3);var f=a/r,p=-a/2,d=u+c*o(p),y=l+c*i(p);p+=f;var g=e.pointList=[];g.push([d,y]);for(var v,m=0,_=2*r-1;m<_;m++)v=m%2==0?h:c,g.push([u+v*o(p),l+v*i(p)]),p+=f;g.push([d,y]),t.moveTo(g[0][0],g[0][1]);for(var b=0;b<g.length;b++)t.lineTo(g[b][0],g[b][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicStar=a,i.Zondy.LevelRenderer.SmicStar=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=e.AnimatedMarkerLayer=e.MarkerClusterLayer=e.ClusterLayer=e.HeaterLayer=e.StreamLayer=e.MapvLayer=e.EchartsLayer=void 0;var r=n(375),i=n(58),o=n(378),s=n(386),a=n(387),u=n(388),l=n(389),c=n(390);e.EchartsLayer=r.EchartsLayer,e.MapvLayer=i.MapvLayer,e.StreamLayer=o.StreamLayer,e.HeaterLayer=s.HeaterLayer,e.ClusterLayer=a.ClusterLayer,e.MarkerClusterLayer=u.MarkerClusterLayer,e.AnimatedMarkerLayer=l.AnimatedMarkerLayer,e.TimeDimension=c.TimeDimension,e.TimeDimensionControl=c.TimeDimensionControl,e.TimeDimensionLayer=c.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=c.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=c.TimeDimensionLayerWMS,e.TimeDimensionPlayer=c.TimeDimensionPlayer,e.TimeDimensionUtil=c.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.echartsLayer=e.EchartsLayer=void 0;var r=s(n(2)),i=s(n(195));n(28);var o=s(n(376));function s(t){return t&&t.__esModule?t:{default:t}}var a=e.EchartsLayer=r.default.Layer.extend({map:null,chart:null,options:null,echartsInitOpts:null,canvas:null,initialize:function(t,e){this.map=t,this.options=e,this.echartsInitOpts=e.echartsInitOpts,this.layerId=e.layerId||"echartlayerdefaultid",this.layerClass=e.classId||"echartlayerdefaultclass",this.visible=!0,this.initDevicePixelRatio(),this.initOptions(this.options),this.initEcharts(),this._resizeCanvas()},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},initOptions:function(t){if(t){if(t.leaflet)return;this.options.leaflet={roam:!0}}},initEcharts:function(){i.default.registerCoordinateSystem("leaflet",o.default),i.default.extendComponentModel({type:"leaflet",getBMap:function(){return this.__leaflet},defaultOption:{roam:!1}}),i.default.registerAction({type:"LeafletRoma",event:"LeafletRoma",update:"updateLayout"},function(t,e){})},_visible:function(){this.visible=!0,this.canvas.style.visibility="visible"},_unvisible:function(){this.visible=!1,this.canvas.style.visibility="hidden"},onAdd:function(t){var e=this;this.map=t,this.canvas=this._createCanvas(),this.map.getPanes().overlayPane.appendChild(this.canvas),this.chart=i.default.init(this.canvas,null,this.echartsInitOpts),i.default.leafletMap=t;var n=this;t.on("resize",function(t){var e=t.newSize;n.canvas.style.width=e.x+"px",n.canvas.style.height=e.y+"px",n.chart.resize()}),t.on("zoomstart",function(){n._unvisible()}),i.default.extendComponentView({type:"leaflet",render:function(t,r,o){var s=!0,a=i.default.leafletMap,u=o.getZr().painter.getViewportRoot(),l=t.coordinateSystem,c=function(){if(!s&&e.visible){var n=a.getBounds().getNorthWest(),r=a.latLngToLayerPoint(n),i=[parseInt(r.x,10)||0,parseInt(r.y,10)||0];u.style.left=i[0]+"px",u.style.top=i[1]+"px",l.setMapOffset(i),t.__mapOffset=i,o.dispatchAction({type:"LeafletRoma"})}},h=function(){n._visible(),!s&&e.visible&&o.dispatchAction({type:"LeafletRoma"})};this._oldMoveHandler&&a.off("move",this._oldMoveHandler),this._oldZoomEndHandler&&a.off("zoomend",this._oldZoomEndHandler),a.on("move",c),a.on("zoomend",h),this._oldMoveHandler=c,this._oldZoomEndHandler=h;t.get("roam");s=!1}}),this.chart.setOption(this.options)},onRemove:function(t){this.chart.dispose()},_createCanvas:function(){var t=document.createElement("div");return t.id=this.layerId,t.style.top="0px",t.style.left="0px",t.height=this.map.getSize().y+"px",t.width=this.map.getSize().x+"px",t.style.height=this.map.getSize().y+"px",t.style.width=this.map.getSize().x+"px",t.style.zIndex=1e3,t.setAttribute("id",this.layerId),t.setAttribute("class",this.layerClass),this.canvas=t,t},_resizeCanvas:function(){var t=this;window.onresize=function(){var e=t.canvas;t.map;e.style.top="0px",e.style.left="0px",e.height=this.map.getSize().y+"px",e.width=this.map.getSize().x+"px",e.style.height=this.map.getSize().y+"px",e.style.width=this.map.getSize().x+"px",t.chart.resize()}},show:function(){this._visible()},hide:function(){this._unvisible()},resize:function(){var t=this.canvas;this.map;t.style.top="0px",t.style.left="0px",t.height=this.map.getSize().y+"px",t.width=this.map.getSize().x+"px",t.style.height=this.map.getSize().y+"px",t.style.width=this.map.getSize().x+"px",this.chart.resize()},update:function(t){this.chart.setOption(t)}}),u=e.echartsLayer=function(t,e){return new a(t,e)};r.default.zondy.EchartsLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapCoordSys=s;var r=o(n(195)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e}s.prototype.dimensions=["lng","lat"],s.prototype.setMapOffset=function(t){this._mapOffset=t},s.prototype.getBMap=function(){return this._LeafletMap},s.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=89.99);var e=new i.default.latLng(t[1],t[0]),n=this._LeafletMap.latLngToLayerPoint(e),r=this._mapOffset;return[n.x-r[0],n.y-r[1]]},s.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]])).lng,t.lat]},s.prototype.getViewRect=function(){var t=this._api;return new r.default.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},s.prototype.getRoamTransform=function(){return r.default.matrix.create()},s.prototype.prepareCustoms=function(){var t=r.default.util,e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(e,n){return n=n||[0,0],t.map([0,1],function(t){var r=n[t],i=e[t]/2,o=[],s=[];return o[t]=r-i,s[t]=r+i,o[1-t]=s[1-t]=n[1-t],Math.abs(this.dataToPoint(o)[t]-this.dataToPoint(s)[t])},this)},this)}}},s.dimensions=s.prototype.dimensions,s.create=function(t,e){var n;t.eachComponent("leaflet",function(t,i){e.getZr().painter.getViewportRoot();var o=r.default.leafletMap;n||(n=new s(o,e)),n.setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=n}),t.eachSeries(function(t){if(!t.get("coordinateSystem")||"leaflet"===t.get("coordinateSystem")){if(!n){var i=r.default.leafletMap;n=new s(i,e)}t.coordinateSystem=n,t.animation=!0===t.animation}})},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvBaseLayer=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(98),o=function(t){return t&&t.__esModule?t:{default:t}}(n(2));function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=i.baiduMapLayer?i.baiduMapLayer.__proto__:Function;e.MapvBaseLayer=function(t){function e(t,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));if(!a)return s(o);o.map=t,o.dataSet=n,o.options=r;var u=o;return r=r||{},u.init(r),u.argCheck(r),o.initDevicePixelRatio(),o.canvasLayer=i,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),r(e,[{key:"clickEvent",value:function(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,r=t.layerPoint;r.x,e.x,r.y,e.y}},{key:"mousemoveEvent",value:function(t){if(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,r=t.layerPoint;r.x,e.x,r.y,e.y}}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer&&!this.canvasLayer.disposeFlag){var e=this,n=this.map,r=e.options.animation,s=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void this.clear(s);"2d"==this.context&&(s.save(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0, 0, 0, .1)",s.fillRect(0,0,s.canvas.width,s.canvas.height),s.restore())}else this.clear(s);if("2d"==this.context)for(var a in e.options)s[a]=e.options[a];else s.clear(s.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&n.getZoom()<e.options.minZoom||e.options.maxZoom&&n.getZoom()>e.options.maxZoom)){var u=n.getBounds().getNorthWest(),l=n.latLngToContainerPoint(u),c={transferCoordinate:function(t){var r=n.latLngToContainerPoint(new o.default.LatLng(t[1],t[0]));return"heatmap"===e.options.draw&&(r.x/=e.devicePixelRatio,r.y/=e.devicePixelRatio),[r.x-l.x,r.y-l.y]}};void 0!==t&&(c.filter=function(e){var n=r.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var h=e.dataSet.get(c);this.processData(h),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var f=n.latLngToContainerPoint(o.default.latLng(0,0)),p={x:f.x-l.x,y:f.y-l.y};this.drawContext(s,new i.DataSet(h),e.options,p),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"updateData",value:function(t,n){var r=t;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.streamLayer=e.StreamLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var i=n(379),o=n(99),s=n(384),a=n(385);var u=e.StreamLayer=r.default.LayerGroup.extend({initialize:function(t,e,n){this.options=n||{},this.map=t,this.url=e,this._layers={},r.default.Util.setOptions(this,n),this.socketService=new i.SocketService(this.url,this.options)},onAdd:function(t){this.bindEvent(),"mapv"===this.options.render?this.addLayer(new s.MapvStreamLayer(this.map,this.url,this.options)):this.addLayer(new a.GeojsonStreamLayer(this.url,this.options)),r.default.LayerGroup.prototype.onAdd.call(this,t)},bindEvent:function(){var t=this;this.socketService.createSubscribe(),this.socketService.on(o.SubscribeEvent.OPEN,function(e){return t.fire(o.SubscribeEvent.OPEN,e)}),this.socketService.on(o.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)})},unbindEvent:function(){var t=this;this.socketService&&(this.socketService.on(o.SubscribeEvent.OPEN,function(e){return t.fire(o.SubscribeEvent.OPEN,e)}),this.socketService.on(o.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)}),this.socketService&&this.socketService.closeSubscribe())},onRemove:function(t){this.unbindEvent()},onMessage:function(t){var e=this;this.getLayers().map(function(n){return n.onMessage(t),e.fire(o.LayerEvent.UPDATE,{layer:n,data:t.feature}),n})}}),l=e.streamLayer=function(t,e,n){return new u(t,e,n)};r.default.zondy.StreamLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.socketService=e.SocketService=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(99),o=n(380),s=n(383);r.default.zondy.SocketService=void 0;var a=e.SocketService=s.ServiceEvent.extend({initialize:function(t,e){this.url=t||"",this.options=e||{},this.socket=new o.ISocketService(t,e)},createSubscribe:function(){console.log("socketcontextleafletonoff(types, fn, context)contextthisthisonthis"),this.socket.createSubscribe(),this.socket.evented.on(i.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.on(i.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(i.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(i.SubscribeEvent.ERROR,this.mapEvent,this)},createBroadcast:function(){this.socket.createBroadcast(),this.socket.evented.on(i.BroadcastEvent.OPEN,this.mapEvent,this),this.socket.evented.on(i.BroadcastEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(i.BroadcastEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(i.BroadcastEvent.ERROR,this.mapEvent,this)},mapEvent:function(t){this.fire(t.eventType||t.type,t)},broadcast:function(t){this.socket&&this.socket.broadcast(t)},closeSubscribe:function(){this.socket.closeSubscribe(),this.socket.evented.off(i.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.off(i.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.off(i.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.off(i.SubscribeEvent.ERROR,this.mapEvent,this)},closeBroadcast:function(){this.socket.closeBroadcast(),this.socket.evented.off(i.BroadcastEvent.OPEN,this.mapEvent),this.socket.evented.off(i.BroadcastEvent.MESSAGE,this.mapEvent),this.socket.evented.off(i.BroadcastEvent.CLOSE,this.mapEvent),this.socket.evented.off(i.BroadcastEvent.ERROR,this.mapEvent)}}),u=e.socketService=function(t,e){return new a(t,e)};r.default.zondy.SocketService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISocketService=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),o=n(381),s=n(99);i.Zondy.Socket.ISocketService=void 0;var a=e.ISocketService=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.options=n,this.subscribesocket=null,this.subscribesocket=null,this.evented=new o.Evented}return r(t,[{key:"createSubscribe",value:function(){var t=this;this.subscribesocket=this.connect(this.url+s.SubscribePrefix),this.subscribesocket.onopen=function(e){e.eventType=s.SubscribeEvent.OPEN,t.evented.fire(s.SubscribeEvent.OPEN,e)},this.subscribesocket.onmessage=function(e){var n=JSON.parse(e.data);e.feature=n,e.eventType=s.SubscribeEvent.MESSAGE,t.evented.fire(s.SubscribeEvent.MESSAGE,e)},this.subscribesocket.onclose=function(e){e.eventType=s.SubscribeEvent.CLOSE,t.evented.fire(s.SubscribeEvent.CLOSE,e)},this.subscribesocket.onerror=function(e){e.eventType=s.SubscribeEvent.ERROR,t.evented.fire(s.SubscribeEvent.ERROR,e)}}},{key:"createBroadcast",value:function(){var t=this;this.broadcastsocket=this.connect(this.url+s.BroadcastPrefix),this.broadcastsocket.onopen=function(e){e.eventType=s.BroadcastEvent.OPEN,t.evented.fire(s.BroadcastEvent.OPEN,e)},this.broadcastsocket.onmessage=function(e){var n=JSON.parse(e.data);e.feature=n,e.eventType=s.BroadcastEvent.MESSAGE,t.evented.fire(s.BroadcastEvent.MESSAGE,e)},this.broadcastsocket.onclose=function(e){e.eventType=s.BroadcastEvent.CLOSE,t.evented.fire(s.BroadcastEvent.CLOSE,e)},this.broadcastsocket.onerror=function(e){e.eventType=s.BroadcastEvent.ERROR,t.evented.fire(s.BroadcastEvent.ERROR,e)}}},{key:"connect",value:function(t){return new("MozWebSocket"in window?window.MozWebSocket:WebSocket)(t)}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen&&this.broadcastsocket.send(JSON.stringify(t))}},{key:"closeSubscribe",value:function(){this.subscribesocket.close(),this.subscribesocket=null}},{key:"closeBroadcast",value:function(){this.broadcastsocket.close(),this.broadcastsocket=null}},{key:"close",value:function(){this.subscribesocket.close(),this.broadcastsocket.close(),this.subscribesocket=null,this.broadcastsocket=null}}]),t}();i.Zondy.Socket.ISocketService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Evented=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(382));var s=e.Evented=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"on",value:function(t,e,n){if("object"===(void 0===t?"undefined":r(t)))for(var i in t)this._on(i,t[i],e);else for(var s=0,a=(t=o.splitWords(t)).length;s<a;s++)this._on(t[s],e,n);return this}},{key:"off",value:function(t,e,n){if(t)if("object"===(void 0===t?"undefined":r(t)))for(var i in t)this._off(i,t[i],e);else for(var s=0,a=(t=o.splitWords(t)).length;s<a;s++)this._off(t[s],e,n);else delete this._Evented;return this}},{key:"_on",value:function(t,e,n){this._Evented=this._Evented||{};var r=this._Evented[t];r||(r=[],this._Evented[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(i)}},{key:"_off",value:function(t,e,n){var r,i,s;if(this._Evented&&(r=this._Evented[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,s=r.length;i<s;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=o.falseFn,this._firingCount&&(this._Evented[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,s=r.length;i<s;i++)r[i].fn=o.falseFn;delete this._Evented[t]}}},{key:"fire",value:function(t,e,n){if(!this.listens(t,n))return this;var r=o.extend({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._Evented){var i=this._Evented[t];if(i){this._firingCount=this._firingCount+1||1;for(var s=0,a=i.length;s<a;s++){var u=i[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this}},{key:"listens",value:function(t,e){var n=this._Evented&&this._Evented[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1}},{key:"once",value:function(t,e,n){if("object"===(void 0===t?"undefined":r(t))){for(var i in t)this.once(i,t[i],e);return this}var s=o.bind(function(){this.off(t,e,n).off(t,s,n)},this);return this.on(t,e,n).on(t,s,n)}},{key:"addEventParent",value:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o.stamp(t)]=t,this}},{key:"removeEventParent",value:function(t){return this._eventParents&&delete this._eventParents[o.stamp(t)],this}},{key:"_propagateEvent",value:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o.extend({layer:t.target,propagatedFrom:t.target},t),!0)}}]),t}();s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extend=function(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t},e.bind=i,e.stamp=function(t){return t._leaflet_id=t._leaflet_id||(e.lastId=o+=1),t._leaflet_id},e.throttle=function(t,e,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(s,e),r=!0)}},e.wrapNum=function(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i},e.falseFn=function(){return!1},e.formatNum=function(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n},e.trim=s,e.splitWords=function(t){return s(t).split(/\s+/)},e.setOptions=function(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},e.getParamString=function(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")},e.template=function(t,e){return t.replace(a,function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"==typeof r&&(r=r(e)),r})},e.indexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},e.requestAnimFrame=function(t,e,n){if(!n||h!==c)return h.call(window,i(t,e));t.call(e)},e.cancelAnimFrame=function(t){t&&f.call(window,t)};var r=e.create=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=e.lastId=0;function s(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}var a=/\{ *([\w_-]+) *\}/g;e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function u(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var l=0;function c(t){var e=+new Date,n=Math.max(0,16-(e-l));return l=e+n,window.setTimeout(t,n)}var h=e.requestFn=window.requestAnimationFrame||u("RequestAnimationFrame")||c,f=e.cancelFn=window.cancelAnimationFrame||u("CancelAnimationFrame")||u("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceEvent=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var i=e.ServiceEvent=r.default.Evented.extend({initialize:function(t,e){this.url=t,r.default.setOptions(this,e),this.fire("initialize",this)},destroy:function(){this.fire("destroy",this)}});r.default.zondy.ServiceEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvStreamLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(58);e.MapvStreamLayer=i.MapvLayer.extend({initialize:function(t,e,n){n=n||{},r.default.Util.setOptions(this,n),this.mapvOption=n.mapvOption||{},this.data=[],this.lastDate=new Date,this.url=e,this.fieldHash={},this.fieldDeg=n.fieldDeg,this.iconUrl=n.iconUrl,this.timeSpeed=n.timeSpeed||100,this.createIcon(),i.MapvLayer.prototype.initialize.call(this,t,new window.mapv.DataSet([]),this.mapvOption,n)},onMessage:function(t){var e=t.feature,n=t.feature.properties[this.options.field],r=this.parasIcon(e);void 0!==n&&this.fieldHash[n]?this.data[this.fieldHash[n]]=r:void 0!==n&&(this.data.push(r),this.fieldHash[n]=this.data.length-1),this.updateLayer()},createIcon:function(){var t=this.iconUrl||"http://client.snanyun.com:8899/img/leaflet/marker/bike.png";this.icon=new Image,this.icon.src=t},parasIcon:function(t){this.mapvOption={draw:"icon"};var e=t.properties[this.fieldDeg]||0;return{geometry:{type:"Point",coordinates:t.geometry.coordinates},deg:e,icon:this.icon}},updateLayer:function(){var t=new Date;t-this.lastDate<this.timeSpeed||(this.updateData(this.data,this.mapvOption),this.lastDate=t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeojsonStreamLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));e.GeojsonStreamLayer=r.default.GeoJSON.extend({initialize:function(t,e){(e=e||{}).style&&!e.pointToLayer&&(e.pointToLayer=function(t,n){return r.default.circleMarker(n,e.style())}),r.default.Util.setOptions(this,e),this._layers={},r.default.stamp(this),this.url=t,this.fieldHash={}},onMessage:function(t){var e=t.feature,n=t.feature.properties[this.options.field],i=null;void 0!==n&&this.fieldHash[n]?(i=this.getLayer(this.fieldHash[n]),this.parasFeature(i,e)):((i=r.default.GeoJSON.geometryToLayer(e,this.options)).feature=r.default.GeoJSON.asFeature(e),this.addLayer(i),void 0!==n&&(this.fieldHash[n]=this.getLayerId(i))),this.options.onEachFeature&&this.options.onEachFeature(e,i)},parasFeature:function(t,e){e.properties&&(t.feature.properties=e.properties);var n=[];switch(e.geometry.type){case"Point":n=r.default.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=r.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=r.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(n);break;case"MultiPolygon":n=r.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(n)}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heaterLayer=e.HeaterLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var i=n(58),o=n(98);var s=e.HeaterLayer=r.default.Layer.extend({map:null,options:{},data:[],dataset:null,initialize:function(t,e,n){this.map=t;if(n){var r=n.size,i=n.gradient,o=n.max,s=n.field;this.field=s,this.options={size:r||1,gradient:i||{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},max:o||100,draw:"heatmap"},this.data=this.convertData(e),this.layer=null}},convertData:function(t){var e=this,n=[];if(!t)return n;var r=t.type;if("FeatureCollection"===r){var i=t.features;if(!i||i.length<=0)return n;var o=this.findNumberFieldName(i[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n];if("number"==typeof e[n])return r}},onAdd:function(t){this.map=t,this.dataset=new o.DataSet(this.data),this.layer=new i.MapvLayer(t,this.dataset,this.options).addTo(t)},onRemove:function(t){this.layer.remove()},show:function(){this.layer&&this.layer.show()},hide:function(){this.layer&&this.layer.hide()}}),a=e.heaterLayer=function(t,e,n){return new s(t,e,n)};r.default.zondy.HeaterLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterLayer=e.ClusterLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var i=n(58),o=n(98);var s=e.ClusterLayer=r.default.Layer.extend({map:null,options:{},data:[],dataset:null,initialize:function(t,e,n){this.map=t;if(n){var r=n.size,i=n.gradient,o=n.max,s=n.field,a=n.type;this.field=s,this.options={size:r||1,label:{sho1:!0,fillStyle:"white",shadowColor:"yellow",font:"15px Arial",shadowBlur:10},gradient:i||{0:"rgba(49, 54, 149, 0)",.2:"rgba(69,117,180, 0.7)",.3:"rgba(116,173,209, 0.7)",.4:"rgba(171,217,233, 0.7)",.5:"rgba(224,243,248, 0.7)",.6:"rgba(254,224,144,0.7)",.7:"rgba(253,174,97,0.7)",.8:"rgba(244,109,67,0.8)",.9:"rgba(215,48,39,0.8)",.95:"rgba(165, 0, 38,0.8)"},shadowColor:"rgba(255, 255, 50, 1)",shadowBlur:5,max:o||100,draw:a||"grid"},this.data=this.convertData(e),this.layer=null}},convertData:function(t){var e=this,n=[];if(!t)return n;var r=t.type;if("FeatureCollection"===r){var i=t.features;if(!i||i.length<=0)return n;var o=this.findNumberFieldName(i[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n];if("number"==typeof e[n])return r}},onAdd:function(t){this.map=t,this.dataset=new o.DataSet(this.data),this.layer=new i.MapvLayer(t,this.dataset,this.options).addTo(t)},onRemove:function(t){this.layer.remove()},show:function(){this.layer&&this.layer.show()},hide:function(){this.layer&&this.layer.hide()}}),a=e.clusterLayer=function(t,e,n){return new s(t,e,n)};r.default.zondy.ClusterLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.markerClusterLayer=e.MarkerClusterLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var i=e.MarkerClusterLayer=r.default.Layer.extend({map:null,options:{},data:[],initialize:function(t,e,n){this.map=t;var r=n.field;this.field=r,this.options=n,this.data=this.convertData(e),this.layer=null},convertData:function(t){var e=this,n=[];if(!t)return n;var r=t.type;if("FeatureCollection"===r){var i=t.features;if(!i||i.length<=0)return n;var o=this.findNumberFieldName(i[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n];if("number"==typeof e[n])return r}},onAdd:function(t){this.map=t;var e=this.options,n=e.extend,i=e.isCover,o=e.isZoom,s=e.zoom,a=e.title;this.layer=r.default.markerClusterGroup({disableClusteringAtZoom:s||20,spiderfyOnMaxZoom:n||!0,showCoverageOnHover:i||!0,zoomToBoundsOnClick:o||!0});for(var u=0;u<this.data.length;u++){var l=this.data[u],c=l.count,h=l.properties[a],f=r.default.marker(r.default.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0]),{title:h});f.bindPopup(c),this.layer.addLayer(f)}t.addLayer(this.layer)},onRemove:function(t){this.layer.remove()}}),o=e.markerClusterLayer=function(t,e,n){return new i(t,e,n)};r.default.zondy.MarkerClusterLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.animatedMarkerLayer=e.AnimatedMarkerLayer=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var i=e.AnimatedMarkerLayer=r.default.Marker.extend({options:{distance:200,interval:1e3,autoStart:!0,onEnd:function(){},clickable:!1},initialize:function(t,e){this.setLine(t),r.default.Marker.prototype.initialize.call(this,t[0],e)},_chunk:function(t){var e,n=t.length,i=[];for(e=1;e<n;e++){var o=t[e-1],s=t[e],a=o.distanceTo(s),u=this.options.distance/a,l=u*(s.lat-o.lat),c=u*(s.lng-o.lng);if(a>this.options.distance)for(;a>this.options.distance;)a=(o=new r.default.LatLng(o.lat+l,o.lng+c)).distanceTo(s),i.push(o);else i.push(o)}return i.push(t[n-1]),i},onAdd:function(t){r.default.Marker.prototype.onAdd.call(this,t),this.options.autoStart&&this.start()},animate:function(){var t=this,e=this._latlngs.length,n=this.options.interval;this._i<e&&this._i>0&&(n=this._latlngs[this._i-1].distanceTo(this._latlngs[this._i])/this.options.distance*this.options.interval),r.default.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[r.default.DomUtil.TRANSITION]="all "+n+"ms linear"),this._shadow&&(this._shadow.style[r.default.DomUtil.TRANSITION]="all "+n+"ms linear")),this.setLatLng(this._latlngs[this._i]),this._i++,this._tid=setTimeout(function(){t._i===e?t.options.onEnd.apply(t,Array.prototype.slice.call(arguments)):t.animate()},n)},start:function(){this.animate()},stop:function(){this._tid&&clearTimeout(this._tid)},setLine:function(t){r.default.DomUtil.TRANSITION?this._latlngs=t:(this._latlngs=this._chunk(t),this.options.distance=10,this.options.interval=30),this._i=0}}),o=e.animatedMarkerLayer=function(t,e){return new i(t,e)};r.default.zondy.AnimatedMarkerLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=void 0;var r=n(391),i=n(393),o=n(101),s=n(394),a=n(395),u=n(196),l=n(100);e.TimeDimension=r.TimeDimension,e.TimeDimensionControl=i.TimeDimensionControl,e.TimeDimensionLayer=o.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=s.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=a.TimeDimensionLayerWMS,e.TimeDimensionPlayer=u.TimeDimensionPlayer,e.TimeDimensionUtil=l.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimension=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(100);var o=e.TimeDimension=(r.default.Layer||r.default.Class).extend({includes:r.default.Evented||r.default.Mixin.Events,initialize:function(t){r.default.setOptions(this,t),this._availableTimes=this._generateAvailableTimes(),this._currentTimeIndex=-1,this._loadingTimeIndex=-1,this._loadingTimeout=this.options.loadingTimeout||3e3,this._syncedLayers=[],this._availableTimes.length>0&&this.setCurrentTime(this.options.currentTime||this._getDefaultCurrentTime()),this.options.lowerLimitTime&&this.setLowerLimit(this.options.lowerLimitTime),this.options.upperLimitTime&&this.setUpperLimit(this.options.upperLimitTime)},getAvailableTimes:function(){return this._availableTimes},getCurrentTimeIndex:function(){return-1===this._currentTimeIndex?this._availableTimes.length-1:this._currentTimeIndex},getCurrentTime:function(){var t=-1;return(t=-1!==this._loadingTimeIndex?this._loadingTimeIndex:this.getCurrentTimeIndex())>=0?this._availableTimes[t]:null},isLoading:function(){return-1!==this._loadingTimeIndex},setCurrentTimeIndex:function(t){var e=this._upperLimit||this._availableTimes.length-1,n=this._lowerLimit||0;if(!((t=Math.min(Math.max(n,t),e))<0)){this._loadingTimeIndex=t;var r=this._availableTimes[t];this._checkSyncedLayersReady(this._availableTimes[this._loadingTimeIndex])?this._newTimeIndexLoaded():(this.fire("timeloading",{time:r}),setTimeout(function(t){t==this._loadingTimeIndex&&(console.log("Change time for timeout"),this._newTimeIndexLoaded())}.bind(this,t),this._loadingTimeout))}},_newTimeIndexLoaded:function(){if(-1!==this._loadingTimeIndex){var t=this._availableTimes[this._loadingTimeIndex];this._currentTimeIndex=this._loadingTimeIndex,this.fire("timeload",{time:t}),this._loadingTimeIndex=-1}},_checkSyncedLayersReady:function(t){for(var e=0,n=this._syncedLayers.length;e<n;e++)if(this._syncedLayers[e].isReady&&!this._syncedLayers[e].isReady(t))return!1;return!0},setCurrentTime:function(t){var e=this._seekNearestTimeIndex(t);this.setCurrentTimeIndex(e)},seekNearestTime:function(t){var e=this._seekNearestTimeIndex(t);return this._availableTimes[e]},nextTime:function(t,e){t||(t=1);var n=this._currentTimeIndex,r=this._upperLimit||this._availableTimes.length-1,i=this._lowerLimit||0;this._loadingTimeIndex>-1&&(n=this._loadingTimeIndex),(n+=t)>r&&(n=e?i:r),n<i&&(n=e?r:i),this.setCurrentTimeIndex(n)},prepareNextTimes:function(t,e,n){t||(t=1);var r=this._currentTimeIndex,i=r;this._loadingTimeIndex>-1&&(r=this._loadingTimeIndex);for(var o=0,s=this._syncedLayers.length;o<s;o++)this._syncedLayers[o].setMinimumForwardCache&&this._syncedLayers[o].setMinimumForwardCache(e);for(var a=e,u=this._upperLimit||this._availableTimes.length-1,l=this._lowerLimit||0;a>0;){if((r+=t)>u){if(!n)break;r=l}if(r<l){if(!n)break;r=u}if(i===r)break;this.fire("timeloading",{time:this._availableTimes[r]}),a--}},getNumberNextTimesReady:function(t,e,n){t||(t=1);var r=this._currentTimeIndex;this._loadingTimeIndex>-1&&(r=this._loadingTimeIndex);for(var i=e,o=0,s=this._upperLimit||this._availableTimes.length-1,a=this._lowerLimit||0;i>0;){if((r+=t)>s){if(!n){i=0,o=e;break}r=a}if(r<a){if(!n){i=0,o=e;break}r=s}var u=this._availableTimes[r];this._checkSyncedLayersReady(u)&&o++,i--}return o},previousTime:function(t,e){this.nextTime(-1*t,e)},registerSyncedLayer:function(t){this._syncedLayers.push(t),t.on("timeload",this._onSyncedLayerLoaded,this)},unregisterSyncedLayer:function(t){var e=this._syncedLayers.indexOf(t);-1!=e&&this._syncedLayers.splice(e,1),t.off("timeload",this._onSyncedLayerLoaded,this)},_onSyncedLayerLoaded:function(t){t.time==this._availableTimes[this._loadingTimeIndex]&&this._checkSyncedLayersReady(t.time)&&this._newTimeIndexLoaded()},_generateAvailableTimes:function(){if(this.options.times)return i.TimeDimensionUtil.parseTimesExpression(this.options.times);if(this.options.timeInterval){var t=i.TimeDimensionUtil.parseTimeInterval(this.options.timeInterval),e=this.options.period||"P1D",n=this.options.validTimeRange||void 0;return i.TimeDimensionUtil.explodeTimeRange(t[0],t[1],e,n)}return[]},_getDefaultCurrentTime:function(){var t=this._seekNearestTimeIndex((new Date).getTime());return this._availableTimes[t]},_seekNearestTimeIndex:function(t){for(var e=0,n=this._availableTimes.length;e<n&&!(t<this._availableTimes[e]);e++);return e>0&&e--,e},setAvailableTimes:function(t,e){var n=this.getCurrentTime(),r=this.getLowerLimit(),o=this.getUpperLimit();if("extremes"==e){var s=this.options.period||"P1D";this._availableTimes=i.TimeDimensionUtil.explodeTimeRange(new Date(t[0]),new Date(t[t.length-1]),s)}else{var a=i.TimeDimensionUtil.parseTimesExpression(t);if(0===this._availableTimes.length)this._availableTimes=a;else if("intersect"==e)this._availableTimes=i.TimeDimensionUtil.intersect_arrays(a,this._availableTimes);else if("union"==e)this._availableTimes=i.TimeDimensionUtil.union_arrays(a,this._availableTimes);else{if("replace"!=e)throw"Merge available times mode not implemented: "+e;this._availableTimes=a}}r&&this.setLowerLimit(r),o&&this.setUpperLimit(o),this.setCurrentTime(n),this.fire("availabletimeschanged",{availableTimes:this._availableTimes,currentTime:n}),console.log("available times changed")},getLowerLimit:function(){return this._availableTimes[this.getLowerLimitIndex()]},getUpperLimit:function(){return this._availableTimes[this.getUpperLimitIndex()]},setLowerLimit:function(t){var e=this._seekNearestTimeIndex(t);this.setLowerLimitIndex(e)},setUpperLimit:function(t){var e=this._seekNearestTimeIndex(t);this.setUpperLimitIndex(e)},setLowerLimitIndex:function(t){this._lowerLimit=Math.min(Math.max(t||0,0),this._upperLimit||this._availableTimes.length-1),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},setUpperLimitIndex:function(t){this._upperLimit=Math.max(Math.min(t,this._availableTimes.length-1),this._lowerLimit||0),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},getLowerLimitIndex:function(){return this._lowerLimit},getUpperLimitIndex:function(){return this._upperLimit}});r.default.Map.addInitHook(function(){this.options.timeDimension&&(this.timeDimension=r.default.timeDimension(this.options.timeDimensionOptions||{}))});r.default.zondy.TimeDimension=function(t){return new o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.iso8601={Period:{}};function i(t,e){var n,r=e||!1,i=[2,3,4,5,7,8,9],o=[0,0,0,0,0,0,0],s=[0,12,4,7,24,60,60];if(!(t=t.toUpperCase()))return o;if("string"!=typeof t)throw new Error("Invalid iso8601 period string '"+t+"'");if(!(n=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(t)))throw new Error("String '"+t+"' is not a valid ISO8601 period.");for(var a=0;a<i.length;a++){var u=i[a];o[a]=n[u]?+n[u].replace(/[A-Za-z]+/g,""):0}if(r)for(a=o.length-1;a>0;a--)o[a]>=s[a]&&(o[a-1]=o[a-1]+Math.floor(o[a]/s[a]),o[a]=o[a]%s[a]);return o}r.version="0.2",r.Period.parse=function(t,e){return i(t,e)},r.Period.parseToTotalSeconds=function(t){for(var e=[31104e3,2592e3,604800,86400,3600,60,1],n=i(t),r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r},r.Period.isValid=function(t){try{return i(t),!0}catch(t){return!1}},r.Period.parseToString=function(t,e,n,r){var o=["","","","","","",""],s=i(t,r);e||(e=["year","month","week","day","hour","minute","second"]),n||(n=["years","months","weeks","days","hours","minutes","seconds"]);for(var a=0;a<s.length;a++)s[a]>0&&(1==s[a]?o[a]=s[a]+" "+e[a]:o[a]=s[a]+" "+n[a]);return o.join(" ").trim().replace(/[ ]{2,}/g," ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeDimension=e.TimeDimensionControl=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(196);r.default.UI=r.default.ui=r.default.UI||{},r.default.UI.Knob=r.default.Draggable.extend({options:{className:"knob",step:1,rangeMin:0,rangeMax:10},initialize:function(t,e){r.default.setOptions(this,e),this._element=r.default.DomUtil.create("div",this.options.className||"knob",t),r.default.Draggable.prototype.initialize.call(this,this._element,this._element),this._container=t,this.on("predrag",function(){this._newPos.y=0,this._newPos.x=this._adjustX(this._newPos.x)},this),this.on("dragstart",function(){r.default.DomUtil.addClass(t,"dragging")}),this.on("dragend",function(){r.default.DomUtil.removeClass(t,"dragging")}),r.default.DomEvent.on(this._element,"dblclick",function(t){this.fire("dblclick",t)},this),r.default.DomEvent.disableClickPropagation(this._element),this.enable()},_getProjectionCoef:function(){return(this.options.rangeMax-this.options.rangeMin)/(this._container.offsetWidth||this._container.style.width)},_update:function(){this.setPosition(r.default.DomUtil.getPosition(this._element).x)},_adjustX:function(t){var e=this._toValue(t)||this.getMinValue();return this._toX(this._adjustValue(e))},_adjustValue:function(t){return t=Math.max(this.getMinValue(),Math.min(this.getMaxValue(),t)),t-=this.options.rangeMin,t=Math.round(t/this.options.step)*this.options.step,t+=this.options.rangeMin,t=Math.round(100*t)/100},_toX:function(t){return(t-this.options.rangeMin)/this._getProjectionCoef()},_toValue:function(t){return t*this._getProjectionCoef()+this.options.rangeMin},getMinValue:function(){return this.options.minValue||this.options.rangeMin},getMaxValue:function(){return this.options.maxValue||this.options.rangeMax},setStep:function(t){this.options.step=t,this._update()},setPosition:function(t){r.default.DomUtil.setPosition(this._element,r.default.point(this._adjustX(t),0)),this.fire("positionchanged")},getPosition:function(){return r.default.DomUtil.getPosition(this._element).x},setValue:function(t){this.setPosition(this._toX(t))},getValue:function(){return this._adjustValue(this._toValue(this.getPosition()))}});var o=e.TimeDimensionControl=r.default.Control.extend({options:{styleNS:"leaflet-control-timecontrol",position:"bottomleft",title:"Time Control",backwardButton:!0,forwardButton:!0,playButton:!0,playReverseButton:!1,loopButton:!1,displayDate:!0,timeSlider:!0,timeSliderDragUpdate:!1,limitSliders:!1,limitMinimumRange:5,speedSlider:!0,minSpeed:.1,maxSpeed:10,speedStep:.1,timeSteps:1,autoPlay:!1,playerOptions:{transitionTime:1e3},timeZones:["UTC","Local"]},initialize:function(t){r.default.setOptions(t),r.default.Control.prototype.initialize.call(this,t),this._timeZoneIndex=0,this._timeDimension=this.options.timeDimension||null},onAdd:function(t){var e;return this._map=t,!this._timeDimension&&t.timeDimension&&(this._timeDimension=t.timeDimension),this._initPlayer(),e=r.default.DomUtil.create("div","leaflet-bar leaflet-bar-horizontal leaflet-bar-timecontrol"),this.options.backwardButton&&(this._buttonBackward=this._createButton("Backward",e)),this.options.playReverseButton&&(this._buttonPlayReversePause=this._createButton("Play Reverse",e)),this.options.playButton&&(this._buttonPlayPause=this._createButton("Play",e)),this.options.forwardButton&&(this._buttonForward=this._createButton("Forward",e)),this.options.loopButton&&(this._buttonLoop=this._createButton("Loop",e)),this.options.displayDate&&(this._displayDate=this._createButton("Date",e)),this.options.timeSlider&&(this._sliderTime=this._createSliderTime(this.options.styleNS+" timecontrol-slider timecontrol-dateslider",e)),this.options.speedSlider&&(this._sliderSpeed=this._createSliderSpeed(this.options.styleNS+" timecontrol-slider timecontrol-speed",e)),this._steps=this.options.timeSteps||1,this._timeDimension.on("timeload",this._update,this),this._timeDimension.on("timeload",this._onPlayerStateChange,this),this._timeDimension.on("timeloading",this._onTimeLoading,this),this._timeDimension.on("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this),r.default.DomEvent.disableClickPropagation(e),e},addTo:function(){return r.default.Control.prototype.addTo.apply(this,arguments),this._onPlayerStateChange(),this._onTimeLimitsChanged(),this._update(),this},onRemove:function(){this._player.off("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.off("waiting",this._onPlayerWaiting,this),this._timeDimension.off("timeload",this._update,this),this._timeDimension.off("timeload",this._onPlayerStateChange,this),this._timeDimension.off("timeloading",this._onTimeLoading,this),this._timeDimension.off("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this)},_initPlayer:function(){this._player||(this.options.player?this._player=this.options.player:this._player=new i.TimeDimensionPlayer(this.options.playerOptions,this._timeDimension)),this.options.autoPlay&&this._player.start(this._steps),this._player.on("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.on("waiting",this._onPlayerWaiting,this),this._onPlayerStateChange()},_onTimeLoading:function(t){t.time==this._timeDimension.getCurrentTime()&&this._displayDate&&r.default.DomUtil.addClass(this._displayDate,"loading")},_onTimeLimitsChanged:function(){var t=this._timeDimension.getLowerLimitIndex(),e=this._timeDimension.getUpperLimitIndex(),n=this._timeDimension.getAvailableTimes().length-1;this._limitKnobs&&(this._limitKnobs[0].options.rangeMax=n,this._limitKnobs[1].options.rangeMax=n,this._limitKnobs[0].setValue(t||0),this._limitKnobs[1].setValue(e||n)),this._sliderTime&&(this._sliderTime.options.rangeMax=n,this._sliderTime._update())},_onPlayerWaiting:function(t){this._buttonPlayPause&&this._player.getSteps()>0&&(r.default.DomUtil.addClass(this._buttonPlayPause,"loading"),this._buttonPlayPause.innerHTML=this._getDisplayLoadingText(t.available,t.buffer)),this._buttonPlayReversePause&&this._player.getSteps()<0&&(r.default.DomUtil.addClass(this._buttonPlayReversePause,"loading"),this._buttonPlayReversePause.innerHTML=this._getDisplayLoadingText(t.available,t.buffer))},_onPlayerStateChange:function(){if(this._buttonPlayPause&&(this._player.isPlaying()&&this._player.getSteps()>0?(r.default.DomUtil.addClass(this._buttonPlayPause,"pause"),r.default.DomUtil.removeClass(this._buttonPlayPause,"play")):(r.default.DomUtil.removeClass(this._buttonPlayPause,"pause"),r.default.DomUtil.addClass(this._buttonPlayPause,"play")),this._player.isWaiting()&&this._player.getSteps()>0?r.default.DomUtil.addClass(this._buttonPlayPause,"loading"):(this._buttonPlayPause.innerHTML="",r.default.DomUtil.removeClass(this._buttonPlayPause,"loading"))),this._buttonPlayReversePause&&(this._player.isPlaying()&&this._player.getSteps()<0?r.default.DomUtil.addClass(this._buttonPlayReversePause,"pause"):r.default.DomUtil.removeClass(this._buttonPlayReversePause,"pause"),this._player.isWaiting()&&this._player.getSteps()<0?r.default.DomUtil.addClass(this._buttonPlayReversePause,"loading"):(this._buttonPlayReversePause.innerHTML="",r.default.DomUtil.removeClass(this._buttonPlayReversePause,"loading"))),this._buttonLoop&&(this._player.isLooped()?r.default.DomUtil.addClass(this._buttonLoop,"looped"):r.default.DomUtil.removeClass(this._buttonLoop,"looped")),this._sliderSpeed&&!this._draggingSpeed){var t=this._player.getTransitionTime()||1e3;t=Math.round(1e4/t)/10,this._sliderSpeed.setValue(t)}},_update:function(){if(this._timeDimension)if(this._timeDimension.getCurrentTimeIndex()>=0){var t=new Date(this._timeDimension.getCurrentTime());this._displayDate&&(r.default.DomUtil.removeClass(this._displayDate,"loading"),this._displayDate.innerHTML=this._getDisplayDateFormat(t)),this._sliderTime&&!this._slidingTimeSlider&&this._sliderTime.setValue(this._timeDimension.getCurrentTimeIndex())}else this._displayDate&&(this._displayDate.innerHTML=this._getDisplayNoTimeError())},_createButton:function(t,e){var n=r.default.DomUtil.create("a",this.options.styleNS+" timecontrol-"+t.toLowerCase(),e);return n.href="#",n.title=t,r.default.DomEvent.addListener(n,"click",r.default.DomEvent.stopPropagation).addListener(n,"click",r.default.DomEvent.preventDefault).addListener(n,"click",this["_button"+t.replace(/ /i,"")+"Clicked"],this),n},_createSliderTime:function(t,e){var n,i,o,s,a;return n=r.default.DomUtil.create("div",t,e),i=r.default.DomUtil.create("div","slider",n),o=this._timeDimension.getAvailableTimes().length-1,this.options.limitSliders&&(a=this._limitKnobs=this._createLimitKnobs(i)),(s=new r.default.UI.Knob(i,{className:"knob main",rangeMin:0,rangeMax:o})).on("dragend",function(t){var e=t.target.getValue();this._sliderTimeValueChanged(e),this._slidingTimeSlider=!1},this),s.on("drag",function(t){this._slidingTimeSlider=!0;var e=this._timeDimension.getAvailableTimes()[t.target.getValue()];if(e){var n=new Date(e);this._displayDate&&(this._displayDate.innerHTML=this._getDisplayDateFormat(n)),this.options.timeSliderDragUpdate&&this._sliderTimeValueChanged(t.target.getValue())}},this),s.on("predrag",function(){var t,e;a&&(t=a[0].getPosition(),e=a[1].getPosition(),this._newPos.x<t&&(this._newPos.x=t),this._newPos.x>e&&(this._newPos.x=e))},s),r.default.DomEvent.on(i,"click",function(t){if(!r.default.DomUtil.hasClass(t.target,"knob")){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=r.default.DomEvent.getMousePosition(e,i).x;a?a[0].getPosition()<=n&&n<=a[1].getPosition()&&(s.setPosition(n),this._sliderTimeValueChanged(s.getValue())):(s.setPosition(n),this._sliderTimeValueChanged(s.getValue()))}},this),s.setPosition(0),s},_createLimitKnobs:function(t){r.default.DomUtil.addClass(t,"has-limits");var e=this._timeDimension.getAvailableTimes().length-1,n=r.default.DomUtil.create("div","range",t),i=new r.default.UI.Knob(t,{className:"knob lower",rangeMin:0,rangeMax:e}),o=new r.default.UI.Knob(t,{className:"knob upper",rangeMin:0,rangeMax:e});return r.default.DomUtil.setPosition(n,0),i.setPosition(0),o.setPosition(e),i.on("dragend",function(t){var e=t.target.getValue();this._sliderLimitsValueChanged(e,o.getValue())},this),o.on("dragend",function(t){var e=t.target.getValue();this._sliderLimitsValueChanged(i.getValue(),e)},this),i.on("drag positionchanged",function(){r.default.DomUtil.setPosition(n,r.default.point(i.getPosition(),0)),n.style.width=o.getPosition()-i.getPosition()+"px"},this),o.on("drag positionchanged",function(){n.style.width=o.getPosition()-i.getPosition()+"px"},this),o.on("predrag",function(){var t=i._toX(i.getValue()+this.options.limitMinimumRange);o._newPos.x<=t&&(o._newPos.x=t)},this),i.on("predrag",function(){var t=o._toX(o.getValue()-this.options.limitMinimumRange);i._newPos.x>=t&&(i._newPos.x=t)},this),i.on("dblclick",function(){this._timeDimension.setLowerLimitIndex(0)},this),o.on("dblclick",function(){this._timeDimension.setUpperLimitIndex(this._timeDimension.getAvailableTimes().length-1)},this),[i,o]},_createSliderSpeed:function(t,e){var n=r.default.DomUtil.create("div",t,e),i=r.default.DomUtil.create("span","speed",n),o=r.default.DomUtil.create("div","slider",n),s=Math.round(1e4/(this._player.getTransitionTime()||1e3))/10;i.innerHTML=this._getDisplaySpeed(s);var a=new r.default.UI.Knob(o,{step:this.options.speedStep,rangeMin:this.options.minSpeed,rangeMax:this.options.maxSpeed});return a.on("dragend",function(t){var e=t.target.getValue();this._draggingSpeed=!1,i.innerHTML=this._getDisplaySpeed(e),this._sliderSpeedValueChanged(e)},this),a.on("drag",function(t){this._draggingSpeed=!0,i.innerHTML=this._getDisplaySpeed(t.target.getValue())},this),a.on("positionchanged",function(t){i.innerHTML=this._getDisplaySpeed(t.target.getValue())},this),r.default.DomEvent.on(o,"click",function(t){if(t.target!==a._element){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=r.default.DomEvent.getMousePosition(e,o).x;a.setPosition(n),i.innerHTML=this._getDisplaySpeed(a.getValue()),this._sliderSpeedValueChanged(a.getValue())}},this),a},_buttonBackwardClicked:function(){this._timeDimension.previousTime(this._steps)},_buttonForwardClicked:function(){this._timeDimension.nextTime(this._steps)},_buttonLoopClicked:function(){this._player.setLooped(!this._player.isLooped())},_buttonPlayClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(this._steps)},_buttonPlayReverseClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(-1*this._steps)},_buttonDateClicked:function(){this._switchTimeZone()},_sliderTimeValueChanged:function(t){this._timeDimension.setCurrentTimeIndex(t)},_sliderLimitsValueChanged:function(t,e){this._timeDimension.setLowerLimitIndex(t),this._timeDimension.setUpperLimitIndex(e)},_sliderSpeedValueChanged:function(t){this._player.setTransitionTime(1e3/t)},_getCurrentTimeZone:function(){return this.options.timeZones[this._timeZoneIndex]},_switchTimeZone:function(){"utc"==this._getCurrentTimeZone().toLowerCase()&&r.default.DomUtil.removeClass(this._displayDate,"utc"),this._timeZoneIndex=(this._timeZoneIndex+1)%this.options.timeZones.length;var t=this._getCurrentTimeZone();"utc"==t.toLowerCase()?(r.default.DomUtil.addClass(this._displayDate,"utc"),this._displayDate.title="UTC Time"):"local"==t.toLowerCase()?this._displayDate.title="Local Time":this._displayDate.title=t,this._update()},_getDisplayDateFormat:function(t){var e=this._getCurrentTimeZone();return"utc"==e.toLowerCase()?t.toISOString():"local"==e.toLowerCase()?t.toLocaleString():t.toLocaleString([],{timeZone:e,timeZoneName:"short"})},_getDisplaySpeed:function(t){return t+"fps"},_getDisplayLoadingText:function(t,e){return"<span>"+Math.floor(t/e*100)+"%</span>"},_getDisplayNoTimeError:function(){return"Time not available"}});r.default.Map.addInitHook(function(){this.options.timeDimensionControl&&(this.timeDimensionControl=r.default.control.timeDimension(this.options.timeDimensionControlOptions||{}),this.addControl(this.timeDimensionControl))});var s=e.timeDimension=function(t){return new o(t)};r.default.zondy.TimeDimensionControl=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayerGeoJson=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(101),o=n(100);var s=e.TimeDimensionLayerGeoJson=i.TimeDimensionLayer.extend({initialize:function(t,e){i.TimeDimensionLayer.prototype.initialize.call(this,t,e),this._updateTimeDimension=this.options.updateTimeDimension||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"extremes",this._duration=this.options.duration||null,this._addlastPoint=this.options.addlastPoint||!1,this._waitForReady=this.options.waitForReady||!1,this._updateCurrentTime=this.options.updateCurrentTime||this._updateTimeDimension,this._availableTimes=[],this._loaded=!1,0==this._baseLayer.getLayers().length?this._waitForReady?this._baseLayer.on("ready",this._onReadyBaseLayer,this):this._loaded=!0:(this._loaded=!0,this._setAvailableTimes()),this._baseLayer.on("layeradd",function(){this._loaded&&this._setAvailableTimes()}.bind(this))},onAdd:function(t){i.TimeDimensionLayer.prototype.onAdd.call(this,t),this._loaded&&this._setAvailableTimes()},eachLayer:function(t,e){return this._currentLayer&&t.call(e,this._currentLayer),i.TimeDimensionLayer.prototype.eachLayer.call(this,t,e)},isReady:function(t){return this._loaded},_update:function(){if(this._map&&this._loaded){this._timeDimension.getCurrentTime();var t=this._timeDimension.getCurrentTime(),e=0;if(this._duration){var n=new Date(t);o.TimeDimensionUtil.subtractTimeDuration(n,this._duration,!0),e=n.getTime()}for(var i=r.default.geoJson(null,this._baseLayer.options),s=this._baseLayer.getLayers(),a=0,u=s.length;a<u;a++){var l=this._getFeatureBetweenDates(s[a].feature,e,t);if(l&&(i.addData(l),this._addlastPoint&&"LineString"==l.geometry.type&&l.geometry.coordinates.length>0)){var c=l.properties;c.last=!0,i.addData({type:"Feature",properties:c,geometry:{type:"Point",coordinates:l.geometry.coordinates[l.geometry.coordinates.length-1]}})}}this._currentLayer&&this._map.removeLayer(this._currentLayer),i.getLayers().length&&(i.addTo(this._map),this._currentLayer=i)}},_setAvailableTimes:function(){for(var t=[],e=this._baseLayer.getLayers(),n=0,r=e.length;n<r;n++)if(e[n].feature)for(var i=this._getFeatureTimes(e[n].feature),s=0,a=i.length;s<a;s++)t.push(i[s]);this._availableTimes=o.TimeDimensionUtil.sort_and_deduplicate(t),this._updateCurrentTime=this._updateCurrentTime||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length,this._timeDimension&&(this._updateTimeDimension||0==this._timeDimension.getAvailableTimes().length)&&this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode),this._updateCurrentTime&&this._timeDimension&&this._availableTimes.length&&this._timeDimension.setCurrentTime(this._availableTimes[0])},_getFeatureTimes:function(t){if(!t.featureTimes){t.properties?t.properties.hasOwnProperty("coordTimes")?t.featureTimes=t.properties.coordTimes:t.properties.hasOwnProperty("times")?t.featureTimes=t.properties.times:t.properties.hasOwnProperty("linestringTimestamps")?t.featureTimes=t.properties.linestringTimestamps:t.properties.hasOwnProperty("time")?t.featureTimes=[t.properties.time]:t.featureTimes=[]:t.featureTimes=[];for(var e=0,n=t.featureTimes.length;e<n;e++){var r=t.featureTimes[e];("string"==typeof r||r instanceof String)&&(r=Date.parse(r.trim()),t.featureTimes[e]=r)}}return t.featureTimes},_getFeatureBetweenDates:function(t,e,n){var r=this._getFeatureTimes(t);if(0==r.length)return t;var i=null,o=null,s=r.length;if(r[0]>n||r[s-1]<e)return null;if(r[s-1]>e)for(var a=0;a<s;a++)if(null===i&&r[a]>e&&(i=a),r[a]>n){o=a;break}null===i&&(i=0),null===o&&(o=s);var u=[];return u=t.geometry.coordinates[0].length?t.geometry.coordinates.slice(i,o):t.geometry.coordinates,{type:"Feature",properties:t.properties,geometry:{type:t.geometry.type,coordinates:u}}},_onReadyBaseLayer:function(){this._loaded=!0,this._setAvailableTimes(),this._update()}});r.default.zondy.TimeDimensionLayerGeoJson=function(t,e){return new s(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayerWMS=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),i=n(101);var o=e.TimeDimensionLayerWMS=i.TimeDimensionLayer.extend({initialize:function(t,e){r.default.TimeDimension.Layer.prototype.initialize.call(this,t,e),this._timeCacheBackward=this.options.cacheBackward||this.options.cache||0,this._timeCacheForward=this.options.cacheForward||this.options.cache||0,this._wmsVersion=this.options.wmsVersion||this.options.version||t.options.version||"1.1.1",this._getCapabilitiesParams=this.options.getCapabilitiesParams||{},this._getCapabilitiesAlternateUrl=this.options.getCapabilitiesUrl||null,this._getCapabilitiesAlternateLayerName=this.options.getCapabilitiesLayerName||null,this._proxy=this.options.proxy||null,this._updateTimeDimension=this.options.updateTimeDimension||!1,this._setDefaultTime=this.options.setDefaultTime||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"intersect",this._period=this.options.period||null,this._layers={},this._defaultTime=0,this._availableTimes=[],this._capabilitiesRequested=!1,(this._updateTimeDimension||this.options.requestTimeFromCapabilities)&&this._requestTimeDimensionFromCapabilities(),this._baseLayer.on("load",function(){this._baseLayer.setLoaded(!0),this.fire("timeload",{time:this._defaultTime})}.bind(this))},getEvents:function(){var t=r.default.bind(this._unvalidateCache,this);return{moveend:t,zoomend:t}},eachLayer:function(t,e){for(var n in this._layers)this._layers.hasOwnProperty(n)&&t.call(e,this._layers[n]);return r.default.TimeDimension.Layer.prototype.eachLayer.call(this,t,e)},_onNewTimeLoading:function(t){var e=this._getLayerForTime(t.time);this._map.hasLayer(e)||this._map.addLayer(e)},isReady:function(t){var e=this._getLayerForTime(t);return!(!this.options.bounds||!this._map||this._map.getBounds().contains(this.options.bounds))||e.isLoaded()},onAdd:function(t){r.default.TimeDimension.Layer.prototype.onAdd.call(this,t),0==this._availableTimes.length?this._requestTimeDimensionFromCapabilities():this._updateTimeDimensionAvailableTimes()},_update:function(){if(this._map){var t=this._timeDimension.getCurrentTime(),e=this._getLayerForTime(t);null==this._currentLayer&&(this._currentLayer=e),this._map.hasLayer(e)?this._showLayer(e,t):this._map.addLayer(e)}},setOpacity:function(t){for(var e in r.default.TimeDimension.Layer.prototype.setOpacity.apply(this,arguments),this._layers)this._layers.hasOwnProperty(e)&&this._layers[e].setOpacity&&this._layers[e].setOpacity(t)},setZIndex:function(t){for(var e in r.default.TimeDimension.Layer.prototype.setZIndex.apply(this,arguments),this._layers)this._layers.hasOwnProperty(e)&&this._layers[e].setZIndex&&this._layers[e].setZIndex(t)},setParams:function(t,e){for(var n in r.default.extend(this._baseLayer.options,t),this._baseLayer.setParams&&this._baseLayer.setParams(t,e),this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].setParams&&(this._layers[n].setLoaded(!1),this._layers[n].setParams(t,e));return this},_unvalidateCache:function(){var t=this._timeDimension.getCurrentTime();for(var e in this._layers)t!=e&&this._layers.hasOwnProperty(e)&&(this._layers[e].setLoaded(!1),this._layers[e].redraw())},_evictCachedTimes:function(t,e){var n,r=this._getLoadedTimes(),i=String(this._currentTime),o=r.indexOf(i),s=[];e>-1&&((n=o-e)>0&&(s=r.splice(0,n),this._removeLayers(s)));t>-1&&(o=r.indexOf(i),(n=r.length-o-t-1)>0&&(s=r.splice(o+t+1,n),this._removeLayers(s)))},_showLayer:function(t,e){this._currentLayer&&this._currentLayer!==t&&this._currentLayer.hide(),t.show(),this._currentLayer&&this._currentLayer===t||(this._currentLayer=t,this._currentTime=e,console.log("Show layer "+t.wmsParams.layers+" with time: "+new Date(e).toISOString()),this._evictCachedTimes(this._timeCacheForward,this._timeCacheBackward))},_getLayerForTime:function(t){if(0==t||t==this._defaultTime||null==t)return this._baseLayer;if(this._layers.hasOwnProperty(t))return this._layers[t];var e=this._getNearestTime(t);if(this._layers.hasOwnProperty(e))return this._layers[e];var n=this._createLayerForTime(e);return this._layers[t]=n,n.on("load",function(t,e){t.setLoaded(!0),this._layers[e]||(this._layers[e]=t),this._timeDimension&&e==this._timeDimension.getCurrentTime()&&!this._timeDimension.isLoading()&&this._showLayer(t,e),this.fire("timeload",{time:e})}.bind(this,n,t)),n.onAdd=function(t){Object.getPrototypeOf(this).onAdd.call(this,t),this.hide()}.bind(n),n},_createLayerForTime:function(t){var e=this._baseLayer.options;return e.time=new Date(t).toISOString(),new this._baseLayer.constructor(this._baseLayer.getURL(),e)},_getLoadedTimes:function(){var t=[];for(var e in this._layers)this._layers.hasOwnProperty(e)&&t.push(e);return t.sort(function(t,e){return t-e})},_removeLayers:function(t){for(var e=0,n=t.length;e<n;e++)this._map&&this._map.removeLayer(this._layers[t[e]]),delete this._layers[t[e]]},setMinimumForwardCache:function(t){t>this._timeCacheForward&&(this._timeCacheForward=t)},_requestTimeDimensionFromCapabilities:function(){if(!this._capabilitiesRequested){this._capabilitiesRequested=!0;var t=this._getCapabilitiesUrl();this._proxy&&(t=this._proxy+"?url="+encodeURIComponent(t));var e=new XMLHttpRequest;e.addEventListener("load",function(t){var e=t.currentTarget.responseXML;null!==e&&(this._defaultTime=Date.parse(this._getDefaultTimeFromCapabilities(e)),this._setDefaultTime=this._setDefaultTime||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length,this.setAvailableTimes(this._parseTimeDimensionFromCapabilities(e)),this._setDefaultTime&&this._timeDimension&&this._timeDimension.setCurrentTime(this._defaultTime))}.bind(this)),e.overrideMimeType("application/xml"),e.open("GET",t),e.send()}},_getCapabilitiesUrl:function(){var t=this._baseLayer.getURL();this._getCapabilitiesAlternateUrl&&(t=this._getCapabilitiesAlternateUrl);var e=r.default.extend({},this._getCapabilitiesParams,{request:"GetCapabilities",service:"WMS",version:this._wmsVersion});return t+=r.default.Util.getParamString(e,t,e.uppercase)},_parseTimeDimensionFromCapabilities:function(t){var e=t.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,r=null,i=null;return e.forEach(function(t){t.querySelector("Name").innerHTML===n&&(r=t)}),r&&((i=this._getTimesFromLayerCapabilities(r))||(i=this._getTimesFromLayerCapabilities(r.parentNode))),i},_getTimesFromLayerCapabilities:function(t){for(var e=null,n=t.children,r=0,i=n.length;r<i;r++)if(("Extent"===n[r].nodeName||"Dimension"===n[r].nodeName)&&"time"===n[r].getAttribute("name")&&n[r].textContent.length){e=n[r].textContent.trim();break}return e},_getDefaultTimeFromCapabilities:function(t){var e=t.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,r=null;e.forEach(function(t){t.querySelector("Name").innerHTML===n&&(r=t)});var i=0;return r&&0==(i=this._getDefaultTimeFromLayerCapabilities(r))&&(i=this._getDefaultTimeFromLayerCapabilities(r.parentNode)),i},_getDefaultTimeFromLayerCapabilities:function(t){for(var e=0,n=t.children,r=0,i=n.length;r<i;r++)if(("Extent"===n[r].nodeName||"Dimension"===n[r].nodeName)&&"time"===n[r].getAttribute("name")&&n[r].attributes.default&&n[r].attributes.default.textContent.length){e=n[r].attributes.default.textContent.trim();break}return e},setAvailableTimes:function(t){this._availableTimes=r.default.TimeDimension.Util.parseTimesExpression(t,this._period),this._updateTimeDimensionAvailableTimes()},_updateTimeDimensionAvailableTimes:function(){(this._timeDimension&&this._updateTimeDimension||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length)&&(this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode),this._setDefaultTime&&this._defaultTime>0&&this._timeDimension.setCurrentTime(this._defaultTime))},_getNearestTime:function(t){if(this._layers.hasOwnProperty(t))return t;if(0==this._availableTimes.length)return t;for(var e=0,n=this._availableTimes.length;e<n&&!(t<this._availableTimes[e]);e++);return e>0&&e--,t!=this._availableTimes[e]&&(console.log("Search layer time: "+new Date(t).toISOString()),console.log("Return layer time: "+new Date(this._availableTimes[e]).toISOString())),this._availableTimes[e]}});r.default.NonTiledLayer||(r.default.NonTiledLayer=(r.default.Layer||r.default.Class).extend({})),r.default.NonTiledLayer.include({_visible:!0,_loaded:!1,_originalUpdate:r.default.NonTiledLayer.prototype._update,_originalOnRemove:r.default.NonTiledLayer.prototype.onRemove,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},onRemove:function(t){this._loaded=!1,this._originalOnRemove(t)},setLoaded:function(t){this._loaded=t},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._div.style.display="none"},show:function(){this._visible=!0,this._div.style.display="block"},getURL:function(){return this._wmsUrl}}),r.default.TileLayer.include({_visible:!0,_loaded:!1,_originalUpdate:r.default.TileLayer.prototype._update,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},setLoaded:function(t){this._loaded=t},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._container&&(this._container.style.display="none")},show:function(){this._visible=!0,this._container&&(this._container.style.display="block")},getURL:function(){return this._url}});r.default.zondy.TimeDimensionLayerWMS=function(t,e){return new o(t,e)}}]);