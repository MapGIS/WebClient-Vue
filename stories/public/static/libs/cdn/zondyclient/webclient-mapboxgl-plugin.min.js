(function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=232)})([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=window.Zondy=window.Zondy||{};n.Event=n.Event||{};n.Object=n.Object||{};n.Object.ContourAnalyse=n.Object.ContourAnalyse||{};n.Object.Theme=n.Object.Theme||{};n.Theme=n.Theme||{};n.Service=n.Service||{};n.Socket=n.Socket||{};n.Enum=n.Enum||{};n.Enum.Net=n.Enum.Net||{};n.Enum.Theme=n.Enum.Theme||{};n.Enum.Map=n.Enum.Map||{};n.Catalog=n.Catalog||{};n.Util=n.Util||{};n.CRS=n.CRS||{};n.Map=n.Map||{};n.xsd=n.xsd||{};n.XLink=n.XLink||{};n.extent=n.extent||{};n.xml=n.xml||{};n.array=n.array||{};n.string=n.string||{};n.LevelRenderer=n.LevelRenderer||{};n.LevelRenderer.Tool=n.LevelRenderer.Tool||{};n.LevelRenderer.Animation=n.LevelRenderer.Animation||{};n.Feature=n.Feature||{};n.Feature.ShapeParameters=n.Feature.ShapeParameters||{};n.Geometry=n.Geometry||{};n.Client=n.Client||{};n.Source=n.Source||{};n.GeomInteraction=n.GeomInteraction||{};n.Format=n.Format||{};n.Control=n.Control||{};n.OGC=n.OGC||{};n.DataStore=n.DataStore||{};n.DataStore.ElasticSearch=n.DataStore.ElasticSearch||{};n.DataStore.PostGIS=n.DataStore.PostGIS||{};n.DataStore.Hbase=n.DataStore.Hbase||{};n.DataStore.MongoDB=n.DataStore.MongoDB||{};n.CloudDisk=n.CloudDisk||{};n.CloudDisk.GisCore=n.CloudDisk.GisCore||{};n.CloudDisk.Model=n.CloudDisk.Model||{};n.IGServerX=n.IGServerX||{};n.IGServerX.Vector=n.IGServerX.Vector||{};t.Zondy=n},function(e,t,r){"use strict";t.__esModule=true;t.default=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}},function(e,t,r){e.exports={default:r(276),__esModule:true}},function(e,t,r){"use strict";t.__esModule=true;var n=r(24);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&((typeof t==="undefined"?"undefined":(0,i.default)(t))==="object"||typeof t==="function")?t:e}},function(e,t,r){"use strict";t.__esModule=true;var n=r(278);var i=l(n);var o=r(282);var a=l(o);var s=r(24);var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":(0,u.default)(t)))}e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)i.default?(0,i.default)(e,t):e.__proto__=t}},function(e,t,r){"use strict";t.__esModule=true;var n=r(58);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,i.default)(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.notNULL=t.formatPoints=t.returnPoint=t.formatEdits=t.formatQuery=t.createCanvasContext2D=t.mixin=t.merge=t.DeepMerge=t.ChineseToUtf8=t.getTopAnalysisResult=t.bindAsEventListener=t.bind=t.newGuid=t.cloneObject=t.copyAttributesWithClip=t.copyAttributes=t.transformResult=t.toJSON=t.isInTheSameDomain=t.supportCanvas=t.isSupportCanvas=t.getBrowser=t.Browser=t.IS_GECKO=t.getParameters=t.urlAppend=t.getWFParameterString=t.getParameterString=t.applyDefaults=t.modifyDOMElement=t.indexOf=t.removeItem=t.isElement=t.getElement=t.reset=t.copyExcluce=t.copy=t.extendDeep=t.isArray=t.extend=undefined;var n=r(8);var i=b(n);var o=r(78);var a=b(o);var s=r(58);var u=b(s);var l=r(86);var f=b(l);var c=r(246);var h=b(c);var p=r(92);var d=b(p);var v=r(1);var y=b(v);var g=r(24);var m=b(g);var _=r(0);function b(e){return e&&e.__esModule?e:{default:e}}var S=function e(t,r){t=t||{};if(r){for(var n in r){var i=r[n];if(i!==undefined){t[n]=i}}var o=typeof window.Event==="function"&&r instanceof window.Event;if(!o&&r.hasOwnProperty&&r.hasOwnProperty("toString")){t.toString=r.toString}}return t};var x=function e(t){return Object.prototype.toString.call(t)==="[object Array]"};var C=function e(t,r){var n,i=Object.prototype.toString,o="[object Array]";t=t||{};for(n in r){if(r.hasOwnProperty(n)){if((0,m.default)(r[n])==="object"){if(i.call(t[n])==="[object Null]"||i.call(t[n])==="[object Undefined]"){t[n]=i.call(r[n])===o?[]:{}}e(t[n],r[n])}else{t[n]=r[n]}if(r[n]===""||r[n]===null){t[n]=r[n]}}}return t};var w=function e(t,r){t=t||{};var n;if(r){for(var i in t){n=r[i];if(typeof n!=="undefined"){t[i]=n}}}};var P=function e(t,r,n){t=t||{};var i;if(r){for(var o in r){i=r[o];if(typeof i!=="undefined"&&typeof i!=="function"){if(n.indexOf(o)<0){t[o]=i}}}}};var I=function e(t){t=t||{};for(var r in t){if(t.hasOwnProperty(r)){if((0,m.default)(t[r])==="object"&&t[r]instanceof Array){for(var n in t[r]){if(t[r][n].destroy){t[r][n].destroy()}}t[r].length=0}else if((0,m.default)(t[r])==="object"&&t[r]instanceof Object){if(t[r].destroy){t[r].destroy()}}t[r]=null}}};var E=function e(){var t=[];for(var r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(typeof i==="string"){i=document.getElementById(i)}if(arguments.length===1){return i}t.push(i)}return t};var L=function e(t){return!!(t&&t.nodeType===1)};var T=function e(t,r){for(var n=t.length-1;n>=0;n--){if(t[n]===r){t.splice(n,1)}}return t};var M=function e(t,r){if(t==null){return-1}else{if(typeof t.indexOf==="function"){return t.indexOf(r)}else{for(var n=0,i=t.length;n<i;n++){if(t[n]===r){return n}}return-1}}};var O=function e(t,r,n,i,o,a,s,u){if(r){t.id=r}if(n){t.style.left=n.x+"px";t.style.top=n.y+"px"}if(i){t.style.width=i.w+"px";t.style.height=i.h+"px"}if(o){t.style.position=o}if(a){t.style.border=a}if(s){t.style.overflow=s}if(parseFloat(u)>=0&&parseFloat(u)<1){t.style.filter="alpha(opacity="+u*100+")";t.style.opacity=u}else if(parseFloat(u)===1){t.style.filter="";t.style.opacity=""}};var A=function e(t,r){t=t||{};var n=typeof window.Event==="function"&&r instanceof window.Event;for(var i in r){if(t[i]===undefined||!n&&r.hasOwnProperty&&r.hasOwnProperty(i)&&!t.hasOwnProperty(i)){t[i]=r[i]}}if(!n&&r&&r.hasOwnProperty&&r.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")){t.toString=r.toString}return t};var N=function e(t){var r=[];for(var n in t){var i=t[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var a=[];var s;for(var u=0,l=i.length;u<l;u++){s=i[u];a.push(encodeURIComponent(s===null||s===undefined?"":s))}o=a.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+"="+o)}}return r.join("&")};var R=function e(t){var r=[];for(var n in t){var i=t[n];if(i!=null&&typeof i!=="function"){var o;if((typeof i==="undefined"?"undefined":(0,m.default)(i))==="object"&&i.constructor===Array){var a=[];var s;for(var u=0,l=i.length;u<l;u++){s=i[u];a.push(encodeURIComponent(s===null||s===undefined?"":s))}o=a.join(",")}else{o=encodeURIComponent(i)}r.push(encodeURIComponent(n)+":"+o)}}return r.join(";")};var k=function e(t,r){var n=t;if(r){var i=(t+" ").split(/[?&]/);n+=i.pop()===" "?r:i.length?"&"+r:"?"+r}return n};var D=function e(t){t=t===null||t===undefined?window.location.href:t;var r="";if(t.indexOf("?")>-1){var n=t.indexOf("?")+1;t.indexOf("#")>-1;var i=t.indexOf("#")>-1?t.indexOf("#"):t.length;r=t.substring(n,i)}var o={};var a=r.split(/[&;]/);for(var s=0,u=a.length;s<u;++s){var l=a[s].split("=");if(l[0]){var f=l[0];try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}c=c.split(",");if(c.length==1){c=c[0]}o[f]=c}}return o};var F=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("webkit")===-1&&e.indexOf("gecko")!==-1}();var B=function(){var e="",t="",r="pc",n;var i=navigator.userAgent.toLowerCase();if(i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1){e="msie";n=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)}else if(i.indexOf("chrome")>-1){e="chrome";n=i.match(/chrome\/([\d.]+)/)}else if(i.indexOf("firefox")>-1){e="firefox";n=i.match(/firefox\/([\d.]+)/)}else if(i.indexOf("opera")>-1){e="opera";n=i.match(/version\/([\d.]+)/)}else if(i.indexOf("safari")>-1){e="safari";n=i.match(/version\/([\d.]+)/)}t=n?n[1]:"";if(i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1){r="apple"}else if(i.indexOf("android")>-1){n=i.match(/version\/([\d.]+)/);t=n?n[1]:"";r="android"}return{name:e,version:t,device:r}}();var j=function e(){return B};var U=function(){var e=true,t=j();if(document.createElement("canvas").getContext){if(t.name==="firefox"&&parseFloat(t.version)<5){e=false}if(t.name==="safari"&&parseFloat(t.version)<4){e=false}if(t.name==="opera"&&parseFloat(t.version)<10){e=false}if(t.name==="msie"&&parseFloat(t.version)<9){e=false}}else{e=false}return e}();var G=function e(){return U};var V=function e(t){if(!t){return true}var r=t.indexOf("//");var n=document.location.toString();var i=n.indexOf("//");if(r===-1){return true}else{var o;var a=o=t.substring(0,r);var s=n.substring(i+2);i=s.indexOf("/");var u=s.indexOf(":");var l=s.substring(0,i);var f=document.location.protocol;if(u!==-1){}else{l+=":"+(f.toLowerCase()==="http:"?80:443)}if(f.toLowerCase()!==a.toLowerCase()){return false}a=t.substring(r+2);var c=a.indexOf(":");r=a.indexOf("/");var h=a.substring(0,r);var p;if(c!==-1){p=a.substring(0,c)}else{p=a.substring(0,r);h+=":"+(o.toLowerCase()==="http:"?80:443)}var d=document.domain;if(p===d&&h===l){return true}}return false};var q=function e(t){var r=t;if(r==null){return null}switch(r.constructor){case String:r='"'+r.replace(/(["\\])/g,"\\$1")+'"';r=r.replace(/\n/g,"\\n");r=r.replace(/\r/g,"\\r");r=r.replace("<","&lt;");r=r.replace(">","&gt;");r=r.replace(/%/g,"%25");r=r.replace(/&/g,"%26");return r;case Array:var n=[];for(var i=0,o=r.length;i<o;i++){n.push(e(r[i]))}return"["+n.join(",")+"]";case Number:return isFinite(r)?String(r):null;case Boolean:return String(r);case Date:var a="{"+"'__type':\"System.DateTime\","+"'Year':"+r.getFullYear()+","+"'Month':"+(r.getMonth()+1)+","+"'Day':"+r.getDate()+","+"'Hour':"+r.getHours()+","+"'Minute':"+r.getMinutes()+","+"'Second':"+r.getSeconds()+","+"'Millisecond':"+r.getMilliseconds()+","+"'TimezoneOffset':"+r.getTimezoneOffset()+"}";return a;default:if((typeof r==="undefined"?"undefined":(0,m.default)(r))==="object"){if(r.length){var n=[];for(var i=0,o=r.length;i<o;i++){n.push(e(r[i]))}return"["+n.join(",")+"]"}var s=[];for(var u in r){if(typeof r[u]!=="function"&&u!=="CLASS_NAME"){s.push("'"+u+"':"+e(r[u]))}}if(s.length>0){return"{"+s.join(",")+"}"}else{return"{}"}}return r.toString()}};var z=function e(t){if(t.responseText&&typeof t.responseText==="string"){t=JSON.parse(t.responseText)}return t};var H=function e(t,r){t=t||{};if(r){for(var n in r){var i=r[n];if(i!==undefined&&n!=="CLASS_NAME"&&typeof i!=="function"){t[n]=i}}}return t};var W=function e(t,r,n){t=t||{};if(r){for(var i in r){var o=false;if(n&&n.length){for(var a=0,s=n.length;a<s;a++){if(i===n[a]){o=true;break}}}if(o===true){continue}var u=r[i];if(u!==undefined&&i!=="CLASS_NAME"&&typeof u!=="function"){t[i]=u}}}return t};var Z=function e(t){if(null===t||"object"!==(typeof t==="undefined"?"undefined":(0,m.default)(t))){return t}if(t instanceof Date){var r=new Date;r.setTime(t.getTime());return r}if(t instanceof Array){var r=t.slice(0);return r}if(t instanceof Object){var r={};for(var n in t){if(t.hasOwnProperty(n)){r[n]=e(t[n])}}return r}throw new Error("Unable to copy obj! Its type isn't supported.")};var X=function e(){var t="";for(var r=1;r<=32;r++){var n=Math.floor(Math.random()*16).toString(16);t+=n;if(r==8||r==12||r==16||r==20)t+="-"}return t};var Y=function e(t,r){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var e=n.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(r,e)}};var Q=function e(t,r){return function(e){return t.call(r,e||window.event)}};var J=function e(t){var r=t.value;switch(r){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}};var K=function e(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(e){return $(e)})};var $=function e(t){var r=escape(t);var n=r.split("%");var i="";if(n[0]!=""){i=n[0]}for(var o=1;o<n.length;o++){if(n[o].substring(0,1)=="u"){i+=te(ee(n[o].substring(1,5)))}else i+="%"+n[o]}return i};var ee=function e(t){var r="";var n;var i="0123456789ABCDEF";var o="";for(var a=0;a<t.length;a++){r=t.charAt(a);n=i.indexOf(r);o+=ne(n)}return o};var te=function e(t){var r="";var n="";var i="";if(t.length==16){n="1110"+t.substring(0,4);n+="10"+t.substring(4,10);n+="10"+t.substring(10,16);var o="0123456789ABCDEF";for(var a=0;a<3;a++){r+="%";i=n.substring(a*8,(a+1)*8);r+=o.charAt(re(i.substring(0,4)));r+=o.charAt(re(i.substring(4,8)))}return r}return""};var re=function e(t){var r=0;if(t.length==4){for(var n=0;n<4;n++){r+=t.charAt(n)*Math.pow(2,3-n)}return r}return-1};var ne=function e(t){var r="";var n=0;for(var i=0;i<4;i++){n=Math.pow(2,3-i);if(t>=n){r+="1";t=t-n}else r+="0"}return r};var ie=function e(t,r){if(Object.prototype.toString.call(t)==="[object Object]"&&Object.prototype.toString.call(r)==="[object Object]"){for(var n in r){if(!t[n]){t[n]=r[n]}else{t[n]=e(t[n],r[n])}}}else if(Object.prototype.toString.call(t)==="[object Array]"&&Object.prototype.toString.call(r)==="[object Array]"){t=t.concat(r)}else{t=r}return t};var oe=function e(t,r,n,i){var o={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};if(r.hasOwnProperty(n)){if((0,m.default)(t[n])=="object"&&!o[Object.prototype.toString.call(t[n])]){ae(t[n],r[n],i)}else if(i||!(n in t)){t[n]=r[n]}}};var ae=function e(t,r,n){for(var i in r){oe(t,r,i,n)}return t};var se=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=function e(t){(0,y.default)(this,e);for(var n=0;n<r.length;n++){a(this,new r[n](t))}};for(var o=0;o<r.length;o++){var e=r[o];a(i,e);a(i.prototype,e.prototype);a(i.prototype,new e)}return i;function a(e,t){var r=(0,d.default)(t);if(h.default){r=r.concat((0,h.default)(t))}for(var n=0;n<r.length;n++){var i=r[n];if(i!=="constructor"&&i!=="prototype"&&i!=="name"&&i!=="length"){var o=(0,f.default)(t,i);if(window["ActiveXObject"]){(0,u.default)(e,i,o||{})}else{(0,u.default)(e,i,o)}}}}};var ue=function e(t,r){var n=document.createElement("CANVAS");if(t){n.width=t}if(r){n.height=r}return n.getContext("2d")};var le=function e(t,r,n,o){(0,a.default)(t).forEach(function(e){var a=t[e],s=e;if(pe(a)&&typeof a!=="function"){if(n&&n.indexOf(e)>-1){var u={};if(e==="geometry"){if(a.type==="polygon"){u["rings"]=t[e]["rings"]}if(a.type==="multipoint"){u["points"]=t[e]["points"]}if(a.type==="point"){if(t[e]["x"]&&t[e]["y"]){u["y"]=t[e]["y"];u["x"]=t[e]["x"]}}if(a.type==="polyline"){u["paths"]=t[e]["paths"]}u["spatialReference"]=t[e]["spatialReference"];a=u;r+="&geometryType=esriGeometry"+t[e]["type"].charAt(0).toUpperCase()+t[e]["type"].slice(1)}a=(0,i.default)(a)}if(o&&o.hasOwnProperty(e)){s=o[e]}r+="&"+s+"="+a}});return r};var fe=function e(t,r,n){(0,a.default)(r).forEach(function(e){if(n&&n.indexOf(e)>-1){var o=e;o=e.substring(0,o.length-"Features".length)+"s";t+=o+"="+encodeURIComponent(r[e]instanceof Object?(0,i.default)(r[e]):r[e])+"&"}else{t+=e+"="+r[e]+"&"}});return t};var ce=function e(t,r,n){return new t({longitude:n[0],latitude:n[1],z:n[2],spatialReference:Z(r.spatialReference)})};var he=function e(t){for(var r=0;r<t.length;r++){if(t[r]instanceof Array){e(t[r])}else{if(t[r]instanceof Object){t[r]=t[r].toArray()}}}return t};var pe=function e(t){return t!==""&&t!==null&&t!==undefined};t.extend=S;t.isArray=x;t.extendDeep=C;t.copy=w;t.copyExcluce=P;t.reset=I;t.getElement=E;t.isElement=L;t.removeItem=T;t.indexOf=M;t.modifyDOMElement=O;t.applyDefaults=A;t.getParameterString=N;t.getWFParameterString=R;t.urlAppend=k;t.getParameters=D;t.IS_GECKO=F;t.Browser=B;t.getBrowser=j;t.isSupportCanvas=U;t.supportCanvas=G;t.isInTheSameDomain=V;t.toJSON=q;t.transformResult=z;t.copyAttributes=H;t.copyAttributesWithClip=W;t.cloneObject=Z;t.newGuid=X;t.bind=Y;t.bindAsEventListener=Q;t.getTopAnalysisResult=J;t.ChineseToUtf8=K;t.DeepMerge=ie;t.merge=ae;t.mixin=se;t.createCanvasContext2D=ue;t.formatQuery=le;t.formatEdits=fe;t.returnPoint=ce;t.formatPoints=he;t.notNULL=pe;_.Zondy.Util.extend=S;_.Zondy.Util.isArray=x;_.Zondy.Util.extendDeep=C;_.Zondy.Util.copy=w;_.Zondy.Util.copyExcluce=P;_.Zondy.Util.reset=I;_.Zondy.Util.getElement=E;_.Zondy.Util.isElement=L;_.Zondy.Util.removeItem=T;_.Zondy.Util.indexOf=M;_.Zondy.Util.modifyDOMElement=O;_.Zondy.Util.applyDefaults=A;_.Zondy.Util.getParameterString=N;_.Zondy.Util.getWFParameterString=R;_.Zondy.Util.urlAppend=k;_.Zondy.Util.getParameters=D;_.Zondy.IS_GECKO=F;_.Zondy.Browser=B;_.Zondy.Util.getBrowser=j;_.Zondy.Util.isSupportCanvas=U;_.Zondy.Util.supportCanvas=G;_.Zondy.Util.isInTheSameDomain=V;_.Zondy.Util.toJSON=q;_.Zondy.Util.transformResult=z;_.Zondy.Util.copyAttributes=H;_.Zondy.Util.copyAttributesWithClip=W;_.Zondy.Util.cloneObject=Z;_.Zondy.Util.newGuid=X;_.Zondy.Util.bind=Y;_.Zondy.Util.bindAsEventListener=Q;_.Zondy.Util.getTopAnalysisResult=J;_.Zondy.Util.ChineseToUtf8=K;_.Zondy.Util.DeepMerge=ie;_.Zondy.Util.merge=ae;_.Zondy.Util.mixin=se;_.Zondy.Util.createCanvasContext2D=ue;_.Zondy.Util.formatQuery=le;_.Zondy.Util.formatEdits=fe;_.Zondy.Util.returnPoint=ce;_.Zondy.Util.returnPoint=he;_.Zondy.Util.returnPoint=pe},function(e,t,r){"use strict";t.__esModule=true;var n=r(2);var i=s(n);var o=r(86);var a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,r,n){if(t===null)t=Function.prototype;var o=(0,a.default)(t,r);if(o===undefined){var s=(0,i.default)(t);if(s===null){return undefined}else{return e(s,r,n)}}else if("value"in o){return o.value}else{var u=o.get;if(u===undefined){return undefined}return u.call(n)}}},function(e,t,r){e.exports={default:r(237),__esModule:true}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IgsServiceBase=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(6);var y=r(164);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r){(0,a.default)(this,t);r=r||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.CLASS_NAME="Zondy.IgsServiceBase";return n}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this);var r=this;if(r.events){r.events.un(r.eventListeners);r.events.listeners=null;r.events.destroy();r.events=null;r.eventListeners=null}}},{key:"processAsync",value:function e(t){var r=this;r.request({method:t&&t.method?t.method:"GET",scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function e(t){var r=this;t=(0,v.transformResult)(t);if(t.succeed){r.events&&r.events.triggerEvent("processCompleted",{result:t})}else{r.events&&r.events.triggerEvent("processFailed",{result:t})}}}]);return t}(y.CommonServiceBase);t.IgsServiceBase=m;Zondy.Service.IgsServiceBase=m},function(e,t){var r=e.exports={version:"2.6.12"};if(typeof __e=="number")__e=r},function(e,t){e.exports=mapboxgl},function(e,t){var r=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ShapeFactory=undefined;var n=r(1);var i=P(n);var o=r(5);var a=P(o);var s=r(0);var u=r(73);var l=r(130);var f=r(74);var c=r(221);var h=r(75);var p=r(222);var d=r(223);var v=r(131);var y=r(132);var g=r(224);var m=r(225);var _=r(133);var b=r(129);var S=r(76);var x=r(226);var C=r(227);var w=r(6);function P(e){return e&&e.__esModule?e:{default:e}}var I=function(){function e(t){(0,i.default)(this,e);this.shapeParameters=t;this.CLASS_NAME="Zondy.Feature.ShapeFactory"}(0,a.default)(e,[{key:"destroy",value:function e(){this.shapeParameters=null}},{key:"createShape",value:function t(r){if(r){this.shapeParameters=r}if(!this.shapeParameters){return null}var n=this.shapeParameters;if(n instanceof u.Point){var i=new Object;i["x"]=n.x;i["y"]=n.y;i["r"]=n.r;i=(0,w.copyAttributesWithClip)(i,n.style,["x","y"]);var o=new y.SmicPoint;o.style=e.transformStyle(i);o.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(o,n,["x","y","style","highlightStyle"]);return o}else if(n instanceof l.Line){if(!n.pointList){return null}var a=new Object;a["pointList"]=n.pointList;a=(0,w.copyAttributesWithClip)(a,n.style,["pointList"]);var s=new _.SmicBrokenLine;s.style=e.transformStyle(a);s.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(s,n,["pointList","style","highlightStyle"]);return s}else if(n instanceof f.Polygon){if(!n.pointList){return null}var P=new Object;P["pointList"]=n.pointList;P=(0,w.copyAttributesWithClip)(P,n.style,["pointList"]);var I=new S.SmicPolygon;I.style=e.transformStyle(P);I.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(I,n,["pointList","style","highlightStyle"]);return I}else if(n instanceof c.Rectangle){if(!n.x&&!n.y&!n.width&!n.height){return null}var E=new Object;E["x"]=n.x;E["y"]=n.y;E["width"]=n.width;E["height"]=n.height;E=(0,w.copyAttributesWithClip)(E,n.style,["x","y","width","height"]);var L=new x.SmicRectangle;L.style=e.transformStyle(E);L.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(L,n,["x","y","width","height","style","highlightStyle"]);return L}else if(n instanceof h.Sector){var T=new Object;T["x"]=n.x;T["y"]=n.y;T["r"]=n.r;T["startAngle"]=n.startAngle;T["endAngle"]=n.endAngle;if(n["r0"]){T["r0"]=n.r0}if(n["clockWise"]){T["clockWise"]=n.clockWise}T=(0,w.copyAttributesWithClip)(T,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var M=new C.SmicSector;M.style=e.transformStyle(T);M.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(M,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]);return M}else if(n instanceof p.Label){var O=new Object;O["x"]=n.x;O["y"]=n.y;O["text"]=n.text;O=(0,w.copyAttributesWithClip)(O,n.style,["x","y","text"]);var A=new g.SmicText;A.style=e.transformStyle(O);A.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(A,n,["x","y","text","style","highlightStyle"]);return A}else if(n instanceof d.Image){var N=new Object;N["x"]=n.x;N["y"]=n.y;if(n["image"]){N["image"]=n.image}if(n["width"]){N["width"]=n.width}if(n["height"]){N["height"]=n.height}if(n["sx"]){N["sx"]=n.sx}if(n["sy"]){N["sy"]=n.sy}if(n["sWidth"]){N["sWidth"]=n.sWidth}if(n["sHeight"]){N["sHeight"]=n.sHeight}N=(0,w.copyAttributesWithClip)(N,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var R=new b.SmicImage;R.style=e.transformStyle(N);R.highlightStyle=e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(R,n,["x","y","image","width","height","style","highlightStyle"]);return R}else if(n instanceof v.Circle){var k=new Object;k["x"]=n.x;k["r"]=n.r;k["y"]=n.y;k=(0,w.copyAttributesWithClip)(k,n.style,["x","y","r"]);var D=new m.SmicCircle;D.style=new e.transformStyle(k);D.highlightStyle=new e.transformStyle(n.highlightStyle);(0,w.copyAttributesWithClip)(D,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]);return D}return null}}],[{key:"transformStyle",value:function e(t){var r={};var n=["normal","normal","normal","12","arial,sans-serif"];var i=[true,false];for(var o in t){switch(o){case"fill":i[0]=t[o];break;case"fillColor":r["color"]=t[o];break;case"stroke":i[1]=t[o];break;case"strokeWidth":r["lineWidth"]=t[o];break;case"strokeLinecap":r["lineCap"]=t[o];break;case"strokeLineJoin":r["lineJoin"]=t[o];break;case"strokeDashstyle":r["lineType"]=t[o];break;case"pointRadius":r["r"]=t[o];break;case"label":r["text"]=t[o];break;case"labelRect":r["labelRect"]=t[o];break;case"fontColor":r["textColor"]=t[o];break;case"fontStyle":n[0]=t[o];break;case"fontVariant":n[1]=t[o];break;case"fontWeight":n[2]=t[o];break;case"fontSize":var a="";if(t[o]&&t[o].toString().indexOf("px")<0){a="px"}n[3]=t[o]+a;break;case"fontFamily":n[4]=t[o];break;case"fontOpacity":r["opacity"]=t[o];break;case"labelPosition":r["textPosition"]=t[o];break;case"labelAlign":r["textAlign"]=t[o];break;case"labelBaseline":r["textBaseline"]=t[o];break;case"labelRotation":r["textRotation"]=t[o];break;default:r[o]=t[o];break}}r["textFont"]=n.join(" ");if(i[0]===true&&i[1]===false){r["brushType"]="fill"}else if(i[0]===false&&i[1]===true){r["brushType"]="stroke"}else if(i[0]===true&&i[1]===true){r["brushType"]="both"}else{r["brushType"]="fill"}if(r["lineWidth"]==null){r["lineWidth"]=1}return r}},{key:"Background",value:function e(t,r,n){var i=n?n:{};var o=new c.Rectangle(r[0],r[3],Math.abs(r[2]-r[0]),Math.abs(r[3]-r[1]));o.style={fillColor:"#f3f3f3"};if(i.backgroundStyle){(0,w.copyAttributesWithClip)(o.style,i.backgroundStyle)}if(i.backgroundRadius){o.style["radius"]=i.backgroundRadius}o.clickable=false;o.hoverable=false;return t.createShape(o)}},{key:"GraphAxis",value:function e(t,r,n,i){var o=r;var a=n?n:{};var s=[];var u=[];var c=a.useXReferenceLine?a.useXReferenceLine:false;var h=a.axisYTick&&!isNaN(a.axisYTick)?a.axisYTick:0;var d=[];var v=[];var y=[];if(h===0){y.push([o[0],o[3]-5]);y.push([o[0],o[1]]);if(a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var g=parseInt(a.axis3DParameter);var m=[o[0]-g,o[1]+g];if(a.axisUseArrow){v.push([m[0]+1.5,m[1]-7.5]);v.push([m[0]-1,m[1]+1]);v.push([m[0]+7.5,m[1]-1.5]);y.push([m[0],m[1]])}else{y.push([m[0],m[1]])}y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}else{var _=Math.abs(o[1]-o[3])/h;var b=o[3];y.push([o[0],b-5]);for(var S=0;S<h;S++){y.push([o[0],b]);y.push([o[0]-5,b]);y.push([o[0],b]);if(c){var x=new l.Line([[o[0],b],[o[2],b]]);x.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1};x.clickable=false;x.hoverable=false;if(a.xReferenceLineStyle){(0,w.copyAttributesWithClip)(x.style,a.xReferenceLineStyle)}s.push(t.createShape(x))}b+=_}y.push([o[0],o[1]]);if(a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var C=parseInt(a.axis3DParameter);var P=[o[0]-C,o[1]+C];if(a.axisUseArrow){v.push([P[0]+1.5,P[1]-7.5]);v.push([P[0]-1,P[1]+1]);v.push([P[0]+7.5,P[1]-1.5]);y.push([P[0],P[1]])}else{y.push([P[0],P[1]])}y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}if(a.axisUseArrow){var I=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]];var E=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]];var L=new f.Polygon(I);L.style={fillColor:"#008acd"};(0,w.copyAttributesWithClip)(L.style,a.axisStyle);u.push(t.createShape(L));var T=new f.Polygon(E);T.style={fillColor:"#008acd"};(0,w.copyAttributesWithClip)(T.style,a.axisStyle);u.push(t.createShape(T));if(a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var M=new f.Polygon(v);M.style={fillColor:"#008acd"};(0,w.copyAttributesWithClip)(M.style,a.axisStyle);u.push(t.createShape(M))}}d=y;var O=new l.Line(d);O.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1};if(a.axisStyle){(0,w.copyAttributesWithClip)(O.style,a.axisStyle)}O.clickable=false;O.hoverable=false;var A=[t.createShape(O)];var N=[];if(a.axisYLabels&&a.axisYLabels.length&&a.axisYLabels.length>0){var R=a.axisYLabels;var k=R.length;var D=[0,0];if(a.axisYLabelsOffset&&a.axisYLabelsOffset.length){D=a.axisYLabelsOffset}if(k===1){var F=new p.Label(o[0]-5+D[0],o[3]+D[1],R[0]);F.style={labelAlign:"right"};if(a.axisYLabelsStyle){(0,w.copyAttributesWithClip)(F.style,a.axisYLabelsStyle)}F.clickable=false;F.hoverable=false;N.push(t.createShape(F))}else{var B=o[3];var j=Math.abs(o[1]-o[3])/(k-1);for(var U=0;U<k;U++){var G=new p.Label(o[0]-5+D[0],B+D[1],R[U]);G.style={labelAlign:"right"};if(a.axisYLabelsStyle){(0,w.copyAttributesWithClip)(G.style,a.axisYLabelsStyle)}G.clickable=false;G.hoverable=false;N.push(t.createShape(G));B+=j}}}var V=[];if(a.axisXLabels&&a.axisXLabels.length&&a.axisXLabels.length>0){var q=a.axisXLabels;var z=q.length;var H=[0,0];if(a.axisXLabelsOffset&&a.axisXLabelsOffset.length){H=a.axisXLabelsOffset}if(i&&i.xPositions&&i.xPositions.length&&i.xPositions.length===z){var W=i.xPositions;for(var Z=0;Z<z;Z++){var X=new p.Label(W[Z]+H[0],o[1]+H[1],q[Z]);X.style={labelAlign:"center",labelBaseline:"top"};if(a.axisXLabelsStyle){(0,w.copyAttributesWithClip)(X.style,a.axisXLabelsStyle)}X.clickable=false;X.hoverable=false;V.push(t.createShape(X))}}else{if(z===1){var Y=new p.Label(o[0]-5+H[0],o[1]+H[0],q[0]);Y.style={labelAlign:"center",labelBaseline:"top"};if(a.axisXLabelsStyle){(0,w.copyAttributesWithClip)(Y.style,a.axisXLabelsStyle)}Y.clickable=false;Y.hoverable=false;V.push(t.createShape(Y))}else{var Q=o[0];var J=Math.abs(o[2]-o[0])/(z-1);for(var K=0;K<z;K++){var $=new p.Label(Q+H[0],o[1]+H[1],q[K]);$.style={labelAlign:"center",labelBaseline:"top"};if(a.axisXLabelsStyle){(0,w.copyAttributesWithClip)($.style,a.axisXLabelsStyle)}$.clickable=false;$.hoverable=false;V.push(t.createShape($));Q+=J}}}}return s.concat(A).concat(N).concat(V).concat(u)}},{key:"ShapeStyleTool",value:function e(t,r,n,i,o,a){var s=t?t:{};if(r){(0,w.copyAttributesWithClip)(s,r)}if(n&&n.length&&typeof o!=="undefined"&&!isNaN(o)&&o>=0){if(n[o]){(0,w.copyAttributesWithClip)(s,n[o])}}if(i&&i.length&&typeof a!=="undefined"){var u=i;var l=u.length;var f=parseFloat(a);for(var c=0;c<l;c++){if(u[c].start<=f&&f<u[c].end){(0,w.copyAttributesWithClip)(s,u[c].style);break}}}return s}}]);return e}();t.ShapeFactory=I;s.Zondy.Feature.ShapeFactory=I},function(e,t,r){var n=r(82)("wks");var i=r(54);var o=r(12).Symbol;var a=typeof o=="function";var s=e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LayerStatusType=t.MapType=t.CItemType=t.CLinStyleMakeType=t.CLinJointType=t.CLinHeadType=t.CLinAdjustType=t.NetElemType=t.NetAnalyType=t.ISShowArc=t.EightDirType=t.LineConstrain=t.LabelSpreadType=t.RepeatType=t.LabelPntType=t.LabelRegType=t.LabelLinType=t.FontShape=t.FeatureType=t.VectClsType=t.XClsType=undefined;var n=r(274);var i=s(n);var o;var a=r(0);function s(e){return e&&e.__esModule?e:{default:e}}var u={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};t.XClsType=u;a.Zondy.Enum.XClsType=u;var l={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};t.VectClsType=l;a.Zondy.Enum.VectClsType=l;var f={Unknown:0,Pnt:1,Lin:2,Reg:3};t.FeatureType=f;a.Zondy.Enum.FeatureType=f;var c={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};t.FontShape=c;a.Zondy.Enum.FontShape=c;var h={Curved:0,Forward:1,Horizontal:2,Tangent:3};t.LabelLinType=h;a.Zondy.Enum.LabelLinType=h;var p={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};t.LabelRegType=p;a.Zondy.Enum.LabelRegType=p;var d={PntAnyDir:0,PntEightDir:1,PntOnFea:2};t.LabelPntType=d;a.Zondy.Enum.LabelPntType=d;var v={Auto:0,NoRep:1,OnStep:2};t.RepeatType=v;a.Zondy.Enum.RepeatType=v;var y={AutoSpread:0,Centralization:1,Decentralization:2};t.LabelSpreadType=y;a.Zondy.Enum.LabelSpreadType=y;var g={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};t.LineConstrain=g;a.Zondy.Enum.LineConstrain=g;var m={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};t.EightDirType=m;a.Zondy.Enum.EightDirType=m;var _={Reg:0,Arc:1,All:2};t.ISShowArc=_;a.Zondy.Enum.ISShowArc=_;var b=(o={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,i.default)(o,"SysModeMinDis","SysModeMinDis"),(0,i.default)(o,"SysModeSysRecommend","SysModeSysRecommend"),o);t.NetAnalyType=b;a.Zondy.Enum.Net.NetAnalyType=b;var S={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};t.NetElemType=S;a.Zondy.Enum.Net.NetElemType=S;var x={Adjust:0,NoAdjust:1};t.CLinAdjustType=x;a.Zondy.Enum.Theme.CLinAdjustType=x;var C={Round:0,Square:1,Butt:2};t.CLinHeadType=C;a.Zondy.Enum.Theme.CLinHeadType=C;var w={Round:0,Square:1,Butt:2};t.CLinJointType=w;a.Zondy.Enum.Theme.CLinJointType=w;var P={Byrule:0,Bypoint:1};t.CLinStyleMakeType=P;a.Zondy.Enum.Theme.CLinStyleMakeType=P;var I={Unknown:0,UniqueTheme:1,RangeTheme:2};t.CItemType=I;a.Zondy.Enum.Theme.CItemType=I;var E={Doc:"mapType",Tile:"tileType"};t.MapType=E;a.Zondy.Enum.Map.MapType=E;var L={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};t.LayerStatusType=L;a.Zondy.Enum.Map.LayerStatusType=L},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Shape=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(7);var h=b(c);var p=r(4);var d=b(p);var v=r(0);var y=r(6);var g=r(51);var m=r(70);var _=r(20);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));e=e||{};r.id=null;r.style={};r.highlightStyle=null;r.parent=null;r.__dirty=true;r.__clipShapes=[];r.invisible=false;r.ignore=false;r.zlevel=0;r.draggable=false;r.clickable=false;r.hoverable=true;r.z=0;r.refOriginalPosition=[0,0];r.refDataID=null;r.isHoverByRefDataID=false;r.refDataHoverGroup=null;r.dataInfo=null;(0,y.extend)(r,e);r.id=r.id||(0,y.newGuid)();r.CLASS_NAME="Zondy.LevelRenderer.Shape";r.getTansform=function(){var e=[];return function(t,r){var n=[t,r];if(this.needTransform&&this.transform){_.SUtil.Util_matrix.invert(e,this.transform);_.SUtil.Util_matrix.mulVector(n,e,[t,r,1]);if(t===n[0]&&r===n[1]){this.updateNeedTransform()}}return n}}();return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.id=null;this.style=null;this.highlightStyle=null;this.parent=null;this.__dirty=null;this.__clipShapes=null;this.invisible=null;this.ignore=null;this.zlevel=null;this.draggable=null;this.clickable=null;this.hoverable=null;this.z=null;this.refOriginalPosition=null;this.refDataID=null;this.refDataHoverGroup=null;this.isHoverByRefDataID=null;this.dataInfo=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function e(t,r){var n=this.beforeBrush(t,r);t.beginPath();this.buildPath(t,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n);t.fill();if(n.lineWidth>0){this.setCtxGlobalAlpha(t,"stroke",n);t.stroke()}this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n);n.lineWidth>0&&t.stroke();this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n);t.fill();this.setCtxGlobalAlpha(t,"reset",n);break}this.drawText(t,n,this.style);this.afterBrush(t)}},{key:"beforeBrush",value:function e(t,r){var n=this.style;if(this.brushTypeOnly){n.brushType=this.brushTypeOnly}if(r){n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)}if(this.brushTypeOnly==="stroke"){n.strokeColor=n.strokeColor||n.color}t.save();this.doClip(t);this.setContext(t,n);this.setTransform(t);return n}},{key:"afterBrush",value:function e(t){t.restore()}},{key:"setContext",value:function e(t,r){var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];for(var i=0,o=n.length;i<o;i++){var a=n[i][0];var s=r[a];var u=n[i][1];if(typeof s!="undefined"){t[u]=s}}}},{key:"doClip",value:function e(t){var r=_.SUtil.Util_matrix.create();if(this.__clipShapes){for(var n=0;n<this.__clipShapes.length;n++){var i=this.__clipShapes[n];if(i.needTransform){var o=i.transform;_.SUtil.Util_matrix.invert(r,o);t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}t.beginPath();i.buildPath(t,i.style);t.clip();if(i.needTransform){var a=r;t.transform(a[0],a[1],a[2],a[3],a[4],a[5])}}}}},{key:"getHighlightStyle",value:function e(t,r,n){var i={};for(var o in t){i[o]=t[o]}var a=_.SUtil.Util_color.getHighlightColor();if(t.brushType!=="stroke"){i.strokeColor=a;i.lineWidth=t.lineWidth||1;i.brushType="both"}else{if(n!=="stroke"){i.strokeColor=a;i.lineWidth=t.lineWidth||1}else{i.strokeColor=r.strokeColor||_.SUtil.Util_color.mix(t.strokeColor,_.SUtil.Util_color.toRGB(a))}}for(var s in r){if(typeof r[s]!="undefined"){i[s]=r[s]}}return i}},{key:"getHighlightZoom",value:function e(){return this.type!=="text"?6:2}},{key:"drift",value:function e(t,r){this.position[0]+=t;this.position[1]+=r}},{key:"buildPath",value:function e(t,r){}},{key:"getRect",value:function e(t){}},{key:"isCover",value:function e(t,r){var n=this.getTansform(t,r);t=n[0];r=n[1];var i=this.style.__rect;if(!i){i=this.style.__rect=this.getRect(this.style)}if(t>=i.x&&t<=i.x+i.width&&r>=i.y&&r<=i.y+i.height){return _.SUtil.Util_area.isInside(this,this.style,t,r)}return false}},{key:"drawText",value:function e(r,n,i){if(typeof n.text=="undefined"||n.text===false){return}var o=n.textColor||n.color||n.strokeColor;r.fillStyle=o;var a=10;var s;var u;var l;var f;var c=n.textPosition||this.textPosition||"top";var h=[];if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){h=[0,0]}else{h=this.refOriginalPosition}switch(c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(i||n).__rect||this.getRect(i||n);switch(c){case"inside":l=p.x+p.width/2;f=p.y+p.height/2;s="center";u="middle";if(n.brushType!=="stroke"&&o===n.color){r.fillStyle="#fff"}break;case"left":l=p.x-a;f=p.y+p.height/2;s="end";u="middle";break;case"right":l=p.x+p.width+a;f=p.y+p.height/2;s="start";u="middle";break;case"top":l=p.x+p.width/2;f=p.y-a;s="center";u="bottom";break;case"bottom":l=p.x+p.width/2;f=p.y+p.height+a;s="center";u="top";break}}break;case"start":case"end":var d=0;var v=0;var y=0;var g=0;if(typeof n.pointList!="undefined"){var m=n.pointList;if(m.length<2){return}var _=m.length;switch(c){case"start":d=m[0][0]+h[0];v=m[1][0]+h[0];y=m[0][1]+h[1];g=m[1][1]+h[1];break;case"end":d=m[_-2][0]+h[0];v=m[_-1][0]+h[0];y=m[_-2][1]+h[1];g=m[_-1][1]+h[1];break}}else{d=n.xStart+h[0]||0;v=n.xEnd+h[0]||0;y=n.yStart+h[1]||0;g=n.yEnd+h[1]||0}switch(c){case"start":s=d<v?"end":"start";u=y<g?"bottom":"top";l=d;f=y;break;case"end":s=d<v?"start":"end";u=y<g?"top":"bottom";l=v;f=g;break}a-=4;if(d&&v&&d!==v){l-=s==="end"?a:-a}else{s="center"}if(y!==g){f-=u==="bottom"?a:-a}else{u="middle"}break;case"specific":l=n.textX||0;f=n.textY||0;s="start";u="middle";break}if(n.labelXOffset&&!isNaN(n.labelXOffset)){l+=n.labelXOffset}if(n.labelYOffset&&!isNaN(n.labelYOffset)){f+=n.labelYOffset}if(l!=null&&f!=null){t._fillText(r,n.text,l,f,n.textFont,n.textAlign||s,n.textBaseline||u)}}},{key:"modSelf",value:function e(){this.__dirty=true;if(this.style){this.style.__rect=null}if(this.highlightStyle){this.highlightStyle.__rect=null}}},{key:"isSilent",value:function e(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function e(t,r,n){if(r==="fill"){t.globalAlpha=typeof n["fillOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["fillOpacity"]}else if(r==="stroke"){t.globalAlpha=typeof n["strokeOpacity"]==="undefined"?typeof n["opacity"]==="undefined"?1:n["opacity"]:n["strokeOpacity"]}else{t.globalAlpha=typeof n["opacity"]==="undefined"?1:n["opacity"]}}}],[{key:"_fillText",value:function e(r,n,i,o,a,s,u){if(a){r.font=a}r.textAlign=s;r.textBaseline=u;var l=t._getTextRect(n,i,o,a,s,u);n=(n+"").split("\n");var f=_.SUtil.Util_area.getTextHeight("ZH",a);switch(u){case"top":o=l.y;break;case"bottom":o=l.y+f;break;default:o=l.y+f/2}for(var c=0,h=n.length;c<h;c++){r.fillText(n[c],i,o);o+=f}}},{key:"_getTextRect",value:function e(t,r,n,i,o,a){var s=_.SUtil.Util_area.getTextWidth(t,i);var u=_.SUtil.Util_area.getTextHeight("ZH",i);t=(t+"").split("\n");switch(o){case"end":case"right":r-=s;break;case"center":r-=s/2;break}switch(a){case"top":break;case"bottom":n-=u*t.length;break;default:n-=u*t.length/2}return{x:r,y:n,width:s,height:u*t.length}}}]);return t}((0,y.mixin)(g.Eventful,m.Transformable));t.Shape=S;v.Zondy.LevelRenderer.Shape=S},function(e,t,r){var n=r(12);var i=r(10);var o=r(48);var a=r(35);var s=r(33);var u="prototype";var l=function(e,t,r){var f=e&l.F;var c=e&l.G;var h=e&l.S;var p=e&l.P;var d=e&l.B;var v=e&l.W;var y=c?i:i[t]||(i[t]={});var g=y[u];var m=c?n:h?n[t]:(n[t]||{})[u];var _,b,S;if(c)r=t;for(_ in r){b=!f&&m&&m[_]!==undefined;if(b&&s(y,_))continue;S=b?m[_]:r[_];y[_]=c&&typeof m[_]!="function"?r[_]:d&&b?o(S,n):v&&m[_]==S?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};t[u]=e[u];return t}(S):p&&typeof S=="function"?o(Function.call,S):S;if(p){(y.virtual||(y.virtual={}))[_]=S;if(e&l.R&&g&&!g[_])a(g,_,S)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.notNULL=t.formatPoints=t.returnPoint=t.formatEdits=t.formatQuery=t.createCanvasContext2D=t.mixin=t.merge=t.DeepMerge=t.ChineseToUtf8=t.getTopAnalysisResult=t.bindAsEventListener=t.bind=t.newGuid=t.cloneObject=t.copyAttributesWithClip=t.copyAttributes=t.transformResult=t.toJSON=t.isInTheSameDomain=t.supportCanvas=t.isSupportCanvas=t.getBrowser=t.Browser=t.IS_GECKO=t.getParameters=t.urlAppend=t.getWFParameterString=t.getParameterString=t.applyDefaults=t.modifyDOMElement=t.indexOf=t.removeItem=t.isElement=t.getElement=t.reset=t.copyExcluce=t.copy=t.extendDeep=t.isArray=t.extend=t.WebGraphicsInfo=t.VectCls=t.Tangram=t.Rectangle=t.PolyLine=t.Polygon=t.Point2D=t.MultiPolygon=t.LablePntInfo=t.LabelRegInfo=t.LabelLinInfo=t.GRegion=t.GPoint=t.GLine=t.FeatureSet=t.FeatureGraphicBase=t.FeatureGeometry=t.Feature=t.LayerStatusType=t.MapType=t.CItemType=t.CLinStyleMakeType=t.CLinJointType=t.CLinHeadType=t.CLinAdjustType=t.NetElemType=t.NetAnalyType=t.ISShowArc=t.EightDirType=t.LineConstrain=t.LabelSpreadType=t.RepeatType=t.LabelPntType=t.LabelRegType=t.LabelLinType=t.FontShape=t.FeatureType=t.VectClsType=t.XClsType=t.DynShowStyle=t.DynNoteLableType=t.CRegionInfo=t.CPointInfo=t.CLineInfo=t.Circle=t.CGDBInfo=t.CDynNoteInfo=t.CDisplayStyleExtend=t.CDisplayStyle=t.CAttDataRow=t.CAttStruct=t.Zondy=t.Arc=t.AnyLine=undefined;var n=r(95);var i=r(271);var o=r(0);var a=r(62);var s=r(272);var u=r(273);var l=r(152);var f=r(147);var c=r(153);var h=r(275);var p=r(63);var d=r(96);var v=r(97);var y=r(148);var g=r(146);var m=r(15);var _=r(154);var b=r(155);var S=r(64);var x=r(65);var C=r(100);var w=r(99);var P=r(101);var I=r(150);var E=r(151);var L=r(149);var T=r(285);var M=r(19);var O=r(157);var A=r(286);var N=r(98);var R=r(36);var k=r(287);var D=r(156);var F=r(6);t.AnyLine=n.AnyLine;t.Arc=i.Arc;t.Zondy=o.Zondy;t.CAttStruct=a.CAttStruct;t.CAttDataRow=s.CAttDataRow;t.CDisplayStyle=u.CDisplayStyle;t.CDisplayStyleExtend=l.CDisplayStyleExtend;t.CDynNoteInfo=f.CDynNoteInfo;t.CGDBInfo=c.CGDBInfo;t.Circle=h.Circle;t.CLineInfo=p.CLineInfo;t.CPointInfo=d.CPointInfo;t.CRegionInfo=v.CRegionInfo;t.DynNoteLableType=y.DynNoteLableType;t.DynShowStyle=g.DynShowStyle;t.XClsType=m.XClsType;t.VectClsType=m.VectClsType;t.FeatureType=m.FeatureType;t.FontShape=m.FontShape;t.LabelLinType=m.LabelLinType;t.LabelRegType=m.LabelRegType;t.LabelPntType=m.LabelPntType;t.RepeatType=m.RepeatType;t.LabelSpreadType=m.LabelSpreadType;t.LineConstrain=m.LineConstrain;t.EightDirType=m.EightDirType;t.ISShowArc=m.ISShowArc;t.NetAnalyType=m.NetAnalyType;t.NetElemType=m.NetElemType;t.CLinAdjustType=m.CLinAdjustType;t.CLinHeadType=m.CLinHeadType;t.CLinJointType=m.CLinJointType;t.CLinStyleMakeType=m.CLinStyleMakeType;t.CItemType=m.CItemType;t.MapType=m.MapType;t.LayerStatusType=m.LayerStatusType;t.Feature=_.Feature;t.FeatureGeometry=b.FeatureGeometry;t.FeatureGraphicBase=S.FeatureGraphicBase;t.FeatureSet=x.FeatureSet;t.GLine=C.GLine;t.GPoint=w.GPoint;t.GRegion=P.GRegion;t.LabelLinInfo=I.LabelLinInfo;t.LabelRegInfo=E.LabelRegInfo;t.LablePntInfo=L.LablePntInfo;t.MultiPolygon=T.MultiPolygon;t.Point2D=M.Point2D;t.Polygon=O.Polygon;t.PolyLine=A.PolyLine;t.Rectangle=N.Rectangle;t.Tangram=R.Tangram;t.VectCls=k.VectCls;t.WebGraphicsInfo=D.WebGraphicsInfo;t.extend=F.extend;t.isArray=F.isArray;t.extendDeep=F.extendDeep;t.copy=F.copy;t.copyExcluce=F.copyExcluce;t.reset=F.reset;t.getElement=F.getElement;t.isElement=F.isElement;t.removeItem=F.removeItem;t.indexOf=F.indexOf;t.modifyDOMElement=F.modifyDOMElement;t.applyDefaults=F.applyDefaults;t.getParameterString=F.getParameterString;t.getWFParameterString=F.getWFParameterString;t.urlAppend=F.urlAppend;t.getParameters=F.getParameters;t.IS_GECKO=F.IS_GECKO;t.Browser=F.Browser;t.getBrowser=F.getBrowser;t.isSupportCanvas=F.isSupportCanvas;t.supportCanvas=F.supportCanvas;t.isInTheSameDomain=F.isInTheSameDomain;t.toJSON=F.toJSON;t.transformResult=F.transformResult;t.copyAttributes=F.copyAttributes;t.copyAttributesWithClip=F.copyAttributesWithClip;t.cloneObject=F.cloneObject;t.newGuid=F.newGuid;t.bind=F.bind;t.bindAsEventListener=F.bindAsEventListener;t.getTopAnalysisResult=F.getTopAnalysisResult;t.ChineseToUtf8=F.ChineseToUtf8;t.DeepMerge=F.DeepMerge;t.merge=F.merge;t.mixin=F.mixin;t.createCanvasContext2D=F.createCanvasContext2D;t.formatQuery=F.formatQuery;t.formatEdits=F.formatEdits;t.returnPoint=F.returnPoint;t.formatPoints=F.formatPoints;t.notNULL=F.notNULL},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Point2D=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(5);var u=d(s);var l=r(3);var f=d(l);var c=r(4);var h=d(c);var p=r(36);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=n?n:{};var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,o));s.x=e!==undefined?e:null;s.y=r!==undefined?r:null;s.nearDis=o.nearDis!==undefined?parseFloat(o.nearDis):null;s.CLASS_NAME="Zondy.Object.Point2D";return s}(0,u.default)(t,[{key:"getGeometryType",value:function e(){return"point"}},{key:"setByOL",value:function e(t){if(t!==undefined){var r=t.getCoordinates();this.x=r[0];this.y=r[1]}}},{key:"toString",value:function e(){if(this.x===null||this.y===null)return"";var t=this.x+","+this.y;if(this.nearDis!==undefined){t+=";"+this.nearDis}return t}}]);return t}(p.Tangram);t.Point2D=v;Zondy.Object.Point2D=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SUtil=undefined;var n=r(1);var i=_(n);var o=r(5);var a=_(o);var s=r(0);var u=r(209);var l=r(127);var f=r(210);var c=r(71);var h=r(211);var p=r(212);var d=r(213);var v=r(214);var y=r(215);var g=r(42);var m=r(72);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(){function e(){(0,i.default)(this,e)}(0,a.default)(e,null,[{key:"SUtil_smoothBezier",value:function t(r,n,i,o,a){if(!a||a!==2){a=[0,0]}var s=a;var u=[];var l=[];var f=[];var c=[];var h=!!o;var p,d;if(h){p=[Infinity,Infinity];d=[-Infinity,-Infinity];var v=r.length;for(var y=0;y<v;y++){e.Util_vector.min(p,p,[r[y][0]+s[0],r[y][1]+s[1]]);e.Util_vector.max(d,d,[r[y][0]+s[0],r[y][1]+s[1]])}e.Util_vector.min(p,p,o[0]);e.Util_vector.max(d,d,o[1])}var g=r.length;for(var m=0;m<g;m++){var _=[r[m][0]+s[0],r[m][1]+s[1]];var b=void 0;var S=void 0;if(i){b=[r[m?m-1:g-1][0]+s[0],r[m?m-1:g-1][1]+s[1]];S=[r[(m+1)%g][0]+s[0],r[(m+1)%g][1]+s[1]]}else{if(m===0||m===g-1){u.push([r[m][0]+s[0],r[m][1]+s[1]]);continue}else{b=[r[m-1][0]+s[0],r[m-1][1]+s[1]];S=[r[m+1][0]+s[0],r[m+1][1]+s[1]]}}e.Util_vector.sub(l,S,b);e.Util_vector.scale(l,l,n);var x=e.Util_vector.distance(_,b);var C=e.Util_vector.distance(_,S);var w=x+C;if(w!==0){x/=w;C/=w}e.Util_vector.scale(f,l,-x);e.Util_vector.scale(c,l,C);var P=e.Util_vector.add([],_,f);var I=e.Util_vector.add([],_,c);if(h){e.Util_vector.max(P,P,p);e.Util_vector.min(P,P,d);e.Util_vector.max(I,I,p);e.Util_vector.min(I,I,d)}u.push(P);u.push(I)}if(i){u.push(u.shift())}return u}},{key:"SUtil_smoothSpline",value:function t(r,n,i,o){if(!o||o!==2){o=[0,0]}var a=o;var s=r.length;var u=[];var l=0;for(var f=1;f<s;f++){l+=e.Util_vector.distance([r[f-1][0]+a[0],r[f-1][1]+a[1]],[r[f][0]+a[0],r[f][1]+a[1]])}var c=l/5;c=c<s?s:c;for(var h=0;h<c;h++){var p=h/(c-1)*(n?s:s-1);var d=Math.floor(p);var v=p-d;var y=void 0;var g=[r[d%s][0]+a[0],r[d%s][1]+a[1]];var m=void 0;var _=void 0;if(!n){y=[r[d===0?d:d-1][0]+a[0],r[d===0?d:d-1][1]+a[1]];m=[r[d>s-2?s-1:d+1][0]+a[0],r[d>s-2?s-1:d+1][1]+a[1]];_=[r[d>s-3?s-1:d+2][0]+a[0],r[d>s-3?s-1:d+2][1]+a[1]]}else{y=[r[(d-1+s)%s][0]+a[0],r[(d-1+s)%s][1]+a[1]];m=[r[(d+1)%s][0]+a[0],r[(d+1)%s][1]+a[1]];_=[r[(d+2)%s][0]+a[0],r[(d+2)%s][1]+a[1]]}var b=v*v;var S=v*b;u.push([x(y[0],g[0],m[0],_[0],v,b,S),x(y[1],g[1],m[1],_[1],v,b,S)])}return u;function x(e,t,r,n,i,o,a){var s=(r-e)*.5;var u=(n-t)*.5;return(2*(t-r)+s+u)*a+(-3*(t-r)-2*s-u)*o+s*i+t}}},{key:"SUtil_dashedLineTo",value:function e(t,r,n,i,o,a,s){var u=[5,5];a=typeof a!="number"?5:a;if(t.setLineDash){u[0]=a;u[1]=a;if(s&&s instanceof Array){t.setLineDash(s)}else{t.setLineDash(u)}t.moveTo(r,n);t.lineTo(i,o);return}var l=i-r;var f=o-n;var c=Math.floor(Math.sqrt(l*l+f*f)/a);l=l/c;f=f/c;var h=true;for(var p=0;p<c;++p){if(h){t.moveTo(r,n)}else{t.lineTo(r,n)}h=!h;r+=l;n+=f}t.lineTo(i,o)}}]);return e}();b.Util_area=new u.Area;b.Util_color=new l.Color;b.Util_computeBoundingBox=new f.ComputeBoundingBox;b.Util_curve=new c.Curve;b.Util_env=new h.Env;b.Util_event=new p.Event;b.Util_http=new d.Http;b.Util_math=new v.Math;b.Util_matrix=new y.Matrix;b.Util=new g.Util;b.Util_vector=new m.Vector;t.SUtil=b;s.Zondy.LevelRenderer.SUtil=b},function(e,t,r){var n=r(30);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServiceBase=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(6);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,i.default)(this,e);(0,u.extend)(this,t);this.baseUrl=t&&t.baseUrl?t.baseUrl:null;this.ip=t&&t.ip?t.ip:"localhost";this.port=t&&t.port?t.port:"6163";this.partUrl=t&&t.partUrl?t.partUrl:null;this.networkProtocol=t&&t.networkProtocol?t.networkProtocol:location.protocol.split(":")[0]||"http";this.domain=t&&t.domain?t.domain:""}(0,a.default)(e,[{key:"getFullUrl",value:function e(){var t=this;var r=null;if(s.Zondy.Util.isArray(t.ip)){for(var n=0;n<t.ip.length;n++){r=new Array;var i=null;if((0,u.isArray)(t.port)){i=t.port[n]!==undefined?t.port[n]:"6163"}else{i=t.port!==undefined?t.port:"6163"}var o=null;if((0,u.isArray)(t.partUrl)){o=t.partUrl[n]!==undefined?t.partUrl[n]:null}else{o=t.partUrl!==undefined?t.partUrl:null}if(t.domain===""){t.domainStr=t.networkProtocol+"://"+t.ip[n]+":"+i}else{t.domainStr=t.domain}r.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+o).trim()))}}else{if(t.domain===""){t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port}else{t.domainStr=t.domain}r=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim())}return r}}]);return e}();t.ServiceBase=f;s.Zondy.Service.ServiceBase=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CTheme=undefined;var n=r(1);var i=s(n);var o=r(0);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){(0,i.default)(this,e);var r=t!==undefined?t:{};(0,a.extend)(this,r);this.Name=r&&r.Name?r.Name:null;this.IsBaseTheme=r&&r.IsBaseTheme?r.IsBaseTheme:true;this.Visible=r&&r.Visible?r.Visible:true};t.CTheme=u;o.Zondy.Object.Theme.CTheme=u},function(e,t,r){"use strict";t.__esModule=true;var n=r(254);var i=u(n);var o=r(261);var a=u(o);var s=typeof a.default==="function"&&typeof i.default==="symbol"?function(e){return typeof e}:function(e){return e&&typeof a.default==="function"&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};function u(e){return e&&e.__esModule?e:{default:e}}t.default=typeof a.default==="function"&&s(i.default)==="symbol"?function(e){return typeof e==="undefined"?"undefined":s(e)}:function(e){return e&&typeof a.default==="function"&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e==="undefined"?"undefined":s(e)}},function(e,t,r){e.exports=!r(38)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AnalysisBase=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(6);var g=r(22);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};r.baseUrl="igs/rest/mrfws";var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.flowID=r.flowID!==undefined?r.flowID:null;return n}(0,f.default)(t,[{key:"execute",value:function e(t,r,n){var o={};(0,y.copyExcluce)(o,this,["port","ip","baseUrl","partUrl","flowID"]);if(!r){r="get"}if(r.toLowerCase()==="get"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";if(o!==null){var a=(0,y.getWFParameterString)(o);if(a!==null||a!==""){this.partUrl+="&paraValues="+a}}}if(r.toLowerCase()==="post"){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var s=new Array;if(o!==null){for(var u in o){if(o[u]!==null){var l={};l.Key=u;l.Value=o[u].toString();s.push(l)}}}o=s}var f=this.getFullUrl();var c=this;var h=new m.IgsServiceBase(f,{eventListeners:{scope:c,processCompleted:t,processFailed:n}});if(r.toLowerCase()==="post"){h.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{h.processAsync()}}}]);return t}(g.ServiceBase);t.AnalysisBase=b;v.Zondy.Service.AnalysisBase=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ShapeParameters=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.refOriginalPosition=[0,0];this.refDataID=null;this.isHoverByRefDataID=false;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=true;this.hoverable=true;this.style=null;this.highlightStyle={};this.CLASS_NAME="Zondy.Feature.ShapeParameters"}(0,a.default)(e,[{key:"destroy",value:function e(){this.refOriginalPosition=null;this.refDataID=null;this.isHoverByRefDataID=null;this.refDataHoverGroup=null;this.dataInfo=null;this.clickable=null;this.hoverable=null;this.style=null;this.highlightStyle=null}}]);return e}();t.ShapeParameters=l;s.Zondy.Feature.ShapeParameters=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=window.mapboxgl=window.mapboxgl||{};n.Zondy=n.Zondy||{};var i=n.Zondy||{};i.Map=i.Map||{};t.Zondy=i;t.mapboxgl=n},function(e,t,r){var n=r(21);var i=r(138);var o=r(85);var a=Object.defineProperty;t.f=r(25)?Object.defineProperty:function e(t,r,s){n(t);r=o(r,true);n(s);if(i)try{return a(t,r,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");if("value"in s)t[r]=s.value;return t}},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CThemeInfo=undefined;var n=r(1);var i=f(n);var o=r(0);var a=r(6);var s=r(68);var u=r(188);var l=r(189);function f(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){(0,i.default)(this,e);var r=t!==undefined?t:{};(0,a.extend)(this,r);this.Caption=r.Caption!==undefined?r.Caption:null;this.IsVisible=r.IsVisible!==undefined?r.IsVisible:true;this.MaxScale=r.MaxScale!==undefined?parseFloat(r.MaxScale):0;this.MinScale=r.MinScale!==undefined?parseFloat(r.MinScale):0;this.RegInfo=r.RegInfo!==undefined?r.RegInfo:null;this.LinInfo=r.LinInfo!==undefined?r.LinInfo:null;this.PntInfo=r.PntInfo!==undefined?r.PntInfo:null};t.CThemeInfo=c;o.Zondy.Object.Theme.CThemeInfo=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Graph=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(43);var g=r(13);var m=r(98);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.shapeFactory=new g.ShapeFactory;l.shapeParameters=null;l.RelativeCoordinate=false;l.setting=null;l.origonPoint=null;l.chartBox=null;l.chartBounds=null;l.width=null;l.height=null;l.XOffset=0;l.YOffset=0;l.DVBParameter=null;l.dataViewBox=null;l.DVBCodomain=null;l.DVBCenterPoint=null;l.DVBUnitValue=null;l.DVBOrigonPoint=null;l.DVBWidth=null;l.DVBHeight=null;l.origonPointOffset=null;l.fields=n||[];l.dataValues=null;if(s){l.lonlat=s}else{if(u&&u.calGravity){if(e.ftype===v.Zondy.Enum.FeatureType.Pnt){var c=e.fGeom.PntGeom[0].Dot;l.lonlat=[c.x,c.y]}else if(e.ftype===v.Zondy.Enum.FeatureType.Lin){var h=e.fGeom.LinGeom[0].Line.Arcs;var p=[];h.forEach(function(e){var t=e.Dots;p=[].concat(t)});var d=Math.ceil(p.length/2);var c=p[d-1];l.lonlat=[c.x,c.y]}else if(e.ftype===v.Zondy.Enum.FeatureType.Reg){l.lonlat=l.getCenterOfGravityPoint(e)}else{var y=e.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}else{var y=e.bound;l.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}}if(o&&o.width&&o.height&&o.codomain){l.setting=o}l.CLASS_NAME="Zondy.Feature.Theme.Graph";return l}(0,u.default)(t,[{key:"destroy",value:function e(){this.shapeFactory=null;this.shapeParameters=null;this.width=null;this.height=null;this.origonPoint=null;this.chartBox=null;this.dataViewBox=null;this.chartBounds=null;this.DVBParameter=null;this.DVBOrigonPoint=null;this.DVBCenterPoint=null;this.DVBWidth=null;this.DVBHeight=null;this.DVBCodomain=null;this.DVBUnitValue=null;this.origonPointOffset=null;this.XOffset=null;this.YOffset=null;this.fields=null;this.dataValues=null;this.setting=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function e(){var t=true;if(!this.setting){return false}var r=this.setting;if(!(r.width&&r.height&&r.codomain)){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=y.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];this.width=parseFloat(r.width);this.height=parseFloat(r.height);this.DVBCodomain=r.codomain;this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var o=this.width;var a=this.height;var s=this.location;this.origonPoint=[s[0]-o/2,s[1]-a/2];var u=this.origonPoint;this.chartBox=[u[0],u[1]+a,u[0]+o,u[1]];var l=this.chartBox;var f=this.DVBParameter;this.dataViewBox=[l[0]+f[0],l[1]-f[1],l[2]-f[2],l[3]+f[3]];var c=this.dataViewBox;if(c[0]>=c[2]||c[1]<=c[3]){return false}this.DVBOrigonPoint=[c[0],c[3]];this.DVBWidth=Math.abs(c[2]-c[0]);this.DVBHeight=Math.abs(c[1]-c[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-u[0],this.DVBOrigonPoint[1]-u[1]];return t}},{key:"resetLocation",value:function e(t){if(t){this.lonlat=t}var r=this.getLocalXY(this.lonlat);r[0]+=this.XOffset;r[1]+=this.YOffset;this.location=r;var n=this.width;var i=this.height;var o=this.location;this.chartBounds=new m.Rectangle(o[0]-n/2,o[1]-i/2,o[0]+n/2,o[1]+i/2);this.resetLinearGradient();return o}},{key:"resetLinearGradient",value:function e(){}},{key:"shapesConvertToRelativeCoordinate",value:function e(){var t=this.shapes;var r=this.location;for(var n=0,i=t.length;n<i;n++){t[n].refOriginalPosition=r;var o=t[n].style;for(var a in o){switch(a){case"pointList":var s=o[a];for(var u=0,l=s.length;u<l;u++){s[u][0]-=r[0];s[u][1]-=r[1]}break;case"x":o[a]-=r[0];break;case"y":o[a]-=r[1];break;default:break}}}this.RelativeCoordinate=true}},{key:"assembleShapes",value:function e(){}},{key:"getLocalXY",value:function e(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function e(t){var r=[];var n=0;var i=0,o=0;if(t.ftype===v.Zondy.Enum.FeatureType.Reg){var a=t.fGeom.RegGeom;for(var s=0;s<a.length;s++){var u=a[s];if(u==null||u.Rings==null){continue}var l=u.Rings;for(var f=0;f<l.length;f++){var c=l[f];if(c==null||c.Arcs==null){continue}var h=c.Arcs;for(var p=0;p<h.length;p++){var d=h[p];if(d==null||d.Dots==null){continue}var y=d.Dots;for(var g=0;g<y.length;g++){r.push(y[g])}}}}}for(var f=1;f<=r.length;f++){var m=r[f%r.length].x;var _=r[f%r.length].y;var b=r[f-1].x;var S=r[f-1].y;var x=(m*S-_*b)/2;n+=x;i+=x*(m+b)/3;o+=x*(_+S)/3}i=i/n;o=o/n;return[i,o]}}]);return t}(y.Theme);y.Theme.getDataValues=function(e,t,r){if(!e.attributes){return false}var n=[];var i=e.attributes;for(var o=0;o<t.length;o++){for(var a in i){if(a!==t[o]){continue}if(i[a]===null||i[a]===undefined){continue}try{if(!isNaN(r)&&r>=0){n.push(parseFloat(i[a].toString()).toFixed(r))}else{n.push(parseFloat(i[a].toString()))}}catch(e){throw new Error("not a number")}}}if(n.length===t.length){return n}else{return false}};t.Graph=b;v.Zondy.Theme.Graph=b},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(136);var i=r(79);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(29);var i=r(57);e.exports=r(25)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Tangram=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(6);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,i.default)(this,e);var r=t?t:{};(0,u.extend)(this,r)}(0,a.default)(e,[{key:"setByOL",value:function e(t){return null}},{key:"toString",value:function e(){return""}},{key:"getGeometryType",value:function e(){return}},{key:"Trim",value:function e(t,r){var n;n=t.replace(/(^\s+)|(\s+$)/g,"");if(r.toLowerCase()==="g"){n=n.replace(/\s/g,"")}return n}}]);return e}();t.Tangram=f;s.Zondy.Object.Tangram=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeometryAnalysisBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(22);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};r.baseUrl="igs/rest/mrgs";return(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r))}return t}(h.ServiceBase);t.GeometryAnalysisBase=d;c.Zondy.Service.GeometryAnalysisBase=d},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CatalogService=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(22);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};r.baseUrl="igs/rest/mrcs";return(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r))}return t}(h.ServiceBase);t.CatalogService=d;c.Zondy.Catalog.CatalogService=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseParameter=undefined;var n=r(78);var i=f(n);var o=r(1);var a=f(o);var s=r(5);var u=f(s);var l=r(18);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){(0,u.default)(e,null,[{key:"formatParam",value:function e(t){var r=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"];for(var n=0;n<r.length;n++){if(typeof t[r[n]]==="string"){t[r[n]]=t[r[n]]==="true"}}return t}}]);function e(){(0,a.default)(this,e);this.layers=[];this.pageIndex=0;this.pagination=100;this.resultFormat="json";this.IncludeAttribute=true;this.IncludeGeometry=true;this.IncludeWebGraphic=false;this.orderBy=undefined;this.isAsc=undefined;this.proj=undefined;this.fields=undefined;this.coordPrecision=undefined;this.cursorType="backward"}return e}();c.prototype.formatParameter=function(e,t){var r=void 0,n=this;n._crs=t;if(e==="typename"){r={layers:e,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"};if(this.where&&this.geometry){delete r.geometry}(0,i.default)(r).forEach(function(e){if(n.hasOwnProperty(e)&&n[e]){if(n[e]instanceof Array){r[r[e]]=n[e].join(",")}else{if(e==="where"||e==="geometry"){r[r[e]]=initFilter(n[e],n.geometry,n)}else{r[r[e]]=n[e]}}}delete r[e]});return r}else{r={layers:e,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"};(0,i.default)(r).forEach(function(e){if(n.hasOwnProperty(e)){n[r[e]]=n[e];delete n[e]}});return this}};t.BaseParameter=c;l.Zondy.Service.BaseParameter=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapServiceBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(22);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};r.baseUrl="igs/rest/mrms";return(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r))}return t}(h.ServiceBase);t.MapServiceBase=d;c.Zondy.Service.MapServiceBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Util=undefined;var n=r(24);var i=f(n);var o=r(1);var a=f(o);var s=r(5);var u=f(s);var l=r(0);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,a.default)(this,e);this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1};this._ctx=null;this._canvas=null;this._pixelCtx=null;this._width=null;this._height=null;this._offsetX=0;this._offsetY=0;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}(0,u.default)(e,[{key:"clone",value:function e(t){var r=this.BUILTIN_OBJECT;if((typeof t==="undefined"?"undefined":(0,i.default)(t))=="object"&&t!==null){var n=t;if(t instanceof Array){n=[];for(var o=0,a=t.length;o<a;o++){n[o]=this.clone(t[o])}}else if(!r[Object.prototype.toString.call(t)]){n={};for(var s in t){if(t.hasOwnProperty(s)){n[s]=this.clone(t[s])}}}return n}return t}},{key:"mergeItem",value:function e(t,r,n,o){var a=this.BUILTIN_OBJECT;if(r.hasOwnProperty(n)){if((0,i.default)(t[n])=="object"&&!a[Object.prototype.toString.call(t[n])]){this.merge(t[n],r[n],o)}else if(o||!(n in t)){t[n]=r[n]}}}},{key:"merge",value:function e(t,r,n){for(var i in r){this.mergeItem(t,r,i,n)}return t}},{key:"getContext",value:function e(){if(!this._ctx){this._ctx=document.createElement("canvas").getContext("2d")}return this._ctx}},{key:"getPixelContext",value:function e(){if(!this._pixelCtx){this._canvas=document.createElement("canvas");this._width=this._canvas.width;this._height=this._canvas.height;this._pixelCtx=this._canvas.getContext("2d")}return this._pixelCtx}},{key:"adjustCanvasSize",value:function e(t,r){var n=this._canvas;var i=this._pixelCtx;var o=this._width;var a=this._height;var s=this._offsetX;var u=this._offsetY;var l=100;var f;if(t+s>o){o=t+s+l;n.width=o;f=true}if(r+u>a){a=r+u+l;n.height=a;f=true}if(t<-s){s=Math.ceil(-t/l)*l;o+=s;n.width=o;f=true}if(r<-u){u=Math.ceil(-r/l)*l;a+=u;n.height=a;f=true}if(f){i.translate(s,u)}}},{key:"getPixelOffset",value:function e(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function e(t,r){if(t.indexOf){return t.indexOf(r)}for(var n=0,i=t.length;n<i;n++){if(t[n]===r){return n}}return-1}},{key:"inherits",value:function e(t,r){var n=t.prototype;function i(){}i.prototype=r.prototype;t.prototype=new i;for(var o in n){t.prototype[o]=n[o]}t.constructor=t}}]);return e}();t.Util=c;l.Zondy.LevelRenderer.Tool.Util=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Theme=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(6);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,r){(0,i.default)(this,e);if(!t){return}if(!r||!r.map||!r.renderer){return}this.id=(0,u.newGuid)();this.lonlat=null;this.location=[];this.data=t;this.shapes=[];this.layer=r;this.CLASS_NAME="Zondy.Feature.Theme"}(0,a.default)(e,[{key:"destroy",value:function e(){this.data=null;this.id=null;this.lonlat=null;this.location=null;this.shapes=null;this.layer=null}}]);return e}();t.Theme=f;s.Zondy.Theme=f},function(e,t,r){var n=r(79);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(135);var i=r(83);e.exports=Object.keys||function e(t){return n(t,i)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=true},function(e,t,r){var n=r(56);e.exports=function(e,t,r){n(e);if(t===undefined)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryServiceBase=undefined;var n=r(8);var i=S(n);var o=r(2);var a=S(o);var s=r(1);var u=S(s);var l=r(5);var f=S(l);var c=r(3);var h=S(c);var p=r(4);var d=S(p);var v=r(0);var y=r(6);var g=r(22);var m=r(65);var _=r(66);var b=r(9);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};r.baseUrl="igs/rest/mrfs";var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.resultCallBack=r.resultCallBack!==undefined?r.resultCallBack:null;n.queryParam=r.queryParam!==undefined?r.queryParam:null;n.requestType=r.requestType!==undefined?r.requestType:"GET";return n}(0,f.default)(t,[{key:"processResult",value:function e(t){var r=new m.FeatureSet;(0,y.copyExcluce)(r,t,"succeed");this.resultCallBack(r)}},{key:"processGeoJsonResult",value:function e(t){var r={};(0,y.copyExcluce)(r,t,"succeed");this.resultCallBack(r)}},{key:"restQuery",value:function e(t,r,n,o,a,s){var u=this;u.resultCallBack=n;var l=new b.IgsServiceBase(t,{eventListeners:{scope:u,processCompleted:s!=="geojson"?u.processResult:u.processGeoJsonResult,processFailed:a}});if(o==="GET"){l.processAsync()}else{l.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"query",value:function e(t,r,n){if(this.queryParam===null){return}var i="";if(this.queryParam instanceof _.QueryParameter){i=this.getFullUrl()}else{return}var o="";var a=null;if(!n){if(!this.requestType){o="GET"}else{o=this.requestType}}else{o=n}if(o.toUpperCase()==="GET"){i+=encodeURI("?"+this.queryParam.getParameterURL())}else{a=this.queryParam.getParameterObject()}this.restQuery(i,a,t,o,r,this.queryParam.resultFormat.toLowerCase())}}]);return t}(g.ServiceBase);t.QueryServiceBase=x;v.Zondy.Service.QueryServiceBase=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Eventful=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this._handlers={};this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}(0,a.default)(e,[{key:"destroy",value:function e(){this._handlers=null}},{key:"one",value:function e(t,r,n){var i=this._handlers;if(!r||!t){return this}if(!i[t]){i[t]=[]}i[t].push({h:r,one:true,ctx:n||this});return this}},{key:"bind",value:function e(t,r,n){var i=this._handlers;if(!r||!t){return this}if(!i[t]){i[t]=[]}i[t].push({h:r,one:false,ctx:n||this});return this}},{key:"unbind",value:function e(t,r){var n=this._handlers;if(!t){this._handlers={};return this}if(r){if(n[t]){var i=[];for(var o=0,a=n[t].length;o<a;o++){if(n[t][o]["h"]!==r){i.push(n[t][o])}}n[t]=i}if(n[t]&&n[t].length===0){delete n[t]}}else{delete n[t]}return this}},{key:"dispatch",value:function e(t){if(this._handlers[t]){var r=arguments;var n=r.length;if(n>3){r=Array.prototype.slice.call(r,1)}var i=this._handlers[t];var o=i.length;for(var a=0;a<o;){switch(n){case 1:i[a]["h"].call(i[a]["ctx"]);break;case 2:i[a]["h"].call(i[a]["ctx"],r[1]);break;case 3:i[a]["h"].call(i[a]["ctx"],r[1],r[2]);break;default:i[a]["h"].apply(i[a]["ctx"],r);break}if(i[a]["one"]){i.splice(a,1);o--}else{a++}}}return this}},{key:"dispatchWithContext",value:function e(t){if(this._handlers[t]){var r=arguments;var n=r.length;if(n>4){r=Array.prototype.slice.call(r,1,r.length-1)}var i=r[r.length-1];var o=this._handlers[t];var a=o.length;for(var s=0;s<a;){switch(n){case 1:o[s]["h"].call(i);break;case 2:o[s]["h"].call(i,r[1]);break;case 3:o[s]["h"].call(i,r[1],r[2]);break;default:o[s]["h"].apply(i,r);break}if(o[s]["one"]){o.splice(s,1);a--}else{s++}}}return this}}]);return e}();t.Eventful=l;s.Zondy.LevelRenderer.Eventful=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemeVector=undefined;var n=r(2);var i=S(n);var o=r(1);var a=S(o);var s=r(5);var u=S(s);var l=r(3);var f=S(l);var c=r(7);var h=S(c);var p=r(4);var d=S(p);var v=r(0);var y=r(6);var g=r(43);var m=r(133);var _=r(132);var b=r(76);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,d.default)(t,e);function t(e,r,n,o,s){(0,a.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));if(!e.fGeom){return(0,f.default)(u)}u.dataBounds=e.bound;u.nodesClipPixel=2;u.isHoverAble=true;u.isMultiHover=true;u.isClickAble=true;u.highlightStyle=null;u.shapeOptions={};u.style=n||{};u.CLASS_NAME="Zondy.Theme.ThemeVector";u.style=n?n:{};if(o){(0,y.copyAttributesWithClip)(u,o,["shapeOptions","dataBounds"])}if(s){(0,y.copyAttributesWithClip)(u.shapeOptions,s)}var l=e.fGeom;u.lonlat=[(u.dataBounds.xmin+u.dataBounds.xmax)/2,(u.dataBounds.ymin+u.dataBounds.ymax)/2];u.location=u.getLocalXY(u.lonlat);switch(e.ftype){case 0:break;case 1:u.pointsToTF(e.fGeom.PntGeom);break;case 2:u.linesToTF(e.fGeom.LinGeom);break;case 3:u.regsToTF(e.fGeom.RegGeom);break}return u}(0,u.default)(t,[{key:"destroy",value:function e(){this.style=null;this.dataBounds=null;this.nodesClipPixel=null;this.isHoverAble=null;this.isMultiHover=null;this.isClickAble=null;this.highlightStyle=null;this.shapeOptions=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function e(t){if(t==null||t.length<=0){return}var r=t.components;var n=[];var i=[];var o=this.location;var a=[];var s=this.nodesClipPixel;for(var u=0;u<t.length;u++){var l=t[u];i=[];n=this.getLocalXY([l.Dot.x,l.Dot.y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(a.length>0){var f=a[a.length-1];if(Math.abs(f[0]-i[0])<=s&&Math.abs(f[1]-i[1])<=s){continue}}a.push(i);var c=new Object;c.r=6;c=(0,y.copyAttributesWithClip)(c,this.style);c.x=i[0];c.y=i[1];var h=new _.SmicPoint({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){h.highlightStyle=this.highlightStyle}h.refOriginalPosition=o;h.refDataID=this.data.FID;h.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){(0,y.copyAttributesWithClip)(h,this.shapeOptions)}this.shapes.push(h)}}},{key:"linesToTF",value:function e(t){if(t==null||t.length<=0){return}for(var r=0;r<t.length;r++){this.lineToTF(t[r])}}},{key:"lineToTF",value:function e(t){var r=[];if(t.Line!=null&&t.Line.Arcs!=null&&t.Line.Arcs.length>0){var n=t.Line.Arcs;for(var i=0;i<n.length;i++){var o=n[i].Dots;for(var a=0;a<o.length;a++){r.push([o[a].x,o[a].y])}}}if(r.length<=0){return}var s=[];var u=[];var l=this.location;var f=[];var c=this.nodesClipPixel;for(var i=0;i<r.length;i++){var h=r[i];u=[];s=this.getLocalXY(h);u[0]=s[0]-l[0];u[1]=s[1]-l[1];if(f.length>0){var p=f[f.length-1];if(Math.abs(p[0]-u[0])<=c&&Math.abs(p[1]-u[1])<=c){continue}}f.push(u)}if(f.length<2){return null}var d=new Object;d=(0,y.copyAttributesWithClip)(d,this.style,["pointList"]);d.pointList=f;var v=new m.SmicBrokenLine({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){v.highlightStyle=this.highlightStyle}v.refOriginalPosition=this.location;v.refDataID=this.data.FID;v.isHoverByRefDataID=this.isMultiHover;if(this.shapeOptions){(0,y.copyAttributesWithClip)(v,this.shapeOptions)}this.shapes.push(v)}},{key:"regsToTF",value:function e(t){if(t==null||t.length<=0){return}for(var r=0;r<t.length;r++){this.regToTF(t[r])}}},{key:"regToTF",value:function e(t){var r=t.Rings;if(r==null||r.length<=0){return}var n=[];var i=[];var o=this.location;var a=[];var s=[];var u=[];var l=this.nodesClipPixel;for(var f=0;f<r.length;f++){if(f===0){a=[];if(r[f]!=null&&r[f].Arcs!=null&&r[f].Arcs.length>0){var c=r[f].Arcs;for(var h=0;h<c.length;h++){var p=c[h].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-i[0])<=l&&Math.abs(v[1]-i[1])<=l){continue}}a.push(i)}}}}else{s=[];if(r[f]!=null&&r[f].Arcs!=null&&r[f].Arcs.length>0){var c=r[f].Arcs;for(var h=0;h<c.length;h++){var p=c[h].Dots;for(var d=0;d<p.length;d++){i=[];n=this.getLocalXY([p[d].x,p[d].y]);i[0]=n[0]-o[0];i[1]=n[1]-o[1];if(s.length>0){var g=s[s.length-1];if(Math.abs(g[0]-i[0])<=l&&Math.abs(g[1]-i[1])<=l){continue}}s.push(i)}}}}if(s.length<2){continue}u.push(s)}if(a.length<2){return}var m={};m=(0,y.copyAttributesWithClip)(m,this.style,["pointList"]);m.pointList=a;var _=new b.SmicPolygon({style:m,clickable:this.isClickAble,hoverable:this.isHoverAble});if(this.highlightStyle){_.highlightStyle=this.highlightStyle}_.refOriginalPosition=this.location;_.refDataID=this.data.FID;_.isHoverByRefDataID=this.isMultiHover;if(u.length>0){_.holePolygonPointLists=u}if(this.shapeOptions){(0,y.copyAttributesWithClip)(_,this.shapeOptions)}this.shapes.push(_)}},{key:"updateAndAddShapes",value:function e(){var t=this.getLocalXY(this.lonlat);this.location=t;var r=this.layer.renderer;for(var n=0,i=this.shapes.length;n<i;n++){var o=this.shapes[n];o.refOriginalPosition=t;r.addShape(o)}}},{key:"getShapesCount",value:function e(){return this.shapes.length}},{key:"getLocalXY",value:function e(t){return this.layer.getLocalXY(t)}}]);return t}(g.Theme);t.ThemeVector=x;v.Zondy.Theme.ThemeVector=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataStoreService=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(122);var y=_(v);var g=r(22);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=t.DataStoreService=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));r.fixParams(e);return r}(0,f.default)(t,[{key:"fixParams",value:function e(t){this.params=t;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function e(){var t="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,a=this.networkProtocol;if(r){t=r}else if(o){t=o}else if(a&&n&&i){t=a+"://"+n+":"+i}return t}},{key:"getFullUrl",value:function e(t,r){var n=this.getBaseUrl();var i=n+t+"?"+y.default.stringify(r);return i}},{key:"get",value:function e(t,r,n){var i=this;var o=new m.IgsServiceBase(t,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync()}},{key:"post",value:function e(t,r,n,o){var a=this;var s=new m.IgsServiceBase(t,{eventListeners:{scope:a,processCompleted:n,processFailed:o}});s.processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(g.ServiceBase);t.default=b},function(e,t){var r=0;var n=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(17);var i=r(10);var o=r(38);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e];var a={};a[e]=t(r);n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t,r){e.exports={default:r(242),__esModule:true}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(29).f;var i=r(33);var o=r(14)("toStringTag");e.exports=function(e,t,r){if(e&&!i(e=r?e:e.prototype,o))n(e,o,{configurable:true,value:t})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CAttStruct=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.FldNumber=r.FldNumber!==undefined?r.FldNumber:0;this.FldName=r.FldName!==undefined?r.FldName:null;this.FldType=r.FldType!==undefined?r.FldType:null};t.CAttStruct=o;n.Zondy.Object.CAttStruct=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CLineInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.LinStyleID=r.LinStyleID!==undefined&&r.LinStyleID!==null?r.LinStyleID:1;this.LinStyleID2=r.LinStyleID2!==undefined&&r.LinStyleID2!==null?r.LinStyleID2:0;this.LinWidth=r.LinWidth!==undefined&&r.LinWidth!==null?r.LinWidth:1;this.Xscale=r.Xscale!==undefined&&r.Xscale!==null?r.Xscale:1;this.Yscale=r.Yscale!==undefined&&r.Yscale!==null?r.Yscale:1};t.CLineInfo=o;n.Zondy.Object.CLineInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureGraphicBase=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(6);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,i.default)(this,e);var r=t!==undefined?t:{};(0,u.extend)(this,r);this.GID=r.GID!==undefined&&r.GID!==null?r.GID:0}(0,a.default)(e,[{key:"setGID",value:function e(t){if(t!==undefined&&t!==null){this.GID=t}}}]);return e}();t.FeatureGraphicBase=f;s.Zondy.Object.FeatureGraphicBase=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureSet=undefined;var n=r(0);var i=r(6);var o=r(62);var a=r(154);var s=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.TotalCount=r.TotalCount!==undefined&&r.TotalCount!==null?r.TotalCount:0;this.AttStruct=r.AttStruct!==undefined&&r.AttStruct!==null?r.AttStruct:null;this.SFEleArray=r.SFEleArray!==undefined&&r.SFEleArray!==null?r.SFEleArray:new Array};s.prototype.clear=function(){this.AttStruct=null;this.SFEleArray=new Array};s.prototype.addFeature=function(e){if(e instanceof Array){this.SFEleArray.concat(e)}else{this.SFEleArray.push(e)}};s.prototype.getFeaturesLength=function(){if(this.SFEleArray instanceof Array){return this.SFEleArray.length}else{return 0}};s.prototype.getFeatureByIndex=function(e){if(e>=this.getFeaturesLength()){return null}else{var t=this.SFEleArray[e];if(t instanceof a.Feature){return t}else{return new a.Feature(this.SFEleArray[e])}}};s.prototype.getAttType=function(e){var t;if(this.AttStruct==null){return null}if(typeof e=="number"){t=e}else{t=this.getAttIndexByAttName(e)}if(t==null){return null}else{return this.AttStruct.FldType[t]}};s.prototype.getAttIndexByAttName=function(e){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}var t=this.AttStruct.FldName.length;for(var r=0;r<t;r++){if(this.AttStruct.FldName[r]==e){return r}}return null};s.prototype.getAttNameByIndex=function(e){if(this.AttStruct==null){return null}if(this.AttStruct.FldName==null){return null}if(this.AttStruct.FldName.length<=e){return null}return this.AttStruct.FldName[e]};t.FeatureSet=s;n.Zondy.Object.FeatureSet=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryParameter=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(6);var v=r(175);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};return(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r))}(0,u.default)(t,[{key:"getParameterURL",value:function e(){var t="page="+this.pageIndex.toString();t+="&pageCount="+this.recordNumber.toString();t+="&f="+this.resultFormat;if(this.geometry){t+="&geometry="+this.geometry.toString();t+="&geometryType="+this.geometry.getGeometryType()}if(this.struct){t+="&structs="+(0,d.toJSON)(this.struct)}if(this.where){t+="&where="+this.where}if(this.rule){t+="&rule="+(0,d.toJSON)(this.rule)}if(this.objectIds){t+="&objectIds="+this.objectIds}if(this.orderField){t+="&orderField="+this.orderField}if(this.rtnLabel!==undefined){t+="&rtnLabel="+this.rtnLabel}if(this.fields){t+="&fields="+this.fields}if(this.coordPrecision!==undefined){t+="&coordPrecision="+this.coordPrecision}if(this.isAsc){t+="&isAsc="+this.isAsc}if(this.proj){t+="&srsIds="+this.proj}if(this.guid){t+="&guid="+this.guid}t+="&cursorType="+this.cursorType;return t}},{key:"getParameterObject",value:function e(){var t={};t.f=this.resultFormat;if(this.struct!==null){t.structs=this.struct.toJSON()}if(this.objectIds!==null){t.objectIds=this.objectIds;return t}t.page=this.pageIndex.toString();t.pageCount=this.recordNumber.toString();if(this.geometry!==null){t.geometry=this.geometry.toString();t.geometryType=this.geometry.getGeometryType()}if(this.where!==null){t.where=this.where}if(this.rule!==null){t.rule=this.rule.toJSON()}if(this.orderField!==null){t.orderField=this.orderField}if(this.isAsc!==null){t.isAsc=this.isAsc}t.cursorType=this.cursorType;return t}}]);return t}(v.QueryParameterBase);t.QueryParameter=g;p.Zondy.Service.QueryParameter=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClipBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.tolerance=r.tolerance!==undefined?r.tolerance:1e-4;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;return n}return t}(h.AnalysisBase);t.ClipBase=d;c.Zondy.Service.ClipBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CPntInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.FillFlg=r.FillFlg!==undefined?r.FillFlg:0;this.Height=r.Height!==undefined?r.Height:0;this.Width=r.Width!==undefined?r.Width:0;this.OutClr=r.OutClr!==undefined?r.OutClr:[0,0,0];this.SymID=r.SymID!==undefined?r.SymID:0;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};t.CPntInfo=o;n.Zondy.Object.Theme.CPntInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoFeatureThemeLayer=undefined;var n=r(2);var i=S(n);var o=r(1);var a=S(o);var s=r(5);var u=S(s);var l=r(3);var f=S(l);var c=r(4);var h=S(c);var p=r(11);var d=S(p);var v=r(0);var y=r(126);var g=r(6);var m=r(13);var _=r(52);var b=r(65);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.name=null;n.style=null;n.highlightStyle=null;n.nodesClipPixel=2;n.isHoverAble=false;n.isMultiHover=false;n.isClickAble=true;n.isAllowFeatureStyle=false;(0,g.extend)(n,r);n.cache=r.cache||{};n.cacheFields=r.cacheFields||[];n.maxCacheCount=r.maxCacheCount||0;n.isCustomSetMaxCacheCount=r.isCustomSetMaxCacheCount===undefined?false:r.isCustomSetMaxCacheCount;return n}(0,u.default)(t,[{key:"addFeatures",value:function e(t){var r=this;d.default.Evented.prototype.fire("beforefeaturesadded",{features:t});if(t&&(true||t instanceof b.FeatureSet)){var n=null;var i=t.LabelDots;var o=t.AttStruct;var a=t.SFEleArray;if(a!=null&&a.length>0){for(var s=0;s<a.length;s++){var u=a[s];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[s]&&(u.LabelDot=i[s]);r.features.push(u)}}}if(!this.isCustomSetMaxCacheCount){this.maxCacheCount=this.features.length*5}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"removeFeatures",value:function e(t){this.clearCache();y.ThemeLayer.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function e(){this.clearCache();y.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function e(t){this.clearCache();var r=this.renderer.getHoverOne();var n=null;if(r&&r.refDataID){n=r.refDataID}this.renderer.clearAll();var i=this.features;var o=this.cache;var a=this.cacheFields;var s=this.map.getZoom();var u=this.maxCacheCount;for(var l=0,f=i.length;l<f;l++){var c=i[l];var h=c.FID+"_zoom_"+s.toString();var p;if(o[h]){o[h].updateAndAddShapes()}else{p=this.createThematicFeature(i[l]);if(p.getShapesCount()<1){continue}o[h]=p;a.push(h);if(a.length>u){var d=a[0];a.splice(0,1);delete o[d]}}}this.renderer.render();if(n&&this.isHoverAble&&this.isMultiHover){var v=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(v)}}},{key:"createThematicFeature",value:function e(t){var r=(0,g.copyAttributesWithClip)(this.style);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new _.ThemeVector(t,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"clearCache",value:function e(){this.cache={};this.cacheFields=[]}},{key:"clear",value:function e(){this.renderer.clearAll();this.renderer.refresh();this.removeAllFeatures();this.clearCache()}},{key:"getCacheCount",value:function e(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function e(t){if(!isNaN(t)){this.maxCacheCount=t;this.isCustomSetMaxCacheCount=true}}},{key:"getShapesByFeatureID",value:function e(t){var r=[];var n=this.renderer.getAllShapes();if(!t){return n}for(var i=0,o=n.length;i<o;i++){var a=n[i];if(a.refDataID&&t===a.refDataID){r.push(a)}}return r}}]);return t}(y.ThemeLayer);t.GeoFeatureThemeLayer=x;v.Zondy.Map.GeoFeatureThemeLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Transformable=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(20);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){(0,i.default)(this,e);this.position=[0,0];this.rotation=[0,0,0];this.scale=[1,1,0,0];this.needLocalTransform=false;this.needTransform=false;this.CLASS_NAME="Zondy.LevelRenderer.Transformable";this.lookAt=function(){var e=u.SUtil.Util_vector.create();return function(t){if(!this.transform){this.transform=u.SUtil.Util_matrix.create()}var r=this.transform;u.SUtil.Util_vector.sub(e,t,this.position);if(n(e[0])&&n(e[1])){return}u.SUtil.Util_vector.normalize(e,e);r[2]=e[0]*this.scale[1];r[3]=e[1]*this.scale[1];r[0]=e[1]*this.scale[0];r[1]=-e[0]*this.scale[0];r[4]=this.position[0];r[5]=this.position[1];this.decomposeTransform();function n(e){var t=5e-5;return e>-t&&e<t}}}()}(0,a.default)(e,[{key:"destroy",value:function e(){this.position=null;this.rotation=null;this.scale=null;this.needLocalTransform=null;this.needTransform=null}},{key:"updateNeedTransform",value:function e(){this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1);function t(e){var t=5e-5;return e>t||e<-t}}},{key:"updateTransform",value:function e(){this.updateNeedTransform();if(this.parent){this.needTransform=this.needLocalTransform||this.parent.needTransform}else{this.needTransform=this.needLocalTransform}if(!this.needTransform){return}var t=[0,0];var r=this.transform||u.SUtil.Util_matrix.create();u.SUtil.Util_matrix.identity(r);if(this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0;t[1]=-this.scale[3]||0;var n=o(t[0])||o(t[1]);if(n){u.SUtil.Util_matrix.translate(r,r,t)}u.SUtil.Util_matrix.scale(r,r,this.scale);if(n){t[0]=-t[0];t[1]=-t[1];u.SUtil.Util_matrix.translate(r,r,t)}}if(this.rotation instanceof Array){if(this.rotation[0]!==0){t[0]=-this.rotation[1]||0;t[1]=-this.rotation[2]||0;var i=o(t[0])||o(t[1]);if(i){u.SUtil.Util_matrix.translate(r,r,t)}u.SUtil.Util_matrix.rotate(r,r,this.rotation[0]);if(i){t[0]=-t[0];t[1]=-t[1];u.SUtil.Util_matrix.translate(r,r,t)}}}else{if(this.rotation!==0){u.SUtil.Util_matrix.rotate(r,r,this.rotation)}}if(o(this.position[0])||o(this.position[1])){u.SUtil.Util_matrix.translate(r,r,this.position)}}this.transform=r;if(this.parent&&this.parent.needTransform){if(this.needLocalTransform){u.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform)}else{u.SUtil.Util_matrix.copy(this.transform,this.parent.transform)}}function o(e){var t=5e-5;return e>t||e<-t}}},{key:"setTransform",value:function e(t){if(this.needTransform){var r=this.transform;t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}}},{key:"decomposeTransform",value:function e(){if(!this.transform){return}var t=this.transform;var r=t[0]*t[0]+t[1]*t[1];var n=this.position;var i=this.scale;var o=this.rotation;if(s(r-1)){r=Math.sqrt(r)}var a=t[2]*t[2]+t[3]*t[3];if(s(a-1)){a=Math.sqrt(a)}n[0]=t[4];n[1]=t[5];i[0]=r;i[1]=a;i[2]=i[3]=0;o[0]=Math.atan2(-t[1]/a,t[0]/r);o[1]=o[2]=0;function s(e){var t=5e-5;return e>t||e<-t}}}]);return e}();t.Transformable=f;s.Zondy.LevelRenderer.Transformable=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Curve=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(72);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){(0,i.default)(this,e);this.vector=new u.Vector;this.EPSILON=1e-4;this.THREE_SQRT=Math.sqrt(3);this.ONE_THIRD=1/3;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}(0,a.default)(e,[{key:"isAroundZero",value:function e(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function e(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function e(t,r,n,i,o){var a=1-o;return a*a*(a*t+3*o*r)+o*o*(o*i+3*a*n)}},{key:"cubicDerivativeAt",value:function e(t,r,n,i,o){var a=1-o;return 3*(((r-t)*a+2*(n-r)*o)*a+(i-n)*o*o)}},{key:"cubicRootAt",value:function e(t,r,n,i,o,a){var s=i+3*(r-n)-t;var u=3*(n-r*2+t);var l=3*(r-t);var f=t-o;var c=u*u-3*s*l;var h=u*l-9*s*f;var p=l*l-3*u*f;var d=0;if(this.isAroundZero(c)&&this.isAroundZero(h)){if(this.isAroundZero(u)){a[0]=0}else{var v=-l/u;if(v>=0&&v<=1){a[d++]=v}}}else{var y=h*h-4*c*p;if(this.isAroundZero(y)){var g=h/c;var m=-u/s+g;var _=-g/2;if(m>=0&&m<=1){a[d++]=m}if(_>=0&&_<=1){a[d++]=_}}else if(y>0){var b=Math.sqrt(y);var S=c*u+1.5*s*(-h+b);var x=c*u+1.5*s*(-h-b);if(S<0){S=-Math.pow(-S,this.ONE_THIRD)}else{S=Math.pow(S,this.ONE_THIRD)}if(x<0){x=-Math.pow(-x,this.ONE_THIRD)}else{x=Math.pow(x,this.ONE_THIRD)}var C=(-u-(S+x))/(3*s);if(C>=0&&C<=1){a[d++]=C}}else{var w=(2*c*u-3*s*h)/(2*Math.sqrt(c*c*c));var P=Math.acos(w)/3;var I=Math.sqrt(c);var E=Math.cos(P);var L=(-u-2*I*E)/(3*s);var T=(-u+I*(E+this.THREE_SQRT*Math.sin(P)))/(3*s);var M=(-u+I*(E-this.THREE_SQRT*Math.sin(P)))/(3*s);if(L>=0&&L<=1){a[d++]=L}if(T>=0&&T<=1){a[d++]=T}if(M>=0&&M<=1){a[d++]=M}}}return d}},{key:"cubicExtrema",value:function e(t,r,n,i,o){var a=6*n-12*r+6*t;var s=9*r+3*i-3*t-9*n;var u=3*r-3*t;var l=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(a)){var f=-u/a;if(f>=0&&f<=1){o[l++]=f}}}else{var c=a*a-4*s*u;if(this.isAroundZero(c)){o[0]=-a/(2*s)}else if(c>0){var h=Math.sqrt(c);var p=(-a+h)/(2*s);var d=(-a-h)/(2*s);if(p>=0&&p<=1){o[l++]=p}if(d>=0&&d<=1){o[l++]=d}}}return l}},{key:"cubicSubdivide",value:function e(t,r,n,i,o,a){var s=(r-t)*o+t;var u=(n-r)*o+r;var l=(i-n)*o+n;var f=(u-s)*o+s;var c=(l-u)*o+u;var h=(c-f)*o+f;a[0]=t;a[1]=s;a[2]=f;a[3]=h;a[4]=h;a[5]=c;a[6]=l;a[7]=i}},{key:"cubicProjectPoint",value:function e(t,r,n,i,o,a,s,u,l,f,c){var h=this.vector.create();var p=this.vector.create();var d=this.vector.create();var v;var y=.005;var g=Infinity;h[0]=l;h[1]=f;for(var m=0;m<1;m+=.05){p[0]=this.cubicAt(t,n,o,s,m);p[1]=this.cubicAt(r,i,a,u,m);var _=this.vector.distSquare(h,p);if(_<g){v=m;g=_}}g=Infinity;for(var b=0;b<32;b++){if(y<this.EPSILON){break}var S=v-y;var x=v+y;p[0]=this.cubicAt(t,n,o,s,S);p[1]=this.cubicAt(r,i,a,u,S);var C=this.vector.distSquare(p,h);if(S>=0&&C<g){v=S;g=C}else{d[0]=this.cubicAt(t,n,o,s,x);d[1]=this.cubicAt(r,i,a,u,x);var w=this.vector.distSquare(d,h);if(x<=1&&w<g){v=x;g=w}else{y*=.5}}}if(c){c[0]=this.cubicAt(t,n,o,s,v);c[1]=this.cubicAt(r,i,a,u,v)}return Math.sqrt(g)}},{key:"quadraticAt",value:function e(t,r,n,i){var o=1-i;return o*(o*t+2*i*r)+i*i*n}},{key:"quadraticDerivativeAt",value:function e(t,r,n,i){return 2*((1-i)*(r-t)+i*(n-r))}},{key:"quadraticRootAt",value:function e(t,r,n,i,o){var a=t-2*r+n;var s=2*(r-t);var u=t-i;var l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(s)){var f=-u/s;if(f>=0&&f<=1){o[l++]=f}}}else{var c=s*s-4*a*u;if(this.isAroundZero(c)){var h=-s/(2*a);if(h>=0&&h<=1){o[l++]=h}}else if(c>0){var p=Math.sqrt(c);var d=(-s+p)/(2*a);var v=(-s-p)/(2*a);if(d>=0&&d<=1){o[l++]=d}if(v>=0&&v<=1){o[l++]=v}}}return l}},{key:"quadraticExtremum",value:function e(t,r,n){var i=t+n-2*r;if(i===0){return.5}else{return(t-r)/i}}},{key:"quadraticProjectPoint",value:function e(t,r,n,i,o,a,s,u,l){var f=this.vector.create();var c=this.vector.create();var h=this.vector.create();var p;var d=.005;var v=Infinity;f[0]=s;f[1]=u;for(var y=0;y<1;y+=.05){c[0]=this.quadraticAt(t,n,o,y);c[1]=this.quadraticAt(r,i,a,y);var g=this.vector.distSquare(f,c);if(g<v){p=y;v=g}}v=Infinity;for(var m=0;m<32;m++){if(d<this.EPSILON){break}var _=p-d;var b=p+d;c[0]=this.quadraticAt(t,n,o,_);c[1]=this.quadraticAt(r,i,a,_);var S=this.vector.distSquare(c,f);if(_>=0&&S<v){p=_;v=S}else{h[0]=this.quadraticAt(t,n,o,b);h[1]=this.quadraticAt(r,i,a,b);var x=this.vector.distSquare(h,f);if(b<=1&&x<v){p=b;v=x}else{d*=.5}}}if(l){l[0]=this.quadraticAt(t,n,o,p);l[1]=this.quadraticAt(r,i,a,p)}return Math.sqrt(v)}}]);return e}();t.Curve=f;s.Zondy.LevelRenderer.Tool.Curve=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Vector=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}(0,a.default)(e,[{key:"create",value:function e(t,r){var n=this.ArrayCtor;var i=new n(2);i[0]=t||0;i[1]=r||0;return i}},{key:"copy",value:function e(t,r){t[0]=r[0];t[1]=r[1];return t}},{key:"set",value:function e(t,r,n){t[0]=r;t[1]=n;return t}},{key:"add",value:function e(t,r,n){t[0]=r[0]+n[0];t[1]=r[1]+n[1];return t}},{key:"scaleAndAdd",value:function e(t,r,n,i){t[0]=r[0]+n[0]*i;t[1]=r[1]+n[1]*i;return t}},{key:"sub",value:function e(t,r,n){t[0]=r[0]-n[0];t[1]=r[1]-n[1];return t}},{key:"len",value:function e(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function e(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function e(t,r,n){t[0]=r[0]*n[0];t[1]=r[1]*n[1];return t}},{key:"div",value:function e(t,r,n){t[0]=r[0]/n[0];t[1]=r[1]/n[1];return t}},{key:"dot",value:function e(t,r){return t[0]*r[0]+t[1]*r[1]}},{key:"scale",value:function e(t,r,n){t[0]=r[0]*n;t[1]=r[1]*n;return t}},{key:"normalize",value:function e(t,r){var n=this.len(r);if(n===0){t[0]=0;t[1]=0}else{t[0]=r[0]/n;t[1]=r[1]/n}return t}},{key:"distance",value:function e(t,r){return Math.sqrt((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]))}},{key:"distanceSquare",value:function e(t,r){return(t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1])}},{key:"negate",value:function e(t,r){t[0]=-r[0];t[1]=-r[1];return t}},{key:"lerp",value:function e(t,r,n,i){t[0]=r[0]+i*(n[0]-r[0]);t[1]=r[1]+i*(n[1]-r[1]);return t}},{key:"applyTransform",value:function e(t,r,n){var i=r[0];var o=r[1];t[0]=n[0]*i+n[2]*o+n[4];t[1]=n[1]*i+n[3]*o+n[5];return t}},{key:"min",value:function e(t,r,n){t[0]=Math.min(r[0],n[0]);t[1]=Math.min(r[1],n[1]);return t}},{key:"max",value:function e(t,r,n){t[0]=Math.max(r[0],n[0]);t[1]=Math.max(r[1],n[1]);return t}},{key:"length",value:function e(t){return this.len(t)}},{key:"lengthSquare",value:function e(t){return this.lenSquare(t)}},{key:"dist",value:function e(t,r){return this.distance(t,r)}},{key:"distSquare",value:function e(t,r){return this.distanceSquare(t,r)}}]);return e}();t.Vector=l;s.Zondy.LevelRenderer.Tool.Vector=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Point=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.x=!isNaN(e)?e:0;n.y=!isNaN(r)?r:0;n.r=6;n.CLASS_NAME="Zondy.Feature.ShapeParameters.Point";return n}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.r=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Point=m;v.Zondy.Feature.ShapeParameters.Point=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Polygon=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.pointList=e;r.holePolygonPointLists=null;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.pointList=null;this.holePolygonPointLists=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Polygon=m;v.Zondy.Feature.ShapeParameters.Polygon=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Sector=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u,l){(0,a.default)(this,t);var c=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u,l));c.x=!isNaN(e)?e:0;c.y=!isNaN(r)?r:0;c.r=!isNaN(n)?n:0;c.startAngle=!isNaN(o)?o:0;c.endAngle=!isNaN(s)?s:0;c.r0=!isNaN(u)?u:0;c.clockWise=l;c.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector";return c}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.r=null;this.startAngle=null;this.endAngle=null;this.r0=null;this.clockWise=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Sector=m;v.Zondy.Feature.ShapeParameters.Sector=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicPolygon=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(6);var g=r(16);var m=r(20);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicpolygon";r.holePolygonPointLists=null;if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;this.holePolygonPointLists=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.style;if(r){n=this.getHighlightStyle(n,this.highlightStyle||{})}t.save();this.setContext(t,n);this.setTransform(t);var i=false;if(n.brushType==="fill"||n.brushType==="both"||typeof n.brushType==="undefined"){t.beginPath();if(n.lineType==="dashed"||n.lineType==="dotted"||n.lineType==="dot"||n.lineType==="dash"||n.lineType==="dashot"||n.lineType==="longdash"||n.lineType==="longdashdot"){this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList})}else{this.buildPath(t,n);i=true}t.closePath();this.setCtxGlobalAlpha(t,"fill",n);t.fill();this.setCtxGlobalAlpha(t,"reset",n)}if(n.lineWidth>0&&(n.brushType==="stroke"||n.brushType==="both")){if(!i){t.beginPath();this.buildPath(t,n)}this.setCtxGlobalAlpha(t,"stroke",n);t.stroke();this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style);var o=(0,y.cloneObject)(n);if(o.pointList){if(this.holePolygonPointLists&&this.holePolygonPointLists.length>0){var a=this.holePolygonPointLists;var s=a.length;for(var u=0;u<s;u++){var l=a[u];o.pointList=l;t.globalCompositeOperation="destination-out";i=false;if(o.brushType==="fill"||o.brushType==="both"||typeof o.brushType=="undefined"){t.beginPath();if(o.lineType==="dashed"||o.lineType==="dotted"||o.lineType==="dot"||o.lineType==="dash"||o.lineType==="dashot"||o.lineType==="longdash"||o.lineType==="longdashdot"){this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList})}else{this.buildPath(t,o);i=true}t.closePath();this.setCtxGlobalAlpha(t,"fill",o);t.fill();this.setCtxGlobalAlpha(t,"reset",o)}if(o.lineWidth>0&&(o.brushType==="stroke"||o.brushType==="both")){if(!i){t.beginPath();this.buildPath(t,o)}t.globalCompositeOperation="source-over";this.setCtxGlobalAlpha(t,"stroke",o);t.stroke();this.setCtxGlobalAlpha(t,"reset",o)}else{t.globalCompositeOperation="source-over"}}}}t.restore();return}},{key:"buildPath",value:function e(t,r){if(r.showShadow){t.shadowBlur=r.shadowBlur;t.shadowColor=r.shadowColor;t.shadowOffsetX=r.shadowOffsetX;t.shadowOffsetY=r.shadowOffsetY}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}if(r.smooth&&r.smooth!=="spline"){var o=m.SUtil.SUtil_smoothBezier(i,r.smooth,true,r.smoothConstraint,n);t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var a;var s;var u;var l=i.length;for(var f=0;f<l;f++){a=o[f*2];s=o[f*2+1];u=[i[(f+1)%l][0]+n[0],i[(f+1)%l][1]+n[1]];t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}}else{if(r.smooth==="spline"){i=m.SUtil.SUtil_smoothSpline(i,true,null,n)}if(!r.lineType||r.lineType==="solid"){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var c=1;c<i.length;c++){t.lineTo(i[c][0]+n[0],i[c][1]+n[1])}t.lineTo(i[0][0]+n[0],i[0][1]+n[1])}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var h=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=h;var p=r.lineWidth||1;var d=p;var v=p;if(r.lineType==="dashed"){d*=5;v*=5;if(r.lineCap&&r.lineCap!=="butt"){d-=p;v+=p}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){d=1;v+=p}}if(r.lineType==="dot"){v*=4;if(r.lineCap&&r.lineCap!=="butt"){d=1;v+=p}}if(r.lineType==="dash"){d*=4;v*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;v+=p}}if(r.lineType==="longdash"){d*=8;v*=4;if(r.lineCap&&r.lineCap!=="butt"){d-=p;v+=p}}t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var y=1;y<i.length;y++){m.SUtil.SUtil_dashedLineTo(t,i[y-1][0]+n[0],i[y-1][1]+n[1],i[y][0]+n[0],i[y][1]+n[1],p,[d,v])}m.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],p,[d,v])}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var g=r._dashLength||(r.lineWidth||1)*(r.lineType==="dashed"?5:1);r._dashLength=g;var _=r.lineWidth||1;var b=_;var S=_;var x=_;var C=_;if(r.lineType==="dashot"){b*=4;S*=4;C*=4;if(r.lineCap&&r.lineCap!=="butt"){b-=_;S+=_;x=1;C+=_}}if(r.lineType==="longdashdot"){b*=8;S*=4;C*=4;if(r.lineCap&&r.lineCap!=="butt"){b-=_;S+=_;x=1;C+=_}}t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var w=1;w<i.length;w++){m.SUtil.SUtil_dashedLineTo(t,i[w-1][0]+n[0],i[w-1][1]+n[1],i[w][0]+n[0],i[w][1]+n[1],_,[b,S,x,C])}m.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],_,[b,S,x,C])}}return}},{key:"getRect",value:function e(t,r){var n;if(!r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}n=this.refOriginalPosition}else{n=r}if(t.__rect){return t.__rect}var i=Number.MAX_VALUE;var o=Number.MIN_VALUE;var a=Number.MAX_VALUE;var s=Number.MIN_VALUE;var u=t.pointList;for(var l=0,f=u.length;l<f;l++){if(u[l][0]+n[0]<i){i=u[l][0]+n[0]}if(u[l][0]+n[0]>o){o=u[l][0]+n[0]}if(u[l][1]+n[1]<a){a=u[l][1]+n[1]}if(u[l][1]+n[1]>s){s=u[l][1]+n[1]}}var c;if(t.brushType==="stroke"||t.brushType==="fill"){c=t.lineWidth||1}else{c=0}t.__rect={x:Math.round(i-c/2),y:Math.round(a-c/2),width:o-i+c,height:s-a+c};return t.__rect}}]);return t}(g.Shape);t.SmicPolygon=b;v.Zondy.LevelRenderer.SmicPolygon=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Zondy=undefined;var n=r(11);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var a=t.Zondy=window.Zondy=window.Zondy||{};a.Util=a.Util||{};a.Network=a.Network||{};a.Event=a.Event||{};a.Socket=a.Socket||{};i.default.zondy=i.default.zondy||{}},function(e,t,r){e.exports={default:r(238),__esModule:true}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil;var n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(82)("keys");var i=r(54);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(10);var i=r(12);var o="__core-js_shared__";var a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=t!==undefined?t:{})})("versions",[]).push({version:n.version,mode:r(47)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(30);var i=r(12).document;var o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(30);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&typeof(r=e.toString)=="function"&&!n(i=r.call(e)))return i;if(typeof(r=e.valueOf)=="function"&&!n(i=r.call(e)))return i;if(!t&&typeof(r=e.toString)=="function"&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){e.exports={default:r(244),__esModule:true}},function(e,t,r){var n=r(59);var i=r(57);var o=r(34);var a=r(85);var s=r(33);var u=r(138);var l=Object.getOwnPropertyDescriptor;t.f=r(25)?l:function e(t,r){t=o(t);r=a(r,true);if(u)try{return l(t,r)}catch(e){}if(s(t,r))return i(!n.f.call(t,r),t[r])}},function(e,t,r){t.f=r(14)},function(e,t,r){var n=r(12);var i=r(10);var o=r(47);var a=r(88);var s=r(29).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});if(e.charAt(0)!="_"&&!(e in t))s(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(21);var i=r(251);var o=r(83);var a=r(81)("IE_PROTO");var s=function(){};var u="prototype";var l=function(){var e=r(84)("iframe");var t=o.length;var n="<";var i=">";var a;e.style.display="none";r(141).appendChild(e);e.src="javascript:";a=e.contentWindow.document;a.open();a.write(n+"script"+i+"document.F=Object"+n+"/script"+i);a.close();l=a.F;while(t--)delete l[u][o[t]];return l()};e.exports=Object.create||function e(t,r){var o;if(t!==null){s[u]=n(t);o=new s;s[u]=null;o[a]=t}else o=l();return r===undefined?o:i(o,r)}},function(e,t,r){var n=r(135);var i=r(83).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,i)}},function(e,t,r){e.exports={default:r(252),__esModule:true}},function(e,t,r){"use strict";var n=r(256)(true);r(143)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var t=this._i;var r;if(t>=e.length)return{value:undefined,done:true};r=n(e,t);this._i+=r.length;return{value:r,done:false}})},function(e,t,r){r(258);var n=r(12);var i=r(35);var o=r(49);var a=r(14)("toStringTag");var s=("CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,"+"DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,"+"MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,"+"SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,"+"TextTrackList,TouchList").split(",");for(var u=0;u<s.length;u++){var l=s[u];var f=n[l];var c=f&&f.prototype;if(c&&!c[a])i(c,a,l);o[l]=o.Array}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AnyLine=undefined;var n=r(0);var i=r(6);var o=function e(t,r){var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Arcs=t!==undefined&&t!==null?t:null};t.AnyLine=o;n.Zondy.Object.AnyLine=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CPointInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined&&r.Angle!==null?r.Angle:1;this.Color=r.Color!==undefined&&r.Color!==null?r.Color:1;this.SymHeight=r.SymHeight!==undefined&&r.SymHeight!==null?r.SymHeight:1;this.SymID=r.SymID!==undefined&&r.SymID!==null?r.SymID:1;this.SymWidth=r.SymWidth!==undefined&&r.SymWidth!==null?r.SymWidth:1};t.CPointInfo=o;n.Zondy.Object.CPointInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRegionInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.EndColor=r.EndColor!==undefined&&r.EndColor!==null?r.EndColor:1;this.FillColor=r.FillColor!==undefined&&r.FillColor!==null?r.FillColor:1;this.FillMode=r.FillMode!==undefined&&r.FillMode!==null?r.FillMode:0;this.OutPenWidth=r.OutPenWidth!==undefined&&r.OutPenWidth!==null?r.OutPenWidth:1;this.PatAngle=r.PatAngle!==undefined&&r.PatAngle!==null?r.PatAngle:1;this.PatColor=r.PatColor!==undefined&&r.PatColor!==null?r.PatColor:1;this.PatHeight=r.PatHeight!==undefined&&r.PatHeight!==null?r.PatHeight:1;this.PatID=r.PatID!==undefined&&r.PatID!==null?r.PatID:1;this.PatWidth=r.PatWidth!==undefined&&r.PatWidth!==null?r.PatWidth:1};t.CRegionInfo=o;n.Zondy.Object.CRegionInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Rectangle=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(5);var u=d(s);var l=r(3);var f=d(l);var c=r(4);var h=d(c);var p=r(36);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,h.default)(t,e);function t(e,r,n,o,s){(0,a.default)(this,t);var u=s?s:{};var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,u));l.xmin=e;l.xmax=n;l.ymin=r;l.ymax=o;return l}(0,u.default)(t,[{key:"setByOL",value:function e(t){if(t===undefined||t===null){return}this.xmin=t[0];this.ymin=t[1];this.xmax=t[2];this.ymax=t[3]}},{key:"toString",value:function e(){return""+this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function e(){return"rect"}},{key:"convertToBound",value:function e(){var t=[this.xmin,this.ymin,this.xmax,this.ymax];return t}},{key:"intersectsBounds",value:function e(t,r){if(typeof r==="boolean"){r={inclusive:r}}r=r||{};if(r.inclusive===null){r.inclusive=true}var n=this;var i=false;var o=n.xmin===t.xmax||n.xmax===t.xmin||n.ymax===t.ymin||n.ymin===t.ymax;if(r.inclusive||!o){var a=t.ymin>=n.ymin&&t.ymin<=n.ymax||n.ymin>=t.ymin&&n.ymin<=t.ymax;var s=t.ymax>=n.ymin&&t.ymax<=n.ymax||n.ymax>t.ymin&&n.ymax<t.ymax;var u=t.xmin>=n.xmin&&t.xmin<=n.xmax||n.xmin>=t.xmin&&n.xmin<=t.xmax;var l=t.xmax>=n.xmin&&t.xmax<=n.xmax||n.xmax>=t.xmin&&n.xmax<=t.xmax;i=(a||s)&&(u||l)}return i}}]);return t}(p.Tangram);t.Rectangle=v;Zondy.Object.Rectangle=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GPoint=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(64);var v=r(19);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=n?n:{};var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,o));if(e!==undefined&&e!==null&&r!==undefined&&r!==null){s.Dot=new v.Point2D(e,r)}return s}(0,u.default)(t,[{key:"setDot",value:function e(t){this.Dot=t!==undefined&&t!==null?t:null}}]);return t}(d.FeatureGraphicBase);t.GPoint=g;p.Zondy.Object.GPoint=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GLine=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(64);var v=r(95);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.Line=e!==undefined&&e!==null?e:null;return o}(0,u.default)(t,[{key:"setLine",value:function e(t){this.Line=t!==undefined&&t!==null?t:null}}]);return t}(d.FeatureGraphicBase);t.GLine=g;p.Zondy.Object.GLine=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GRegion=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(64);var v=r(95);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.Rings=e!==undefined&&e!==null&&Array.isArray(e)?e:null;return o}(0,u.default)(t,[{key:"setRings",value:function e(t){this.Rings=t!==undefined&&t!==null?t:null}}]);return t}(d.FeatureGraphicBase);t.GRegion=g;p.Zondy.Object.GRegion=g},function(e,t,r){e.exports={default:r(291),__esModule:true}},function(e,t,r){var n=r(48);var i=r(297);var o=r(141);var a=r(84);var s=r(12);var u=s.process;var l=s.setImmediate;var f=s.clearImmediate;var c=s.MessageChannel;var h=s.Dispatch;var p=0;var d={};var v="onreadystatechange";var y,g,m;var _=function(){var e=+this;if(d.hasOwnProperty(e)){var t=d[e];delete d[e];t()}};var b=function(e){_.call(e.data)};if(!l||!f){l=function e(t){var r=[];var n=1;while(arguments.length>n)r.push(arguments[n++]);d[++p]=function(){i(typeof t=="function"?t:Function(t),r)};y(p);return p};f=function e(t){delete d[t]};if(r(46)(u)=="process"){y=function(e){u.nextTick(n(_,e,1))}}else if(h&&h.now){y=function(e){h.now(n(_,e,1))}}else if(c){g=new c;m=g.port2;g.port1.onmessage=b;y=n(m.postMessage,m,1)}else if(s.addEventListener&&typeof postMessage=="function"&&!s.importScripts){y=function(e){s.postMessage(e+"","*")};s.addEventListener("message",b,false)}else if(v in a("script")){y=function(e){o.appendChild(a("script"))[v]=function(){o.removeChild(this);_.call(e)}}}else{y=function(e){setTimeout(n(_,e,1),0)}}}e.exports={set:l,clear:f}},function(e,t,r){"use strict";var n=r(56);function i(e){var t,r;this.promise=new e(function(e,n){if(t!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");t=e;r=n});this.resolve=n(t);this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EditServiceBase=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(22);var p=r(6);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.guid=r.guid!==undefined?r.guid:(0,p.newGuid)();n.baseUrl="igs/rest/mrfs";n.f=r.f!==undefined?r.f:"json";return n}return t}(h.ServiceBase);t.EditServiceBase=v;c.Zondy.Service.EditServiceBase=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryFeatureStruct=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t?t:{};(0,i.extend)(this,r);this.IncludeAttribute=r.IncludeAttribute!==undefined&&typeof r.IncludeAttribute==="boolean"?r.IncludeAttribute:true;this.IncludeGeometry=r.IncludeGeometry!==undefined&&typeof r.IncludeGeometry==="boolean"?r.IncludeGeometry:false;this.IncludeWebGraphic=r.IncludeWebGraphic!==undefined&&typeof r.IncludeWebGraphic==="boolean"?r.IncludeWebGraphic:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};t.QueryFeatureStruct=o;n.Zondy.Service.QueryFeatureStruct=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VPoint=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(3);var u=b(s);var l=r(5);var f=b(l);var c=r(4);var h=b(c);var p=r(108);var d=r(18);var v=r(109);var y=_(v);var g=r(110);var m=_(g);function _(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);(0,f.default)(t,null,[{key:"getPointsCoordinates",value:function e(t){var r=[];for(var n=0;n<t.length;n++){for(var i=0;i<t[n].geometry.length;i++){r.push(t[n].geometry[i].coordinates)}}return r}},{key:"getPointsCenter",value:function e(t){var r=[],n=void 0;for(var i=0;i<t.length;i++){r.push(y.point(t[i]))}n=m.center(m.featureCollection(r));return n}}]);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.type="Point";(0,d.extend)(r,e);return r}return t}(p.Geometry);t.VPoint=S;Zondy.Service.VPoint=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Geometry=undefined;var n=r(1);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var a=function e(){(0,i.default)(this,e);this.coordinates=[]};t.Geometry=a},function(e,t,r){"use strict";r.r(t);r.d(t,"earthRadius",function(){return n});r.d(t,"factors",function(){return i});r.d(t,"unitsFactors",function(){return o});r.d(t,"areaFactors",function(){return a});r.d(t,"feature",function(){return s});r.d(t,"geometry",function(){return u});r.d(t,"point",function(){return l});r.d(t,"points",function(){return f});r.d(t,"polygon",function(){return c});r.d(t,"polygons",function(){return h});r.d(t,"lineString",function(){return p});r.d(t,"lineStrings",function(){return d});r.d(t,"featureCollection",function(){return v});r.d(t,"multiLineString",function(){return y});r.d(t,"multiPoint",function(){return g});r.d(t,"multiPolygon",function(){return m});r.d(t,"geometryCollection",function(){return _});r.d(t,"round",function(){return b});r.d(t,"radiansToLength",function(){return S});r.d(t,"lengthToRadians",function(){return x});r.d(t,"lengthToDegrees",function(){return C});r.d(t,"bearingToAzimuth",function(){return w});r.d(t,"radiansToDegrees",function(){return P});r.d(t,"degreesToRadians",function(){return I});r.d(t,"convertLength",function(){return E});r.d(t,"convertArea",function(){return L});r.d(t,"isNumber",function(){return T});r.d(t,"isObject",function(){return M});r.d(t,"validateBBox",function(){return O});r.d(t,"validateId",function(){return A});var n=6371008.8;var i={centimeters:n*100,centimetres:n*100,degrees:n/111325,feet:n*3.28084,inches:n*39.37,kilometers:n/1e3,kilometres:n/1e3,meters:n,metres:n,miles:n/1609.344,millimeters:n*1e3,millimetres:n*1e3,nauticalmiles:n/1852,radians:1,yards:n*1.0936};var o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133};var a={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(e,t,r){if(r===void 0){r={}}var n={type:"Feature"};if(r.id===0||r.id){n.id=r.id}if(r.bbox){n.bbox=r.bbox}n.properties=t||{};n.geometry=e;return n}function u(e,t,r){if(r===void 0){r={}}switch(e){case"Point":return l(t).geometry;case"LineString":return p(t).geometry;case"Polygon":return c(t).geometry;case"MultiPoint":return g(t).geometry;case"MultiLineString":return y(t).geometry;case"MultiPolygon":return m(t).geometry;default:throw new Error(e+" is invalid")}}function l(e,t,r){if(r===void 0){r={}}if(!e){throw new Error("coordinates is required")}if(!Array.isArray(e)){throw new Error("coordinates must be an Array")}if(e.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!T(e[0])||!T(e[1])){throw new Error("coordinates must contain numbers")}var n={type:"Point",coordinates:e};return s(n,t,r)}function f(e,t,r){if(r===void 0){r={}}return v(e.map(function(e){return l(e,t)}),r)}function c(e,t,r){if(r===void 0){r={}}for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var a=0;a<o[o.length-1].length;a++){if(o[o.length-1][a]!==o[0][a]){throw new Error("First and last Position are not equivalent.")}}}var u={type:"Polygon",coordinates:e};return s(u,t,r)}function h(e,t,r){if(r===void 0){r={}}return v(e.map(function(e){return c(e,t)}),r)}function p(e,t,r){if(r===void 0){r={}}if(e.length<2){throw new Error("coordinates must be an array of two or more positions")}var n={type:"LineString",coordinates:e};return s(n,t,r)}function d(e,t,r){if(r===void 0){r={}}return v(e.map(function(e){return p(e,t)}),r)}function v(e,t){if(t===void 0){t={}}var r={type:"FeatureCollection"};if(t.id){r.id=t.id}if(t.bbox){r.bbox=t.bbox}r.features=e;return r}function y(e,t,r){if(r===void 0){r={}}var n={type:"MultiLineString",coordinates:e};return s(n,t,r)}function g(e,t,r){if(r===void 0){r={}}var n={type:"MultiPoint",coordinates:e};return s(n,t,r)}function m(e,t,r){if(r===void 0){r={}}var n={type:"MultiPolygon",coordinates:e};return s(n,t,r)}function _(e,t,r){if(r===void 0){r={}}var n={type:"GeometryCollection",geometries:e};return s(n,t,r)}function b(e,t){if(t===void 0){t=0}if(t&&!(t>=0)){throw new Error("precision must be a positive number")}var r=Math.pow(10,t||0);return Math.round(e*r)/r}function S(e,t){if(t===void 0){t="kilometers"}var r=i[t];if(!r){throw new Error(t+" units is invalid")}return e*r}function x(e,t){if(t===void 0){t="kilometers"}var r=i[t];if(!r){throw new Error(t+" units is invalid")}return e/r}function C(e,t){return P(x(e,t))}function w(e){var t=e%360;if(t<0){t+=360}return t}function P(e){var t=e%(2*Math.PI);return t*180/Math.PI}function I(e){var t=e%360;return t*Math.PI/180}function E(e,t,r){if(t===void 0){t="kilometers"}if(r===void 0){r="kilometers"}if(!(e>=0)){throw new Error("length must be a positive number")}return S(x(e,t),r)}function L(e,t,r){if(t===void 0){t="meters"}if(r===void 0){r="kilometers"}if(!(e>=0)){throw new Error("area must be a positive number")}var n=a[t];if(!n){throw new Error("invalid original units")}var i=a[r];if(!i){throw new Error("invalid final units")}return e/n*i}function T(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function M(e){return!!e&&e.constructor===Object}function O(e){if(!e){throw new Error("bbox is required")}if(!Array.isArray(e)){throw new Error("bbox must be an Array")}if(e.length!==4&&e.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}e.forEach(function(e){if(!T(e)){throw new Error("bbox must only contain numbers")}})}function A(e){if(!e){throw new Error("id is required")}if(["string","number"].indexOf(typeof e)===-1){throw new Error("id must be a number or a string")}}},function(e,t,r){(function(e){!function(e,r){true?r(t):undefined}(this,function(t){"use strict";var r=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*r,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:r/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function s(e,t,r){switch(e){case"Point":return u(t).geometry;case"LineString":return h(t).geometry;case"Polygon":return f(t).geometry;case"MultiPoint":return y(t).geometry;case"MultiLineString":return v(t).geometry;case"MultiPolygon":return g(t).geometry;default:throw new Error(e+" is invalid")}}function u(e,t,r){if(void 0===r&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!L(e[0])||!L(e[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),d(e.map(function(e){return u(e,t)}),r)}function f(e,t,r){void 0===r&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:e},t,r)}function c(e,t,r){return void 0===r&&(r={}),d(e.map(function(e){return f(e,t)}),r)}function h(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:e},t,r)}function p(e,t,r){return void 0===r&&(r={}),d(e.map(function(e){return h(e,t)}),r)}function d(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function v(e,t,r){return void 0===r&&(r={}),a({type:"MultiLineString",coordinates:e},t,r)}function y(e,t,r){return void 0===r&&(r={}),a({type:"MultiPoint",coordinates:e},t,r)}function g(e,t,r){return void 0===r&&(r={}),a({type:"MultiPolygon",coordinates:e},t,r)}function m(e,t,r){return void 0===r&&(r={}),a({type:"GeometryCollection",geometries:e},t,r)}function _(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function b(e,t){void 0===t&&(t="kilometers");var r=n[t];if(!r)throw new Error(t+" units is invalid");return e*r}function S(e,t){void 0===t&&(t="kilometers");var r=n[t];if(!r)throw new Error(t+" units is invalid");return e/r}function x(e,t){return w(S(e,t))}function C(e){var t=e%360;return t<0&&(t+=360),t}function w(e){return 180*(e%(2*Math.PI))/Math.PI}function P(e){return e%360*Math.PI/180}function I(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return b(S(e,t),r)}function E(e,t,r){if(void 0===t&&(t="meters"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=o[t];if(!n)throw new Error("invalid original units");var i=o[r];if(!i)throw new Error("invalid final units");return e/n*i}function L(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function T(e){return!!e&&e.constructor===Object}function M(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!L(e))throw new Error("bbox must only contain numbers")})}function O(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}var A=Object.freeze({__proto__:null,earthRadius:r,factors:n,unitsFactors:i,areaFactors:o,feature:a,geometry:s,point:u,points:l,polygon:f,polygons:c,lineString:h,lineStrings:p,featureCollection:d,multiLineString:v,multiPoint:y,multiPolygon:g,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:S,lengthToDegrees:x,bearingToAzimuth:C,radiansToDegrees:w,degreesToRadians:P,convertLength:I,convertArea:E,isNumber:L,isObject:T,validateBBox:M,validateId:O});function N(e,t,r){if(null!==e)for(var n,i,o,a,s,u,l,f,c=0,h=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,g=0;g<y;g++){s=(f=!!(l=d?e.features[g].geometry:v?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=f?l.geometries[m]:l)){u=a.coordinates;var S=a.type;switch(c=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===t(u,h,g,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===t(u[n],h,g,_,b))return!1;h++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-c;i++){if(!1===t(u[n][i],h,g,_,b))return!1;h++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-c;o++){if(!1===t(u[n][i][o],h,g,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===N(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function R(e,t,r,n){var i=r;return N(e,function(e,n,o,a,s){i=0===n&&void 0===r?e:t(i,e,n,o,a,s)},n),i}function k(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function D(e,t,r){var n=r;return k(e,function(e,i){n=0===i&&void 0===r?e:t(n,e,i)}),n}function F(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function B(e,t,r){var n=r;return F(e,function(e,i){n=0===i&&void 0===r?e:t(n,e,i)}),n}function j(e){var t=[];return N(e,function(e){t.push(e)}),t}function U(e,t){var r,n,i,o,a,s,u,l,f,c,h=0,p="FeatureCollection"===e.type,d="Feature"===e.type,v=p?e.features.length:1;for(r=0;r<v;r++){for(s=p?e.features[r].geometry:d?e.geometry:e,l=p?e.features[r].properties:d?e.properties:{},f=p?e.features[r].bbox:d?e.bbox:void 0,c=p?e.features[r].id:d?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,h,l,f,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===t(o.geometries[n],h,l,f,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,f,c))return!1;h++}}function G(e,t,r){var n=r;return U(e,function(e,i,o,a,s){n=0===i&&void 0===r?e:t(n,e,i,o,a,s)}),n}function V(e,t){U(e,function(e,r,n,i,o){var s,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(a(e,n,{bbox:i,id:o}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<e.coordinates.length;l++){var f=e.coordinates[l];if(!1===t(a({type:s,coordinates:f},n),r,l))return!1}})}function q(e,t,r){var n=r;return V(e,function(e,i,o){n=0===i&&0===o&&void 0===r?e:t(n,e,i,o)}),n}function z(e,t){V(e,function(e,r,n){var i=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,l=0;return!1!==N(e,function(o,f,c,p,d){if(void 0===a||r>s||p>u||d>l)return a=o,s=r,u=p,l=d,void(i=0);var v=h([a,o],e.properties);if(!1===t(v,r,n,d,i))return!1;i++,a=o})&&void 0}}})}function H(e,t,r){var n=r,i=!1;return z(e,function(e,o,a,s,u){n=!1===i&&void 0===r?e:t(n,e,o,a,s,u),i=!0}),n}function W(e,t){if(!e)throw new Error("geojson is required");V(e,function(e,r,n){if(null!==e.geometry){var i=e.geometry.type,o=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===t(h(o[a],e.properties),r,n,a))return!1}}})}function Z(e,t,r){var n=r;return W(e,function(e,i,o,a){n=0===i&&void 0===r?e:t(n,e,i,o,a)}),n}function X(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r,n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),h([u[a],u[a+1]],s,t);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),h([u[o][a],u[o][a+1]],s,t);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),h([u[i][a],u[i][a+1]],s,t);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),h([u[i][o][a],u[i][o][a+1]],s,t)}throw new Error("geojson is invalid")}function Y(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r,n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return u(l,s,t);case"MultiPoint":return i<0&&(i=l.length+i),u(l[i],s,t);case"LineString":return a<0&&(a=l.length+a),u(l[a],s,t);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),u(l[o][a],s,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),u(l[i][a],s,t);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),a<0&&(a=l[i][o].length-a),u(l[i][o][a],s,t)}throw new Error("geojson is invalid")}var Q=Object.freeze({__proto__:null,coordAll:j,coordEach:N,coordReduce:R,featureEach:F,featureReduce:B,findPoint:Y,findSegment:X,flattenEach:V,flattenReduce:q,geomEach:U,geomReduce:G,lineEach:W,lineReduce:Z,propEach:k,propReduce:D,segmentEach:z,segmentReduce:H});function J(e){var t=[1/0,1/0,-1/0,-1/0];return N(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}function K(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ee(e){if(e.length>1&&L(e[0])&&L(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return ee(e[0]);throw new Error("coordinates must only contain numbers")}function te(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)}function re(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)}function ne(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0,i=e.features;n<i.length;n++){var o=i[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}}function ie(e){return"Feature"===e.type?e.geometry:e}function oe(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}J.default=J;var ae=Object.freeze({__proto__:null,getCoord:K,getCoords:$,containsNumber:ee,geojsonType:te,featureOf:re,collectionOf:ne,getGeom:ie,getType:oe}),se=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function fe(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ce=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,i=fe(e),o=1;o<arguments.length;o++){for(var a in r=Object(arguments[o]))ue.call(r,a)&&(i[a]=r[a]);if(se){n=se(r);for(var s=0;s<n.length;s++)le.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i},he={successCallback:null,verbose:!1},pe={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function de(e,t,r){r=r||{};for(var n=Object.keys(he),i=0;i<n.length;i++){var o=n[i],a=r[o];a=null!=a?a:he[o],pe[o]=a}pe.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+t);var s=function(e){var t=[],r=0,n=1e-7;return e.cells.forEach(function(i,o){i.forEach(function(i,a){if(void 0!==i&&(5!==(p=i).cval&&10!==p.cval)&&!ye(i)){var s=function(e,t,r){var n,i,o=e.length,a=[],s=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],f=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=e[t][r],h=c.cval,p=l[h],d=me(c,p);a.push([r+d[0],t+d[1]]),p=f[h],d=me(c,p),a.push([r+d[0],t+d[1]]),ge(c);var v=r+s[h],y=t+u[h],g=h;for(;v>=0&&y>=0&&y<o&&(v!=r||y!=t)&&void 0!==(c=e[y][v]);){if(0===(h=c.cval)||15===h)return{path:a,info:"mergeable"};p=f[h],n=s[h],i=u[h],5!==h&&10!==h||(5===h?c.flipped?-1===u[g]?(p="left",n=-1,i=0):(p="right",n=1,i=0):-1===s[g]&&(p="bottom",n=0,i=-1):10===h&&(c.flipped?-1===s[g]?(p="top",n=0,i=1):(p="bottom",n=0,i=-1):1===u[g]&&(p="left",n=-1,i=0))),d=me(c,p),a.push([v+d[0],y+d[1]]),ge(c),v+=n,y+=i,g=h}return{path:a,info:"closed"}}(e.cells,o,a),u=!1;if("mergeable"===s.info)for(var l=s.path[s.path.length-1][0],f=s.path[s.path.length-1][1],c=r-1;c>=0;c--)if(Math.abs(t[c][0][0]-l)<=n&&Math.abs(t[c][0][1]-f)<=n){for(var h=s.path.length-2;h>=0;--h)t[c].unshift(s.path[h]);u=!0;break}u||(t[r++]=s.path)}var p})}),t}(function(e,t){for(var r=e.length-1,n=e[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var a=0;a<n;++a){var s=0,u=e[o+1][a],l=e[o+1][a+1],f=e[o][a+1],c=e[o][a];if(!(isNaN(u)||isNaN(l)||isNaN(f)||isNaN(c))){s|=u>=t?8:0,s|=l>=t?4:0,s|=f>=t?2:0;var h,p,d,v,y=!1;if(5===(s|=c>=t?1:0)||10===s){var g=(u+l+f+c)/4;5===s&&g<t?(s=10,y=!0):10===s&&g<t&&(s=5,y=!0)}if(0!==s&&15!==s)h=p=d=v=.5,1===s?(d=1-ve(t,u,c),p=1-ve(t,f,c)):2===s?(p=ve(t,c,f),v=1-ve(t,l,f)):3===s?(d=1-ve(t,u,c),v=1-ve(t,l,f)):4===s?(h=ve(t,u,l),v=ve(t,f,l)):5===s?(h=ve(t,u,l),v=ve(t,f,l),p=1-ve(t,f,c),d=1-ve(t,u,c)):6===s?(p=ve(t,c,f),h=ve(t,u,l)):7===s?(d=1-ve(t,u,c),h=ve(t,u,l)):8===s?(d=ve(t,c,u),h=1-ve(t,l,u)):9===s?(p=1-ve(t,f,c),h=1-ve(t,l,u)):10===s?(h=1-ve(t,l,u),v=1-ve(t,l,f),p=ve(t,c,f),d=ve(t,c,u)):11===s?(h=1-ve(t,l,u),v=1-ve(t,l,f)):12===s?(d=ve(t,c,u),v=ve(t,f,l)):13===s?(p=1-ve(t,f,c),v=ve(t,f,l)):14===s?(d=ve(t,c,u),p=ve(t,c,f)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:y,top:h,right:v,bottom:p,left:d}}}}return i}(e,t));return"function"==typeof pe.successCallback&&pe.successCallback(s),s}function ve(e,t,r){return(e-t)/(r-t)}function ye(e){return 0===e.cval||15===e.cval}function ge(e){ye(e)||5===e.cval||10===e.cval||(e.cval=15)}function me(e,t){return"top"===t?[e.top,1]:"bottom"===t?[e.bottom,0]:"right"===t?[1,e.right]:"left"===t?[0,e.left]:void 0}function _e(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;ne(e,"Point","input must contain Points");for(var o=function(e,t){var r={};return F(e,function(e){var t=$(e)[1];r[t]||(r[t]=[]),r[t].push(e)}),Object.keys(r).map(function(e){return r[e].sort(function(e,t){return $(e)[0]-$(t)[0]})}).sort(function(e,r){return t?$(e[0])[1]-$(r[0])[1]:$(r[0])[1]-$(e[0])[1]})}(e,n),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],f=0;f<u.length;f++){var c=u[f];c.properties[r]?l.push(c.properties[r]):l.push(0),!0===i&&(c.properties.matrixPosition=[s,f])}a.push(l)}return a}var be=xe,Se=xe;function xe(e,t,r,n,i){Ce(e,t,r||0,n||e.length-1,i||Pe)}function Ce(e,t,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=t-r+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Ce(e,t,Math.max(r,Math.floor(t-a*u/o+l)),Math.min(n,Math.floor(t+(o-a)*u/o+l)),i)}var f=e[t],c=r,h=n;for(we(e,r,t),i(e[n],f)>0&&we(e,r,n);c<h;){for(we(e,c,h),c++,h--;i(e[c],f)<0;)c++;for(;i(e[h],f)>0;)h--}0===i(e[r],f)?we(e,r,h):we(e,++h,n),h<=t&&(r=h+1),t<=h&&(n=h-1)}}function we(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Pe(e,t){return e<t?-1:e>t?1:0}be.default=Se;var Ie=Le,Ee=Le;function Le(e,t){if(!(this instanceof Le))return new Le(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function Te(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function Me(e,t){Oe(e,0,e.children.length,t,e)}function Oe(e,t,r,n,i){i||(i=je(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=t;a<r;a++)o=e.children[a],Ae(i,e.leaf?n(o):o);return i}function Ae(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Ne(e,t){return e.minX-t.minX}function Re(e,t){return e.minY-t.minY}function ke(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function De(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Fe(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Be(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function je(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ue(e,t,r,n,i){for(var o,a=[t,r];a.length;)(r=a.pop())-(t=a.pop())<=n||(o=t+Math.ceil((r-t)/n/2)*n,be(e,o,t,r,i),a.push(t,o,o,r))}function Ge(e){var t={exports:{}};return e(t,t.exports),t.exports}Le.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!Be(e,t))return r;for(var i,o,a,s,u=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],Be(e,s=t.leaf?n(a):a)&&(t.leaf?r.push(a):Fe(e,s)?this._all(a,r):u.push(a));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Be(e,t))return!1;for(var n,i,o,a,s=[];t;){for(n=0,i=t.children.length;n<i;n++)if(o=t.children[n],Be(e,a=t.leaf?r(o):o)){if(t.leaf||Fe(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=je([]),this},remove:function(e,t){if(!e)return this;for(var r,n,i,o,a=this.data,s=this.toBBox(e),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf&&-1!==(i=Te(e,a.children,t)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Fe(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:Ne,compareMinY:Re,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i,o=r-t+1,a=this._maxEntries;if(o<=a)return Me(i=je(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(i=je([])).leaf=!1,i.height=n;var s,u,l,f,c=Math.ceil(o/a),h=c*Math.ceil(Math.sqrt(a));for(Ue(e,t,r,h,this.compareMinX),s=t;s<=r;s+=h)for(Ue(e,s,l=Math.min(s+h-1,r),c,this.compareMinY),u=s;u<=l;u+=c)f=Math.min(u+c-1,l),i.children.push(this._build(e,u,f,n-1));return Me(i,this.toBBox),i},_chooseSubtree:function(e,t,r,n){for(var i,o,a,s,u,l,f,c,h,p;n.push(t),!t.leaf&&n.length-1!==r;){for(f=c=1/0,i=0,o=t.children.length;i<o;i++)u=ke(a=t.children[i]),h=e,p=a,(l=(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-u)<c?(c=l,f=u<f?u:f,s=a):l===c&&u<f&&(f=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),Ae(a,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),a=je(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,Me(r,this.toBBox),Me(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(e,t){this.data=je([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Me(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,o,a,s,u,l,f,c,h,p,d,v,y;for(u=l=1/0,n=t;n<=r-t;n++)i=Oe(e,0,n,this.toBBox),o=Oe(e,n,r,this.toBBox),c=i,h=o,p=void 0,d=void 0,v=void 0,y=void 0,p=Math.max(c.minX,h.minX),d=Math.max(c.minY,h.minY),v=Math.min(c.maxX,h.maxX),y=Math.min(c.maxY,h.maxY),a=Math.max(0,v-p)*Math.max(0,y-d),s=ke(i)+ke(o),a<u?(u=a,f=n,l=s<l?s:l):a===u&&s<l&&(l=s,f=n);return f},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:Ne,i=e.leaf?this.compareMinY:Re;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i,o,a=this.toBBox,s=Oe(e,0,t,a),u=Oe(e,r-t,r,a),l=De(s)+De(u);for(i=t;i<r-t;i++)o=e.children[i],Ae(s,e.leaf?a(o):o),l+=De(s);for(i=r-t-1;i>=t;i--)o=e.children[i],Ae(u,e.leaf?a(o):o),l+=De(u);return l},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)Ae(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Me(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},Ie.default=Ee;var Ve=function(e,t,r){var n=e*t,i=qe*e,o=i-(i-e),a=e-o,s=qe*t,u=s-(s-t),l=t-u,f=a*l-(n-o*u-a*u-o*l);if(r)return r[0]=f,r[1]=n,r;return[f,n]},qe=+(Math.pow(2,27)+1);var ze=function(e,t){var r=0|e.length,n=0|t.length;if(1===r&&1===n)return function(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);if(i)return[i,r];return[r]}(e[0],t[0]);var i,o,a=new Array(r+n),s=0,u=0,l=0,f=Math.abs,c=e[u],h=f(c),p=t[l],d=f(p);h<d?(o=c,(u+=1)<r&&(c=e[u],h=f(c))):(o=p,(l+=1)<n&&(p=t[l],d=f(p)));u<r&&h<d||l>=n?(i=c,(u+=1)<r&&(c=e[u],h=f(c))):(i=p,(l+=1)<n&&(p=t[l],d=f(p)));var v,y,g=i+o,m=g-i,_=o-m,b=_,S=g;for(;u<r&&l<n;)h<d?(i=c,(u+=1)<r&&(c=e[u],h=f(c))):(i=p,(l+=1)<n&&(p=t[l],d=f(p))),(_=(o=b)-(m=(g=i+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v;for(;u<r;)(_=(o=b)-(m=(g=(i=c)+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v,(u+=1)<r&&(c=e[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v,(l+=1)<n&&(p=t[l]);b&&(a[s++]=b);S&&(a[s++]=S);s||(a[s++]=0);return a.length=s,a};var He=function(e,t,r){var n=e+t,i=n-e,o=t-i,a=e-(n-i);if(r)return r[0]=a+o,r[1]=n,r;return[a+o,n]};var We=function(e,t){var r=e.length;if(1===r){var n=Ve(e[0],t);return n[0]?n:[n[1]]}var i=new Array(2*r),o=[.1,.1],a=[.1,.1],s=0;Ve(e[0],t,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<r;++u){Ve(e[u],t,a);var l=o[1];He(l,a[0],o),o[0]&&(i[s++]=o[0]);var f=a[1],c=o[1],h=f+c,p=c-(h-f);o[1]=h,p&&(i[s++]=p)}o[1]&&(i[s++]=o[1]);0===s&&(i[s++]=0);return i.length=s,i};var Ze=function(e,t){var r=0|e.length,n=0|t.length;if(1===r&&1===n)return function(e,t){var r=e+t,n=r-e,i=e-(r-n)+(t-n);if(i)return[i,r];return[r]}(e[0],-t[0]);var i,o,a=new Array(r+n),s=0,u=0,l=0,f=Math.abs,c=e[u],h=f(c),p=-t[l],d=f(p);h<d?(o=c,(u+=1)<r&&(c=e[u],h=f(c))):(o=p,(l+=1)<n&&(p=-t[l],d=f(p)));u<r&&h<d||l>=n?(i=c,(u+=1)<r&&(c=e[u],h=f(c))):(i=p,(l+=1)<n&&(p=-t[l],d=f(p)));var v,y,g=i+o,m=g-i,_=o-m,b=_,S=g;for(;u<r&&l<n;)h<d?(i=c,(u+=1)<r&&(c=e[u],h=f(c))):(i=p,(l+=1)<n&&(p=-t[l],d=f(p))),(_=(o=b)-(m=(g=i+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v;for(;u<r;)(_=(o=b)-(m=(g=(i=c)+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v,(u+=1)<r&&(c=e[u]);for(;l<n;)(_=(o=b)-(m=(g=(i=p)+o)-i))&&(a[s++]=_),b=S-((v=S+g)-(y=v-S))+(g-y),S=v,(l+=1)<n&&(p=-t[l]);b&&(a[s++]=b);S&&(a[s++]=S);s||(a[s++]=0);return a.length=s,a};var Xe=Ge(function(e){function t(e,t){for(var r=new Array(e.length-1),n=1;n<e.length;++n)for(var i=r[n-1]=new Array(e.length-1),o=0,a=0;o<e.length;++o)o!==t&&(i[a++]=e[n][o]);return r}function r(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",r(e.slice(0,t)),",",r(e.slice(t)),")"].join("")}function n(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var i=[],o=0;o<e.length;++o)i.push(["scale(",r(n(t(e,o))),",",(a=o,1&a?"-":""),e[0][o],")"].join(""));return i;var a}function i(e){for(var i=[],o=[],a=function(e){for(var t=new Array(e),r=0;r<e;++r){t[r]=new Array(e);for(var n=0;n<e;++n)t[r][n]=["m",n,"[",e-r-1,"]"].join("")}return t}(e),s=[],u=0;u<e;++u)0==(1&u)?i.push.apply(i,n(t(a,u))):o.push.apply(o,n(t(a,u))),s.push("m"+u);var l=r(i),f=r(o),c="orientation"+e+"Exact",h=["function ",c,"(",s.join(),"){var p=",l,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return new Function("sum","prod","scale","sub",h)(ze,Ve,We,Ze)}var o=i(3),a=i(4),s=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,r){var n,i=(e[1]-r[1])*(t[0]-r[0]),a=(e[0]-r[0])*(t[1]-r[1]),s=i-a;if(i>0){if(a<=0)return s;n=i+a}else{if(!(i<0))return s;if(a>=0)return s;n=-(i+a)}var u=3.3306690738754716e-16*n;return s>=u||s<=-u?s:o(e,t,r)},function(e,t,r,n){var i=e[0]-n[0],o=t[0]-n[0],s=r[0]-n[0],u=e[1]-n[1],l=t[1]-n[1],f=r[1]-n[1],c=e[2]-n[2],h=t[2]-n[2],p=r[2]-n[2],d=o*f,v=s*l,y=s*u,g=i*f,m=i*l,_=o*u,b=c*(d-v)+h*(y-g)+p*(m-_),S=7.771561172376103e-16*((Math.abs(d)+Math.abs(v))*Math.abs(c)+(Math.abs(y)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>S||-b>S?b:a(e,t,r,n)}];function u(e){var t=s[e.length];return t||(t=s[e.length]=i(e.length)),t.apply(void 0,e)}!function(){for(;s.length<=5;)s.push(i(s.length));for(var t=[],r=["slow"],n=0;n<=5;++n)t.push("a"+n),r.push("o"+n);var o=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)o.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(o.join(""));var a=Function.apply(void 0,r);for(e.exports=a.apply(void 0,[u].concat(s)),n=0;n<=5;++n)e.exports[n]=s[n]}()}),Ye=function(e){var t=e.length;if(t<3){for(var r=new Array(t),n=0;n<t;++n)r[n]=n;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:r}var i=new Array(t);for(n=0;n<t;++n)i[n]=n;i.sort(function(t,r){var n=e[t][0]-e[r][0];return n||e[t][1]-e[r][1]});var o=[i[0],i[1]],a=[i[0],i[1]];for(n=2;n<t;++n){for(var s=i[n],u=e[s],l=o.length;l>1&&Qe(e[o[l-2]],e[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(s),l=a.length;l>1&&Qe(e[a[l-2]],e[a[l-1]],u)>=0;)l-=1,a.pop();a.push(s)}r=new Array(a.length+o.length-2);for(var f=0,c=(n=0,o.length);n<c;++n)r[f++]=o[n];for(var h=a.length-2;h>0;--h)r[f++]=a[h];return r},Qe=Xe[3];var Je=$e,Ke=$e;function $e(e,t){if(!(this instanceof $e))return new $e(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||et,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function et(e,t){return e<t?-1:e>t?1:0}$e.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n},_down:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,i=t[e];e<n;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&r(t[a],s)<0&&(o=a,s=t[a]),r(s,i)>=0)break;t[e]=s,e=o}t[e]=i}},Je.default=Ke;var tt=function(e,t){for(var r=e[0],n=e[1],i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],u=t[o][1],l=t[a][0],f=t[a][1];u>n!=f>n&&r<(l-s)*(n-u)/(f-u)+s&&(i=!i)}return i},rt=Xe[3],nt=ot,it=ot;function ot(e,t,r){t=Math.max(0,void 0===t?2:t),r=r||0;for(var n,i=function(e){for(var t=e[0],r=e[0],n=e[0],i=e[0],o=0;o<e.length;o++){var a=e[o];a[0]<t[0]&&(t=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>i[1]&&(i=a)}var s=[t,r,n,i],u=s.slice();for(o=0;o<e.length;o++)tt(e[o],s)||u.push(e[o]);var l=Ye(u),f=[];for(o=0;o<l.length;o++)f.push(u[l[o]]);return f}(e),o=Ie(16,["[0]","[1]","[0]","[1]"]).load(e),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),n=ht(u,n),a.push(n)}var l=Ie(16);for(s=0;s<a.length;s++)l.insert(ct(a[s]));for(var f=t*t,c=r*r;a.length;){var h=a.shift(),p=h.p,d=h.next.p,v=pt(p,d);if(!(v<c)){var y=v/f;(u=at(o,h.prev.p,p,d,h.next.next.p,y,l))&&Math.min(pt(u,p),pt(u,d))<=y&&(a.push(h),a.push(ht(u,h)),o.remove(u),l.remove(h),l.insert(ct(h)),l.insert(ct(h.next)))}}h=n;var g=[];do{g.push(h.p),h=h.next}while(h!==n);return g.push(h.p),g}function at(e,t,r,n,i,o,a){for(var s=new Je(null,st),u=e.data;u;){for(var l=0;l<u.children.length;l++){var f=u.children[l],c=u.leaf?dt(f,r,n):ut(r,n,f);c>o||s.push({node:f,dist:c})}for(;s.length&&!s.peek().node.children;){var h=s.pop(),p=h.node,d=dt(p,t,r),v=dt(p,n,i);if(h.dist<d&&h.dist<v&&ft(r,p,a)&&ft(n,p,a))return p}(u=s.pop())&&(u=u.node)}return null}function st(e,t){return e.dist-t.dist}function ut(e,t,r){if(lt(e,r)||lt(t,r))return 0;var n=vt(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=vt(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=vt(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var a=vt(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===a?0:Math.min(n,i,o,a)}function lt(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function ft(e,t,r){for(var n,i,o,a,s=Math.min(e[0],t[0]),u=Math.min(e[1],t[1]),l=Math.max(e[0],t[0]),f=Math.max(e[1],t[1]),c=r.search({minX:s,minY:u,maxX:l,maxY:f}),h=0;h<c.length;h++)if(n=c[h].p,i=c[h].next.p,o=e,n!==(a=t)&&i!==o&&rt(n,i,o)>0!=rt(n,i,a)>0&&rt(o,a,n)>0!=rt(o,a,i)>0)return!1;return!0}function ct(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function ht(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function pt(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function dt(e,t,r){var n=t[0],i=t[1],o=r[0]-n,a=r[1]-i;if(0!==o||0!==a){var s=((e[0]-n)*o+(e[1]-i)*a)/(o*o+a*a);s>1?(n=r[0],i=r[1]):s>0&&(n+=o*s,i+=a*s)}return(o=e[0]-n)*o+(a=e[1]-i)*a}function vt(e,t,r,n,i,o,a,s){var u,l,f,c,h=r-e,p=n-t,d=a-i,v=s-o,y=e-i,g=t-o,m=h*h+p*p,_=h*d+p*v,b=d*d+v*v,S=h*y+p*g,x=d*y+v*g,C=m*b-_*_,w=C,P=C;0===C?(l=0,w=1,c=x,P=b):(c=m*x-_*S,(l=_*x-b*S)<0?(l=0,c=x,P=b):l>w&&(l=w,c=x+_,P=b)),c<0?(c=0,-S<0?l=0:-S>m?l=w:(l=-S,w=m)):c>P&&(c=P,-S+_<0?l=0:-S+_>m?l=w:(l=-S+_,w=m));var I=(1-(f=0===c?0:c/P))*i+f*a-((1-(u=0===l?0:l/w))*e+u*r),E=(1-f)*o+f*s-((1-u)*t+u*n);return I*I+E*E}function yt(e,t){void 0===t&&(t={}),t.concavity=t.concavity||1/0;var r=[];if(N(e,function(e){r.push([e[0],e[1]])}),!r.length)return null;var n=nt(r,t.concavity);return n.length>3?f([n]):null}function gt(e,t,r){if(void 0===r&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var n=K(e),i=ie(t),o=i.type,a=t.bbox,s=i.coordinates;if(a&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(n,a))return!1;"Polygon"===o&&(s=[s]);for(var u=!1,l=0;l<s.length&&!u;l++)if(mt(n,s[l][0],r.ignoreBoundary)){for(var f=!1,c=1;c<s[l].length&&!f;)mt(n,s[l][c],!r.ignoreBoundary)&&(f=!0),c++;f||(u=!0)}return u}function mt(e,t,r){var n=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,o=t.length-1;i<t.length;o=i++){var a=t[i][0],s=t[i][1],u=t[o][0],l=t[o][1];if(e[1]*(a-u)+s*(u-e[0])+l*(e[0]-a)==0&&(a-e[0])*(u-e[0])<=0&&(s-e[1])*(l-e[1])<=0)return!r;s>e[1]!=l>e[1]&&e[0]<(u-a)*(e[1]-s)/(l-s)+a&&(n=!n)}return n}function _t(e,t){var r=[];return F(e,function(e){var n=!1;if("Point"===e.geometry.type)U(t,function(t){gt(e,t)&&(n=!0)}),n&&r.push(e);else{if("MultiPoint"!==e.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];U(t,function(t){N(e,function(e){gt(e,t)&&(n=!0,i.push(e))})}),n&&r.push(y(i))}}),d(r)}function bt(e,t,r){void 0===r&&(r={});var n=K(e),i=K(t),o=P(i[1]-n[1]),a=P(i[0]-n[0]),s=P(n[1]),u=P(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function St(e,t){var r=!1;return d(function(e){if(e.length<3)return[];e.sort(Ct);var t,r,n,i,o,a,s=e.length-1,u=e[s].x,l=e[0].x,f=e[s].y,c=f,h=1e-12;for(;s--;)e[s].y<f&&(f=e[s].y),e[s].y>c&&(c=e[s].y);var p,d=l-u,v=c-f,y=d>v?d:v,g=.5*(l+u),m=.5*(c+f),_=[new xt({__sentinel:!0,x:g-20*y,y:m-y},{__sentinel:!0,x:g,y:m+20*y},{__sentinel:!0,x:g+20*y,y:m-y})],b=[],S=[];s=e.length;for(;s--;){for(S.length=0,p=_.length;p--;)(d=e[s].x-_[p].x)>0&&d*d>_[p].r?(b.push(_[p]),_.splice(p,1)):d*d+(v=e[s].y-_[p].y)*v>_[p].r||(S.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(wt(S),p=S.length;p;)r=S[--p],t=S[--p],n=e[s],i=r.x-t.x,o=r.y-t.y,a=2*(i*(n.y-r.y)-o*(n.x-r.x)),Math.abs(a)>h&&_.push(new xt(t,r,n))}Array.prototype.push.apply(b,_),s=b.length;for(;s--;)(b[s].a.__sentinel||b[s].b.__sentinel||b[s].c.__sentinel)&&b.splice(s,1);return b}(e.features.map(function(e){var n={x:e.geometry.coordinates[0],y:e.geometry.coordinates[1]};return t?n.z=e.properties[t]:3===e.geometry.coordinates.length&&(r=!0,n.z=e.geometry.coordinates[2]),n})).map(function(e){var t=[e.a.x,e.a.y],n=[e.b.x,e.b.y],i=[e.c.x,e.c.y],o={};return r?(t.push(e.a.z),n.push(e.b.z),i.push(e.c.z)):o={a:e.a.z,b:e.b.z,c:e.c.z},f([[t,n,i,t]],o)}))}nt.default=it;var xt=function(e,t,r){this.a=e,this.b=t,this.c=r;var n,i,o=t.x-e.x,a=t.y-e.y,s=r.x-e.x,u=r.y-e.y,l=o*(e.x+t.x)+a*(e.y+t.y),f=s*(e.x+r.x)+u*(e.y+r.y),c=2*(o*(r.y-t.y)-a*(r.x-t.x));this.x=(u*l-a*f)/c,this.y=(o*f-s*l)/c,n=this.x-e.x,i=this.y-e.y,this.r=n*n+i*i};function Ct(e,t){return t.x-e.x}function wt(e){var t,r,n,i,o,a=e.length;e:for(;a;)for(r=e[--a],t=e[--a],n=a;n;)if(o=e[--n],t===(i=e[--n])&&r===o||t===o&&r===i){e.splice(a,2),e.splice(n,2),a-=2;continue e}}function Pt(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return It(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(e){return It(e)}),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Lt(e);default:throw new Error("unknown GeoJSON type")}}function It(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=Et(e.properties),t.geometry=Lt(e.geometry),t}function Et(e){var t={};return e?(Object.keys(e).forEach(function(r){var n=e[r];"object"==typeof n?null===n?t[r]=null:Array.isArray(n)?t[r]=n.map(function(e){return e}):t[r]=Et(n):t[r]=n}),t):t}function Lt(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map(function(e){return Lt(e)}),t):(t.coordinates=Tt(e.coordinates),t)}function Tt(e){var t=e;return"object"!=typeof t[0]?t.slice():t.map(function(e){return Tt(e)})}function Mt(e,t){if(void 0===t&&(t={}),!T(t=t||{}))throw new Error("options is invalid");var r=t.mutate;if("FeatureCollection"!==oe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(e=Pt(e));var n=[],i=Z(e,function(e,t){var r=function(e,t){var r,n=e.geometry.coordinates,i=t.geometry.coordinates,o=Ot(n[0]),a=Ot(n[n.length-1]),s=Ot(i[0]),u=Ot(i[i.length-1]);if(o===u)r=i.concat(n.slice(1));else if(s===a)r=n.concat(i.slice(1));else if(o===s)r=n.slice(1).reverse().concat(i);else{if(a!==u)return null;r=n.concat(i.reverse().slice(1))}return h(r)}(e,t);return r||(n.push(e),t)});return i&&n.push(i),n.length?1===n.length?n[0]:v(n.map(function(e){return e.coordinates})):null}function Ot(e){return e[0].toString()+","+e[1].toString()}function At(e){return e}function Nt(e,t){var r=function(e){if(null==e)return At;var t,r,n=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=r=0);var u=2,l=e.length,f=new Array(l);for(f[0]=(t+=e[0])*n+o,f[1]=(r+=e[1])*i+a;u<l;)f[u]=e[u],++u;return f}}(e.transform),n=e.arcs;function i(e,t){t.length&&t.pop();for(var i=n[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(r(i[o],o));e<0&&function(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}(t,a)}function o(e){return r(e)}function a(e){for(var t=[],r=0,n=e.length;r<n;++r)i(e[r],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var r,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(e)};case"Point":r=o(t.coordinates);break;case"MultiPoint":r=t.coordinates.map(o);break;case"LineString":r=a(t.arcs);break;case"MultiLineString":r=t.arcs.map(a);break;case"Polygon":r=u(t.arcs);break;case"MultiPolygon":r=t.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(t)}function Rt(e,t){var r={},n={},i={},o=[],a=-1;function s(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){r[e<0?~e:e]=1}),o.push(i)}}return t.forEach(function(r,n){var i,o=e.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=r,t[n]=i)}),t.forEach(function(t){var r,o,a=function(t){var r,n=e.arcs[t<0?~t:t],i=n[0];e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1];return t<0?[r,i]:[i,r]}(t),s=a[0],u=a[1];if(r=i[s])if(delete i[r.end],r.push(t),r.end=u,o=n[u]){delete n[o.start];var l=o===r?r:r.concat(o);n[l.start=r.start]=i[l.end=o.end]=l}else n[r.start]=i[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(t),r.start=s,o=i[s]){delete i[o.end];var f=o===r?r:o.concat(r);n[f.start=o.start]=i[f.end=r.end]=f}else n[r.start]=i[r.end]=r;else n[(r=[t]).start=s]=i[r.end=u]=r}),s(i,n),s(n,i),t.forEach(function(e){r[e<0?~e:e]||o.push([e])}),o}function kt(e,t){var r={},n=[],i=[];function o(e){e.forEach(function(t){t.forEach(function(t){(r[t=t<0?~t:t]||(r[t]=[])).push(e)})}),n.push(e)}function a(t){return function(e){for(var t,r=-1,n=e.length,i=e[n-1],o=0;++r<n;)t=i,i=e[r],o+=t[0]*i[1]-t[1]*i[0];return Math.abs(o)}(Nt(e,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":o(t.arcs);break;case"MultiPolygon":t.arcs.forEach(o)}}),n.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,i.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){r[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),n.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var n,i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){r[e<0?~e:e].length<2&&i.push(e)})})}),(n=(i=Rt(e,i)).length)>1)for(var o,s,u=1,l=a(i[0]);u<n;++u)(o=a(i[u]))>l&&(s=i[0],i[0]=i[u],i[u]=s,l=o);return i}).filter(function(e){return e.length>0})}}var Dt=Object.prototype.hasOwnProperty;function Ft(e,t,r,n,i,o){3===arguments.length&&(n=o=Array,i=null);for(var a=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=new o(e),u=e-1,l=0;l<e;++l)a[l]=i;function f(n,o){for(var l=t(n)&u,f=a[l],c=0;f!=i;){if(r(f,n))return s[l]=o;if(++c>=e)throw new Error("full hashmap");f=a[l=l+1&u]}return a[l]=n,s[l]=o,o}function c(n,o){for(var l=t(n)&u,f=a[l],c=0;f!=i;){if(r(f,n))return s[l];if(++c>=e)throw new Error("full hashmap");f=a[l=l+1&u]}return a[l]=n,s[l]=o,o}function h(n,o){for(var l=t(n)&u,f=a[l],c=0;f!=i;){if(r(f,n))return s[l];if(++c>=e)break;f=a[l=l+1&u]}return o}function p(){for(var e=[],t=0,r=a.length;t<r;++t){var n=a[t];n!=i&&e.push(n)}return e}return{set:f,maybeSet:c,get:h,keys:p}}function Bt(e,t){return e[0]===t[0]&&e[1]===t[1]}var jt=new ArrayBuffer(16),Ut=new Float64Array(jt),Gt=new Uint32Array(jt);function Vt(e){Ut[0]=e[0],Ut[1]=e[1];var t=Gt[0]^Gt[1];return 2147483647&(t=t<<5^t>>7^Gt[2]^Gt[3])}function qt(e){var t,r,n,i,o=e.coordinates,a=e.lines,s=e.rings,u=function(){for(var e=Ft(1.4*o.length,S,x,Int32Array,-1,Int32Array),t=new Int32Array(o.length),r=0,n=o.length;r<n;++r)t[r]=e.maybeSet(r,r);return t}(),l=new Int32Array(o.length),f=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int8Array(o.length),p=0;for(t=0,r=o.length;t<r;++t)l[t]=f[t]=c[t]=-1;for(t=0,r=a.length;t<r;++t){var d=a[t],v=d[0],y=d[1];for(n=u[v],i=u[++v],++p,h[n]=1;++v<=y;)b(t,n,n=i,i=u[v]);++p,h[i]=1}for(t=0,r=o.length;t<r;++t)l[t]=-1;for(t=0,r=s.length;t<r;++t){var g=s[t],m=g[0]+1,_=g[1];for(b(t,u[_-1],n=u[m-1],i=u[m]);++m<=_;)b(t,n,n=i,i=u[m])}function b(e,t,r,n){if(l[r]!==e){l[r]=e;var i=f[r];if(i>=0){var o=c[r];i===t&&o===n||i===n&&o===t||(++p,h[r]=1)}else f[r]=t,c[r]=n}}function S(e){return Vt(o[e])}function x(e,t){return Bt(o[e],o[t])}l=f=c=null;var C,w=function(e,t,r,n,i){3===arguments.length&&(n=Array,i=null);for(var o=new n(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),a=e-1,s=0;s<e;++s)o[s]=i;function u(n){for(var s=t(n)&a,u=o[s],l=0;u!=i;){if(r(u,n))return!0;if(++l>=e)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=n,!0}function l(n){for(var s=t(n)&a,u=o[s],l=0;u!=i;){if(r(u,n))return!0;if(++l>=e)break;u=o[s=s+1&a]}return!1}function f(){for(var e=[],t=0,r=o.length;t<r;++t){var n=o[t];n!=i&&e.push(n)}return e}return{add:u,has:l,values:f}}(1.4*p,Vt,Bt);for(t=0,r=o.length;t<r;++t)h[C=u[t]]&&w.add(o[C]);return w}function zt(e,t,r,n){Ht(e,t,r),Ht(e,t,t+n),Ht(e,t+n,r)}function Ht(e,t,r){for(var n,i=t+(r---t>>1);t<i;++t,--r)n=e[t],e[t]=e[r],e[r]=n}function Wt(e){var t,r,n={};for(t in e)n[t]=null==(r=e[t])?{type:null}:("FeatureCollection"===r.type?Zt:"Feature"===r.type?Xt:Yt)(r);return n}function Zt(e){var t={type:"GeometryCollection",geometries:e.features.map(Xt)};return null!=e.bbox&&(t.bbox=e.bbox),t}function Xt(e){var t,r=Yt(e.geometry);for(t in null!=e.id&&(r.id=e.id),null!=e.bbox&&(r.bbox=e.bbox),e.properties){r.properties=e.properties;break}return r}function Yt(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(Yt)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function Qt(e,t){var r=function(e){var t=1/0,r=1/0,n=-1/0,i=-1/0;function o(e){null!=e&&Dt.call(a,e.type)&&a[e.type](e)}var a={GeometryCollection:function(e){e.geometries.forEach(o)},Point:function(e){s(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(s)},LineString:function(e){u(e.arcs)},MultiLineString:function(e){e.arcs.forEach(u)},Polygon:function(e){e.arcs.forEach(u)},MultiPolygon:function(e){e.arcs.forEach(l)}};function s(e){var o=e[0],a=e[1];o<t&&(t=o),o>n&&(n=o),a<r&&(r=a),a>i&&(i=a)}function u(e){e.forEach(s)}function l(e){e.forEach(u)}for(var f in e)o(e[f]);return n>=t&&i>=r?[t,r,n,i]:void 0}(e=Wt(e)),n=t>0&&r&&function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=o-n?(r-1)/(o-n):1,u=a-i?(r-1)/(a-i):1;function l(e){return[Math.round((e[0]-n)*s),Math.round((e[1]-i)*u)]}function f(e,t){for(var r,o,a,l,f,c=-1,h=0,p=e.length,d=new Array(p);++c<p;)r=e[c],l=Math.round((r[0]-n)*s),f=Math.round((r[1]-i)*u),l===o&&f===a||(d[h++]=[o=l,a=f]);for(d.length=h;h<t;)h=d.push([d[0][0],d[0][1]]);return d}function c(e){return f(e,2)}function h(e){return f(e,4)}function p(e){return e.map(h)}function d(e){null!=e&&Dt.call(v,e.type)&&v[e.type](e)}var v={GeometryCollection:function(e){e.geometries.forEach(d)},Point:function(e){e.coordinates=l(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(l)},LineString:function(e){e.arcs=c(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(c)},Polygon:function(e){e.arcs=p(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(p)}};for(var y in e)d(e[y]);return{scale:[1/s,1/u],translate:[n,i]}}(e,r,t),i=function(e){var t,r,n,i,o=e.coordinates,a=e.lines,s=e.rings,u=a.length+s.length;for(delete e.lines,delete e.rings,n=0,i=a.length;n<i;++n)for(t=a[n];t=t.next;)++u;for(n=0,i=s.length;n<i;++n)for(r=s[n];r=r.next;)++u;var l=Ft(2*u*1.4,Vt,Bt),f=e.arcs=[];for(n=0,i=a.length;n<i;++n){t=a[n];do{c(t)}while(t=t.next)}for(n=0,i=s.length;n<i;++n)if((r=s[n]).next)do{c(r)}while(r=r.next);else h(r);function c(e){var t,r,n,i,a,s,u,c;if(n=l.get(t=o[e[0]]))for(u=0,c=n.length;u<c;++u)if(p(i=n[u],e))return e[0]=i[0],void(e[1]=i[1]);if(a=l.get(r=o[e[1]]))for(u=0,c=a.length;u<c;++u)if(d(s=a[u],e))return e[1]=s[0],void(e[0]=s[1]);n?n.push(e):l.set(t,[e]),a?a.push(e):l.set(r,[e]),f.push(e)}function h(e){var t,r,n,i,a;if(r=l.get(o[e[0]]))for(i=0,a=r.length;i<a;++i){if(v(n=r[i],e))return e[0]=n[0],void(e[1]=n[1]);if(y(n,e))return e[0]=n[1],void(e[1]=n[0])}if(r=l.get(t=o[e[0]+g(e)]))for(i=0,a=r.length;i<a;++i){if(v(n=r[i],e))return e[0]=n[0],void(e[1]=n[1]);if(y(n,e))return e[0]=n[1],void(e[1]=n[0])}r?r.push(e):l.set(t,[e]),f.push(e)}function p(e,t){var r=e[0],n=t[0],i=e[1];if(r-i!=n-t[1])return!1;for(;r<=i;++r,++n)if(!Bt(o[r],o[n]))return!1;return!0}function d(e,t){var r=e[0],n=t[0],i=e[1],a=t[1];if(r-i!=n-a)return!1;for(;r<=i;++r,--a)if(!Bt(o[r],o[a]))return!1;return!0}function v(e,t){var r=e[0],n=t[0],i=e[1]-r;if(i!==t[1]-n)return!1;for(var a=g(e),s=g(t),u=0;u<i;++u)if(!Bt(o[r+(u+a)%i],o[n+(u+s)%i]))return!1;return!0}function y(e,t){var r=e[0],n=t[0],i=e[1],a=t[1],s=i-r;if(s!==a-n)return!1;for(var u=g(e),l=s-g(t),f=0;f<s;++f)if(!Bt(o[r+(f+u)%s],o[a-(f+l)%s]))return!1;return!0}function g(e){for(var t=e[0],r=e[1],n=t,i=n,a=o[n];++n<r;){var s=o[n];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=n,a=s)}return i-t}return e}(function(e){var t,r,n,i=qt(e),o=e.coordinates,a=e.lines,s=e.rings;for(r=0,n=a.length;r<n;++r)for(var u=a[r],l=u[0],f=u[1];++l<f;)i.has(o[l])&&(t={0:l,1:u[1]},u[1]=l,u=u.next=t);for(r=0,n=s.length;r<n;++r)for(var c=s[r],h=c[0],p=h,d=c[1],v=i.has(o[h]);++p<d;)i.has(o[p])&&(v?(t={0:p,1:c[1]},c[1]=p,c=c.next=t):(zt(o,h,d,d-p),o[d]=o[h],v=!0,p=h));return e}(function(e){var t=-1,r=[],n=[],i=[];function o(e){e&&Dt.call(a,e.type)&&a[e.type](e)}var a={GeometryCollection:function(e){e.geometries.forEach(o)},LineString:function(e){e.arcs=s(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(s)},Polygon:function(e){e.arcs=e.arcs.map(u)},MultiPolygon:function(e){e.arcs=e.arcs.map(l)}};function s(e){for(var n=0,o=e.length;n<o;++n)i[++t]=e[n];var a={0:t-o+1,1:t};return r.push(a),a}function u(e){for(var r=0,o=e.length;r<o;++r)i[++t]=e[r];var a={0:t-o+1,1:t};return n.push(a),a}function l(e){return e.map(u)}for(var f in e)o(e[f]);return{type:"Topology",coordinates:i,lines:r,rings:n,objects:e}}(e))),o=i.coordinates,a=Ft(1.4*i.arcs.length,Jt,Kt);function s(e){e&&Dt.call(u,e.type)&&u[e.type](e)}e=i.objects,i.bbox=r,i.arcs=i.arcs.map(function(e,t){return a.set(e,t),o.slice(e[0],e[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(e){e.geometries.forEach(s)},LineString:function(e){e.arcs=l(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(l)},Polygon:function(e){e.arcs=e.arcs.map(l)},MultiPolygon:function(e){e.arcs=e.arcs.map(f)}};function l(e){var t=[];do{var r=a.get(e);t.push(e[0]<e[1]?r:~r)}while(e=e.next);return t}function f(e){return e.map(l)}for(var c in e)s(e[c]);return n&&(i.transform=n,i.arcs=function(e){for(var t=-1,r=e.length;++t<r;){for(var n,i,o=e[t],a=0,s=1,u=o.length,l=o[0],f=l[0],c=l[1];++a<u;)n=(l=o[a])[0],i=l[1],n===f&&i===c||(o[s++]=[n-f,i-c],f=n,c=i);1===s&&(o[s++]=[0,0]),o.length=s}return e}(i.arcs)),i}function Jt(e){var t,r=e[0],n=e[1];return n<r&&(t=r,r=n,n=t),r+31*n}function Kt(e,t){var r,n=e[0],i=e[1],o=t[0],a=t[1];return i<n&&(r=n,n=i,i=r),a<o&&(r=o,o=a,a=r),n===o&&i===a}function $t(e,t){if(void 0===t&&(t={}),"FeatureCollection"!==oe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==t.mutate&&void 0!==t.mutate||(e=Pt(e));var r=[];V(e,function(e){r.push(e.geometry)});var n=Qt({geoms:m(r).geometry});return function(e){return Nt(e,kt.apply(this,arguments))}(n,n.objects.geoms.geometries)}function er(e,t){if(void 0===t&&(t={}),!T(t=t||{}))throw new Error("options is invalid");var r=t.mutate;if("FeatureCollection"!==oe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(e=Pt(e));var n=function(e){var t={};V(e,function(e){t[e.geometry.type]=!0});var r=Object.keys(t);if(1===r.length)return r[0];return null}(e);if(!n)throw new Error("geojson must be homogenous");var i=e;switch(n){case"LineString":return Mt(i,t);case"Polygon":return $t(i,t);default:throw new Error(n+" is not supported")}}function tr(e,t){void 0===t&&(t={});var r="object"==typeof t?t.mutate:t;if(!e)throw new Error("geojson is required");var n=oe(e),i=[];switch(n){case"LineString":i=rr(e);break;case"MultiLineString":case"Polygon":$(e).forEach(function(e){i.push(rr(e))});break;case"MultiPolygon":$(e).forEach(function(e){var t=[];e.forEach(function(e){t.push(rr(e))}),i.push(t)});break;case"Point":return e;case"MultiPoint":var o={};$(e).forEach(function(e){var t=e.join("-");Object.prototype.hasOwnProperty.call(o,t)||(i.push(e),o[t]=!0)});break;default:throw new Error(n+" geometry not supported")}return e.coordinates?!0===r?(e.coordinates=i,e):{type:n,coordinates:i}:!0===r?(e.geometry.coordinates=i,e):a({type:n,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function rr(e){var t=$(e);if(2===t.length&&!nr(t[0],t[1]))return t;var r=[],n=t.length-1,i=r.length;r.push(t[0]);for(var o=1;o<n;o++){var a=r[r.length-1];t[o][0]===a[0]&&t[o][1]===a[1]||(r.push(t[o]),(i=r.length)>2&&ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1))}if(r.push(t[t.length-1]),i=r.length,nr(t[0],t[t.length-1])&&i<4)throw new Error("invalid polygon");return ir(r[i-3],r[i-1],r[i-2])&&r.splice(r.length-2,1),r}function nr(e,t){return e[0]===t[0]&&e[1]===t[1]}function ir(e,t,r){var n=r[0],i=r[1],o=e[0],a=e[1],s=t[0],u=t[1],l=s-o,f=u-a;return 0===(n-o)*f-(i-a)*l&&(Math.abs(l)>=Math.abs(f)?l>0?o<=n&&n<=s:s<=n&&n<=o:f>0?a<=i&&i<=u:u<=i&&i<=a)}function or(e,t,r){var n=t.x,i=t.y,o=r.x-n,a=r.y-i;if(0!==o||0!==a){var s=((e.x-n)*o+(e.y-i)*a)/(o*o+a*a);s>1?(n=r.x,i=r.y):s>0&&(n+=o*s,i+=a*s)}return(o=e.x-n)*o+(a=e.y-i)*a}function ar(e,t,r,n,i){for(var o,a=n,s=t+1;s<r;s++){var u=or(e[s],e[t],e[r]);u>a&&(o=s,a=u)}a>n&&(o-t>1&&ar(e,t,o,n,i),i.push(e[o]),r-o>1&&ar(e,o,r,n,i))}function sr(e,t){var r=e.length-1,n=[e[0]];return ar(e,0,r,t,n),n.push(e[r]),n}function ur(e,t,r){if(e.length<=2)return e;var n=void 0!==t?t*t:1;return e=sr(e=r?e:function(e,t){for(var r,n,i,o,a,s=e[0],u=[s],l=1,f=e.length;l<f;l++)r=e[l],i=s,o=void 0,a=void 0,o=(n=r).x-i.x,a=n.y-i.y,o*o+a*a>t&&(u.push(r),s=r);return s!==r&&u.push(r),u}(e,n),n)}function lr(e,t,r){return ur(e.map(function(e){return{x:e[0],y:e[1],z:e[2]}}),t,r).map(function(e){return e.z?[e.x,e.y,e.z]:[e.x,e.y]})}function fr(e,t,r){return e.map(function(e){var n=e.map(function(e){return{x:e[0],y:e[1]}});if(n.length<4)throw new Error("invalid polygon");for(var i=ur(n,t,r).map(function(e){return[e.x,e.y]});!cr(i);)i=ur(n,t-=.01*t,r).map(function(e){return[e.x,e.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function cr(e){return!(e.length<3)&&!(3===e.length&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}var hr=function(){function e(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var t=0;t<this.length;t++)this.points[t].z=this.points[t].z||0;for(t=0;t<this.length-1;t++){var r=this.points[t],n=this.points[t+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(t=0;t<this.centers.length-1;t++){var i=this.points[t+1].x-(this.centers[t].x+this.centers[t+1].x)/2,o=this.points[t+1].y-(this.centers[t].y+this.centers[t+1].y)/2,a=this.points[t+1].z-(this.centers[t].y+this.centers[t+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t].z+a)},{x:(1-this.sharpness)*this.points[t+1].x+this.sharpness*(this.centers[t+1].x+i),y:(1-this.sharpness)*this.points[t+1].y+this.sharpness*(this.centers[t+1].y+o),z:(1-this.sharpness)*this.points[t+1].z+this.sharpness*(this.centers[t+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return e.prototype.cacheSteps=function(e){var t=[],r=this.pos(0);t.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>e&&(t.push(n),r=i)}return t},e.prototype.vector=function(e){var t=this.pos(e+10),r=this.pos(e-10);return{angle:180*Math.atan2(t.y-r.y,t.x-r.x)/3.14,speed:Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)+(r.z-t.z)*(r.z-t.z))}},e.prototype.pos=function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var r=t/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(e,t,r,n,i){var o=function(e){var t=e*e;return[t*e,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}(e);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+t.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+t.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+t.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},e}();function pr(e,t){void 0===t&&(t={});for(var r=t.resolution||1e4,n=t.sharpness||.85,i=[],o=ie(e).coordinates.map(function(e){return{x:e[0],y:e[1]}}),a=new hr({duration:r,points:o,sharpness:n}),s=function(e){var t=a.pos(e);Math.floor(e/100)%2==0&&i.push([t.x,t.y])},u=0;u<a.duration;u+=10)s(u);return s(a.duration),h(i,t.properties)}function dr(e,t){void 0===t&&(t={});var r=Number(e[0]),n=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[r,n];return f([[a,[i,n],[i,o],[r,o],a]],t.properties,{bbox:e,id:t.id})}function vr(e){return dr(J(e))}function yr(e){var t=e[0],r=e[1],n=e[2],i=e[3];if(bt(e.slice(0,2),[n,r])>=bt(e.slice(0,2),[t,i])){var o=(r+i)/2;return[t,o-(n-t)/2,n,o+(n-t)/2]}var a=(t+n)/2;return[a-(i-r)/2,r,a+(i-r)/2,i]}function gr(e,t,r,n){void 0===n&&(n={});var i=K(e),o=P(i[0]),a=P(i[1]),s=P(r),l=S(t,n.units),f=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(s));return u([w(o+Math.atan2(Math.sin(s)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(f))),w(f)],n.properties)}function mr(e,t,r){void 0===r&&(r={});for(var n=r.steps||64,i=r.properties?r.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},o=[],a=0;a<n;a++)o.push(gr(e,t,-360*a/n,r).geometry.coordinates);return o.push(o[0]),f([o],i)}function _r(e,t,r){if(void 0===r&&(r={}),!0===r.final)return function(e,t){var r=_r(t,e);return r=(r+180)%360}(e,t);var n=K(e),i=K(t),o=P(n[0]),a=P(i[0]),s=P(n[1]),u=P(i[1]),l=Math.sin(a-o)*Math.cos(u),f=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return w(Math.atan2(l,f))}function br(e,t){void 0===t&&(t={});var r=J(e);return u([(r[0]+r[2])/2,(r[1]+r[3])/2],t.properties,t)}function Sr(e,t){void 0===t&&(t={});var r=0,n=0,i=0;return N(e,function(e){r+=e[0],n+=e[1],i++},!0),u([r/i,n/i],t.properties)}function xr(e){var t=[];return"FeatureCollection"===e.type?F(e,function(e){N(e,function(r){t.push(u(r,e.properties))})}):N(e,function(r){t.push(u(r,e.properties))}),d(t)}var Cr=Pr,wr=Pr;function Pr(e,t,r){r=r||2;var n,i,o,a,s,u,l,f=t&&t.length,c=f?t[0]*r:e.length,h=Ir(e,0,c,r,!0),p=[];if(!h)return p;if(f&&(h=function(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ir(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(Dr(a));for(s.sort(Nr),i=0;i<s.length;i++)Rr(s[i],r),r=Er(r,r.next);return r}(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<c;d+=r)(s=e[d])<n&&(n=s),(u=e[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-n,a-i))?1/l:0}return Lr(h,p,r,n,i,l),p}function Ir(e,t,r,n,i){var o,a;if(i===Zr(e,t,r,n)>0)for(o=t;o<r;o+=n)a=zr(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=zr(o,e[o],e[o+1],a);return a&&Ur(a,a.next)&&(Hr(a),a=a.next),a}function Er(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Ur(n,n.next)&&0!==jr(n.prev,n,n.next))n=n.next;else{if(Hr(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Lr(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=kr(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(u=l;s>0||u>0&&n;)0!==s&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1)}(i)}(e,n,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Mr(e,n,i,o):Tr(e))t.push(s.i/r),t.push(e.i/r),t.push(u.i/r),Hr(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?Lr(e=Or(e,t,r),t,r,n,i,o,2):2===a&&Ar(e,t,r,n,i,o):Lr(Er(e),t,r,n,i,o,1);break}}}function Tr(e){var t=e.prev,r=e,n=e.next;if(jr(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Fr(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&jr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mr(e,t,r,n){var i=e.prev,o=e,a=e.next;if(jr(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,f=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=kr(s,u,t,r,n),h=kr(l,f,t,r,n),p=e.prevZ,d=e.nextZ;p&&p.z>=c&&d&&d.z<=h;){if(p!==e.prev&&p!==e.next&&Fr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&jr(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&Fr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&jr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==e.prev&&p!==e.next&&Fr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&jr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&Fr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&jr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Or(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Ur(i,o)&&Gr(i,n,n.next,o)&&Vr(i,o)&&Vr(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),Hr(n),Hr(n.next),n=e=o),n=n.next}while(n!==e);return n}function Ar(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Br(a,s)){var u=qr(a,s);return a=Er(a,a.next),u=Er(u,u.next),Lr(a,t,r,n,i,o),void Lr(u,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function Nr(e,t){return e.x-t.x}function Rr(e,t){if(t=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var u,l=r,f=r.x,c=r.y,h=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=f&&i!==n.x&&Fr(o<c?i:a,o,f,c,o<c?a:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<h||u===h&&n.x>r.x)&&Vr(n,e)&&(r=n,h=u),n=n.next;return r}(e,t)){var r=qr(t,e);Er(r,r.next)}}function kr(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Dr(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function Fr(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function Br(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Gr(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&Vr(e,t)&&Vr(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function jr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ur(e,t){return e.x===t.x&&e.y===t.y}function Gr(e,t,r,n){return!!(Ur(e,t)&&Ur(r,n)||Ur(e,n)&&Ur(r,t))||jr(e,t,r)>0!=jr(e,t,n)>0&&jr(r,n,e)>0!=jr(r,n,t)>0}function Vr(e,t){return jr(e.prev,e,e.next)<0?jr(e,t,e.next)>=0&&jr(e,e.prev,t)>=0:jr(e,t,e.prev)<0||jr(e,e.next,t)<0}function qr(e,t){var r=new Wr(e.i,e.x,e.y),n=new Wr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function zr(e,t,r,n){var i=new Wr(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Hr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wr(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Zr(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function Xr(e){var t=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}(e),r=Cr(t.vertices,t.holes,2),n=[],i=[];r.forEach(function(e,n){var o=r[n];i.push([t.vertices[2*o],t.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var a=i.slice(o,o+3);a.push(i[o]),n.push(f([a]))}return n}function Yr(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return F(t,function(t,r){var o=bt(e,t);o<n&&(i=r,n=o)}),(r=Pt(t.features[i])).properties.featureIndex=i,r.properties.distanceToPoint=n,r}function Qr(e){if(!e)throw new Error("geojson is required");var t=[];return V(e,function(e){!function(e,t){var r=[],n=e.geometry;if(null!==n){switch(n.type){case"Polygon":r=$(n);break;case"LineString":r=[$(n)]}r.forEach(function(r){(function(e,t){var r=[];return e.reduce(function(e,n){var i=h([e,n],t);return i.bbox=function(e,t){var r=e[0],n=e[1],i=t[0],o=t[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(e,n),r.push(i),n}),r})(r,e.properties).forEach(function(e){e.id=t.length,t.push(e)})})}}(e,t)}),d(t)}Pr.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(Zr(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,f=s<u-1?t[s+1]*r:e.length;a-=Math.abs(Zr(e,l,f,r))}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,p=n[s+1]*r,d=n[s+2]*r;c+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},Pr.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},Cr.default=wr;var Jr=Ge(function(e,t){function r(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function n(e,t,n){if(void 0===n&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(e[0])||!p(e[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:e},t,n)}function i(e,t,n){void 0===n&&(n={});for(var i=0,o=e;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,n)}function o(e,t,n){if(void 0===n&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,n)}function a(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function s(e,t,n){return void 0===n&&(n={}),r({type:"MultiLineString",coordinates:e},t,n)}function u(e,t,n){return void 0===n&&(n={}),r({type:"MultiPoint",coordinates:e},t,n)}function l(e,t,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:e},t,n)}function f(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function c(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function h(e){return 180*(e%(2*Math.PI))/Math.PI}function p(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,r){switch(e){case"Point":return n(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return u(t).geometry;case"MultiLineString":return s(t).geometry;case"MultiPolygon":return l(t).geometry;default:throw new Error(e+" is invalid")}},t.point=n,t.points=function(e,t,r){return void 0===r&&(r={}),a(e.map(function(e){return n(e,t)}),r)},t.polygon=i,t.polygons=function(e,t,r){return void 0===r&&(r={}),a(e.map(function(e){return i(e,t)}),r)},t.lineString=o,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),a(e.map(function(e){return o(e,t)}),r)},t.featureCollection=a,t.multiLineString=s,t.multiPoint=u,t.multiPolygon=l,t.geometryCollection=function(e,t,n){return void 0===n&&(n={}),r({type:"GeometryCollection",geometries:e},t,n)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=f,t.lengthToRadians=c,t.lengthToDegrees=function(e,t){return h(c(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return f(c(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=t.areaFactors[r];if(!i)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/i*o},t.isNumber=p,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!p(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}});function Kr(e,t,r){if(null!==e)for(var n,i,o,a,s,u,l,f,c=0,h=0,p=e.type,d="FeatureCollection"===p,v="Feature"===p,y=d?e.features.length:1,g=0;g<y;g++){s=(f=!!(l=d?e.features[g].geometry:v?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=f?l.geometries[m]:l)){u=a.coordinates;var S=a.type;switch(c=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===t(u,h,g,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===t(u[n],h,g,_,b))return!1;h++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-c;i++){if(!1===t(u[n][i],h,g,_,b))return!1;h++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(b=0,i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-c;o++){if(!1===t(u[n][i][o],h,g,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===Kr(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $r(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function en(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function tn(e,t){var r,n,i,o,a,s,u,l,f,c,h=0,p="FeatureCollection"===e.type,d="Feature"===e.type,v=p?e.features.length:1;for(r=0;r<v;r++){for(s=p?e.features[r].geometry:d?e.geometry:e,l=p?e.features[r].properties:d?e.properties:{},f=p?e.features[r].bbox:d?e.bbox:void 0,c=p?e.features[r].id:d?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,h,l,f,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===t(o.geometries[n],h,l,f,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,f,c))return!1;h++}}function rn(e,t){tn(e,function(e,r,n,i,o){var a,s=null===e?null:e.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==t(Jr.feature(e,n,{bbox:i,id:o}),r,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<e.coordinates.length;u++){var l={type:a,coordinates:e.coordinates[u]};if(!1===t(Jr.feature(l,n),r,u))return!1}})}function nn(e,t){rn(e,function(e,r,n){var i=0;if(e.geometry){var o=e.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,l=0;return!1!==Kr(e,function(o,f,c,h,p){if(void 0===a||r>s||h>u||p>l)return a=o,s=r,u=h,l=p,void(i=0);var d=Jr.lineString([a,o],e.properties);if(!1===t(d,r,n,p,i))return!1;i++,a=o})&&void 0}}})}function on(e,t){if(!e)throw new Error("geojson is required");rn(e,function(e,r,n){if(null!==e.geometry){var i=e.geometry.type,o=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===t(Jr.lineString(o[a],e.properties),r,n,a))return!1}}})}var an=function(e){var t=[];return Kr(e,function(e){t.push(e)}),t},sn=Kr,un=function(e,t,r,n){var i=r;return Kr(e,function(e,n,o,a,s){i=0===n&&void 0===r?e:t(i,e,n,o,a,s)},n),i},ln=en,fn=function(e,t,r){var n=r;return en(e,function(e,i){n=0===i&&void 0===r?e:t(n,e,i)}),n},cn=function(e,t){if(t=t||{},!Jr.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Jr.point(u,s,t);case"MultiPoint":return i<0&&(i=u.length+i),Jr.point(u[i],s,t);case"LineString":return a<0&&(a=u.length+a),Jr.point(u[a],s,t);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),Jr.point(u[o][a],s,t);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),Jr.point(u[i][a],s,t);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),Jr.point(u[i][o][a],s,t)}throw new Error("geojson is invalid")},hn=function(e,t){if(t=t||{},!Jr.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),s=s||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":s=s||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),Jr.lineString([u[a],u[a+1]],s,t);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),Jr.lineString([u[o][a],u[o][a+1]],s,t);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),Jr.lineString([u[i][a],u[i][a+1]],s,t);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),Jr.lineString([u[i][o][a],u[i][o][a+1]],s,t)}throw new Error("geojson is invalid")},pn=rn,dn=function(e,t,r){var n=r;return rn(e,function(e,i,o){n=0===i&&0===o&&void 0===r?e:t(n,e,i,o)}),n},vn=tn,yn=function(e,t,r){var n=r;return tn(e,function(e,i,o,a,s){n=0===i&&void 0===r?e:t(n,e,i,o,a,s)}),n},gn=on,mn=function(e,t,r){var n=r;return on(e,function(e,i,o,a){n=0===i&&void 0===r?e:t(n,e,i,o,a)}),n},_n=$r,bn=function(e,t,r){var n=r;return $r(e,function(e,i){n=0===i&&void 0===r?e:t(n,e,i)}),n},Sn=nn,xn=function(e,t,r){var n=r,i=!1;return nn(e,function(e,o,a,s,u){n=!1===i&&void 0===r?e:t(n,e,o,a,s,u),i=!0}),n},Cn=Object.defineProperty({coordAll:an,coordEach:sn,coordReduce:un,featureEach:ln,featureReduce:fn,findPoint:cn,findSegment:hn,flattenEach:pn,flattenReduce:dn,geomEach:vn,geomReduce:yn,lineEach:gn,lineReduce:mn,propEach:_n,propReduce:bn,segmentEach:Sn,segmentReduce:xn},"__esModule",{value:!0});function wn(e){var t=[1/0,1/0,-1/0,-1/0];return Cn.coordEach(e,function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])}),t}wn.default=wn;var Pn=wn,In=Object.defineProperty({default:Pn},"__esModule",{value:!0}).default,En=Cn.featureEach,Ln=(Cn.coordEach,Jr.polygon,Jr.featureCollection);function Tn(e){var t=Ie(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:In(e),Ie.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:In(e),t.push(e)}):En(e,function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:In(e),t.push(e)}),Ie.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:In(e),Ie.prototype.remove.call(this,e,t)},t.clear=function(){return Ie.prototype.clear.call(this)},t.search=function(e){var t=Ie.prototype.search.call(this,this.toBBox(e));return Ln(t)},t.collides=function(e){return Ie.prototype.collides.call(this,this.toBBox(e))},t.all=function(){var e=Ie.prototype.all.call(this);return Ln(e)},t.toJSON=function(){return Ie.prototype.toJSON.call(this)},t.fromJSON=function(e){return Ie.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=In(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=In(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}var Mn=Tn,On=Tn;function An(e,t){var r={},n=[];if("LineString"===e.type&&(e=a(e)),"LineString"===t.type&&(t=a(t)),"Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var i=Nn(e,t);return i&&n.push(i),d(n)}var o=Mn();return o.load(Qr(t)),F(Qr(e),function(e){F(o.search(e),function(t){var i=Nn(e,t);if(i){var o=$(i).join(",");r[o]||(r[o]=!0,n.push(i))}})}),d(n)}function Nn(e,t){var r=$(e),n=$(t);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],a=r[1][0],s=r[1][1],l=n[0][0],f=n[0][1],c=n[1][0],h=n[1][1],p=(h-f)*(a-i)-(c-l)*(s-o),d=(c-l)*(o-f)-(h-f)*(i-l),v=(a-i)*(o-f)-(s-o)*(i-l);if(0===p)return null;var y=d/p,g=v/p;return y>=0&&y<=1&&g>=0&&g<=1?u([i+y*(a-i),o+y*(s-o)]):null}function Rn(e,t,r){void 0===r&&(r={});var n=u([1/0,1/0],{dist:1/0}),i=0;return V(e,function(e){for(var o=$(e),a=0;a<o.length-1;a++){var s=u(o[a]);s.properties.dist=bt(t,s,r);var l=u(o[a+1]);l.properties.dist=bt(t,l,r);var f=bt(s,l,r),c=Math.max(s.properties.dist,l.properties.dist),p=_r(s,l),d=gr(t,c,p+90,r),v=gr(t,c,p-90,r),y=An(h([d.geometry.coordinates,v.geometry.coordinates]),h([s.geometry.coordinates,l.geometry.coordinates])),g=null;y.features.length>0&&((g=y.features[0]).properties.dist=bt(t,g,r),g.properties.location=i+bt(s,g,r)),s.properties.dist<n.properties.dist&&((n=s).properties.index=a,n.properties.location=i),l.properties.dist<n.properties.dist&&((n=l).properties.index=a+1,n.properties.location=i+f),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=a),i+=f}}),n}function kn(e,t,n){void 0===n&&(n={});var i=K(e),o=K(t);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,I(function(e,t,n){var i=n=void 0===n?r:Number(n),o=e[1]*Math.PI/180,a=t[1]*Math.PI/180,s=a-o,u=Math.abs(t[0]-e[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),f=Math.abs(l)>1e-11?s/l:Math.cos(o);return Math.sqrt(s*s+f*f*u*u)*i}(i,o),"meters",n.units)}function Dn(e,t,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!e)throw new Error("pt is required");if(Array.isArray(e)?e=u(e):"Point"===e.type?e=a(e):re(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=h(t):"LineString"===t.type?t=a(t):re(t,"LineString","line");var n=1/0,i=e.geometry.coordinates;return z(t,function(e){var t=e.geometry.coordinates[0],o=e.geometry.coordinates[1],a=function(e,t,r,n){var i=[r[0]-t[0],r[1]-t[1]],o=Fn([e[0]-t[0],e[1]-t[1]],i);if(o<=0)return Bn(e,t,{method:n.method,units:"degrees"});var a=Fn(i,i);if(a<=o)return Bn(e,r,{method:n.method,units:"degrees"});var s=o/a,u=[t[0]+s*i[0],t[1]+s*i[1]];return Bn(e,u,{method:n.method,units:"degrees"})}(i,t,o,r);a<n&&(n=a)}),I(n,"degrees",r.units)}function Fn(e,t){return e[0]*t[0]+e[1]*t[1]}function Bn(e,t,r){return"planar"===r.method?kn(e,t,r):bt(e,t,r)}function jn(e,t,r,n,i,o,a,s){var u,l,f,c,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(s-o)*(r-e)-(a-i)*(n-t))?null!==h.x&&null!==h.y&&h:(c=(r-e)*(l=t-o)-(n-t)*(f=e-i),l=((a-i)*l-(s-o)*f)/u,f=c/u,h.x=e+l*(r-e),h.y=t+l*(n-t),l>=0&&l<=1&&(h.onLine1=!0),f>=0&&f<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}function Un(e){for(var t=function(e){if("FeatureCollection"!==e.type)return"Feature"!==e.type?d([a(e)]):d([e]);return e}(e),r=br(t),n=!1,i=0;!n&&i<t.features.length;){var o,s=t.features[i].geometry,l=!1;if("Point"===s.type)r.geometry.coordinates[0]===s.coordinates[0]&&r.geometry.coordinates[1]===s.coordinates[1]&&(n=!0);else if("MultiPoint"===s.type){var f=!1;for(o=0;!f&&o<s.coordinates.length;)r.geometry.coordinates[0]===s.coordinates[o][0]&&r.geometry.coordinates[1]===s.coordinates[o][1]&&(n=!0,f=!0),o++}else if("LineString"===s.type)for(o=0;!l&&o<s.coordinates.length-1;)Gn(r.geometry.coordinates[0],r.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(l=!0,n=!0),o++;else if("MultiLineString"===s.type)for(var c=0;c<s.coordinates.length;){l=!1,o=0;for(var h=s.coordinates[c];!l&&o<h.length-1;)Gn(r.geometry.coordinates[0],r.geometry.coordinates[1],h[o][0],h[o][1],h[o+1][0],h[o+1][1])&&(l=!0,n=!0),o++;c++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||gt(r,s)&&(n=!0);i++}if(n)return r;var p=d([]);for(i=0;i<t.features.length;i++)p.features=p.features.concat(xr(t.features[i]).features);return u(Yr(r,p).geometry.coordinates)}function Gn(e,t,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))+Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}Mn.default=On;var Vn=6378137;function qn(e){return G(e,function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return zn(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=zn(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}function zn(e){var t=0;if(e&&e.length>0){t+=Math.abs(Hn(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(Hn(e[r]))}return t}function Hn(e){var t,r,n,i,o,a,s=0,u=e.length;if(u>2){for(a=0;a<u;a++)a===u-2?(n=u-2,i=u-1,o=0):a===u-1?(n=u-1,i=0,o=1):(n=a,i=a+1,o=a+2),t=e[n],r=e[i],s+=(Wn(e[o][0])-Wn(t[0]))*Math.sin(Wn(r[1]));s=s*Vn*Vn/2}return s}function Wn(e){return e*Math.PI/180}function Zn(e,t){return void 0===t&&(t={}),H(e,function(e,r){var n=r.geometry.coordinates;return e+bt(n[0],n[1],t)},0)}function Xn(e,t,r,n){if(!T(n=n||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===e.type)i=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");i=e.coordinates}for(var a,s,u,l=i.length,f=0,c=0;c<i.length&&!(t>=f&&c===i.length-1);c++){if(f>t&&0===o.length){if(!(a=t-f))return o.push(i[c]),h(o);s=_r(i[c],i[c-1])-180,u=gr(i[c],a,s,n),o.push(u.geometry.coordinates)}if(f>=r)return(a=r-f)?(s=_r(i[c],i[c-1])-180,u=gr(i[c],a,s,n),o.push(u.geometry.coordinates),h(o)):(o.push(i[c]),h(o));if(f>=t&&o.push(i[c]),c===i.length-1)return h(o);f+=bt(i[c],i[c+1],n)}if(f<t&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return h([p,p])}function Yn(e,t,r){void 0===r&&(r={});for(var n=K(e),i=$(t),o=0;o<i.length-1;o++){var a=!1;if(r.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),Qn(i[o],i[o+1],n,a,void 0===r.epsilon?null:r.epsilon))return!0}return!1}function Qn(e,t,r,n,i){var o=r[0],a=r[1],s=e[0],u=e[1],l=t[0],f=t[1],c=l-s,h=f-u,p=(r[0]-s)*h-(r[1]-u)*c;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return n?"start"===n?Math.abs(c)>=Math.abs(h)?c>0?s<o&&o<=l:l<=o&&o<s:h>0?u<a&&a<=f:f<=a&&a<u:"end"===n?Math.abs(c)>=Math.abs(h)?c>0?s<=o&&o<l:l<o&&o<=s:h>0?u<=a&&a<f:f<a&&a<=u:"both"===n&&(Math.abs(c)>=Math.abs(h)?c>0?s<o&&o<l:l<o&&o<s:h>0?u<a&&a<f:f<a&&a<u):Math.abs(c)>=Math.abs(h)?c>0?s<=o&&o<=l:l<=o&&o<=s:h>0?u<=a&&a<=f:f<=a&&a<=u}function Jn(e,t){var r=ie(e),n=ie(t),i=r.type,o=n.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(e,t){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if($n(t.coordinates[r],e.coordinates)){n=!0;break}return n}(r,n);case"LineString":return Yn(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return gt(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(e,t){for(var r=0;r<e.coordinates.length;r++){for(var n=!1,i=0;i<t.coordinates.length;i++)$n(e.coordinates[r],t.coordinates[i])&&(n=!0);if(!n)return!1}return!0}(r,n);case"LineString":return function(e,t){for(var r=!1,n=0;n<e.coordinates.length;n++){if(!Yn(e.coordinates[n],t))return!1;r||(r=Yn(e.coordinates[n],t,{ignoreEndVertices:!0}))}return r}(r,n);case"Polygon":case"MultiPolygon":return function(e,t){for(var r=!0,n=!1,i=0;i<e.coordinates.length;i++){if(!(n=gt(e.coordinates[1],t))){r=!1;break}n=gt(e.coordinates[1],t,{ignoreBoundary:!0})}return r&&n}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(e,t){for(var r=0;r<e.coordinates.length;r++)if(!Yn(e.coordinates[r],t))return!1;return!0}(r,n);case"Polygon":case"MultiPolygon":return function(e,t){var r=J(t),n=J(e);if(!Kn(r,n))return!1;for(var i=!1,o=0;o<e.coordinates.length-1;o++){if(!gt(e.coordinates[o],t))return!1;if(i||(i=gt(e.coordinates[o],t,{ignoreBoundary:!0})),!i)i=gt(ei(e.coordinates[o],e.coordinates[o+1]),t,{ignoreBoundary:!0})}return i}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(e,t){var r=J(e);if(!Kn(J(t),r))return!1;for(var n=0;n<e.coordinates[0].length;n++)if(!gt(e.coordinates[0][n],t))return!1;return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kn(e,t){return!(e[0]>t[0])&&(!(e[2]<t[2])&&(!(e[1]>t[1])&&!(e[3]<t[3])))}function $n(e,t){return e[0]===t[0]&&e[1]===t[1]}function ei(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function ti(e,t,r){void 0===r&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var n=[],i=e[0],o=e[1],a=e[2],s=e[3],l=t/bt([i,o],[a,o],r)*(a-i),f=t/bt([i,o],[i,s],r)*(s-o),c=a-i,h=s-o,p=Math.floor(c/l),v=(h-Math.floor(h/f)*f)/2,y=i+(c-p*l)/2;y<=a;){for(var g=o+v;g<=s;){var m=u([y,g],r.properties);r.mask?Jn(m,r.mask)&&n.push(m):n.push(m),g+=f}y+=l}return d(n)}function ri(e,t){void 0===t&&(t={});var r=t.precision,n=t.coordinates,i=t.mutate;if(r=null==r||isNaN(r)?6:r,n=null==n||isNaN(n)?3:n,!e)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,r);return N(e,function(e){!function(e,t,r){e.length>r&&e.splice(r,e.length);for(var n=0;n<e.length;n++)e[n]=Math.round(e[n]*t)/t}(e,o,n)}),e}function ni(e){if(!e)throw new Error("geojson is required");var t=[];return V(e,function(e){t.push(e)}),d(t)}function ii(e,t,r){if("Polygon"!==e.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var n=e.geometry.coordinates,i=[],o={};if(r){for(var a=[],s=0;s<n.length;s++)for(var u=0;u<n[s].length-1;u++)a.push(v(s,u));var l=Ie();l.load(a)}for(var f=0;f<n.length;f++)for(var c=0;c<n[f].length-1;c++){if(r)l.search(v(f,c)).forEach(function(e){var t=e.ring,r=e.edge;d(f,c,t,r)});else for(var h=0;h<n.length;h++)for(var p=0;p<n[h].length-1;p++)d(f,c,h,p)}return t||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(e,r,a,s){var u,l,f=n[e][r],c=n[e][r+1],h=n[a][s],p=n[a][s+1],d=function(e,t,r,n){if(oi(e,r)||oi(e,n)||oi(t,r)||oi(n,r))return null;var i=e[0],o=e[1],a=t[0],s=t[1],u=r[0],l=r[1],f=n[0],c=n[1],h=(i-a)*(l-c)-(o-s)*(u-f);return 0===h?null:[((i*s-o*a)*(u-f)-(i-a)*(u*c-l*f))/h,((i*s-o*a)*(l-c)-(o-s)*(u*c-l*f))/h]}(f,c,h,p);if(null!==d&&(u=c[0]!==f[0]?(d[0]-f[0])/(c[0]-f[0]):(d[1]-f[1])/(c[1]-f[1]),l=p[0]!==h[0]?(d[0]-h[0])/(p[0]-h[0]):(d[1]-h[1])/(p[1]-h[1]),!(u>=1||u<=0||l>=1||l<=0))){var v=d,y=!o[v];y&&(o[v]=!0),t?i.push(t(d,e,r,f,c,u,a,s,h,p,l,y)):i.push(d)}}function v(e,t){var r,i,o,a,s=n[e][t],u=n[e][t+1];return s[0]<u[0]?(r=s[0],i=u[0]):(r=u[0],i=s[0]),s[1]<u[1]?(o=s[1],a=u[1]):(o=u[1],a=s[1]),{minX:r,minY:o,maxX:i,maxY:a,ring:e,edge:t}}}function oi(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!oi(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0}function ai(e){if("Feature"!=e.type)throw new Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw new Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,r=[],n=0;n<t;n++){var i=e.geometry.coordinates[n];ci(i[0],i[i.length-1])||i.push(i[0]),r.push.apply(r,i.slice(0,i.length-1))}if(!function(e){for(var t={},r=1,n=0,i=e.length;n<i;++n){if(Object.prototype.hasOwnProperty.call(t,e[n])){r=0;break}t[e[n]]=1}return r}(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=r.length,a=ii(e,function(e,t,r,n,i,o,a,s,u,l,f,c){return[e,t,r,n,i,o,a,s,u,l,f,c]}),s=a.length;if(0==s){var u=[];for(n=0;n<t;n++)u.push(f([e.geometry.coordinates[n]],{parent:-1,winding:fi(e.geometry.coordinates[n])}));var l=d(u);return B(),j(),l}var c=[],h=[];for(n=0;n<t;n++){c.push([]);for(var p=0;p<e.geometry.coordinates[n].length-1;p++)c[n].push([new si(e.geometry.coordinates[n][hi(p+1,e.geometry.coordinates[n].length-1)],1,[n,p],[n,hi(p+1,e.geometry.coordinates[n].length-1)],void 0)]),h.push(new ui(e.geometry.coordinates[n][p],[n,hi(p-1,e.geometry.coordinates[n].length-1)],[n,p],void 0,void 0,!1,!0))}for(n=0;n<s;n++)c[a[n][1]][a[n][2]].push(new si(a[n][0],a[n][5],[a[n][1],a[n][2]],[a[n][6],a[n][7]],void 0)),a[n][11]&&h.push(new ui(a[n][0],[a[n][1],a[n][2]],[a[n][6],a[n][7]],void 0,void 0,!0,!0));var v=h.length;for(n=0;n<c.length;n++)for(p=0;p<c[n].length;p++)c[n][p].sort(function(e,t){return e.param<t.param?-1:1});var y=[];for(n=0;n<v;n++)y.push({minX:h[n].coord[0],minY:h[n].coord[1],maxX:h[n].coord[0],maxY:h[n].coord[1],index:n});var g=Ie();g.load(y);for(n=0;n<c.length;n++)for(p=0;p<c[n].length;p++)for(var m=0;m<c[n][p].length;m++){b=m==c[n][p].length-1?c[n][hi(p+1,e.geometry.coordinates[n].length-1)][0].coord:c[n][p][m+1].coord;var _=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];c[n][p][m].nxtIsectAlongEdgeIn=_.index}for(n=0;n<c.length;n++)for(p=0;p<c[n].length;p++)for(m=0;m<c[n][p].length;m++){var b=c[n][p][m].coord,S=(_=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;S<o?h[S].nxtIsectAlongRingAndEdge2=c[n][p][m].nxtIsectAlongEdgeIn:ci(h[S].ringAndEdge1,c[n][p][m].ringAndEdgeIn)?h[S].nxtIsectAlongRingAndEdge1=c[n][p][m].nxtIsectAlongEdgeIn:h[S].nxtIsectAlongRingAndEdge2=c[n][p][m].nxtIsectAlongEdgeIn}var x=[];for(n=0,p=0;p<t;p++){var C=n;for(m=0;m<e.geometry.coordinates[p].length-1;m++)h[n].coord[0]<h[C].coord[0]&&(C=n),n++;var w=h[C].nxtIsectAlongRingAndEdge2;for(m=0;m<h.length;m++)if(h[m].nxtIsectAlongRingAndEdge1==C||h[m].nxtIsectAlongRingAndEdge2==C){var P=m;break}var I=li([h[P].coord,h[C].coord,h[w].coord],!0)?1:-1;x.push({isect:C,parent:-1,winding:I})}x.sort(function(e,t){return h[e.isect].coord>h[t.isect].coord?-1:1});for(u=[];x.length>0;){var E=x.pop(),L=E.isect,T=E.parent,M=E.winding,O=u.length,A=[h[L].coord],N=L;if(h[L].ringAndEdge1Walkable)var R=h[L].ringAndEdge1,k=h[L].nxtIsectAlongRingAndEdge1;else R=h[L].ringAndEdge2,k=h[L].nxtIsectAlongRingAndEdge2;for(;!ci(h[L].coord,h[k].coord);){A.push(h[k].coord);var D=void 0;for(n=0;n<x.length;n++)if(x[n].isect==k){D=n;break}if(null!=D&&x.splice(D,1),ci(R,h[k].ringAndEdge1)){if(R=h[k].ringAndEdge2,h[k].ringAndEdge2Walkable=!1,h[k].ringAndEdge1Walkable){var F={isect:k};li([h[N].coord,h[k].coord,h[h[k].nxtIsectAlongRingAndEdge2].coord],1==M)?(F.parent=T,F.winding=-M):(F.parent=O,F.winding=M),x.push(F)}N=k,k=h[k].nxtIsectAlongRingAndEdge2}else{if(R=h[k].ringAndEdge1,h[k].ringAndEdge1Walkable=!1,h[k].ringAndEdge2Walkable){F={isect:k};li([h[N].coord,h[k].coord,h[h[k].nxtIsectAlongRingAndEdge1].coord],1==M)?(F.parent=T,F.winding=-M):(F.parent=O,F.winding=M),x.push(F)}N=k,k=h[k].nxtIsectAlongRingAndEdge1}}A.push(h[k].coord),u.push(f([A],{index:O,parent:T,winding:M,netWinding:void 0}))}l=d(u);function B(){for(var e=[],t=0;t<l.features.length;t++)-1==l.features[t].properties.parent&&e.push(t);if(e.length>1)for(t=0;t<e.length;t++){for(var r=-1,n=0;n<l.features.length;n++)e[t]!=n&&gt(l.features[e[t]].geometry.coordinates[0][0],l.features[n],{ignoreBoundary:!0})&&qn(l.features[n])<Infinity&&(r=n);l.features[e[t]].properties.parent=r}}function j(){for(var e=0;e<l.features.length;e++)if(-1==l.features[e].properties.parent){var t=l.features[e].properties.winding;l.features[e].properties.netWinding=t,U(e,t)}}function U(e,t){for(var r=0;r<l.features.length;r++)if(l.features[r].properties.parent==e){var n=t+l.features[r].properties.winding;l.features[r].properties.netWinding=n,U(r,n)}}return B(),j(),l}var si=function(e,t,r,n,i){this.coord=e,this.param=t,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},ui=function(e,t,r,n,i,o,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function li(e,t){if(void 0===t&&(t=!0),3!=e.length)throw new Error("This function requires an array of three points [x,y]");return(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])>=0==t}function fi(e){for(var t=0,r=0;r<e.length-1;r++)e[r][0]<e[t][0]&&(t=r);if(li([e[hi(t-1,e.length-1)],e[t],e[hi(t+1,e.length-1)]],!0))var n=1;else n=-1;return n}function ci(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]instanceof Array&&t[r]instanceof Array){if(!ci(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}function hi(e,t){return(e%t+t)%t}var pi=Math.PI/180,di=180/Math.PI,vi=function(e,t){this.lon=e,this.lat=t,this.x=pi*e,this.y=pi*t};vi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},vi.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:-1*(180-this.lon);return new vi(t,e)};var yi=function(){this.coords=[],this.length=0};yi.prototype.move_to=function(e){this.length++,this.coords.push(e)};var gi=function(e){this.properties=e||{},this.geometries=[]};gi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}},gi.prototype.wkt=function(){for(var e="",t="LINESTRING(",r=function(e){t+=e[0]+" "+e[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),e+=t.substring(0,t.length-1)+")"}return e};var mi=function(e,t,r){if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new vi(e.x,e.y),this.end=new vi(t.x,t.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};function _i(e,t){var r=[],n=Mn();return V(t,function(t){if(r.forEach(function(e,t){e.id=t}),r.length){var i=n.search(t);if(i.features.length){var o=Si(t,i);r=r.filter(function(e){return e.id!==o.id}),n.remove(o),F(bi(o,t),function(e){r.push(e),n.insert(e)})}}else(r=bi(e,t).features).forEach(function(e){e.bbox||(e.bbox=yr(J(e)))}),n.load(d(r))}),d(r)}function bi(e,t){var r=[],n=$(e)[0],i=$(e)[e.geometry.coordinates.length-1];if(xi(n,K(t))||xi(i,K(t)))return d([e]);var o=Mn(),a=Qr(e);o.load(a);var s=o.search(t);if(!s.features.length)return d([e]);var u=Si(t,s),l=B(a,function(e,n,i){var o=$(n)[1],a=K(t);return i===u.id?(e.push(a),r.push(h(e)),xi(a,o)?[a]:[a,o]):(e.push(o),e)},[n]);return l.length>1&&r.push(h(l)),d(r)}function Si(e,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,n=1/0;return F(t,function(t){var i=Rn(t,e).properties.dist;i<n&&(r=t,n=i)}),r}function xi(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ci(e,t,r,n,i){void 0===i&&(i={});var o=i.steps||64,a=wi(r),s=wi(n),u=Array.isArray(e)||"Feature"!==e.type?{}:e.properties;if(a===s)return h(mr(e,t,i).geometry.coordinates[0],u);for(var l=a,f=a<s?s:s+360,c=l,p=[],d=0;c<f;)p.push(gr(e,t,c,i).geometry.coordinates),c=l+360*++d/o;return c>f&&p.push(gr(e,t,f,i).geometry.coordinates),h(p,u)}function wi(e){var t=e%360;return t<0&&(t+=360),t}function Pi(e,t){void 0===t&&(t={});var r=ie(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),r.type){case"Polygon":return Ii(r,t);case"MultiPolygon":return function(e,t){void 0===t&&(t={});var r=ie(e).coordinates,n=t.properties?t.properties:"Feature"===e.type?e.properties:{},i=[];return r.forEach(function(e){i.push(Ei(e,n))}),d(i)}(r,t);default:throw new Error("invalid poly")}}function Ii(e,t){return void 0===t&&(t={}),Ei(ie(e).coordinates,t.properties?t.properties:"Feature"===e.type?e.properties:{})}function Ei(e,t){return e.length>1?v(e,t):h(e[0],t)}function Li(e,t){var r,n,i;void 0===t&&(t={});var o=t.properties,a=null===(r=t.autoComplete)||void 0===r||r,s=null===(n=t.orderCoords)||void 0===n||n;switch(null!==(i=t.mutate)&&void 0!==i&&i||(e=Pt(e)),e.type){case"FeatureCollection":var u=[];return e.features.forEach(function(e){u.push($(Ti(e,{},a,s)))}),g(u,o);default:return Ti(e,o,a,s)}}function Ti(e,t,r,n){t=t||("Feature"===e.type?e.properties:{});var i=ie(e),o=i.coordinates,a=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return r&&(o=Mi(o)),f([o],t);case"MultiLineString":var s=[],u=0;return o.forEach(function(e){if(r&&(e=Mi(e)),n){var t=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.abs(t-n)*Math.abs(r-i)}(J(h(e)));t>u?(s.unshift(e),u=t):s.push(e)}else s.push(e)}),f(s,t);default:throw new Error("geometry type "+a+" is not supported")}}function Mi(e){var t=e[0],r=t[0],n=t[1],i=e[e.length-1],o=i[0],a=i[1];return r===o&&n===a||e.push(t),e}function Oi(e,t){var r,n,i,o,a,s,u;for(n=1;n<=8;n*=2){for(r=[],o=!(Ni(i=e[e.length-1],t)&n),a=0;a<e.length;a++)(u=!(Ni(s=e[a],t)&n))!==o&&r.push(Ai(i,s,n,t)),u&&r.push(s),i=s,o=u;if(!(e=r).length)break}return r}function Ai(e,t,r,n){return 8&r?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:4&r?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:2&r?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:1&r?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function Ni(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function Ri(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=Oi(i[n],t);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}return r}mi.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),r=Math.sin(e*this.g)/Math.sin(this.g),n=t*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+r*Math.sin(this.end.y),a=di*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[di*Math.atan2(i,n),a]},mi.prototype.Arc=function(e,t){var r=[];if(!e||e<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(e-1),i=0;i<e;++i){var o=n*i,a=this.interpolate(o);r.push(a)}for(var s=!1,u=0,l=t&&t.offset?t.offset:10,f=180-l,c=-180+l,h=360-l,p=1;p<r.length;++p){var d=r[p-1][0],v=r[p][0],y=Math.abs(v-d);y>h&&(v>f&&d<c||d>f&&v<c)?s=!0:y>u&&(u=y)}var g=[];if(s&&u<l){var m=[];g.push(m);for(var _=0;_<r.length;++_){var b=parseFloat(r[_][0]);if(_>0&&Math.abs(b-r[_-1][0])>h){var S=parseFloat(r[_-1][0]),x=parseFloat(r[_-1][1]),C=parseFloat(r[_][0]),w=parseFloat(r[_][1]);if(S>-180&&S<c&&180===C&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<c){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(S>f&&S<180&&-180===C&&_+1<r.length&&r[_-1][0]>f&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(S<c&&C>f){var P=S;S=C,C=P;var I=x;x=w,w=I}if(S>f&&C<c&&(C+=360),S<=180&&C>=180&&S<C){var E=(180-S)/(C-S),L=E*w+(1-E)*x;m.push([r[_-1][0]>f?180:-180,L]),(m=[]).push([r[_-1][0]>f?-180:180,L]),g.push(m)}else m=[],g.push(m);m.push([b,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var T=[];g.push(T);for(var M=0;M<r.length;++M)T.push([r[M][0],r[M][1]])}for(var O=new gi(this.properties),A=0;A<g.length;++A){var N=new yi;O.geometries.push(N);for(var R=g[A],k=0;k<R.length;++k)N.move_to(R[k])}return O};var ki=Ge(function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),Di=Ge(function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:i).supported=n,t.unsupported=i}),Fi=Ge(function(e){var t=Array.prototype.slice,r=e.exports=function(e,o,a){return a||(a={}),e===o||(e instanceof Date&&o instanceof Date?e.getTime()===o.getTime():!e||!o||"object"!=typeof e&&"object"!=typeof o?a.strict?e===o:e==o:function(e,o,a){var s,u;if(n(e)||n(o))return!1;if(e.prototype!==o.prototype)return!1;if(Di(e))return!!Di(o)&&(e=t.call(e),o=t.call(o),r(e,o,a));if(i(e)){if(!i(o))return!1;if(e.length!==o.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==o[s])return!1;return!0}try{var l=ki(e),f=ki(o)}catch(e){return!1}if(l.length!=f.length)return!1;for(l.sort(),f.sort(),s=l.length-1;s>=0;s--)if(l[s]!=f[s])return!1;for(s=l.length-1;s>=0;s--)if(u=l[s],!r(e[u],o[u],a))return!1;return typeof e==typeof o}(e,o,a))};function n(e){return null==e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}});function Bi(e,t,r){if(void 0===r&&(r={}),!T(r=r||{}))throw new Error("options is invalid");var n,i=r.tolerance||0,o=[],a=Mn(),s=Qr(e);return a.load(s),z(t,function(e){var t=!1;e&&(F(a.search(e),function(r){if(!1===t){var o=$(e).sort(),a=$(r).sort();Fi(o,a)||(0===i?Yn(o[0],r)&&Yn(o[1],r):Rn(r,o[0]).properties.dist<=i&&Rn(r,o[1]).properties.dist<=i)?(t=!0,n=n?ji(n,e):e):(0===i?Yn(a[0],e)&&Yn(a[1],e):Rn(e,a[0]).properties.dist<=i&&Rn(e,a[1]).properties.dist<=i)&&(n=n?ji(n,r):r)}}),!1===t&&n&&(o.push(n),n=void 0))}),n&&o.push(n),d(o)}function ji(e,t){var r=$(t),n=$(e),i=n[0],o=n[n.length-1],a=e.geometry.coordinates;return Fi(r[0],i)?a.unshift(r[1]):Fi(r[0],o)?a.push(r[1]):Fi(r[1],i)?a.unshift(r[0]):Fi(r[1],o)&&a.push(r[0]),e}function Ui(e){var t=e%360;return t<0&&(t+=360),t}function Gi(e,t,r){var n;return void 0===r&&(r={}),(n=r.final?Vi(K(t),K(e)):Vi(K(e),K(t)))>180?-(360-n):n}function Vi(e,t){var r=P(e[1]),n=P(t[1]),i=P(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(w(Math.atan2(i,o))+360)%360}function qi(e,t,n,i){void 0===i&&(i={});var o=t<0,a=I(Math.abs(t),i.units,"meters");o&&(a=-Math.abs(a));var s=K(e),l=function(e,t,n,i){i=void 0===i?r:Number(i);var o=t/i,a=e[0]*Math.PI/180,s=P(e[1]),u=P(n),l=o*Math.cos(u),f=s+l;Math.abs(f)>Math.PI/2&&(f=f>0?Math.PI-f:-Math.PI-f);var c=Math.log(Math.tan(f/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(s),p=o*Math.sin(u)/h;return[(180*(a+p)/Math.PI+540)%360-180,180*f/Math.PI]}(s,a,n);return l[0]+=l[0]-s[0]>180?-360:s[0]-l[0]>180?360:0,u(l,i.properties)}function zi(e,t,r,n,i,o){for(var a=0;a<e.length;a++){var s=e[a],u=e[a+1];a===e.length-1&&(u=e[0]),n=Wi(s,u,t),r<=0&&n>0?Wi(t,s,i)<0||(i=s):r>0&&n<=0&&(Hi(t,s,o)||(o=s)),r=n}return[i,o]}function Hi(e,t,r){return Wi(e,t,r)>0}function Wi(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function Zi(e){for(var t,r,n=$(e),i=0,o=1;o<n.length;)t=r||n[0],i+=((r=n[o])[0]-t[0])*(r[1]+t[1]),o++;return i>0}function Xi(e,t){switch("Feature"===e.type?e.geometry.type:e.type){case"GeometryCollection":return U(e,function(e){Xi(e,t)}),e;case"LineString":return Yi($(e),t),e;case"Polygon":return Qi($(e),t),e;case"MultiLineString":return $(e).forEach(function(e){Yi(e,t)}),e;case"MultiPolygon":return $(e).forEach(function(e){Qi(e,t)}),e;case"Point":case"MultiPoint":return e}}function Yi(e,t){Zi(e)===t&&e.reverse()}function Qi(e,t){Zi(e[0])!==t&&e[0].reverse();for(var r=1;r<e.length;r++)Zi(e[r])===t&&e[r].reverse()}function Ji(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.zProperty||"elevation",n=t.flip,i=t.flags;ne(e,"Point","input must contain Points");for(var o=function(e,t){var r={};return F(e,function(e){var t=$(e)[1];r[t]||(r[t]=[]),r[t].push(e)}),Object.keys(r).map(function(e){return r[e].sort(function(e,t){return $(e)[0]-$(t)[0]})}).sort(function(e,r){return t?$(e[0])[1]-$(r[0])[1]:$(r[0])[1]-$(e[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(e,n),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],f=0;f<u.length;f++){var c=u[f];c.properties[r]?l.push(c.properties[r]):l.push(0),!0===i&&(c.properties.matrixPosition=[s,f])}a.push(l)}return a}var Ki={successCallback:null,verbose:!1,polygons:!1},$i={};function eo(e,t,r,n){n=n||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var a=i[o],s=n[a];s=null!=s?s:Ki[a],$i[a]=s}$i.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+r)+"]");var u,l=function(e,t,r){for(var n=e.length-1,i=e[0].length-1,o={rows:n,cols:i,cells:[]},a=t+Math.abs(r),s=0;s<n;++s){o.cells[s]=[];for(var u=0;u<i;++u){var l=0,f=e[s+1][u],c=e[s+1][u+1],h=e[s][u+1],p=e[s][u];if(!(isNaN(f)||isNaN(c)||isNaN(h)||isNaN(p))){l|=f<t?0:f>a?128:64,l|=c<t?0:c>a?32:16,l|=h<t?0:h>a?8:4;var d=+(l|=p<t?0:p>a?2:1),v=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(f+c+h+p)/4;v=y>a?2:y<t?0:1,34===l?1===v?l=35:0===v&&(l=136):136===l?1===v?(l=35,v=4):0===v&&(l=34):17===l?1===v?(l=155,v=4):0===v&&(l=153):68===l?1===v?(l=103,v=4):0===v&&(l=102):153===l?1===v&&(l=155):102===l?1===v&&(l=103):152===l?v<2&&(l=156,v=1):137===l?v<2&&(l=139,v=1):98===l?v<2&&(l=99,v=1):38===l?v<2&&(l=39,v=1):18===l?v>0?(l=156,v=4):l=152:33===l?v>0?(l=139,v=4):l=137:72===l?v>0?(l=99,v=4):l=98:132===l&&(v>0?(l=39,v=4):l=38)}if(0!=l&&170!=l){var g,m,_,b,S,x,C,w;g=m=_=b=S=x=C=w=.5;var P=[];1===l?(_=1-Ho(t,h,p),w=1-Ho(t,f,p),P.push(jo[l])):169===l?(_=Ho(a,p,h),w=Ho(a,p,f),P.push(jo[l])):4===l?(x=1-Ho(t,c,h),b=Ho(t,p,h),P.push(Fo[l])):166===l?(x=Ho(a,h,c),b=1-Ho(a,h,p),P.push(Fo[l])):16===l?(S=Ho(t,h,c),m=Ho(t,f,c),P.push(Do[l])):154===l?(S=1-Ho(a,c,h),m=1-Ho(a,c,f),P.push(Do[l])):64===l?(C=Ho(t,p,f),g=1-Ho(t,c,f),P.push(Go[l])):106===l?(C=1-Ho(a,f,p),g=Ho(a,f,c),P.push(Go[l])):168===l?(b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),P.push(Bo[l]),P.push(jo[l])):2===l?(b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),P.push(Bo[l]),P.push(jo[l])):162===l?(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),P.push(Bo[l]),P.push(jo[l])):8===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),P.push(Do[l]),P.push(Fo[l])):138===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(Do[l]),P.push(Fo[l])):32===l?(S=Ho(a,h,c),x=Ho(t,h,c),g=Ho(t,f,c),m=Ho(a,f,c),P.push(Do[l]),P.push(Fo[l])):42===l?(w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c),P.push(Uo[l]),P.push(Go[l])):128===l&&(w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(Uo[l]),P.push(Go[l])),5===l?(x=1-Ho(t,c,h),w=1-Ho(t,f,p),P.push(Fo[l])):165===l?(x=Ho(a,h,c),w=Ho(a,p,f),P.push(Fo[l])):20===l?(b=Ho(t,p,h),m=Ho(t,f,c),P.push(Bo[l])):150===l?(b=1-Ho(a,h,p),m=1-Ho(a,c,f),P.push(Bo[l])):80===l?(S=Ho(t,h,c),C=Ho(t,p,f),P.push(Do[l])):90===l?(S=1-Ho(a,c,h),C=1-Ho(a,f,p),P.push(Do[l])):65===l?(_=1-Ho(t,h,p),g=1-Ho(t,c,f),P.push(jo[l])):105===l?(_=Ho(a,p,h),g=Ho(a,f,c),P.push(jo[l])):160===l?(S=Ho(a,h,c),x=Ho(t,h,c),w=Ho(t,p,f),C=Ho(a,p,f),P.push(Do[l]),P.push(Fo[l])):10===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),w=1-Ho(a,f,p),C=1-Ho(t,f,p),P.push(Do[l]),P.push(Fo[l])):130===l?(b=1-Ho(t,h,p),_=1-Ho(a,h,p),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(Bo[l]),P.push(jo[l])):40===l?(b=Ho(a,p,h),_=Ho(t,p,h),g=Ho(t,f,c),m=Ho(a,f,c),P.push(Bo[l]),P.push(jo[l])):101===l?(x=Ho(a,h,c),g=Ho(a,f,c),P.push(Fo[l])):69===l?(x=1-Ho(t,c,h),g=1-Ho(t,c,f),P.push(Fo[l])):149===l?(w=Ho(a,p,f),m=1-Ho(a,c,f),P.push(Uo[l])):21===l?(w=1-Ho(t,f,p),m=Ho(t,f,c),P.push(Uo[l])):86===l?(b=1-Ho(a,h,p),C=1-Ho(a,f,p),P.push(Bo[l])):84===l?(b=Ho(t,p,h),C=Ho(t,p,f),P.push(Bo[l])):89===l?(S=1-Ho(a,c,h),_=Ho(a,p,h),P.push(jo[l])):81===l?(S=Ho(t,h,c),_=1-Ho(t,h,p),P.push(jo[l])):96===l?(S=Ho(a,h,c),x=Ho(t,h,c),C=Ho(t,p,f),g=Ho(a,f,c),P.push(Do[l]),P.push(Fo[l])):74===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),C=1-Ho(a,f,p),g=1-Ho(t,c,f),P.push(Do[l]),P.push(Fo[l])):24===l?(S=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),m=Ho(t,f,c),P.push(Do[l]),P.push(jo[l])):146===l?(S=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),m=1-Ho(a,c,f),P.push(Do[l]),P.push(jo[l])):6===l?(x=1-Ho(t,c,h),b=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),P.push(Fo[l]),P.push(Bo[l])):164===l?(x=Ho(a,h,c),b=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),P.push(Fo[l]),P.push(Bo[l])):129===l?(_=1-Ho(t,h,p),w=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(jo[l]),P.push(Uo[l])):41===l?(_=Ho(a,p,h),w=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c),P.push(jo[l]),P.push(Uo[l])):66===l?(b=1-Ho(t,h,p),_=1-Ho(a,h,p),C=1-Ho(a,f,p),g=1-Ho(t,c,f),P.push(Bo[l]),P.push(jo[l])):104===l?(b=Ho(a,p,h),_=Ho(t,p,h),C=Ho(t,p,f),g=Ho(a,f,c),P.push(jo[l]),P.push(Vo[l])):144===l?(S=Ho(t,h,c),w=Ho(t,p,f),C=Ho(a,p,f),m=1-Ho(a,c,f),P.push(Do[l]),P.push(Go[l])):26===l?(S=1-Ho(a,c,h),w=1-Ho(a,f,p),C=1-Ho(t,f,p),m=Ho(t,f,c),P.push(Do[l]),P.push(Go[l])):36===l?(x=Ho(a,h,c),b=Ho(t,p,h),g=Ho(t,f,c),m=Ho(a,f,c),P.push(Fo[l]),P.push(Bo[l])):134===l?(x=1-Ho(t,c,h),b=1-Ho(a,h,p),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(Fo[l]),P.push(Bo[l])):9===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),_=Ho(a,p,h),w=1-Ho(t,f,p),P.push(Do[l]),P.push(Fo[l])):161===l?(S=Ho(a,h,c),x=Ho(t,h,c),_=1-Ho(t,h,p),w=Ho(a,p,f),P.push(Do[l]),P.push(Fo[l])):37===l?(x=Ho(a,h,c),w=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c),P.push(Fo[l]),P.push(Uo[l])):133===l?(x=1-Ho(t,c,h),w=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f),P.push(Fo[l]),P.push(Uo[l])):148===l?(b=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),m=1-Ho(a,c,f),P.push(Bo[l]),P.push(Go[l])):22===l?(b=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),m=Ho(t,f,c),P.push(Bo[l]),P.push(Go[l])):82===l?(S=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),C=1-Ho(a,f,p),P.push(Do[l]),P.push(jo[l])):88===l?(S=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),C=Ho(t,p,f),P.push(Do[l]),P.push(jo[l])):73===l?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),_=Ho(a,p,h),g=1-Ho(t,c,f),P.push(Do[l]),P.push(Fo[l])):97===l?(S=Ho(a,h,c),x=Ho(t,h,c),_=1-Ho(t,h,p),g=Ho(a,f,c),P.push(Do[l]),P.push(Fo[l])):145===l?(S=Ho(t,h,c),_=1-Ho(t,h,p),w=Ho(a,p,f),m=1-Ho(a,c,f),P.push(Do[l]),P.push(Uo[l])):25===l?(S=1-Ho(a,c,h),_=Ho(a,p,h),w=1-Ho(t,f,p),m=Ho(t,f,c),P.push(Do[l]),P.push(Uo[l])):70===l?(x=1-Ho(t,c,h),b=1-Ho(a,h,p),C=1-Ho(a,f,p),g=1-Ho(t,c,f),P.push(Fo[l]),P.push(Bo[l])):100===l?(x=Ho(a,h,c),b=Ho(t,p,h),C=Ho(t,p,f),g=Ho(a,f,c),P.push(Fo[l]),P.push(Bo[l])):34===l?(0===v?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)):(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)),P.push(Do[l]),P.push(Fo[l]),P.push(Uo[l]),P.push(Go[l])):35===l?(4===v?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)):(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)),P.push(Do[l]),P.push(Fo[l]),P.push(jo[l]),P.push(Go[l])):136===l?(0===v?(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)):(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)),P.push(Do[l]),P.push(Fo[l]),P.push(Uo[l]),P.push(Go[l])):153===l?(0===v?(S=Ho(t,h,c),_=1-Ho(t,h,p),w=1-Ho(t,f,p),m=Ho(t,f,c)):(S=1-Ho(a,c,h),_=Ho(a,p,h),w=Ho(a,p,f),m=1-Ho(a,c,f)),P.push(Do[l]),P.push(jo[l])):102===l?(0===v?(x=1-Ho(t,c,h),b=Ho(t,p,h),C=Ho(t,p,f),g=1-Ho(t,c,f)):(x=Ho(a,h,c),b=1-Ho(a,h,p),C=1-Ho(a,f,p),g=Ho(a,f,c)),P.push(Fo[l]),P.push(Go[l])):155===l?(4===v?(S=Ho(t,h,c),_=1-Ho(t,h,p),w=1-Ho(t,f,p),m=Ho(t,f,c)):(S=1-Ho(a,c,h),_=Ho(a,p,h),w=Ho(a,p,f),m=1-Ho(a,c,f)),P.push(Do[l]),P.push(Uo[l])):103===l?(4===v?(x=1-Ho(t,c,h),b=Ho(t,p,h),C=Ho(t,p,f),g=1-Ho(t,c,f)):(x=Ho(a,h,c),b=1-Ho(a,h,p),C=1-Ho(a,f,p),g=Ho(a,f,c)),P.push(Fo[l]),P.push(Bo[l])):152===l?(0===v?(S=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),m=Ho(t,f,c)):(S=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),m=1-Ho(a,c,f)),P.push(Do[l]),P.push(Bo[l]),P.push(jo[l])):156===l?(4===v?(S=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),m=Ho(t,f,c)):(S=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),m=1-Ho(a,c,f)),P.push(Do[l]),P.push(jo[l]),P.push(Go[l])):137===l?(0===v?(S=Ho(a,h,c),x=Ho(t,h,c),_=1-Ho(t,h,p),w=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)):(S=1-Ho(t,c,h),x=1-Ho(a,c,h),_=Ho(a,p,h),w=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)),P.push(Do[l]),P.push(Fo[l]),P.push(jo[l])):139===l?(4===v?(S=Ho(a,h,c),x=Ho(t,h,c),_=1-Ho(t,h,p),w=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)):(S=1-Ho(t,c,h),x=1-Ho(a,c,h),_=Ho(a,p,h),w=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)),P.push(Do[l]),P.push(Fo[l]),P.push(Uo[l])):98===l?(0===v?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),C=Ho(t,p,f),g=1-Ho(t,c,f)):(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),C=1-Ho(a,f,p),g=Ho(a,f,c)),P.push(Do[l]),P.push(Fo[l]),P.push(Go[l])):99===l?(4===v?(S=1-Ho(t,c,h),x=1-Ho(a,c,h),b=Ho(a,p,h),_=Ho(t,p,h),C=Ho(t,p,f),g=1-Ho(t,c,f)):(S=Ho(a,h,c),x=Ho(t,h,c),b=1-Ho(t,h,p),_=1-Ho(a,h,p),C=1-Ho(a,f,p),g=Ho(a,f,c)),P.push(Do[l]),P.push(Fo[l]),P.push(jo[l])):38===l?(0===v?(x=1-Ho(t,c,h),b=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)):(x=Ho(a,h,c),b=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)),P.push(Fo[l]),P.push(Uo[l]),P.push(Go[l])):39===l?(4===v?(x=1-Ho(t,c,h),b=Ho(t,p,h),w=Ho(t,p,f),C=Ho(a,p,f),g=1-Ho(a,c,f),m=1-Ho(t,c,f)):(x=Ho(a,h,c),b=1-Ho(a,h,p),w=1-Ho(a,f,p),C=1-Ho(t,f,p),g=Ho(t,f,c),m=Ho(a,f,c)),P.push(Fo[l]),P.push(Bo[l]),P.push(Go[l])):85===l&&(S=1,x=0,b=1,_=0,w=0,C=1,g=0,m=1),(g<0||g>1||m<0||m>1||S<0||S>1||b<0||b>1||w<0||w>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+f+","+c+","+h+","+p+" "+v+" "+g+" "+m+" "+S+" "+x+" "+b+" "+_+" "+w+" "+C),o.cells[s][u]={cval:l,cval_real:d,flipped:v,topleft:g,topright:m,righttop:S,rightbottom:x,bottomright:b,bottomleft:_,leftbottom:w,lefttop:C,edges:P}}}}}return o}(e,t,r);return $i.polygons?($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(e){var t=[],r=0;return e.cells.forEach(function(e,n){e.forEach(function(e,i){if(void 0!==e){var o=zo[e.cval](e);"object"==typeof o&&Wo(o)?"object"==typeof o[0]&&Wo(o[0])?"object"==typeof o[0][0]&&Wo(o[0][0])?o.forEach(function(e){e.forEach(function(e){e[0]+=i,e[1]+=n}),t[r++]=e}):(o.forEach(function(e){e[0]+=i,e[1]+=n}),t[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),t}(l)):($i.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(e){for(var t=[],r=e.rows,n=e.cols,i=[],o=0;o<r;o++)for(var a=0;a<n;a++)if(void 0!==e.cells[o][a]&&e.cells[o][a].edges.length>0){var s=Xo(e.cells[o][a]),u=null,l=a,f=o;null!==s&&i.push([s.p[0]+l,s.p[1]+f]);do{if(null===(u=Yo(e.cells[f][l],s.x,s.y,s.o)))break;if(i.push([u.p[0]+l,u.p[1]+f]),l+=u.x,s=u,(f+=u.y)<0||f>=r||l<0||l>=n||void 0===e.cells[f][l]){var c=Zo(e,l-=u.x,f-=u.y,u.x,u.y,u.o);if(null===c)break;c.path.forEach(function(e){i.push(e)}),l=c.i,f=c.j,s=c}}while(void 0!==e.cells[f][l]&&e.cells[f][l].edges.length>0);t.push(i),i=[],e.cells[o][a].edges.length>0&&a--}return t}(l)),"function"==typeof $i.successCallback&&$i.successCallback(u),u}var to=64,ro=16,no=[],io=[],oo=[],ao=[],so=[],uo=[],lo=[],fo=[],co=[],ho=[],po=[],vo=[],yo=[],go=[],mo=[],_o=[],bo=[],So=[],xo=[],Co=[],wo=[],Po=[],Io=[],Eo=[];lo[85]=ho[85]=-1,fo[85]=po[85]=0,co[85]=vo[85]=1,xo[85]=Po[85]=1,Co[85]=Io[85]=0,wo[85]=Eo[85]=1,no[85]=ao[85]=0,io[85]=so[85]=-1,oo[85]=mo[85]=0,_o[85]=yo[85]=0,bo[85]=go[85]=1,uo[85]=So[85]=1,Po[1]=Po[169]=0,Io[1]=Io[169]=-1,Eo[1]=Eo[169]=0,yo[1]=yo[169]=-1,go[1]=go[169]=0,mo[1]=mo[169]=0,ho[4]=ho[166]=0,po[4]=po[166]=-1,vo[4]=vo[166]=1,_o[4]=_o[166]=1,bo[4]=bo[166]=0,So[4]=So[166]=0,lo[16]=lo[154]=0,fo[16]=fo[154]=1,co[16]=co[154]=1,ao[16]=ao[154]=1,so[16]=so[154]=0,uo[16]=uo[154]=1,xo[64]=xo[106]=0,Co[64]=Co[106]=1,wo[64]=wo[106]=0,no[64]=no[106]=-1,io[64]=io[106]=0,oo[64]=oo[106]=1,xo[2]=xo[168]=0,Co[2]=Co[168]=-1,wo[2]=wo[168]=1,Po[2]=Po[168]=0,Io[2]=Io[168]=-1,Eo[2]=Eo[168]=0,yo[2]=yo[168]=-1,go[2]=go[168]=0,mo[2]=mo[168]=0,_o[2]=_o[168]=-1,bo[2]=bo[168]=0,So[2]=So[168]=1,lo[8]=lo[162]=0,fo[8]=fo[162]=-1,co[8]=co[162]=0,ho[8]=ho[162]=0,po[8]=po[162]=-1,vo[8]=vo[162]=1,yo[8]=yo[162]=1,go[8]=go[162]=0,mo[8]=mo[162]=1,_o[8]=_o[162]=1,bo[8]=bo[162]=0,So[8]=So[162]=0,lo[32]=lo[138]=0,fo[32]=fo[138]=1,co[32]=co[138]=1,ho[32]=ho[138]=0,po[32]=po[138]=1,vo[32]=vo[138]=0,no[32]=no[138]=1,io[32]=io[138]=0,oo[32]=oo[138]=0,ao[32]=ao[138]=1,so[32]=so[138]=0,uo[32]=uo[138]=1,Po[128]=Po[42]=0,Io[128]=Io[42]=1,Eo[128]=Eo[42]=1,xo[128]=xo[42]=0,Co[128]=Co[42]=1,wo[128]=wo[42]=0,no[128]=no[42]=-1,io[128]=io[42]=0,oo[128]=oo[42]=1,ao[128]=ao[42]=-1,so[128]=so[42]=0,uo[128]=uo[42]=0,ho[5]=ho[165]=-1,po[5]=po[165]=0,vo[5]=vo[165]=0,Po[5]=Po[165]=1,Io[5]=Io[165]=0,Eo[5]=Eo[165]=0,_o[20]=_o[150]=0,bo[20]=bo[150]=1,So[20]=So[150]=1,ao[20]=ao[150]=0,so[20]=so[150]=-1,uo[20]=uo[150]=1,lo[80]=lo[90]=-1,fo[80]=fo[90]=0,co[80]=co[90]=1,xo[80]=xo[90]=1,Co[80]=Co[90]=0,wo[80]=wo[90]=1,yo[65]=yo[105]=0,go[65]=go[105]=1,mo[65]=mo[105]=0,no[65]=no[105]=0,io[65]=io[105]=-1,oo[65]=oo[105]=0,lo[160]=lo[10]=-1,fo[160]=fo[10]=0,co[160]=co[10]=1,ho[160]=ho[10]=-1,po[160]=po[10]=0,vo[160]=vo[10]=0,Po[160]=Po[10]=1,Io[160]=Io[10]=0,Eo[160]=Eo[10]=0,xo[160]=xo[10]=1,Co[160]=Co[10]=0,wo[160]=wo[10]=1,_o[130]=_o[40]=0,bo[130]=bo[40]=1,So[130]=So[40]=1,yo[130]=yo[40]=0,go[130]=go[40]=1,mo[130]=mo[40]=0,no[130]=no[40]=0,io[130]=io[40]=-1,oo[130]=oo[40]=0,ao[130]=ao[40]=0,so[130]=so[40]=-1,uo[130]=uo[40]=1,ho[37]=ho[133]=0,po[37]=po[133]=1,vo[37]=vo[133]=1,Po[37]=Po[133]=0,Io[37]=Io[133]=1,Eo[37]=Eo[133]=0,no[37]=no[133]=-1,io[37]=io[133]=0,oo[37]=oo[133]=0,ao[37]=ao[133]=1,so[37]=so[133]=0,uo[37]=uo[133]=0,_o[148]=_o[22]=-1,bo[148]=bo[22]=0,So[148]=So[22]=0,Po[148]=Po[22]=0,Io[148]=Io[22]=-1,Eo[148]=Eo[22]=1,xo[148]=xo[22]=0,Co[148]=Co[22]=1,wo[148]=wo[22]=1,ao[148]=ao[22]=-1,so[148]=so[22]=0,uo[148]=uo[22]=1,lo[82]=lo[88]=0,fo[82]=fo[88]=-1,co[82]=co[88]=1,_o[82]=_o[88]=1,bo[82]=bo[88]=0,So[82]=So[88]=1,yo[82]=yo[88]=-1,go[82]=go[88]=0,mo[82]=mo[88]=1,xo[82]=xo[88]=0,Co[82]=Co[88]=-1,wo[82]=wo[88]=0,lo[73]=lo[97]=0,fo[73]=fo[97]=1,co[73]=co[97]=0,ho[73]=ho[97]=0,po[73]=po[97]=-1,vo[73]=vo[97]=0,yo[73]=yo[97]=1,go[73]=go[97]=0,mo[73]=mo[97]=0,no[73]=no[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=1,lo[145]=lo[25]=0,fo[145]=fo[25]=-1,co[145]=co[25]=0,yo[145]=yo[25]=1,go[145]=go[25]=0,mo[145]=mo[25]=1,Po[145]=Po[25]=0,Io[145]=Io[25]=1,Eo[145]=Eo[25]=1,ao[145]=ao[25]=-1,so[145]=so[25]=0,uo[145]=uo[25]=0,ho[70]=ho[100]=0,po[70]=po[100]=1,vo[70]=vo[100]=0,_o[70]=_o[100]=-1,bo[70]=bo[100]=0,So[70]=So[100]=1,xo[70]=xo[100]=0,Co[70]=Co[100]=-1,wo[70]=wo[100]=1,no[70]=no[100]=1,io[70]=io[100]=0,oo[70]=oo[100]=0,ho[101]=ho[69]=0,po[101]=po[69]=1,vo[101]=vo[69]=0,no[101]=no[69]=1,io[101]=io[69]=0,oo[101]=oo[69]=0,Po[149]=Po[21]=0,Io[149]=Io[21]=1,Eo[149]=Eo[21]=1,ao[149]=ao[21]=-1,so[149]=so[21]=0,uo[149]=uo[21]=0,_o[86]=_o[84]=-1,bo[86]=bo[84]=0,So[86]=So[84]=1,xo[86]=xo[84]=0,Co[86]=Co[84]=-1,wo[86]=wo[84]=1,lo[89]=lo[81]=0,fo[89]=fo[81]=-1,co[89]=co[81]=0,yo[89]=yo[81]=1,go[89]=go[81]=0,mo[89]=mo[81]=1,lo[96]=lo[74]=0,fo[96]=fo[74]=1,co[96]=co[74]=0,ho[96]=ho[74]=-1,po[96]=po[74]=0,vo[96]=vo[74]=1,xo[96]=xo[74]=1,Co[96]=Co[74]=0,wo[96]=wo[74]=0,no[96]=no[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=1,lo[24]=lo[146]=0,fo[24]=fo[146]=-1,co[24]=co[146]=1,_o[24]=_o[146]=1,bo[24]=bo[146]=0,So[24]=So[146]=1,yo[24]=yo[146]=0,go[24]=go[146]=1,mo[24]=mo[146]=1,ao[24]=ao[146]=0,so[24]=so[146]=-1,uo[24]=uo[146]=0,ho[6]=ho[164]=-1,po[6]=po[164]=0,vo[6]=vo[164]=1,_o[6]=_o[164]=-1,bo[6]=bo[164]=0,So[6]=So[164]=0,Po[6]=Po[164]=0,Io[6]=Io[164]=-1,Eo[6]=Eo[164]=1,xo[6]=xo[164]=1,Co[6]=Co[164]=0,wo[6]=wo[164]=0,yo[129]=yo[41]=0,go[129]=go[41]=1,mo[129]=mo[41]=1,Po[129]=Po[41]=0,Io[129]=Io[41]=1,Eo[129]=Eo[41]=0,no[129]=no[41]=-1,io[129]=io[41]=0,oo[129]=oo[41]=0,ao[129]=ao[41]=0,so[129]=so[41]=-1,uo[129]=uo[41]=0,_o[66]=_o[104]=0,bo[66]=bo[104]=1,So[66]=So[104]=0,yo[66]=yo[104]=-1,go[66]=go[104]=0,mo[66]=mo[104]=1,xo[66]=xo[104]=0,Co[66]=Co[104]=-1,wo[66]=wo[104]=0,no[66]=no[104]=0,io[66]=io[104]=-1,oo[66]=oo[104]=1,lo[144]=lo[26]=-1,fo[144]=fo[26]=0,co[144]=co[26]=0,Po[144]=Po[26]=1,Io[144]=Io[26]=0,Eo[144]=Eo[26]=1,xo[144]=xo[26]=0,Co[144]=Co[26]=1,wo[144]=wo[26]=1,ao[144]=ao[26]=-1,so[144]=so[26]=0,uo[144]=uo[26]=1,ho[36]=ho[134]=0,po[36]=po[134]=1,vo[36]=vo[134]=1,_o[36]=_o[134]=0,bo[36]=bo[134]=1,So[36]=So[134]=0,no[36]=no[134]=0,io[36]=io[134]=-1,oo[36]=oo[134]=1,ao[36]=ao[134]=1,so[36]=so[134]=0,uo[36]=uo[134]=0,lo[9]=lo[161]=-1,fo[9]=fo[161]=0,co[9]=co[161]=0,ho[9]=ho[161]=0,po[9]=po[161]=-1,vo[9]=vo[161]=0,yo[9]=yo[161]=1,go[9]=go[161]=0,mo[9]=mo[161]=0,Po[9]=Po[161]=1,Io[9]=Io[161]=0,Eo[9]=Eo[161]=1,lo[136]=0,fo[136]=1,co[136]=1,ho[136]=0,po[136]=1,vo[136]=0,_o[136]=-1,bo[136]=0,So[136]=1,yo[136]=-1,go[136]=0,mo[136]=0,Po[136]=0,Io[136]=-1,Eo[136]=0,xo[136]=0,Co[136]=-1,wo[136]=1,no[136]=1,io[136]=0,oo[136]=0,ao[136]=1,so[136]=0,uo[136]=1,lo[34]=0,fo[34]=-1,co[34]=0,ho[34]=0,po[34]=-1,vo[34]=1,_o[34]=1,bo[34]=0,So[34]=0,yo[34]=1,go[34]=0,mo[34]=1,Po[34]=0,Io[34]=1,Eo[34]=1,xo[34]=0,Co[34]=1,wo[34]=0,no[34]=-1,io[34]=0,oo[34]=1,ao[34]=-1,so[34]=0,uo[34]=0,lo[35]=0,fo[35]=1,co[35]=1,ho[35]=0,po[35]=-1,vo[35]=1,_o[35]=1,bo[35]=0,So[35]=0,yo[35]=-1,go[35]=0,mo[35]=0,Po[35]=0,Io[35]=-1,Eo[35]=0,xo[35]=0,Co[35]=1,wo[35]=0,no[35]=-1,io[35]=0,oo[35]=1,ao[35]=1,so[35]=0,uo[35]=1,lo[153]=0,fo[153]=1,co[153]=1,yo[153]=-1,go[153]=0,mo[153]=0,Po[153]=0,Io[153]=-1,Eo[153]=0,ao[153]=1,so[153]=0,uo[153]=1,ho[102]=0,po[102]=-1,vo[102]=1,_o[102]=1,bo[102]=0,So[102]=0,xo[102]=0,Co[102]=1,wo[102]=0,no[102]=-1,io[102]=0,oo[102]=1,lo[155]=0,fo[155]=-1,co[155]=0,yo[155]=1,go[155]=0,mo[155]=1,Po[155]=0,Io[155]=1,Eo[155]=1,ao[155]=-1,so[155]=0,uo[155]=0,ho[103]=0,po[103]=1,vo[103]=0,_o[103]=-1,bo[103]=0,So[103]=1,xo[103]=0,Co[103]=-1,wo[103]=1,no[103]=1,io[103]=0,oo[103]=0,lo[152]=0,fo[152]=1,co[152]=1,_o[152]=-1,bo[152]=0,So[152]=1,yo[152]=-1,go[152]=0,mo[152]=0,Po[152]=0,Io[152]=-1,Eo[152]=0,xo[152]=0,Co[152]=-1,wo[152]=1,ao[152]=1,so[152]=0,uo[152]=1,lo[156]=0,fo[156]=-1,co[156]=1,_o[156]=1,bo[156]=0,So[156]=1,yo[156]=-1,go[156]=0,mo[156]=0,Po[156]=0,Io[156]=-1,Eo[156]=0,xo[156]=0,Co[156]=1,wo[156]=1,ao[156]=-1,so[156]=0,uo[156]=1,lo[137]=0,fo[137]=1,co[137]=1,ho[137]=0,po[137]=1,vo[137]=0,yo[137]=-1,go[137]=0,mo[137]=0,Po[137]=0,Io[137]=-1,Eo[137]=0,no[137]=1,io[137]=0,oo[137]=0,ao[137]=1,so[137]=0,uo[137]=1,lo[139]=0,fo[139]=1,co[139]=1,ho[139]=0,po[139]=-1,vo[139]=0,yo[139]=1,go[139]=0,mo[139]=0,Po[139]=0,Io[139]=1,Eo[139]=0,no[139]=-1,io[139]=0,oo[139]=0,ao[139]=1,so[139]=0,uo[139]=1,lo[98]=0,fo[98]=-1,co[98]=0,ho[98]=0,po[98]=-1,vo[98]=1,_o[98]=1,bo[98]=0,So[98]=0,yo[98]=1,go[98]=0,mo[98]=1,xo[98]=0,Co[98]=1,wo[98]=0,no[98]=-1,io[98]=0,oo[98]=1,lo[99]=0,fo[99]=1,co[99]=0,ho[99]=0,po[99]=-1,vo[99]=1,_o[99]=1,bo[99]=0,So[99]=0,yo[99]=-1,go[99]=0,mo[99]=1,xo[99]=0,Co[99]=-1,wo[99]=0,no[99]=1,io[99]=0,oo[99]=1,ho[38]=0,po[38]=-1,vo[38]=1,_o[38]=1,bo[38]=0,So[38]=0,Po[38]=0,Io[38]=1,Eo[38]=1,xo[38]=0,Co[38]=1,wo[38]=0,no[38]=-1,io[38]=0,oo[38]=1,ao[38]=-1,so[38]=0,uo[38]=0,ho[39]=0,po[39]=1,vo[39]=1,_o[39]=-1,bo[39]=0,So[39]=0,Po[39]=0,Io[39]=-1,Eo[39]=1,xo[39]=0,Co[39]=1,wo[39]=0,no[39]=-1,io[39]=0,oo[39]=1,ao[39]=1,so[39]=0,uo[39]=0;var Lo=function(e){return[[e.bottomleft,0],[0,0],[0,e.leftbottom]]},To=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0]]},Mo=function(e){return[[e.topright,1],[1,1],[1,e.righttop]]},Oo=function(e){return[[0,e.lefttop],[0,1],[e.topleft,1]]},Ao=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop]]},No=function(e){return[[e.bottomright,0],[e.bottomleft,0],[1,e.righttop],[1,e.rightbottom]]},Ro=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.topleft,1],[e.topright,1]]},ko=function(e){return[[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},Do=[],Fo=[],Bo=[],jo=[],Uo=[],Go=[],Vo=[],qo=[];jo[1]=Uo[1]=18,jo[169]=Uo[169]=18,Bo[4]=Fo[4]=12,Bo[166]=Fo[166]=12,Do[16]=qo[16]=4,Do[154]=qo[154]=4,Go[64]=Vo[64]=22,Go[106]=Vo[106]=22,Bo[2]=Go[2]=17,jo[2]=Uo[2]=18,Bo[168]=Go[168]=17,jo[168]=Uo[168]=18,Do[8]=jo[8]=9,Fo[8]=Bo[8]=12,Do[162]=jo[162]=9,Fo[162]=Bo[162]=12,Do[32]=qo[32]=4,Fo[32]=Vo[32]=1,Do[138]=qo[138]=4,Fo[138]=Vo[138]=1,Uo[128]=qo[128]=21,Go[128]=Vo[128]=22,Uo[42]=qo[42]=21,Go[42]=Vo[42]=22,Fo[5]=Uo[5]=14,Fo[165]=Uo[165]=14,Bo[20]=qo[20]=6,Bo[150]=qo[150]=6,Do[80]=Go[80]=11,Do[90]=Go[90]=11,jo[65]=Vo[65]=3,jo[105]=Vo[105]=3,Do[160]=Go[160]=11,Fo[160]=Uo[160]=14,Do[10]=Go[10]=11,Fo[10]=Uo[10]=14,Bo[130]=qo[130]=6,jo[130]=Vo[130]=3,Bo[40]=qo[40]=6,jo[40]=Vo[40]=3,Fo[101]=Vo[101]=1,Fo[69]=Vo[69]=1,Uo[149]=qo[149]=21,Uo[21]=qo[21]=21,Bo[86]=Go[86]=17,Bo[84]=Go[84]=17,Do[89]=jo[89]=9,Do[81]=jo[81]=9,Do[96]=Vo[96]=0,Fo[96]=Go[96]=15,Do[74]=Vo[74]=0,Fo[74]=Go[74]=15,Do[24]=Bo[24]=8,jo[24]=qo[24]=7,Do[146]=Bo[146]=8,jo[146]=qo[146]=7,Fo[6]=Go[6]=15,Bo[6]=Uo[6]=16,Fo[164]=Go[164]=15,Bo[164]=Uo[164]=16,jo[129]=qo[129]=7,Uo[129]=Vo[129]=20,jo[41]=qo[41]=7,Uo[41]=Vo[41]=20,Bo[66]=Vo[66]=2,jo[66]=Go[66]=19,Bo[104]=Vo[104]=2,jo[104]=Go[104]=19,Do[144]=Uo[144]=10,Go[144]=qo[144]=23,Do[26]=Uo[26]=10,Go[26]=qo[26]=23,Fo[36]=qo[36]=5,Bo[36]=Vo[36]=2,Fo[134]=qo[134]=5,Bo[134]=Vo[134]=2,Do[9]=Uo[9]=10,Fo[9]=jo[9]=13,Do[161]=Uo[161]=10,Fo[161]=jo[161]=13,Fo[37]=qo[37]=5,Uo[37]=Vo[37]=20,Fo[133]=qo[133]=5,Uo[133]=Vo[133]=20,Bo[148]=Uo[148]=16,Go[148]=qo[148]=23,Bo[22]=Uo[22]=16,Go[22]=qo[22]=23,Do[82]=Bo[82]=8,jo[82]=Go[82]=19,Do[88]=Bo[88]=8,jo[88]=Go[88]=19,Do[73]=Vo[73]=0,Fo[73]=jo[73]=13,Do[97]=Vo[97]=0,Fo[97]=jo[97]=13,Do[145]=jo[145]=9,Uo[145]=qo[145]=21,Do[25]=jo[25]=9,Uo[25]=qo[25]=21,Fo[70]=Vo[70]=1,Bo[70]=Go[70]=17,Fo[100]=Vo[100]=1,Bo[100]=Go[100]=17,Do[34]=jo[34]=9,Fo[34]=Bo[34]=12,Uo[34]=qo[34]=21,Go[34]=Vo[34]=22,Do[136]=qo[136]=4,Fo[136]=Vo[136]=1,Bo[136]=Go[136]=17,jo[136]=Uo[136]=18,Do[35]=qo[35]=4,Fo[35]=Bo[35]=12,jo[35]=Uo[35]=18,Go[35]=Vo[35]=22,Do[153]=qo[153]=4,jo[153]=Uo[153]=18,Fo[102]=Bo[102]=12,Go[102]=Vo[102]=22,Do[155]=jo[155]=9,Uo[155]=qo[155]=23,Fo[103]=Vo[103]=1,Bo[103]=Go[103]=17,Do[152]=qo[152]=4,Bo[152]=Go[152]=17,jo[152]=Uo[152]=18,Do[156]=Bo[156]=8,jo[156]=Uo[156]=18,Go[156]=qo[156]=23,Do[137]=qo[137]=4,Fo[137]=Vo[137]=1,jo[137]=Uo[137]=18,Do[139]=qo[139]=4,Fo[139]=jo[139]=13,Uo[139]=Vo[139]=20,Do[98]=jo[98]=9,Fo[98]=Bo[98]=12,Go[98]=Vo[98]=22,Do[99]=Vo[99]=0,Fo[99]=Bo[99]=12,jo[99]=Go[99]=19,Fo[38]=Bo[38]=12,Uo[38]=qo[38]=21,Go[38]=Vo[38]=22,Fo[39]=qo[39]=5,Bo[39]=Uo[39]=16,Go[39]=Vo[39]=22;var zo=[];function Ho(e,t,r){return(e-t)/(r-t)}function Wo(e){return e.constructor.toString().indexOf("Array")>-1}function Zo(e,t,r,n,i,o){for(var a=e.cells[r][t],s=a.cval_real,u=t+n,l=r+i,f=[],c=!1;!c;){if(void 0===e.cells[l]||void 0===e.cells[l][u])if(l-=i,u-=n,s=(a=e.cells[l][u]).cval_real,-1===i)if(0===o)if(1&s)f.push([u,l]),n=-1,i=0,o=0;else{if(!(4&s)){f.push([u+a.bottomright,l]),n=0,i=1,o=1,c=!0;break}f.push([u+1,l]),n=1,i=0,o=0}else{if(!(1&s)){if(4&s){f.push([u+a.bottomright,l]),n=0,i=1,o=1,c=!0;break}f.push([u+a.bottomleft,l]),n=0,i=1,o=0,c=!0;break}f.push([u,l]),n=-1,i=0,o=0}else if(1===i)if(0===o){if(!(s&ro)){if(s&to){f.push([u+a.topleft,l+1]),n=0,i=-1,o=0,c=!0;break}f.push([u+a.topright,l+1]),n=0,i=-1,o=1,c=!0;break}f.push([u+1,l+1]),n=1,i=0,o=1}else f.push([u+1,l+1]),n=1,i=0,o=1;else if(-1===n)if(0===o){if(!(s&to)){if(1&s){f.push([u,l+a.leftbottom]),n=1,i=0,o=0,c=!0;break}f.push([u,l+a.lefttop]),n=1,i=0,o=1,c=!0;break}f.push([u,l+1]),n=0,i=1,o=0}else{if(!(s&to)){console.log("MarchingSquaresJS-isoBands: wtf");break}f.push([u,l+1]),n=0,i=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&s)){f.push([u+1,l+a.rightbottom]),n=-1,i=0,o=0,c=!0;break}f.push([u+1,l]),n=0,i=-1,o=1}else{if(!(4&s)){if(s&ro){f.push([u+1,l+a.righttop]),n=-1,i=0,o=1;break}f.push([u+1,l+a.rightbottom]),n=-1,i=0,o=0,c=!0;break}f.push([u+1,l]),n=0,i=-1,o=1}}else if(s=(a=e.cells[l][u]).cval_real,-1===n)if(0===o)if(void 0!==e.cells[l-1]&&void 0!==e.cells[l-1][u])n=0,i=-1,o=1;else{if(!(1&s)){f.push([u+a.bottomright,l]),n=0,i=1,o=1,c=!0;break}f.push([u,l])}else{if(!(s&to)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[l+1]&&void 0!==e.cells[l+1][u])n=0,i=1,o=0;else{if(!(s&ro)){f.push([u+a.topleft,l+1]),n=0,i=-1,o=0,c=!0;break}f.push([u+1,l+1]),n=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[l][u+1])n=1,i=0,o=1;else{if(!(4&s)){f.push([u+1,l+a.righttop]),n=-1,i=0,o=1,c=!0;break}f.push([u+1,l]),n=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==e.cells[l][u-1])n=-1,i=0,o=0;else{if(!(s&to)){f.push([u,l+a.leftbottom]),n=1,i=0,o=0,c=!0;break}f.push([u,l+1]),n=0,i=1,o=0}}if(l+=i,(u+=n)===t&&l===r)break}return{path:f,i:u,j:l,x:n,y:i,o:o}}function Xo(e){if(e.edges.length>0){var t=e.edges[e.edges.length-1],r=e.cval_real;switch(t){case 0:return r&ro?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 1:return 4&r?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 2:return 4&r?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topleft,1],x:0,y:-1,o:0};case 3:return 1&r?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 4:return r&ro?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 5:return 4&r?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 6:return 4&r?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};case 7:return 1&r?{p:[e.topright,1],x:0,y:-1,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 8:return 4&r?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.righttop],x:-1,y:0,o:1};case 9:return 1&r?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 10:return 1&r?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.righttop],x:-1,y:0,o:1};case 11:return r&to?{p:[1,e.righttop],x:-1,y:0,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 12:return 4&r?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 13:return 1&r?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 14:return 1&r?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[1,e.rightbottom],x:-1,y:0,o:0};case 15:return r&to?{p:[1,e.rightbottom],x:-1,y:0,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 16:return 4&r?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 17:return r&to?{p:[e.bottomright,0],x:0,y:1,o:1}:{p:[0,e.lefttop],x:1,y:0,o:1};case 18:return 1&r?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.bottomleft,0],x:0,y:1,o:0};case 19:return r&to?{p:[e.bottomleft,0],x:0,y:1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 20:return r&to?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.leftbottom],x:1,y:0,o:0};case 21:return r&ro?{p:[0,e.leftbottom],x:1,y:0,o:0}:{p:[e.topright,1],x:0,y:-1,o:1};case 22:return r&to?{p:[e.topleft,1],x:0,y:-1,o:0}:{p:[0,e.lefttop],x:1,y:0,o:1};case 23:return r&ro?{p:[0,e.lefttop],x:1,y:0,o:1}:{p:[e.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e)}}return null}function Yo(e,t,r,n){var i,o,a,s,u,l=e.cval;switch(t){case-1:switch(n){case 0:i=Fo[l],a=ho[l],s=po[l],u=vo[l];break;default:i=Do[l],a=lo[l],s=fo[l],u=co[l]}break;case 1:switch(n){case 0:i=Uo[l],a=Po[l],s=Io[l],u=Eo[l];break;default:i=Go[l],a=xo[l],s=Co[l],u=wo[l]}break;default:switch(r){case-1:switch(n){case 0:i=Vo[l],a=no[l],s=io[l],u=oo[l];break;default:i=qo[l],a=ao[l],s=so[l],u=uo[l]}break;case 1:switch(n){case 0:i=jo[l],a=yo[l],s=go[l],u=mo[l];break;default:i=Bo[l],a=_o[l],s=bo[l],u=So[l]}}}if(o=e.edges.indexOf(i),void 0===e.edges[o])return null;switch(function(e,t){delete e.edges[t];for(var r=t+1;r<e.edges.length;r++)e.edges[r-1]=e.edges[r];e.edges.pop()}(e,o),l=e.cval_real,i){case 0:l&ro?(t=e.topleft,r=1):(t=1,r=e.righttop);break;case 1:4&l?(t=1,r=e.rightbottom):(t=e.topleft,r=1);break;case 2:4&l?(t=e.topleft,r=1):(t=e.bottomright,r=0);break;case 3:1&l?(t=e.bottomleft,r=0):(t=e.topleft,r=1);break;case 4:l&ro?(t=e.topright,r=1):(t=1,r=e.righttop);break;case 5:4&l?(t=1,r=e.rightbottom):(t=e.topright,r=1);break;case 6:4&l?(t=e.topright,r=1):(t=e.bottomright,r=0);break;case 7:1&l?(t=e.bottomleft,r=0):(t=e.topright,r=1);break;case 8:4&l?(t=1,r=e.righttop):(t=e.bottomright,r=0);break;case 9:1&l?(t=e.bottomleft,r=0):(t=1,r=e.righttop);break;case 10:1&l?(t=1,r=e.righttop):(t=0,r=e.leftbottom);break;case 11:l&to?(t=0,r=e.lefttop):(t=1,r=e.righttop);break;case 12:4&l?(t=1,r=e.rightbottom):(t=e.bottomright,r=0);break;case 13:1&l?(t=e.bottomleft,r=0):(t=1,r=e.rightbottom);break;case 14:1&l?(t=1,r=e.rightbottom):(t=0,r=e.leftbottom);break;case 15:l&to?(t=0,r=e.lefttop):(t=1,r=e.rightbottom);break;case 16:4&l?(t=0,r=e.leftbottom):(t=e.bottomright,r=0);break;case 17:l&to?(t=0,r=e.lefttop):(t=e.bottomright,r=0);break;case 18:1&l?(t=e.bottomleft,r=0):(t=0,r=e.leftbottom);break;case 19:l&to?(t=0,r=e.lefttop):(t=e.bottomleft,r=0);break;case 20:l&to?(t=0,r=e.leftbottom):(t=e.topleft,r=1);break;case 21:l&ro?(t=e.topright,r=1):(t=0,r=e.leftbottom);break;case 22:l&to?(t=0,r=e.lefttop):(t=e.topleft,r=1);break;case 23:l&ro?(t=e.topright,r=1):(t=0,r=e.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(e),null}return void 0!==t&&void 0!==r&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(e),console.log(t+" "+r+" "+a+" "+s+" "+u)),{p:[t,r],x:a,y:s,o:u}}function Qo(e){var t=[],r=[];e.forEach(function(e){var n=qn(f([e]));r.push(n),t.push({ring:e,area:n})}),r.sort(function(e,t){return t-e});var n=[];return r.forEach(function(e){for(var r=0;r<t.length;r++)if(t[r].area===e){n.push(t[r].ring),t.splice(r,1);break}}),n}function Jo(e){for(var t=e.map(function(e){return{lrCoordinates:e,grouped:!1}}),r=[];!$o(t);)for(var n=0;n<t.length;n++)if(!t[n].grouped){var i=[];i.push(t[n].lrCoordinates),t[n].grouped=!0;for(var o=f([t[n].lrCoordinates]),a=n+1;a<t.length;a++){if(!t[a].grouped)Ko(f([t[a].lrCoordinates]),o)&&(i.push(t[a].lrCoordinates),t[a].grouped=!0)}r.push(i)}return r}function Ko(e,t){for(var r=xr(e),n=0;n<r.features.length;n++)if(!gt(r.features[n],t))return!1;return!0}function $o(e){for(var t=0;t<e.length;t++)if(!1===e[t].grouped)return!1;return!0}function ea(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("angle is required");return 0===t||(n||(n=Sr(e)),!1!==i&&void 0!==i||(e=Pt(e)),N(e,function(e){var r=Gi(n,e)+t,i=kn(n,e),o=$(qi(n,i,r));e[0]=o[0],e[1]=o[1]})),e}function ta(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!e)throw new Error("geojson required");if("number"!=typeof t||0===t)throw new Error("invalid factor");var o=Array.isArray(n)||"object"==typeof n;return!0!==i&&(e=Pt(e)),"FeatureCollection"!==e.type||o?ra(e,t,n):(F(e,function(r,i){e.features[i]=ra(r,t,n)}),e)}function ra(e,t,r){var n="Point"===oe(e);return r=function(e,t){null==t&&(t="centroid");if(Array.isArray(t)||"object"==typeof t)return K(t);var r=e.bbox?e.bbox:J(e),n=r[0],i=r[1],o=r[2],a=r[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([n,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([n,a]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,a]);case"center":return br(e);case void 0:case null:case"centroid":return Sr(e);default:throw new Error("invalid origin")}}(e,r),1===t||n||N(e,function(e){var n=kn(r,e),i=Gi(r,e),o=$(qi(r,n*t,i));e[0]=o[0],e[1]=o[1],3===e.length&&(e[2]*=t)}),e}function na(e){var t=e[0],r=e[1];return[r[0]-t[0],r[1]-t[1]]}function ia(e,t){return e[0]*t[1]-t[0]*e[1]}function oa(e,t){return!function(e,t){return 0===ia(na(e),na(t))}(e,t)&&function(e,t){var r,n,i=e[0],o=na(e),a=t[0],s=na(t),u=ia(o,s);return function(e,t){return[e[0]+t[0],e[1]+t[1]]}(i,function(e,t){return[e*t[0],e*t[1]]}(ia((n=i,[(r=a)[0]-n[0],r[1]-n[1]]),s)/u,o))}(e,t)}function aa(e,t,r){var n=[],i=x(t,r),o=$(e),a=[];return o.forEach(function(e,t){if(t!==o.length-1){var r=(l=e,f=o[t+1],c=i,h=Math.sqrt((l[0]-f[0])*(l[0]-f[0])+(l[1]-f[1])*(l[1]-f[1])),p=l[0]+c*(f[1]-l[1])/h,d=f[0]+c*(f[1]-l[1])/h,v=l[1]+c*(l[0]-f[0])/h,y=f[1]+c*(l[0]-f[0])/h,[[p,v],[d,y]]);if(n.push(r),t>0){var s=n[t-1],u=oa(r,s);!1!==u&&(s[1]=u,r[0]=u),a.push(s[0]),t===o.length-2&&(a.push(r[0]),a.push(r[1]))}2===o.length&&(a.push(r[0]),a.push(r[1]))}var l,f,c,h,p,d,v,y}),h(a,e.properties)}function sa(e,t,r){var n=t[0]-e[0],i=t[1]-e[1],o=r[0]-t[0];return function(e){return(e>0)-(e<0)||+e}(n*(r[1]-t[1])-o*i)}function ua(e,t){return t.geometry.coordinates[0].every(function(t){return gt(u(t),e)})}zo[1]=zo[169]=Lo,zo[4]=zo[166]=To,zo[16]=zo[154]=Mo,zo[64]=zo[106]=Oo,zo[168]=zo[2]=Ao,zo[162]=zo[8]=No,zo[138]=zo[32]=Ro,zo[42]=zo[128]=ko,zo[5]=zo[165]=function(e){return[[0,0],[0,e.leftbottom],[1,e.rightbottom],[1,0]]},zo[20]=zo[150]=function(e){return[[1,0],[e.bottomright,0],[e.topright,1],[1,1]]},zo[80]=zo[90]=function(e){return[[1,1],[1,e.righttop],[0,e.lefttop],[0,1]]},zo[65]=zo[105]=function(e){return[[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},zo[160]=zo[10]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.leftbottom],[0,e.lefttop]]},zo[130]=zo[40]=function(e){return[[e.topleft,1],[e.topright,1],[e.bottomright,0],[e.bottomleft,0]]},zo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},zo[101]=zo[69]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,1],[e.topleft,1]]},zo[149]=zo[21]=function(e){return[[e.topright,1],[1,1],[1,0],[0,0],[0,e.leftbottom]]},zo[86]=zo[84]=function(e){return[[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[1,1]]},zo[89]=zo[81]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,1]]},zo[96]=zo[74]=function(e){return[[1,e.righttop],[1,e.rightbottom],[0,e.lefttop],[0,1],[e.topleft,1]]},zo[24]=zo[146]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[e.topright,1]]},zo[6]=zo[164]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop]]},zo[129]=zo[41]=function(e){return[[e.topright,1],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1]]},zo[66]=zo[104]=function(e){return[[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},zo[144]=zo[26]=function(e){return[[1,1],[1,e.righttop],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},zo[36]=zo[134]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[e.topleft,1],[e.topright,1]]},zo[9]=zo[161]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom]]},zo[37]=zo[133]=function(e){return[[1,e.rightbottom],[1,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},zo[148]=zo[22]=function(e){return[[1,1],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},zo[82]=zo[88]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1]]},zo[73]=zo[97]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,1],[e.topleft,1]]},zo[145]=zo[25]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},zo[70]=zo[100]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},zo[34]=function(e){return[ko(e),No(e)]},zo[35]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]},zo[136]=function(e){return[Ro(e),Ao(e)]},zo[153]=function(e){return[Mo(e),Lo(e)]},zo[102]=function(e){return[To(e),Oo(e)]},zo[155]=function(e){return[[1,1],[1,e.righttop],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topright,1]]},zo[103]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.lefttop],[0,1],[e.topleft,1]]},zo[152]=function(e){return[Mo(e),Ao(e)]},zo[156]=function(e){return[[1,1],[1,e.righttop],[e.bottomright,0],[e.bottomleft,0],[0,e.leftbottom],[0,e.lefttop],[e.topright,1]]},zo[137]=function(e){return[Ro(e),Lo(e)]},zo[139]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomleft,0],[0,0],[0,e.leftbottom],[e.topleft,1],[e.topright,1]]},zo[98]=function(e){return[No(e),Oo(e)]},zo[99]=function(e){return[[1,e.righttop],[1,e.rightbottom],[e.bottomright,0],[e.bottomleft,0],[0,e.lefttop],[0,1],[e.topleft,1]]},zo[38]=function(e){return[To(e),ko(e)]},zo[39]=function(e){return[[1,e.rightbottom],[1,0],[e.bottomright,0],[0,e.leftbottom],[0,e.lefttop],[e.topleft,1],[e.topright,1]]};var la=function(){function e(t){this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return e.buildId=function(e){return e.join(",")},e.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})},e.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})},e.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},e.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,r){var n=t.to,i=r.to;if(n.coordinates[0]-e.coordinates[0]>=0&&i.coordinates[0]-e.coordinates[0]<0)return 1;if(n.coordinates[0]-e.coordinates[0]<0&&i.coordinates[0]-e.coordinates[0]>=0)return-1;if(n.coordinates[0]-e.coordinates[0]==0&&i.coordinates[0]-e.coordinates[0]==0)return n.coordinates[1]-e.coordinates[1]>=0||i.coordinates[1]-e.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=sa(e.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-e.coordinates[0],2)+Math.pow(n.coordinates[1]-e.coordinates[1],2)-(Math.pow(i.coordinates[0]-e.coordinates[0],2)+Math.pow(i.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},e.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},e.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},e.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},e}(),fa=function(){function e(e,t){this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return e.prototype.getSymetric=function(){return this.symetric||(this.symetric=new e(this.to,this.from),this.symetric.symetric=this),this.symetric},e.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},e.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},e.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},e.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},e.prototype.compareTo=function(e){return sa(e.from.coordinates,e.to.coordinates,this.to.coordinates)},e}(),ca=function(){function e(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return e.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},e.prototype.get=function(e){return this.edges[e]},Object.defineProperty(e.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.edges.forEach(e)},e.prototype.map=function(e){return this.edges.map(e)},e.prototype.some=function(e){return this.edges.some(e)},e.prototype.isValid=function(){return!0},e.prototype.isHole=function(){var e=this,t=this.edges.reduce(function(t,r,n){return r.from.coordinates[1]>e.edges[t].from.coordinates[1]&&(t=n),t},0),r=(0===t?this.length:t)-1,n=(t+1)%this.length,i=sa(this.edges[r].from.coordinates,this.edges[t].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},e.prototype.toMultiPoint=function(){return y(this.edges.map(function(e){return e.from.coordinates}))},e.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(e){return e.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=f([e])},e.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=vr(this.toPolygon())},e.findEdgeRingContaining=function(e,t){var r,n,i=e.getEnvelope();return t.forEach(function(t){var o,a,s,l,f,c,h=t.getEnvelope();if((n&&(r=n.getEnvelope()),a=i,s=(o=h).geometry.coordinates[0].map(function(e){return e[0]}),l=o.geometry.coordinates[0].map(function(e){return e[1]}),f=a.geometry.coordinates[0].map(function(e){return e[0]}),c=a.geometry.coordinates[0].map(function(e){return e[1]}),Math.max.apply(null,s)!==Math.max.apply(null,f)||Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.min.apply(null,s)!==Math.min.apply(null,f)||Math.min.apply(null,l)!==Math.min.apply(null,c))&&ua(h,i)){for(var p=e.map(function(e){return e.from.coordinates}),d=void 0,v=function(e){t.some(function(t){return r=e,n=t.from.coordinates,r[0]===n[0]&&r[1]===n[1];var r,n})||(d=e)},y=0,g=p;y<g.length;y++){v(g[y])}d&&t.inside(u(d))&&(n&&!ua(r,h)||(n=t))}}),n},e.prototype.inside=function(e){return gt(e,this.toPolygon())},e}();var ha=function(){function e(){this.edges=[],this.nodes={}}return e.fromGeoJson=function(t){!function(e){if(!e)throw new Error("No geojson passed");if("FeatureCollection"!==e.type&&"GeometryCollection"!==e.type&&"MultiLineString"!==e.type&&"LineString"!==e.type&&"Feature"!==e.type)throw new Error("Invalid input type '"+e.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var r=new e;return V(t,function(e){re(e,"LineString","Graph::fromGeoJson"),R(e,function(e,t){if(e){var n=r.getNode(e),i=r.getNode(t);r.addEdge(n,i)}return t})}),r},e.prototype.getNode=function(e){var t=la.buildId(e),r=this.nodes[t];return r||(r=this.nodes[t]=new la(e)),r},e.prototype.addEdge=function(e,t){var r=new fa(e,t),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},e.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})},e.prototype._removeIfDangle=function(e){var t=this;if(e.innerEdges.length<=1){var r=e.getOuterEdges().map(function(e){return e.to});this.removeNode(e),r.forEach(function(e){return t._removeIfDangle(e)})}},e.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})},e.prototype._computeNextCWEdges=function(e){var t=this;void 0===e?Object.keys(this.nodes).forEach(function(e){return t._computeNextCWEdges(t.nodes[e])}):e.getOuterEdges().forEach(function(t,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=t})},e.prototype._computeNextCCWEdges=function(e,t){for(var r,n,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,l=void 0;a.label===t&&(u=a),s.label===t&&(l=s),u&&l&&(l&&(n=l),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},e.prototype._findLabeledEdgeRings=function(){var e=[],t=0;return this.edges.forEach(function(r){if(!(r.label>=0)){e.push(r);var n=r;do{n.label=t,n=n.next}while(!r.isEqual(n));t++}}),e},e.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(e){e.label=void 0}),this._findLabeledEdgeRings().forEach(function(t){e._findIntersectionNodes(t).forEach(function(r){e._computeNextCCWEdges(r,t.label)})});var t=[];return this.edges.forEach(function(r){r.ring||t.push(e._findEdgeRing(r))}),t},e.prototype._findIntersectionNodes=function(e){var t=[],r=e,n=function(){var n=0;r.from.getOuterEdges().forEach(function(t){t.label===e.label&&++n}),n>1&&t.push(r.from),r=r.next};do{n()}while(!e.isEqual(r));return t},e.prototype._findEdgeRing=function(e){var t=e,r=new ca;do{r.push(t),t.ring=r,t=t.next}while(!e.isEqual(t));return r},e.prototype.removeNode=function(e){var t=this;e.getOuterEdges().forEach(function(e){return t.removeEdge(e)}),e.innerEdges.forEach(function(e){return t.removeEdge(e)}),delete this.nodes[e.id]},e.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()},e}();function pa(e,t){var r=!0;return V(e,function(e){V(t,function(t){if(!1===r)return!1;r=function(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return r=e.coordinates,n=t.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!da(t,e);case"Polygon":return!gt(e,t)}break;case"LineString":switch(t.type){case"Point":return!da(e,t);case"LineString":return!function(e,t){if(An(e,t).features.length>0)return!0;return!1}(e,t);case"Polygon":return!va(t,e)}break;case"Polygon":switch(t.type){case"Point":return!gt(t,e);case"LineString":return!va(e,t);case"Polygon":return!function(e,t){for(var r=0,n=e.coordinates[0];r<n.length;r++){if(gt(n[r],t))return!0}for(var i=0,o=t.coordinates[0];i<o.length;i++){if(gt(o[i],e))return!0}if(An(Pi(e),Pi(t)).features.length>0)return!0;return!1}(t,e)}}var r,n;return!1}(e.geometry,t.geometry)})}),r}function da(e,t){for(var r=0;r<e.coordinates.length-1;r++)if(ya(e.coordinates[r],e.coordinates[r+1],t.coordinates))return!0;return!1}function va(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){if(gt(n[r],e))return!0}return An(t,Pi(e)).features.length>0}function ya(e,t,r){var n=r[0]-e[0],i=r[1]-e[1],o=t[0]-e[0],a=t[1]-e[1];return 0==n*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:a>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1])}function ga(e,t){return!(e[0]>t[0])&&(!(e[2]<t[2])&&(!(e[1]>t[1])&&!(e[3]<t[3])))}function ma(e,t){return e[0]===t[0]&&e[1]===t[1]}function _a(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function ba(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&!r&&!n;){for(var a=0;a<t.coordinates.length-1;a++){var s=!0;0!==a&&a!==t.coordinates.length-2||(s=!1),Ca(t.coordinates[a],t.coordinates[a+1],e.coordinates[o],s)?r=!0:n=!0}o++}return r&&n}function Sa(e,t){return An(e,Ii(t)).features.length>0}function xa(e,t){for(var r=!1,n=!1,i=e.coordinates.length,o=0;o<i&&(!r||!n);o++)gt(u(e.coordinates[o]),t)?r=!0:n=!0;return n&&r}function Ca(e,t,r,n){var i=r[0]-e[0],o=r[1]-e[1],a=t[0]-e[0],s=t[1]-e[1];return 0==i*s-o*a&&(n?Math.abs(a)>=Math.abs(s)?a>0?e[0]<=r[0]&&r[0]<=t[0]:t[0]<=r[0]&&r[0]<=e[0]:s>0?e[1]<=r[1]&&r[1]<=t[1]:t[1]<=r[1]&&r[1]<=e[1]:Math.abs(a)>=Math.abs(s)?a>0?e[0]<r[0]&&r[0]<t[0]:t[0]<r[0]&&r[0]<e[0]:s>0?e[1]<r[1]&&r[1]<t[1]:t[1]<r[1]&&r[1]<e[1])}var wa=function(e){this.precision=e&&e.precision?e.precision:17,this.direction=!(!e||!e.direction)&&e.direction,this.pseudoNode=!(!e||!e.pseudoNode)&&e.pseudoNode,this.objectComparator=e&&e.objectComparator?e.objectComparator:Ea};function Pa(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function Ia(e,t){return e.hasOwnProperty("coordinates")?e.coordinates.length===t.coordinates.length:e.length===t.length}function Ea(e,t){return Fi(e,t,{strict:!0})}wa.prototype.compare=function(e,t){if(e.type!==t.type||!Ia(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates,0,!1);case"Polygon":return this.comparePolygon(e,t);case"Feature":return this.compareFeature(e,t);default:if(0===e.type.indexOf("Multi")){var r=this,n=Pa(e),i=Pa(t);return n.every(function(e){return this.some(function(t){return r.compare(e,t)})},i)}}return!1},wa.prototype.compareCoord=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].toFixed(this.precision)!==t[r].toFixed(this.precision))return!1;return!0},wa.prototype.compareLine=function(e,t,r,n){if(!Ia(e,t))return!1;var i=this.pseudoNode?e:this.removePseudo(e),o=this.pseudoNode?t:this.removePseudo(t);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[r],o[r]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},wa.prototype.fixStartIndex=function(e,t){for(var r,n=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){n=i;break}return n>=0&&(r=[].concat(e.slice(n,e.length),e.slice(1,n+1))),r},wa.prototype.comparePath=function(e,t){var r=this;return e.every(function(e,t){return r.compareCoord(e,this[t])},t)},wa.prototype.comparePolygon=function(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),n=t.coordinates.slice(1,t.coordinates.length),i=this;return r.every(function(e){return this.some(function(t){return i.compareLine(e,t,1,!0)})},n)}return!1},wa.prototype.compareFeature=function(e,t){return!(e.id!==t.id||!this.objectComparator(e.properties,t.properties)||!this.compareBBox(e,t))&&this.compare(e.geometry,t.geometry)},wa.prototype.compareBBox=function(e,t){return!!(!e.bbox&&!t.bbox||e.bbox&&t.bbox&&this.compareCoord(e.bbox,t.bbox))},wa.prototype.removePseudo=function(e){return e};var La=wa;function Ta(e,t){var r=!1;return V(e,function(e){V(t,function(t){if(!0===r)return!0;r=!pa(e.geometry,t.geometry)})}),r}var Ma=Ge(function(e){function t(e,t,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(e,t,r,n)}t.prototype.run=function(e,t,r,n){this._init(e,t,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},t.prototype._init=function(e,t,r,n){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this.noise=[],this._datasetLength=e.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),r&&(this.minPts=r),n&&(this.distance=n)},t.prototype._expandCluster=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(t=this._mergeArrays(t,i))}1!==this._assigned[n]&&this._addToCluster(n,e)}},t.prototype._addToCluster=function(e,t){this.clusters[t].push(e),this._assigned[e]=1},t.prototype._regionQuery=function(e){for(var t=[],r=0;r<this._datasetLength;r++){this.distance(this.dataset[e],this.dataset[r])<this.epsilon&&t.push(r)}return t},t.prototype._mergeArrays=function(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},t.prototype._euclideanDistance=function(e,t){for(var r=0,n=Math.min(e.length,t.length);n--;)r+=(e[n]-t[n])*(e[n]-t[n]);return Math.sqrt(r)},e.exports&&(e.exports=t)}),Oa=Ge(function(e){function t(e,t,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(e,t,r)}t.prototype.init=function(e,t,r){this.assignments=[],this.centroids=[],void 0!==e&&(this.dataset=e),void 0!==t&&(this.k=t),void 0!==r&&(this.distance=r)},t.prototype.run=function(e,t){this.init(e,t);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(f),s=0,u=0;u<f;u++)a[u]=0;for(var l=0;l<r;l++){var f=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<f;u++)a[u]+=this.dataset[l][u];s++}}if(s>0){for(u=0;u<f;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var e,t,r=this.dataset.length-1;do{t=Math.round(Math.random()*r),e=this.dataset[t]}while(this.centroids.indexOf(e)>=0);return e},t.prototype.assign=function(){for(var e,t=!1,r=this.dataset.length,n=0;n<r;n++)(e=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=e,t=!0);return t},t.prototype.getClusters=function(){for(var e,t=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===t[e=this.assignments[r]]&&(t[e]=[]),t[e].push(r);return t},t.prototype.argmin=function(e,t,r){for(var n,i=Number.MAX_VALUE,o=0,a=t.length,s=0;s<a;s++)(n=r(e,t[s]))<i&&(i=n,o=s);return o},t.prototype.distance=function(e,t){for(var r=0,n=Math.min(e.length,t.length);n--;){var i=e[n]-t[n];r+=i*i}return Math.sqrt(r)},e.exports&&(e.exports=t)}),Aa=Ge(function(e){function t(e,t,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(e,t,r)}t.prototype.insert=function(e,t){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?t>i&&(r=n):t<i&&(r=n)}this._insertAt(e,t,r)},t.prototype.remove=function(e){for(var t=this._queue.length;t--;){if(e===this._queue[t]){this._queue.splice(t,1),this._priorities.splice(t,1);break}}},t.prototype.forEach=function(e){this._queue.forEach(e)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(e){return this._priorities[e]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var e=[],t=0,r=this._queue.length;t<r;t++)e.push([this._queue[t],this._priorities[t]]);return e},t.prototype._init=function(e,t,r){if(e&&t){if(this._queue=[],this._priorities=[],e.length!==t.length)throw new Error("Arrays must have the same length");for(var n=0;n<e.length;n++)this.insert(e[n],t[n])}r&&(this._sorting=r)},t.prototype._insertAt=function(e,t,r){this._queue.length===r?(this._queue.push(e),this._priorities.push(t)):(this._queue.splice(r,0,e),this._priorities.splice(r,0,t))},e.exports&&(e.exports=t)}),Na=Ge(function(e){if(e.exports)var t=Aa;function r(e,t,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(e,t,r,n)}r.prototype.run=function(e,r,n,i){this._init(e,r,n,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new t(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(s,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var e=[],t=0,r=this._orderedList.length;t<r;t++){var n=this._orderedList[t],i=this._reachability[n];e.push([n,i])}return e},r.prototype._init=function(e,t,r,n){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),r&&(this.minPts=r),n&&(this.distance=n)},r.prototype._updateQueue=function(e,t,r){var n=this;this._coreDistance=this._distanceToCore(e),t.forEach(function(t){if(void 0===n._processed[t]){var i=n.distance(n.dataset[e],n.dataset[t]),o=Math.max(n._coreDistance,i);void 0===n._reachability[t]?(n._reachability[t]=o,r.insert(t,o)):o<n._reachability[t]&&(n._reachability[t]=o,r.remove(t),r.insert(t,o))}})},r.prototype._expandCluster=function(e,t){for(var r=t.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[e].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,t),this._expandCluster(e,t))}}},r.prototype._distanceToCore=function(e){for(var t=this.epsilon,r=0;r<t;r++){if(this._regionQuery(e,r).length>=this.minPts)return r}},r.prototype._regionQuery=function(e,t){t=t||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[e],this.dataset[n])<t&&r.push(n);return r},r.prototype._euclideanDistance=function(e,t){for(var r=0,n=Math.min(e.length,t.length);n--;)r+=(e[n]-t[n])*(e[n]-t[n]);return Math.sqrt(r)},e.exports&&(e.exports=r)}),Ra=Ge(function(e){e.exports&&(e.exports={DBSCAN:Ma,KMEANS:Oa,OPTICS:Na,PriorityQueue:Aa})});var ka=function(e,t,r){for(var n=e.length,i=0,o=0;o<n;o++){var a=(e[o]||0)-(t[o]||0);i+=a*a}return r?Math.sqrt(i):i},Da=ka,Fa=function(e,t,r){var n=Math.abs(e-t);return r?n:n*n},Ba=ka,ja=function(e,t){for(var r={},n=[],i=t<<2,o=e.length,a=e[0].length>0;n.length<t&&i-- >0;){var s=e[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;r[u]||(r[u]=!0,n.push(s))}if(n.length<t)throw new Error("Error initializating clusters");return n},Ua=function(e,t){var r=e[0].length?Da:Fa,n=[],i=e.length,o=e[0].length>0,a=e[Math.floor(Math.random()*i)];o&&a.join("_");for(n.push(a);n.length<t;){for(var s=[],u=n.length,l=0,f=[],c=0;c<i;c++){for(var h=1/0,p=0;p<u;p++){var d=r(e[c],n[p]);d<=h&&(h=d)}s[c]=h}for(var v=0;v<i;v++)l+=s[v];for(var y=0;y<i;y++)f[y]={i:y,v:e[y],pr:s[y]/l,cs:0};f.sort(function(e,t){return e.pr-t.pr}),f[0].cs=f[0].pr;for(var g=1;g<i;g++)f[g].cs=f[g-1].cs+f[g].pr;for(var m=Math.random(),_=0;_<i-1&&f[_++].cs<m;);n.push(f[_-1].v)}return n};function Ga(e,t,r){r=r||[];for(var n=0;n<e;n++)r[n]=t;return r}var Va=function(e,t,r,n){var i=[],o=[],a=[],s=[],u=!1,l=n||1e4,f=e.length,c=e[0].length,h=c>0,p=[];if(r)i="kmrand"==r?ja(e,t):"kmpp"==r?Ua(e,t):r;else for(var d={};i.length<t;){var v=Math.floor(Math.random()*f);d[v]||(d[v]=!0,i.push(e[v]))}do{Ga(t,0,p);for(var y=0;y<f;y++){for(var g=1/0,m=0,_=0;_<t;_++){(s=h?Ba(e[y],i[_]):Math.abs(e[y]-i[_]))<=g&&(g=s,m=_)}a[y]=m,p[m]++}for(var b=[],S=(o=[],0);S<t;S++)b[S]=h?Ga(c,0,b[S]):0,o[S]=i[S];if(h){for(var x=0;x<t;x++)i[x]=[];for(var C=0;C<f;C++)for(var w=b[a[C]],P=e[C],I=0;I<c;I++)w[I]+=P[I];u=!0;for(var E=0;E<t;E++){for(var L=i[E],T=b[E],M=o[E],O=p[E],A=0;A<c;A++)L[A]=T[A]/O||0;if(u)for(var N=0;N<c;N++)if(M[N]!=L[N]){u=!1;break}}}else{for(var R=0;R<f;R++){b[a[R]]+=e[R]}for(var k=0;k<t;k++)i[k]=b[k]/p[k]||0;u=!0;for(var D=0;D<t;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:t,idxs:a,centroids:i}};function qa(e,t){return C(Gi(e[0],e[1]))===C(Gi(t[0],t[1]))}function za(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}function Ha(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}var Wa={search:function(e,t,r,n){e.cleanDirty();var i=(n=n||{}).heuristic||Wa.heuristics.manhattan,o=n.closest||!1,a=new Ya(function(e){return e.f}),s=t;for(t.h=i(t,r),a.push(t);a.size()>0;){var u=a.pop();if(u===r)return Ha(u);u.closed=!0;for(var l=e.neighbors(u),f=0,c=l.length;f<c;++f){var h=l[f];if(!h.closed&&!h.isWall()){var p=u.g+h.getCost(u),d=h.visited;(!d||p<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||i(h,r),h.g=p,h.f=h.g+h.h,e.markDirty(h),o&&(h.h<s.h||h.h===s.h&&h.g<s.g)&&(s=h),d?a.rescoreElement(h):a.push(h))}}}return o?Ha(s):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var r=Math.sqrt(2),n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function Za(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var n=0,i=e[r];n<i.length;n++){var o=new Xa(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function Xa(e,t,r){this.x=e,this.y=t,this.weight=r}function Ya(e){this.content=[],this.scoreFunction=e}function Qa(e,t){for(var r=0;r<t.features.length;r++)if(gt(e,t.features[r]))return!0;return!1}function Ja(e){return function(){return e}}function Ka(e){return e[0]}function $a(e){return e[1]}function es(){this._=null}function ts(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function rs(e,t){var r=t,n=t.R,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function ns(e,t){var r=t,n=t.L,i=r.U;i?i.L===r?i.L=n:i.R=n:e._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function is(e){for(;e.L;)e=e.L;return e}function os(e,t,r,n){var i=[null,null],o=Ts.push(i)-1;return i.left=e,i.right=t,r&&ss(i,e,t,r),n&&ss(i,t,e,n),Es[e.index].halfedges.push(o),Es[t.index].halfedges.push(o),i}function as(e,t,r){var n=[t,r];return n.left=e,n}function ss(e,t,r,n){e[0]||e[1]?e.left===r?e[1]=n:e[0]=n:(e[0]=n,e.left=t,e.right=r)}function us(e,t,r,n,i){var o,a=e[0],s=e[1],u=a[0],l=a[1],f=0,c=1,h=s[0]-u,p=s[1]-l;if(o=t-u,h||!(o>0)){if(o/=h,h<0){if(o<f)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>f&&(f=o)}if(o=n-u,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>f&&(f=o)}else if(h>0){if(o<f)return;o<c&&(c=o)}if(o=r-l,p||!(o>0)){if(o/=p,p<0){if(o<f)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>f&&(f=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>f&&(f=o)}else if(p>0){if(o<f)return;o<c&&(c=o)}return!(f>0||c<1)||(f>0&&(e[0]=[u+f*h,l+f*p]),c<1&&(e[1]=[u+c*h,l+c*p]),!0)}}}}}function ls(e,t,r,n,i){var o=e[1];if(o)return!0;var a,s,u=e[0],l=e.left,f=e.right,c=l[0],h=l[1],p=f[0],d=f[1],v=(c+p)/2,y=(h+d)/2;if(d===h){if(v<t||v>=n)return;if(c>p){if(u){if(u[1]>=i)return}else u=[v,r];o=[v,i]}else{if(u){if(u[1]<r)return}else u=[v,i];o=[v,r]}}else if(s=y-(a=(c-p)/(d-h))*v,a<-1||a>1)if(c>p){if(u){if(u[1]>=i)return}else u=[(r-s)/a,r];o=[(i-s)/a,i]}else{if(u){if(u[1]<r)return}else u=[(i-s)/a,i];o=[(r-s)/a,r]}else if(h<d){if(u){if(u[0]>=n)return}else u=[t,a*t+s];o=[n,a*n+s]}else{if(u){if(u[0]<t)return}else u=[n,a*n+s];o=[t,a*t+s]}return e[0]=u,e[1]=o,!0}function fs(e,t){var r=e.site,n=t.left,i=t.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=t[1],i=t[0]):(n=t[0],i=t[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function cs(e,t){return t[+(t.left!==e.site)]}function hs(e,t){return t[+(t.left===e.site)]}Za.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)Wa.cleanNode(this.nodes[e])},Za.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)Wa.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},Za.prototype.markDirty=function(e){this.dirtyNodes.push(e)},Za.prototype.neighbors=function(e){var t=[],r=e.x,n=e.y,i=this.grid;return i[r-1]&&i[r-1][n]&&t.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&t.push(i[r+1][n]),i[r]&&i[r][n-1]&&t.push(i[r][n-1]),i[r]&&i[r][n+1]&&t.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&t.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&t.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&t.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&t.push(i[r+1][n+1])),t},Za.prototype.toString=function(){for(var e,t,r,n,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(e=[],r=0,n=(t=o[a]).length;r<n;r++)e.push(t[r].weight);i.push(e.join(" "))}return i.join("\n")},Xa.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Xa.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight},Xa.prototype.isWall=function(){return 0===this.weight},Ya.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(t)<this.scoreFunction(n)))break;this.content[r]=t,this.content[e]=n,e=r}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],n=this.scoreFunction(r);;){var i,o=e+1<<1,a=o-1,s=null;if(a<t){var u=this.content[a];(i=this.scoreFunction(u))<n&&(s=a)}if(o<t){var l=this.content[o];this.scoreFunction(l)<(null===s?n:i)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}}},es.prototype={constructor:es,insert:function(e,t){var r,n,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=is(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.R&&(rs(this,r),r=(e=r).U),r.C=!1,n.C=!0,ns(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,e=n):(e===r.L&&(ns(this,r),r=(e=r).U),r.C=!1,n.C=!0,rs(this,n)),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,r,n,i=e.U,o=e.L,a=e.R;if(r=o?a?is(a):o:a,i?i.L===e?i.L=r:i.R=r:this._=r,o&&a?(n=r.C,r.C=e.C,r.L=o,o.U=r,r!==a?(i=r.U,r.U=e.U,e=r.R,i.L=e,r.R=a,a.U=r):(r.U=i,i=r,e=r.R)):(n=e.C,e=r),e&&(e.U=i),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,rs(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ns(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,rs(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,ns(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,rs(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ns(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var ps,ds=[];function vs(){ts(this),this.x=this.y=this.arc=this.site=this.cy=null}function ys(e){var t=e.P,r=e.N;if(t&&r){var n=t.site,i=e.site,o=r.site;if(n!==o){var a=i[0],s=i[1],u=n[0]-a,l=n[1]-s,f=o[0]-a,c=o[1]-s,h=2*(u*c-l*f);if(!(h>=-Os)){var p=u*u+l*l,d=f*f+c*c,v=(c*p-l*d)/h,y=(u*d-f*p)/h,g=ds.pop()||new vs;g.arc=e,g.site=i,g.x=v+a,g.y=(g.cy=y+s)+Math.sqrt(v*v+y*y),e.circle=g;for(var m=null,_=Ls._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Ls.insert(m,g),m||(ps=g)}}}}function gs(e){var t=e.circle;t&&(t.P||(ps=t.N),Ls.remove(t),ds.push(t),ts(t),e.circle=null)}var ms=[];function _s(){ts(this),this.edge=this.site=this.circle=null}function bs(e){var t=ms.pop()||new _s;return t.site=e,t}function Ss(e){gs(e),Is.remove(e),ms.push(e),ts(e)}function xs(e){var t=e.circle,r=t.x,n=t.cy,i=[r,n],o=e.P,a=e.N,s=[e];Ss(e);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Ms&&Math.abs(n-u.circle.cy)<Ms;)o=u.P,s.unshift(u),Ss(u),u=o;s.unshift(u),gs(u);for(var l=a;l.circle&&Math.abs(r-l.circle.x)<Ms&&Math.abs(n-l.circle.cy)<Ms;)a=l.N,s.push(l),Ss(l),l=a;s.push(l),gs(l);var f,c=s.length;for(f=1;f<c;++f)l=s[f],u=s[f-1],ss(l.edge,u.site,l.site,i);u=s[0],(l=s[c-1]).edge=os(u.site,l.site,null,i),ys(u),ys(l)}function Cs(e){for(var t,r,n,i,o=e[0],a=e[1],s=Is._;s;)if((n=ws(s,a)-o)>Ms)s=s.L;else{if(!((i=o-Ps(s,a))>Ms)){n>-Ms?(t=s.P,r=s):i>-Ms?(t=s,r=s.N):t=r=s;break}if(!s.R){t=s;break}s=s.R}!function(e){Es[e.index]={site:e,halfedges:[]}}(e);var u=bs(e);if(Is.insert(t,u),t||r){if(t===r)return gs(t),r=bs(t.site),Is.insert(u,r),u.edge=r.edge=os(t.site,u.site),ys(t),void ys(r);if(r){gs(t),gs(r);var l=t.site,f=l[0],c=l[1],h=e[0]-f,p=e[1]-c,d=r.site,v=d[0]-f,y=d[1]-c,g=2*(h*y-p*v),m=h*h+p*p,_=v*v+y*y,b=[(y*m-p*_)/g+f,(h*_-v*m)/g+c];ss(r.edge,l,d,b),u.edge=os(l,e,null,b),r.edge=os(e,d,null,b),ys(t),ys(r)}else u.edge=os(t.site,u.site)}}function ws(e,t){var r=e.site,n=r[0],i=r[1],o=i-t;if(!o)return n;var a=e.P;if(!a)return-1/0;var s=(r=a.site)[0],u=r[1],l=u-t;if(!l)return s;var f=s-n,c=1/o-1/l,h=f/l;return c?(-h+Math.sqrt(h*h-2*c*(f*f/(-2*l)-u+l/2+i-o/2)))/c+n:(n+s)/2}function Ps(e,t){var r=e.N;if(r)return ws(r,t);var n=e.site;return n[1]===t?n[0]:1/0}var Is,Es,Ls,Ts,Ms=1e-6,Os=1e-12;function As(e,t){return t[1]-e[1]||t[0]-e[0]}function Ns(e,t){var r,n,i,o=e.sort(As).pop();for(Ts=[],Es=new Array(e.length),Is=new es,Ls=new es;;)if(i=ps,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(Cs(o),r=o[0],n=o[1]),o=e.pop();else{if(!i)break;xs(i.arc)}if(function(){for(var e,t,r,n,i=0,o=Es.length;i<o;++i)if((e=Es[i])&&(n=(t=e.halfedges).length)){var a=new Array(n),s=new Array(n);for(r=0;r<n;++r)a[r]=r,s[r]=fs(e,Ts[t[r]]);for(a.sort(function(e,t){return s[t]-s[e]}),r=0;r<n;++r)s[r]=t[a[r]];for(r=0;r<n;++r)t[r]=s[r]}}(),t){var a=+t[0][0],s=+t[0][1],u=+t[1][0],l=+t[1][1];!function(e,t,r,n){for(var i,o=Ts.length;o--;)ls(i=Ts[o],e,t,r,n)&&us(i,e,t,r,n)&&(Math.abs(i[0][0]-i[1][0])>Ms||Math.abs(i[0][1]-i[1][1])>Ms)||delete Ts[o]}(a,s,u,l),function(e,t,r,n){var i,o,a,s,u,l,f,c,h,p,d,v,y=Es.length,g=!0;for(i=0;i<y;++i)if(o=Es[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)Ts[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(p=hs(o,Ts[u[s]]))[0],v=p[1],c=(f=cs(o,Ts[u[++s%l]]))[0],h=f[1],(Math.abs(d-c)>Ms||Math.abs(v-h)>Ms)&&(u.splice(s,0,Ts.push(as(a,p,Math.abs(d-e)<Ms&&n-v>Ms?[e,Math.abs(c-e)<Ms?h:n]:Math.abs(v-n)<Ms&&r-d>Ms?[Math.abs(h-n)<Ms?c:r,n]:Math.abs(d-r)<Ms&&v-t>Ms?[r,Math.abs(c-r)<Ms?h:t]:Math.abs(v-t)<Ms&&d-e>Ms?[Math.abs(h-t)<Ms?c:e,t]:null))-1),++l);l&&(g=!1)}if(g){var m,_,b,S=1/0;for(i=0,g=null;i<y;++i)(o=Es[i])&&(b=(m=(a=o.site)[0]-e)*m+(_=a[1]-t)*_)<S&&(S=b,g=o);if(g){var x=[e,t],C=[e,n],w=[r,n],P=[r,t];g.halfedges.push(Ts.push(as(a=g.site,x,C))-1,Ts.push(as(a,C,w))-1,Ts.push(as(a,w,P))-1,Ts.push(as(a,P,x))-1)}}for(i=0;i<y;++i)(o=Es[i])&&(o.halfedges.length||delete Es[i])}(a,s,u,l)}this.edges=Ts,this.cells=Es,Is=Ls=Ts=Es=null}function Rs(e){return(e=e.slice()).push(e[0]),f([e])}function ks(e,t,r,n){var i=(n=n||{}).steps||64,o=n.units||"kilometers",a=n.angle||0,s=n.pivot||e,u=n.properties||e.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!T(n))throw new Error("options must be an object");if(!L(i))throw new Error("steps must be a number");if(!L(a))throw new Error("angle must be a number");var l=K(e);if("degrees"===o)var c=P(a);else t=qi(e,t,90,{units:o}),r=qi(e,r,0,{units:o}),t=K(t)[0]-l[0],r=K(r)[1]-l[1];for(var h=[],p=0;p<i;p+=1){var d=-360*p/i,v=t*r/Math.sqrt(Math.pow(r,2)+Math.pow(t,2)*Math.pow(Ds(d),2)),y=t*r/Math.sqrt(Math.pow(t,2)+Math.pow(r,2)/Math.pow(Ds(d),2));if(d<-90&&d>=-270&&(v=-v),d<-180&&d>=-360&&(y=-y),"degrees"===o){var g=v*Math.cos(c)+y*Math.sin(c),m=y*Math.cos(c)-v*Math.sin(c);v=g,y=m}h.push([v+l[0],y+l[1]])}return h.push(h[0]),"degrees"===o?f([h],u):ea(f([h],u),a,{pivot:s})}function Ds(e){var t=e*Math.PI/180;return Math.tan(t)}function Fs(e,t){void 0===t&&(t={});var r=0,n=0,i=0;return U(e,function(e,o,a){var s=t.weight?null==a?void 0:a[t.weight]:void 0;if(!L(s=null==s?1:s))throw new Error("weight value must be a number for feature index "+o);(s=Number(s))>0&&N(e,function(e){r+=e[0]*s,n+=e[1]*s,i+=s})}),u([r/i,n/i],t.properties,t)}function Bs(e,t,r,n,i){var o=n.tolerance||.001,a=0,s=0,l=0,f=0;if(F(r,function(t){var r,n=null===(r=t.properties)||void 0===r?void 0:r.weight,i=null==n?1:n;if(!L(i=Number(i)))throw new Error("weight value must be a number");if(i>0){f+=1;var o=i*bt(t,e);0===o&&(o=1);var u=i/o;a+=t.geometry.coordinates[0]*u,s+=t.geometry.coordinates[1]*u,l+=u}}),f<1)throw new Error("no features to measure");var c=a/l,h=s/l;return 1===f||0===i||Math.abs(c-t[0])<o&&Math.abs(h-t[1])<o?u([c,h],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([c,h]),Bs([c,h],e,r,n,i-1))}function js(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}function Us(e,t){var r=0,n=0;N(e,function(i,o,a,s,u){u>r&&(r=u,n=o,t.push([]));var l=o-n,f=e.coordinates[u][l+1],c=i[0],h=i[1],p=f[0],d=f[1];t[u].push([.75*c+.25*p,.75*h+.25*d]),t[u].push([.25*c+.75*p,.25*h+.75*d])},!0),t.forEach(function(e){e.push(e[0])})}function Gs(e,t){var r=0,n=0,i=0;N(e,function(o,a,s,u,l){u>i&&(i=u,n=a,t.push([[]])),l>r&&(r=l,n=a,t[u].push([]));var f=a-n,c=e.coordinates[u][l][f+1],h=o[0],p=o[1],d=c[0],v=c[1];t[u][l].push([.75*h+.25*d,.75*p+.25*v]),t[u][l].push([.25*h+.75*d,.25*p+.75*v])},!0),t.forEach(function(e){e.forEach(function(e){e.push(e[0])})})}function Vs(e,t,r){void 0===r&&(r=2);var n=K(e),i=K(t),o=n[0]-i[0],a=n[1]-i[1];return 1===r?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,r)+Math.pow(a,r),1/r)}function qs(e,t){var r=(t=t||{}).threshold||1e4,n=t.p||2,i=t.binary||!1,o=t.alpha||-1,a=t.standardization||!1,s=[];F(e,function(e){s.push(Sr(e))});for(var u=[],l=0;l<s.length;l++)u[l]=[];for(l=0;l<s.length;l++)for(var f=l;f<s.length;f++){l===f&&(u[l][f]=0);var c=Vs(s[l],s[f],n);u[l][f]=c,u[f][l]=c}for(l=0;l<s.length;l++)for(f=0;f<s.length;f++){0!==(c=u[l][f])&&(u[l][f]=i?c<=r?1:0:c<=r?Math.pow(c,o):0)}if(a)for(l=0;l<s.length;l++){var h=u[l].reduce(function(e,t){return e+t},0);for(f=0;f<s.length;f++)u[l][f]=u[l][f]/h}return u}function zs(e){for(var t=0,r=0,n=e;r<n.length;r++){t+=n[r]}return t/e.length}function Hs(e,t){return void 0===t&&(t={}),Zs(e,"mercator",t)}function Ws(e,t){return void 0===t&&(t={}),Zs(e,"wgs84",t)}function Zs(e,t,r){void 0===r&&(r={});var n=(r=r||{}).mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&L(e[0])?e="mercator"===t?Xs(e):Ys(e):(!0!==n&&(e=Pt(e)),N(e,function(e){var r="mercator"===t?Xs(e):Ys(e);e[0]=r[0],e[1]=r[1]})),e}function Xs(e){var t=Math.PI/180,r=6378137,n=20037508.342789244,i=[r*(Math.abs(e[0])<=180?e[0]:e[0]-360*function(e){return e<0?-1:e>0?1:0}(e[0]))*t,r*Math.log(Math.tan(.25*Math.PI+.5*e[1]*t))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function Ys(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/r)))*t]}Ns.prototype={constructor:Ns,polygons:function(){var e=this.edges;return this.cells.map(function(t){var r=t.halfedges.map(function(r){return cs(t,e[r])});return r.data=t.site.data,r})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(r,n){if(o=(i=r.halfedges).length)for(var i,o,a,s,u,l,f=r.site,c=-1,h=t[i[o-1]],p=h.left===f?h.right:h.left;++c<o;)a=p,p=(h=t[i[c]]).left===f?h.right:h.left,a&&p&&n<a.index&&n<p.index&&(u=a,l=p,((s=f)[0]-l[0])*(u[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0)&&e.push([f.data,a.data,p.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,r){for(var n,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=e-i.site[0],l=t-i.site[1],f=u*u+l*l;do{i=o.cells[n=a],a=null,i.halfedges.forEach(function(r){var n=o.edges[r],s=n.left;if(s!==i.site&&s||(s=n.right)){var u=e-s[0],l=t-s[1],c=u*u+l*l;c<f&&(f=c,a=s.index)}})}while(null!==a);return o._found=n,null==r||f<=r*r?i.site:null}};var Qs=Object.freeze({__proto__:null,toMercator:Hs,toWgs84:Ws}),Js=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};function Ks(e){return Array.isArray(e)?nu(e):e&&e.bbox?nu(e.bbox):[360*ru(),180*ru()]}function $s(e,t){void 0===t&&(t={}),null==e&&(e=1);for(var r=[],n=0;n<e;n++)r.push(u(Ks(t.bbox)));return d(r)}function eu(e,t){void 0===t&&(t={}),null==e&&(e=1),L(t.num_vertices)&&void 0!==t.num_vertices||(t.num_vertices=10),L(t.max_radial_length)&&void 0!==t.max_radial_length||(t.max_radial_length=10);for(var r=[],n=function(e){var n,i=[],o=Js(Array(t.num_vertices+1)).map(Math.random);o.forEach(function(e,t,r){r[t]=t>0?e+r[t-1]:e}),o.forEach(function(e){e=2*e*Math.PI/o[o.length-1];var r=Math.random();i.push([r*(t.max_radial_length||10)*Math.sin(e),r*(t.max_radial_length||10)*Math.cos(e)])}),i[i.length-1]=i[0],i=i.map((n=Ks(t.bbox),function(e){return[e[0]+n[0],e[1]+n[1]]})),r.push(f([i]))},i=0;i<e;i++)n();return d(r)}function tu(e,t){if(void 0===t&&(t={}),!T(t=t||{}))throw new Error("options is invalid");var r=t.bbox,n=t.num_vertices,i=t.max_length,o=t.max_rotation;null==e&&(e=1),(!L(n)||void 0===n||n<2)&&(n=10),L(i)&&void 0!==i||(i=1e-4),L(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<e;s++){for(var u=[Ks(r)],l=0;l<n-1;l++){var f=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*i;u.push([u[l][0]+c*Math.cos(f),u[l][1]+c*Math.sin(f)])}a.push(h(u))}return d(a)}function ru(){return Math.random()-.5}function nu(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}var iu=Object.freeze({__proto__:null,randomPosition:Ks,randomPoint:$s,randomPolygon:eu,randomLineString:tu});function ou(e,t){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("filter is required");var r=[];return F(e,function(e){lu(e.properties,t)&&r.push(e)}),d(r)}function au(e,t,r){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("property is required");for(var n=uu(e,t),i=Object.keys(n),o=0;o<i.length;o++){for(var a=i[o],s=n[a],u=[],l=0;l<s.length;l++)u.push(e.features[s[l]]);r(d(u),a,o)}}function su(e,t,r,n){var i=n;return au(e,t,function(e,t,o){i=0===o&&void 0===n?e:r(i,e,t,o)}),i}function uu(e,t){var r={};return F(e,function(e,n){var i=e.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(t))){var o=i[t];Object.prototype.hasOwnProperty.call(r,o)?r[o].push(n):r[o]=[n]}}),r}function lu(e,t){if(void 0===e)return!1;var r=typeof t;if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(e,t);if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(!lu(e,t[n]))return!1;return!0}return fu(e,t)}function fu(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}return!0}function cu(e,t){if(!t)return{};if(!t.length)return{};for(var r={},n=0;n<t.length;n++){var i=t[n];Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r}var hu=Object.freeze({__proto__:null,getCluster:ou,clusterEach:au,clusterReduce:su,createBins:uu,applyFilter:lu,propertiesContainsFilter:fu,filterProperties:cu}),pu=function(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function du(e,t){return e>t?1:e<t?-1:0}function vu(e,t,r){for(var n=new pu(null,null),i=n,o=n;;){var a=r(e,t.key);if(a<0){if(null===t.left)break;if(r(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,null===(t=s).left)break}o.left=t,o=t,t=t.left}else{if(!(a>0))break;if(null===t.right)break;if(r(e,t.right.key)>0){s=t.right;if(t.right=s.left,s.left=t,null===(t=s).right)break}i.right=t,i=t,t=t.right}}return i.right=t.left,o.left=t.right,t.left=n.right,t.right=n.left,t}function yu(e,t,r,n){var i=new pu(e,t);if(null===r)return i.left=i.right=null,i;var o=n(e,(r=vu(e,r,n)).key);return o<0?(i.left=r.left,i.right=r,r.left=null):o>=0&&(i.right=r.right,i.left=r,r.right=null),i}function gu(e,t,r){var n=null,i=null;if(t){var o=r((t=vu(e,t,r)).key,e);0===o?(n=t.left,i=t.right):o<0?(i=t.right,t.right=null,n=t):(n=t.left,t.left=null,i=t)}return{left:n,right:i}}function mu(e,t,r,n,i){if(e){n(t+(r?" ":" ")+i(e)+"\n");var o=t+(r?"    ":"   ");e.left&&mu(e.left,o,!1,n,i),e.right&&mu(e.right,o,!0,n,i)}}var _u=function(){function e(e){void 0===e&&(e=du),this._root=null,this._size=0,this._comparator=e}return e.prototype.insert=function(e,t){return this._size++,this._root=yu(e,t,this._root,this._comparator)},e.prototype.add=function(e,t){var r=new pu(e,t);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var n=this._comparator,i=vu(e,this._root,n),o=n(e,i.key);return 0===o?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},e.prototype._remove=function(e,t,r){var n;return null===t?null:0===r(e,(t=vu(e,t,r)).key)?(null===t.left?n=t.right:(n=vu(e,t.left,r)).right=t.right,this._size--,n):t},e.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=vu(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},e.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return t;t=n<0?t.left:t.right}return null},e.prototype.find=function(e){return this._root&&(this._root=vu(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},e.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1},e.prototype.forEach=function(e,t){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),e.call(t,r),r=r.right):i=!0;return this},e.prototype.range=function(e,t,r,n){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,t)>0)break;if(o(a.key,e)>=0&&r.call(n,a))return this;a=a.right}return this},e.prototype.keys=function(){var e=[];return this.forEach(function(t){var r=t.key;return e.push(r)}),e},e.prototype.values=function(){var e=[];return this.forEach(function(t){var r=t.data;return e.push(r)}),e},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},e.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},e.prototype.at=function(e){for(var t=this._root,r=!1,n=0,i=[];!r;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),n===e)return t;n++,t=t.right}else r=!0;return null},e.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var n=this._comparator;t;){var i=n(e.key,t.key);if(0===i)break;i<0?(r=t,t=t.left):t=t.right}return r},e.prototype.prev=function(e){var t=this._root,r=null;if(null!==e.left){for(r=e.left;r.right;)r=r.right;return r}for(var n=this._comparator;t;){var i=n(e.key,t.key);if(0===i)break;i<0?t=t.left:(r=t,t=t.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return function(e){var t=e,r=[],n=!1,i=new pu(null,null),o=i;for(;!n;)t?(r.push(t),t=t.left):r.length>0?t=(t=o=o.next=r.pop()).right:n=!0;return o.next=null,i.next}(this._root)},e.prototype.load=function(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=!1);var n=e.length,i=this._comparator;if(r&&xu(e,t,0,n-1,i),null===this._root)this._root=bu(e,t,0,n),this._size=n;else{var o=function(e,t,r){var n=new pu(null,null),i=n,o=e,a=t;for(;null!==o&&null!==a;)r(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;null!==o?i.next=o:null!==a&&(i.next=a);return n.next}(this.toList(),function(e,t){for(var r=new pu(null,null),n=r,i=0;i<e.length;i++)n=n.next=new pu(e[i],t[i]);return n.next=null,r.next}(e,t),i);n=this._size+n,this._root=Su({head:o},0,n)}return this},e.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){void 0===e&&(e=function(e){return String(e.key)});var t=[];return mu(this._root,"",!0,function(e){return t.push(e)},e),t.join("")},e.prototype.update=function(e,t,r){var n=this._comparator,i=gu(e,this._root,n),o=i.left,a=i.right;n(e,t)<0?a=yu(t,r,a,n):o=yu(t,r,o,n),this._root=function(e,t,r){return null===t?e:(null===e||((t=vu(e.key,t,r)).left=e),t)}(o,a,n)},e.prototype.split=function(e){return gu(e,this._root,this._comparator)},e}();function bu(e,t,r,n){var i=n-r;if(i>0){var o=r+Math.floor(i/2),a=e[o],s=t[o],u=new pu(a,s);return u.left=bu(e,t,r,o),u.right=bu(e,t,o+1,n),u}return null}function Su(e,t,r){var n=r-t;if(n>0){var i=t+Math.floor(n/2),o=Su(e,t,i),a=e.head;return a.left=o,e.head=e.head.next,a.right=Su(e,i+1,r),a}return null}function xu(e,t,r,n,i){if(!(r>=n)){for(var o=e[r+n>>1],a=r-1,s=n+1;;){do{a++}while(i(e[a],o)<0);do{s--}while(i(e[s],o)>0);if(a>=s)break;var u=e[a];e[a]=e[s],e[s]=u,u=t[a],t[a]=t[s],t[s]=u}xu(e,t,r,s,i),xu(e,t,s+1,n,i)}}function Cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pu(e,t,r){return t&&wu(e.prototype,t),r&&wu(e,r),e}var Iu=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},Eu=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,n=e.ur.x<t.ur.x?e.ur.x:t.ur.x;return{ll:{x:r,y:e.ll.y<t.ll.y?t.ll.y:e.ll.y},ur:{x:n,y:e.ur.y<t.ur.y?e.ur.y:t.ur.y}}},Lu=Number.EPSILON;void 0===Lu&&(Lu=Math.pow(2,-52));var Tu=Lu*Lu,Mu=function(e,t){if(-Lu<e&&e<Lu&&-Lu<t&&t<Lu)return 0;var r=e-t;return r*r<Tu*e*t?0:e<t?-1:1},Ou=function(){function e(){Cu(this,e),this.reset()}return Pu(e,[{key:"reset",value:function(){this.xRounder=new Au,this.yRounder=new Au}},{key:"round",value:function(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}]),e}(),Au=function(){function e(){Cu(this,e),this.tree=new _u,this.round(0)}return Pu(e,[{key:"round",value:function(e){var t=this.tree.add(e),r=this.tree.prev(t);if(null!==r&&0===Mu(t.key,r.key))return this.tree.remove(e),r.key;var n=this.tree.next(t);return null!==n&&0===Mu(t.key,n.key)?(this.tree.remove(e),n.key):e}}]),e}(),Nu=new Ou,Ru=function(e,t){return e.x*t.y-e.y*t.x},ku=function(e,t){return e.x*t.x+e.y*t.y},Du=function(e,t,r){var n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y},o=Ru(n,i);return Mu(o,0)},Fu=function(e){return Math.sqrt(ku(e,e))},Bu=function(e,t,r){var n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y};return ku(i,n)/Fu(i)/Fu(n)},ju=function(e,t,r){return 0===t.y?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},Uu=function(e,t,r){return 0===t.x?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},Gu=function(){function e(t,r){Cu(this,e),void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=r}return Pu(e,null,[{key:"compare",value:function(t,r){var n=e.comparePoints(t.point,r.point);return 0!==n?n:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:qu.compare(t.segment,r.segment))}},{key:"comparePoints",value:function(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}]),Pu(e,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,r=0,n=t.length;r<n;r++){var i=t[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var r=this.point.events[t];if(void 0===r.segment.consumedBy)for(var n=t+1;n<e;n++){var i=this.point.events[n];void 0===i.consumedBy&&(r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,r=this.point.events.length;t<r;t++){var n=this.point.events[t];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&e.push(n)}return e}},{key:"getLeftmostComparator",value:function(e){var t=this,r=new Map,n=function(n){var i,o,a,s,u,l=n.otherSE;r.set(n,{sine:(i=t.point,o=e.point,a=l.point,s={x:o.x-i.x,y:o.y-i.y},u={x:a.x-i.x,y:a.y-i.y},Ru(u,s)/Fu(u)/Fu(s)),cosine:Bu(t.point,e.point,l.point)})};return function(e,t){r.has(e)||n(e),r.has(t)||n(t);var i=r.get(e),o=i.sine,a=i.cosine,s=r.get(t),u=s.sine,l=s.cosine;return o>=0&&u>=0?a<l?1:a>l?-1:0:o<0&&u<0?a<l?-1:a>l?1:0:u<o?-1:u>o?1:0}}}]),e}(),Vu=0,qu=function(){function e(t,r,n,i){Cu(this,e),this.id=++Vu,this.leftSE=t,t.segment=this,t.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=t,this.rings=n,this.windings=i}return Pu(e,null,[{key:"compare",value:function(e,t){var r=e.leftSE.point.x,n=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,u=e.rightSE.point.y,l=t.rightSE.point.y;if(r<n){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var f=e.comparePoint(t.leftSE.point);if(f<0)return 1;if(f>0)return-1;var c=t.comparePoint(e.rightSE.point);return 0!==c?c:-1}if(r>n){if(a<s&&a<l)return-1;if(a>s&&a>l)return 1;var h=t.comparePoint(e.leftSE.point);if(0!==h)return h;var p=e.comparePoint(t.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=t.comparePoint(e.rightSE.point);if(0!==d)return d}if(i>o){var v=e.comparePoint(t.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(i!==o){var y=u-a,g=i-r,m=l-s,_=o-n;if(y>g&&m<_)return 1;if(y<g&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:e.id<t.id?-1:e.id>t.id?1:0}}]),Pu(e,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var t=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(t.x===r.x)return e.x===t.x?0:e.x<t.x?1:-1;var i=(e.y-t.y)/n.y,o=t.x+i*n.x;if(e.x===o)return 0;var a=(e.x-t.x)/n.x,s=t.y+a*n.y;return e.y===s?0:e.y<s?-1:1}},{key:"getIntersection",value:function(e){var t=this.bbox(),r=e.bbox(),n=Eu(t,r);if(null===n)return null;var i=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,u=Iu(t,a)&&0===this.comparePoint(a),l=Iu(r,i)&&0===e.comparePoint(i),f=Iu(t,s)&&0===this.comparePoint(s),c=Iu(r,o)&&0===e.comparePoint(o);if(l&&u)return c&&!f?o:!c&&f?s:null;if(l)return f&&i.x===s.x&&i.y===s.y?null:i;if(u)return c&&o.x===a.x&&o.y===a.y?null:a;if(c&&f)return null;if(c)return o;if(f)return s;var h=function(e,t,r,n){if(0===t.x)return Uu(r,n,e.x);if(0===n.x)return Uu(e,t,r.x);if(0===t.y)return ju(r,n,e.y);if(0===n.y)return ju(e,t,r.y);var i=Ru(t,n);if(0==i)return null;var o={x:r.x-e.x,y:r.y-e.y},a=Ru(o,t)/i,s=Ru(o,n)/i;return{x:(e.x+s*t.x+(r.x+a*n.x))/2,y:(e.y+s*t.y+(r.y+a*n.y))/2}}(i,this.vector(),a,e.vector());return null===h?null:Iu(n,h)?Nu.round(h.x,h.y):null}},{key:"split",value:function(t){var r=[],n=void 0!==t.events,i=new Gu(t,!0),o=new Gu(t,!1),a=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return Gu.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Gu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}},{key:"consume",value:function(t){for(var r=this,n=t;r.consumedBy;)r=r.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var i=e.compare(r,n);if(0!==i){if(i>0){var o=r;r=n,n=o}if(r.prev===n){var a=r;r=n,n=a}for(var s=0,u=n.rings.length;s<u;s++){var l=n.rings[s],f=n.windings[s],c=r.rings.indexOf(l);-1===c?(r.rings.push(l),r.windings.push(f)):r.windings[c]+=f}n.rings=null,n.windings=null,n.consumedBy=r,n.leftSE.consumedBy=r.leftSE,n.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=t.indexOf(a);-1===u?(t.push(a),r.push(s)):r[u]+=s}for(var l=[],f=[],c=0,h=t.length;c<h;c++)if(0!==r[c]){var p=t[c],d=p.poly;if(-1===f.indexOf(d))if(p.isExterior)l.push(d);else{-1===f.indexOf(d)&&f.push(d);var v=l.indexOf(p.poly);-1!==v&&l.splice(v,1)}}for(var y=0,g=l.length;y<g;y++){var m=l[y].multiPoly;-1===n.indexOf(m)&&n.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch($u.type){case"union":var r=0===e.length,n=0===t.length;this._isInResult=r!==n;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===$u.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2==1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t);break;default:throw new Error("Unrecognized operation type found ".concat($u.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,r,n){var i,o,a,s=Gu.comparePoints(t,r);if(s<0)i=t,o=r,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=r,o=t,a=-1}return new e(new Gu(i,!0),new Gu(o,!1),[n],[a])}}]),e}(),zu=function(){function e(t,r,n){if(Cu(this,e),!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Nu.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=t.length;a<s;a++){if("number"!=typeof t[a][0]||"number"!=typeof t[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Nu.round(t[a][0],t[a][1]);u.x===o.x&&u.y===o.y||(this.segments.push(qu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(qu.fromRing(o,i,this))}return Pu(e,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,r=this.segments.length;t<r;t++){var n=this.segments[t];e.push(n.leftSE),e.push(n.rightSE)}return e}}]),e}(),Hu=function(){function e(t,r){if(Cu(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new zu(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=t.length;n<i;n++){var o=new zu(t[n],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Pu(e,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,r=this.interiorRings.length;t<r;t++)for(var n=this.interiorRings[t].getSweepEvents(),i=0,o=n.length;i<o;i++)e.push(n[i]);return e}}]),e}(),Wu=function(){function e(t,r){if(Cu(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(e){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=t.length;n<i;n++){var o=new Hu(t[n],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Pu(e,[{key:"getSweepEvents",value:function(){for(var e=[],t=0,r=this.polys.length;t<r;t++)for(var n=this.polys[t].getSweepEvents(),i=0,o=n.length;i<o;i++)e.push(n[i]);return e}}]),e}(),Zu=function(){function e(t){Cu(this,e),this.events=t;for(var r=0,n=t.length;r<n;r++)t[r].segment.ringOut=this;this.poly=null}return Pu(e,null,[{key:"factory",value:function(t){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,u=o.rightSE,l=[s],f=s.point,c=[];a=s,s=u,l.push(s),s.point!==f;)for(;;){var h=s.getAvailableLinkedEvents();if(0===h.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){u=h[0].otherSE;break}for(var v=null,y=0,g=c.length;y<g;y++)if(c[y].point===s.point){v=y;break}if(null===v){c.push({index:l.length,point:s.point});var m=s.getLeftmostComparator(a);u=h.sort(m)[0].otherSE;break}var _=c.splice(v)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),r.push(new e(b.reverse()))}r.push(new e(l))}}return r}}]),Pu(e,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],r=1,n=this.events.length-1;r<n;r++){var i=this.events[r].point,o=this.events[r+1].point;0!==Du(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var a=t[0],s=t[1];0===Du(a,e,s)&&t.shift(),t.push(t[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:t.length-1,f=this.isExteriorRing()?t.length:-1,c=[],h=l;h!=f;h+=u)c.push([t[h].x,t[h].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,r=this.events.length;t<r;t++){var n=this.events[t];Gu.compare(e,n)>0&&(e=n)}for(var i=e.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),Xu=function(){function e(t){Cu(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Pu(e,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var t=0,r=this.interiorRings.length;t<r;t++){var n=this.interiorRings[t].getGeom();null!==n&&e.push(n)}return e}}]),e}(),Yu=function(){function e(t){Cu(this,e),this.rings=t,this.polys=this._composePolys(t)}return Pu(e,[{key:"getGeom",value:function(){for(var e=[],t=0,r=this.polys.length;t<r;t++){var n=this.polys[t].getGeom();null!==n&&e.push(n)}return e}},{key:"_composePolys",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];if(!i.poly)if(i.isExteriorRing())t.push(new Xu(i));else{var o=i.enclosingRing();o.poly||t.push(new Xu(o)),o.poly.addInterior(i)}}return t}}]),e}(),Qu=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qu.compare;Cu(this,e),this.queue=t,this.tree=new _u(r),this.segments=[]}return Pu(e,[{key:"process",value:function(e){var t=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),r;var n=e.isLeft?this.tree.insert(t):this.tree.find(t);if(!n)throw new Error("Unable to find segment #".concat(t.id," ")+"[".concat(t.leftSE.point.x,", ").concat(t.leftSE.point.y,"] -> ")+"[".concat(t.rightSE.point.x,", ").concat(t.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=n,o=n,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(e.isLeft){var u=null;if(a){var l=a.getIntersection(t);if(null!==l&&(t.isAnEndpoint(l)||(u=l),!a.isAnEndpoint(l)))for(var f=this._splitSafely(a,l),c=0,h=f.length;c<h;c++)r.push(f[c])}var p=null;if(s){var d=s.getIntersection(t);if(null!==d&&(t.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var v=this._splitSafely(s,d),y=0,g=v.length;y<g;y++)r.push(v[y])}if(null!==u||null!==p){var m=null;if(null===u)m=p;else if(null===p)m=u;else{m=Gu.comparePoints(u,p)<=0?u:p}this.queue.remove(t.rightSE),r.push(t.rightSE);for(var _=t.split(m),b=0,S=_.length;b<S;b++)r.push(_[b])}r.length>0?(this.tree.remove(t),r.push(e)):(this.segments.push(t),t.prev=a)}else{if(a&&s){var x=a.getIntersection(s);if(null!==x){if(!a.isAnEndpoint(x))for(var C=this._splitSafely(a,x),w=0,P=C.length;w<P;w++)r.push(C[w]);if(!s.isAnEndpoint(x))for(var I=this._splitSafely(s,x),E=0,L=I.length;E<L;E++)r.push(I[E])}}this.tree.remove(t)}return r}},{key:"_splitSafely",value:function(e,t){this.tree.remove(e);var r=e.rightSE;this.queue.remove(r);var n=e.split(t);return n.push(r),void 0===e.consumedBy&&this.tree.insert(e),n}}]),e}(),Ju="undefined"!=typeof e&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ku="undefined"!=typeof e&&Object({NODE_ENV:undefined}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$u=new(function(){function e(){Cu(this,e)}return Pu(e,[{key:"run",value:function(e,t,r){$u.type=e,Nu.reset();for(var n=[new Wu(t,!0)],i=0,o=r.length;i<o;i++)n.push(new Wu(r[i],!1));if($u.numMultiPolys=n.length,"difference"===$u.type)for(var a=n[0],s=1;s<n.length;)null!==Eu(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===$u.type)for(var u=0,l=n.length;u<l;u++)for(var f=n[u],c=u+1,h=n.length;c<h;c++)if(null===Eu(f.bbox,n[c].bbox))return[];for(var p=new _u(Gu.compare),d=0,v=n.length;d<v;d++)for(var y=n[d].getSweepEvents(),g=0,m=y.length;g<m;g++)if(p.insert(y[g]),p.size>Ju)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Qu(p),b=p.size,S=p.pop();S;){var x=S.key;if(p.size===b){var C=x.segment;throw new Error("Unable to pop() ".concat(x.isLeft?"left":"right"," SweepEvent ")+"[".concat(x.point.x,", ").concat(x.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>Ju)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var w=_.process(x),P=0,I=w.length;P<I;P++){var E=w[P];void 0===E.consumedBy&&p.insert(E)}b=p.size,S=p.pop()}Nu.reset();var L=Zu.factory(_.segments);return new Yu(L).getGeom()}}]),e}()),el={union:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return $u.run("union",e,r)},intersection:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return $u.run("intersection",e,r)},xor:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return $u.run("xor",e,r)},difference:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return $u.run("difference",e,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(e){if(null==this)throw new TypeError(this+" is not an object");var t=Object(this),r=Math.max(Math.min(t.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)t[n]=e,++n;return t},writable:!0}),Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(e){return e!=e},Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var tl=function(){};tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.prototype.equalsWithTolerance=function(e,t,r){return Math.abs(e-t)<=r};var rl=function(e){function t(t){e.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),nl=function(){},il={MAX_VALUE:{configurable:!0}};nl.isNaN=function(e){return Number.isNaN(e)},nl.doubleToLongBits=function(e){return e},nl.longBitsToDouble=function(e){return e},nl.isInfinite=function(e){return!Number.isFinite(e)},il.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,il);var ol=function(){},al=function(){},sl=function(){};function ul(){}var ll=function e(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},fl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ll.prototype.setOrdinate=function(e,t){switch(e){case ll.X:this.x=t;break;case ll.Y:this.y=t;break;case ll.Z:this.z=t;break;default:throw new rl("Invalid ordinate index: "+e)}},ll.prototype.equals2D=function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],r=arguments[1];return!!tl.equalsWithTolerance(this.x,t.x,r)&&!!tl.equalsWithTolerance(this.y,t.y,r)}},ll.prototype.getOrdinate=function(e){switch(e){case ll.X:return this.x;case ll.Y:return this.y;case ll.Z:return this.z}throw new rl("Invalid ordinate index: "+e)},ll.prototype.equals3D=function(e){return this.x===e.x&&this.y===e.y&&(this.z===e.z||nl.isNaN(this.z))&&nl.isNaN(e.z)},ll.prototype.equals=function(e){return e instanceof ll&&this.equals2D(e)},ll.prototype.equalInZ=function(e,t){return tl.equalsWithTolerance(this.z,e.z,t)},ll.prototype.compareTo=function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},ll.prototype.clone=function(){},ll.prototype.copy=function(){return new ll(this)},ll.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ll.prototype.distance3D=function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return Math.sqrt(t*t+r*r+n*n)},ll.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},ll.prototype.hashCode=function(){var e=17;return e=37*(e=37*e+ll.hashCode(this.x))+ll.hashCode(this.y)},ll.prototype.setCoordinate=function(e){this.x=e.x,this.y=e.y,this.z=e.z},ll.prototype.interfaces_=function(){return[ol,al,ul]},ll.prototype.getClass=function(){return ll},ll.hashCode=function(){if(1===arguments.length){var e=arguments[0],t=nl.doubleToLongBits(e);return Math.trunc((t^t)>>>32)}},fl.DimensionalComparator.get=function(){return cl},fl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},fl.NULL_ORDINATE.get=function(){return nl.NaN},fl.X.get=function(){return 0},fl.Y.get=function(){return 1},fl.Z.get=function(){return 2},Object.defineProperties(ll,fl);var cl=function(e){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new rl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}};cl.prototype.compare=function(e,t){var r=e,n=t,i=cl.compare(r.x,n.x);if(0!==i)return i;var o=cl.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:cl.compare(r.z,n.z)},cl.prototype.interfaces_=function(){return[sl]},cl.prototype.getClass=function(){return cl},cl.compare=function(e,t){return e<t?-1:e>t?1:nl.isNaN(e)?nl.isNaN(t)?0:-1:nl.isNaN(t)?1:0};var hl=function(){};hl.prototype.create=function(){},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var pl=function(){},dl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLocationSymbol=function(e){switch(e){case pl.EXTERIOR:return"e";case pl.BOUNDARY:return"b";case pl.INTERIOR:return"i";case pl.NONE:return"-"}throw new rl("Unknown location value: "+e)},dl.INTERIOR.get=function(){return 0},dl.BOUNDARY.get=function(){return 1},dl.EXTERIOR.get=function(){return 2},dl.NONE.get=function(){return-1},Object.defineProperties(pl,dl);var vl=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},yl=function(){},gl={LOG_10:{configurable:!0}};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl},yl.log10=function(e){var t=Math.log(e);return nl.isInfinite(t)||nl.isNaN(t)?t:t/yl.LOG_10},yl.min=function(e,t,r,n){var i=e;return t<i&&(i=t),r<i&&(i=r),n<i&&(i=n),i},yl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],r=arguments[2];return e<t?t:e>r?r:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},yl.wrap=function(e,t){return e<0?t- -e%t:e%t},yl.max=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],r=arguments[2],n=e;return t>n&&(n=t),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},yl.average=function(e,t){return(e+t)/2},gl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(yl,gl);var ml=function(e){this.str=e};ml.prototype.append=function(e){this.str+=e},ml.prototype.setCharAt=function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)},ml.prototype.toString=function(e){return this.str};var _l=function(e){this.value=e};_l.prototype.intValue=function(){return this.value},_l.prototype.compareTo=function(e){return this.value<e?-1:this.value>e?1:0},_l.isNaN=function(e){return Number.isNaN(e)};var bl=function(){};bl.isWhitespace=function(e){return e<=32&&e>=0||127===e},bl.toUpperCase=function(e){return e.toUpperCase()};var Sl=function e(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];e.call(this,e.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},xl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Sl.prototype.le=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<=e._lo},Sl.prototype.extractSignificantDigits=function(e,t){var r=this.abs(),n=Sl.magnitude(r._hi),i=Sl.TEN.pow(n);(r=r.divide(i)).gt(Sl.TEN)?(r=r.divide(Sl.TEN),n+=1):r.lt(Sl.ONE)&&(r=r.multiply(Sl.TEN),n-=1);for(var o=n+1,a=new ml,s=Sl.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){e&&u===o&&a.append(".");var l=Math.trunc(r._hi);if(l<0)break;var f=!1,c=0;l>9?(f=!0,c="9"):c="0"+l,a.append(c),r=r.subtract(Sl.valueOf(l)).multiply(Sl.TEN),f&&r.selfAdd(Sl.TEN);var h=!0,p=Sl.magnitude(r._hi);if(p<0&&Math.abs(p)>=s-u&&(h=!1),!h)break}return t[0]=n,a.toString()},Sl.prototype.sqr=function(){return this.multiply(this)},Sl.prototype.doubleValue=function(){return this._hi+this._lo},Sl.prototype.subtract=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){var t=arguments[0];return this.add(-t)}},Sl.prototype.equals=function(){if(1===arguments.length){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}},Sl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Sl.prototype.selfSubtract=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}},Sl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Sl.prototype.min=function(e){return this.le(e)?this:e},Sl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Sl){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,f=null,c=null;return u=this._hi/r,c=(i=(l=Sl.SPLIT*u)-(i=l-u))*(a=(c=Sl.SPLIT*r)-(a=c-r))-(f=u*r)+i*(s=r-a)+(o=u-i)*a+o*s,c=u+(l=(this._hi-f-c+this._lo-u*n)/r),this._hi=c,this._lo=u-c+l,this}},Sl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Sl.prototype.divide=function(){if(arguments[0]instanceof Sl){var e=arguments[0],t=null,r=null,n=null,i=null,o=null,a=null,s=null,u=null;r=(o=this._hi/e._hi)-(t=(a=Sl.SPLIT*o)-(t=a-o)),u=t*(n=(u=Sl.SPLIT*e._hi)-(n=u-e._hi))-(s=o*e._hi)+t*(i=e._hi-n)+r*n+r*i;var l=u=o+(a=(this._hi-s-u+this._lo-o*e._lo)/e._hi),f=o-u+a;return new Sl(l,f)}if("number"==typeof arguments[0]){var c=arguments[0];return nl.isNaN(c)?Sl.createNaN():Sl.copy(this).selfDivide(c,0)}},Sl.prototype.ge=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>=e._lo},Sl.prototype.pow=function(e){if(0===e)return Sl.valueOf(1);var t=new Sl(this),r=Sl.valueOf(1),n=Math.abs(e);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(t),(n/=2)>0&&(t=t.sqr());else r=t;return e<0?r.reciprocal():r},Sl.prototype.ceil=function(){if(this.isNaN())return Sl.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new Sl(e,t)},Sl.prototype.compareTo=function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Sl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Sl.prototype.setValue=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){var t=arguments[0];return this.init(t),this}},Sl.prototype.max=function(e){return this.ge(e)?this:e},Sl.prototype.sqrt=function(){if(this.isZero())return Sl.valueOf(0);if(this.isNegative())return Sl.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,r=Sl.valueOf(t),n=this.subtract(r.sqr())._hi*(.5*e);return r.add(n)},Sl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Sl){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0],r=null,n=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+t)-(a=i-this._hi),n=(s=(o=t-a+(this._hi-o))+this._lo)+(i-(r=i+s)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],f=null,c=null,h=null,p=null,d=null,v=null,y=null;p=this._hi+u,c=this._lo+l,d=p-(v=p-this._hi),h=c-(y=c-this._lo);var g=(f=p+(v=(d=u-v+(this._hi-d))+c))+(v=(h=l-y+(this._lo-h))+(v+(p-f))),m=v+(f-g);return this._hi=g,this._lo=m,this}},Sl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Sl){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=Sl.SPLIT*this._hi)-this._hi,l=Sl.SPLIT*r,i=u-i,o=this._hi-i,a=l-r;var f=(u=this._hi*r)+(l=i*(a=l-a)-u+i*(s=r-a)+o*a+o*s+(this._hi*n+this._lo*r)),c=l+(i=u-f);return this._hi=f,this._lo=c,this}},Sl.prototype.selfSqr=function(){return this.selfMultiply(this)},Sl.prototype.floor=function(){if(this.isNaN())return Sl.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new Sl(e,t)},Sl.prototype.negate=function(){return this.isNaN()?this:new Sl(-this._hi,-this._lo)},Sl.prototype.clone=function(){},Sl.prototype.multiply=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return e.isNaN()?Sl.createNaN():Sl.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var t=arguments[0];return nl.isNaN(t)?Sl.createNaN():Sl.copy(this).selfMultiply(t,0)}},Sl.prototype.isNaN=function(){return nl.isNaN(this._hi)},Sl.prototype.intValue=function(){return Math.trunc(this._hi)},Sl.prototype.toString=function(){var e=Sl.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()},Sl.prototype.toStandardNotation=function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),r=this.extractSignificantDigits(!0,t),n=t[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+Sl.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+Sl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Sl.prototype.reciprocal=function(){var e,t,r,n,i=null,o=null,a=null,s=null;e=(r=1/this._hi)-(i=(a=Sl.SPLIT*r)-(i=a-r)),o=(s=Sl.SPLIT*this._hi)-this._hi;var u=r+(a=(1-(n=r*this._hi)-(s=i*(o=s-o)-n+i*(t=this._hi-o)+e*o+e*t)-r*this._lo)/this._hi);return new Sl(u,r-u+a)},Sl.prototype.toSciNotation=function(){if(this.isZero())return Sl.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),r=this.extractSignificantDigits(!1,t),n=Sl.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},Sl.prototype.abs=function(){return this.isNaN()?Sl.NaN:this.isNegative()?this.negate():new Sl(this)},Sl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Sl.prototype.lt=function(e){return(this._hi<e._hi||this._hi===e._hi)&&this._lo<e._lo},Sl.prototype.add=function(){if(arguments[0]instanceof Sl){var e=arguments[0];return Sl.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var t=arguments[0];return Sl.copy(this).selfAdd(t)}},Sl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof Sl){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},Sl.prototype.gt=function(e){return(this._hi>e._hi||this._hi===e._hi)&&this._lo>e._lo},Sl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Sl.prototype.trunc=function(){return this.isNaN()?Sl.NaN:this.isPositive()?this.floor():this.ceil()},Sl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Sl.prototype.interfaces_=function(){return[ul,ol,al]},Sl.prototype.getClass=function(){return Sl},Sl.sqr=function(e){return Sl.valueOf(e).selfMultiply(e)},Sl.valueOf=function(){if("string"==typeof arguments[0]){var e=arguments[0];return Sl.parse(e)}if("number"==typeof arguments[0]){var t=arguments[0];return new Sl(t)}},Sl.sqrt=function(e){return Sl.valueOf(e).sqrt()},Sl.parse=function(e){for(var t=0,r=e.length;bl.isWhitespace(e.charAt(t));)t++;var n=!1;if(t<r){var i=e.charAt(t);"-"!==i&&"+"!==i||(t++,"-"===i&&(n=!0))}for(var o=new Sl,a=0,s=0,u=0;!(t>=r);){var l=e.charAt(t);if(t++,bl.isDigit(l)){var f=l-"0";o.selfMultiply(Sl.TEN),o.selfAdd(f),a++}else{if("."!==l){if("e"===l||"E"===l){var c=e.substring(t);try{u=_l.parseInt(c)}catch(t){throw t instanceof Error?new Error("Invalid exponent "+c+" in string "+e):t}break}throw new Error("Unexpected character '"+l+"' at position "+t+" in string "+e)}s=a}}var h=o,p=a-s-u;if(0===p)h=o;else if(p>0){var d=Sl.TEN.pow(p);h=o.divide(d)}else if(p<0){var v=Sl.TEN.pow(-p);h=o.multiply(v)}return n?h.negate():h},Sl.createNaN=function(){return new Sl(nl.NaN,nl.NaN)},Sl.copy=function(e){return new Sl(e)},Sl.magnitude=function(e){var t=Math.abs(e),r=Math.log(t)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=t&&(n+=1),n},Sl.stringOfChar=function(e,t){for(var r=new ml,n=0;n<t;n++)r.append(e);return r.toString()},xl.PI.get=function(){return new Sl(3.141592653589793,1.2246467991473532e-16)},xl.TWO_PI.get=function(){return new Sl(6.283185307179586,2.4492935982947064e-16)},xl.PI_2.get=function(){return new Sl(1.5707963267948966,6.123233995736766e-17)},xl.E.get=function(){return new Sl(2.718281828459045,1.4456468917292502e-16)},xl.NaN.get=function(){return new Sl(nl.NaN,nl.NaN)},xl.EPS.get=function(){return 1.23259516440783e-32},xl.SPLIT.get=function(){return 134217729},xl.MAX_PRINT_DIGITS.get=function(){return 32},xl.TEN.get=function(){return Sl.valueOf(10)},xl.ONE.get=function(){return Sl.valueOf(1)},xl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},xl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Sl,xl);var Cl=function(){},wl={DP_SAFE_EPSILON:{configurable:!0}};Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.orientationIndex=function(e,t,r){var n=Cl.orientationIndexFilter(e,t,r);if(n<=1)return n;var i=Sl.valueOf(t.x).selfAdd(-e.x),o=Sl.valueOf(t.y).selfAdd(-e.y),a=Sl.valueOf(r.x).selfAdd(-t.x),s=Sl.valueOf(r.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Cl.signOfDet2x2=function(e,t,r,n){return e.multiply(n).selfSubtract(t.multiply(r)).signum()},Cl.intersection=function(e,t,r,n){var i=Sl.valueOf(n.y).selfSubtract(r.y).selfMultiply(Sl.valueOf(t.x).selfSubtract(e.x)),o=Sl.valueOf(n.x).selfSubtract(r.x).selfMultiply(Sl.valueOf(t.y).selfSubtract(e.y)),a=i.subtract(o),s=Sl.valueOf(n.x).selfSubtract(r.x).selfMultiply(Sl.valueOf(e.y).selfSubtract(r.y)),u=Sl.valueOf(n.y).selfSubtract(r.y).selfMultiply(Sl.valueOf(e.x).selfSubtract(r.x)),l=s.subtract(u).selfDivide(a).doubleValue(),f=Sl.valueOf(e.x).selfAdd(Sl.valueOf(t.x).selfSubtract(e.x).selfMultiply(l)).doubleValue(),c=Sl.valueOf(t.x).selfSubtract(e.x).selfMultiply(Sl.valueOf(e.y).selfSubtract(r.y)),h=Sl.valueOf(t.y).selfSubtract(e.y).selfMultiply(Sl.valueOf(e.x).selfSubtract(r.x)),p=c.subtract(h).selfDivide(a).doubleValue(),d=Sl.valueOf(r.y).selfAdd(Sl.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new ll(f,d)},Cl.orientationIndexFilter=function(e,t,r){var n=null,i=(e.x-r.x)*(t.y-r.y),o=(e.y-r.y)*(t.x-r.x),a=i-o;if(i>0){if(o<=0)return Cl.signum(a);n=i+o}else{if(!(i<0))return Cl.signum(a);if(o>=0)return Cl.signum(a);n=-i-o}var s=Cl.DP_SAFE_EPSILON*n;return a>=s||-a>=s?Cl.signum(a):2},Cl.signum=function(e){return e>0?1:e<0?-1:0},wl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Cl,wl);var Pl=function(){},Il={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Il.X.get=function(){return 0},Il.Y.get=function(){return 1},Il.Z.get=function(){return 2},Il.M.get=function(){return 3},Pl.prototype.setOrdinate=function(e,t,r){},Pl.prototype.size=function(){},Pl.prototype.getOrdinate=function(e,t){},Pl.prototype.getCoordinate=function(){},Pl.prototype.getCoordinateCopy=function(e){},Pl.prototype.getDimension=function(){},Pl.prototype.getX=function(e){},Pl.prototype.clone=function(){},Pl.prototype.expandEnvelope=function(e){},Pl.prototype.copy=function(){},Pl.prototype.getY=function(e){},Pl.prototype.toCoordinateArray=function(){},Pl.prototype.interfaces_=function(){return[al]},Pl.prototype.getClass=function(){return Pl},Object.defineProperties(Pl,Il);var El=function(){},Ll=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(El),Tl=function(){};Tl.arraycopy=function(e,t,r,n,i){for(var o=0,a=t;a<t+i;a++)r[n+o]=e[a],o++},Tl.getProperty=function(e){return{"line.separator":"\n"}[e]};var Ml=function e(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],f=arguments[2];this.x=u,this.y=l,this.w=f}else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],v=c.y-h.y,y=h.x-c.x,g=c.x*h.y-h.x*c.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-_*g,this.y=m*g-v*b,this.w=v*_-m*y}};Ml.prototype.getY=function(){var e=this.y/this.w;if(nl.isNaN(e)||nl.isInfinite(e))throw new Ll;return e},Ml.prototype.getX=function(){var e=this.x/this.w;if(nl.isNaN(e)||nl.isInfinite(e))throw new Ll;return e},Ml.prototype.getCoordinate=function(){var e=new ll;return e.x=this.getX(),e.y=this.getY(),e},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},Ml.intersection=function(e,t,r,n){var i=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=r.y-n.y,u=n.x-r.x,l=r.x*n.y-n.x*r.y,f=i*u-s*o,c=(o*l-u*a)/f,h=(s*a-i*l)/f;if(nl.isNaN(c)||nl.isInfinite(c)||nl.isNaN(h)||nl.isInfinite(h))throw new Ll;return new ll(c,h)};var Ol=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Al={serialVersionUID:{configurable:!0}};Ol.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ol.prototype.equals=function(e){if(!(e instanceof Ol))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()},Ol.prototype.intersection=function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new Ol;var t=this._minx>e._minx?this._minx:e._minx,r=this._miny>e._miny?this._miny:e._miny,n=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new Ol(t,n,r,i)},Ol.prototype.isNull=function(){return this._maxx<this._minx},Ol.prototype.getMaxX=function(){return this._maxx},Ol.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof Ol){var t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&(r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy)}},Ol.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Ol){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof ll){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},Ol.prototype.getMinY=function(){return this._miny},Ol.prototype.getMinX=function(){return this._minx},Ol.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof Ol){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Ol.prototype.minExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t},Ol.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ol.prototype.compareTo=function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0},Ol.prototype.translate=function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)},Ol.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ol.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ol.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ol.prototype.maxExtent=function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t},Ol.prototype.expandBy=function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ol.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Ol){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},Ol.prototype.centre=function(){return this.isNull()?null:new ll((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ol.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof Ol){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Ol.prototype.getMaxY=function(){return this._maxy},Ol.prototype.distance=function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var r=0;return this._maxy<e._miny?r=e._miny-this._maxy:this._miny>e._maxy&&(r=this._miny-e._maxy),0===t?r:0===r?t:Math.sqrt(t*t+r*r)},Ol.prototype.hashCode=function(){var e=17;return e=37*(e=37*(e=37*(e=37*e+ll.hashCode(this._minx))+ll.hashCode(this._maxx))+ll.hashCode(this._miny))+ll.hashCode(this._maxy)},Ol.prototype.interfaces_=function(){return[ol,ul]},Ol.prototype.getClass=function(){return Ol},Ol.intersects=function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],r=arguments[2];return r.x>=(e.x<t.x?e.x:t.x)&&r.x<=(e.x>t.x?e.x:t.x)&&r.y>=(e.y<t.y?e.y:t.y)&&r.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(n.x,i.x),f=Math.max(n.x,i.x);return!(l>u)&&(!(f<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(n.y,i.y),f=Math.max(n.y,i.y),!(l>u)&&!(f<s)))}},Al.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ol,Al);var Nl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Rl=function(e){this.geometryFactory=e||new bc};Rl.prototype.read=function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var i=Nl.typeStr.exec(e);if(-1!==e.search("EMPTY")&&((i=Nl.emptyTypeStr.exec(e))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],Dl[r]&&(t=Dl[r].apply(this,[n]))),void 0===t)throw new Error("Could not parse WKT "+e);return t},Rl.prototype.write=function(e){return this.extractGeometry(e)},Rl.prototype.extractGeometry=function(e){var t=e.getGeometryType().toLowerCase();if(!kl[t])return null;var r=t.toUpperCase();return e.isEmpty()?r+" EMPTY":r+"("+kl[t].apply(this,[e])+")"};var kl={coordinate:function(e){return e.x+" "+e.y},point:function(e){return kl.coordinate.call(this,e._coordinates._coordinates[0])},multipoint:function(e){for(var t=[],r=0,n=e._geometries.length;r<n;++r)t.push("("+kl.point.apply(this,[e._geometries[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e._points._coordinates.length;r<n;++r)t.push(kl.coordinate.apply(this,[e._points._coordinates[r]]));return t.join(",")},linearring:function(e){for(var t=[],r=0,n=e._points._coordinates.length;r<n;++r)t.push(kl.coordinate.apply(this,[e._points._coordinates[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e._geometries.length;r<n;++r)t.push("("+kl.linestring.apply(this,[e._geometries[r]])+")");return t.join(",")},polygon:function(e){var t=[];t.push("("+kl.linestring.apply(this,[e._shell])+")");for(var r=0,n=e._holes.length;r<n;++r)t.push("("+kl.linestring.apply(this,[e._holes[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e._geometries.length;r<n;++r)t.push("("+kl.polygon.apply(this,[e._geometries[r]])+")");return t.join(",")},geometrycollection:function(e){for(var t=[],r=0,n=e._geometries.length;r<n;++r)t.push(this.extractGeometry(e._geometries[r]));return t.join(",")}},Dl={point:function(e){if(void 0===e)return this.geometryFactory.createPoint();var t=e.trim().split(Nl.spaces);return this.geometryFactory.createPoint(new ll(Number.parseFloat(t[0]),Number.parseFloat(t[1])))},multipoint:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiPoint();for(var r=e.trim().split(","),n=[],i=0,o=r.length;i<o;++i)t=r[i].replace(Nl.trimParens,"$1"),n.push(Dl.point.apply(this,[t]));return this.geometryFactory.createMultiPoint(n)},linestring:function(e){if(void 0===e)return this.geometryFactory.createLineString();for(var t,r=e.trim().split(","),n=[],i=0,o=r.length;i<o;++i)t=r[i].trim().split(Nl.spaces),n.push(new ll(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLineString(n)},linearring:function(e){if(void 0===e)return this.geometryFactory.createLinearRing();for(var t,r=e.trim().split(","),n=[],i=0,o=r.length;i<o;++i)t=r[i].trim().split(Nl.spaces),n.push(new ll(Number.parseFloat(t[0]),Number.parseFloat(t[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiLineString();for(var r=e.trim().split(Nl.parenComma),n=[],i=0,o=r.length;i<o;++i)t=r[i].replace(Nl.trimParens,"$1"),n.push(Dl.linestring.apply(this,[t]));return this.geometryFactory.createMultiLineString(n)},polygon:function(e){var t,r,n;if(void 0===e)return this.geometryFactory.createPolygon();for(var i,o=e.trim().split(Nl.parenComma),a=[],s=0,u=o.length;s<u;++s)t=o[s].replace(Nl.trimParens,"$1"),r=Dl.linestring.apply(this,[t]),n=this.geometryFactory.createLinearRing(r._points),0===s?i=n:a.push(n);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(e){var t;if(void 0===e)return this.geometryFactory.createMultiPolygon();for(var r=e.trim().split(Nl.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)t=r[i].replace(Nl.trimParens,"$1"),n.push(Dl.polygon.apply(this,[t]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(e){if(void 0===e)return this.geometryFactory.createGeometryCollection();for(var t=(e=e.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=t.length;n<i;++n)r.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(r)}},Fl=function(e){this.parser=new Rl(e)};Fl.prototype.write=function(e){return this.parser.write(e)},Fl.toLineString=function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"};var Bl=function(e){function t(t){e.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new e).stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),jl=function(e){function t(){if(e.call(this),0===arguments.length)e.call(this);else if(1===arguments.length){var t=arguments[0];e.call(this,t)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bl),Ul=function(){};Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.shouldNeverReachHere=function(){if(0===arguments.length)Ul.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new jl("Should never reach here"+(null!==e?": "+e:""))}},Ul.isTrue=function(){var e;if(1===arguments.length)Ul.isTrue(arguments[0],null);else if(2===arguments.length&&(e=arguments[1],!arguments[0]))throw null===e?new jl:new jl(e)},Ul.equals=function(){var e,t,r;if(2===arguments.length)Ul.equals(e=arguments[0],t=arguments[1],null);else if(3===arguments.length&&(e=arguments[0],r=arguments[2],!(t=arguments[1]).equals(e)))throw new jl("Expected "+e+" but encountered "+t+(null!==r?": "+r:""))};var Gl=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ll,this._intPt[1]=new ll,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Vl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Gl.prototype.getIndexAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]},Gl.prototype.getTopologySummary=function(){var e=new ml;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()},Gl.prototype.computeIntersection=function(e,t,r,n){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(e,t,r,n)},Gl.prototype.getIntersectionNum=function(){return this._result},Gl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0],t=this.getEdgeDistance(e,0),r=this.getEdgeDistance(e,1);t>r?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}},Gl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Gl.prototype.setPrecisionModel=function(e){this._precisionModel=e},Gl.prototype.isInteriorIntersection=function(){var e=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],r=0;r<this._result;r++)if(!e._intPt[r].equals2D(e._inputLines[t][0])&&!e._intPt[r].equals2D(e._inputLines[t][1]))return!0;return!1}},Gl.prototype.getIntersection=function(e){return this._intPt[e]},Gl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Gl.prototype.hasIntersection=function(){return this._result!==Gl.NO_INTERSECTION},Gl.prototype.getEdgeDistance=function(e,t){return Gl.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])},Gl.prototype.isCollinear=function(){return this._result===Gl.COLLINEAR_INTERSECTION},Gl.prototype.toString=function(){return Fl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Fl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Gl.prototype.getEndpoint=function(e,t){return this._inputLines[e][t]},Gl.prototype.isIntersection=function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1},Gl.prototype.getIntersectionAlongSegment=function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]},Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.computeEdgeDistance=function(e,t,r){var n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(r))o=n>i?n:i;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=n>i?a:s)||e.equals(t)||(o=Math.max(a,s))}return Ul.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o},Gl.nonRobustComputeEdgeDistance=function(e,t,r){var n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);return Ul.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o},Vl.DONT_INTERSECT.get=function(){return 0},Vl.DO_INTERSECT.get=function(){return 1},Vl.COLLINEAR.get=function(){return 2},Vl.NO_INTERSECTION.get=function(){return 0},Vl.POINT_INTERSECTION.get=function(){return 1},Vl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Gl,Vl);var ql=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(e){var t=new Ol(this._inputLines[0][0],this._inputLines[0][1]),r=new Ol(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&r.contains(e)},t.prototype.computeIntersection=function(){if(3!==arguments.length)return e.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,Ol.intersects(r,n,t)&&0===Wl.orientationIndex(r,n,t)&&0===Wl.orientationIndex(n,r,t))return this._isProper=!0,(t.equals(r)||t.equals(n))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION},t.prototype.normalizeToMinimum=function(e,t,r,n,i){i.x=this.smallestInAbsValue(e.x,t.x,r.x,n.x),i.y=this.smallestInAbsValue(e.y,t.y,r.y,n.y),e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},t.prototype.safeHCoordinateIntersection=function(e,r,n,i){var o=null;try{o=Ml.intersection(e,r,n,i)}catch(a){if(!(a instanceof Ll))throw a;o=t.nearestEndpoint(e,r,n,i)}return o},t.prototype.intersection=function(e,r,n,i){var o=this.intersectionWithNormalization(e,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new ll(t.nearestEndpoint(e,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},t.prototype.smallestInAbsValue=function(e,t,r,n){var i=e,o=Math.abs(i);return Math.abs(t)<o&&(i=t,o=Math.abs(t)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},t.prototype.checkDD=function(e,t,r,n,i){var o=Cl.intersection(e,t,r,n),a=this.isInSegmentEnvelopes(o);Tl.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Tl.out.println("Distance = "+i.distance(o))},t.prototype.intersectionWithNormalization=function(e,t,r,n){var i=new ll(e),o=new ll(t),a=new ll(r),s=new ll(n),u=new ll;this.normalizeToEnvCentre(i,o,a,s,u);var l=this.safeHCoordinateIntersection(i,o,a,s);return l.x+=u.x,l.y+=u.y,l},t.prototype.computeCollinearIntersection=function(t,r,n,i){var o=Ol.intersects(t,r,n),a=Ol.intersects(t,r,i),s=Ol.intersects(n,i,t),u=Ol.intersects(n,i,r);return o&&a?(this._intPt[0]=n,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=t,this._intPt[1]=r,e.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||a||u?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||a||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||o||u?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||s?e.COLLINEAR_INTERSECTION:e.POINT_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(e,t,r,n,i){var o=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,u=e.y>t.y?e.y:t.y,l=r.x<n.x?r.x:n.x,f=r.y<n.y?r.y:n.y,c=r.x>n.x?r.x:n.x,h=r.y>n.y?r.y:n.y,p=((o>l?o:l)+(s<c?s:c))/2,d=((a>f?a:f)+(u<h?u:h))/2;i.x=p,i.y=d,e.x-=i.x,e.y-=i.y,t.x-=i.x,t.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},t.prototype.computeIntersect=function(t,r,n,i){if(this._isProper=!1,!Ol.intersects(t,r,n,i))return e.NO_INTERSECTION;var o=Wl.orientationIndex(t,r,n),a=Wl.orientationIndex(t,r,i);if(o>0&&a>0||o<0&&a<0)return e.NO_INTERSECTION;var s=Wl.orientationIndex(n,i,t),u=Wl.orientationIndex(n,i,r);return s>0&&u>0||s<0&&u<0?e.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(t,r,n,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new ll(n):0===a?this._intPt[0]=new ll(i):0===s?this._intPt[0]=new ll(t):0===u&&(this._intPt[0]=new ll(r))):(this._isProper=!0,this._intPt[0]=this.intersection(t,r,n,i)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(e,t,r,n){var i=e,o=Wl.distancePointLine(e,r,n),a=Wl.distancePointLine(t,r,n);return a<o&&(o=a,i=t),(a=Wl.distancePointLine(r,e,t))<o&&(o=a,i=r),(a=Wl.distancePointLine(n,e,t))<o&&(o=a,i=n),i},t}(Gl),zl=function(){};zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.orientationIndex=function(e,t,r){var n=t.x-e.x,i=t.y-e.y,o=r.x-t.x,a=r.y-t.y;return zl.signOfDet2x2(n,i,o,a)},zl.signOfDet2x2=function(e,t,r,n){var i=null,o=null,a=null;if(i=1,0===e||0===n)return 0===t||0===r?0:t>0?r>0?-i:i:r>0?i:-i;if(0===t||0===r)return n>0?e>0?i:-i:e>0?-i:i;if(t>0?n>0?t<=n||(i=-i,o=e,e=r,r=o,o=t,t=n,n=o):t<=-n?(i=-i,r=-r,n=-n):(o=e,e=-r,r=o,o=t,t=-n,n=o):n>0?-t<=n?(i=-i,e=-e,t=-t):(o=-e,e=r,r=o,o=-t,t=n,n=o):t>=n?(e=-e,t=-t,r=-r,n=-n):(i=-i,o=-e,e=-r,r=o,o=-t,t=-n,n=o),e>0){if(!(r>0))return i;if(!(e<=r))return i}else{if(r>0)return-i;if(!(e>=r))return-i;i=-i,e=-e,r=-r}for(;;){if((n-=(a=Math.floor(r/e))*t)<0)return-i;if(n>t)return i;if(e>(r-=a*e)+r){if(t<n+n)return i}else{if(t>n+n)return-i;r=e-r,n=t-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((t-=(a=Math.floor(e/r))*n)<0)return i;if(t>n)return-i;if(r>(e-=a*r)+e){if(n<t+t)return-i}else{if(n>t+t)return i;e=r-e,t=n-t,i=-i}if(0===t)return 0===e?0:i;if(0===e)return-i}};var Hl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e};Hl.prototype.countSegment=function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var r=e.x,n=t.x;return r>n&&(r=t.x,n=e.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=e.x-this._p.x,o=e.y-this._p.y,a=t.x-this._p.x,s=t.y-this._p.y,u=zl.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},Hl.prototype.isPointInPolygon=function(){return this.getLocation()!==pl.EXTERIOR},Hl.prototype.getLocation=function(){return this._isPointOnSegment?pl.BOUNDARY:this._crossingCount%2==1?pl.INTERIOR:pl.EXTERIOR},Hl.prototype.isOnSegment=function(){return this._isPointOnSegment},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl},Hl.locatePointInRing=function(){if(arguments[0]instanceof ll&&vl(arguments[1],Pl)){for(var e=arguments[0],t=arguments[1],r=new Hl(e),n=new ll,i=new ll,o=1;o<t.size();o++)if(t.getCoordinate(o,n),t.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof ll&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new Hl(a),l=1;l<s.length;l++){var f=s[l],c=s[l-1];if(u.countSegment(f,c),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Wl=function(){},Zl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.orientationIndex=function(e,t,r){return Cl.orientationIndex(e,t,r)},Wl.signedArea=function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,r=e[0].x,n=1;n<e.length-1;n++){var i=e[n].x-r,o=e[n+1].y,a=e[n-1].y;t+=i*(a-o)}return t/2}if(vl(arguments[0],Pl)){var s=arguments[0],u=s.size();if(u<3)return 0;var l=new ll,f=new ll,c=new ll;s.getCoordinate(0,f),s.getCoordinate(1,c);var h=f.x;c.x-=h;for(var p=0,d=1;d<u-1;d++)l.y=f.y,f.x=c.x,f.y=c.y,s.getCoordinate(d+1,c),c.x-=h,p+=f.x*(l.y-c.y);return p/2}},Wl.distanceLineLine=function(e,t,r,n){if(e.equals(t))return Wl.distancePointLine(e,r,n);if(r.equals(n))return Wl.distancePointLine(n,e,t);var i=!1;if(Ol.intersects(e,t,r,n)){var o=(t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x);if(0===o)i=!0;else{var a=(e.y-r.y)*(n.x-r.x)-(e.x-r.x)*(n.y-r.y),s=((e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?yl.min(Wl.distancePointLine(e,r,n),Wl.distancePointLine(t,r,n),Wl.distancePointLine(r,e,t),Wl.distancePointLine(n,e,t)):0},Wl.isPointInRing=function(e,t){return Wl.locatePointInRing(e,t)!==pl.EXTERIOR},Wl.computeLength=function(e){var t=e.size();if(t<=1)return 0;var r=0,n=new ll;e.getCoordinate(0,n);for(var i=n.x,o=n.y,a=1;a<t;a++){e.getCoordinate(a,n);var s=n.x,u=n.y,l=s-i,f=u-o;r+=Math.sqrt(l*l+f*f),i=s,o=u}return r},Wl.isCCW=function(e){var t=e.length-1;if(t<3)throw new rl("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=e[0],n=0,i=1;i<=t;i++){var o=e[i];o.y>r.y&&(r=o,n=i)}var a=n;do{(a-=1)<0&&(a=t)}while(e[a].equals2D(r)&&a!==n);var s=n;do{s=(s+1)%t}while(e[s].equals2D(r)&&s!==n);var u=e[a],l=e[s];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var f=Wl.computeOrientation(u,r,l),c=!1;return c=0===f?u.x>l.x:f>0,c},Wl.locatePointInRing=function(e,t){return Hl.locatePointInRing(e,t)},Wl.distancePointLinePerpendicular=function(e,t,r){var n=(r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y),i=((t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y))/n;return Math.abs(i)*Math.sqrt(n)},Wl.computeOrientation=function(e,t,r){return Wl.orientationIndex(e,t,r)},Wl.distancePointLine=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(0===t.length)throw new rl("Line array must contain at least one vertex");for(var r=e.distance(t[0]),n=0;n<t.length-1;n++){var i=Wl.distancePointLine(e,t[n],t[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),l=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(l<=0)return o.distance(a);if(l>=1)return o.distance(s);var f=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(f)*Math.sqrt(u)}},Wl.isOnLine=function(e,t){for(var r=new ql,n=1;n<t.length;n++){var i=t[n-1],o=t[n];if(r.computeIntersection(e,i,o),r.hasIntersection())return!0}return!1},Zl.CLOCKWISE.get=function(){return-1},Zl.RIGHT.get=function(){return Wl.CLOCKWISE},Zl.COUNTERCLOCKWISE.get=function(){return 1},Zl.LEFT.get=function(){return Wl.COUNTERCLOCKWISE},Zl.COLLINEAR.get=function(){return 0},Zl.STRAIGHT.get=function(){return Wl.COLLINEAR},Object.defineProperties(Wl,Zl);var Xl=function(){};Xl.prototype.filter=function(e){},Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl};var Yl=function(){var e=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()},Ql={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Yl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION},Yl.prototype.getFactory=function(){return this._factory},Yl.prototype.getGeometryN=function(e){return this},Yl.prototype.getArea=function(){return 0},Yl.prototype.isRectangle=function(){return!1},Yl.prototype.equals=function(){if(arguments[0]instanceof Yl){var e=arguments[0];return null!==e&&this.equalsTopo(e)}if(arguments[0]instanceof Object){var t=arguments[0];if(!(t instanceof Yl))return!1;var r=t;return this.equalsExact(r)}},Yl.prototype.equalsExact=function(e){return this===e||this.equalsExact(e,0)},Yl.prototype.geometryChanged=function(){this.apply(Yl.geometryChangedFilter)},Yl.prototype.geometryChangedAction=function(){this._envelope=null},Yl.prototype.equalsNorm=function(e){return null!==e&&this.norm().equalsExact(e.norm())},Yl.prototype.getLength=function(){return 0},Yl.prototype.getNumGeometries=function(){return 1},Yl.prototype.compareTo=function(){if(1===arguments.length){var e=arguments[0],t=e;return this.getSortIndex()!==t.getSortIndex()?this.getSortIndex()-t.getSortIndex():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},Yl.prototype.getUserData=function(){return this._userData},Yl.prototype.getSRID=function(){return this._SRID},Yl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Yl.prototype.checkNotGeometryCollection=function(e){if(e.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION)throw new rl("This method does not support GeometryCollection arguments")},Yl.prototype.equal=function(e,t,r){return 0===r?e.equals(t):e.distance(t)<=r},Yl.prototype.norm=function(){var e=this.copy();return e.normalize(),e},Yl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Yl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ol(this._envelope)},Yl.prototype.setSRID=function(e){this._SRID=e},Yl.prototype.setUserData=function(e){this._userData=e},Yl.prototype.compare=function(e,t){for(var r=e.iterator(),n=t.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),a=i.compareTo(o);if(0!==a)return a}return r.hasNext()?1:n.hasNext()?-1:0},Yl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Yl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Yl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Yl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Yl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Yl.SORTINDEX_MULTIPOLYGON},Yl.prototype.interfaces_=function(){return[al,ol,ul]},Yl.prototype.getClass=function(){return Yl},Yl.hasNonEmptyElements=function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1},Yl.hasNullElements=function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1},Ql.serialVersionUID.get=function(){return 0x799ea46522854c00},Ql.SORTINDEX_POINT.get=function(){return 0},Ql.SORTINDEX_MULTIPOINT.get=function(){return 1},Ql.SORTINDEX_LINESTRING.get=function(){return 2},Ql.SORTINDEX_LINEARRING.get=function(){return 3},Ql.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ql.SORTINDEX_POLYGON.get=function(){return 5},Ql.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ql.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ql.geometryChangedFilter.get=function(){return Jl},Object.defineProperties(Yl,Ql);var Jl=function(){};Jl.interfaces_=function(){return[Xl]},Jl.filter=function(e){e.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(e){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var $l=function(){},ef={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};$l.prototype.isInBoundary=function(e){},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},ef.Mod2BoundaryNodeRule.get=function(){return tf},ef.EndPointBoundaryNodeRule.get=function(){return rf},ef.MultiValentEndPointBoundaryNodeRule.get=function(){return nf},ef.MonoValentEndPointBoundaryNodeRule.get=function(){return of},ef.MOD2_BOUNDARY_RULE.get=function(){return new tf},ef.ENDPOINT_BOUNDARY_RULE.get=function(){return new rf},ef.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nf},ef.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new of},ef.OGC_SFS_BOUNDARY_RULE.get=function(){return $l.MOD2_BOUNDARY_RULE},Object.defineProperties($l,ef);var tf=function(){};tf.prototype.isInBoundary=function(e){return e%2==1},tf.prototype.interfaces_=function(){return[$l]},tf.prototype.getClass=function(){return tf};var rf=function(){};rf.prototype.isInBoundary=function(e){return e>0},rf.prototype.interfaces_=function(){return[$l]},rf.prototype.getClass=function(){return rf};var nf=function(){};nf.prototype.isInBoundary=function(e){return e>1},nf.prototype.interfaces_=function(){return[$l]},nf.prototype.getClass=function(){return nf};var of=function(){};of.prototype.isInBoundary=function(e){return 1===e},of.prototype.interfaces_=function(){return[$l]},of.prototype.getClass=function(){return of};var af=function(){};function sf(e){this.message=e||""}af.prototype.add=function(){},af.prototype.addAll=function(){},af.prototype.isEmpty=function(){},af.prototype.iterator=function(){},af.prototype.size=function(){},af.prototype.toArray=function(){},af.prototype.remove=function(){},sf.prototype=new Error,sf.prototype.name="IndexOutOfBoundsException";var uf=function(){};uf.prototype.hasNext=function(){},uf.prototype.next=function(){},uf.prototype.remove=function(){};var lf=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(af);function ff(e){this.message=e||""}ff.prototype=new Error,ff.prototype.name="NoSuchElementException";var cf=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof af&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,af]},t.prototype.add=function(e){return 1===arguments.length?this.array_.push(e):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.set=function(e,t){var r=this.array_[e];return this.array_[e]=t,r},t.prototype.iterator=function(){return new hf(this)},t.prototype.get=function(e){if(e<0||e>=this.size())throw new sf;return this.array_[e]},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,r=this.array_.length;t<r;t++)e.push(this.array_[t]);return e},t.prototype.remove=function(e){for(var t=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===e){this.array_.splice(r,1),t=!0;break}return t},t}(lf),hf=function(e){function t(t){e.call(this),this.arrayList_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new ff;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(e){return this.arrayList_.set(this.position_-1,e)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(uf),pf=function(e){function t(){if(e.call(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(e){return this.get(e)},t.prototype.addAll=function(){var t=this;if(2===arguments.length){for(var r=arguments[0],n=arguments[1],i=!1,o=r.iterator();o.hasNext();)t.add(o.next(),n),i=!0;return i}return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),r=0;r<this.size();r++)t.add(r,this.get(r).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var t=this;if(1===arguments.length){var r=arguments[0];e.prototype.add.call(this,r)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof ll&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(o))return null}e.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var f=arguments[0],c=arguments[1],h=arguments[2];if(h)for(var p=0;p<f.length;p++)t.add(f[p],c);else for(var d=f.length-1;d>=0;d--)t.add(f[d],c);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ll){var v=arguments[0],y=arguments[1],g=arguments[2];if(!g){var m=this.size();if(m>0){if(v>0){var _=this.get(v-1);if(_.equals2D(y))return null}if(v<m){var b=this.get(v);if(b.equals2D(y))return null}}}e.prototype.add.call(this,v,y)}}else if(4===arguments.length){var S=arguments[0],x=arguments[1],C=arguments[2],w=arguments[3],P=1;C>w&&(P=-1);for(var I=C;I!==w;I+=P)t.add(S[I],x);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new ll(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,r),t}(cf),df=function(){},vf={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};vf.ForwardComparator.get=function(){return yf},vf.BidirectionalComparator.get=function(){return gf},vf.coordArrayType.get=function(){return new Array(0).fill(null)},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.isRing=function(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])},df.ptNotInList=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(df.indexOf(n,t)<0)return n}return null},df.scroll=function(e,t){var r=df.indexOf(t,e);if(r<0)return null;var n=new Array(e.length).fill(null);Tl.arraycopy(e,r,n,0,e.length-r),Tl.arraycopy(e,0,n,e.length-r,r),Tl.arraycopy(n,0,e,0,e.length)},df.equals=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].equals(t[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(0!==o.compare(n[a],i[a]))return!1;return!0}},df.intersection=function(e,t){for(var r=new pf,n=0;n<e.length;n++)t.intersects(e[n])&&r.add(e[n],!0);return r.toCoordinateArray()},df.hasRepeatedPoints=function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1},df.removeRepeatedPoints=function(e){return df.hasRepeatedPoints(e)?new pf(e,!1).toCoordinateArray():e},df.reverse=function(e){for(var t=e.length-1,r=Math.trunc(t/2),n=0;n<=r;n++){var i=e[n];e[n]=e[t-n],e[t-n]=i}},df.removeNull=function(e){for(var t=0,r=0;r<e.length;r++)null!==e[r]&&t++;var n=new Array(t).fill(null);if(0===t)return n;for(var i=0,o=0;o<e.length;o++)null!==e[o]&&(n[i++]=e[o]);return n},df.copyDeep=function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),r=0;r<e.length;r++)t[r]=new ll(e[r]);return t}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new ll(n[i+u])},df.isEqualReversed=function(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=t[e.length-r-1];if(0!==n.compareTo(i))return!1}return!0},df.envelope=function(e){for(var t=new Ol,r=0;r<e.length;r++)t.expandToInclude(e[r]);return t},df.toCoordinateArray=function(e){return e.toArray(df.coordArrayType)},df.atLeastNCoordinatesOrNothing=function(e,t){return t.length>=e?t:[]},df.indexOf=function(e,t){for(var r=0;r<t.length;r++)if(e.equals(t[r]))return r;return-1},df.increasingDirection=function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var r=e.length-1-t,n=e[t].compareTo(e[r]);if(0!==n)return n}return 1},df.compare=function(e,t){for(var r=0;r<e.length&&r<t.length;){var n=e[r].compareTo(t[r]);if(0!==n)return n;r++}return r<t.length?-1:r<e.length?1:0},df.minCoordinate=function(e){for(var t=null,r=0;r<e.length;r++)(null===t||t.compareTo(e[r])>0)&&(t=e[r]);return t},df.extract=function(e,t,r){t=yl.clamp(t,0,e.length);var n=(r=yl.clamp(r,-1,e.length))-t+1;r<0&&(n=0),t>=e.length&&(n=0),r<t&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,a=t;a<=r;a++)i[o++]=e[a];return i},Object.defineProperties(df,vf);var yf=function(){};yf.prototype.compare=function(e,t){return df.compare(e,t)},yf.prototype.interfaces_=function(){return[sl]},yf.prototype.getClass=function(){return yf};var gf=function(){};gf.prototype.compare=function(e,t){var r=e,n=t;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=df.compare(r,n);return df.isEqualReversed(r,n)?0:i},gf.prototype.OLDcompare=function(e,t){var r=e,n=t;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=df.increasingDirection(r),o=df.increasingDirection(n),a=i>0?0:r.length-1,s=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[a].compareTo(n[s]);if(0!==l)return l;a+=i,s+=o}return 0},gf.prototype.interfaces_=function(){return[sl]},gf.prototype.getClass=function(){return gf};var mf=function(){};mf.prototype.get=function(){},mf.prototype.put=function(){},mf.prototype.size=function(){},mf.prototype.values=function(){},mf.prototype.entrySet=function(){};var _f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(mf);function bf(e){this.message=e||""}function Sf(){}bf.prototype=new Error,bf.prototype.name="OperationNotSupported",Sf.prototype=new af,Sf.prototype.contains=function(){};var xf=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof af&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){if(this.array_[t]===e)return!0}return!1},t.prototype.add=function(e){return!this.contains(e)&&(this.array_.push(e),!0)},t.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},t.prototype.remove=function(e){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return 0===this.array_.length},t.prototype.toArray=function(){for(var e=[],t=0,r=this.array_.length;t<r;t++)e.push(this.array_[t]);return e},t.prototype.iterator=function(){return new Cf(this)},t}(Sf),Cf=function(e){function t(t){e.call(this),this.hashSet_=t,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new ff;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new bf},t}(uf);function wf(e){return null===e?0:e.color}function Pf(e){return null===e?null:e.parent}function If(e,t){null!==e&&(e.color=t)}function Ef(e){return null===e?null:e.left}function Lf(e){return null===e?null:e.right}function Tf(){this.root_=null,this.size_=0}Tf.prototype=new _f,Tf.prototype.get=function(e){for(var t=this.root_;null!==t;){var r=e.compareTo(t.key);if(r<0)t=t.left;else{if(!(r>0))return t.value;t=t.right}}return null},Tf.prototype.put=function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=e.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=t,o}i=i.right}}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=a:r.right=a,this.fixAfterInsertion(a),this.size_++,null},Tf.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)if(Pf(e)===Ef(Pf(Pf(e)))){var r=Lf(Pf(Pf(e)));1===wf(r)?(If(Pf(e),0),If(r,0),If(Pf(Pf(e)),1),e=Pf(Pf(e))):(e===Lf(Pf(e))&&(e=Pf(e),t.rotateLeft(e)),If(Pf(e),0),If(Pf(Pf(e)),1),t.rotateRight(Pf(Pf(e))))}else{var n=Ef(Pf(Pf(e)));1===wf(n)?(If(Pf(e),0),If(n,0),If(Pf(Pf(e)),1),e=Pf(Pf(e))):(e===Ef(Pf(e))&&(e=Pf(e),t.rotateRight(e)),If(Pf(e),0),If(Pf(Pf(e)),1),t.rotateLeft(Pf(Pf(e))))}this.root_.color=0},Tf.prototype.values=function(){var e=new cf,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=Tf.successor(t));)e.add(t.value);return e},Tf.prototype.entrySet=function(){var e=new xf,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=Tf.successor(t));)e.add(t);return e},Tf.prototype.rotateLeft=function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}},Tf.prototype.rotateRight=function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null===e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}},Tf.prototype.getFirstEntry=function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e},Tf.successor=function(e){if(null===e)return null;if(null!==e.right){for(var t=e.right;null!==t.left;)t=t.left;return t}for(var r=e.parent,n=e;null!==r&&n===r.right;)n=r,r=r.parent;return r},Tf.prototype.size=function(){return this.size_};var Mf=function(){};function Of(){}function Af(){this.array_=[],arguments[0]instanceof af&&this.addAll(arguments[0])}Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf},Of.prototype=new Sf,Af.prototype=new Of,Af.prototype.contains=function(e){for(var t=0,r=this.array_.length;t<r;t++){if(0===this.array_[t].compareTo(e))return!0}return!1},Af.prototype.add=function(e){if(this.contains(e))return!1;for(var t=0,r=this.array_.length;t<r;t++){if(1===this.array_[t].compareTo(e))return this.array_.splice(t,0,e),!0}return this.array_.push(e),!0},Af.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next());return!0},Af.prototype.remove=function(e){throw new bf},Af.prototype.size=function(){return this.array_.length},Af.prototype.isEmpty=function(){return 0===this.array_.length},Af.prototype.toArray=function(){for(var e=[],t=0,r=this.array_.length;t<r;t++)e.push(this.array_[t]);return e},Af.prototype.iterator=function(){return new Nf(this)};var Nf=function(e){this.treeSet_=e,this.position_=0};Nf.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new ff;return this.treeSet_.array_[this.position_++]},Nf.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Nf.prototype.remove=function(){throw new bf};var Rf=function(){};Rf.sort=function(){var e,t,r,n,i=arguments[0];if(1===arguments.length)n=function(e,t){return e.compareTo(t)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(e,t){return r.compare(e,t)},i.sort(n);else if(3===arguments.length){(t=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length));for(i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])}else if(4===arguments.length)for(t=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(e,t){return r.compare(e,t)},t.sort(n),o=i.slice(0,arguments[1]).concat(t,i.slice(arguments[2],i.length)),i.splice(0,i.length),e=0;e<o.length;e++)i.push(o[e])},Rf.asList=function(e){for(var t=new cf,r=0,n=e.length;r<n;r++)t.add(e[r]);return t};var kf=function(){},Df={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Df.P.get=function(){return 0},Df.L.get=function(){return 1},Df.A.get=function(){return 2},Df.FALSE.get=function(){return-1},Df.TRUE.get=function(){return-2},Df.DONTCARE.get=function(){return-3},Df.SYM_FALSE.get=function(){return"F"},Df.SYM_TRUE.get=function(){return"T"},Df.SYM_DONTCARE.get=function(){return"*"},Df.SYM_P.get=function(){return"0"},Df.SYM_L.get=function(){return"1"},Df.SYM_A.get=function(){return"2"},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.toDimensionSymbol=function(e){switch(e){case kf.FALSE:return kf.SYM_FALSE;case kf.TRUE:return kf.SYM_TRUE;case kf.DONTCARE:return kf.SYM_DONTCARE;case kf.P:return kf.SYM_P;case kf.L:return kf.SYM_L;case kf.A:return kf.SYM_A}throw new rl("Unknown dimension value: "+e)},kf.toDimensionValue=function(e){switch(bl.toUpperCase(e)){case kf.SYM_FALSE:return kf.FALSE;case kf.SYM_TRUE:return kf.TRUE;case kf.SYM_DONTCARE:return kf.DONTCARE;case kf.SYM_P:return kf.P;case kf.SYM_L:return kf.L;case kf.SYM_A:return kf.A}throw new rl("Unknown dimension symbol: "+e)},Object.defineProperties(kf,Df);var Ff=function(){};Ff.prototype.filter=function(e){},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff};var Bf=function(){};Bf.prototype.filter=function(e,t){},Bf.prototype.isDone=function(){},Bf.prototype.isGeometryChanged=function(){},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var jf=function(e){function t(t,r){if(e.call(this,r),this._geometries=t||[],e.hasNullElements(this._geometries))throw new rl("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var e=new Ol,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e},t.prototype.getGeometryN=function(e){return this._geometries[e]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)e[++t]=n[i];return e},t.prototype.getArea=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e},t.prototype.equalsExact=function(){var t=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!t._geometries[o].equalsExact(i._geometries[o],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Rf.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var e=kf.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e},t.prototype.getDimension=function(){for(var e=kf.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e},t.prototype.getLength=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),r=0;r<this._geometries.length;r++)t[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(t)},t.prototype.compareToSameClass=function(){var e=this;if(1===arguments.length){var t=arguments[0],r=new Af(Rf.asList(this._geometries)),n=new Af(Rf.asList(t._geometries));return this.compare(r,n)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],a=i,s=this.getNumGeometries(),u=a.getNumGeometries(),l=0;l<s&&l<u;){var f=e.getGeometryN(l),c=a.getGeometryN(l),h=f.compareToSameClass(c,o);if(0!==h)return h;l++}return l<s?1:l<u?-1:0}},t.prototype.apply=function(){var e=this;if(vl(arguments[0],Kl))for(var t=arguments[0],r=0;r<this._geometries.length;r++)e._geometries[r].apply(t);else if(vl(arguments[0],Bf)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(e._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(vl(arguments[0],Ff)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)e._geometries[a].apply(o)}else if(vl(arguments[0],Xl)){var s=arguments[0];s.filter(this);for(var u=0;u<this._geometries.length;u++)e._geometries[u].apply(s)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Ul.shouldNeverReachHere(),null},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)t._geometries[r]=this._geometries[r].clone();return t},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)},t.prototype.isEmpty=function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(t,r),t}(Yl),Uf=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],r=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,r)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?kf.FALSE:0},t.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),r=0;r<this._geometries.length;r++)t[e-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(t)},t.prototype.getBoundary=function(){return new Gf(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[Mf]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(t,r),t}(jf),Gf=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var e=arguments[0],t=$l.MOD2_BOUNDARY_RULE;this._geom=e,this._geomFact=e.getFactory(),this._bnRule=t}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Gf.prototype.boundaryMultiLineString=function(e){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var t=this.computeBoundaryCoordinates(e);return 1===t.length?this._geomFact.createPoint(t[0]):this._geomFact.createMultiPointFromCoords(t)},Gf.prototype.getBoundary=function(){return this._geom instanceof Kf?this.boundaryLineString(this._geom):this._geom instanceof Uf?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gf.prototype.boundaryLineString=function(e){return this._geom.isEmpty()?this.getEmptyMultiPoint():e.isClosed()?this._bnRule.isInBoundary(2)?e.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([e.getStartPoint(),e.getEndPoint()])},Gf.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gf.prototype.computeBoundaryCoordinates=function(e){var t=this,r=new cf;this._endpointMap=new Tf;for(var n=0;n<e.getNumGeometries();n++){var i=e.getGeometryN(n);0!==i.getNumPoints()&&(t.addEndpoint(i.getCoordinateN(0)),t.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;t._bnRule.isInBoundary(s)&&r.add(a.getKey())}return df.toCoordinateArray(r)},Gf.prototype.addEndpoint=function(e){var t=this._endpointMap.get(e);null===t&&(t=new Vf,this._endpointMap.put(e,t)),t.count++},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Gf.getBoundary=function(){if(1===arguments.length){var e=arguments[0],t=new Gf(e);return t.getBoundary()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Gf(r,n);return i.getBoundary()}};var Vf=function(){this.count=null};function qf(){}function zf(){}Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf};var Hf=function(){};function Wf(){}function Zf(){}function Xf(){}var Yf=function(){},Qf={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Yf.chars=function(e,t){for(var r=new Array(t).fill(null),n=0;n<t;n++)r[n]=e;return String(r)},Yf.getStackTrace=function(){if(1===arguments.length){var e=arguments[0],t=new Wf,r=new qf(t);return e.printStackTrace(r),t.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",a=new zf(Yf.getStackTrace(n)),s=new Xf(a),u=0;u<i;u++)try{o+=s.readLine()+Yf.NEWLINE}catch(e){if(!(e instanceof Zf))throw e;Ul.shouldNeverReachHere()}return o}},Yf.split=function(e,t){for(var r=t.length,n=new cf,i=""+e,o=i.indexOf(t);o>=0;){var a=i.substring(0,o);n.add(a),o=(i=i.substring(o+r)).indexOf(t)}i.length>0&&n.add(i);for(var s=new Array(n.size()).fill(null),u=0;u<s.length;u++)s[u]=n.get(u);return s},Yf.toString=function(){if(1===arguments.length){var e=arguments[0];return Yf.SIMPLE_ORDINATE_FORMAT.format(e)}},Yf.spaces=function(e){return Yf.chars(" ",e)},Qf.NEWLINE.get=function(){return Tl.getProperty("line.separator")},Qf.SIMPLE_ORDINATE_FORMAT.get=function(){return new Hf("0.#")},Object.defineProperties(Yf,Qf);var Jf=function(){};Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.copyCoord=function(e,t,r,n){for(var i=Math.min(e.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,e.getOrdinate(t,o))},Jf.isRing=function(e){var t=e.size();return 0===t||!(t<=3)&&(e.getOrdinate(0,Pl.X)===e.getOrdinate(t-1,Pl.X)&&e.getOrdinate(0,Pl.Y)===e.getOrdinate(t-1,Pl.Y))},Jf.isEqual=function(e,t){var r=e.size();if(r!==t.size())return!1;for(var n=Math.min(e.getDimension(),t.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var a=e.getOrdinate(i,o),s=t.getOrdinate(i,o);if(e.getOrdinate(i,o)!==t.getOrdinate(i,o)&&(!nl.isNaN(a)||!nl.isNaN(s)))return!1}return!0},Jf.extend=function(e,t,r){var n=e.create(r,t.getDimension()),i=t.size();if(Jf.copy(t,0,n,0,i),i>0)for(var o=i;o<r;o++)Jf.copy(t,i-1,n,o,1);return n},Jf.reverse=function(e){for(var t=e.size()-1,r=Math.trunc(t/2),n=0;n<=r;n++)Jf.swap(e,n,t-n)},Jf.swap=function(e,t,r){if(t===r)return null;for(var n=0;n<e.getDimension();n++){var i=e.getOrdinate(t,n);e.setOrdinate(t,n,e.getOrdinate(r,n)),e.setOrdinate(r,n,i)}},Jf.copy=function(e,t,r,n,i){for(var o=0;o<i;o++)Jf.copyCoord(e,t+o,r,n+o)},Jf.toString=function(){if(1===arguments.length){var e=arguments[0],t=e.size();if(0===t)return"()";var r=e.getDimension(),n=new ml;n.append("(");for(var i=0;i<t;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Yf.toString(e.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Jf.ensureValidRing=function(e,t){var r=t.size();return 0===r?t:r<=3?Jf.createClosedRing(e,t,4):t.getOrdinate(0,Pl.X)===t.getOrdinate(r-1,Pl.X)&&t.getOrdinate(0,Pl.Y)===t.getOrdinate(r-1,Pl.Y)?t:Jf.createClosedRing(e,t,r+1)},Jf.createClosedRing=function(e,t,r){var n=e.create(r,t.getDimension()),i=t.size();Jf.copy(t,0,n,0,i);for(var o=i;o<r;o++)Jf.copy(t,0,n,o,1);return n};var Kf=function(e){function t(t,r){e.call(this,r),this._points=null,this.init(t)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ol:this._points.expandEnvelope(new Ol)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var t=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!t.equal(t._points.getCoordinate(o),i._points.getCoordinate(o),n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var e=this,t=0;t<Math.trunc(this._points.size()/2);t++){var r=e._points.size()-1-t;if(!e._points.getCoordinate(t).equals(e._points.getCoordinate(r)))return e._points.getCoordinate(t).compareTo(e._points.getCoordinate(r))>0&&Jf.reverse(e._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?kf.FALSE:0},t.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Wl.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var e=this._points.copy();return Jf.reverse(e),this.getFactory().createLineString(e)},t.prototype.compareToSameClass=function(){var e=this;if(1===arguments.length){for(var t=arguments[0],r=t,n=0,i=0;n<this._points.size()&&i<r._points.size();){var o=e._points.getCoordinate(n).compareTo(r._points.getCoordinate(i));if(0!==o)return o;n++,i++}return n<this._points.size()?1:i<r._points.size()?-1:0}if(2===arguments.length){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._points,u._points)}},t.prototype.apply=function(){var e=this;if(vl(arguments[0],Kl))for(var t=arguments[0],r=0;r<this._points.size();r++)t.filter(e._points.getCoordinate(r));else if(vl(arguments[0],Bf)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(e._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(vl(arguments[0],Ff)){var o=arguments[0];o.filter(this)}else if(vl(arguments[0],Xl)){var a=arguments[0];a.filter(this)}},t.prototype.getBoundary=function(){return new Gf(this).getBoundary()},t.prototype.isEquivalentClass=function(e){return e instanceof t},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._points=this._points.clone(),t},t.prototype.getCoordinateN=function(e){return this._points.getCoordinate(e)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return 0===this._points.size()},t.prototype.init=function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new rl("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e},t.prototype.isCoordinate=function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))},t.prototype.interfaces_=function(){return[Mf]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,r),t}(Yl),$f=function(){};$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var ec=function(e){function t(t,r){e.call(this,r),this._coordinates=t||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ol;var e=new Ol;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],r=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),r))}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return kf.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var e=arguments[0],t=e;return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=r;return n.compare(this._coordinates,i._coordinates)}},t.prototype.apply=function(){if(vl(arguments[0],Kl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(vl(arguments[0],Bf)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(vl(arguments[0],Ff)){var r=arguments[0];r.filter(this)}else if(vl(arguments[0],Xl)){var n=arguments[0];n.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),Ul.isTrue(e.size()<=1),this._coordinates=e},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[$f]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,r),t}(Yl),tc=function(){};tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var rc=function(e){function t(t,r,n){if(e.call(this,n),this._shell=null,this._holes=null,null===t&&(t=this.getFactory().createLinearRing()),null===r&&(r=[]),e.hasNullElements(r))throw new rl("holes must not contain null elements");if(t.isEmpty()&&e.hasNonEmptyElements(r))throw new rl("shell is empty but holes are not");this._shell=t,this._holes=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)e[++t]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e},t.prototype.getArea=function(){var e=0;e+=Math.abs(Wl.signedArea(this._shell.getCoordinateSequence()));for(var t=0;t<this._holes.length;t++)e-=Math.abs(Wl.signedArea(this._holes[t].getCoordinateSequence()));return e},t.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),r=0;r<5;r++){var n=e.getX(r);if(n!==t.getMinX()&&n!==t.getMaxX())return!1;var i=e.getY(r);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var u=e.getX(s),l=e.getY(s);if(u!==o===(l!==a))return!1;o=u,a=l}return!0},t.prototype.equalsExact=function(){var t=this;if(2===arguments.length){var r=arguments[0],n=arguments[1];if(!this.isEquivalentClass(r))return!1;var i=r,o=this._shell,a=i._shell;if(!o.equalsExact(a,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!t._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var e=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)e.normalize(e._holes[t],!1);Rf.sort(this._holes)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];if(r.isEmpty())return null;var i=new Array(r.getCoordinates().length-1).fill(null);Tl.arraycopy(r.getCoordinates(),0,i,0,i.length);var o=df.minCoordinate(r.getCoordinates());df.scroll(i,o),Tl.arraycopy(i,0,r.getCoordinates(),0,i.length),r.getCoordinates()[i.length]=i[0],Wl.isCCW(r.getCoordinates())===n&&df.reverse(r.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e},t.prototype.getNumPoints=function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e},t.prototype.reverse=function(){var e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var t=0;t<this._holes.length;t++)e._holes[t]=this._holes[t].copy().reverse();return e},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var e=this;if(1===arguments.length){var t=arguments[0],r=this._shell,n=t._shell;return r.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i,s=this._shell,u=a._shell,l=s.compareToSameClass(u,o);if(0!==l)return l;for(var f=this.getNumInteriorRing(),c=a.getNumInteriorRing(),h=0;h<f&&h<c;){var p=e.getInteriorRingN(h),d=a.getInteriorRingN(h),v=p.compareToSameClass(d,o);if(0!==v)return v;h++}return h<f?1:h<c?-1:0}},t.prototype.apply=function(e){var t=this;if(vl(e,Kl)){this._shell.apply(e);for(var r=0;r<this._holes.length;r++)t._holes[r].apply(e)}else if(vl(e,Bf)){if(this._shell.apply(e),!e.isDone())for(var n=0;n<this._holes.length&&(t._holes[n].apply(e),!e.isDone());n++);e.isGeometryChanged()&&this.geometryChanged()}else if(vl(e,Ff))e.filter(this);else if(vl(e,Xl)){e.filter(this),this._shell.apply(e);for(var i=0;i<this._holes.length;i++)t._holes[i].apply(e)}},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},t.prototype.clone=function(){var t=e.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)t._holes[r]=this._holes[r].clone();return t},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var e=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new t(e,r,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(e){return this._holes[e]},t.prototype.interfaces_=function(){return[tc]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,r),t}(Yl),nc=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],r=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,r)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._geometries[t].getCoordinate()}return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return kf.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[$f]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(t,r),t}(jf),ic=function(e){function t(t,r){t instanceof ll&&r instanceof bc&&(t=r.getCoordinateSequenceFactory().create(t)),e.call(this,t,r),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Yl.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return kf.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var e=this._points.copy();return Jf.reverse(e),this.getFactory().createLinearRing(e)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new rl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new rl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,r),t}(Kf),oc=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return Yl.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(2===arguments.length){var t=arguments[0],r=arguments[1];return!!this.isEquivalentClass(t)&&e.prototype.equalsExact.call(this,t,r)}return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var e=this._geometries.length,t=new Array(e).fill(null),r=0;r<this._geometries.length;r++)t[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(t)},t.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new cf,t=0;t<this._geometries.length;t++)for(var r=this._geometries[t].getBoundary(),n=0;n<r.getNumGeometries();n++)e.add(r.getGeometryN(n));var i=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(i))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var e=new Array(this._geometries.length).fill(null),r=0;r<e.length;r++)e[r]=this._geometries[r].copy();return new t(e,this._factory)},t.prototype.interfaces_=function(){return[tc]},t.prototype.getClass=function(){return t},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,r),t}(jf),ac=function(e){this._factory=e||null,this._isUserDataCopied=!1},sc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ac.prototype.setCopyUserData=function(e){this._isUserDataCopied=e},ac.prototype.edit=function(e,t){if(null===e)return null;var r=this.editInternal(e,t);return this._isUserDataCopied&&r.setUserData(e.getUserData()),r},ac.prototype.editInternal=function(e,t){return null===this._factory&&(this._factory=e.getFactory()),e instanceof jf?this.editGeometryCollection(e,t):e instanceof rc?this.editPolygon(e,t):e instanceof ec||e instanceof Kf?t.edit(e,this._factory):(Ul.shouldNeverReachHere("Unsupported Geometry class: "+e.getClass().getName()),null)},ac.prototype.editGeometryCollection=function(e,t){for(var r=t.edit(e,this._factory),n=new cf,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),t);null===o||o.isEmpty()||n.add(o)}return r.getClass()===nc?this._factory.createMultiPoint(n.toArray([])):r.getClass()===Uf?this._factory.createMultiLineString(n.toArray([])):r.getClass()===oc?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},ac.prototype.editPolygon=function(e,t){var r=t.edit(e,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),t);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new cf,o=0;o<r.getNumInteriorRing();o++){var a=this.edit(r.getInteriorRingN(o),t);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(n,i.toArray([]))},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.GeometryEditorOperation=function(){},sc.NoOpGeometryOperation.get=function(){return uc},sc.CoordinateOperation.get=function(){return lc},sc.CoordinateSequenceOperation.get=function(){return fc},Object.defineProperties(ac,sc);var uc=function(){};uc.prototype.edit=function(e,t){return e},uc.prototype.interfaces_=function(){return[ac.GeometryEditorOperation]},uc.prototype.getClass=function(){return uc};var lc=function(){};lc.prototype.edit=function(e,t){var r=this.editCoordinates(e.getCoordinates(),e);return null===r?e:e instanceof ic?t.createLinearRing(r):e instanceof Kf?t.createLineString(r):e instanceof ec?r.length>0?t.createPoint(r[0]):t.createPoint():e},lc.prototype.interfaces_=function(){return[ac.GeometryEditorOperation]},lc.prototype.getClass=function(){return lc};var fc=function(){};fc.prototype.edit=function(e,t){return e instanceof ic?t.createLinearRing(this.edit(e.getCoordinateSequence(),e)):e instanceof Kf?t.createLineString(this.edit(e.getCoordinateSequence(),e)):e instanceof ec?t.createPoint(this.edit(e.getCoordinateSequence(),e)):e},fc.prototype.interfaces_=function(){return[ac.GeometryEditorOperation]},fc.prototype.getClass=function(){return fc};var cc=function(){var e=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var r=0;r<t;r++)e._coordinates[r]=new ll}else if(vl(arguments[0],Pl)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)e._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=u;for(var l=0;l<s;l++)e._coordinates[l]=new ll}},hc={serialVersionUID:{configurable:!0}};cc.prototype.setOrdinate=function(e,t,r){switch(t){case Pl.X:this._coordinates[e].x=r;break;case Pl.Y:this._coordinates[e].y=r;break;case Pl.Z:this._coordinates[e].z=r;break;default:throw new rl("invalid ordinateIndex")}},cc.prototype.size=function(){return this._coordinates.length},cc.prototype.getOrdinate=function(e,t){switch(t){case Pl.X:return this._coordinates[e].x;case Pl.Y:return this._coordinates[e].y;case Pl.Z:return this._coordinates[e].z}return nl.NaN},cc.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0],r=arguments[1];r.x=this._coordinates[t].x,r.y=this._coordinates[t].y,r.z=this._coordinates[t].z}},cc.prototype.getCoordinateCopy=function(e){return new ll(this._coordinates[e])},cc.prototype.getDimension=function(){return this._dimension},cc.prototype.getX=function(e){return this._coordinates[e].x},cc.prototype.clone=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].clone();return new cc(e,this._dimension)},cc.prototype.expandEnvelope=function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e},cc.prototype.copy=function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++)e[t]=this._coordinates[t].copy();return new cc(e,this._dimension)},cc.prototype.toString=function(){if(this._coordinates.length>0){var e=new ml(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"},cc.prototype.getY=function(e){return this._coordinates[e].y},cc.prototype.toCoordinateArray=function(){return this._coordinates},cc.prototype.interfaces_=function(){return[Pl,ul]},cc.prototype.getClass=function(){return cc},hc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(cc,hc);var pc=function(){},dc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};pc.prototype.readResolve=function(){return pc.instance()},pc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new cc(e)}if(vl(arguments[0],Pl)){var t=arguments[0];return new cc(t)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new cc(r):new cc(r,n)}},pc.prototype.interfaces_=function(){return[hl,ul]},pc.prototype.getClass=function(){return pc},pc.instance=function(){return pc.instanceObject},dc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},dc.instanceObject.get=function(){return new pc},Object.defineProperties(pc,dc);var vc=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return this.map_.get(e)||null},t.prototype.put=function(e,t){return this.map_.set(e,t),t},t.prototype.values=function(){for(var e=new cf,t=this.map_.values(),r=t.next();!r.done;)e.add(r.value),r=t.next();return e},t.prototype.entrySet=function(){var e=new xf;return this.map_.entries().forEach(function(t){return e.add(t)}),e},t.prototype.size=function(){return this.map_.size()},t}(mf),yc=function e(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof mc){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=e.FIXED,this.setScale(r)}else if(arguments[0]instanceof e){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},gc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};yc.prototype.equals=function(e){if(!(e instanceof yc))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale},yc.prototype.compareTo=function(e){var t=e,r=this.getMaximumSignificantDigits(),n=t.getMaximumSignificantDigits();return new _l(r).compareTo(new _l(n))},yc.prototype.getScale=function(){return this._scale},yc.prototype.isFloating=function(){return this._modelType===yc.FLOATING||this._modelType===yc.FLOATING_SINGLE},yc.prototype.getType=function(){return this._modelType},yc.prototype.toString=function(){var e="UNKNOWN";return this._modelType===yc.FLOATING?e="Floating":this._modelType===yc.FLOATING_SINGLE?e="Floating-Single":this._modelType===yc.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e},yc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var e=arguments[0];if(nl.isNaN(e))return e;if(this._modelType===yc.FLOATING_SINGLE){return e}return this._modelType===yc.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof ll){var t=arguments[0];if(this._modelType===yc.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}},yc.prototype.getMaximumSignificantDigits=function(){var e=16;return this._modelType===yc.FLOATING?e=16:this._modelType===yc.FLOATING_SINGLE?e=6:this._modelType===yc.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e},yc.prototype.setScale=function(e){this._scale=Math.abs(e)},yc.prototype.interfaces_=function(){return[ul,ol]},yc.prototype.getClass=function(){return yc},yc.mostPrecise=function(e,t){return e.compareTo(t)>=0?e:t},gc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(yc,gc);var mc=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},_c={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};mc.prototype.readResolve=function(){return mc.nameToTypeMap.get(this._name)},mc.prototype.toString=function(){return this._name},mc.prototype.interfaces_=function(){return[ul]},mc.prototype.getClass=function(){return mc},_c.serialVersionUID.get=function(){return-552860263173159e4},_c.nameToTypeMap.get=function(){return new vc},Object.defineProperties(mc,_c),yc.Type=mc,yc.FIXED=new mc("FIXED"),yc.FLOATING=new mc("FLOATING"),yc.FLOATING_SINGLE=new mc("FLOATING SINGLE");var bc=function e(){this._precisionModel=new yc,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?vl(arguments[0],hl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof yc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Sc={serialVersionUID:{configurable:!0}};bc.prototype.toGeometry=function(e){return e.isNull()?this.createPoint(null):e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new ll(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new ll(e.getMinX(),e.getMinY()),new ll(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new ll(e.getMinX(),e.getMinY()),new ll(e.getMinX(),e.getMaxY()),new ll(e.getMaxX(),e.getMaxY()),new ll(e.getMaxX(),e.getMinY()),new ll(e.getMinX(),e.getMinY())]),null)},bc.prototype.createLineString=function(e){return e?e instanceof Array?new Kf(this.getCoordinateSequenceFactory().create(e),this):vl(e,Pl)?new Kf(e,this):void 0:new Kf(this.getCoordinateSequenceFactory().create([]),this)},bc.prototype.createMultiLineString=function(){if(0===arguments.length)return new Uf(null,this);if(1===arguments.length){var e=arguments[0];return new Uf(e,this)}},bc.prototype.buildGeometry=function(e){for(var t=null,r=!1,n=!1,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===t&&(t=a),a!==t&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===t)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(bc.toGeometryArray(e));var s=e.iterator().next();if(e.size()>1){if(s instanceof rc)return this.createMultiPolygon(bc.toPolygonArray(e));if(s instanceof Kf)return this.createMultiLineString(bc.toLineStringArray(e));if(s instanceof ec)return this.createMultiPoint(bc.toPointArray(e));Ul.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},bc.prototype.createMultiPointFromCoords=function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)},bc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ll){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(vl(arguments[0],Pl)){var t=arguments[0];return new ec(t,this)}}},bc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},bc.prototype.createPolygon=function(){if(0===arguments.length)return new rc(null,null,this);if(1===arguments.length){if(vl(arguments[0],Pl)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof ic){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new rc(n,i,this)}},bc.prototype.getSRID=function(){return this._SRID},bc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jf(null,this);if(1===arguments.length){var e=arguments[0];return new jf(e,this)}},bc.prototype.createGeometry=function(e){return new ac(this).edit(e,{edit:function(){if(2===arguments.length){var e=arguments[0];return this._coordinateSequenceFactory.create(e)}}})},bc.prototype.getPrecisionModel=function(){return this._precisionModel},bc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(vl(arguments[0],Pl)){var t=arguments[0];return new ic(t,this)}}},bc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new oc(null,this);if(1===arguments.length){var e=arguments[0];return new oc(e,this)}},bc.prototype.createMultiPoint=function(){var e=this;if(0===arguments.length)return new nc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new nc(t,this)}if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(null!==r?this.getCoordinateSequenceFactory().create(r):null)}if(vl(arguments[0],Pl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),o=0;o<n.size();o++){var a=e.getCoordinateSequenceFactory().create(1,n.getDimension());Jf.copy(n,o,a,0,1),i[o]=e.createPoint(a)}return this.createMultiPoint(i)}}},bc.prototype.interfaces_=function(){return[ul]},bc.prototype.getClass=function(){return bc},bc.toMultiPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toGeometryArray=function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.getDefaultCoordinateSequenceFactory=function(){return pc.instance()},bc.toMultiLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toLineStringArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toMultiPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toLinearRingArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toPointArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.toPolygonArray=function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)},bc.createPointFromInternalCoord=function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)},Sc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(bc,Sc);var xc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Cc=function(e){this.geometryFactory=e||new bc};Cc.prototype.read=function(e){var t,r=(t="string"==typeof e?JSON.parse(e):e).type;if(!wc[r])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==xc.indexOf(r)?wc[r].apply(this,[t.coordinates]):"GeometryCollection"===r?wc[r].apply(this,[t.geometries]):wc[r].apply(this,[t])},Cc.prototype.write=function(e){var t=e.getGeometryType();if(!Pc[t])throw new Error("Geometry is not supported");return Pc[t].apply(this,[e])};var wc={Feature:function(e){var t={};for(var r in e)t[r]=e[r];if(e.geometry){var n=e.geometry.type;if(!wc[n])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=wc.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var r=0;r<e.features.length;++r)t.features.push(this.read(e.features[r]))}return e.bbox&&(t.bbox=this.parse.bbox.apply(this,[e.bbox])),t},coordinates:function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];t.push(new ll(n[0],n[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new ll(e[0],e[1]),new ll(e[2],e[1]),new ll(e[2],e[3]),new ll(e[0],e[3]),new ll(e[0],e[1])])},Point:function(e){var t=new ll(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],r=0;r<e.length;++r)t.push(wc.Point.apply(this,[e[r]]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=wc.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],r=0;r<e.length;++r)t.push(wc.LineString.apply(this,[e[r]]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=wc.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(t),n=[],i=1;i<e.length;++i){var o=e[i],a=wc.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);n.push(s)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];t.push(wc.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},Pc={coordinate:function(e){return[e.x,e.y]},Point:function(e){return{type:"Point",coordinates:Pc.coordinate.apply(this,[e.getCoordinate()])}},MultiPoint:function(e){for(var t=[],r=0;r<e._geometries.length;++r){var n=e._geometries[r],i=Pc.Point.apply(this,[n]);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],r=e.getCoordinates(),n=0;n<r.length;++n){var i=r[n];t.push(Pc.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],r=0;r<e._geometries.length;++r){var n=e._geometries[r],i=Pc.LineString.apply(this,[n]);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],r=Pc.LineString.apply(this,[e._shell]);t.push(r.coordinates);for(var n=0;n<e._holes.length;++n){var i=e._holes[n],o=Pc.LineString.apply(this,[i]);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],r=0;r<e._geometries.length;++r){var n=e._geometries[r],i=Pc.Polygon.apply(this,[n]);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],r=0;r<e._geometries.length;++r){var n=e._geometries[r],i=n.getGeometryType();t.push(Pc[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:t}}},Ic=function(e){this.geometryFactory=e||new bc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Cc(this.geometryFactory)};Ic.prototype.read=function(e){var t=this.parser.read(e);return this.precisionModel.getType()===yc.FIXED&&this.reducePrecision(t),t},Ic.prototype.reducePrecision=function(e){var t,r;if(e.coordinate)this.precisionModel.makePrecise(e.coordinate);else if(e.points)for(t=0,r=e.points.length;t<r;t++)this.precisionModel.makePrecise(e.points[t]);else if(e.geometries)for(t=0,r=e.geometries.length;t<r;t++)this.reducePrecision(e.geometries[t])};var Ec=function(){this.parser=new Cc(this.geometryFactory)};Ec.prototype.write=function(e){return this.parser.write(e)};var Lc=function(){},Tc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Mc(e){this.message=e||""}function Oc(){this.array_=[]}Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.opposite=function(e){return e===Lc.LEFT?Lc.RIGHT:e===Lc.RIGHT?Lc.LEFT:e},Tc.ON.get=function(){return 0},Tc.LEFT.get=function(){return 1},Tc.RIGHT.get=function(){return 2},Object.defineProperties(Lc,Tc),Mc.prototype=new Error,Mc.prototype.name="EmptyStackException",Oc.prototype=new lf,Oc.prototype.add=function(e){return this.array_.push(e),!0},Oc.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]},Oc.prototype.push=function(e){return this.array_.push(e),e},Oc.prototype.pop=function(e){if(0===this.array_.length)throw new Mc;return this.array_.pop()},Oc.prototype.peek=function(){if(0===this.array_.length)throw new Mc;return this.array_[this.array_.length-1]},Oc.prototype.empty=function(){return 0===this.array_.length},Oc.prototype.isEmpty=function(){return this.empty()},Oc.prototype.search=function(e){return this.array_.indexOf(e)},Oc.prototype.size=function(){return this.array_.length},Oc.prototype.toArray=function(){for(var e=[],t=0,r=this.array_.length;t<r;t++)e.push(this.array_[t]);return e};var Ac=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ac.prototype.getCoordinate=function(){return this._minCoord},Ac.prototype.getRightmostSide=function(e,t){var r=this.getRightmostSideOfSegment(e,t);return r<0&&(r=this.getRightmostSideOfSegment(e,t-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),r},Ac.prototype.findRightmostEdgeAtVertex=function(){var e=this._minDe.getEdge().getCoordinates();Ul.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],r=e[this._minIndex+1],n=Wl.computeOrientation(this._minCoord,r,t),i=!1;(t.y<this._minCoord.y&&r.y<this._minCoord.y&&n===Wl.COUNTERCLOCKWISE||t.y>this._minCoord.y&&r.y>this._minCoord.y&&n===Wl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ac.prototype.getRightmostSideOfSegment=function(e,t){var r=e.getEdge().getCoordinates();if(t<0||t+1>=r.length)return-1;if(r[t].y===r[t+1].y)return-1;var n=Lc.LEFT;return r[t].y<r[t+1].y&&(n=Lc.RIGHT),n},Ac.prototype.getEdge=function(){return this._orientedDe},Ac.prototype.checkForRightmostCoordinate=function(e){for(var t=this,r=e.getEdge().getCoordinates(),n=0;n<r.length-1;n++)(null===t._minCoord||r[n].x>t._minCoord.x)&&(t._minDe=e,t._minIndex=n,t._minCoord=r[n])},Ac.prototype.findRightmostEdgeAtNode=function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ac.prototype.findEdge=function(e){for(var t=e.iterator();t.hasNext();){var r=t.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Ul.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Lc.LEFT&&(this._orientedDe=this._minDe.getSym())},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Nc=function(e){function t(r,n){e.call(this,t.msgWithCoord(r,n)),this.pt=n?new ll(n):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(e,t){return t?e:e+" [ "+t+" ]"},t}(Bl),Rc=function(){this.array_=[]};Rc.prototype.addLast=function(e){this.array_.push(e)},Rc.prototype.removeFirst=function(){return this.array_.shift()},Rc.prototype.isEmpty=function(){return 0===this.array_.length};var kc=function(){this._finder=null,this._dirEdgeList=new cf,this._nodes=new cf,this._rightMostCoord=null,this._env=null,this._finder=new Ac};kc.prototype.clearVisitedEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){e.next().setVisited(!1)}},kc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},kc.prototype.computeNodeDepth=function(e){for(var t=null,r=e.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){t=n;break}}if(null===t)throw new Nc("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},kc.prototype.computeDepth=function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.setEdgeDepths(Lc.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)},kc.prototype.create=function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},kc.prototype.findResultEdges=function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(Lc.RIGHT)>=1&&t.getDepth(Lc.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}},kc.prototype.computeDepths=function(e){var t=new xf,r=new Rc,n=e.getNode();for(r.addLast(n),t.add(n),e.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();t.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(r.addLast(s),t.add(s))}}}},kc.prototype.compareTo=function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},kc.prototype.getEnvelope=function(){if(null===this._env){for(var e=new Ol,t=this._dirEdgeList.iterator();t.hasNext();)for(var r=t.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)e.expandToInclude(r[n]);this._env=e}return this._env},kc.prototype.addReachable=function(e){var t=new Oc;for(t.add(e);!t.empty();){var r=t.pop();this.add(r,t)}},kc.prototype.copySymDepths=function(e){var t=e.getSym();t.setDepth(Lc.LEFT,e.getDepth(Lc.RIGHT)),t.setDepth(Lc.RIGHT,e.getDepth(Lc.LEFT))},kc.prototype.add=function(e,t){e.setVisited(!0),this._nodes.add(e);for(var r=e.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||t.push(i)}},kc.prototype.getNodes=function(){return this._nodes},kc.prototype.getDirectedEdges=function(){return this._dirEdgeList},kc.prototype.interfaces_=function(){return[ol]},kc.prototype.getClass=function(){return kc};var Dc=function e(){var t=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Lc.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[Lc.ON]=a,this.location[Lc.LEFT]=s,this.location[Lc.RIGHT]=u}};Dc.prototype.setAllLocations=function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e},Dc.prototype.isNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==pl.NONE)return!1;return!0},Dc.prototype.setAllLocationsIfNull=function(e){for(var t=0;t<this.location.length;t++)this.location[t]===pl.NONE&&(this.location[t]=e)},Dc.prototype.isLine=function(){return 1===this.location.length},Dc.prototype.merge=function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[Lc.ON]=this.location[Lc.ON],t[Lc.LEFT]=pl.NONE,t[Lc.RIGHT]=pl.NONE,this.location=t}for(var r=0;r<this.location.length;r++)this.location[r]===pl.NONE&&r<e.location.length&&(this.location[r]=e.location[r])},Dc.prototype.getLocations=function(){return this.location},Dc.prototype.flip=function(){if(this.location.length<=1)return null;var e=this.location[Lc.LEFT];this.location[Lc.LEFT]=this.location[Lc.RIGHT],this.location[Lc.RIGHT]=e},Dc.prototype.toString=function(){var e=new ml;return this.location.length>1&&e.append(pl.toLocationSymbol(this.location[Lc.LEFT])),e.append(pl.toLocationSymbol(this.location[Lc.ON])),this.location.length>1&&e.append(pl.toLocationSymbol(this.location[Lc.RIGHT])),e.toString()},Dc.prototype.setLocations=function(e,t,r){this.location[Lc.ON]=e,this.location[Lc.LEFT]=t,this.location[Lc.RIGHT]=r},Dc.prototype.get=function(e){return e<this.location.length?this.location[e]:pl.NONE},Dc.prototype.isArea=function(){return this.location.length>1},Dc.prototype.isAnyNull=function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===pl.NONE)return!0;return!1},Dc.prototype.setLocation=function(){if(1===arguments.length){var e=arguments[0];this.setLocation(Lc.ON,e)}else if(2===arguments.length){var t=arguments[0],r=arguments[1];this.location[t]=r}},Dc.prototype.init=function(e){this.location=new Array(e).fill(null),this.setAllLocations(pl.NONE)},Dc.prototype.isEqualOnSide=function(e,t){return this.location[t]===e.location[t]},Dc.prototype.allPositionsEqual=function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function e(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Dc(t),this.elt[1]=new Dc(t)}else if(arguments[0]instanceof e){var r=arguments[0];this.elt[0]=new Dc(r.elt[0]),this.elt[1]=new Dc(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Dc(pl.NONE),this.elt[1]=new Dc(pl.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Dc(o,a,s),this.elt[1]=new Dc(o,a,s)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],f=arguments[2],c=arguments[3];this.elt[0]=new Dc(pl.NONE,pl.NONE,pl.NONE),this.elt[1]=new Dc(pl.NONE,pl.NONE,pl.NONE),this.elt[u].setLocations(l,f,c)}};Fc.prototype.getGeometryCount=function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e},Fc.prototype.setAllLocations=function(e,t){this.elt[e].setAllLocations(t)},Fc.prototype.isNull=function(e){return this.elt[e].isNull()},Fc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],r=arguments[1];this.elt[t].setAllLocationsIfNull(r)}},Fc.prototype.isLine=function(e){return this.elt[e].isLine()},Fc.prototype.merge=function(e){for(var t=this,r=0;r<2;r++)null===t.elt[r]&&null!==e.elt[r]?t.elt[r]=new Dc(e.elt[r]):t.elt[r].merge(e.elt[r])},Fc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Fc.prototype.getLocation=function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(Lc.ON)}if(2===arguments.length){var t=arguments[0],r=arguments[1];return this.elt[t].get(r)}},Fc.prototype.toString=function(){var e=new ml;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()},Fc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}},Fc.prototype.isAnyNull=function(e){return this.elt[e].isAnyNull()},Fc.prototype.setLocation=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(Lc.ON,t)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},Fc.prototype.isEqualOnSide=function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)},Fc.prototype.allPositionsEqual=function(e,t){return this.elt[e].allPositionsEqual(t)},Fc.prototype.toLine=function(e){this.elt[e].isArea()&&(this.elt[e]=new Dc(this.elt[e].location[0]))},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc},Fc.toLineLabel=function(e){for(var t=new Fc(pl.NONE),r=0;r<2;r++)t.setLocation(r,e.getLocation(r));return t};var Bc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new cf,this._pts=new cf,this._label=new Fc(pl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new cf,this._geometryFactory=null;var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()};Bc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=Wl.isCCW(this._ring.getCoordinates())},Bc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Bc.prototype.computePoints=function(e){var t=this;this._startDe=e;var r=e,n=!0;do{if(null===r)throw new Nc("Found null DirectedEdge");if(r.getEdgeRing()===t)throw new Nc("Directed Edge visited twice during ring-building at "+r.getCoordinate());t._edges.add(r);var i=r.getLabel();Ul.isTrue(i.isArea()),t.mergeLabel(i),t.addPoints(r.getEdge(),r.isForward(),n),n=!1,t.setEdgeRing(r,t),r=t.getNext(r)}while(r!==this._startDe)},Bc.prototype.getLinearRing=function(){return this._ring},Bc.prototype.getCoordinate=function(e){return this._pts.get(e)},Bc.prototype.computeMaxNodeDegree=function(){var e=this;this._maxNodeDegree=0;var t=this._startDe;do{var r=t.getNode().getEdges().getOutgoingDegree(e);r>e._maxNodeDegree&&(e._maxNodeDegree=r),t=e.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Bc.prototype.addPoints=function(e,t,r){var n=e.getCoordinates();if(t){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var a=n.length-2;r&&(a=n.length-1);for(var s=a;s>=0;s--)this._pts.add(n[s])}},Bc.prototype.isHole=function(){return this._isHole},Bc.prototype.setInResult=function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)},Bc.prototype.containsPoint=function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!Wl.isPointInRing(e,t.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){if(r.next().containsPoint(e))return!1}return!0},Bc.prototype.addHole=function(e){this._holes.add(e)},Bc.prototype.isShell=function(){return null===this._shell},Bc.prototype.getLabel=function(){return this._label},Bc.prototype.getEdges=function(){return this._edges},Bc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Bc.prototype.getShell=function(){return this._shell},Bc.prototype.mergeLabel=function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[0],r=arguments[1],n=t.getLocation(r,Lc.RIGHT);if(n===pl.NONE)return null;if(this._label.getLocation(r)===pl.NONE)return this._label.setLocation(r,n),null}},Bc.prototype.setShell=function(e){this._shell=e,null!==e&&e.addHole(this)},Bc.prototype.toPolygon=function(e){for(var t=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)t[r]=this._holes.get(r).getLinearRing();return e.createPolygon(this.getLinearRing(),t)},Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var jc=function(e){function t(){var t=arguments[0],r=arguments[1];e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(e,t){e.setMinEdgeRing(t)},t.prototype.getNext=function(e){return e.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bc),Uc=function(e){function t(){var t=arguments[0],r=arguments[1];e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var e=new cf,t=this._startDe;do{if(null===t.getMinEdgeRing()){var r=new jc(t,this._geometryFactory);e.add(r)}t=t.getNext()}while(t!==this._startDe);return e},t.prototype.setEdgeRing=function(e,t){e.setEdgeRing(t)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)},t.prototype.getNext=function(e){return e.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Bc),Gc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}};Gc.prototype.setVisited=function(e){this._isVisited=e},Gc.prototype.setInResult=function(e){this._isInResult=e},Gc.prototype.isCovered=function(){return this._isCovered},Gc.prototype.isCoveredSet=function(){return this._isCoveredSet},Gc.prototype.setLabel=function(e){this._label=e},Gc.prototype.getLabel=function(){return this._label},Gc.prototype.setCovered=function(e){this._isCovered=e,this._isCoveredSet=!0},Gc.prototype.updateIM=function(e){Ul.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)},Gc.prototype.isInResult=function(){return this._isInResult},Gc.prototype.isVisited=function(){return this._isVisited},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc};var Vc=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var t=arguments[0],r=arguments[1];this._coord=t,this._edges=r,this._label=new Fc(0,pl.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();){if(e.next().getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(e){e.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(e){},t.prototype.computeMergedLocation=function(e,t){var r=pl.NONE;if(r=this._label.getLocation(t),!e.isNull(t)){var n=e.getLocation(t);r!==pl.BOUNDARY&&(r=n)}return r},t.prototype.setLabel=function(){if(2!==arguments.length)return e.prototype.setLabel.apply(this,arguments);var t=arguments[0],r=arguments[1];null===this._label?this._label=new Fc(t,r):this._label.setLocation(t,r)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var e=this;if(arguments[0]instanceof t){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Fc)for(var n=arguments[0],i=0;i<2;i++){var o=e.computeMergedLocation(n,i),a=e._label.getLocation(i);a===pl.NONE&&e._label.setLocation(i,o)}},t.prototype.add=function(e){this._edges.insert(e),e.setNode(this)},t.prototype.setLabelBoundary=function(e){if(null===this._label)return null;var t=pl.NONE;null!==this._label&&(t=this._label.getLocation(e));var r=null;switch(t){case pl.BOUNDARY:r=pl.INTERIOR;break;case pl.INTERIOR:default:r=pl.BOUNDARY}this._label.setLocation(e,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Gc),qc=function(){this.nodeMap=new Tf,this.nodeFact=null;var e=arguments[0];this.nodeFact=e};qc.prototype.find=function(e){return this.nodeMap.get(e)},qc.prototype.addNode=function(){if(arguments[0]instanceof ll){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof Vc){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},qc.prototype.print=function(e){for(var t=this.iterator();t.hasNext();){t.next().print(e)}},qc.prototype.iterator=function(){return this.nodeMap.values().iterator()},qc.prototype.values=function(){return this.nodeMap.values()},qc.prototype.getBoundaryNodes=function(e){for(var t=new cf,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(e)===pl.BOUNDARY&&t.add(n)}return t},qc.prototype.add=function(e){var t=e.getCoordinate();this.addNode(t).add(e)},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var zc=function(){},Hc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc},zc.isNorthern=function(e){return e===zc.NE||e===zc.NW},zc.isOpposite=function(e,t){return e!==t&&2===(e-t+4)%4},zc.commonHalfPlane=function(e,t){if(e===t)return e;if(2===(e-t+4)%4)return-1;var r=e<t?e:t;return 0===r&&3===(e>t?e:t)?3:r},zc.isInHalfPlane=function(e,t){return t===zc.SE?e===zc.SE||e===zc.SW:e===t||e===t+1},zc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new rl("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?zc.NE:zc.SE:t>=0?zc.NW:zc.SW}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new rl("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?zc.NE:zc.SE:n.y>=r.y?zc.NW:zc.SW}},Hc.NE.get=function(){return 0},Hc.NW.get=function(){return 1},Hc.SW.get=function(){return 2},Hc.SE.get=function(){return 3},Object.defineProperties(zc,Hc);var Wc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var t=arguments[0],r=arguments[1],n=arguments[2],i=null;this._edge=t,this.init(r,n),this._label=i}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this._edge=o,this.init(a,s),this._label=u}};Wc.prototype.compareDirection=function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:Wl.computeOrientation(e._p0,e._p1,this._p1)},Wc.prototype.getDy=function(){return this._dy},Wc.prototype.getCoordinate=function(){return this._p0},Wc.prototype.setNode=function(e){this._node=e},Wc.prototype.print=function(e){var t=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)},Wc.prototype.compareTo=function(e){var t=e;return this.compareDirection(t)},Wc.prototype.getDirectedCoordinate=function(){return this._p1},Wc.prototype.getDx=function(){return this._dx},Wc.prototype.getLabel=function(){return this._label},Wc.prototype.getEdge=function(){return this._edge},Wc.prototype.getQuadrant=function(){return this._quadrant},Wc.prototype.getNode=function(){return this._node},Wc.prototype.toString=function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),r=t.lastIndexOf(".");return"  "+t.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label},Wc.prototype.computeLabel=function(e){},Wc.prototype.init=function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=zc.quadrant(this._dx,this._dy),Ul.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Wc.prototype.interfaces_=function(){return[ol]},Wc.prototype.getClass=function(){return Wc};var Zc=function(e){function t(){var t=arguments[0],r=arguments[1];if(e.call(this,t),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(e){return this._depth[e]},t.prototype.setVisited=function(e){this._isVisited=e},t.prototype.computeDirectedLabel=function(){this._label=new Fc(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new Nc("assigned depths do not match",this.getCoordinate());this._depth[e]=t},t.prototype.isInteriorAreaEdge=function(){for(var e=this,t=!0,r=0;r<2;r++)e._label.isArea(r)&&e._label.getLocation(r,Lc.LEFT)===pl.INTERIOR&&e._label.getLocation(r,Lc.RIGHT)===pl.INTERIOR||(t=!1);return t},t.prototype.setNextMin=function(e){this._nextMin=e},t.prototype.print=function(t){e.prototype.print.call(this,t),t.print(" "+this._depth[Lc.LEFT]+"/"+this._depth[Lc.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},t.prototype.setMinEdgeRing=function(e){this._minEdgeRing=e},t.prototype.isLineEdge=function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,pl.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,pl.EXTERIOR);return e&&t&&r},t.prototype.setEdgeRing=function(e){this._edgeRing=e},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e},t.prototype.setInResult=function(e){this._isInResult=e},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)},t.prototype.setSym=function(e){this._sym=e},t.prototype.setVisitedEdge=function(e){this.setVisited(e),this._sym.setVisited(e)},t.prototype.setEdgeDepths=function(e,t){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;e===Lc.LEFT&&(n=-1);var i=Lc.opposite(e),o=t+r*n;this.setDepth(e,t),this.setDepth(i,o)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(e){this._next=e},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(e,t){return e===pl.EXTERIOR&&t===pl.INTERIOR?1:e===pl.INTERIOR&&t===pl.EXTERIOR?-1:0},t}(Wc),Xc=function(){};Xc.prototype.createNode=function(e){return new Vc(e,null)},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Yc=function(){if(this._edges=new cf,this._nodes=null,this._edgeEndList=new cf,0===arguments.length)this._nodes=new qc(new Xc);else if(1===arguments.length){var e=arguments[0];this._nodes=new qc(e)}};Yc.prototype.printEdges=function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var r=this._edges.get(t);r.print(e),r.eiList.print(e)}},Yc.prototype.find=function(e){return this._nodes.find(e)},Yc.prototype.addNode=function(){if(arguments[0]instanceof Vc){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof ll){var t=arguments[0];return this._nodes.addNode(t)}},Yc.prototype.getNodeIterator=function(){return this._nodes.iterator()},Yc.prototype.linkResultDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},Yc.prototype.debugPrintln=function(e){Tl.out.println(e)},Yc.prototype.isBoundaryNode=function(e,t){var r=this._nodes.find(t);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(e)===pl.BOUNDARY},Yc.prototype.linkAllDirectedEdges=function(){for(var e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkAllDirectedEdges()}},Yc.prototype.matchInSameDirection=function(e,t,r,n){return!!e.equals(r)&&(Wl.computeOrientation(e,t,n)===Wl.COLLINEAR&&zc.quadrant(e,t)===zc.quadrant(r,n))},Yc.prototype.getEdgeEnds=function(){return this._edgeEndList},Yc.prototype.debugPrint=function(e){Tl.out.print(e)},Yc.prototype.getEdgeIterator=function(){return this._edges.iterator()},Yc.prototype.findEdgeInSameDirection=function(e,t){for(var r=this,n=0;n<this._edges.size();n++){var i=r._edges.get(n),o=i.getCoordinates();if(r.matchInSameDirection(e,t,o[0],o[1]))return i;if(r.matchInSameDirection(e,t,o[o.length-1],o[o.length-2]))return i}return null},Yc.prototype.insertEdge=function(e){this._edges.add(e)},Yc.prototype.findEdgeEnd=function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var r=t.next();if(r.getEdge()===e)return r}return null},Yc.prototype.addEdges=function(e){for(var t=this,r=e.iterator();r.hasNext();){var n=r.next();t._edges.add(n);var i=new Zc(n,!0),o=new Zc(n,!1);i.setSym(o),o.setSym(i),t.add(i),t.add(o)}},Yc.prototype.add=function(e){this._nodes.add(e),this._edgeEndList.add(e)},Yc.prototype.getNodes=function(){return this._nodes.values()},Yc.prototype.findEdge=function(e,t){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return n}return null},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Yc.linkResultDirectedEdges=function(e){for(var t=e.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}};var Qc=function(){this._geometryFactory=null,this._shellList=new cf;var e=arguments[0];this._geometryFactory=e};Qc.prototype.sortShellsAndHoles=function(e,t,r){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):t.add(i)}},Qc.prototype.computePolygons=function(e){for(var t=new cf,r=e.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);t.add(n)}return t},Qc.prototype.placeFreeHoles=function(e,t){for(var r=t.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,e);if(null===i)throw new Nc("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Qc.prototype.buildMinimalEdgeRings=function(e,t,r){for(var n=new cf,i=e.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):r.addAll(a)}else n.add(o)}return n},Qc.prototype.containsPoint=function(e){for(var t=this._shellList.iterator();t.hasNext();){if(t.next().containsPoint(e))return!0}return!1},Qc.prototype.buildMaximalEdgeRings=function(e){for(var t=new cf,r=e.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new Uc(n,this._geometryFactory);t.add(i),i.setInResult()}}return t},Qc.prototype.placePolygonHoles=function(e,t){for(var r=t.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(e)}},Qc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Qc.prototype.findEdgeRingContaining=function(e,t){for(var r=e.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),f=l.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var c=!1;f.contains(n)&&Wl.isPointInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||a.contains(f))&&(o=u)}return o},Qc.prototype.findShell=function(e){for(var t=0,r=null,n=e.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,t++)}return Ul.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),r},Qc.prototype.add=function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],r=arguments[1];Yc.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(t),i=new cf,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var Jc=function(){};Jc.prototype.getBounds=function(){},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var Kc=function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t};Kc.prototype.getItem=function(){return this._item},Kc.prototype.getBounds=function(){return this._bounds},Kc.prototype.interfaces_=function(){return[Jc,ul]},Kc.prototype.getClass=function(){return Kc};var $c=function(){this._size=null,this._items=null,this._size=0,this._items=new cf,this._items.add(null)};$c.prototype.poll=function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e},$c.prototype.size=function(){return this._size},$c.prototype.reorder=function(e){for(var t=this,r=null,n=this._items.get(e);2*e<=this._size&&((r=2*e)!==t._size&&t._items.get(r+1).compareTo(t._items.get(r))<0&&r++,t._items.get(r).compareTo(n)<0);e=r)t._items.set(e,t._items.get(r));this._items.set(e,n)},$c.prototype.clear=function(){this._size=0,this._items.clear()},$c.prototype.isEmpty=function(){return 0===this._size},$c.prototype.add=function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var eh=function(){};eh.prototype.visitItem=function(e){},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh};var th=function(){};th.prototype.insert=function(e,t){},th.prototype.remove=function(e,t){},th.prototype.query=function(){},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var rh=function(){if(this._childBoundables=new cf,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}},nh={serialVersionUID:{configurable:!0}};rh.prototype.getLevel=function(){return this._level},rh.prototype.size=function(){return this._childBoundables.size()},rh.prototype.getChildBoundables=function(){return this._childBoundables},rh.prototype.addChildBoundable=function(e){Ul.isTrue(null===this._bounds),this._childBoundables.add(e)},rh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},rh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},rh.prototype.interfaces_=function(){return[Jc,ul]},rh.prototype.getClass=function(){return rh},nh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(rh,nh);var ih=function(){};ih.reverseOrder=function(){return{compare:function(e,t){return t.compareTo(e)}}},ih.min=function(e){return ih.sort(e),e.get(0)},ih.sort=function(e,t){var r=e.toArray();t?Rf.sort(r,t):Rf.sort(r);for(var n=e.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},ih.singletonList=function(e){var t=new cf;return t.add(e),t};var oh=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],r=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=r,this._distance=this.distance()};oh.prototype.expandToQueue=function(e,t){var r=oh.isComposite(this._boundable1),n=oh.isComposite(this._boundable2);if(r&&n)return oh.area(this._boundable1)>oh.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,e,t),null):(this.expand(this._boundable2,this._boundable1,e,t),null);if(r)return this.expand(this._boundable1,this._boundable2,e,t),null;if(n)return this.expand(this._boundable2,this._boundable1,e,t),null;throw new rl("neither boundable is composite")},oh.prototype.isLeaves=function(){return!(oh.isComposite(this._boundable1)||oh.isComposite(this._boundable2))},oh.prototype.compareTo=function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0},oh.prototype.expand=function(e,t,r,n){for(var i=e.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new oh(o,t,this._itemDistance);a.getDistance()<n&&r.add(a)}},oh.prototype.getBoundable=function(e){return 0===e?this._boundable1:this._boundable2},oh.prototype.getDistance=function(){return this._distance},oh.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},oh.prototype.interfaces_=function(){return[ol]},oh.prototype.getClass=function(){return oh},oh.area=function(e){return e.getBounds().getArea()},oh.isComposite=function(e){return e instanceof rh};var ah=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new cf,this._nodeCapacity=null,0===arguments.length){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var r=arguments[0];Ul.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},sh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ah.prototype.getNodeCapacity=function(){return this._nodeCapacity},ah.prototype.lastNode=function(e){return e.get(e.size()-1)},ah.prototype.size=function(){var e=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=arguments[0],r=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof rh?r+=e.size(i):i instanceof Kc&&(r+=1)}return r}},ah.prototype.removeItem=function(e,t){for(var r=null,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Kc&&i.getItem()===t&&(r=i)}return null!==r&&(e.getChildBoundables().remove(r),!0)},ah.prototype.itemsTree=function(){var e=this;if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new cf:t}if(1===arguments.length){for(var r=arguments[0],n=new cf,i=r.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof rh){var a=e.itemsTree(o);null!==a&&n.add(a)}else o instanceof Kc?n.add(o.getItem()):Ul.shouldNeverReachHere()}return n.size()<=0?null:n}},ah.prototype.insert=function(e,t){Ul.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Kc(e,t))},ah.prototype.boundablesAtLevel=function(){var e=this;if(1===arguments.length){var t=arguments[0],r=new cf;return this.boundablesAtLevel(t,this._root,r),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(Ul.isTrue(n>-2),i.getLevel()===n)return o.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof rh?e.boundablesAtLevel(n,s,o):(Ul.isTrue(s instanceof Kc),-1===n&&o.add(s))}return null}},ah.prototype.query=function(){var e=this;if(1===arguments.length){var t=arguments[0];this.build();var r=new cf;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,r),r}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(vl(arguments[2],eh)&&arguments[0]instanceof Object&&arguments[1]instanceof rh)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getChildBoundables(),l=0;l<u.size();l++){var f=u.get(l);e.getIntersectsOp().intersects(f.getBounds(),o)&&(f instanceof rh?e.query(o,f,s):f instanceof Kc?s.visitItem(f.getItem()):Ul.shouldNeverReachHere())}else if(vl(arguments[2],lf)&&arguments[0]instanceof Object&&arguments[1]instanceof rh)for(var c=arguments[0],h=arguments[1],p=arguments[2],d=h.getChildBoundables(),v=0;v<d.size();v++){var y=d.get(v);e.getIntersectsOp().intersects(y.getBounds(),c)&&(y instanceof rh?e.query(c,y,p):y instanceof Kc?p.add(y.getItem()):Ul.shouldNeverReachHere())}},ah.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ah.prototype.getRoot=function(){return this.build(),this._root},ah.prototype.remove=function(){var e=this;if(2===arguments.length){var t=arguments[0],r=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,r)}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=this.removeItem(i,o);if(a)return!0;for(var s=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(e.getIntersectsOp().intersects(l.getBounds(),n)&&(l instanceof rh&&(a=e.remove(n,l,o)))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),a}},ah.prototype.createHigherLevels=function(e,t){Ul.isTrue(!e.isEmpty());var r=this.createParentBoundables(e,t+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,t+1)},ah.prototype.depth=function(){var e=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=arguments[0],r=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof rh){var o=e.depth(i);o>r&&(r=o)}}return r+1}},ah.prototype.createParentBoundables=function(e,t){var r=this;Ul.isTrue(!e.isEmpty());var n=new cf;n.add(this.createNode(t));var i=new cf(e);ih.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();r.lastNode(n).getChildBoundables().size()===r.getNodeCapacity()&&n.add(r.createNode(t)),r.lastNode(n).addChildBoundable(a)}return n},ah.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ah.prototype.interfaces_=function(){return[ul]},ah.prototype.getClass=function(){return ah},ah.compareDoubles=function(e,t){return e>t?1:e<t?-1:0},sh.IntersectsOp.get=function(){return uh},sh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ah,sh);var uh=function(){},lh=function(){};lh.prototype.distance=function(e,t){},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var fh=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(e,t){Ul.isTrue(e.length>0);for(var r=new cf,n=0;n<e.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(e[n],t));return r},t.prototype.createNode=function(e){return new ch(e)},t.prototype.size=function(){return 0===arguments.length?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(2!==arguments.length)return e.prototype.insert.apply(this,arguments);var t=arguments[0],r=arguments[1];if(t.isNull())return null;e.prototype.insert.call(this,t,r)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(e,t){for(var r=Math.trunc(Math.ceil(e.size()/t)),n=new Array(t).fill(null),i=e.iterator(),o=0;o<t;o++){n[o]=new cf;for(var a=0;i.hasNext()&&a<r;){var s=i.next();n[o].add(s),a++}}return n},t.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return e.prototype.query.call(this,t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];e.prototype.query.call(this,r,n)}else if(3===arguments.length)if(vl(arguments[2],eh)&&arguments[0]instanceof Object&&arguments[1]instanceof rh){var i=arguments[0],o=arguments[1],a=arguments[2];e.prototype.query.call(this,i,o,a)}else if(vl(arguments[2],lf)&&arguments[0]instanceof Object&&arguments[1]instanceof rh){var s=arguments[0],u=arguments[1],l=arguments[2];e.prototype.query.call(this,s,u,l)}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(t,r){return e.prototype.createParentBoundables.call(this,t,r)},t.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],r=arguments[1];return e.prototype.remove.call(this,t,r)}return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return 0===arguments.length?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(e,r){Ul.isTrue(!e.isEmpty());var n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),i=new cf(e);ih.sort(i,t.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,r)},t.prototype.nearestNeighbour=function(){if(1===arguments.length){if(vl(arguments[0],lh)){var e=arguments[0],r=new oh(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(r)}if(arguments[0]instanceof oh){var n=arguments[0];return this.nearestNeighbour(n,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof t&&vl(arguments[1],lh)){var i=arguments[0],o=arguments[1],a=new oh(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof oh&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],l=u,f=null,c=new $c;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),p=h.getDistance();if(p>=l)break;h.isLeaves()?(l=p,f=h):h.expandToQueue(c,l)}return[f.getBoundable(0).getItem(),f.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],v=arguments[1],y=arguments[2],g=new Kc(d,v),m=new oh(this.getRoot(),g,y);return this.nearestNeighbour(m)[0]}},t.prototype.interfaces_=function(){return[th,ul]},t.prototype.getClass=function(){return t},t.centreX=function(e){return t.avg(e.getMinX(),e.getMaxX())},t.avg=function(e,t){return(e+t)/2},t.centreY=function(e){return t.avg(e.getMinY(),e.getMaxY())},r.STRtreeNode.get=function(){return ch},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(r,n){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(n.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(r,n){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(n.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(e,t){return e.intersects(t)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,r),t}(ah),ch=function(e){function t(){var t=arguments[0];e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var r=t.next();null===e?e=new Ol(r.getBounds()):e.expandToInclude(r.getBounds())}return e},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(rh),hh=function(){};hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh},hh.relativeSign=function(e,t){return e<t?-1:e>t?1:0},hh.compare=function(e,t,r){if(t.equals2D(r))return 0;var n=hh.relativeSign(t.x,r.x),i=hh.relativeSign(t.y,r.y);switch(e){case 0:return hh.compareValue(n,i);case 1:return hh.compareValue(i,n);case 2:return hh.compareValue(i,-n);case 3:return hh.compareValue(-n,i);case 4:return hh.compareValue(-n,-i);case 5:return hh.compareValue(-i,-n);case 6:return hh.compareValue(-i,n);case 7:return hh.compareValue(n,-i)}return Ul.shouldNeverReachHere("invalid octant value"),0},hh.compareValue=function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0};var ph=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this._segString=e,this.coord=new ll(t),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!t.equals2D(e.getCoordinate(r))};ph.prototype.getCoordinate=function(){return this.coord},ph.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)},ph.prototype.compareTo=function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:hh.compare(this._segmentOctant,this.coord,t.coord)},ph.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e},ph.prototype.isInterior=function(){return this._isInterior},ph.prototype.interfaces_=function(){return[ol]},ph.prototype.getClass=function(){return ph};var dh=function(){this._nodeMap=new Tf,this._edge=null;var e=arguments[0];this._edge=e};dh.prototype.getSplitCoordinates=function(){var e=new pf;this.addEndpoints();for(var t=this.iterator(),r=t.next();t.hasNext();){var n=t.next();this.addEdgeCoordinates(r,n,e),r=n}return e.toCoordinateArray()},dh.prototype.addCollapsedNodes=function(){var e=new cf;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var r=t.next().intValue();this.add(this._edge.getCoordinate(r),r)}},dh.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){t.next().print(e)}},dh.prototype.findCollapsesFromExistingVertices=function(e){for(var t=0;t<this._edge.size()-2;t++){var r=this._edge.getCoordinate(t),n=this._edge.getCoordinate(t+2);r.equals2D(n)&&e.add(new _l(t+1))}},dh.prototype.addEdgeCoordinates=function(e,t,r){var n=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(n);r.add(new ll(e.coord),!1);for(var o=e.segmentIndex+1;o<=t.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new ll(t.coord))},dh.prototype.iterator=function(){return this._nodeMap.values().iterator()},dh.prototype.addSplitEdges=function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),r=t.next();t.hasNext();){var n=t.next(),i=this.createSplitEdge(r,n);e.add(i),r=n}},dh.prototype.findCollapseIndex=function(e,t,r){if(!e.coord.equals2D(t.coord))return!1;var n=t.segmentIndex-e.segmentIndex;return t.isInterior()||n--,1===n&&(r[0]=e.segmentIndex+1,!0)},dh.prototype.findCollapsesFromInsertedNodes=function(e){for(var t=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,t)&&e.add(new _l(t[0])),n=i}},dh.prototype.getEdge=function(){return this._edge},dh.prototype.addEndpoints=function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)},dh.prototype.createSplitEdge=function(e,t){var r=t.segmentIndex-e.segmentIndex+2,n=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new ll(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new ll(t.coord)),new mh(o,this._edge.getData())},dh.prototype.add=function(e,t){var r=new ph(this._edge,e,t,this._edge.getSegmentOctant(t)),n=this._nodeMap.get(r);return null!==n?(Ul.isTrue(n.coord.equals2D(e),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},dh.prototype.checkSplitEdgesCorrectness=function(e){var t=this._edge.getCoordinates(),r=e.get(0).getCoordinate(0);if(!r.equals2D(t[0]))throw new Bl("bad split edge start point at "+r);var n=e.get(e.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(t[t.length-1]))throw new Bl("bad split edge end point at "+i)},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var vh=function(){};vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new rl("Cannot compute the octant for point ( "+e+", "+t+" )");var r=Math.abs(e),n=Math.abs(t);return e>=0?t>=0?r>=n?0:1:r>=n?7:6:t>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof ll&&arguments[1]instanceof ll){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new rl("Cannot compute the octant for two identical points "+i);return vh.octant(a,s)}};var yh=function(){};yh.prototype.getCoordinates=function(){},yh.prototype.size=function(){},yh.prototype.getCoordinate=function(e){},yh.prototype.isClosed=function(){},yh.prototype.setData=function(e){},yh.prototype.getData=function(){},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var gh=function(){};gh.prototype.addIntersection=function(e,t){},gh.prototype.interfaces_=function(){return[yh]},gh.prototype.getClass=function(){return gh};var mh=function(){this._nodeList=new dh(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};mh.prototype.getCoordinates=function(){return this._pts},mh.prototype.size=function(){return this._pts.length},mh.prototype.getCoordinate=function(e){return this._pts[e]},mh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},mh.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))},mh.prototype.setData=function(e){this._data=e},mh.prototype.safeOctant=function(e,t){return e.equals2D(t)?0:vh.octant(e,t)},mh.prototype.getData=function(){return this._data},mh.prototype.addIntersection=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new ll(r.getIntersection(i));this.addIntersection(o,n)}},mh.prototype.toString=function(){return Fl.toLineString(new cc(this._pts))},mh.prototype.getNodeList=function(){return this._nodeList},mh.prototype.addIntersectionNode=function(e,t){var r=t,n=r+1;if(n<this._pts.length){var i=this._pts[n];e.equals2D(i)&&(r=n)}return this._nodeList.add(e,r)},mh.prototype.addIntersections=function(e,t,r){for(var n=0;n<e.getIntersectionNum();n++)this.addIntersection(e,t,r,n)},mh.prototype.interfaces_=function(){return[gh]},mh.prototype.getClass=function(){return mh},mh.getNodedSubstrings=function(){if(1===arguments.length){var e=arguments[0],t=new cf;return mh.getNodedSubstrings(e,t),t}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(n)}};var _h=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ll,this.p1=new ll;else if(1===arguments.length){var e=arguments[0];this.p0=new ll(e.p0),this.p1=new ll(e.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new ll(t,r),this.p1=new ll(n,i)}},bh={serialVersionUID:{configurable:!0}};_h.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},_h.prototype.orientationIndex=function(){if(arguments[0]instanceof _h){var e=arguments[0],t=Wl.orientationIndex(this.p0,this.p1,e.p0),r=Wl.orientationIndex(this.p0,this.p1,e.p1);return t>=0&&r>=0||t<=0&&r<=0?Math.max(t,r):0}if(arguments[0]instanceof ll){var n=arguments[0];return Wl.orientationIndex(this.p0,this.p1,n)}},_h.prototype.toGeometry=function(e){return e.createLineString([this.p0,this.p1])},_h.prototype.isVertical=function(){return this.p0.x===this.p1.x},_h.prototype.equals=function(e){if(!(e instanceof _h))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)},_h.prototype.intersection=function(e){var t=new ql;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null},_h.prototype.project=function(){if(arguments[0]instanceof ll){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new ll(e);var t=this.projectionFactor(e),r=new ll;return r.x=this.p0.x+t*(this.p1.x-this.p0.x),r.y=this.p0.y+t*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof _h){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(n.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(n.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new _h(a,s)}},_h.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},_h.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},_h.prototype.getCoordinate=function(e){return 0===e?this.p0:this.p1},_h.prototype.distancePerpendicular=function(e){return Wl.distancePointLinePerpendicular(e,this.p0,this.p1)},_h.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},_h.prototype.midPoint=function(){return _h.midPoint(this.p0,this.p1)},_h.prototype.projectionFactor=function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=t*t+r*r;return n<=0?nl.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*r)/n},_h.prototype.closestPoints=function(e){var t=this.intersection(e);if(null!==t)return[t,t];var r=new Array(2).fill(null),n=nl.MAX_VALUE,i=null,o=this.closestPoint(e.p0);n=o.distance(e.p0),r[0]=o,r[1]=e.p0;var a=this.closestPoint(e.p1);(i=a.distance(e.p1))<n&&(n=i,r[0]=a,r[1]=e.p1);var s=e.closestPoint(this.p0);(i=s.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=s);var u=e.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},_h.prototype.closestPoint=function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1},_h.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},_h.prototype.getLength=function(){return this.p0.distance(this.p1)},_h.prototype.compareTo=function(e){var t=e,r=this.p0.compareTo(t.p0);return 0!==r?r:this.p1.compareTo(t.p1)},_h.prototype.reverse=function(){var e=this.p0;this.p0=this.p1,this.p1=e},_h.prototype.equalsTopo=function(e){return this.p0.equals(e.p0)&&(this.p1.equals(e.p1)||this.p0.equals(e.p1))&&this.p1.equals(e.p0)},_h.prototype.lineIntersection=function(e){try{return Ml.intersection(this.p0,this.p1,e.p0,e.p1)}catch(e){if(!(e instanceof Ll))throw e}return null},_h.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},_h.prototype.pointAlongOffset=function(e,t){var r=this.p0.x+e*(this.p1.x-this.p0.x),n=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==t){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=t*i/a,u=t*o/a}return new ll(r-u,n+s)},_h.prototype.setCoordinates=function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],r=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=r.x,this.p1.y=r.y}},_h.prototype.segmentFraction=function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||nl.isNaN(t))&&(t=1),t},_h.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},_h.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},_h.prototype.distance=function(){if(arguments[0]instanceof _h){var e=arguments[0];return Wl.distanceLineLine(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof ll){var t=arguments[0];return Wl.distancePointLine(t,this.p0,this.p1)}},_h.prototype.pointAlong=function(e){var t=new ll;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t},_h.prototype.hashCode=function(){var e=nl.doubleToLongBits(this.p0.x);e^=31*nl.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),r=nl.doubleToLongBits(this.p1.x);return r^=31*nl.doubleToLongBits(this.p1.y),t^(Math.trunc(r)^Math.trunc(r>>32))},_h.prototype.interfaces_=function(){return[ol,ul]},_h.prototype.getClass=function(){return _h},_h.midPoint=function(e,t){return new ll((e.x+t.x)/2,(e.y+t.y)/2)},bh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(_h,bh);var Sh=function(){this.tempEnv1=new Ol,this.tempEnv2=new Ol,this._overlapSeg1=new _h,this._overlapSeg2=new _h};Sh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];e.getLineSegment(t,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var xh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this._pts=e,this._start=t,this._end=r,this._context=n};xh.prototype.getLineSegment=function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]},xh.prototype.computeSelect=function(e,t,r,n){var i=this._pts[t],o=this._pts[r];if(n.tempEnv1.init(i,o),r-t==1)return n.select(this,t),null;if(!e.intersects(n.tempEnv1))return null;var a=Math.trunc((t+r)/2);t<a&&this.computeSelect(e,t,a,n),a<r&&this.computeSelect(e,a,r,n)},xh.prototype.getCoordinates=function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,r=this._start;r<=this._end;r++)e[t++]=this._pts[r];return e},xh.prototype.computeOverlaps=function(e,t){this.computeOverlapsInternal(this._start,this._end,e,e._start,e._end,t)},xh.prototype.setId=function(e){this._id=e},xh.prototype.select=function(e,t){this.computeSelect(e,this._start,this._end,t)},xh.prototype.getEnvelope=function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new Ol(e,t)}return this._env},xh.prototype.getEndIndex=function(){return this._end},xh.prototype.getStartIndex=function(){return this._start},xh.prototype.getContext=function(){return this._context},xh.prototype.getId=function(){return this._id},xh.prototype.computeOverlapsInternal=function(e,t,r,n,i,o){var a=this._pts[e],s=this._pts[t],u=r._pts[n],l=r._pts[i];if(t-e==1&&i-n==1)return o.overlap(this,e,r,n),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var f=Math.trunc((e+t)/2),c=Math.trunc((n+i)/2);e<f&&(n<c&&this.computeOverlapsInternal(e,f,r,n,c,o),c<i&&this.computeOverlapsInternal(e,f,r,c,i,o)),f<t&&(n<c&&this.computeOverlapsInternal(f,t,r,n,c,o),c<i&&this.computeOverlapsInternal(f,t,r,c,i,o))},xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh};var Ch=function(){};Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.getChainStartIndices=function(e){var t=0,r=new cf;r.add(new _l(t));do{var n=Ch.findChainEnd(e,t);r.add(new _l(n)),t=n}while(t<e.length-1);return Ch.toIntArray(r)},Ch.findChainEnd=function(e,t){for(var r=t;r<e.length-1&&e[r].equals2D(e[r+1]);)r++;if(r>=e.length-1)return e.length-1;for(var n=zc.quadrant(e[r],e[r+1]),i=t+1;i<e.length;){if(!e[i-1].equals2D(e[i]))if(zc.quadrant(e[i-1],e[i])!==n)break;i++}return i-1},Ch.getChains=function(){if(1===arguments.length){var e=arguments[0];return Ch.getChains(e,null)}if(2===arguments.length){for(var t=arguments[0],r=arguments[1],n=new cf,i=Ch.getChainStartIndices(t),o=0;o<i.length-1;o++){var a=new xh(t,i[o],i[o+1],r);n.add(a)}return n}},Ch.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),r=0;r<t.length;r++)t[r]=e.get(r).intValue();return t};var wh=function(){};wh.prototype.computeNodes=function(e){},wh.prototype.getNodedSubstrings=function(){},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh};var Ph=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}};Ph.prototype.setSegmentIntersector=function(e){this._segInt=e},Ph.prototype.interfaces_=function(){return[wh]},Ph.prototype.getClass=function(){return Ph};var Ih=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new cf,this._index=new fh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return mh.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(e){for(var t=this,r=Ch.getChains(e.getCoordinates(),e).iterator();r.hasNext();){var n=r.next();n.setId(t._idCounter++),t._index.insert(n.getEnvelope(),n),t._monoChains.add(n)}},t.prototype.computeNodes=function(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var e=this,t=new Eh(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var n=r.next(),i=e._index.query(n.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),e._nOverlaps++),e._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},r.SegmentOverlapAction.get=function(){return Eh},Object.defineProperties(t,r),t}(Ph),Eh=function(e){function t(){e.call(this),this._si=null;var t=arguments[0];this._si=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(4!==arguments.length)return e.prototype.overlap.apply(this,arguments);var t=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=t.getContext(),a=n.getContext();this._si.processIntersections(o,r,a,i)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Sh),Lh=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Th={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Lh.prototype.getEndCapStyle=function(){return this._endCapStyle},Lh.prototype.isSingleSided=function(){return this._isSingleSided},Lh.prototype.setQuadrantSegments=function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=Lh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Lh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==Lh.JOIN_ROUND&&(this._quadrantSegments=Lh.DEFAULT_QUADRANT_SEGMENTS)},Lh.prototype.getJoinStyle=function(){return this._joinStyle},Lh.prototype.setJoinStyle=function(e){this._joinStyle=e},Lh.prototype.setSimplifyFactor=function(e){this._simplifyFactor=e<0?0:e},Lh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Lh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Lh.prototype.setEndCapStyle=function(e){this._endCapStyle=e},Lh.prototype.getMitreLimit=function(){return this._mitreLimit},Lh.prototype.setMitreLimit=function(e){this._mitreLimit=e},Lh.prototype.setSingleSided=function(e){this._isSingleSided=e},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.bufferDistanceError=function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)},Th.CAP_ROUND.get=function(){return 1},Th.CAP_FLAT.get=function(){return 2},Th.CAP_SQUARE.get=function(){return 3},Th.JOIN_ROUND.get=function(){return 1},Th.JOIN_MITRE.get=function(){return 2},Th.JOIN_BEVEL.get=function(){return 3},Th.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Th.DEFAULT_MITRE_LIMIT.get=function(){return 5},Th.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Lh,Th);var Mh=function(e){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Wl.COUNTERCLOCKWISE,this._inputLine=e||null},Oh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Mh.prototype.isDeletable=function(e,t,r,n){var i=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[r];return!!this.isConcave(i,o,a)&&(!!this.isShallow(i,o,a,n)&&this.isShallowSampled(i,o,e,r,n))},Mh.prototype.deleteShallowConcavities=function(){for(var e=this,t=1,r=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(r),i=!1;n<this._inputLine.length;){var o=!1;e.isDeletable(t,r,n,e._distanceTol)&&(e._isDeleted[r]=Mh.DELETE,o=!0,i=!0),t=o?n:r,r=e.findNextNonDeletedIndex(t),n=e.findNextNonDeletedIndex(r)}return i},Mh.prototype.isShallowConcavity=function(e,t,r,n){return Wl.computeOrientation(e,t,r)===this._angleOrientation&&Wl.distancePointLine(t,e,r)<n},Mh.prototype.isShallowSampled=function(e,t,r,n,i){var o=Math.trunc((n-r)/Mh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=r;a<n;a+=o)if(!this.isShallow(e,t,this._inputLine[a],i))return!1;return!0},Mh.prototype.isConcave=function(e,t,r){var n=Wl.computeOrientation(e,t,r)===this._angleOrientation;return n},Mh.prototype.simplify=function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=Wl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do{t=this.deleteShallowConcavities()}while(t);return this.collapseLine()},Mh.prototype.findNextNonDeletedIndex=function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===Mh.DELETE;)t++;return t},Mh.prototype.isShallow=function(e,t,r,n){return Wl.distancePointLine(t,e,r)<n},Mh.prototype.collapseLine=function(){for(var e=new pf,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==Mh.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.simplify=function(e,t){return new Mh(e).simplify(t)},Oh.INIT.get=function(){return 0},Oh.DELETE.get=function(){return 1},Oh.KEEP.get=function(){return 1},Oh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Mh,Oh);var Ah=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new cf},Nh={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ah.prototype.getCoordinates=function(){return this._ptList.toArray(Ah.COORDINATE_ARRAY_TYPE)},Ah.prototype.setPrecisionModel=function(e){this._precisionModel=e},Ah.prototype.addPt=function(e){var t=new ll(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)},Ah.prototype.revere=function(){},Ah.prototype.addPts=function(e,t){if(t)for(var r=0;r<e.length;r++)this.addPt(e[r]);else for(var n=e.length-1;n>=0;n--)this.addPt(e[n])},Ah.prototype.isRedundant=function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance},Ah.prototype.toString=function(){return(new bc).createLineString(this.getCoordinates()).toString()},Ah.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var e=new ll(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)},Ah.prototype.setMinimumVertexDistance=function(e){this._minimimVertexDistance=e},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Nh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ah,Nh);var Rh=function(){},kh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},Rh.toDegrees=function(e){return 180*e/Math.PI},Rh.normalize=function(e){for(;e>Math.PI;)e-=Rh.PI_TIMES_2;for(;e<=-Math.PI;)e+=Rh.PI_TIMES_2;return e},Rh.angle=function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],r=arguments[1],n=r.x-t.x,i=r.y-t.y;return Math.atan2(i,n)}},Rh.isAcute=function(e,t,r){var n=e.x-t.x,i=e.y-t.y;return n*(r.x-t.x)+i*(r.y-t.y)>0},Rh.isObtuse=function(e,t,r){var n=e.x-t.x,i=e.y-t.y;return n*(r.x-t.x)+i*(r.y-t.y)<0},Rh.interiorAngle=function(e,t,r){var n=Rh.angle(t,e),i=Rh.angle(t,r);return Math.abs(i-n)},Rh.normalizePositive=function(e){if(e<0){for(;e<0;)e+=Rh.PI_TIMES_2;e>=Rh.PI_TIMES_2&&(e=0)}else{for(;e>=Rh.PI_TIMES_2;)e-=Rh.PI_TIMES_2;e<0&&(e=0)}return e},Rh.angleBetween=function(e,t,r){var n=Rh.angle(t,e),i=Rh.angle(t,r);return Rh.diff(n,i)},Rh.diff=function(e,t){var r=null;return(r=e<t?t-e:e-t)>Math.PI&&(r=2*Math.PI-r),r},Rh.toRadians=function(e){return e*Math.PI/180},Rh.getTurn=function(e,t){var r=Math.sin(t-e);return r>0?Rh.COUNTERCLOCKWISE:r<0?Rh.CLOCKWISE:Rh.NONE},Rh.angleBetweenOriented=function(e,t,r){var n=Rh.angle(t,e),i=Rh.angle(t,r)-n;return i<=-Math.PI?i+Rh.PI_TIMES_2:i>Math.PI?i-Rh.PI_TIMES_2:i},kh.PI_TIMES_2.get=function(){return 2*Math.PI},kh.PI_OVER_2.get=function(){return Math.PI/2},kh.PI_OVER_4.get=function(){return Math.PI/4},kh.COUNTERCLOCKWISE.get=function(){return Wl.COUNTERCLOCKWISE},kh.CLOCKWISE.get=function(){return Wl.CLOCKWISE},kh.NONE.get=function(){return Wl.COLLINEAR},Object.defineProperties(Rh,kh);var Dh=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new _h,this._seg1=new _h,this._offset0=new _h,this._offset1=new _h,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=r,this._li=new ql,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Lh.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Fh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Dh.prototype.addNextSegment=function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Wl.computeOrientation(this._s0,this._s1,this._s2),n=r===Wl.CLOCKWISE&&this._side===Lc.LEFT||r===Wl.COUNTERCLOCKWISE&&this._side===Lc.RIGHT;0===r?this.addCollinear(t):n?this.addOutsideTurn(r,t):this.addInsideTurn(r,t)},Dh.prototype.addLineEndCap=function(e,t){var r=new _h(e,t),n=new _h;this.computeOffsetSegment(r,Lc.LEFT,this._distance,n);var i=new _h;this.computeOffsetSegment(r,Lc.RIGHT,this._distance,i);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Lh.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(t,s+Math.PI/2,s-Math.PI/2,Wl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Lh.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case Lh.CAP_SQUARE:var u=new ll;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new ll(n.p1.x+u.x,n.p1.y+u.y),f=new ll(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(f)}},Dh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Dh.prototype.addMitreJoin=function(e,t,r,n){var i=!0,o=null;try{o=Ml.intersection(t.p0,t.p1,r.p0,r.p1),(n<=0?1:o.distance(e)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(e){if(!(e instanceof Ll))throw e;o=new ll(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(t,r,n,this._bufParams.getMitreLimit())},Dh.prototype.addFilletCorner=function(e,t,r,n,i){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),u=r.x-e.x,l=r.y-e.y,f=Math.atan2(l,u);n===Wl.CLOCKWISE?s<=f&&(s+=2*Math.PI):s>=f&&(s-=2*Math.PI),this._segList.addPt(t),this.addFilletArc(e,s,f,n,i),this._segList.addPt(r)},Dh.prototype.addOutsideTurn=function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Dh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Lh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Lh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))},Dh.prototype.createSquare=function(e){this._segList.addPt(new ll(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new ll(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new ll(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new ll(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()},Dh.prototype.addSegments=function(e,t){this._segList.addPts(e,t)},Dh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Dh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Dh.prototype.initSideSegments=function(e,t,r){this._s1=e,this._s2=t,this._side=r,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Dh.prototype.addLimitedMitreJoin=function(e,t,r,n){var i=this._seg0.p1,o=Rh.angle(i,this._seg0.p0),a=Rh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Rh.normalize(o+a),u=Rh.normalize(s+Math.PI),l=n*r,f=r-l*Math.abs(Math.sin(a)),c=i.x+l*Math.cos(u),h=i.y+l*Math.sin(u),p=new ll(c,h),d=new _h(i,p),v=d.pointAlongOffset(1,f),y=d.pointAlongOffset(1,-f);this._side===Lc.LEFT?(this._segList.addPt(v),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(v))},Dh.prototype.computeOffsetSegment=function(e,t,r,n){var i=t===Lc.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),u=i*r*o/s,l=i*r*a/s;n.p0.x=e.p0.x-l,n.p0.y=e.p0.y+u,n.p1.x=e.p1.x-l,n.p1.y=e.p1.y+u},Dh.prototype.addFilletArc=function(e,t,r,n,i){var o=n===Wl.CLOCKWISE?-1:1,a=Math.abs(t-r),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=0,f=new ll;l<a;){var c=t+o*l;f.x=e.x+i*Math.cos(c),f.y=e.y+i*Math.sin(c),this._segList.addPt(f),l+=u}},Dh.prototype.addInsideTurn=function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Dh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ll((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new ll((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Dh.prototype.createCircle=function(e){var t=new ll(e.x+this._distance,e.y);this._segList.addPt(t),this.addFilletArc(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Dh.prototype.addBevelJoin=function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)},Dh.prototype.init=function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ah,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*Dh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Dh.prototype.addCollinear=function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Lh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Lh.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Wl.CLOCKWISE,this._distance))},Dh.prototype.closeRing=function(){this._segList.closeRing()},Dh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Fh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Fh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Fh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Fh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Dh,Fh);var Bh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t};Bh.prototype.getOffsetCurve=function(e,t){if(this._distance=t,0===t)return null;var r=t<0,n=Math.abs(t),i=this.getSegGen(n);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,r,i);var o=i.getCoordinates();return r&&df.reverse(o),o},Bh.prototype.computeSingleSidedBufferCurve=function(e,t,r){var n=this.simplifyTolerance(this._distance);if(t){r.addSegments(e,!0);var i=Mh.simplify(e,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Lc.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{r.addSegments(e,!1);var s=Mh.simplify(e,n),u=s.length-1;r.initSideSegments(s[0],s[1],Lc.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(s[l],!0)}r.addLastSegment(),r.closeRing()},Bh.prototype.computeRingBufferCurve=function(e,t,r){var n=this.simplifyTolerance(this._distance);t===Lc.RIGHT&&(n=-n);var i=Mh.simplify(e,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],t);for(var a=1;a<=o;a++){var s=1!==a;r.addNextSegment(i[a],s)}r.closeRing()},Bh.prototype.computeLineBufferCurve=function(e,t){var r=this.simplifyTolerance(this._distance),n=Mh.simplify(e,r),i=n.length-1;t.initSideSegments(n[0],n[1],Lc.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(n[o],!0);t.addLastSegment(),t.addLineEndCap(n[i-1],n[i]);var a=Mh.simplify(e,-r),s=a.length-1;t.initSideSegments(a[s],a[s-1],Lc.LEFT);for(var u=s-2;u>=0;u--)t.addNextSegment(a[u],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()},Bh.prototype.computePointCurve=function(e,t){switch(this._bufParams.getEndCapStyle()){case Lh.CAP_ROUND:t.createCircle(e);break;case Lh.CAP_SQUARE:t.createSquare(e)}},Bh.prototype.getLineCurve=function(e,t){if(this._distance=t,t<0&&!this._bufParams.isSingleSided())return null;if(0===t)return null;var r=Math.abs(t),n=this.getSegGen(r);if(e.length<=1)this.computePointCurve(e[0],n);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,n)}else this.computeLineBufferCurve(e,n);return n.getCoordinates()},Bh.prototype.getBufferParameters=function(){return this._bufParams},Bh.prototype.simplifyTolerance=function(e){return e*this._bufParams.getSimplifyFactor()},Bh.prototype.getRingCurve=function(e,t,r){if(this._distance=r,e.length<=2)return this.getLineCurve(e,r);if(0===r)return Bh.copyCoordinates(e);var n=this.getSegGen(r);return this.computeRingBufferCurve(e,t,n),n.getCoordinates()},Bh.prototype.computeOffsetCurve=function(e,t,r){var n=this.simplifyTolerance(this._distance);if(t){var i=Mh.simplify(e,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],Lc.LEFT),r.addFirstSegment();for(var a=o-2;a>=0;a--)r.addNextSegment(i[a],!0)}else{var s=Mh.simplify(e,n),u=s.length-1;r.initSideSegments(s[0],s[1],Lc.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(s[l],!0)}r.addLastSegment()},Bh.prototype.getSegGen=function(e){return new Dh(this._precisionModel,this._bufParams,e)},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.copyCoordinates=function(e){for(var t=new Array(e.length).fill(null),r=0;r<t.length;r++)t[r]=new ll(e[r]);return t};var jh=function(){this._subgraphs=null,this._seg=new _h,this._cga=new Wl;var e=arguments[0];this._subgraphs=e},Uh={DepthSegment:{configurable:!0}};jh.prototype.findStabbedSegments=function(){var e=this;if(1===arguments.length){for(var t=arguments[0],r=new cf,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),o=i.getEnvelope();t.y<o.getMinY()||t.y>o.getMaxY()||e.findStabbedSegments(t,i.getDirectedEdges(),r)}return r}if(3===arguments.length)if(vl(arguments[2],lf)&&arguments[0]instanceof ll&&arguments[1]instanceof Zc)for(var a=arguments[0],s=arguments[1],u=arguments[2],l=s.getEdge().getCoordinates(),f=0;f<l.length-1;f++){e._seg.p0=l[f],e._seg.p1=l[f+1],e._seg.p0.y>e._seg.p1.y&&e._seg.reverse();var c=Math.max(e._seg.p0.x,e._seg.p1.x);if(!(c<a.x)&&!(e._seg.isHorizontal()||a.y<e._seg.p0.y||a.y>e._seg.p1.y||Wl.computeOrientation(e._seg.p0,e._seg.p1,a)===Wl.RIGHT)){var h=s.getDepth(Lc.LEFT);e._seg.p0.equals(l[f])||(h=s.getDepth(Lc.RIGHT));var p=new Gh(e._seg,h);u.add(p)}}else if(vl(arguments[2],lf)&&arguments[0]instanceof ll&&vl(arguments[1],lf))for(var d=arguments[0],v=arguments[1],y=arguments[2],g=v.iterator();g.hasNext();){var m=g.next();m.isForward()&&e.findStabbedSegments(d,m,y)}},jh.prototype.getDepth=function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:ih.min(t)._leftDepth},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},Uh.DepthSegment.get=function(){return Gh},Object.defineProperties(jh,Uh);var Gh=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new _h(e),this._leftDepth=t};Gh.prototype.compareTo=function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==r||0!==(r=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(t._upwardSeg)},Gh.prototype.compareX=function(e,t){var r=e.p0.compareTo(t.p0);return 0!==r?r:e.p1.compareTo(t.p1)},Gh.prototype.toString=function(){return this._upwardSeg.toString()},Gh.prototype.interfaces_=function(){return[ol]},Gh.prototype.getClass=function(){return Gh};var Vh=function(e,t,r){this.p0=e||null,this.p1=t||null,this.p2=r||null};Vh.prototype.area=function(){return Vh.area(this.p0,this.p1,this.p2)},Vh.prototype.signedArea=function(){return Vh.signedArea(this.p0,this.p1,this.p2)},Vh.prototype.interpolateZ=function(e){if(null===e)throw new rl("Supplied point is null.");return Vh.interpolateZ(e,this.p0,this.p1,this.p2)},Vh.prototype.longestSideLength=function(){return Vh.longestSideLength(this.p0,this.p1,this.p2)},Vh.prototype.isAcute=function(){return Vh.isAcute(this.p0,this.p1,this.p2)},Vh.prototype.circumcentre=function(){return Vh.circumcentre(this.p0,this.p1,this.p2)},Vh.prototype.area3D=function(){return Vh.area3D(this.p0,this.p1,this.p2)},Vh.prototype.centroid=function(){return Vh.centroid(this.p0,this.p1,this.p2)},Vh.prototype.inCentre=function(){return Vh.inCentre(this.p0,this.p1,this.p2)},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.area=function(e,t,r){return Math.abs(((r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y))/2)},Vh.signedArea=function(e,t,r){return((r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y))/2},Vh.det=function(e,t,r,n){return e*n-t*r},Vh.interpolateZ=function(e,t,r,n){var i=t.x,o=t.y,a=r.x-i,s=n.x-i,u=r.y-o,l=n.y-o,f=a*l-s*u,c=e.x-i,h=e.y-o,p=(l*c-s*h)/f,d=(-u*c+a*h)/f;return t.z+p*(r.z-t.z)+d*(n.z-t.z)},Vh.longestSideLength=function(e,t,r){var n=e.distance(t),i=t.distance(r),o=r.distance(e),a=n;return i>a&&(a=i),o>a&&(a=o),a},Vh.isAcute=function(e,t,r){return!!Rh.isAcute(e,t,r)&&(!!Rh.isAcute(t,r,e)&&!!Rh.isAcute(r,e,t))},Vh.circumcentre=function(e,t,r){var n=r.x,i=r.y,o=e.x-n,a=e.y-i,s=t.x-n,u=t.y-i,l=2*Vh.det(o,a,s,u),f=Vh.det(a,o*o+a*a,u,s*s+u*u),c=Vh.det(o,o*o+a*a,s,s*s+u*u);return new ll(n-f/l,i+c/l)},Vh.perpendicularBisector=function(e,t){var r=t.x-e.x,n=t.y-e.y,i=new Ml(e.x+r/2,e.y+n/2,1),o=new Ml(e.x-n+r/2,e.y+r+n/2,1);return new Ml(i,o)},Vh.angleBisector=function(e,t,r){var n=t.distance(e),i=n/(n+t.distance(r)),o=r.x-e.x,a=r.y-e.y;return new ll(e.x+i*o,e.y+i*a)},Vh.area3D=function(e,t,r){var n=t.x-e.x,i=t.y-e.y,o=t.z-e.z,a=r.x-e.x,s=r.y-e.y,u=r.z-e.z,l=i*u-o*s,f=o*a-n*u,c=n*s-i*a,h=l*l+f*f+c*c,p=Math.sqrt(h)/2;return p},Vh.centroid=function(e,t,r){var n=(e.x+t.x+r.x)/3,i=(e.y+t.y+r.y)/3;return new ll(n,i)},Vh.inCentre=function(e,t,r){var n=t.distance(r),i=e.distance(r),o=e.distance(t),a=n+i+o,s=(n*e.x+i*t.x+o*r.x)/a,u=(n*e.y+i*t.y+o*r.y)/a;return new ll(s,u)};var qh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new cf;var e=arguments[0],t=arguments[1],r=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=r};qh.prototype.addPoint=function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),r=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},qh.prototype.addPolygon=function(e){var t=this,r=this._distance,n=Lc.LEFT;this._distance<0&&(r=-this._distance,n=Lc.RIGHT);var i=e.getExteriorRing(),o=df.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,r,n,pl.EXTERIOR,pl.INTERIOR);for(var a=0;a<e.getNumInteriorRing();a++){var s=e.getInteriorRingN(a),u=df.removeRepeatedPoints(s.getCoordinates());t._distance>0&&t.isErodedCompletely(s,-t._distance)||t.addPolygonRing(u,r,Lc.opposite(n),pl.INTERIOR,pl.EXTERIOR)}},qh.prototype.isTriangleErodedCompletely=function(e,t){var r=new Vh(e[0],e[1],e[2]),n=r.inCentre();return Wl.distancePointLine(n,r.p0,r.p1)<Math.abs(t)},qh.prototype.addLineString=function(e){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var t=df.removeRepeatedPoints(e.getCoordinates()),r=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(r,pl.EXTERIOR,pl.INTERIOR)},qh.prototype.addCurve=function(e,t,r){if(null===e||e.length<2)return null;var n=new mh(e,new Fc(0,pl.BOUNDARY,t,r));this._curveList.add(n)},qh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},qh.prototype.addPolygonRing=function(e,t,r,n,i){if(0===t&&e.length<ic.MINIMUM_VALID_SIZE)return null;var o=n,a=i;e.length>=ic.MINIMUM_VALID_SIZE&&Wl.isCCW(e)&&(o=i,a=n,r=Lc.opposite(r));var s=this._curveBuilder.getRingCurve(e,r,t);this.addCurve(s,o,a)},qh.prototype.add=function(e){if(e.isEmpty())return null;e instanceof rc?this.addPolygon(e):e instanceof Kf?this.addLineString(e):e instanceof ec?this.addPoint(e):(e instanceof nc||e instanceof Uf||e instanceof oc||e instanceof jf)&&this.addCollection(e)},qh.prototype.isErodedCompletely=function(e,t){var r=e.getCoordinates();if(r.length<4)return t<0;if(4===r.length)return this.isTriangleErodedCompletely(r,t);var n=e.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return t<0&&2*Math.abs(t)>i},qh.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var r=e.getGeometryN(t);this.add(r)}},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var zh=function(){};zh.prototype.locate=function(e){},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Hh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()};Hh.prototype.next=function(){if(this._atStart)return this._atStart=!1,Hh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new ff;var e=this._parent.getGeometryN(this._index++);return e instanceof jf?(this._subcollectionIterator=new Hh(e),this._subcollectionIterator.next()):e},Hh.prototype.remove=function(){throw new Error(this.getClass().getName())},Hh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Hh.prototype.interfaces_=function(){return[uf]},Hh.prototype.getClass=function(){return Hh},Hh.isAtomic=function(e){return!(e instanceof jf)};var Wh=function(){this._geom=null;var e=arguments[0];this._geom=e};Wh.prototype.locate=function(e){return Wh.locate(e,this._geom)},Wh.prototype.interfaces_=function(){return[zh]},Wh.prototype.getClass=function(){return Wh},Wh.isPointInRing=function(e,t){return!!t.getEnvelopeInternal().intersects(e)&&Wl.isPointInRing(e,t.getCoordinates())},Wh.containsPointInPolygon=function(e,t){if(t.isEmpty())return!1;var r=t.getExteriorRing();if(!Wh.isPointInRing(e,r))return!1;for(var n=0;n<t.getNumInteriorRing();n++){var i=t.getInteriorRingN(n);if(Wh.isPointInRing(e,i))return!1}return!0},Wh.containsPoint=function(e,t){if(t instanceof rc)return Wh.containsPointInPolygon(e,t);if(t instanceof jf)for(var r=new Hh(t);r.hasNext();){var n=r.next();if(n!==t&&Wh.containsPoint(e,n))return!0}return!1},Wh.locate=function(e,t){return t.isEmpty()?pl.EXTERIOR:Wh.containsPoint(e,t)?pl.INTERIOR:pl.EXTERIOR};var Zh=function(){this._edgeMap=new Tf,this._edgeList=null,this._ptInAreaLocation=[pl.NONE,pl.NONE]};Zh.prototype.getNextCW=function(e){this.getEdges();var t=this._edgeList.indexOf(e),r=t-1;return 0===t&&(r=this._edgeList.size()-1),this._edgeList.get(r)},Zh.prototype.propagateSideLabels=function(e){for(var t=pl.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(e)&&n.getLocation(e,Lc.LEFT)!==pl.NONE&&(t=n.getLocation(e,Lc.LEFT))}if(t===pl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,Lc.ON)===pl.NONE&&s.setLocation(e,Lc.ON,i),s.isArea(e)){var u=s.getLocation(e,Lc.LEFT),l=s.getLocation(e,Lc.RIGHT);if(l!==pl.NONE){if(l!==i)throw new Nc("side location conflict",a.getCoordinate());u===pl.NONE&&Ul.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else Ul.isTrue(s.getLocation(e,Lc.LEFT)===pl.NONE,"found single null side"),s.setLocation(e,Lc.RIGHT,i),s.setLocation(e,Lc.LEFT,i)}}},Zh.prototype.getCoordinate=function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null},Zh.prototype.print=function(e){Tl.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){t.next().print(e)}},Zh.prototype.isAreaLabelsConsistent=function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Zh.prototype.checkAreaLabelsConsistent=function(e){var t=this.getEdges();if(t.size()<=0)return!0;var r=t.size()-1,n=t.get(r).getLabel().getLocation(e,Lc.LEFT);Ul.isTrue(n!==pl.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var a=o.next().getLabel();Ul.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,Lc.LEFT),u=a.getLocation(e,Lc.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Zh.prototype.findIndex=function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++){if(this._edgeList.get(t)===e)return t}return-1},Zh.prototype.iterator=function(){return this.getEdges().iterator()},Zh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new cf(this._edgeMap.values())),this._edgeList},Zh.prototype.getLocation=function(e,t,r){return this._ptInAreaLocation[e]===pl.NONE&&(this._ptInAreaLocation[e]=Wh.locate(t,r[e].getGeometry())),this._ptInAreaLocation[e]},Zh.prototype.toString=function(){var e=new ml;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var r=t.next();e.append(r),e.append("\n")}return e.toString()},Zh.prototype.computeEdgeEndLabels=function(e){for(var t=this.iterator();t.hasNext();){t.next().computeLabel(e)}},Zh.prototype.computeLabelling=function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===pl.BOUNDARY&&(t[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=pl.NONE;if(t[u])l=pl.EXTERIOR;else{var f=a.getCoordinate();l=this.getLocation(u,f,e)}s.setAllLocationsIfNull(u,l)}},Zh.prototype.getDegree=function(){return this._edgeMap.size()},Zh.prototype.insertEdgeEnd=function(e,t){this._edgeMap.put(e,t),this._edgeList=null},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Xh=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var e=this;this.getResultAreaEdges();for(var t=null,r=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=e._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===t&&o.isInResult()&&(t=o),n){case e._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;r=a,n=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(!o.isInResult())continue;r.setNext(o),n=e._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Nc("no outgoing dirEdge found",this.getCoordinate());Ul.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),r.setNext(t)}},t.prototype.insert=function(e){var t=e;this.insertEdgeEnd(t,t)},t.prototype.getRightmostEdge=function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var r=e.get(0);if(1===t)return r;var n=e.get(t-1),i=r.getQuadrant(),o=n.getQuadrant();return zc.isNorthern(i)&&zc.isNorthern(o)?r:zc.isNorthern(i)||zc.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(Ul.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},t.prototype.print=function(e){Tl.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var r=t.next();e.print("out "),r.print(e),e.println(),e.print("in "),r.getSym().print(e),e.println()}},t.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new cf;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(e){for(var t=this.iterator();t.hasNext();){var r=t.next().getLabel();r.setAllLocationsIfNull(0,e.getLocation(0)),r.setAllLocationsIfNull(1,e.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var e=null,t=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=n}t.setNext(e)},t.prototype.computeDepths=function(){var e=this;if(1===arguments.length){var t=arguments[0],r=this.findIndex(t),n=t.getDepth(Lc.LEFT),i=t.getDepth(Lc.RIGHT),o=this.computeDepths(r+1,this._edgeList.size(),n),a=this.computeDepths(0,r,o);if(a!==i)throw new Nc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],u=arguments[1],l=arguments[2],f=l,c=s;c<u;c++){var h=e._edgeList.get(c);h.setEdgeDepths(Lc.RIGHT,f),f=h.getDepth(Lc.LEFT)}return f}},t.prototype.mergeSymLabels=function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(e){for(var t=this,r=null,n=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=t._resultAreaEdgeList.get(o),s=a.getSym();switch(null===r&&a.getEdgeRing()===e&&(r=a),i){case t._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==e)continue;n=s,i=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==e)continue;n.setNextMin(a),i=t._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Ul.isTrue(null!==r,"found null for first outgoing dirEdge"),Ul.isTrue(r.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(r))},t.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();){var r=t.next();r.isInResult()&&e++}return e}if(1===arguments.length){for(var n=arguments[0],i=0,o=this.iterator();o.hasNext();){var a=o.next();a.getEdgeRing()===n&&i++}return i}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var e=pl.NONE,t=this.iterator();t.hasNext();){var r=t.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){e=pl.INTERIOR;break}if(n.isInResult()){e=pl.EXTERIOR;break}}}if(e===pl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===pl.INTERIOR):(a.isInResult()&&(i=pl.EXTERIOR),s.isInResult()&&(i=pl.INTERIOR))}},t.prototype.computeLabelling=function(t){e.prototype.computeLabelling.call(this,t),this._label=new Fc(pl.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==pl.INTERIOR&&o!==pl.BOUNDARY||this._label.setLocation(i,pl.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Zh),Yh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(e){return new Vc(e,new Xh)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Xc),Qh=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Qh.prototype.compareTo=function(e){var t=e;return Qh.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Qh.prototype.interfaces_=function(){return[ol]},Qh.prototype.getClass=function(){return Qh},Qh.orientation=function(e){return 1===df.increasingDirection(e)},Qh.compareOriented=function(e,t,r,n){for(var i=t?1:-1,o=n?1:-1,a=t?e.length:-1,s=n?r.length:-1,u=t?0:e.length-1,l=n?0:r.length-1;;){var f=e[u].compareTo(r[l]);if(0!==f)return f;var c=(u+=i)===a,h=(l+=o)===s;if(c&&!h)return-1;if(!c&&h)return 1;if(c&&h)return 0}};var Jh=function(){this._edges=new cf,this._ocaMap=new Tf};Jh.prototype.print=function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var r=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&e.print(","),e.print(n[i].x+" "+n[i].y);e.println(")")}e.print(")  ")},Jh.prototype.addAll=function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())},Jh.prototype.findEdgeIndex=function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1},Jh.prototype.iterator=function(){return this._edges.iterator()},Jh.prototype.getEdges=function(){return this._edges},Jh.prototype.get=function(e){return this._edges.get(e)},Jh.prototype.findEqualEdge=function(e){var t=new Qh(e.getCoordinates());return this._ocaMap.get(t)},Jh.prototype.add=function(e){this._edges.add(e);var t=new Qh(e.getCoordinates());this._ocaMap.put(t,e)},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Kh=function(){};Kh.prototype.processIntersections=function(e,t,r,n){},Kh.prototype.isDone=function(){},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var $h=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e};$h.prototype.isTrivialIntersection=function(e,t,r,n){if(e===r&&1===this._li.getIntersectionNum()){if($h.isAdjacentSegments(t,n))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&n===i||0===n&&t===i)return!0}}return!1},$h.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},$h.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},$h.prototype.getLineIntersector=function(){return this._li},$h.prototype.hasProperIntersection=function(){return this._hasProper},$h.prototype.processIntersections=function(e,t,r,n){if(e===r&&t===n)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,r,n)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},$h.prototype.hasIntersection=function(){return this._hasIntersection},$h.prototype.isDone=function(){return!1},$h.prototype.hasInteriorIntersection=function(){return this._hasInterior},$h.prototype.interfaces_=function(){return[Kh]},$h.prototype.getClass=function(){return $h},$h.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var ep=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],r=arguments[2];this.coord=new ll(e),this.segmentIndex=t,this.dist=r};ep.prototype.getSegmentIndex=function(){return this.segmentIndex},ep.prototype.getCoordinate=function(){return this.coord},ep.prototype.print=function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)},ep.prototype.compareTo=function(e){var t=e;return this.compare(t.segmentIndex,t.dist)},ep.prototype.isEndPoint=function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e},ep.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},ep.prototype.getDistance=function(){return this.dist},ep.prototype.compare=function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0},ep.prototype.interfaces_=function(){return[ol]},ep.prototype.getClass=function(){return ep};var tp=function(){this._nodeMap=new Tf,this.edge=null;var e=arguments[0];this.edge=e};tp.prototype.print=function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();){t.next().print(e)}},tp.prototype.iterator=function(){return this._nodeMap.values().iterator()},tp.prototype.addSplitEdges=function(e){this.addEndpoints();for(var t=this.iterator(),r=t.next();t.hasNext();){var n=t.next(),i=this.createSplitEdge(r,n);e.add(i),r=n}},tp.prototype.addEndpoints=function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)},tp.prototype.createSplitEdge=function(e,t){var r=t.segmentIndex-e.segmentIndex+2,n=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),a=0;o[a++]=new ll(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=t.coord),new ap(o,new Fc(this.edge._label))},tp.prototype.add=function(e,t,r){var n=new ep(e,t,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},tp.prototype.isIntersection=function(e){for(var t=this.iterator();t.hasNext();){if(t.next().coord.equals(e))return!0}return!1},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var rp=function(){};rp.prototype.getChainStartIndices=function(e){var t=0,r=new cf;r.add(new _l(t));do{var n=this.findChainEnd(e,t);r.add(new _l(n)),t=n}while(t<e.length-1);return rp.toIntArray(r)},rp.prototype.findChainEnd=function(e,t){for(var r=zc.quadrant(e[t],e[t+1]),n=t+1;n<e.length;){if(zc.quadrant(e[n-1],e[n])!==r)break;n++}return n-1},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.toIntArray=function(e){for(var t=new Array(e.size()).fill(null),r=0;r<t.length;r++)t[r]=e.get(r).intValue();return t};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ol,this.env2=new Ol;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new rp;this.startIndex=t.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(e){var t=this.pts[this.startIndex[e]].x,r=this.pts[this.startIndex[e+1]].x;return t>r?t:r},np.prototype.getMinX=function(e){var t=this.pts[this.startIndex[e]].x,r=this.pts[this.startIndex[e+1]].x;return t<r?t:r},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[r],t.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5],f=this.pts[i],c=this.pts[o],h=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(f,c),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),v=Math.trunc((s+u)/2);i<d&&(s<v&&this.computeIntersectsForChain(i,d,a,s,v,l),v<u&&this.computeIntersectsForChain(i,d,a,v,u,l)),d<o&&(s<v&&this.computeIntersectsForChain(d,o,a,s,v,l),v<u&&this.computeIntersectsForChain(d,o,a,v,u,l))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(e,t){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<e.startIndex.length-1;n++)this.computeIntersectsForChain(r,e,n,t)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function e(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var r=0;r<3;r++)this._depth[t][r]=e.NULL_VALUE},op={NULL_VALUE:{configurable:!0}};ip.prototype.getDepth=function(e,t){return this._depth[e][t]},ip.prototype.setDepth=function(e,t,r){this._depth[e][t]=r},ip.prototype.isNull=function(){var e=this;if(0===arguments.length){for(var t=0;t<2;t++)for(var r=0;r<3;r++)if(e._depth[t][r]!==ip.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ip.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===ip.NULL_VALUE}},ip.prototype.normalize=function(){for(var e=this,t=0;t<2;t++)if(!e.isNull(t)){var r=e._depth[t][1];e._depth[t][2]<r&&(r=e._depth[t][2]),r<0&&(r=0);for(var n=1;n<3;n++){var i=0;e._depth[t][n]>r&&(i=1),e._depth[t][n]=i}}},ip.prototype.getDelta=function(e){return this._depth[e][Lc.RIGHT]-this._depth[e][Lc.LEFT]},ip.prototype.getLocation=function(e,t){return this._depth[e][t]<=0?pl.EXTERIOR:pl.INTERIOR},ip.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ip.prototype.add=function(){var e=this;if(1===arguments.length)for(var t=arguments[0],r=0;r<2;r++)for(var n=1;n<3;n++){var i=t.getLocation(r,n);i!==pl.EXTERIOR&&i!==pl.INTERIOR||(e.isNull(r,n)?e._depth[r][n]=ip.depthAtLocation(i):e._depth[r][n]+=ip.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];s===pl.INTERIOR&&this._depth[o][a]++}},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.depthAtLocation=function(e){return e===pl.EXTERIOR?0:e===pl.INTERIOR?1:ip.NULL_VALUE},op.NULL_VALUE.get=function(){return-1},Object.defineProperties(ip,op);var ap=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new tp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ip,this._depthDelta=0,1===arguments.length){var r=arguments[0];t.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,Fc.toLineLabel(this._label))},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(e){this._isIsolated=e},t.prototype.setName=function(e){this._name=e},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(r.pts[a])||(n=!1),this.pts[a].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},t.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}},t.prototype.print=function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(e){t.updateIM(this._label,e)},t.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")},t.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},t.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ol;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env},t.prototype.addIntersection=function(e,t,r,n){var i=new ll(e.getIntersection(n)),o=t,a=e.getEdgeDistance(r,n),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},t.prototype.toString=function(){var e=new ml;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},t.prototype.isPointwiseEqual=function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0},t.prototype.setDepthDelta=function(e){this._depthDelta=e},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(e,t,r){for(var n=0;n<e.getIntersectionNum();n++)this.addIntersection(e,t,r,n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(2!==arguments.length)return e.prototype.updateIM.apply(this,arguments);var t=arguments[0],r=arguments[1];r.setAtLeastIfValid(t.getLocation(0,Lc.ON),t.getLocation(1,Lc.ON),1),t.isArea()&&(r.setAtLeastIfValid(t.getLocation(0,Lc.LEFT),t.getLocation(1,Lc.LEFT),2),r.setAtLeastIfValid(t.getLocation(0,Lc.RIGHT),t.getLocation(1,Lc.RIGHT),2))},t}(Gc),sp=function(e){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jh,this._bufParams=e||null};sp.prototype.setWorkingPrecisionModel=function(e){this._workingPrecisionModel=e},sp.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var r=t.getLabel(),n=e.getLabel();t.isPointwiseEqual(e)||(n=new Fc(e.getLabel())).flip(),r.merge(n);var i=sp.depthDelta(n),o=t.getDepthDelta()+i;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(sp.depthDelta(e.getLabel()))},sp.prototype.buildSubgraphs=function(e,t){for(var r=new cf,n=e.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),a=new jh(r).getDepth(o);i.computeDepth(a),i.findResultEdges(),r.add(i),t.add(i.getDirectedEdges(),i.getNodes())}},sp.prototype.createSubgraphs=function(e){for(var t=new cf,r=e.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new kc;i.create(n),t.add(i)}}return ih.sort(t,ih.reverseOrder()),t},sp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sp.prototype.getNoder=function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new Ih,r=new ql;return r.setPrecisionModel(e),t.setSegmentIntersector(new $h(r)),t},sp.prototype.buffer=function(e,t){var r=this._workingPrecisionModel;null===r&&(r=e.getPrecisionModel()),this._geomFact=e.getFactory();var n=new Bh(r,this._bufParams),i=new qh(e,t,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new Yc(new Yh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Qc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},sp.prototype.computeNodedEdges=function(e,t){var r=this.getNoder(t);r.computeNodes(e);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new ap(i.getCoordinates(),new Fc(a));this.insertUniqueEdge(s)}}},sp.prototype.setNoder=function(e){this._workingNoder=e},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.depthDelta=function(e){var t=e.getLocation(0,Lc.LEFT),r=e.getLocation(0,Lc.RIGHT);return t===pl.INTERIOR&&r===pl.EXTERIOR?1:t===pl.EXTERIOR&&r===pl.INTERIOR?-1:0},sp.convertSegStrings=function(e){for(var t=new bc,r=new cf;e.hasNext();){var n=e.next(),i=t.createLineString(n.getCoordinates());r.add(i)}return t.buildGeometry(r)};var up=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],t=arguments[1];this._noder=e,this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};up.prototype.rescale=function(){var e=this;if(vl(arguments[0],af))for(var t=arguments[0],r=t.iterator();r.hasNext();){var n=r.next();e.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/e._scaleFactor+e._offsetX,i[o].y=i[o].y/e._scaleFactor+e._offsetY;2===i.length&&i[0].equals2D(i[1])&&Tl.out.println(i)}},up.prototype.scale=function(){var e=this;if(vl(arguments[0],af)){for(var t=arguments[0],r=new cf,n=t.iterator();n.hasNext();){var i=n.next();r.add(new mh(e.scale(i.getCoordinates()),i.getData()))}return r}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new ll(Math.round((o[s].x-e._offsetX)*e._scaleFactor),Math.round((o[s].y-e._offsetY)*e._scaleFactor),o[s].z);var u=df.removeRepeatedPoints(a);return u}},up.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},up.prototype.getNodedSubstrings=function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e},up.prototype.computeNodes=function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)},up.prototype.interfaces_=function(){return[wh]},up.prototype.getClass=function(){return up};var lp=function(){this._li=new ql,this._segStrings=null;var e=arguments[0];this._segStrings=e},fp={fact:{configurable:!0}};lp.prototype.checkEndPtVertexIntersections=function(){var e=this;if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var r=t.next(),n=r.getCoordinates();e.checkEndPtVertexIntersections(n[0],e._segStrings),e.checkEndPtVertexIntersections(n[n.length-1],e._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=o.iterator();a.hasNext();)for(var s=a.next(),u=s.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new Bl("found endpt/interior pt intersection at index "+l+" :pt "+i)},lp.prototype.checkInteriorIntersections=function(){var e=this;if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var r=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();e.checkInteriorIntersections(r,i)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),u=a.getCoordinates(),l=0;l<s.length-1;l++)for(var f=0;f<u.length-1;f++)e.checkInteriorIntersections(o,l,a,f);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3];if(c===p&&h===d)return null;var v=c.getCoordinates()[h],y=c.getCoordinates()[h+1],g=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(v,y,g,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,y)||this.hasInteriorIntersection(this._li,g,m)))throw new Bl("found non-noded intersection at "+v+"-"+y+" and "+g+"-"+m)}},lp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},lp.prototype.checkCollapses=function(){var e=this;if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var r=t.next();e.checkCollapses(r)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),o=0;o<i.length-2;o++)e.checkCollapse(i[o],i[o+1],i[o+2])},lp.prototype.hasInteriorIntersection=function(e,t,r){for(var n=0;n<e.getIntersectionNum();n++){var i=e.getIntersection(n);if(!i.equals(t)&&!i.equals(r))return!0}return!1},lp.prototype.checkCollapse=function(e,t,r){if(e.equals(r))throw new Bl("found non-noded collapse at "+lp.fact.createLineString([e,t,r]))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},fp.fact.get=function(){return new bc},Object.defineProperties(lp,fp);var cp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],r=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=r,t<=0)throw new rl("Scale factor must be non-zero");1!==t&&(this._pt=new ll(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new ll,this._p1Scaled=new ll),this.initCorners(this._pt)},hp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};cp.prototype.intersectsScaled=function(e,t){var r=Math.min(e.x,t.x),n=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return Ul.isTrue(!(a&&s),"Found bad envelope test"),s},cp.prototype.initCorners=function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new ll(this._maxx,this._maxy),this._corner[1]=new ll(this._minx,this._maxy),this._corner[2]=new ll(this._minx,this._miny),this._corner[3]=new ll(this._maxx,this._miny)},cp.prototype.intersects=function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},cp.prototype.scale=function(e){return Math.round(e*this._scaleFactor)},cp.prototype.getCoordinate=function(){return this._originalPt},cp.prototype.copyScaled=function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)},cp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var e=cp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ol(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv},cp.prototype.intersectsPixelClosure=function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},cp.prototype.intersectsToleranceSquare=function(e,t){var r=!1,n=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!r||!n)||(!!e.equals(this._pt)||!!t.equals(this._pt))))))},cp.prototype.addSnappedNode=function(e,t){var r=e.getCoordinate(t),n=e.getCoordinate(t+1);return!!this.intersects(r,n)&&(e.addIntersection(this.getCoordinate(),t),!0)},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},hp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(cp,hp);var pp=function(){this.tempEnv1=new Ol,this.selectedSegment=new _h};pp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];e.getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function(){this._index=null;var e=arguments[0];this._index=e},vp={HotPixelSnapAction:{configurable:!0}};dp.prototype.snap=function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],r=arguments[1],n=arguments[2],i=t.getSafeEnvelope(),o=new yp(t,r,n);return this._index.query(i,{interfaces_:function(){return[eh]},visitItem:function(e){e.select(i,o)}}),o.isNodeAdded()}},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},vp.HotPixelSnapAction.get=function(){return yp},Object.defineProperties(dp,vp);var yp=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=r,this._hotPixelVertexIndex=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(2!==arguments.length)return e.prototype.select.apply(this,arguments);var t=arguments[0],r=arguments[1],n=t.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pp),gp=function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new cf};gp.prototype.processIntersections=function(e,t,r,n){if(e===r&&t===n)return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));e.addIntersections(this._li,t,0),r.addIntersections(this._li,n,1)}},gp.prototype.isDone=function(){return!1},gp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gp.prototype.interfaces_=function(){return[Kh]},gp.prototype.getClass=function(){return gp};var mp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new ql,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()};mp.prototype.checkCorrectness=function(e){var t=mh.getNodedSubstrings(e),r=new lp(t);try{r.checkValid()}catch(e){if(!(e instanceof El))throw e;e.printStackTrace()}},mp.prototype.getNodedSubstrings=function(){return mh.getNodedSubstrings(this._nodedSegStrings)},mp.prototype.snapRound=function(e,t){var r=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(r),this.computeVertexSnaps(e)},mp.prototype.findInteriorIntersections=function(e,t){var r=new gp(t);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(e),r.getInteriorIntersections()},mp.prototype.computeVertexSnaps=function(){var e=this;if(vl(arguments[0],af))for(var t=arguments[0],r=t.iterator();r.hasNext();){var n=r.next();e.computeVertexSnaps(n)}else if(arguments[0]instanceof mh)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length;a++){var s=new cp(o[a],e._scaleFactor,e._li),u=e._pointSnapper.snap(s,i,a);u&&i.addIntersection(o[a],a)}},mp.prototype.computeNodes=function(e){this._nodedSegStrings=e,this._noder=new Ih,this._pointSnapper=new dp(this._noder.getIndex()),this.snapRound(e,this._li)},mp.prototype.computeIntersectionSnaps=function(e){for(var t=this,r=e.iterator();r.hasNext();){var n=r.next(),i=new cp(n,t._scaleFactor,t._li);t._pointSnapper.snap(i)}},mp.prototype.interfaces_=function(){return[wh]},mp.prototype.getClass=function(){return mp};var _p=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Lh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],r=arguments[1];this._argGeom=t,this._bufParams=r}},bp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_p.prototype.bufferFixedPrecision=function(e){var t=new up(new mp(new yc(1)),e.getScale()),r=new sp(this._bufParams);r.setWorkingPrecisionModel(e),r.setNoder(t),this._resultGeometry=r.buffer(this._argGeom,this._distance)},_p.prototype.bufferReducedPrecision=function(){var e=this;if(0===arguments.length){for(var t=_p.MAX_PRECISION_DIGITS;t>=0;t--){try{e.bufferReducedPrecision(t)}catch(t){if(!(t instanceof Nc))throw t;e._saveException=t}if(null!==e._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=_p.precisionScaleFactor(this._argGeom,this._distance,r),i=new yc(n);this.bufferFixedPrecision(i)}},_p.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===yc.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()},_p.prototype.setQuadrantSegments=function(e){this._bufParams.setQuadrantSegments(e)},_p.prototype.bufferOriginalPrecision=function(){try{var e=new sp(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Bl))throw e;this._saveException=e}},_p.prototype.getResultGeometry=function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry},_p.prototype.setEndCapStyle=function(e){this._bufParams.setEndCapStyle(e)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.bufferOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],r=new _p(e),n=r.getResultGeometry(t);return n}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=arguments[2],s=new _p(i);s.setQuadrantSegments(a);var u=s.getResultGeometry(o);return u}if(arguments[2]instanceof Lh&&arguments[0]instanceof Yl&&"number"==typeof arguments[1]){var l=arguments[0],f=arguments[1],c=arguments[2],h=new _p(l,c),p=h.getResultGeometry(f);return p}}else if(4===arguments.length){var d=arguments[0],v=arguments[1],y=arguments[2],g=arguments[3],m=new _p(d);m.setQuadrantSegments(y),m.setEndCapStyle(g);var _=m.getResultGeometry(v);return _}},_p.precisionScaleFactor=function(e,t,r){var n=e.getEnvelopeInternal(),i=yl.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(t>0?t:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},bp.CAP_ROUND.get=function(){return Lh.CAP_ROUND},bp.CAP_BUTT.get=function(){return Lh.CAP_FLAT},bp.CAP_FLAT.get=function(){return Lh.CAP_FLAT},bp.CAP_SQUARE.get=function(){return Lh.CAP_SQUARE},bp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_p,bp);var Sp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};Sp.prototype.getCoordinates=function(){return this._pt},Sp.prototype.getCoordinate=function(e){return this._pt[e]},Sp.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(t,r),null;var n=t.distance(r);n<this._distance&&this.initialize(t,r,n)}},Sp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Sp.prototype.getDistance=function(){return this._distance},Sp.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(t,r),null;var n=t.distance(r);n>this._distance&&this.initialize(t,r,n)}},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var xp=function(){};xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.computeDistance=function(){if(arguments[2]instanceof Sp&&arguments[0]instanceof Kf&&arguments[1]instanceof ll)for(var e=arguments[0],t=arguments[1],r=arguments[2],n=e.getCoordinates(),i=new _h,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var a=i.closestPoint(t);r.setMinimum(a,t)}else if(arguments[2]instanceof Sp&&arguments[0]instanceof rc&&arguments[1]instanceof ll){var s=arguments[0],u=arguments[1],l=arguments[2];xp.computeDistance(s.getExteriorRing(),u,l);for(var f=0;f<s.getNumInteriorRing();f++)xp.computeDistance(s.getInteriorRingN(f),u,l)}else if(arguments[2]instanceof Sp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof Kf)xp.computeDistance(c,h,p);else if(c instanceof rc)xp.computeDistance(c,h,p);else if(c instanceof jf)for(var d=c,v=0;v<d.getNumGeometries();v++){var y=d.getGeometryN(v);xp.computeDistance(y,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof Sp&&arguments[0]instanceof _h&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var Cp=function(e){this._maxPtDist=new Sp,this._inputGeom=e||null},wp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Cp.prototype.computeMaxMidpointDistance=function(e){var t=new Ip(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},Cp.prototype.computeMaxVertexDistance=function(e){var t=new Pp(this._inputGeom);e.apply(t),this._maxPtDist.setMaximum(t.getMaxPointDistance())},Cp.prototype.findDistance=function(e){return this.computeMaxVertexDistance(e),this.computeMaxMidpointDistance(e),this._maxPtDist.getDistance()},Cp.prototype.getDistancePoints=function(){return this._maxPtDist},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},wp.MaxPointDistanceFilter.get=function(){return Pp},wp.MaxMidpointDistanceFilter.get=function(){return Ip},Object.defineProperties(Cp,wp);var Pp=function(e){this._maxPtDist=new Sp,this._minPtDist=new Sp,this._geom=e||null};Pp.prototype.filter=function(e){this._minPtDist.initialize(),xp.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Pp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Pp.prototype.interfaces_=function(){return[Kl]},Pp.prototype.getClass=function(){return Pp};var Ip=function(e){this._maxPtDist=new Sp,this._minPtDist=new Sp,this._geom=e||null};Ip.prototype.filter=function(e,t){if(0===t)return null;var r=e.getCoordinate(t-1),n=e.getCoordinate(t),i=new ll((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),xp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ip.prototype.isDone=function(){return!1},Ip.prototype.isGeometryChanged=function(){return!1},Ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ip.prototype.interfaces_=function(){return[Bf]},Ip.prototype.getClass=function(){return Ip};var Ep=function(e){this._comps=e||null};Ep.prototype.filter=function(e){e instanceof rc&&this._comps.add(e)},Ep.prototype.interfaces_=function(){return[Ff]},Ep.prototype.getClass=function(){return Ep},Ep.getPolygons=function(){if(1===arguments.length){var e=arguments[0];return Ep.getPolygons(e,new cf)}if(2===arguments.length){var t=arguments[0],r=arguments[1];return t instanceof rc?r.add(t):t instanceof jf&&t.apply(new Ep(r)),r}};var Lp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var e=arguments[0];this._lines=e}else if(2===arguments.length){var t=arguments[0],r=arguments[1];this._lines=t,this._isForcedToLineString=r}};Lp.prototype.filter=function(e){if(this._isForcedToLineString&&e instanceof ic){var t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof Kf&&this._lines.add(e)},Lp.prototype.setForceToLineString=function(e){this._isForcedToLineString=e},Lp.prototype.interfaces_=function(){return[Xl]},Lp.prototype.getClass=function(){return Lp},Lp.getGeometry=function(){if(1===arguments.length){var e=arguments[0];return e.getFactory().buildGeometry(Lp.getLines(e))}if(2===arguments.length){var t=arguments[0],r=arguments[1];return t.getFactory().buildGeometry(Lp.getLines(t,r))}},Lp.getLines=function(){if(1===arguments.length){var e=arguments[0];return Lp.getLines(e,!1)}if(2===arguments.length){if(vl(arguments[0],af)&&vl(arguments[1],af)){for(var t=arguments[0],r=arguments[1],n=t.iterator();n.hasNext();){var i=n.next();Lp.getLines(i,r)}return r}if(arguments[0]instanceof Yl&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new cf;return o.apply(new Lp(s,a)),s}if(arguments[0]instanceof Yl&&vl(arguments[1],af)){var u=arguments[0],l=arguments[1];return u instanceof Kf?l.add(u):u.apply(new Lp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&vl(arguments[0],af)&&vl(arguments[1],af)){for(var f=arguments[0],c=arguments[1],h=arguments[2],p=f.iterator();p.hasNext();){var d=p.next();Lp.getLines(d,c,h)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Yl&&vl(arguments[1],af)){var v=arguments[0],y=arguments[1],g=arguments[2];return v.apply(new Lp(y,g)),y}}};var Tp=function(){if(this._boundaryRule=$l.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(null===e)throw new rl("Rule must be non-null");this._boundaryRule=e}};Tp.prototype.locateInternal=function(){var e=this;if(arguments[0]instanceof ll&&arguments[1]instanceof rc){var t=arguments[0],r=arguments[1];if(r.isEmpty())return pl.EXTERIOR;var n=r.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===pl.EXTERIOR)return pl.EXTERIOR;if(i===pl.BOUNDARY)return pl.BOUNDARY;for(var o=0;o<r.getNumInteriorRing();o++){var a=r.getInteriorRingN(o),s=e.locateInPolygonRing(t,a);if(s===pl.INTERIOR)return pl.EXTERIOR;if(s===pl.BOUNDARY)return pl.BOUNDARY}return pl.INTERIOR}if(arguments[0]instanceof ll&&arguments[1]instanceof Kf){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return pl.EXTERIOR;var f=l.getCoordinates();return l.isClosed()||!u.equals(f[0])&&!u.equals(f[f.length-1])?Wl.isOnLine(u,f)?pl.INTERIOR:pl.EXTERIOR:pl.BOUNDARY}if(arguments[0]instanceof ll&&arguments[1]instanceof ec){var c=arguments[0],h=arguments[1],p=h.getCoordinate();return p.equals2D(c)?pl.INTERIOR:pl.EXTERIOR}},Tp.prototype.locateInPolygonRing=function(e,t){return t.getEnvelopeInternal().intersects(e)?Wl.locatePointInRing(e,t.getCoordinates()):pl.EXTERIOR},Tp.prototype.intersects=function(e,t){return this.locate(e,t)!==pl.EXTERIOR},Tp.prototype.updateLocationInfo=function(e){e===pl.INTERIOR&&(this._isIn=!0),e===pl.BOUNDARY&&this._numBoundaries++},Tp.prototype.computeLocation=function(e,t){var r=this;if(t instanceof ec&&this.updateLocationInfo(this.locateInternal(e,t)),t instanceof Kf)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof rc)this.updateLocationInfo(this.locateInternal(e,t));else if(t instanceof Uf)for(var n=t,i=0;i<n.getNumGeometries();i++){var o=n.getGeometryN(i);r.updateLocationInfo(r.locateInternal(e,o))}else if(t instanceof oc)for(var a=t,s=0;s<a.getNumGeometries();s++){var u=a.getGeometryN(s);r.updateLocationInfo(r.locateInternal(e,u))}else if(t instanceof jf)for(var l=new Hh(t);l.hasNext();){var f=l.next();f!==t&&r.computeLocation(e,f)}},Tp.prototype.locate=function(e,t){return t.isEmpty()?pl.EXTERIOR:t instanceof Kf||t instanceof rc?this.locateInternal(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?pl.BOUNDARY:this._numBoundaries>0||this._isIn?pl.INTERIOR:pl.EXTERIOR)},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Mp=function e(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var t=arguments[0],r=arguments[1];e.call(this,t,e.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},Op={INSIDE_AREA:{configurable:!0}};Mp.prototype.isInsideArea=function(){return this._segIndex===Mp.INSIDE_AREA},Mp.prototype.getCoordinate=function(){return this._pt},Mp.prototype.getGeometryComponent=function(){return this._component},Mp.prototype.getSegmentIndex=function(){return this._segIndex},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Op.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Mp,Op);var Ap=function(e){this._pts=e||null};Ap.prototype.filter=function(e){e instanceof ec&&this._pts.add(e)},Ap.prototype.interfaces_=function(){return[Ff]},Ap.prototype.getClass=function(){return Ap},Ap.getPoints=function(){if(1===arguments.length){var e=arguments[0];return e instanceof ec?ih.singletonList(e):Ap.getPoints(e,new cf)}if(2===arguments.length){var t=arguments[0],r=arguments[1];return t instanceof ec?r.add(t):t instanceof jf&&t.apply(new Ap(r)),r}};var Np=function(){this._locations=null;var e=arguments[0];this._locations=e};Np.prototype.filter=function(e){(e instanceof ec||e instanceof Kf||e instanceof rc)&&this._locations.add(new Mp(e,0,e.getCoordinate()))},Np.prototype.interfaces_=function(){return[Ff]},Np.prototype.getClass=function(){return Np},Np.getLocations=function(e){var t=new cf;return e.apply(new Np(t)),t};var Rp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Tp,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var e=arguments[0],t=arguments[1];this._geom=[e,t],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};Rp.prototype.computeContainmentDistance=function(){var e=this;if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=1-r,o=Ep.getPolygons(this._geom[r]);if(o.size()>0){var a=Np.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[r]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&vl(arguments[0],lf)&&vl(arguments[1],lf)){for(var s=arguments[0],u=arguments[1],l=arguments[2],f=0;f<s.size();f++)for(var c=s.get(f),h=0;h<u.size();h++)if(e.computeContainmentDistance(c,u.get(h),l),e._minDistance<=e._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Mp&&arguments[1]instanceof rc){var p=arguments[0],d=arguments[1],v=arguments[2],y=p.getCoordinate();if(pl.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,v[0]=p,v[1]=new Mp(d,y),null}},Rp.prototype.computeMinDistanceLinesPoints=function(e,t,r){for(var n=this,i=0;i<e.size();i++)for(var o=e.get(i),a=0;a<t.size();a++){var s=t.get(a);if(n.computeMinDistance(o,s,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.computeFacetDistance=function(){var e=new Array(2).fill(null),t=Lp.getLines(this._geom[0]),r=Lp.getLines(this._geom[1]),n=Ap.getPoints(this._geom[0]),i=Ap.getPoints(this._geom[1]);return this.computeMinDistanceLines(t,r,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(t,i,e),this.updateMinDistance(e,!1),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistanceLinesPoints(r,n,e),this.updateMinDistance(e,!0),this._minDistance<=this._terminateDistance?null:(e[0]=null,e[1]=null,this.computeMinDistancePoints(n,i,e),void this.updateMinDistance(e,!1))))},Rp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Rp.prototype.updateMinDistance=function(e,t){if(null===e[0])return null;t?(this._minDistanceLocation[0]=e[1],this._minDistanceLocation[1]=e[0]):(this._minDistanceLocation[0]=e[0],this._minDistanceLocation[1]=e[1])},Rp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Rp.prototype.computeMinDistance=function(){var e=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kf&&arguments[1]instanceof ec){var t=arguments[0],r=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),o=r.getCoordinate(),a=0;a<i.length-1;a++){var s=Wl.distancePointLine(o,i[a],i[a+1]);if(s<e._minDistance){e._minDistance=s;var u=new _h(i[a],i[a+1]),l=u.closestPoint(o);n[0]=new Mp(t,a,l),n[1]=new Mp(r,0,o)}if(e._minDistance<=e._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kf&&arguments[1]instanceof Kf){var f=arguments[0],c=arguments[1],h=arguments[2];if(f.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=f.getCoordinates(),d=c.getCoordinates(),v=0;v<p.length-1;v++)for(var y=0;y<d.length-1;y++){var g=Wl.distanceLineLine(p[v],p[v+1],d[y],d[y+1]);if(g<e._minDistance){e._minDistance=g;var m=new _h(p[v],p[v+1]),_=new _h(d[y],d[y+1]),b=m.closestPoints(_);h[0]=new Mp(f,v,b[0]),h[1]=new Mp(c,y,b[1])}if(e._minDistance<=e._terminateDistance)return null}}},Rp.prototype.computeMinDistancePoints=function(e,t,r){for(var n=this,i=0;i<e.size();i++)for(var o=e.get(i),a=0;a<t.size();a++){var s=t.get(a),u=o.getCoordinate().distance(s.getCoordinate());if(u<n._minDistance&&(n._minDistance=u,r[0]=new Mp(o,0,o.getCoordinate()),r[1]=new Mp(s,0,s.getCoordinate())),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new rl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Rp.prototype.computeMinDistanceLines=function(e,t,r){for(var n=this,i=0;i<e.size();i++)for(var o=e.get(i),a=0;a<t.size();a++){var s=t.get(a);if(n.computeMinDistance(o,s,r),n._minDistance<=n._terminateDistance)return null}},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.distance=function(e,t){return new Rp(e,t).distance()},Rp.isWithinDistance=function(e,t,r){return new Rp(e,t,r).distance()<=r},Rp.nearestPoints=function(e,t){return new Rp(e,t).nearestPoints()};var kp=function(){this._pt=[new ll,new ll],this._distance=nl.NaN,this._isNull=!0};kp.prototype.getCoordinates=function(){return this._pt},kp.prototype.getCoordinate=function(e){return this._pt[e]},kp.prototype.setMinimum=function(){if(1===arguments.length){var e=arguments[0];this.setMinimum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(t,r),null;var n=t.distance(r);n<this._distance&&this.initialize(t,r,n)}},kp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._pt[0].setCoordinate(e),this._pt[1].setCoordinate(t),this._distance=e.distance(t),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},kp.prototype.toString=function(){return Fl.toLineString(this._pt[0],this._pt[1])},kp.prototype.getDistance=function(){return this._distance},kp.prototype.setMaximum=function(){if(1===arguments.length){var e=arguments[0];this.setMaximum(e._pt[0],e._pt[1])}else if(2===arguments.length){var t=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(t,r),null;var n=t.distance(r);n>this._distance&&this.initialize(t,r,n)}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Dp=function(){};Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.computeDistance=function(){if(arguments[2]instanceof kp&&arguments[0]instanceof Kf&&arguments[1]instanceof ll)for(var e=arguments[0],t=arguments[1],r=arguments[2],n=new _h,i=e.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var a=n.closestPoint(t);r.setMinimum(a,t)}else if(arguments[2]instanceof kp&&arguments[0]instanceof rc&&arguments[1]instanceof ll){var s=arguments[0],u=arguments[1],l=arguments[2];Dp.computeDistance(s.getExteriorRing(),u,l);for(var f=0;f<s.getNumInteriorRing();f++)Dp.computeDistance(s.getInteriorRingN(f),u,l)}else if(arguments[2]instanceof kp&&arguments[0]instanceof Yl&&arguments[1]instanceof ll){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof Kf)Dp.computeDistance(c,h,p);else if(c instanceof rc)Dp.computeDistance(c,h,p);else if(c instanceof jf)for(var d=c,v=0;v<d.getNumGeometries();v++){var y=d.getGeometryN(v);Dp.computeDistance(y,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof kp&&arguments[0]instanceof _h&&arguments[1]instanceof ll){var g=arguments[0],m=arguments[1],_=arguments[2],b=g.closestPoint(m);_.setMinimum(b,m)}};var Fp=function(){this._g0=null,this._g1=null,this._ptDist=new kp,this._densifyFrac=0;var e=arguments[0],t=arguments[1];this._g0=e,this._g1=t},Bp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Fp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Fp.prototype.setDensifyFraction=function(e){if(e>1||e<=0)throw new rl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=e},Fp.prototype.compute=function(e,t){this.computeOrientedDistance(e,t,this._ptDist),this.computeOrientedDistance(t,e,this._ptDist)},Fp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Fp.prototype.computeOrientedDistance=function(e,t,r){var n=new jp(t);if(e.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new Up(t,this._densifyFrac);e.apply(i),r.setMaximum(i.getMaxPointDistance())}},Fp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},Fp.distance=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],r=new Fp(e,t);return r.distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=new Fp(n,i);return a.setDensifyFraction(o),a.distance()}},Bp.MaxPointDistanceFilter.get=function(){return jp},Bp.MaxDensifiedByFractionDistanceFilter.get=function(){return Up},Object.defineProperties(Fp,Bp);var jp=function(){this._maxPtDist=new kp,this._minPtDist=new kp,this._euclideanDist=new Dp,this._geom=null;var e=arguments[0];this._geom=e};jp.prototype.filter=function(e){this._minPtDist.initialize(),Dp.computeDistance(this._geom,e,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},jp.prototype.getMaxPointDistance=function(){return this._maxPtDist},jp.prototype.interfaces_=function(){return[Kl]},jp.prototype.getClass=function(){return jp};var Up=function(){this._maxPtDist=new kp,this._minPtDist=new kp,this._geom=null,this._numSubSegs=0;var e=arguments[0],t=arguments[1];this._geom=e,this._numSubSegs=Math.trunc(Math.round(1/t))};Up.prototype.filter=function(e,t){var r=this;if(0===t)return null;for(var n=e.getCoordinate(t-1),i=e.getCoordinate(t),o=(i.x-n.x)/this._numSubSegs,a=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var u=n.x+s*o,l=n.y+s*a,f=new ll(u,l);r._minPtDist.initialize(),Dp.computeDistance(r._geom,f,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}},Up.prototype.isDone=function(){return!1},Up.prototype.isGeometryChanged=function(){return!1},Up.prototype.getMaxPointDistance=function(){return this._maxPtDist},Up.prototype.interfaces_=function(){return[Bf]},Up.prototype.getClass=function(){return Up};var Gp=function(e,t,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._bufDistance=t||null,this._result=r||null},Vp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Gp.prototype.checkMaximumDistance=function(e,t,r){var n=new Fp(t,e);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Fl.toLineString(i[0],i[1])+")"}},Gp.prototype.isValid=function(){var e=Math.abs(this._bufDistance),t=Gp.MAX_DISTANCE_DIFF_FRAC*e;return this._minValidDistance=e-t,this._maxValidDistance=e+t,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Gp.VERBOSE&&Tl.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Gp.prototype.checkNegativeValid=function(){if(!(this._input instanceof rc||this._input instanceof oc||this._input instanceof jf))return null;var e=this.getPolygonLines(this._input);if(this.checkMinimumDistance(e,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(e,this._result,this._maxValidDistance)},Gp.prototype.getErrorIndicator=function(){return this._errorIndicator},Gp.prototype.checkMinimumDistance=function(e,t,r){var n=new Rp(e,t,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=e.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Fl.toLineString(i[0],i[1])+" )"}},Gp.prototype.checkPositiveValid=function(){var e=this._result.getBoundary();if(this.checkMinimumDistance(this._input,e,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,e,this._maxValidDistance)},Gp.prototype.getErrorLocation=function(){return this._errorLocation},Gp.prototype.getPolygonLines=function(e){for(var t=new cf,r=new Lp(t),n=Ep.getPolygons(e).iterator();n.hasNext();){n.next().apply(r)}return e.getFactory().buildGeometry(t)},Gp.prototype.getErrorMessage=function(){return this._errMsg},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Vp.VERBOSE.get=function(){return!1},Vp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Gp,Vp);var qp=function(e,t,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=e||null,this._distance=t||null,this._result=r||null},zp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};qp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},qp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var e=this._distance*qp.MAX_ENV_DIFF_FRAC;0===e&&(e=.001);var t=new Ol(this._input.getEnvelopeInternal());t.expandBy(this._distance);var r=new Ol(this._result.getEnvelopeInternal());r.expandBy(e),r.contains(t)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},qp.prototype.checkDistance=function(){var e=new Gp(this._input,this._distance,this._result);e.isValid()||(this._isValid=!1,this._errorMsg=e.getErrorMessage(),this._errorLocation=e.getErrorLocation(),this._errorIndicator=e.getErrorIndicator()),this.report("Distance")},qp.prototype.checkArea=function(){var e=this._input.getArea(),t=this._result.getArea();this._distance>0&&e>t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&e<t&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},qp.prototype.checkPolygonal=function(){this._result instanceof rc||this._result instanceof oc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},qp.prototype.getErrorIndicator=function(){return this._errorIndicator},qp.prototype.getErrorLocation=function(){return this._errorLocation},qp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},qp.prototype.report=function(e){if(!qp.VERBOSE)return null;Tl.out.println("Check "+e+": "+(this._isValid?"passed":"FAILED"))},qp.prototype.getErrorMessage=function(){return this._errorMsg},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},qp.isValidMsg=function(e,t,r){var n=new qp(e,t,r);return n.isValid()?null:n.getErrorMessage()},qp.isValid=function(e,t,r){return!!new qp(e,t,r).isValid()},zp.VERBOSE.get=function(){return!1},zp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(qp,zp);var Hp=function(){this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t};Hp.prototype.getCoordinates=function(){return this._pts},Hp.prototype.size=function(){return this._pts.length},Hp.prototype.getCoordinate=function(e){return this._pts[e]},Hp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Hp.prototype.getSegmentOctant=function(e){return e===this._pts.length-1?-1:vh.octant(this.getCoordinate(e),this.getCoordinate(e+1))},Hp.prototype.setData=function(e){this._data=e},Hp.prototype.getData=function(){return this._data},Hp.prototype.toString=function(){return Fl.toLineString(new cc(this._pts))},Hp.prototype.interfaces_=function(){return[yh]},Hp.prototype.getClass=function(){return Hp};var Wp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new cf,this._intersectionCount=0,this._keepIntersections=!0;var e=arguments[0];this._li=e,this._interiorIntersection=null};Wp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Wp.prototype.setCheckEndSegmentsOnly=function(e){this._isCheckEndSegmentsOnly=e},Wp.prototype.getIntersectionSegments=function(){return this._intSegments},Wp.prototype.count=function(){return this._intersectionCount},Wp.prototype.getIntersections=function(){return this._intersections},Wp.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},Wp.prototype.setKeepIntersections=function(e){this._keepIntersections=e},Wp.prototype.processIntersections=function(e,t,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(e===r&&t===n)return null;if(this._isCheckEndSegmentsOnly&&!(this.isEndSegment(e,t)||this.isEndSegment(r,n)))return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Wp.prototype.isEndSegment=function(e,t){return 0===t||t>=e.size()-2},Wp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Wp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Wp.prototype.interfaces_=function(){return[Kh]},Wp.prototype.getClass=function(){return Wp},Wp.createAllIntersectionsFinder=function(e){var t=new Wp(e);return t.setFindAllIntersections(!0),t},Wp.createAnyIntersectionFinder=function(e){return new Wp(e)},Wp.createIntersectionCounter=function(e){var t=new Wp(e);return t.setFindAllIntersections(!0),t.setKeepIntersections(!1),t};var Zp=function(){this._li=new ql,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var e=arguments[0];this._segStrings=e};Zp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Zp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Zp.prototype.isValid=function(){return this.execute(),this._isValid},Zp.prototype.setFindAllIntersections=function(e){this._findAllIntersections=e},Zp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Wp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var e=new Ih;if(e.setSegmentIntersector(this._segInt),e.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Zp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Nc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Zp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var e=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Fl.toLineString(e[0],e[1])+" and "+Fl.toLineString(e[2],e[3])},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.computeIntersections=function(e){var t=new Zp(e);return t.setFindAllIntersections(!0),t.isValid(),t.getIntersections()};var Xp=function e(){this._nv=null;var t=arguments[0];this._nv=new Zp(e.toSegmentStrings(t))};Xp.prototype.checkValid=function(){this._nv.checkValid()},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.toSegmentStrings=function(e){for(var t=new cf,r=e.iterator();r.hasNext();){var n=r.next();t.add(new Hp(n.getCoordinates(),n))}return t},Xp.checkValid=function(e){new Xp(e).checkValid()};var Yp=function(e){this._mapOp=e};Yp.prototype.map=function(e){for(var t=new cf,r=0;r<e.getNumGeometries();r++){var n=this._mapOp.map(e.getGeometryN(r));n.isEmpty()||t.add(n)}return e.getFactory().createGeometryCollection(bc.toGeometryArray(t))},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.map=function(e,t){return new Yp(t).map(e)};var Qp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new cf,this._resultLineList=new cf;var e=arguments[0],t=arguments[1],r=arguments[2];this._op=e,this._geometryFactory=t,this._ptLocator=r};Qp.prototype.collectLines=function(e){for(var t=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var n=r.next();t.collectLineEdge(n,e,t._lineEdgesList),t.collectBoundaryTouchEdge(n,e,t._lineEdgesList)}},Qp.prototype.labelIsolatedLine=function(e,t){var r=this._ptLocator.locate(e.getCoordinate(),this._op.getArgGeometry(t));e.getLabel().setLocation(t,r)},Qp.prototype.build=function(e){return this.findCoveredLineEdges(),this.collectLines(e),this.buildLines(e),this._resultLineList},Qp.prototype.collectLineEdge=function(e,t,r){var n=e.getLabel(),i=e.getEdge();e.isLineEdge()&&(e.isVisited()||!Md.isResultOfOp(n,t)||i.isCovered()||(r.add(i),e.setVisitedEdge(!0)))},Qp.prototype.findCoveredLineEdges=function(){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){e.next().getEdges().findCoveredLineEdges()}for(var t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){var r=t.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Qp.prototype.labelIsolatedLines=function(e){for(var t=e.iterator();t.hasNext();){var r=t.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Qp.prototype.buildLines=function(e){for(var t=this._lineEdgesList.iterator();t.hasNext();){var r=t.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Qp.prototype.collectBoundaryTouchEdge=function(e,t,r){var n=e.getLabel();return e.isLineEdge()||e.isVisited()||e.isInteriorAreaEdge()||e.getEdge().isInResult()?null:(Ul.isTrue(!(e.isInResult()||e.getSym().isInResult())||!e.getEdge().isInResult()),void(Md.isResultOfOp(n,t)&&t===Md.INTERSECTION&&(r.add(e.getEdge()),e.setVisitedEdge(!0))))},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var Jp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new cf;var e=arguments[0],t=arguments[1];this._op=e,this._geometryFactory=t};Jp.prototype.filterCoveredNodeToPoint=function(e){var t=e.getCoordinate();if(!this._op.isCoveredByLA(t)){var r=this._geometryFactory.createPoint(t);this._resultPointList.add(r)}},Jp.prototype.extractNonCoveredResultNodes=function(e){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();){var r=t.next();if(!r.isInResult()&&(!r.isIncidentEdgeInResult()&&(0===r.getEdges().getDegree()||e===Md.INTERSECTION))){var n=r.getLabel();Md.isResultOfOp(n,e)&&this.filterCoveredNodeToPoint(r)}}},Jp.prototype.build=function(e){return this.extractNonCoveredResultNodes(e),this._resultPointList},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(e,t){return this._factory.createPoint(this.transformCoordinates(e.getCoordinateSequence(),e))},Kp.prototype.transformPolygon=function(e,t){var r=!0,n=this.transformLinearRing(e.getExteriorRing(),e);null!==n&&n instanceof ic&&!n.isEmpty()||(r=!1);for(var i=new cf,o=0;o<e.getNumInteriorRing();o++){var a=this.transformLinearRing(e.getInteriorRingN(o),e);null===a||a.isEmpty()||(a instanceof ic||(r=!1),i.add(a))}if(r)return this._factory.createPolygon(n,i.toArray([]));var s=new cf;return null!==n&&s.add(n),s.addAll(i),this._factory.buildGeometry(s)},Kp.prototype.createCoordinateSequence=function(e){return this._factory.getCoordinateSequenceFactory().create(e)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(e,t){for(var r=new cf,n=0;n<e.getNumGeometries();n++){var i=this.transformLineString(e.getGeometryN(n),e);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformCoordinates=function(e,t){return this.copy(e)},Kp.prototype.transformLineString=function(e,t){return this._factory.createLineString(this.transformCoordinates(e.getCoordinateSequence(),e))},Kp.prototype.transformMultiPoint=function(e,t){for(var r=new cf,n=0;n<e.getNumGeometries();n++){var i=this.transformPoint(e.getGeometryN(n),e);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.transformMultiPolygon=function(e,t){for(var r=new cf,n=0;n<e.getNumGeometries();n++){var i=this.transformPolygon(e.getGeometryN(n),e);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Kp.prototype.copy=function(e){return e.copy()},Kp.prototype.transformGeometryCollection=function(e,t){for(var r=new cf,n=0;n<e.getNumGeometries();n++){var i=this.transform(e.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(bc.toGeometryArray(r)):this._factory.buildGeometry(r)},Kp.prototype.transform=function(e){if(this._inputGeom=e,this._factory=e.getFactory(),e instanceof ec)return this.transformPoint(e,null);if(e instanceof nc)return this.transformMultiPoint(e,null);if(e instanceof ic)return this.transformLinearRing(e,null);if(e instanceof Kf)return this.transformLineString(e,null);if(e instanceof Uf)return this.transformMultiLineString(e,null);if(e instanceof rc)return this.transformPolygon(e,null);if(e instanceof oc)return this.transformMultiPolygon(e,null);if(e instanceof jf)return this.transformGeometryCollection(e,null);throw new rl("Unknown Geometry subtype: "+e.getClass().getName())},Kp.prototype.transformLinearRing=function(e,t){var r=this.transformCoordinates(e.getCoordinateSequence(),e);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var $p=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new _h,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kf&&"number"==typeof arguments[1]){var t=arguments[0],r=arguments[1];e.call(this,t.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=e.isClosed(n),this._snapTolerance=i}};$p.prototype.snapVertices=function(e,t){for(var r=this._isClosed?e.size()-1:e.size(),n=0;n<r;n++){var i=e.get(n),o=this.findSnapForVertex(i,t);null!==o&&(e.set(n,new ll(o)),0===n&&this._isClosed&&e.set(e.size()-1,new ll(o)))}},$p.prototype.findSnapForVertex=function(e,t){for(var r=0;r<t.length;r++){if(e.equals2D(t[r]))return null;if(e.distance(t[r])<this._snapTolerance)return t[r]}return null},$p.prototype.snapTo=function(e){var t=new pf(this._srcPts);return this.snapVertices(t,e),this.snapSegments(t,e),t.toCoordinateArray()},$p.prototype.snapSegments=function(e,t){if(0===t.length)return null;var r=t.length;t[0].equals2D(t[t.length-1])&&(r=t.length-1);for(var n=0;n<r;n++){var i=t[n],o=this.findSegmentIndexToSnap(i,e);o>=0&&e.add(o+1,new ll(i),!1)}},$p.prototype.findSegmentIndexToSnap=function(e,t){for(var r=this,n=nl.MAX_VALUE,i=-1,o=0;o<t.size()-1;o++){if(r._seg.p0=t.get(o),r._seg.p1=t.get(o+1),r._seg.p0.equals2D(e)||r._seg.p1.equals2D(e)){if(r._allowSnappingToSourceVertices)continue;return-1}var a=r._seg.distance(e);a<r._snapTolerance&&a<n&&(n=a,i=o)}return i},$p.prototype.setAllowSnappingToSourceVertices=function(e){this._allowSnappingToSourceVertices=e},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.isClosed=function(e){return!(e.length<=1)&&e[0].equals2D(e[e.length-1])};var ed=function(e){this._srcGeom=e||null},td={SNAP_PRECISION_FACTOR:{configurable:!0}};ed.prototype.snapTo=function(e,t){var r=this.extractTargetCoordinates(e);return new rd(t,r).transform(this._srcGeom)},ed.prototype.snapToSelf=function(e,t){var r=this.extractTargetCoordinates(this._srcGeom),n=new rd(e,r,!0).transform(this._srcGeom),i=n;return t&&vl(i,tc)&&(i=n.buffer(0)),i},ed.prototype.computeSnapTolerance=function(e){return this.computeMinimumSegmentLength(e)/10},ed.prototype.extractTargetCoordinates=function(e){for(var t=new Af,r=e.getCoordinates(),n=0;n<r.length;n++)t.add(r[n]);return t.toArray(new Array(0).fill(null))},ed.prototype.computeMinimumSegmentLength=function(e){for(var t=nl.MAX_VALUE,r=0;r<e.length-1;r++){var n=e[r].distance(e[r+1]);n<t&&(t=n)}return t},ed.prototype.interfaces_=function(){return[]},ed.prototype.getClass=function(){return ed},ed.snap=function(e,t,r){var n=new Array(2).fill(null),i=new ed(e);n[0]=i.snapTo(t,r);var o=new ed(t);return n[1]=o.snapTo(n[0],r),n},ed.computeOverlaySnapTolerance=function(){if(1===arguments.length){var e=arguments[0],t=ed.computeSizeBasedSnapTolerance(e),r=e.getPrecisionModel();if(r.getType()===yc.FIXED){var n=1/r.getScale()*2/1.415;n>t&&(t=n)}return t}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(ed.computeOverlaySnapTolerance(i),ed.computeOverlaySnapTolerance(o))}},ed.computeSizeBasedSnapTolerance=function(e){var t=e.getEnvelopeInternal();return Math.min(t.getHeight(),t.getWidth())*ed.SNAP_PRECISION_FACTOR},ed.snapToSelf=function(e,t,r){return new ed(e).snapToSelf(t,r)},td.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ed,td);var rd=function(e){function t(t,r,n){e.call(this),this._snapTolerance=t||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(e,t){var r=new $p(e,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(t)},t.prototype.transformCoordinates=function(e,t){var r=e.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},nd.prototype.add=function(e){var t=nl.doubleToLongBits(e);return this._isFirst?(this._commonBits=t,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(t)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,t),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var e=arguments[0],t=nl.longBitsToDouble(e),r=nl.toBinaryString(e),n="0000000000000000000000000000000000000000000000000000000000000000"+r,i=n.substring(n.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+t+" ]";return o}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(e,t){return 0!=(e&1<<t)?1:0},nd.signExpBits=function(e){return e>>52},nd.zeroLowerBits=function(e,t){return e&~((1<<t)-1)},nd.numCommonMostSigMantissaBits=function(e,t){for(var r=0,n=52;n>=0;n--){if(nd.getBit(e,n)!==nd.getBit(t,n))return r;r++}return 52};var id=function(){this._commonCoord=null,this._ccFilter=new ad},od={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};id.prototype.addCommonBits=function(e){var t=new sd(this._commonCoord);e.apply(t),e.geometryChanged()},id.prototype.removeCommonBits=function(e){if(0===this._commonCoord.x&&0===this._commonCoord.y)return e;var t=new ll(this._commonCoord);t.x=-t.x,t.y=-t.y;var r=new sd(t);return e.apply(r),e.geometryChanged(),e},id.prototype.getCommonCoordinate=function(){return this._commonCoord},id.prototype.add=function(e){e.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},od.CommonCoordinateFilter.get=function(){return ad},od.Translater.get=function(){return sd},Object.defineProperties(id,od);var ad=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};ad.prototype.filter=function(e){this._commonBitsX.add(e.x),this._commonBitsY.add(e.y)},ad.prototype.getCommonCoordinate=function(){return new ll(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ad.prototype.interfaces_=function(){return[Kl]},ad.prototype.getClass=function(){return ad};var sd=function(){this.trans=null;var e=arguments[0];this.trans=e};sd.prototype.filter=function(e,t){var r=e.getOrdinate(t,0)+this.trans.x,n=e.getOrdinate(t,1)+this.trans.y;e.setOrdinate(t,0,r),e.setOrdinate(t,1,n)},sd.prototype.isDone=function(){return!1},sd.prototype.isGeometryChanged=function(){return!0},sd.prototype.interfaces_=function(){return[Bf]},sd.prototype.getClass=function(){return sd};var ud=function(e,t){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=e,this._geom[1]=t,this.computeSnapTolerance()};ud.prototype.selfSnap=function(e){return new ed(e).snapTo(e,this._snapTolerance)},ud.prototype.removeCommonBits=function(e){this._cbr=new id,this._cbr.add(e[0]),this._cbr.add(e[1]);var t=new Array(2).fill(null);return t[0]=this._cbr.removeCommonBits(e[0].copy()),t[1]=this._cbr.removeCommonBits(e[1].copy()),t},ud.prototype.prepareResult=function(e){return this._cbr.addCommonBits(e),e},ud.prototype.getResultGeometry=function(e){var t=this.snap(this._geom),r=Md.overlayOp(t[0],t[1],e);return this.prepareResult(r)},ud.prototype.checkValid=function(e){e.isValid()||Tl.out.println("Snapped geometry is invalid")},ud.prototype.computeSnapTolerance=function(){this._snapTolerance=ed.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ud.prototype.snap=function(e){var t=this.removeCommonBits(e);return ed.snap(t[0],t[1],this._snapTolerance)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(e,t,r){return new ud(e,t).getResultGeometry(r)},ud.union=function(e,t){return ud.overlayOp(e,t,Md.UNION)},ud.intersection=function(e,t){return ud.overlayOp(e,t,Md.INTERSECTION)},ud.symDifference=function(e,t){return ud.overlayOp(e,t,Md.SYMDIFFERENCE)},ud.difference=function(e,t){return ud.overlayOp(e,t,Md.DIFFERENCE)};var ld=function(e,t){this._geom=new Array(2).fill(null),this._geom[0]=e,this._geom[1]=t};ld.prototype.getResultGeometry=function(e){var t=null,r=!1,n=null;try{t=Md.overlayOp(this._geom[0],this._geom[1],e);r=!0}catch(e){if(!(e instanceof Bl))throw e;n=e}if(!r)try{t=ud.overlayOp(this._geom[0],this._geom[1],e)}catch(e){throw e instanceof Bl?n:e}return t},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld},ld.overlayOp=function(e,t,r){return new ld(e,t).getResultGeometry(r)},ld.union=function(e,t){return ld.overlayOp(e,t,Md.UNION)},ld.intersection=function(e,t){return ld.overlayOp(e,t,Md.INTERSECTION)},ld.symDifference=function(e,t){return ld.overlayOp(e,t,Md.SYMDIFFERENCE)},ld.difference=function(e,t){return ld.overlayOp(e,t,Md.DIFFERENCE)};var fd=function(){this.mce=null,this.chainIndex=null;var e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t};fd.prototype.computeIntersections=function(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var cd=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],r=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=n,this._xValue=i,this._obj=o}},hd={INSERT:{configurable:!0},DELETE:{configurable:!0}};cd.prototype.isDelete=function(){return this._eventType===cd.DELETE},cd.prototype.setDeleteEventIndex=function(e){this._deleteEventIndex=e},cd.prototype.getObject=function(){return this._obj},cd.prototype.compareTo=function(e){var t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},cd.prototype.getInsertEvent=function(){return this._insertEvent},cd.prototype.isInsert=function(){return this._eventType===cd.INSERT},cd.prototype.isSameLabel=function(e){return null!==this._label&&this._label===e._label},cd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},cd.prototype.interfaces_=function(){return[ol]},cd.prototype.getClass=function(){return cd},hd.INSERT.get=function(){return 1},hd.DELETE.get=function(){return 2},Object.defineProperties(cd,hd);var pd=function(){};pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd};var dd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[0],t=arguments[1],r=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=r};dd.prototype.isTrivialIntersection=function(e,t,r,n){if(e===r&&1===this._li.getIntersectionNum()){if(dd.isAdjacentSegments(t,n))return!0;if(e.isClosed()){var i=e.getNumPoints()-1;if(0===t&&n===i||0===n&&t===i)return!0}}return!1},dd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},dd.prototype.setIsDoneIfProperInt=function(e){this._isDoneWhenProperInt=e},dd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},dd.prototype.isBoundaryPointInternal=function(e,t){for(var r=t.iterator();r.hasNext();){var n=r.next().getCoordinate();if(e.isIntersection(n))return!0}return!1},dd.prototype.hasProperIntersection=function(){return this._hasProper},dd.prototype.hasIntersection=function(){return this._hasIntersection},dd.prototype.isDone=function(){return this._isDone},dd.prototype.isBoundaryPoint=function(e,t){return null!==t&&(!!this.isBoundaryPointInternal(e,t[0])||!!this.isBoundaryPointInternal(e,t[1]))},dd.prototype.setBoundaryNodes=function(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t},dd.prototype.addIntersections=function(e,t,r,n){if(e===r&&t===n)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.isAdjacentSegments=function(e,t){return 1===Math.abs(e-t)};var vd=function(e){function t(){e.call(this),this.events=new cf,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){ih.sort(this.events);for(var e=0;e<this.events.size();e++){var t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}},t.prototype.computeIntersections=function(){var e=this;if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var r=0;r<this.events.size();r++){var n=e.events.get(r);if(n.isInsert()&&e.processOverlaps(r,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof dd&&vl(arguments[0],lf)&&vl(arguments[1],lf)){var i=arguments[0],o=arguments[1],a=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(a)}else if("boolean"==typeof arguments[2]&&vl(arguments[0],lf)&&arguments[1]instanceof dd){var s=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(u)}},t.prototype.addEdge=function(e,t){for(var r=e.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new fd(r,i),a=new cd(t,r.getMinX(i),o);this.events.add(a),this.events.add(new cd(r.getMaxX(i),a))}},t.prototype.processOverlaps=function(e,t,r,n){for(var i=r.getObject(),o=e;o<t;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();r.isSameLabel(a)||(i.computeIntersections(s,n),this.nOverlaps++)}}},t.prototype.addEdges=function(){var e=this;if(1===arguments.length)for(var t=arguments[0],r=t.iterator();r.hasNext();){var n=r.next();e.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.iterator();a.hasNext();){var s=a.next();e.addEdge(s,o)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pd),yd=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},gd={NodeComparator:{configurable:!0}};yd.prototype.getMin=function(){return this._min},yd.prototype.intersects=function(e,t){return!(this._min>t||this._max<e)},yd.prototype.getMax=function(){return this._max},yd.prototype.toString=function(){return Fl.toLineString(new ll(this._min,0),new ll(this._max,0))},yd.prototype.interfaces_=function(){return[]},yd.prototype.getClass=function(){return yd},gd.NodeComparator.get=function(){return md},Object.defineProperties(yd,gd);var md=function(){};md.prototype.compare=function(e,t){var r=e,n=t,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},md.prototype.interfaces_=function(){return[sl]},md.prototype.getClass=function(){return md};var _d=function(e){function t(){e.call(this),this._item=null;var t=arguments[0],r=arguments[1],n=arguments[2];this._min=t,this._max=r,this._item=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(e,t,r){if(!this.intersects(e,t))return null;r.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yd),bd=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var t=arguments[0],r=arguments[1];this._node1=t,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)},t.prototype.query=function(e,t,r){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,r),null!==this._node2&&this._node2.query(e,t,r)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(yd),Sd=function(){this._leaves=new cf,this._root=null,this._level=0};Sd.prototype.buildTree=function(){ih.sort(this._leaves,new yd.NodeComparator);for(var e=this._leaves,t=null,r=new cf;;){if(this.buildLevel(e,r),1===r.size())return r.get(0);t=e,e=r,r=t}},Sd.prototype.insert=function(e,t,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _d(e,t,r))},Sd.prototype.query=function(e,t,r){this.init(),this._root.query(e,t,r)},Sd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Sd.prototype.printNode=function(e){Tl.out.println(Fl.toLineString(new ll(e._min,this._level),new ll(e._max,this._level)))},Sd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Sd.prototype.buildLevel=function(e,t){this._level++,t.clear();for(var r=0;r<e.size();r+=2){var n=e.get(r);if(null===(r+1<e.size()?e.get(r):null))t.add(n);else{var i=new bd(e.get(r),e.get(r+1));t.add(i)}}},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var xd=function(){this._items=new cf};xd.prototype.visitItem=function(e){this._items.add(e)},xd.prototype.getItems=function(){return this._items},xd.prototype.interfaces_=function(){return[eh]},xd.prototype.getClass=function(){return xd};var Cd=function(){this._index=null;var e=arguments[0];if(!vl(e,tc))throw new rl("Argument must be Polygonal");this._index=new Id(e)},wd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Cd.prototype.locate=function(e){var t=new Hl(e),r=new Pd(t);return this._index.query(e.y,e.y,r),t.getLocation()},Cd.prototype.interfaces_=function(){return[zh]},Cd.prototype.getClass=function(){return Cd},wd.SegmentVisitor.get=function(){return Pd},wd.IntervalIndexedGeometry.get=function(){return Id},Object.defineProperties(Cd,wd);var Pd=function(){this._counter=null;var e=arguments[0];this._counter=e};Pd.prototype.visitItem=function(e){var t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))},Pd.prototype.interfaces_=function(){return[eh]},Pd.prototype.getClass=function(){return Pd};var Id=function(){this._index=new Sd;var e=arguments[0];this.init(e)};Id.prototype.init=function(e){for(var t=Lp.getLines(e).iterator();t.hasNext();){var r=t.next().getCoordinates();this.addLine(r)}},Id.prototype.addLine=function(e){for(var t=1;t<e.length;t++){var r=new _h(e[t-1],e[t]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},Id.prototype.query=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],r=new xd;return this._index.query(e,t,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},Id.prototype.interfaces_=function(){return[]},Id.prototype.getClass=function(){return Id};var Ed=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new vc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Tp,2===arguments.length){var t=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;this._argIndex=t,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(e,r){var n=this._nodes.addNode(r).getLabel(),i=1;n.getLocation(e,Lc.ON)===pl.BOUNDARY&&i++;var o=t.determineBoundary(this._boundaryNodeRule,i);n.setLocation(e,o)},t.prototype.computeSelfNodes=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new dd(r,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ic||this._parentGeom instanceof rc||this._parentGeom instanceof oc,u=n||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},t.prototype.computeSplitEdges=function(e){for(var t=this._edges.iterator();t.hasNext();){t.next().eiList.addSplitEdges(e)}},t.prototype.computeEdgeIntersections=function(e,t,r){var n=new dd(t,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,n),n},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof ec){var e=arguments[0],t=e.getCoordinate();this.insertPoint(this._argIndex,t,pl.INTERIOR)}else if(arguments[0]instanceof ll){var r=arguments[0];this.insertPoint(this._argIndex,r,pl.INTERIOR)}},t.prototype.addPolygon=function(e){this.addPolygonRing(e.getExteriorRing(),pl.EXTERIOR,pl.INTERIOR);for(var t=0;t<e.getNumInteriorRing();t++){var r=e.getInteriorRingN(t);this.addPolygonRing(r,pl.INTERIOR,pl.EXTERIOR)}},t.prototype.addEdge=function(e){this.insertEdge(e);var t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],pl.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],pl.BOUNDARY)},t.prototype.addLineString=function(e){var t=df.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;var r=new ap(t,new Fc(this._argIndex,pl.INTERIOR));this._lineEdgeMap.put(e,r),this.insertEdge(r),Ul.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null),r=0,n=e.iterator();n.hasNext();){var i=n.next();t[r++]=i.getCoordinate().copy()}return t},t.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(e,t,r){if(this.isBoundaryNode(e,t))return null;r===pl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,r)},t.prototype.addPolygonRing=function(e,t,r){if(e.isEmpty())return null;var n=df.removeRepeatedPoints(e.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=t,o=r;Wl.isCCW(n)&&(i=r,o=t);var a=new ap(n,new Fc(this._argIndex,pl.BOUNDARY,i,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],pl.BOUNDARY)},t.prototype.insertPoint=function(e,t,r){var n=this._nodes.addNode(t),i=n.getLabel();null===i?n._label=new Fc(e,r):i.setLocation(e,r)},t.prototype.createEdgeSetIntersector=function(){return new vd},t.prototype.addSelfIntersectionNodes=function(e){for(var t=this._edges.iterator();t.hasNext();)for(var r=t.next(),n=r.getLabel().getLocation(e),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(e,o.coord,n)}},t.prototype.add=function(){if(1!==arguments.length)return e.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof oc&&(this._useBoundaryDeterminationRule=!1),t instanceof rc)this.addPolygon(t);else if(t instanceof Kf)this.addLineString(t);else if(t instanceof ec)this.addPoint(t);else if(t instanceof nc)this.addCollection(t);else if(t instanceof Uf)this.addCollection(t);else if(t instanceof oc)this.addCollection(t);else{if(!(t instanceof jf))throw new Error(t.getClass().getName());this.addCollection(t)}},t.prototype.addCollection=function(e){for(var t=0;t<e.getNumGeometries();t++){var r=e.getGeometryN(t);this.add(r)}},t.prototype.locate=function(e){return vl(this._parentGeom,tc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Cd(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)},t.prototype.findEdge=function(){if(1===arguments.length){var t=arguments[0];return this._lineEdgeMap.get(t)}return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(e,t){return e.isInBoundary(t)?pl.BOUNDARY:pl.INTERIOR},t}(Yc),Ld=function(){if(this._li=new ql,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ed(0,e)}else if(2===arguments.length){var t=arguments[0],r=arguments[1],n=$l.OGC_SFS_BOUNDARY_RULE;t.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ed(0,t,n),this._arg[1]=new Ed(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ed(0,i,a),this._arg[1]=new Ed(1,o,a)}};Ld.prototype.getArgGeometry=function(e){return this._arg[e].getGeometry()},Ld.prototype.setComputationPrecision=function(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)},Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld};var Td=function(){};Td.prototype.interfaces_=function(){return[]},Td.prototype.getClass=function(){return Td},Td.map=function(){if(arguments[0]instanceof Yl&&vl(arguments[1],Td.MapOp)){for(var e=arguments[0],t=arguments[1],r=new cf,n=0;n<e.getNumGeometries();n++){var i=t.map(e.getGeometryN(n));null!==i&&r.add(i)}return e.getFactory().buildGeometry(r)}if(vl(arguments[0],af)&&vl(arguments[1],Td.MapOp)){for(var o=arguments[0],a=arguments[1],s=new cf,u=o.iterator();u.hasNext();){var l=u.next(),f=a.map(l);null!==f&&s.add(f)}return s}},Td.MapOp=function(){};var Md=function(e){function t(){var t=arguments[0],r=arguments[1];e.call(this,t,r),this._ptLocator=new Tp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jh,this._resultPolyList=new cf,this._resultLineList=new cf,this._resultPointList=new cf,this._graph=new Yc(new Yh),this._geomFact=t.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var r=t.getLabel(),n=e.getLabel();t.isPointwiseEqual(e)||(n=new Fc(e.getLabel())).flip();var i=t.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(e)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var t=e.next(),r=t.getSym();t.isInResult()&&r.isInResult()&&(t.setInResult(!1),r.setInResult(!1))}},t.prototype.isCoveredByLA=function(e){return!!this.isCovered(e,this._resultLineList)||!!this.isCovered(e,this._resultPolyList)},t.prototype.computeGeometry=function(e,r,n,i){var o=new cf;return o.addAll(e),o.addAll(r),o.addAll(n),o.isEmpty()?t.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},t.prototype.mergeSymLabels=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){e.next().getEdges().mergeSymLabels()}},t.prototype.isCovered=function(e,t){for(var r=t.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(e,n)!==pl.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var e=new cf,t=this._edgeList.iterator();t.hasNext();){var r=t.next();r.isCollapsed()&&(t.remove(),e.add(r.getCollapsedEdge()))}this._edgeList.addAll(e)},t.prototype.updateNodeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),r=t.getEdges().getLabel();t.getLabel().merge(r)}},t.prototype.getResultGeometry=function(e){return this.computeOverlay(e),this._resultGeom},t.prototype.insertUniqueEdges=function(e){for(var t=e.iterator();t.hasNext();){var r=t.next();this.insertUniqueEdge(r)}},t.prototype.computeOverlay=function(e){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var t=new cf;this._arg[0].computeSplitEdges(t),this._arg[1].computeSplitEdges(t),this.insertUniqueEdges(t),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Xp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(e),this.cancelDuplicateResultEdges();var r=new Qc(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Qp(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(e);var i=new Jp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(e),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,e)},t.prototype.labelIncompleteNode=function(e,t){var r=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setLocation(t,r)},t.prototype.copyPoints=function(e){for(var t=this._arg[e].getNodeIterator();t.hasNext();){var r=t.next();this._graph.addNode(r.getCoordinate()).setLabel(e,r.getLabel().getLocation(e))}},t.prototype.findResultAreaEdges=function(e){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&t.isResultOfOp(i.getLocation(0,Lc.RIGHT),i.getLocation(1,Lc.RIGHT),e)&&n.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var e=this._edgeList.iterator();e.hasNext();){var t=e.next(),r=t.getLabel(),n=t.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(Ul.isTrue(!n.isNull(i,Lc.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,Lc.LEFT,n.getLocation(i,Lc.LEFT)),Ul.isTrue(!n.isNull(i,Lc.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,Lc.RIGHT,n.getLocation(i,Lc.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){e.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var e=this._graph.getNodes().iterator();e.hasNext();){var t=e.next(),r=t.getLabel();t.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(t,0):this.labelIncompleteNode(t,1)),t.getEdges().updateLabelling(r)}},t.prototype.isCoveredByA=function(e){return!!this.isCovered(e,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ld);Md.overlayOp=function(e,t,r){return new Md(e,t).getResultGeometry(r)},Md.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return Md.createEmptyResult(Md.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var r=t;return Yp.map(e,{interfaces_:function(){return[Td.MapOp]},map:function(e){return e.intersection(r)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ld.overlayOp(e,t,Md.INTERSECTION)},Md.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Md.createEmptyResult(Md.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ld.overlayOp(e,t,Md.SYMDIFFERENCE)},Md.resultDimension=function(e,t,r){var n=t.getDimension(),i=r.getDimension(),o=-1;switch(e){case Md.INTERSECTION:o=Math.min(n,i);break;case Md.UNION:o=Math.max(n,i);break;case Md.DIFFERENCE:o=n;break;case Md.SYMDIFFERENCE:o=Math.max(n,i)}return o},Md.createEmptyResult=function(e,t,r,n){var i=null;switch(Md.resultDimension(e,t,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},Md.difference=function(e,t){return e.isEmpty()?Md.createEmptyResult(Md.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ld.overlayOp(e,t,Md.DIFFERENCE))},Md.isResultOfOp=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],r=e.getLocation(0),n=e.getLocation(1);return Md.isResultOfOp(r,n,t)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===pl.BOUNDARY&&(i=pl.INTERIOR),o===pl.BOUNDARY&&(o=pl.INTERIOR),a){case Md.INTERSECTION:return i===pl.INTERIOR&&o===pl.INTERIOR;case Md.UNION:return i===pl.INTERIOR||o===pl.INTERIOR;case Md.DIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR;case Md.SYMDIFFERENCE:return i===pl.INTERIOR&&o!==pl.INTERIOR||i!==pl.INTERIOR&&o===pl.INTERIOR}return!1}},Md.INTERSECTION=1,Md.UNION=2,Md.DIFFERENCE=3,Md.SYMDIFFERENCE=4;var Od=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Tp,this._seg=new _h;var e=arguments[0],t=arguments[1];this._g=e,this._boundaryDistanceTolerance=t,this._linework=this.extractLinework(e)};Od.prototype.isWithinToleranceOfBoundary=function(e){for(var t=this,r=0;r<this._linework.getNumGeometries();r++)for(var n=t._linework.getGeometryN(r).getCoordinateSequence(),i=0;i<n.size()-1;i++){if(n.getCoordinate(i,t._seg.p0),n.getCoordinate(i+1,t._seg.p1),t._seg.distance(e)<=t._boundaryDistanceTolerance)return!0}return!1},Od.prototype.getLocation=function(e){return this.isWithinToleranceOfBoundary(e)?pl.BOUNDARY:this._ptLocator.locate(e,this._g)},Od.prototype.extractLinework=function(e){var t=new Ad;e.apply(t);var r=t.getLinework(),n=bc.toLineStringArray(r);return e.getFactory().createMultiLineString(n)},Od.prototype.interfaces_=function(){return[]},Od.prototype.getClass=function(){return Od};var Ad=function(){this._linework=null,this._linework=new cf};Ad.prototype.getLinework=function(){return this._linework},Ad.prototype.filter=function(e){if(e instanceof rc){var t=e;this._linework.add(t.getExteriorRing());for(var r=0;r<t.getNumInteriorRing();r++)this._linework.add(t.getInteriorRingN(r))}},Ad.prototype.interfaces_=function(){return[Ff]},Ad.prototype.getClass=function(){return Ad};var Nd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var e=arguments[0];this._g=e};Nd.prototype.extractPoints=function(e,t,r){for(var n=e.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],t,r)},Nd.prototype.setSidesToGenerate=function(e,t){this._doLeft=e,this._doRight=t},Nd.prototype.getPoints=function(e){for(var t=new cf,r=Lp.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,e,t)}return t},Nd.prototype.computeOffsetPoints=function(e,t,r,n){var i=t.x-e.x,o=t.y-e.y,a=Math.sqrt(i*i+o*o),s=r*i/a,u=r*o/a,l=(t.x+e.x)/2,f=(t.y+e.y)/2;if(this._doLeft){var c=new ll(l-u,f+s);n.add(c)}if(this._doRight){var h=new ll(l+u,f-s);n.add(h)}},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var Rd=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new cf;var t=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,r),this._geom=[t,r,n],this._locFinder=[new Od(this._geom[0],this._boundaryDistanceTolerance),new Od(this._geom[1],this._boundaryDistanceTolerance),new Od(this._geom[2],this._boundaryDistanceTolerance)]},kd={TOLERANCE:{configurable:!0}};Rd.prototype.reportResult=function(e,t,r){Tl.out.println("Overlay result invalid - A:"+pl.toLocationSymbol(t[0])+" B:"+pl.toLocationSymbol(t[1])+" expected:"+(r?"i":"e")+" actual:"+pl.toLocationSymbol(t[2]))},Rd.prototype.isValid=function(e){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var t=this.checkValid(e);return t},Rd.prototype.checkValid=function(){var e=this;if(1===arguments.length){for(var t=arguments[0],r=0;r<this._testCoords.size();r++){var n=e._testCoords.get(r);if(!e.checkValid(t,n))return e._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Rd.hasLocation(this._location,pl.BOUNDARY)||this.isValidResult(i,this._location)}},Rd.prototype.addTestPts=function(e){var t=new Nd(e);this._testCoords.addAll(t.getPoints(5*this._boundaryDistanceTolerance))},Rd.prototype.isValidResult=function(e,t){var r=Md.isResultOfOp(t[0],t[1],e),n=!(r^t[2]===pl.INTERIOR);return n||this.reportResult(e,t,r),n},Rd.prototype.getInvalidLocation=function(){return this._invalidLocation},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd},Rd.hasLocation=function(e,t){for(var r=0;r<3;r++)if(e[r]===t)return!0;return!1},Rd.computeBoundaryDistanceTolerance=function(e,t){return Math.min(ed.computeSizeBasedSnapTolerance(e),ed.computeSizeBasedSnapTolerance(t))},Rd.isValid=function(e,t,r,n){return new Rd(e,t,n).isValid(r)},kd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Rd,kd);var Dd=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};Dd.prototype.extractElements=function(e,t){if(null===e)return null;for(var r=0;r<e.getNumGeometries();r++){var n=e.getGeometryN(r);this._skipEmpty&&n.isEmpty()||t.add(n)}},Dd.prototype.combine=function(){for(var e=new cf,t=this._inputGeoms.iterator();t.hasNext();){var r=t.next();this.extractElements(r,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.combine=function(){if(1===arguments.length){var e=arguments[0],t=new Dd(e);return t.combine()}if(2===arguments.length){var r=arguments[0],n=arguments[1],i=new Dd(Dd.createList(r,n));return i.combine()}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=new Dd(Dd.createList(o,a,s));return u.combine()}},Dd.extractFactory=function(e){return e.isEmpty()?null:e.iterator().next().getFactory()},Dd.createList=function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],r=new cf;return r.add(e),r.add(t),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],a=new cf;return a.add(n),a.add(i),a.add(o),a}};var Fd=function(){this._inputPolys=null,this._geomFactory=null;var e=arguments[0];this._inputPolys=e,null===this._inputPolys&&(this._inputPolys=new cf)},Bd={STRTREE_NODE_CAPACITY:{configurable:!0}};Fd.prototype.reduceToGeometries=function(e){for(var t=new cf,r=e.iterator();r.hasNext();){var n=r.next(),i=null;vl(n,lf)?i=this.unionTree(n):n instanceof Yl&&(i=n),t.add(i)}return t},Fd.prototype.extractByEnvelope=function(e,t,r){for(var n=new cf,i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getEnvelopeInternal().intersects(e)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},Fd.prototype.unionOptimized=function(e,t){var r=e.getEnvelopeInternal(),n=t.getEnvelopeInternal();if(!r.intersects(n))return Dd.combine(e,t);if(e.getNumGeometries()<=1&&t.getNumGeometries()<=1)return this.unionActual(e,t);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(e,t,i)},Fd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var e=new fh(Fd.STRTREE_NODE_CAPACITY),t=this._inputPolys.iterator();t.hasNext();){var r=t.next();e.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=e.itemsTree();return this.unionTree(n)},Fd.prototype.binaryUnion=function(){if(1===arguments.length){var e=arguments[0];return this.binaryUnion(e,0,e.size())}if(3===arguments.length){var t=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=Fd.getGeometry(t,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(Fd.getGeometry(t,r),Fd.getGeometry(t,r+1));var o=Math.trunc((n+r)/2),a=this.binaryUnion(t,r,o),s=this.binaryUnion(t,o,n);return this.unionSafe(a,s)}},Fd.prototype.repeatedUnion=function(e){for(var t=null,r=e.iterator();r.hasNext();){var n=r.next();t=null===t?n.copy():t.union(n)}return t},Fd.prototype.unionSafe=function(e,t){return null===e&&null===t?null:null===e?t.copy():null===t?e.copy():this.unionOptimized(e,t)},Fd.prototype.unionActual=function(e,t){return Fd.restrictToPolygons(e.union(t))},Fd.prototype.unionTree=function(e){var t=this.reduceToGeometries(e);return this.binaryUnion(t)},Fd.prototype.unionUsingEnvelopeIntersection=function(e,t,r){var n=new cf,i=this.extractByEnvelope(r,e,n),o=this.extractByEnvelope(r,t,n),a=this.unionActual(i,o);return n.add(a),Dd.combine(n)},Fd.prototype.bufferUnion=function(){if(1===arguments.length){var e=arguments[0],t=e.get(0).getFactory(),r=t.buildGeometry(e),n=r.buffer(0);return n}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getFactory(),s=a.createGeometryCollection([i,o]),u=s.buffer(0);return u}},Fd.prototype.interfaces_=function(){return[]},Fd.prototype.getClass=function(){return Fd},Fd.restrictToPolygons=function(e){if(vl(e,tc))return e;var t=Ep.getPolygons(e);return 1===t.size()?t.get(0):e.getFactory().createMultiPolygon(bc.toPolygonArray(t))},Fd.getGeometry=function(e,t){return t>=e.size()?null:e.get(t)},Fd.union=function(e){return new Fd(e).union()},Bd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Fd,Bd);var jd=function(){};function Ud(){return new Gd}function Gd(){this.reset()}jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd},jd.union=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return Md.createEmptyResult(Md.UNION,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),ld.overlayOp(e,t,Md.UNION)},Gd.prototype={constructor:Gd,reset:function(){this.s=this.t=0},add:function(e){qd(Vd,e,this.t),qd(this,Vd.s,this.s),this.s?this.t+=Vd.t:this.s=Vd.t},valueOf:function(){return this.s}};var Vd=new Gd;function qd(e,t,r){var n=e.s=t+r,i=n-t,o=n-i;e.t=t-o+(r-i)}var zd=1e-6,Hd=Math.PI,Wd=Hd/2,Zd=Hd/4,Xd=2*Hd,Yd=180/Hd,Qd=Hd/180,Jd=Math.abs,Kd=Math.atan,$d=Math.atan2,ev=Math.cos,tv=Math.sin,rv=Math.sqrt;function nv(e){return e>1?0:e<-1?Hd:Math.acos(e)}function iv(e){return e>1?Wd:e<-1?-Wd:Math.asin(e)}function ov(){}function av(e,t){e&&uv.hasOwnProperty(e.type)&&uv[e.type](e,t)}var sv={Feature:function(e,t){av(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)av(r[n].geometry,t)}},uv={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){lv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)lv(r[n],t,0)},Polygon:function(e,t){fv(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)fv(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)av(r[n],t)}};function lv(e,t,r){var n,i=-1,o=e.length-r;for(t.lineStart();++i<o;)n=e[i],t.point(n[0],n[1],n[2]);t.lineEnd()}function fv(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)lv(e[r],t,1);t.polygonEnd()}Ud(),Ud();function cv(e){return[$d(e[1],e[0]),iv(e[2])]}function hv(e){var t=e[0],r=e[1],n=ev(r);return[n*ev(t),n*tv(t),tv(r)]}function pv(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function dv(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vv(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yv(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function gv(e){var t=rv(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}Ud();function mv(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,n){return(r=t.invert(r,n))&&e.invert(r[0],r[1])}),r}function _v(e,t){return[e>Hd?e-Xd:e<-Hd?e+Xd:e,t]}function bv(e){return function(t,r){return[(t+=e)>Hd?t-Xd:t<-Hd?t+Xd:t,r]}}function Sv(e){var t=bv(e);return t.invert=bv(-e),t}function xv(e,t){var r=ev(e),n=tv(e),i=ev(t),o=tv(t);function a(e,t){var a=ev(t),s=ev(e)*a,u=tv(e)*a,l=tv(t),f=l*r+s*n;return[$d(u*i-f*o,s*r-l*n),iv(f*i+u*o)]}return a.invert=function(e,t){var a=ev(t),s=ev(e)*a,u=tv(e)*a,l=tv(t),f=l*i-u*o;return[$d(u*i+l*o,s*r+f*n),iv(f*r-s*n)]},a}function Cv(e,t){(t=hv(t))[0]-=e,gv(t);var r=nv(-t[1]);return((-t[2]<0?-r:r)+Xd-zd)%Xd}function wv(){var e,t=[];return{point:function(t,r){e.push([t,r])},lineStart:function(){t.push(e=[])},lineEnd:ov,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}}function Pv(e,t){return Jd(e[0]-t[0])<zd&&Jd(e[1]-t[1])<zd}function Iv(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Ev(e,t,r,n,i){var o,a,s=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,r,n=e[0],a=e[t];if(Pv(n,a)){for(i.lineStart(),o=0;o<t;++o)i.point((n=e[o])[0],n[1]);i.lineEnd()}else s.push(r=new Iv(n,e,null,!0)),u.push(r.o=new Iv(n,null,r,!1)),s.push(r=new Iv(a,e,null,!1)),u.push(r.o=new Iv(a,null,r,!0))}}),s.length){for(u.sort(t),Lv(s),Lv(u),o=0,a=u.length;o<a;++o)u[o].e=r=!r;for(var l,f,c=s[0];;){for(var h=c,p=!0;h.v;)if((h=h.n)===c)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=l.length;o<a;++o)i.point((f=l[o])[0],f[1]);else n(h.x,h.n.x,1,i);h=h.n}else{if(p)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((f=l[o])[0],f[1]);else n(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Lv(e){if(t=e.length){for(var t,r,n=0,i=e[0];++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Tv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}_v.invert=_v;var Mv,Ov;1===(Mv=Tv).length&&(Ov=Mv,Mv=function(e,t){return Tv(Ov(e),t)});function Av(e){for(var t,r,n,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(r=new Array(a);--i>=0;)for(t=(n=e[i]).length;--t>=0;)r[--a]=n[t];return r}var Nv=1e9,Rv=-Nv;function kv(e,t,r,n){function i(i,o){return e<=i&&i<=r&&t<=o&&o<=n}function o(i,o,s,l){var f=0,c=0;if(null==i||(f=a(i,s))!==(c=a(o,s))||u(i,o)<0^s>0)do{l.point(0===f||3===f?e:r,f>1?n:t)}while((f=(f+s+4)%4)!==c);else l.point(o[0],o[1])}function a(n,i){return Jd(n[0]-e)<zd?i>0?0:3:Jd(n[0]-r)<zd?i>0?2:1:Jd(n[1]-t)<zd?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var r=a(e,1),n=a(t,1);return r!==n?r-n:0===r?t[1]-e[1]:1===r?e[0]-t[0]:2===r?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,f,c,h,p,d,v,y,g,m,_=a,b=wv(),S={point:x,lineStart:function(){S.point=C,l&&l.push(f=[]);g=!0,y=!1,d=v=NaN},lineEnd:function(){u&&(C(c,h),p&&y&&b.rejoin(),u.push(b.result()));S.point=x,y&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,i=l.length;r<i;++r)for(var o,a,s=l[r],u=1,f=s.length,c=s[0],h=c[0],p=c[1];u<f;++u)o=h,a=p,h=(c=s[u])[0],p=c[1],a<=n?p>n&&(h-o)*(n-a)>(p-a)*(e-o)&&++t:p<=n&&(h-o)*(n-a)<(p-a)*(e-o)&&--t;return t}(),r=m&&t,i=(u=Av(u)).length;(r||i)&&(a.polygonStart(),r&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Ev(u,s,t,o,a),a.polygonEnd());_=a,u=l=f=null}};function x(e,t){i(e,t)&&_.point(e,t)}function C(o,a){var s=i(o,a);if(l&&f.push([o,a]),g)c=o,h=a,p=s,g=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&y)_.point(o,a);else{var u=[d=Math.max(Rv,Math.min(Nv,d)),v=Math.max(Rv,Math.min(Nv,v))],b=[o=Math.max(Rv,Math.min(Nv,o)),a=Math.max(Rv,Math.min(Nv,a))];!function(e,t,r,n,i,o){var a,s=e[0],u=e[1],l=0,f=1,c=t[0]-s,h=t[1]-u;if(a=r-s,c||!(a>0)){if(a/=c,c<0){if(a<l)return;a<f&&(f=a)}else if(c>0){if(a>f)return;a>l&&(l=a)}if(a=i-s,c||!(a<0)){if(a/=c,c<0){if(a>f)return;a>l&&(l=a)}else if(c>0){if(a<l)return;a<f&&(f=a)}if(a=n-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<f&&(f=a)}return l>0&&(e[0]=s+l*c,e[1]=u+l*h),f<1&&(t[0]=s+f*c,t[1]=u+f*h),!0}}}}}(u,b,e,t,r,n)?s&&(_.lineStart(),_.point(o,a),m=!1):(y||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),m=!1)}d=o,v=a,y=s}return S}}var Dv=Ud();Ud();function Fv(e){return e}Ud(),Ud();var Bv=1/0,jv=Bv,Uv=-Bv,Gv=Uv,Vv={point:function(e,t){e<Bv&&(Bv=e);e>Uv&&(Uv=e);t<jv&&(jv=t);t>Gv&&(Gv=t)},lineStart:ov,lineEnd:ov,polygonStart:ov,polygonEnd:ov,result:function(){var e=[[Bv,jv],[Uv,Gv]];return Uv=Gv=-(jv=Bv=1/0),e}};Ud();function qv(e,t,r,n){return function(i,o){var a,s,u,l=t(o),f=i.invert(n[0],n[1]),c=wv(),h=t(c),p=!1,d={point:v,lineStart:g,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=S,s=[],a=[]},polygonEnd:function(){d.point=v,d.lineStart=g,d.lineEnd=m,s=Av(s);var e=function(e,t){var r=t[0],n=t[1],i=[tv(r),-ev(r),0],o=0,a=0;Dv.reset();for(var s=0,u=e.length;s<u;++s)if(f=(l=e[s]).length)for(var l,f,c=l[f-1],h=c[0],p=c[1]/2+Zd,d=tv(p),v=ev(p),y=0;y<f;++y,h=m,d=b,v=S,c=g){var g=l[y],m=g[0],_=g[1]/2+Zd,b=tv(_),S=ev(_),x=m-h,C=x>=0?1:-1,w=C*x,P=w>Hd,I=d*b;if(Dv.add($d(I*C*tv(w),v*S+I*ev(w))),o+=P?x+C*Xd:x,P^h>=r^m>=r){var E=dv(hv(c),hv(g));gv(E);var L=dv(i,E);gv(L);var T=(P^x>=0?-1:1)*iv(L[2]);(n>T||n===T&&(E[0]||E[1]))&&(a+=P^x>=0?1:-1)}}return(o<-1e-6||o<zd&&Dv<-1e-6)^1&a}(a,f);s.length?(p||(o.polygonStart(),p=!0),Ev(s,Hv,e,r,o)):e&&(p||(o.polygonStart(),p=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function v(t,r){var n=i(t,r);e(t=n[0],r=n[1])&&o.point(t,r)}function y(e,t){var r=i(e,t);l.point(r[0],r[1])}function g(){d.point=y,l.lineStart()}function m(){d.point=v,l.lineEnd()}function _(e,t){u.push([e,t]);var r=i(e,t);h.point(r[0],r[1])}function b(){h.lineStart(),u=[]}function S(){_(u[0][0],u[0][1]),h.lineEnd();var e,t,r,n,i=h.clean(),l=c.result(),f=l.length;if(u.pop(),a.push(u),u=null,f)if(1&i){if((t=(r=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),e=0;e<t;++e)o.point((n=r[e])[0],n[1]);o.lineEnd()}}else f>1&&2&i&&l.push(l.pop().concat(l.shift())),s.push(l.filter(zv))}return d}}function zv(e){return e.length>1}function Hv(e,t){return((e=e.x)[0]<0?e[1]-Wd-zd:Wd-e[1])-((t=t.x)[0]<0?t[1]-Wd-zd:Wd-t[1])}var Wv=qv(function(){return!0},function(e){var t,r=NaN,n=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Hd:-Hd,u=Jd(o-r);Jd(u-Hd)<zd?(e.point(r,n=(n+a)/2>0?Wd:-Wd),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),t=0):i!==s&&u>=Hd&&(Jd(r-i)<zd&&(r-=i*zd),Jd(o-s)<zd&&(o-=s*zd),n=function(e,t,r,n){var i,o,a=tv(e-r);return Jd(a)>zd?Kd((tv(t)*(o=ev(n))*tv(r)-tv(n)*(i=ev(t))*tv(e))/(i*o*a)):(t+n)/2}(r,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),t=0),e.point(r=o,n=a),i=s},lineEnd:function(){e.lineEnd(),r=n=NaN},clean:function(){return 2-t}}},function(e,t,r,n){var i;if(null==e)i=r*Wd,n.point(-Hd,i),n.point(0,i),n.point(Hd,i),n.point(Hd,0),n.point(Hd,-i),n.point(0,-i),n.point(-Hd,-i),n.point(-Hd,0),n.point(-Hd,i);else if(Jd(e[0]-t[0])>zd){var o=e[0]<t[0]?Hd:-Hd;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(t[0],t[1])},[-Hd,-Wd]);function Zv(e,t){var r=ev(e),n=r>0,i=Jd(r)>zd;function o(e,t){return ev(e)*ev(t)>r}function a(e,t,n){var i=[1,0,0],o=dv(hv(e),hv(t)),a=pv(o,o),s=o[0],u=a-s*s;if(!u)return!n&&e;var l=r*a/u,f=-r*s/u,c=dv(i,o),h=yv(i,l);vv(h,yv(o,f));var p=c,d=pv(h,p),v=pv(p,p),y=d*d-v*(pv(h,h)-1);if(!(y<0)){var g=rv(y),m=yv(p,(-d-g)/v);if(vv(m,h),m=cv(m),!n)return m;var _,b=e[0],S=t[0],x=e[1],C=t[1];S<b&&(_=b,b=S,S=_);var w=S-b,P=Jd(w-Hd)<zd;if(!P&&C<x&&(_=x,x=C,C=_),P||w<zd?P?x+C>0^m[1]<(Jd(m[0]-b)<zd?x:C):x<=m[1]&&m[1]<=C:w>Hd^(b<=m[0]&&m[0]<=S)){var I=yv(p,(-d+g)/v);return vv(I,h),[m,cv(I)]}}}function s(t,r){var i=n?e:Hd-e,o=0;return t<-i?o|=1:t>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}return qv(o,function(e){var t,r,u,l,f;return{lineStart:function(){l=u=!1,f=1},point:function(c,h){var p,d=[c,h],v=o(c,h),y=n?v?0:s(c,h):v?s(c+(c<0?Hd:-Hd),h):0;if(!t&&(l=u=v)&&e.lineStart(),v!==u&&(!(p=a(t,d))||Pv(t,p)||Pv(d,p))&&(d[0]+=zd,d[1]+=zd,v=o(d[0],d[1])),v!==u)f=0,v?(e.lineStart(),p=a(d,t),e.point(p[0],p[1])):(p=a(t,d),e.point(p[0],p[1]),e.lineEnd()),t=p;else if(i&&t&&n^v){var g;y&r||!(g=a(d,t,!0))||(f=0,n?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||t&&Pv(t,d)||e.point(d[0],d[1]),t=d,u=v,r=y},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return f|(l&&u)<<1}}},function(r,n,i,o){!function(e,t,r,n,i,o){if(r){var a=ev(t),s=tv(t),u=n*r;null==i?(i=t+n*Xd,o=t-u/2):(i=Cv(a,i),o=Cv(a,o),(n>0?i<o:i>o)&&(i+=n*Xd));for(var l,f=i;n>0?f>o:f<o;f-=u)l=cv([a,-s*ev(f),-s*tv(f)]),e.point(l[0],l[1])}}(o,e,t,i,r,n)},n?[0,-e]:[-Hd,e-Hd])}function Xv(e){return function(t){var r=new Yv;for(var n in e)r[n]=e[n];return r.stream=t,r}}function Yv(){}function Qv(e,t,r){var n=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),function(e,t){e&&sv.hasOwnProperty(e.type)?sv[e.type](e,t):av(e,t)}(r,e.stream(Vv));var a=Vv.result(),s=Math.min(n/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+t[0][0]+(n-s*(a[1][0]+a[0][0]))/2,l=+t[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([u,l])}Yv.prototype={constructor:Yv,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Jv=ev(30*Qd);function Kv(e,t){return+t?function(e,t){function r(n,i,o,a,s,u,l,f,c,h,p,d,v,y){var g=l-n,m=f-i,_=g*g+m*m;if(_>4*t&&v--){var b=a+h,S=s+p,x=u+d,C=rv(b*b+S*S+x*x),w=iv(x/=C),P=Jd(Jd(x)-1)<zd||Jd(o-c)<zd?(o+c)/2:$d(S,b),I=e(P,w),E=I[0],L=I[1],T=E-n,M=L-i,O=m*T-g*M;(O*O/_>t||Jd((g*T+m*M)/_-.5)>.3||a*h+s*p+u*d<Jv)&&(r(n,i,o,a,s,u,E,L,P,b/=C,S/=C,x,v,y),y.point(E,L),r(E,L,P,b,S,x,l,f,c,h,p,d,v,y))}}return function(t){var n,i,o,a,s,u,l,f,c,h,p,d,v={point:y,lineStart:g,lineEnd:_,polygonStart:function(){t.polygonStart(),v.lineStart=b},polygonEnd:function(){t.polygonEnd(),v.lineStart=g}};function y(r,n){r=e(r,n),t.point(r[0],r[1])}function g(){f=NaN,v.point=m,t.lineStart()}function m(n,i){var o=hv([n,i]),a=e(n,i);r(f,c,l,h,p,d,f=a[0],c=a[1],l=n,h=o[0],p=o[1],d=o[2],16,t),t.point(f,c)}function _(){v.point=y,t.lineEnd()}function b(){g(),v.point=S,v.lineEnd=x}function S(e,t){m(n=e,t),i=f,o=c,a=h,s=p,u=d,v.point=m}function x(){r(f,c,l,h,p,d,i,o,n,a,s,u,16,t),v.lineEnd=_,_()}return v}}(e,t):function(e){return Xv({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}(e)}var $v=Xv({point:function(e,t){this.stream.point(e*Qd,t*Qd)}});function ey(e){return function(e){var t,r,n,i,o,a,s,u,l,f,c=150,h=480,p=250,d=0,v=0,y=0,g=0,m=0,_=null,b=Wv,S=null,x=Fv,C=.5,w=Kv(E,C);function P(e){return[(e=o(e[0]*Qd,e[1]*Qd))[0]*c+r,n-e[1]*c]}function I(e){return(e=o.invert((e[0]-r)/c,(n-e[1])/c))&&[e[0]*Yd,e[1]*Yd]}function E(e,i){return[(e=t(e,i))[0]*c+r,n-e[1]*c]}function L(){o=mv(i=function(e,t,r){return(e%=Xd)?t||r?mv(Sv(e),xv(t,r)):Sv(e):t||r?xv(t,r):_v}(y,g,m),t);var e=t(d,v);return r=h-e[0]*c,n=p+e[1]*c,T()}function T(){return l=f=null,P}return P.stream=function(e){return l&&f===e?l:l=$v(b(i,w(x(f=e))))},P.clipAngle=function(e){return arguments.length?(b=+e?Zv(_=e*Qd,6*Qd):(_=null,Wv),T()):_*Yd},P.clipExtent=function(e){return arguments.length?(x=null==e?(S=a=s=u=null,Fv):kv(S=+e[0][0],a=+e[0][1],s=+e[1][0],u=+e[1][1]),T()):null==S?null:[[S,a],[s,u]]},P.scale=function(e){return arguments.length?(c=+e,L()):c},P.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],L()):[h,p]},P.center=function(e){return arguments.length?(d=e[0]%360*Qd,v=e[1]%360*Qd,L()):[d*Yd,v*Yd]},P.rotate=function(e){return arguments.length?(y=e[0]%360*Qd,g=e[1]%360*Qd,m=e.length>2?e[2]%360*Qd:0,L()):[y*Yd,g*Yd,m*Yd]},P.precision=function(e){return arguments.length?(w=Kv(E,C=e*e),T()):rv(C)},P.fitExtent=function(e,t){return Qv(P,e,t)},P.fitSize=function(e,t){return function(e,t,r){return Qv(e,[[0,0],t],r)}(P,e,t)},function(){return t=e.apply(this,arguments),P.invert=t.invert&&I,L()}}(function(){return e})()}var ty=function(e){return function(t,r){var n=ev(t),i=ev(r),o=e(n*i);return[o*i*tv(t),o*tv(r)]}}(function(e){return(e=nv(e))&&e/tv(e)});function ry(){return ey(ty).scale(79.4188).clipAngle(179.999)}function ny(e,t,n,i){var o=e.properties||{},s="Feature"===e.type?e.geometry:e;if("GeometryCollection"===s.type){var u=[];return U(e,function(e){var r=ny(e,t,n,i);r&&u.push(r)}),d(u)}var l=function(e){var t=br(e).geometry.coordinates,n=[-t[0],-t[1]];return ry().rotate(n).scale(r)}(s),f={type:s.type,coordinates:oy(s.coordinates,l)},c=(new Ic).read(f),h=b(S(t,n),"meters"),p=_p.bufferOp(c,h,i);if(!iy((p=(new Ec).write(p)).coordinates))return a({type:p.type,coordinates:ay(p.coordinates,l)},o)}function iy(e){return Array.isArray(e[0])?iy(e[0]):isNaN(e[0])}function oy(e,t){return"object"!=typeof e[0]?t(e):e.map(function(e){return oy(e,t)})}function ay(e,t){return"object"!=typeof e[0]?t.invert(e):e.map(function(e){return ay(e,t)})}function sy(e,t,r){void 0===r&&(r={});var n=ie(e),i=ie(t),o=el.intersection(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?f(o[0],r.properties):g(o,r.properties)}function uy(e,t,r){void 0===r&&(r={});var n=JSON.stringify(r.properties||{}),i=e[0],o=e[1],a=e[2],s=e[3],u=(o+s)/2,l=(i+a)/2,f=2*t/bt([i,u],[a,u],r)*(a-i),c=2*t/bt([l,o],[l,s],r)*(s-o),h=f/2,p=2*h,v=Math.sqrt(3)/2*c,y=a-i,g=s-o,m=3/4*p,_=v,b=(y-p)/(p-h/2),S=Math.floor(b),x=(S*m-h/2-y)/2-h/2+m/2,C=Math.floor((g-v)/v),w=(g-C*v)/2,P=C*v-g>v/2;P&&(w-=v/4);for(var I=[],E=[],L=0;L<6;L++){var T=2*Math.PI/6*L;I.push(Math.cos(T)),E.push(Math.sin(T))}for(var M=[],O=0;O<=S;O++)for(var A=0;A<=C;A++){var N=O%2==1;if((0!==A||!N)&&(0!==A||!P)){var R=O*m+i-x,k=A*_+o+w;if(N&&(k-=v/2),!0===r.triangles)fy([R,k],f/2,c/2,JSON.parse(n),I,E).forEach(function(e){r.mask?sy(r.mask,e)&&M.push(e):M.push(e)});else{var D=ly([R,k],f/2,c/2,JSON.parse(n),I,E);r.mask?sy(r.mask,D)&&M.push(D):M.push(D)}}}return d(M)}function ly(e,t,r,n,i,o){for(var a=[],s=0;s<6;s++){var u=e[0]+t*i[s],l=e[1]+r*o[s];a.push([u,l])}return a.push(a[0].slice()),f([a],n)}function fy(e,t,r,n,i,o){for(var a=[],s=0;s<6;s++){var u=[];u.push(e),u.push([e[0]+t*i[s],e[1]+r*o[s]]),u.push([e[0]+t*i[(s+1)%6],e[1]+r*o[(s+1)%6]]),u.push(e),a.push(f([u],n))}return a}function cy(e){return g(e)}function hy(e){return f(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function py(e,t,r){return void 0===r&&(r={}),function(e,t,r,n){void 0===n&&(n={});for(var i=[],o=e[0],a=e[1],s=e[2],u=e[3],l=t/bt([o,a],[s,a],n)*(s-o),c=r/bt([o,a],[o,u],n)*(u-a),h=s-o,p=u-a,v=Math.floor(h/l),y=Math.floor(p/c),g=(p-y*c)/2,m=o+(h-v*l)/2,_=0;_<v;_++){for(var b=a+g,S=0;S<y;S++){var x=f([[[m,b],[m,b+c],[m+l,b+c],[m+l,b],[m,b]]],n.properties);n.mask?Ta(n.mask,x)&&i.push(x):i.push(x),b+=c}m+=l}return d(i)}(e,t,t,r)}function dy(e,t,r){void 0===r&&(r={});for(var n=[],i=t/bt([e[0],e[1]],[e[2],e[1]],r)*(e[2]-e[0]),o=t/bt([e[0],e[1]],[e[0],e[3]],r)*(e[3]-e[1]),a=0,s=e[0];s<=e[2];){for(var u=0,l=e[1];l<=e[3];){var c=null,h=null;a%2==0&&u%2==0?(c=f([[[s,l],[s,l+o],[s+i,l],[s,l]]],r.properties),h=f([[[s,l+o],[s+i,l+o],[s+i,l],[s,l+o]]],r.properties)):a%2==0&&u%2==1?(c=f([[[s,l],[s+i,l+o],[s+i,l],[s,l]]],r.properties),h=f([[[s,l],[s,l+o],[s+i,l+o],[s,l]]],r.properties)):u%2==0&&a%2==1?(c=f([[[s,l],[s,l+o],[s+i,l+o],[s,l]]],r.properties),h=f([[[s,l],[s+i,l+o],[s+i,l],[s,l]]],r.properties)):u%2==1&&a%2==1&&(c=f([[[s,l],[s,l+o],[s+i,l],[s,l]]],r.properties),h=f([[[s,l+o],[s+i,l+o],[s+i,l],[s,l+o]]],r.properties)),r.mask?(sy(r.mask,c)&&n.push(c),sy(r.mask,h)&&n.push(h)):(n.push(c),n.push(h)),l+=o,u++}a++,s+=i}return d(n)}ty.invert=function(e){return function(t,r){var n=rv(t*t+r*r),i=e(n),o=tv(i),a=ev(i);return[$d(t*o,n*a),iv(n&&r*o/n)]}}(function(e){return e}),t.along=function(e,t,r){void 0===r&&(r={});for(var n=ie(e).coordinates,i=0,o=0;o<n.length&&!(t>=i&&o===n.length-1);o++){if(i>=t){var a=t-i;if(a){var s=_r(n[o],n[o-1])-180;return gr(n[o],a,s,r)}return u(n[o])}i+=bt(n[o],n[o+1],r)}return u(n[n.length-1])},t.angle=function(e,t,r,n){if(void 0===n&&(n={}),!T(n))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var i=e,o=t,a=r,s=C(!0!==n.mercator?_r(i,o):Gi(i,o)),u=C(!0!==n.mercator?_r(a,o):Gi(a,o)),l=Math.abs(s-u);return!0===n.explementary?360-l:l},t.applyFilter=lu,t.area=qn,t.areaFactors=o,t.bbox=J,t.bboxClip=function(e,t){var r=ie(e),n=r.type,i="Feature"===e.type?e.properties:{},o=r.coordinates;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(o=[o]),o.forEach(function(e){!function(e,t,r){var n,i,o,a,s,u=e.length,l=Ni(e[0],t),f=[];for(r||(r=[]),n=1;n<u;n++){for(a=e[n-1],i=o=Ni(s=e[n],t);;){if(!(l|i)){f.push(a),i!==o?(f.push(s),n<u-1&&(r.push(f),f=[])):n===u-1&&f.push(s);break}if(l&i)break;l?l=Ni(a=Ai(a,s,l,t),t):i=Ni(s=Ai(a,s,i,t),t)}l=o}f.length&&r.push(f)}(e,t,a)}),1===a.length?h(a[0],i):v(a,i);case"Polygon":return f(Ri(o,t),i);case"MultiPolygon":return g(o.map(function(e){return Ri(e,t)}),i);default:throw new Error("geometry "+n+" not supported")}},t.bboxPolygon=dr,t.bearing=_r,t.bearingToAngle=C,t.bearingToAzimuth=C,t.bezier=pr,t.bezierSpline=pr,t.booleanClockwise=Zi,t.booleanContains=function(e,t){var r=ie(e),n=ie(t),i=r.type,o=n.type,a=r.coordinates,s=n.coordinates;switch(i){case"Point":switch(o){case"Point":return ma(a,s);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(e,t){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(ma(e.coordinates[r],t.coordinates)){n=!0;break}return n}(r,n);case"MultiPoint":return function(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){for(var i=n[r],o=!1,a=0,s=e.coordinates;a<s.length;a++){if(ma(i,s[a])){o=!0;break}}if(!o)return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Yn(n,r,{ignoreEndVertices:!0});case"LineString":return function(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Yn({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!Yn({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}(r,n);case"MultiPoint":return function(e,t){for(var r=!1,n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(Yn(o,e,{ignoreEndVertices:!0})&&(r=!0),!Yn(o,e))return!1}if(r)return!0;return!1}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return gt(n,r,{ignoreBoundary:!0});case"LineString":return function(e,t){var r=!1,n=0,i=J(e),o=J(t);if(!ga(i,o))return!1;for(;n<t.coordinates.length-1;n++){if(gt({type:"Point",coordinates:_a(t.coordinates[n],t.coordinates[n+1])},e,{ignoreBoundary:!0})){r=!0;break}}return r}(r,n);case"Polygon":return function(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;var r=J(e),n=J(t);if(!ga(r,n))return!1;for(var i=ie(t).coordinates,o=0,a=i;o<a.length;o++)for(var s=0,u=a[o];s<u.length;s++){if(!gt(u[s],e))return!1}return!0}(r,n);case"MultiPoint":return function(e,t){for(var r=0,n=t.coordinates;r<n.length;r++){if(!gt(n[r],e,{ignoreBoundary:!0}))return!1}return!0}(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(e,t){var r=ie(e),n=ie(t),i=r.type,o=n.type;switch(i){case"MultiPoint":switch(o){case"LineString":return ba(r,n);case"Polygon":return xa(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return ba(n,r);case"LineString":return function(e,t){if(An(e,t).features.length>0)for(var r=0;r<e.coordinates.length-1;r++)for(var n=0;n<t.coordinates.length-1;n++){var i=!0;if(0!==n&&n!==t.coordinates.length-2||(i=!1),Ca(e.coordinates[r],e.coordinates[r+1],t.coordinates[n],i))return!0}return!1}(r,n);case"Polygon":return Sa(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return xa(n,r);case"LineString":return Sa(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanDisjoint=pa,t.booleanEqual=function(e,t){return ie(e).type===ie(t).type&&new La({precision:6}).compare(tr(e),tr(t))},t.booleanIntersects=Ta,t.booleanOverlap=function(e,t){var r=ie(e),n=ie(t),i=r.type,o=n.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new La({precision:6}).compare(e,t))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<r.coordinates.length;s++)for(var u=0;u<n.coordinates.length;u++){var l=r.coordinates[s],f=n.coordinates[u];if(l[0]===f[0]&&l[1]===f[1])return!0}return!1;case"LineString":case"MultiLineString":z(e,function(e){z(t,function(t){Bi(e,t).features.length&&a++})});break;case"Polygon":case"MultiPolygon":z(e,function(e){z(t,function(t){An(e,t).features.length&&a++})})}return a>0},t.booleanParallel=function(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");if("LineString"!==za(e,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==za(t,"line2"))throw new Error("line2 must be a LineString");for(var r=Qr(tr(e)).features,n=Qr(tr(t)).features,i=0;i<r.length;i++){var o=r[i].geometry.coordinates;if(!n[i])break;if(!qa(o,n[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=gt,t.booleanPointOnLine=Yn,t.booleanWithin=Jn,t.buffer=function(e,t,r){var n=(r=r||{}).units||"kilometers",i=r.steps||8;if(!e)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===t)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return U(e,function(e){var r=ny(e,t,n,i);r&&o.push(r)}),d(o);case"FeatureCollection":return F(e,function(e){var r=ny(e,t,n,i);r&&F(r,function(e){e&&o.push(e)})}),d(o)}return ny(e,t,n,i)},t.center=br,t.centerMean=Fs,t.centerMedian=function(e,t){if(void 0===t&&(t={}),!T(t=t||{}))throw new Error("options is invalid");var r=t.counter||10;if(!L(r))throw new Error("counter must be a number");var n=t.weight,i=Fs(e,{weight:t.weight}),o=d([]);F(e,function(e){var t;o.features.push(Sr(e,{properties:{weight:null===(t=e.properties)||void 0===t?void 0:t[n]}}))});var a={tolerance:t.tolerance,medianCandidates:[]};return Bs(i.geometry.coordinates,[0,0],o,a,r)},t.centerOfMass=function e(t,r){switch(void 0===r&&(r={}),oe(t)){case"Point":return u(K(t),r.properties);case"Polygon":var n=[];N(t,function(e){n.push(e)});var i,o,a,s,l,f,c,h,p=Sr(t,{properties:r.properties}),d=p.geometry.coordinates,v=0,y=0,g=0,m=n.map(function(e){return[e[0]-d[0],e[1]-d[1]]});for(i=0;i<n.length-1;i++)s=(o=m[i])[0],f=o[1],l=(a=m[i+1])[0],g+=h=s*(c=a[1])-l*f,v+=(s+l)*h,y+=(f+c)*h;if(0===g)return p;var _=1/(6*(.5*g));return u([d[0]+_*v,d[1]+_*y],r.properties);default:var b=yt(t);return b?e(b,{properties:r.properties}):Sr(t,{properties:r.properties})}},t.centroid=Sr,t.circle=mr,t.cleanCoords=tr,t.clone=Pt,t.clusterEach=au,t.clusterReduce=su,t.clusters=hu,t.clustersDbscan=function(e,t,r){void 0===r&&(r={}),!0!==r.mutate&&(e=Pt(e)),r.minPoints=r.minPoints||3;var n=new Ra.DBSCAN,i=n.run(j(e),I(t,r.units),r.minPoints,bt),o=-1;return i.forEach(function(t){o++,t.forEach(function(t){var r=e.features[t];r.properties||(r.properties={}),r.properties.cluster=o,r.properties.dbscan="core"})}),n.noise.forEach(function(t){var r=e.features[t];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"}),e},t.clustersKmeans=function(e,t){void 0===t&&(t={});var r=e.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(r/2)),t.numberOfClusters>r&&(t.numberOfClusters=r),!0!==t.mutate&&(e=Pt(e));var n=j(e),i=n.slice(0,t.numberOfClusters),o=Va(n,t.numberOfClusters,i),a={};return o.centroids.forEach(function(e,t){a[t]=e}),F(e,function(e,t){var r=o.idxs[t];e.properties.cluster=r,e.properties.centroid=a[r]}),e},t.collect=function(e,t,r,n){var i=Ie(6),o=t.features.map(function(e){var t;return{minX:e.geometry.coordinates[0],minY:e.geometry.coordinates[1],maxX:e.geometry.coordinates[0],maxY:e.geometry.coordinates[1],property:null===(t=e.properties)||void 0===t?void 0:t[r]}});return i.load(o),e.features.forEach(function(e){e.properties||(e.properties={});var t=J(e),r=i.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}),o=[];r.forEach(function(t){gt([t.minX,t.minY],e)&&o.push(t.property)}),e.properties[n]=o}),e},t.collectionOf=ne,t.combine=function(e){var t={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return F(e,function(e){var r,n,i,o;switch(null===(o=e.geometry)||void 0===o?void 0:o.type){case"Point":t.MultiPoint.coordinates.push(e.geometry.coordinates),t.MultiPoint.properties.push(e.properties);break;case"MultiPoint":(r=t.MultiPoint.coordinates).push.apply(r,e.geometry.coordinates),t.MultiPoint.properties.push(e.properties);break;case"LineString":t.MultiLineString.coordinates.push(e.geometry.coordinates),t.MultiLineString.properties.push(e.properties);break;case"MultiLineString":(n=t.MultiLineString.coordinates).push.apply(n,e.geometry.coordinates),t.MultiLineString.properties.push(e.properties);break;case"Polygon":t.MultiPolygon.coordinates.push(e.geometry.coordinates),t.MultiPolygon.properties.push(e.properties);break;case"MultiPolygon":(i=t.MultiPolygon.coordinates).push.apply(i,e.geometry.coordinates),t.MultiPolygon.properties.push(e.properties)}}),d(Object.keys(t).filter(function(e){return t[e].coordinates.length}).sort().map(function(e){return a({type:e,coordinates:t[e].coordinates},{collectedProperties:t[e].properties})}))},t.concave=function(e,t){void 0===t&&(t={});var r=t.maxEdge||1/0,n=St(function(e){var t=[],r={};return F(e,function(e){if(e.geometry){var n=e.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,n)||(t.push(e),r[n]=!0)}}),d(t)}(e));if(n.features=n.features.filter(function(e){var n=e.geometry.coordinates[0][0],i=e.geometry.coordinates[0][1],o=e.geometry.coordinates[0][2],a=bt(n,i,t),s=bt(i,o,t),u=bt(n,o,t);return a<=r&&s<=r&&u<=r}),n.features.length<1)return null;var i=er(n);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),a(i)},t.containsNumber=ee,t.convertArea=E,t.convertDistance=I,t.convertLength=I,t.convex=yt,t.coordAll=j,t.coordEach=N,t.coordReduce=R,t.createBins=uu,t.degrees2radians=P,t.degreesToRadians=P,t.destination=gr,t.difference=function(e,t){var r=ie(e),n=ie(t),i=e.properties||{},o=el.difference(r.coordinates,n.coordinates);return 0===o.length?null:1===o.length?f(o[0],i):g(o,i)},t.dissolve=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.propertyName;ne(e,"Polygon","dissolve");var n=[];if(!t.propertyName)return ni(g(el.union.apply(null,e.features.map(function(e){return e.geometry.coordinates}))));var i={};F(e,function(e){Object.prototype.hasOwnProperty.call(i,e.properties[r])||(i[e.properties[r]]=[]),i[e.properties[r]].push(e)});for(var o=Object.keys(i),a=0;a<o.length;a++){var s=g(el.union.apply(null,i[o[a]].map(function(e){return e.geometry.coordinates})));s.properties[r]=o[a],n.push(s)}return ni(d(n))},t.distance=bt,t.distanceToDegrees=x,t.distanceToRadians=S,t.distanceWeight=qs,t.earthRadius=r,t.ellipse=ks,t.envelope=vr,t.explode=xr,t.factors=n,t.feature=a,t.featureCollection=d,t.featureEach=F,t.featureOf=re,t.featureReduce=B,t.filterProperties=cu,t.findPoint=Y,t.findSegment=X,t.flatten=ni,t.flattenEach=V,t.flattenReduce=q,t.flip=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.mutate;if(!e)throw new Error("geojson is required");return!1!==r&&void 0!==r||(e=Pt(e)),N(e,function(e){var t=e[0],r=e[1];e[0]=r,e[1]=t}),e},t.geojsonType=te,t.geomEach=U,t.geomReduce=G,t.geometry=s,t.geometryCollection=m,t.getCluster=ou,t.getCoord=K,t.getCoords=$,t.getGeom=ie,t.getType=oe,t.greatCircle=function(e,t,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;return e=K(e),t=K(t),n=n||{},i=i||100,o=o||10,new mi({x:e[0],y:e[1]},{x:t[0],y:t[1]},n).Arc(i,{offset:o}).json()},t.helpers=A,t.hexGrid=uy,t.inside=gt,t.interpolate=function(e,t,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!e)throw new Error("points is required");if(ne(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var a,s=J(e);switch(n){case"point":case"points":a=ti(s,t,r);break;case"square":case"squares":a=py(s,t,r);break;case"hex":case"hexes":a=uy(s,t,r);break;case"triangle":case"triangles":a=dy(s,t,r);break;default:throw new Error("invalid gridType")}var u=[];return F(a,function(t){var a=0,s=0;F(e,function(e){var u,l=bt("point"===n?t:Sr(t),e,r);if(void 0!==i&&(u=e.properties[i]),void 0===u&&(u=e.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(a=u);var f=1/Math.pow(l,o);s+=f,a+=f*u});var l=Pt(t);l.properties[i]=a/s,u.push(l)}),d(u)},t.intersect=sy,t.invariant=ae,t.isNumber=L,t.isObject=T,t.isobands=function(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(ne(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!T(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a=Ji(e,{zProperty:n,flip:!0}),s=function(e,t,r){for(var n=[],i=1;i<t.length;i++){var o=+t[i-1],a=+t[i],s=Jo(Qo(eo(e,o,a-o))),u={};u.groupedRings=s,u[r]=o+"-"+a,n.push(u)}return n}(a,t,n);return d((s=function(e,t,r){var n=J(r),i=n[2]-n[0],o=n[3]-n[1],a=n[0],s=n[1],u=t[0].length-1,l=t.length-1,f=i/u,c=o/l,h=function(e){e[0]=e[0]*f+a,e[1]=e[1]*c+s};return e.forEach(function(e){e.groupedRings.forEach(function(e){e.forEach(function(e){e.forEach(h)})})}),e}(s,a,e)).map(function(e,t){if(o[t]&&!T(o[t]))throw new Error("Each mappedProperty is required to be an Object");var r=ce({},i,o[t]);return r[n]=e[n],g(e.groupedRings,r)}))},t.isolines=function(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(ne(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!T(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=_e(e,{zProperty:n,flip:!0});return d(function(e,t,r){var n=J(r),i=n[2]-n[0],o=n[3]-n[1],a=n[0],s=n[1],u=t[0].length-1,l=t.length-1,f=i/u,c=o/l,h=function(e){e[0]=e[0]*f+a,e[1]=e[1]*c+s};return e.forEach(function(e){N(e,h)}),e}(function(e,t,r,n,i){for(var o=[],a=1;a<t.length;a++){var s=+t[a],u=ce({},n,i[a]);u[r]=s;var l=v(de(e,s),u);o.push(l)}return o}(a,t,n,i,o),a,e))},t.kinks=function(e){var t,r,n={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===e.type?e.geometry:e).type)t=[r.coordinates];else if("MultiLineString"===r.type)t=r.coordinates;else if("MultiPolygon"===r.type)t=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");t=r.coordinates}return t.forEach(function(e){t.forEach(function(t){for(var r=0;r<e.length-1;r++)for(var i=r;i<t.length-1;i++){if(e===t){if(1===Math.abs(r-i))continue;if(0===r&&i===e.length-2&&e[r][0]===e[e.length-1][0]&&e[r][1]===e[e.length-1][1])continue}var o=jn(e[r][0],e[r][1],e[r+1][0],e[r+1][1],t[i][0],t[i][1],t[i+1][0],t[i+1][1]);o&&n.features.push(u([o[0],o[1]]))}})}),n},t.length=Zn,t.lengthToDegrees=x,t.lengthToRadians=S,t.lineArc=Ci,t.lineChunk=function(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return V(e,function(e){i&&(e.geometry.coordinates=e.geometry.coordinates.reverse()),function(e,t,r,n){var i=Zn(e,{units:r});if(i<=t)return n(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){n(Xn(e,t*a,t*(a+1),{units:r}),a)}}(e,t,n,function(e){o.push(e)})}),d(o)},t.lineDistance=Zn,t.lineEach=W,t.lineIntersect=An,t.lineOffset=function(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");var i=oe(e),o=e.properties;switch(i){case"LineString":return aa(e,t,n);case"MultiLineString":var a=[];return V(e,function(e){a.push(aa(e,t,n).geometry.coordinates)}),v(a,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=Bi,t.lineReduce=Z,t.lineSegment=Qr,t.lineSlice=function(e,t,r){var n=$(r);if("LineString"!==oe(r))throw new Error("line must be a LineString");for(var i,o=Rn(r,e),a=Rn(r,t),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)s.push(n[u]);return s.push(i[1].geometry.coordinates),h(s,r.properties)},t.lineSliceAlong=Xn,t.lineSplit=function(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var r=oe(e),n=oe(t);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var i=ri(t,{precision:7});switch(n){case"Point":return bi(e,i);case"MultiPoint":return _i(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(e,An(e,i))}},t.lineString=h,t.lineStringToPolygon=Li,t.lineStrings=p,t.lineToPolygon=Li,t.mask=function(e,t){var r,n=hy(t),i=null;return"FeatureCollection"===e.type?i=cy(2===(r=e).features.length?el.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):el.union.apply(el,r.features.map(function(e){return e.geometry.coordinates}))):i=cy(el.union(e.geometry.coordinates)),i.geometry.coordinates.forEach(function(e){n.geometry.coordinates.push(e[0])}),n},t.meta=Q,t.midpoint=function(e,t){return gr(e,bt(e,t)/2,_r(e,t))},t.moranIndex=function(e,t){var r=t.inputField,n=t.threshold||1e5,i=t.p||2,o=t.binary||!1,a=qs(e,{alpha:t.alpha||-1,binary:o,p:i,standardization:t.standardization||!0,threshold:n}),s=[];F(e,function(e){var t=e.properties||{};s.push(t[r])});for(var u=zs(s),l=function(e){for(var t=zs(e),r=0,n=0,i=e;n<i.length;n++){var o=i[n];r+=Math.pow(o-t,2)}return r/e.length}(s),f=0,c=0,h=0,p=0,d=a.length,v=0;v<d;v++){for(var y=0,g=0;g<d;g++)f+=a[v][g]*(s[v]-u)*(s[g]-u),c+=a[v][g],h+=Math.pow(a[v][g]+a[g][v],2),y+=a[v][g]+a[g][v];p+=Math.pow(y,2)}var m=f/c/l,_=-1/(d-1),b=(d*d*(h*=.5)-d*p+c*c*3)/((d-1)*(d+1)*(c*c))-_*_,S=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:S,zNorm:(m-_)/S}},t.multiLineString=v,t.multiPoint=y,t.multiPolygon=g,t.nearest=Yr,t.nearestPoint=Yr,t.nearestPointOnLine=Rn,t.nearestPointToLine=function(e,t,r){void 0===r&&(r={});var n=r.units,i=r.properties||{},o=function(e){var t=[];switch(e.geometry?e.geometry.type:e.type){case"GeometryCollection":return U(e,function(e){"Point"===e.type&&t.push({type:"Feature",properties:{},geometry:e})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(e){return"Point"===e.geometry.type}),e;default:throw new Error("points must be a Point Collection")}}(e);if(!o.features.length)throw new Error("points must contain features");if(!t)throw new Error("line is required");if("LineString"!==oe(t))throw new Error("line must be a LineString");var a=1/0,s=null;return F(o,function(e){var r=Dn(e,t,{units:n});r<a&&(a=r,s=e)}),s&&(s.properties=ce({dist:a},s.properties,i)),s},t.planepoint=function(e,t){var r=K(e),n=ie(t).coordinates[0];if(n.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=t.properties||{},o=i.a,a=i.b,s=i.c,u=r[0],l=r[1],f=n[0][0],c=n[0][1],h=void 0!==o?o:n[0][2],p=n[1][0],d=n[1][1],v=void 0!==a?a:n[1][2],y=n[2][0],g=n[2][1],m=void 0!==s?s:n[2][2];return(m*(u-f)*(l-d)+h*(u-p)*(l-g)+v*(u-y)*(l-c)-v*(u-f)*(l-g)-m*(u-p)*(l-c)-h*(u-y)*(l-d))/((u-f)*(l-d)+(u-p)*(l-g)+(u-y)*(l-c)-(u-f)*(l-g)-(u-p)*(l-c)-(u-y)*(l-d))},t.point=u,t.pointGrid=ti,t.pointOnFeature=Un,t.pointOnLine=Rn,t.pointOnSurface=Un,t.pointToLineDistance=Dn,t.points=l,t.pointsWithinPolygon=_t,t.polygon=f,t.polygonSmooth=function(e,t){var r=[],n=t.iterations||1;if(!e)throw new Error("inputPolys is required");return U(e,function(e,t,i){var o,a,s;switch(e.type){case"Polygon":o=[[]];for(var u=0;u<n;u++)s=[[]],a=e,u>0&&(a=f(o).geometry),Us(a,s),o=s.slice(0);r.push(f(o,i));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<n;l++)s=[[[]]],a=e,l>0&&(a=g(o).geometry),Gs(a,s),o=s.slice(0);r.push(g(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(r)},t.polygonTangents=function(e,t){var r,n,i,o,a=$(e),s=$(t),l=J(t),f=0,c=null;switch(a[0]>l[0]&&a[0]<l[2]&&a[1]>l[1]&&a[1]<l[3]&&(f=(c=Yr(e,xr(t))).properties.featureIndex),oe(t)){case"Polygon":r=s[0][f],n=s[0][0],null!==c&&c.geometry.coordinates[1]<a[1]&&(n=s[0][f]),o=Wi(s[0][0],s[0][s[0].length-1],a);var h=zi(s[0],a,o,i,r,n);r=h[0],n=h[1];break;case"MultiPolygon":for(var p=0,v=0,y=0,g=0;g<s[0].length;g++){p=g;for(var m=!1,_=0;_<s[0][g].length;_++){if(v=_,y===f){m=!0;break}y++}if(m)break}r=s[0][p][v],n=s[0][p][v],o=Wi(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach(function(e){var t=zi(e[0],a,o,i,r,n);r=t[0],n=t[1]})}return d([u(r),u(n)])},t.polygonToLine=Pi,t.polygonToLineString=Pi,t.polygonize=function(e){var t=ha.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var r=[],n=[];return t.getEdgeRings().filter(function(e){return e.isValid()}).forEach(function(e){e.isHole()?r.push(e):n.push(e)}),r.forEach(function(e){ca.findEdgeRingContaining(e,n)&&n.push(e)}),d(n.map(function(e){return e.toPolygon()}))},t.polygons=c,t.projection=Qs,t.propEach=k,t.propReduce=D,t.propertiesContainsFilter=fu,t.radians2degrees=w,t.radiansToDegrees=w,t.radiansToDistance=b,t.radiansToLength=b,t.random=iu,t.randomLineString=tu,t.randomPoint=$s,t.randomPolygon=eu,t.randomPosition=Ks,t.rewind=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.reverse||!1,n=t.mutate||!1;if(!e)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean");!1===n&&(e=Pt(e));var i=[];switch(e.type){case"GeometryCollection":return U(e,function(e){Xi(e,r)}),e;case"FeatureCollection":return F(e,function(e){F(Xi(e,r),function(e){i.push(e)})}),d(i)}return Xi(e,r)},t.rhumbBearing=Gi,t.rhumbDestination=qi,t.rhumbDistance=kn,t.round=_,t.sample=function(e,t){if(!e)throw new Error("featurecollection is required");if(null==t)throw new Error("num is required");if("number"!=typeof t)throw new Error("num must be a number");return d(function(e,t){var r,n,i=e.slice(0),o=e.length,a=o-t;for(;o-- >a;)r=i[n=Math.floor((o+1)*Math.random())],i[n]=i[o],i[o]=r;return i.slice(a)}(e.features,t))},t.sector=function(e,t,r,n,i){if(!T(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!e)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Ui(r)===Ui(n))return mr(e,t,i);var a=$(e),s=Ci(e,t,r,n,i),u=[[a]];return N(s,function(e){u[0].push(e)}),u[0].push(a),f(u,o)},t.segmentEach=z,t.segmentReduce=H,t.shortestPath=function(e,t,r){if(!T(r=r||{}))throw new Error("options is invalid");var n=r.resolution,i=r.minDistance,o=r.obstacles||d([]);if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(n&&!L(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=K(e),l=K(t);switch(e=u(s),t=u(l),oe(o)){case"FeatureCollection":if(0===o.features.length)return h([s,l]);break;case"Polygon":o=d([a(ie(o))]);break;default:throw new Error("invalid obstacles")}var f=o;f.features.push(e),f.features.push(t);var c=J(ta(dr(J(f)),1.15));n||(n=bt([c[0],c[1]],[c[2],c[1]],r)/100),f.features.pop(),f.features.pop();for(var p=c[0],v=c[1],y=c[2],g=c[3],m=n/bt([p,v],[y,v],r)*(y-p),_=n/bt([p,v],[p,g],r)*(g-v),b=y-p,S=g-v,x=Math.floor(b/m),C=Math.floor(S/_),w=(b-x*m)/2,P=[],I=[],E=[],M=[],O=1/0,A=1/0,N=g-(S-C*_)/2,R=0;N>=v;){for(var k=[],D=[],F=p+w,B=0;F<=y;){var j=u([F,N]),U=Qa(j,o);k.push(U?0:1),D.push(F+"|"+N);var G=bt(j,e);!U&&G<O&&(O=G,E={x:B,y:R});var V=bt(j,t);!U&&V<A&&(A=V,M={x:B,y:R}),F+=m,B++}I.push(k),P.push(D),N-=_,R++}var q=new Za(I,{diagonal:!0}),z=q.grid[E.y][E.x],H=q.grid[M.y][M.x],W=Wa.search(q,z,H),Z=[s];return W.forEach(function(e){var t=P[e.x][e.y].split("|");Z.push([+t[0],+t[1]])}),Z.push(l),tr(h(Z))},t.simplify=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=void 0!==t.tolerance?t.tolerance:1,n=t.highQuality||!1,i=t.mutate||!1;if(!e)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==i&&(e=Pt(e)),U(e,function(e){!function(e,t,r){var n=e.type;if("Point"===n||"MultiPoint"===n)return e;tr(e,!0);var i=e.coordinates;switch(n){case"LineString":e.coordinates=lr(i,t,r);break;case"MultiLineString":e.coordinates=i.map(function(e){return lr(e,t,r)});break;case"Polygon":e.coordinates=fr(i,t,r);break;case"MultiPolygon":e.coordinates=i.map(function(e){return fr(e,t,r)})}}(e,r,n)}),e},t.square=yr,t.squareGrid=py,t.standardDeviationalEllipse=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.steps||64,n=t.weight,i=t.properties||{};if(!L(r))throw new Error("steps must be a number");if(!T(i))throw new Error("properties must be a number");var o=j(e).length,a=Fs(e,{weight:n}),s=0,u=0,l=0;F(e,function(e){var t=e.properties[n]||1,r=js($(e),$(a));s+=Math.pow(r.x,2)*t,u+=Math.pow(r.y,2)*t,l+=r.x*r.y*t});var f=s-u,c=Math.sqrt(Math.pow(f,2)+4*Math.pow(l,2)),h=2*l,p=Math.atan((f+c)/h),v=180*p/Math.PI,y=0,g=0,m=0;F(e,function(e){var t=e.properties[n]||1,r=js($(e),$(a));y+=Math.pow(r.x*Math.cos(p)-r.y*Math.sin(p),2)*t,g+=Math.pow(r.x*Math.sin(p)+r.y*Math.cos(p),2)*t,m+=t});var _=Math.sqrt(2*y/m),b=Math.sqrt(2*g/m),S=ks(a,_,b,{units:"degrees",angle:v,steps:r,properties:i}),x=_t(e,d([S])),C={meanCenterCoordinates:$(a),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:v,percentageWithinEllipse:100*j(x).length/o};return S.properties.standardDeviationalEllipse=C,S},t.tag=function(e,t,r,n){return e=Pt(e),t=Pt(t),F(e,function(e){e.properties||(e.properties={}),F(t,function(t){void 0===e.properties[n]&&gt(e,t)&&(e.properties[n]=t.properties[r])})}),e},t.tesselate=function(e){if(!e.geometry||"Polygon"!==e.geometry.type&&"MultiPolygon"!==e.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return"Polygon"===e.geometry.type?t.features=Xr(e.geometry.coordinates):e.geometry.coordinates.forEach(function(e){t.features=t.features.concat(Xr(e))}),t},t.tin=St,t.toMercator=Hs,t.toWgs84=Ws,t.transformRotate=ea,t.transformScale=ta,t.transformTranslate=function(e,t,r,n){if(!T(n=n||{}))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,a=n.mutate;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===t&&0===o)return e;if(null==r||isNaN(r))throw new Error("direction is required");return t<0&&(t=-t,r+=180),!1!==a&&void 0!==a||(e=Pt(e)),N(e,function(e){var n=$(qi(e,t,r,{units:i}));e[0]=n[0],e[1]=n[1],o&&3===e.length&&(e[2]+=o)}),e},t.triangleGrid=dy,t.truncate=ri,t.union=function(e,t,r){void 0===r&&(r={});var n=ie(e),i=ie(t),o=el.union(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?f(o[0],r.properties):g(o,r.properties)},t.unitsFactors=i,t.unkinkPolygon=function(e){var t=[];return V(e,function(e){"Polygon"===e.geometry.type&&F(ai(e),function(r){t.push(f(r.geometry.coordinates,e.properties))})}),d(t)},t.validateBBox=M,t.validateId=O,t.voronoi=function(e,t){if(!T(t=t||{}))throw new Error("options is invalid");var r=t.bbox||[-180,-85,180,85];if(!e)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return ne(e,"Point","points"),d(function(){var e=Ka,t=$a,r=null;function n(n){return new Ns(n.map(function(r,i){var o=[Math.round(e(r,i,n)/Ms)*Ms,Math.round(t(r,i,n)/Ms)*Ms];return o.index=i,o.data=r,o}),r)}return n.polygons=function(e){return n(e).polygons()},n.links=function(e){return n(e).links()},n.triangles=function(e){return n(e).triangles()},n.x=function(t){return arguments.length?(e="function"==typeof t?t:Ja(+t),n):e},n.y=function(e){return arguments.length?(t="function"==typeof e?e:Ja(+e),n):t},n.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],n):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},n}().x(function(e){return e.geometry.coordinates[0]}).y(function(e){return e.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(e.features).map(Rs))},t.within=_t,Object.defineProperty(t,"__esModule",{value:!0})})}).call(this,r(339))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VPolyline=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(3);var u=b(s);var l=r(5);var f=b(l);var c=r(4);var h=b(c);var p=r(108);var d=r(18);var v=r(109);var y=_(v);var g=r(110);var m=_(g);function _(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);(0,f.default)(t,null,[{key:"getPolylinesCoordinates",value:function e(t){var r=[];for(var n=0;n<t.length;n++){for(var i=0;i<t[n].geometry.length;i++){var o=[],a=t[n].geometry[i].coordinates;for(var s=0;s<a.length;s++){o.push([a[s].x,a[s].y])}r.push(o)}}return r}},{key:"getPolylinesCenter",value:function e(t){var r=[];for(var n=0;n<t.length;n++){r.push(y.lineString(t[n]))}return m.center(m.featureCollection(r))}}]);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.type="LineString";(0,d.extend)(r,e);return r}return t}(p.Geometry);t.VPolyline=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VPolygon=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(3);var u=b(s);var l=r(5);var f=b(l);var c=r(4);var h=b(c);var p=r(108);var d=r(18);var v=r(109);var y=_(v);var g=r(110);var m=_(g);function _(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))t[r]=e[r]}}t.default=e;return t}}function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);(0,f.default)(t,null,[{key:"getPolygonsCoordinates",value:function e(t){var r=[];for(var n=0;n<t.length;n++){for(var i=0;i<t[n].geometry.length;i++){var o=[];var a=t[n].geometry[i].exterior,s=[];var u=t[n].geometry[i].interior,l=[];for(var f=0;f<a.length;f++){s.push([a[f].x,a[f].y])}for(var c=0;c<u.length;c++){var h=[];for(var p=0;p<u[c].length;p++){h.push([u[c][p].x,u[c][p].y])}l.push(h)}o.push(s);o=o.concat(l);r.push(o)}}return r}},{key:"getPolygonsCenter",value:function e(t){var r=[];for(var n=0;n<t.length;n++){r.push(y.polygon(t[n]))}return m.center(m.featureCollection(r))}}]);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.type="Polygon";r.exterior=[];r.interior=[];(0,d.extend)(r,e);if(r.exterior.length>0){r.coordinates.push(r.exterior)}if(r.interior.length>0){for(var n=0;n<r.interior.length;n++){r.coordinates.push(r.interior[n])}}return r}return t}(p.Geometry);t.VPolygon=S;Zondy.Service.VPolygon=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClassBufferBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.idstr=r.idstr!==undefined?r.idstr:"";n.angleType=r.angleType!==undefined?r.angleType:0;n.isDissolve=r.isDissolve!==undefined?r.isDissolve:true;n.isDynPrj=r.isDynPrj!==undefined?r.isDynPrj:false;return n}return t}(h.AnalysisBase);t.ClassBufferBase=d;c.Zondy.Service.ClassBufferBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureBuffBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.sfGeometryXML=r.sfGeometryXML!==undefined?r.sfGeometryXML:null;n.attStrctXML=r.attStrctXML!==undefined?r.attStrctXML:null;n.attRowsXML=r.attRowsXML!==undefined?r.attRowsXML:null;n.traceRadius=r.traceRadius!==undefined?r.traceRadius:1e-4;n.resultName=r.resultName!==undefined?r.resultName:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";return n}return t}(h.AnalysisBase);t.FeatureBuffBase=d;c.Zondy.Service.FeatureBuffBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OverlayBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.desInfo=r.desInfo!==undefined?r.desInfo:null;n.attOptType=r.attOptType!==undefined?r.attOptType:1;n.infoOptType=r.infoOptType!==undefined?r.infoOptType:1;n.overType=r.overType!==undefined?r.overType:3;n.isCleanNode=r.isCleanNode!==undefined?r.isCleanNode:false;n.isLabelPnt=r.isLabelPnt!==undefined?r.isLabelPnt:false;n.isValidReg=r.isValidReg!==undefined?r.isValidReg:false;n.isReCalculate=r.isReCalculate!==undefined?r.isReCalculate:true;n.radius=r.radius!==undefined?r.radius:.001;return n}return t}(h.AnalysisBase);t.OverlayBase=d;c.Zondy.Service.OverlayBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProjectBase=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(26);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.clsName=r.clsName!==undefined?r.clsName:null;n.desClsName=r.desClsName!==undefined?r.desClsName:null;n.resultName=r.resultName!==undefined?r.resultName:null;return n}return t}(h.AnalysisBase);t.ProjectBase=d;c.Zondy.Service.ProjectBase=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalServiceBase=undefined;var n=r(8);var i=S(n);var o=r(2);var a=S(o);var s=r(1);var u=S(s);var l=r(5);var f=S(l);var c=r(3);var h=S(c);var p=r(4);var d=S(p);var v=r(0);var y=r(37);var g=r(19);var m=r(9);var _=r(118);var b=r(119);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e?e:{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.dots=r.dots!==undefined?r.dots:null;n.projectInfo=r.projectInfo!==undefined?r.projectInfo:null;n.projectInfoBySRSID=r.projectInfoBySRSID!==undefined?r.projectInfoBySRSID:null;return n}(0,f.default)(t,[{key:"execute",value:function e(t,r,n){if(t instanceof _.CProjectParam){this.projectInfo=t}if(t instanceof b.CProjectBySRSID){this.projectInfoBySrsID=t}var o={};o.Dots=this.dots;o.ProjectInfo=this.projectInfo;o.ProjectInfoBySrsID=this.projectInfoBySrsID;var a=this;var s=a.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.GeometryAnalysisBase);t.CalServiceBase=x;v.Zondy.Service.CalServiceBase=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CProjectParam=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t?t:{};(0,i.extend)(this,r);this.ProjAngleUnit=r.ProjAngleUnit!==undefined?r.ProjAngleUnit:0;this.ProjLat=r.ProjLat!==undefined?r.ProjLat:0;this.ProjLat1=r.ProjLat1!==undefined?r.ProjLat1:0;this.ProjLat2=r.ProjLat2!==undefined?r.ProjLat2:0;this.ProjLon=r.ProjLon!==undefined?r.ProjLon:0;this.ProjRate=r.ProjRate!==undefined?r.ProjRate:0;this.ProjType=r.ProjType!==undefined?r.ProjType:0;this.ProjTypeID=r.ProjTypeID!==undefined?r.ProjTypeID:0;this.ProjUnit=r.ProjUnit!==undefined?r.ProjUnit:0;this.ProjZoneNO=r.ProjZoneNO!==undefined?r.ProjZoneNO:0;this.ProjZoneType=r.ProjZoneType!==undefined?r.ProjZoneType:0;this.SphereID=r.SphereID!==undefined?r.SphereID:0};t.CProjectParam=o;n.Zondy.Service.CProjectParam=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CProjectBySRSID=undefined;var n=r(0);var i=r(153);var o=function e(t,r){this.DesSrsID=t;this.GdbInfo=r};t.CProjectBySRSID=o;n.Zondy.Service.CProjectBySRSID=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FolderInfoAttribute=undefined;var n=r(0);var i=function e(t,r){this.name=t!==undefined?t:null;this.Value=r!==undefined?r:null};t.FolderInfoAttribute=i;n.Zondy.Object.Theme.FolderInfoAttribute=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CloudDiskService=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(122);var y=_(v);var g=r(22);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=t.CloudDiskService=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));var n=e.headers;r.fixParams(e);r.headers=n?n:undefined;return r}(0,f.default)(t,[{key:"setHeaders",value:function e(t){this.headers=t}},{key:"fixParams",value:function e(t){this.params=t;delete this.params.url;delete this.params.ip;delete this.params.port;delete this.params.domain;delete this.params.baseUrl;delete this.params.networkProtocol;delete this.params.partUrl}},{key:"getBaseUrl",value:function e(){var t="";var r=this.baseUrl,n=this.ip,i=this.port,o=this.domain,a=this.networkProtocol;if(r){t=r}else if(o){t=o}else if(a&&n&&i){t=a+"://"+n+":"+i}return t}},{key:"getFullUrl",value:function e(t,r){var n=this.getBaseUrl();var i=n+t+"?"+y.default.stringify(r);return i}},{key:"get",value:function e(t,r,n){var i=this;var o=new m.IgsServiceBase(t,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});o.processAsync({method:"GET",headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"post",value:function e(t,r,n,o){var a=this;var s=new m.IgsServiceBase(t,{eventListeners:{scope:a,processCompleted:n,processFailed:o}});s.processAsync({method:"POST",data:(0,i.default)(r),headers:this.headers||{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(g.ServiceBase);t.default=b},function(e,t,r){"use strict";var n=r(378);var i=r(388);var o=r(125);e.exports={formats:o,parse:i,stringify:n}},function(e,t,r){"use strict";var n;var i=SyntaxError;var o=Function;var a=TypeError;var s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}};var u=Object.getOwnPropertyDescriptor;if(u){try{u({},"")}catch(e){u=null}}var l=function(){throw new a};var f=u?function(){try{arguments.callee;return l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l;var c=r(380)();var h=Object.getPrototypeOf||function(e){return e.__proto__};var p={};var d=typeof Uint8Array==="undefined"?n:h(Uint8Array);var v={"%AggregateError%":typeof AggregateError==="undefined"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?n:ArrayBuffer,"%ArrayIteratorPrototype%":c?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":typeof Atomics==="undefined"?n:Atomics,"%BigInt%":typeof BigInt==="undefined"?n:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?n:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":typeof Int8Array==="undefined"?n:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?n:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?h(h([][Symbol.iterator]())):n,"%JSON%":typeof JSON==="object"?JSON:n,"%Map%":typeof Map==="undefined"?n:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!c?n:h((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?n:Promise,"%Proxy%":typeof Proxy==="undefined"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?n:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!c?n:h((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?h(""[Symbol.iterator]()):n,"%Symbol%":c?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":f,"%TypedArray%":d,"%TypeError%":a,"%Uint8Array%":typeof Uint8Array==="undefined"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?n:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?n:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?n:WeakSet};var y=function e(t){var r;if(t==="%AsyncFunction%"){r=s("async function () {}")}else if(t==="%GeneratorFunction%"){r=s("function* () {}")}else if(t==="%AsyncGeneratorFunction%"){r=s("async function* () {}")}else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");if(n){r=n.prototype}}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");if(i){r=h(i.prototype)}}v[t]=r;return r};var g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var m=r(124);var _=r(383);var b=m.call(Function.call,Array.prototype.concat);var S=m.call(Function.apply,Array.prototype.splice);var x=m.call(Function.call,String.prototype.replace);var C=m.call(Function.call,String.prototype.slice);var w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var P=/\\(\\)?/g;var I=function e(t){var r=C(t,0,1);var n=C(t,-1);if(r==="%"&&n!=="%"){throw new i("invalid intrinsic syntax, expected closing `%`")}else if(n==="%"&&r!=="%"){throw new i("invalid intrinsic syntax, expected opening `%`")}var o=[];x(t,w,function(e,t,r,n){o[o.length]=r?x(n,P,"$1"):t||e});return o};var E=function e(t,r){var n=t;var o;if(_(g,n)){o=g[n];n="%"+o[0]+"%"}if(_(v,n)){var s=v[n];if(s===p){s=y(n)}if(typeof s==="undefined"&&!r){throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!")}return{alias:o,name:n,value:s}}throw new i("intrinsic "+t+" does not exist!")};e.exports=function e(t,r){if(typeof t!=="string"||t.length===0){throw new a("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof r!=="boolean"){throw new a('"allowMissing" argument must be a boolean')}var o=I(t);var s=o.length>0?o[0]:"";var l=E("%"+s+"%",r);var f=l.name;var c=l.value;var h=false;var p=l.alias;if(p){s=p[0];S(o,b([0,1],p))}for(var d=1,y=true;d<o.length;d+=1){var g=o[d];var m=C(g,0,1);var x=C(g,-1);if((m==='"'||m==="'"||m==="`"||(x==='"'||x==="'"||x==="`"))&&m!==x){throw new i("property names with quotes must have matching quotes")}if(g==="constructor"||!y){h=true}s+="."+g;f="%"+s+"%";if(_(v,f)){c=v[f]}else if(c!=null){if(!(g in c)){if(!r){throw new a("base intrinsic for "+t+" exists, but the property is not available.")}return void n}if(u&&d+1>=o.length){var w=u(c,g);y=!!w;if(y&&"get"in w&&!("originalValue"in w.get)){c=w.get}else{c=c[g]}}else{y=_(c,g);c=c[g]}if(y&&!h){v[f]=c}}}return c}},function(e,t,r){"use strict";var n=r(382);e.exports=Function.prototype.bind||n},function(e,t,r){"use strict";var n=String.prototype.replace;var i=/%20/g;var o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports={default:o.RFC3986,formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return String(e)}},RFC1738:o.RFC1738,RFC3986:o.RFC3986}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemeLayer=undefined;var n=r(1);var i=p(n);var o=r(5);var a=p(o);var s=r(11);var u=p(s);var l=r(0);var f=r(205);var c=r(6);var h=r(18);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,r){(0,i.default)(this,e);var n=r?r:{};this.name=t;this.id=n.id?n.id:(0,h.newGuid)();this.opacity=n.opacity?n.opacity:1;this.visibility=true;this.loadWhileAnimating=n.loadWhileAnimating===undefined?true:n.loadWhileAnimating;this.map=n.map?n.map:null;this.features=[];this.TFEvents=[];if(this.map){this.map.addLayer(this)}}(0,a.default)(e,[{key:"onAdd",value:function e(t){this.map=t;this._createCanvasContainer();this.addTFEvents();this.map.on("resize",this.resizeEvent.bind(this));this.map.on("zoomstart",this.zoomStartEvent.bind(this));this.map.on("zoomend",this.zoomEndEvent.bind(this));this.map.on("rotatestart",this.rotateStartEvent.bind(this));this.map.on("rotate",this.rotateEvent.bind(this));this.map.on("rotateend",this.rotateEndEvent.bind(this));this.map.on("dragend",this.dragEndEvent.bind(this));this.map.on("movestart",this.moveStartEvent.bind(this));this.map.on("move",this.moveEvent.bind(this));this.map.on("moveend",this.moveEndEvent.bind(this));this.map.on("remove",this.removeFromMap.bind(this));this.refresh()}},{key:"refresh",value:function e(){if(this.features.length===0){return}if(this.map){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"_createCanvasContainer",value:function e(){this.movingOffset=[0,0];this.mapContainer=this.map.getCanvasContainer();this.div=document.createElement("div");this.div.id=this.id;this.div.style.position="absolute";var t=this.map.getCanvasContainer();var r=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.div.style.width=r.style.width;this.div.style.height=r.style.height;this.div.className="themeLayer";this.div.width=parseInt(r.width);this.div.height=parseInt(r.height);t.appendChild(this.div);this.setOpacity(this.opacity);this.levelRenderer=new f.LevelRenderer;this.renderer=this.levelRenderer.init(this.div);this.renderer.clear()}},{key:"destroyFeatures",value:function e(t){var r=t===undefined;if(r){t=this.features}if(t){this.removeFeatures(t);for(var n=t.length-1;n>=0;n--){t[n].destroy()}}}},{key:"setVisibility",value:function e(t){if(t!==this.visibility){this.visibility=t;this.display(t);this.redrawThematicFeatures(this.map.getBounds())}}},{key:"display",value:function e(t){this.div.style.display=t?"block":"none"}},{key:"setOpacity",value:function e(t){if(t!==this.opacity){this.opacity=t;var r=this.div;(0,c.modifyDOMElement)(r,null,null,null,null,null,null,t);if(this.map!==null){u.default.Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}}},{key:"addFeatures",value:function e(t){}},{key:"removeFeatures",value:function e(t){if(!t||t.length===0){return}if(t===this.features){return this.removeAllFeatures()}if(!(0,c.isArray)(t)){t=[t]}var r=[];for(var n=t.length-1;n>=0;n--){var i=t[n];var o=(0,c.indexOf)(this.features,i);if(o===-1){r.push(i);continue}this.features.splice(o,1)}var a=[];for(var s=0,l=this.features.length;s<l;s++){i=this.features[s];a.push(i)}this.features=[];this.addFeatures(a);if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}var f=r.length===0?true:false;u.default.Evented.prototype.fire("featuresremoved",{features:r,succeed:f})}},{key:"removeAllFeatures",value:function e(){if(this.renderer){this.renderer.clear()}this.features=[];u.default.Evented.prototype.fire("featuresremoved",{features:[],succeed:true})}},{key:"getFeatures",value:function e(){var t=this.features.length;var r=new Array(t);for(var n=0;n<t;++n){r[n]=this.features[n]}return r}},{key:"getFeatureBy",value:function e(t,r){var n=null;for(var i in this.features){if(this.features[i][t]===r){n=this.features[i];break}}return n}},{key:"getFeatureById",value:function e(t){return this.getFeatureBy("FID",t)}},{key:"getFeaturesByAttribute",value:function e(t,r){var n,i=[];for(var o in this.features){n=this.features[o];if(n&&n.attributes){if(n.attributes[t]===r){i.push(n)}}}return i}},{key:"redrawThematicFeatures",value:function e(t){}},{key:"on",value:function e(t,r,n){if(this.renderer){this.renderer.on(t,r)}else{this.map.on(t,r)}return this}},{key:"off",value:function e(t,r,n){var i=this;if(i.renderer){i.renderer.off(t,r)}else{this.map.off(t,r)}return this}},{key:"addTFEvents",value:function e(){var t=this.TFEvents;var r=t.length;for(var n=0;n<r;n++){this.renderer.on(t[n][0],t[n][1])}}},{key:"WebMercator2lonLat",value:function e(t,r){var n=t/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"lonLat2WebMercator",value:function e(t,r){var n=t*20037508.34/180;var i=Math.log(Math.tan((90+r)*Math.PI/360))/(Math.PI/180);i=i*20037508.34/180;return{x:n,y:i}}},{key:"getLocalXY",value:function e(t){var r,n=this.map;var i=null;if((0,c.isArray)(t)){t=new u.default.LngLat(t[0],t[1]);i=n.project(t);r=[i.x,i.y]}return r}},{key:"moveEndEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.div.style.transform="";this.redrawThematicFeatures(this.map.getBounds());this._show()}},{key:"moveStartEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.startPitch=this.map.getPitch();this.startBearing=this.map.getBearing();var t=this.map.project(new u.default.LngLat(0,0));this.startMoveX=t.x;this.startMoveY=t.y}},{key:"moveEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){this.redrawThematicFeatures(this.map.getBounds());return}if(this.rotating||this.zooming){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;var n=this.map.project(new u.default.LngLat(0,0));var i=n.x-this.startMoveX;var o=n.y-this.startMoveY;this.div.style.transform="rotateX("+t+"deg)"+" rotateZ("+r+"deg)"+" translate3d("+i+"px, "+o+"px, 0px)"}},{key:"zoomStartEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=true;this._hide()}},{key:"zoomEndEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.zooming=false;this._show()}},{key:"rotateStartEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=true}},{key:"rotateEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}if(this.map.getPitch()!==0){this._hide()}this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch;var r=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+t+"deg)"+" rotateZ("+r+"deg)"}},{key:"rotateEndEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this.rotating=false;this._show()}},{key:"dragEndEvent",value:function e(){if(this.loadWhileAnimating||!this.visibility){return}this._hide()}},{key:"resizeEvent",value:function e(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getCanvas();this.div.style.width=t.style.width;this.div.style.height=t.style.height;this.div.width=parseInt(t.width);this.div.height=parseInt(t.height);this.renderer.resize()}},{key:"removeFromMap",value:function e(){this.mapContainer.removeChild(this.div);this.removeAllFeatures()}},{key:"moveTo",value:function e(t,r){var n=document.getElementById(this.div.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(t);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(t);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"_hide",value:function e(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function e(){this.renderer.painter.root.style.display="block"}}]);return e}();t.ThemeLayer=d;l.Zondy.Map.ThemeLayer=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Color=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(42);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){(0,i.default)(this,e);this.util=new u.Util;this._ctx=null;this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"];this._palette=this.palette;this.highlightColor="rgba(0,0,255,1)";this._highlightColor=this.highlightColor;this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}(0,a.default)(e,[{key:"customPalette",value:function e(t){this.palette=t}},{key:"resetPalette",value:function e(){this.palette=this._palette}},{key:"getColor",value:function e(t,r){t=t|0;r=r||this.palette;return r[t%r.length]}},{key:"customHighlight",value:function e(t){this.highlightColor=t}},{key:"resetHighlight",value:function e(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function e(){return this.highlightColor}},{key:"getRadialGradient",value:function e(t,r,n,i,o,a,s){var u=this.util;if(!this._ctx){this._ctx=u.getContext()}var l=this._ctx.createRadialGradient(t,r,n,i,o,a);for(var f=0,c=s.length;f<c;f++){l.addColorStop(s[f][0],s[f][1])}l.__nonRecursion=true;return l}},{key:"getLinearGradient",value:function e(t,r,n,i,o){var a=this.util;if(!this._ctx){this._ctx=a.getContext()}var s=this._ctx.createLinearGradient(t,r,n,i);for(var u=0,l=o.length;u<l;u++){s.addColorStop(o[u][0],o[u][1])}s.__nonRecursion=true;return s}},{key:"getStepColors",value:function e(t,r,n){t=this.toRGBA(t);r=this.toRGBA(r);t=this.getData(t);r=this.getData(r);var i=[];var o=(r[0]-t[0])/n;var a=(r[1]-t[1])/n;var s=(r[2]-t[2])/n;var u=(r[3]-t[3])/n;for(var l=0,f=t[0],c=t[1],h=t[2],p=t[3];l<n;l++){i[l]=this.toColor([this.adjust(Math.floor(f),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),p.toFixed(4)-0],"rgba");f+=o;c+=a;h+=s;p+=u}f=r[0];c=r[1];h=r[2];p=r[3];i[l]=this.toColor([f,c,h,p],"rgba");return i}},{key:"getGradientColors",value:function e(t,r){var n=[];var i=t.length;if(r===undefined){r=20}if(i===1){n=this.getStepColors(t[0],t[0],r)}else if(i>1){for(var o=0,a=i-1;o<a;o++){var s=this.getStepColors(t[o],t[o+1],r);if(o<a-1){s.pop()}n=n.concat(s)}}return n}},{key:"toColor",value:function e(t,r){r=r||"rgb";if(t&&(t.length===3||t.length===4)){t=this.map(t,function(e){return e>1?Math.ceil(e):e});if(r.indexOf("hex")>-1){return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}else if(r.indexOf("hs")>-1){var n=this.map(t.slice(1,3),function(e){return e+"%"});t[1]=n[0];t[2]=n[1]}if(r.indexOf("a")>-1){if(t.length===3){t.push(1)}t[3]=this.adjust(t[3],[0,1]);return r+"("+t.slice(0,4).join(",")+")"}return r+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function e(t){t=this.trim(t);if(t.indexOf("rgba")<0){t=this.toRGBA(t)}var r=[];var n=0;t.replace(/[\d.]+/g,function(e){if(n<3){e=e|0}else{e=+e}r[n++]=e});return r}},{key:"convert",value:function e(t,r){if(!this.isCalculableColor(t)){return t}var n=this.getData(t);var i=n[3];if(typeof i==="undefined"){i=1}if(t.indexOf("hsb")>-1){n=this._HSV_2_RGB(n)}else if(t.indexOf("hsl")>-1){n=this._HSL_2_RGB(n)}if(r.indexOf("hsb")>-1||r.indexOf("hsv")>-1){n=this._RGB_2_HSB(n)}else if(r.indexOf("hsl")>-1){n=this._RGB_2_HSL(n)}n[3]=i;return this.toColor(n,r)}},{key:"toRGBA",value:function e(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function e(t){return this.convert(t,"rgb")}},{key:"toHex",value:function e(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function e(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function e(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function e(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function e(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function e(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function e(t){return this.convert(t,"hsl")}},{key:"toName",value:function e(t){for(var r in this._nameColors){if(this.toHex(this._nameColors[r])===this.toHex(t)){return r}}return null}},{key:"trim",value:function e(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function e(t){if(this._nameColors[t]){t=this._nameColors[t]}t=this.trim(t);t=t.replace(/hsv/i,"hsb");if(/^#[\da-f]{3}$/i.test(t)){t=parseInt(t.slice(1),16);var r=(t&3840)<<8;var n=(t&240)<<4;var i=t&15;t="#"+((1<<24)+(r<<4)+r+(n<<4)+n+(i<<4)+i).toString(16).slice(1)}return t}},{key:"lift",value:function e(t,r){if(!this.isCalculableColor(t)){return t}var n=r>0?1:-1;if(typeof r==="undefined"){r=0}r=Math.abs(r)>1?1:Math.abs(r);t=this.toRGB(t);var i=this.getData(t);for(var o=0;o<3;o++){if(n===1){i[o]=i[o]*(1-r)|0}else{i[o]=(255-i[o])*r+i[o]|0}}return"rgb("+i.join(",")+")"}},{key:"reverse",value:function e(t){if(!this.isCalculableColor(t)){return t}var r=this.getData(this.toRGBA(t));r=this.map(r,function(e){return 255-e});return this.toColor(r,"rgb")}},{key:"mix",value:function e(t,r,n){if(!this.isCalculableColor(t)||!this.isCalculableColor(r)){return t}if(typeof n==="undefined"){n=.5}n=1-this.adjust(n,[0,1]);var i=n*2-1;var o=this.getData(this.toRGBA(t));var a=this.getData(this.toRGBA(r));var s=o[3]-a[3];var u=((i*s===-1?i:(i+s)/(1+i*s))+1)/2;var l=1-u;var f=[];for(var c=0;c<3;c++){f[c]=o[c]*u+a[c]*l}var h=o[3]*n+a[3]*(1-n);h=Math.max(0,Math.min(1,h));if(o[3]===1&&a[3]===1){return this.toColor(f,"rgb")}f[3]=h;return this.toColor(f,"rgba")}},{key:"random",value:function e(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function t(r){r=this.normalize(r);var n=r.match(this.colorRegExp);if(n===null){throw new Error("The color format error")}var i;var o;var a=[];var s;if(n[2]){i=n[2].replace("#","").split("");s=[i[0]+i[1],i[2]+i[3],i[4]+i[5]];a=this.map(s,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])})}else if(n[4]){var u=n[4].split(",");o=u[3];s=u.slice(0,3);a=this.map(s,function(t){t=Math.floor(t.indexOf("%")>0?parseInt(t,0)*2.55:t);return e.prototype.adjust.call(this,t,[0,255])});if(typeof o!=="undefined"){a.push(this.adjust(parseFloat(o),[0,1]))}}else if(n[5]||n[6]){var l=(n[5]||n[6]).split(",");var f=parseInt(l[0],0)/360;var c=l[1];var h=l[2];o=l[3];a=this.map([c,h],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])});a.unshift(f);if(typeof o!=="undefined"){a.push(this.adjust(parseFloat(o),[0,1]))}}return a}},{key:"alpha",value:function e(t,r){if(!this.isCalculableColor(t)){return t}if(r===null){r=1}var n=this.getData(this.toRGBA(t));n[3]=this.adjust(Number(r).toFixed(4),[0,1]);return this.toColor(n,"rgba")}},{key:"map",value:function e(t,r){if(typeof r!=="function"){throw new TypeError}var n=t?t.length:0;for(var i=0;i<n;i++){t[i]=r(t[i])}return t}},{key:"adjust",value:function e(t,r){if(t<=r[0]){t=r[0]}else if(t>=r[1]){t=r[1]}return t}},{key:"isCalculableColor",value:function e(t){return t instanceof Array||typeof t==="string"}},{key:"_HSV_2_RGB",value:function e(t){var r=t[0];var n=t[1];var i=t[2];var o;var a;var s;if(n===0){o=i*255;a=i*255;s=i*255}else{var u=r*6;if(u===6){u=0}var l=u|0;var f=i*(1-n);var c=i*(1-n*(u-l));var h=i*(1-n*(1-(u-l)));var p=0;var d=0;var v=0;if(l===0){p=i;d=h;v=f}else if(l===1){p=c;d=i;v=f}else if(l===2){p=f;d=i;v=h}else if(l===3){p=f;d=c;v=i}else if(l===4){p=h;d=f;v=i}else{p=i;d=f;v=c}o=p*255;a=d*255;s=v*255}return[o,a,s]}},{key:"_HSL_2_RGB",value:function e(t){var r=t[0];var n=t[1];var i=t[2];var o;var a;var s;if(n===0){o=i*255;a=i*255;s=i*255}else{var u;if(i<.5){u=i*(1+n)}else{u=i+n-n*i}var l=2*i-u;o=255*this._HUE_2_RGB(l,u,r+1/3);a=255*this._HUE_2_RGB(l,u,r);s=255*this._HUE_2_RGB(l,u,r-1/3)}return[o,a,s]}},{key:"_HUE_2_RGB",value:function e(t,r,n){if(n<0){n+=1}if(n>1){n-=1}if(6*n<1){return t+(r-t)*6*n}if(2*n<1){return r}if(3*n<2){return t+(r-t)*(2/3-n)*6}return t}},{key:"_RGB_2_HSB",value:function e(t){var r=t[0]/255;var n=t[1]/255;var i=t[2]/255;var o=Math.min(r,n,i);var a=Math.max(r,n,i);var s=a-o;var u=a;var l;var f;if(s===0){l=0;f=0}else{f=s/a;var c=((a-r)/6+s/2)/s;var h=((a-n)/6+s/2)/s;var p=((a-i)/6+s/2)/s;if(r===a){l=p-h}else if(n===a){l=1/3+c-p}else if(i===a){l=2/3+h-c}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;f=f*100;u=u*100;return[l,f,u]}},{key:"_RGB_2_HSL",value:function e(t){var r=t[0]/255;var n=t[1]/255;var i=t[2]/255;var o=Math.min(r,n,i);var a=Math.max(r,n,i);var s=a-o;var u=(a+o)/2;var l;var f;if(s===0){l=0;f=0}else{if(u<.5){f=s/(a+o)}else{f=s/(2-a-o)}var c=((a-r)/6+s/2)/s;var h=((a-n)/6+s/2)/s;var p=((a-i)/6+s/2)/s;if(r===a){l=p-h}else if(n===a){l=1/3+c-p}else if(i===a){l=2/3+h-c}if(l<0){l+=1}if(l>1){l-=1}}l=l*360;f=f*100;u=u*100;return[l,f,u]}}]);return e}();t.Color=f;s.Zondy.LevelRenderer.Tool.Color=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Config=undefined;var n=r(1);var i=a(n);var o=r(0);function a(e){return e&&e.__esModule?e:{default:e}}var s=function e(){(0,i.default)(this,e)};s.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300};s.catchBrushException=false;s.debugMode=0;t.Config=s;o.Zondy.LevelRenderer.Config=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicImage=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicimage";r._imageCache={};if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;this._imageCache=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function e(r,n,i){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var o=this.refOriginalPosition;var a=this.style||{};if(n){a=this.getHighlightStyle(a,this.highlightStyle||{})}var s=a.image;var u=this;if(typeof s==="string"){var l=s;if(this._imageCache[l]){s=this._imageCache[l]}else{s=new Image;s.onload=function(){s.onload=null;clearTimeout(t._refreshTimeout);t._needsRefresh.push(u);t._refreshTimeout=setTimeout(function(){i&&i(t._needsRefresh);t._needsRefresh=[]},10)};s.src=l;this._imageCache[l]=s}}if(s){if(s.nodeName.toUpperCase()==="IMG"){if(window.ActiveXObject){if(s.readyState!=="complete"){return}}else{if(!s.complete){return}}}var f=a.width||s.width;var c=a.height||s.height;var h=a.x+o[0];var p=a.y+o[1];if(!s.width||!s.height){return}r.save();this.doClip(r);this.setContext(r,a);this.setTransform(r);if(a.sWidth&&a.sHeight){var d=a.sx+o[0]||0;var v=a.sy+o[1]||0;r.drawImage(s,d,v,a.sWidth,a.sHeight,h,p,f,c)}else if(a.sx&&a.sy){var y=a.sx+o[0];var g=a.sy+o[1];var m=f-y;var _=c-g;r.drawImage(s,y,g,m,_,h,p,f,c)}else{r.drawImage(s,h,p,f,c)}if(!a.width){a.width=f}if(!a.height){a.height=c}if(!this.style.width){this.style.width=f}if(!this.style.height){this.style.height=c}this.drawText(r,a,this.style);r.restore()}}},{key:"getRect",value:function e(t){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return{x:t.x+r[0],y:t.y+r[1],width:t.width,height:t.height}}},{key:"clearCache",value:function e(){this._imageCache={}}}]);return t}(y.Shape);m._needsRefresh=[];m._refreshTimeout=null;t.SmicImage=m;v.Zondy.LevelRenderer.SmicImage=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Line=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.pointList=e;r.CLASS_NAME="Zondy.Feature.ShapeParameters.Line";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.pointList=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Line=m;v.Zondy.Feature.ShapeParameters.Line=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Circle=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));o.x=!isNaN(e)?e:0;o.y=!isNaN(r)?r:0;o.r=!isNaN(n)?n:0;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle";return o}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.r=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Circle=m;v.Zondy.Feature.ShapeParameters.Circle=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicPoint=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicpoint";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;t.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,true);return}},{key:"getRect",value:function e(t){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(t.__rect){return t.__rect}var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-t.r-n/2),y:Math.round(t.y+r[1]-t.r-n/2),width:t.r*2+n,height:t.r*2+n};return t.__rect}}]);return t}(y.Shape);t.SmicPoint=m;v.Zondy.LevelRenderer.SmicPoint=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicBrokenLine=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(16);var g=r(76);var m=r(20);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.brushTypeOnly="stroke";r.textPosition="end";r.type="smicbroken-line";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.brushTypeOnly=null;this.textPosition=null;this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.pointList;if(i.length<2){return}var o=Math.min(r.pointList.length,Math.round(r.pointListLength||r.pointList.length));if(r.smooth&&r.smooth!=="spline"){var a=m.SUtil.SUtil_smoothBezier(i,r.smooth,false,r.smoothConstraint,n);t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);var s;var u;var l;for(var f=0;f<o-1;f++){s=a[f*2];u=a[f*2+1];l=[i[f+1][0]+n[0],i[f+1][1]+n[1]];t.bezierCurveTo(s[0],s[1],u[0],u[1],l[0],l[1])}}else{if(r.smooth==="spline"){i=m.SUtil.SUtil_smoothSpline(i,null,null,n);o=i.length}if(!r.lineType||r.lineType==="solid"){t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var c=1;c<o;c++){t.lineTo(i[c][0]+n[0],i[c][1]+n[1])}}else if(r.lineType==="dashed"||r.lineType==="dotted"||r.lineType==="dot"||r.lineType==="dash"||r.lineType==="longdash"){var h=r.lineWidth||1;var p=h;var d=h;if(r.lineType==="dashed"){p*=5;d*=5;if(r.lineCap&&r.lineCap!=="butt"){p-=h;d+=h}}if(r.lineType==="dotted"){if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=h}}if(r.lineType==="dot"){d*=4;if(r.lineCap&&r.lineCap!=="butt"){p=1;d+=h}}if(r.lineType==="dash"){p*=4;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=h;d+=h}}if(r.lineType==="longdash"){p*=8;d*=4;if(r.lineCap&&r.lineCap!=="butt"){p-=h;d+=h}}t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var v=1;v<o;v++){m.SUtil.SUtil_dashedLineTo(t,i[v-1][0]+n[0],i[v-1][1]+n[1],i[v][0]+n[0],i[v][1]+n[1],h,[p,d])}}else if(r.lineType==="dashot"||r.lineType==="longdashdot"){var y=r.lineWidth||1;var g=y;var _=y;var b=y;var S=y;if(r.lineType==="dashot"){g*=4;_*=4;S*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=y;_+=y;b=1;S+=y}}if(r.lineType==="longdashdot"){g*=8;_*=4;S*=4;if(r.lineCap&&r.lineCap!=="butt"){g-=y;_+=y;b=1;S+=y}}y=(r.lineWidth||1)*(r.lineType==="dashed"?5:1);t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var x=1;x<o;x++){m.SUtil.SUtil_dashedLineTo(t,i[x-1][0]+n[0],i[x-1][1]+n[1],i[x][0]+n[0],i[x][1]+n[1],y,[g,_,b,S])}}}return}},{key:"getRect",value:function e(t){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;return g.SmicPolygon.prototype.getRect.apply(this,[t,r])}},{key:"brush",value:function e(t,r){var n=this.beforeBrush(t,r);t.beginPath();this.buildPath(t,n);switch(n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n);if(n.lineWidth>0){this.setCtxGlobalAlpha(t,"stroke",n);t.stroke()}this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n);n.lineWidth>0&&t.stroke();this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n);this.setCtxGlobalAlpha(t,"reset",n);break}this.drawText(t,n,this.style);this.afterBrush(t)}}]);return t}(y.Shape);t.SmicBrokenLine=b;v.Zondy.LevelRenderer.SmicBrokenLine=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Theme3DLayer=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(11);var u=r(0);var l=r(6);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t,r){(0,i.default)(this,e);this.id=t;this.map=null;this.opacity=1;this.parseNumber=false;this.enableHighlight=false;this.highlight={color:"#ADA91E"};this.baseHeightField=null;this.height=null;this.heightField="height";this.themeField=this.heightField;this.showLegend=true;this.legendTitle=null;this.legendTheme="light";this.legendOrientation="horizontal";this.legendPosition="bottom-right";this.mousemoveOn=true;(0,l.extend)(this,r)}(0,a.default)(e,[{key:"setLayerOptions",value:function e(t){(0,l.extend)(this,t);return this}},{key:"setHighlightStyleOptions",value:function e(t){(0,l.extend)(this.highlight,t);return this}},{key:"setData",value:function e(t,r){var n=this;n.data=t;if(r!=null){n.parseNumber=r}n.parseNumber&&n.data&&n.data.features&&n.data.features.map(function(e){if(n.baseHeightField&&e.properties[n.baseHeightField]){e.properties[n.baseHeightField]=parseFloat(e.properties[n.baseHeightField])}if(n.heightField&&e.properties[n.heightField]){e.properties[n.heightField]=parseFloat(e.properties[n.heightField])}return e});return this}},{key:"WebMercator2lonLat",value:function e(t,r){var n=t/20037508.34*180;var i=r/20037508.34*180;i=180/Math.PI*(2*Math.atan(Math.exp(i*Math.PI/180))-Math.PI/2);return[n,i]}},{key:"convertData",value:function e(t){if(t!=null&&t.features!=null&&t.features.length>0){for(var r=0;r<t.features.length;r++){var n=t.features[r].geometry;if(n!=null&&n.coordinates!=null&&n.coordinates.length>0){if(n.type=="Polygon"){var i=n.coordinates;for(var o=0;o<i.length;o++){var a=i[o];if(a!=null&&a.length>0){for(var u=0;u<a.length;u++){var l=new s.mapboxgl.LngLat(a[u][0],a[u][1]);var f=map.project(l);t.features[r].geometry.coordinates[o][u]=[f.x,f.y]}}}}else if(n.type=="MultiPolygon"){var c=n.coordinates;for(var h=0;h<c.length;h++){var p=c[h];if(p!=null&&p.length>0){for(var o=0;o<p.length;o++){var a=p[o];if(a!=null&&a.length>0){for(var u=0;u<a.length;u++){var d=new s.mapboxgl.LngLat(a[u][0],a[u][1]);var v=map.project(d);t.features[r].geometry.coordinates[h][o][u]=[v.x,v.y]}}}}}}}}}return t}},{key:"getData",value:function e(){return this.data}},{key:"addTo",value:function e(t){this.map=t;if(!this.map){return this}this.show();return this}},{key:"show",value:function e(t){(0,l.extend)(this,t);this._addLayer();if(this.enableHighlight){this._addHighLightLayer()}if(this.showLegend){if(!this.legend){this.legend=this._createLegendControl()}this.map.addControl(this.legend,this.legendPosition)}return this}},{key:"remove",value:function e(){if(!this.map){return this}var t=this;t.mousemoveOn=false;var r=this.id?this.id:"theme3DLayer";if(this.map.getLayer(r)){this.map.removeLayer(r)}var n="highlightLayer";if(this.map.getLayer(n)){this.map.removeLayer(n)}if(this.legend){this.map.removeControl(this.legend)}return this}},{key:"getLayerStyleOptions",value:function e(){}},{key:"getHighlightStyleOptions",value:function e(){}},{key:"_createLegendControl",value:function e(t){var r=this;function n(){}n.prototype.onAdd=function(e){this._map=e;this._container=document.createElement("div");var n="mapboxgl-ctrl legend ";var i="legend-light";if(r.legendTheme==="dark"){i="legend-dark"}var o=" legend-horizontal";if(r.legendOrientation==="vertical"){o=" legend-vertical"}this._container.className=n+i+o;if(t){this._container.innerHTML=t}else{var a=r.legendTitle||"";var s=" <div class='legend-title'>"+a+"</div>";var u=r._createLegendElement.call(r)||"";var l="<div class='legend-content'>"+u+"</div>";this._container.innerHTML=s+l}r._appendLegendCSSStyle();return this._container};n.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container);this._map=undefined};return new n}},{key:"_createLegendElement",value:function e(){}},{key:"_addLayer",value:function e(){var t=this.getLayerStyleOptions();var r=this.id?this.id:"theme3DLayer";this.id=r;var n=this.sourceId=r+"Source";if(!!this.map.getSource(n)){this.map.removeSource(n)}this.map.addSource(n,{type:"geojson",data:this.data});if(!!this.map.getLayer(r)){this.map.removeLayer(r)}this.map.addLayer({id:r,type:"fill-extrusion",source:n,paint:t});this.map.moveLayer(r)}},{key:"_addHighLightLayer",value:function e(){if(!this.map){return}var t=this.map;if(t.getSource("highlight")){t.removeSource("highlight")}t.addSource("highlight",{type:"geojson",data:{type:"FeatureCollection",features:[]}});if(!!t.getLayer("highlightLayer")){t.removeLayer("highlightLayer")}t.addLayer({id:"highlightLayer",type:"fill-extrusion",source:"highlight",paint:this.getHighlightStyleOptions()});var r=this;var n;t.on("mousemove",function(e){if(!r.mousemoveOn){return}r.mousemoveOn=true;var t=document.querySelector(".mapboxgl-canvas-container.mapboxgl-interactive");t.style.cursor="auto";var i=r.map.queryRenderedFeatures(e.point,{layers:[r.id]});if(r.highlight&&r.highlight.callback){r.highlight.callback(i,e)}if(!i||i.length<1){r._clearHighlight.call(r);return}var o=i[0].properties.fid;if(n===o){return}n=o;r._clearHighlight.call(r);var a=r.map.querySourceFeatures(r.sourceId,{filter:["==","fid",o]});var s,u=a.length;var l={type:"FeatureCollection",features:[]};for(s=0;s<u;s++){l["features"].push(a[s].toJSON())}r.map.getSource("highlight").setData(l)})}},{key:"_clearHighlight",value:function e(){if(this.map){if(!!this.map.getSource("highlight")){this.map.getSource("highlight").setData({type:"FeatureCollection",features:[]})}}}},{key:"_appendLegendCSSStyle",value:function e(){var t=document.createElement("style");t.type="text/css";var r="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        ";t.innerHTML=r+this._legendCSSStyle();document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_legendCSSStyle",value:function e(){return"  \n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}}]);return e}();t.Theme3DLayer=c;u.Zondy.Map.Theme3DLayer=c},function(e,t,r){var n=r(33);var i=r(34);var o=r(240)(false);var a=r(81)("IE_PROTO");e.exports=function(e,t){var r=i(e);var s=0;var u=[];var l;for(l in r)if(l!=a)n(r,l)&&u.push(l);while(t.length>s)if(n(r,l=t[s++])){~o(u,l)||u.push(l)}return u}},function(e,t,r){var n=r(46);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return n(e)=="String"?e.split(""):Object(e)}},function(e,t,r){var n=r(80);var i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){e.exports=!r(25)&&!r(38)(function(){return Object.defineProperty(r(84)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,r){"use strict";var n=r(12);var i=r(33);var o=r(25);var a=r(17);var s=r(140);var u=r(248).KEY;var l=r(38);var f=r(82);var c=r(60);var h=r(54);var p=r(14);var d=r(88);var v=r(89);var y=r(249);var g=r(250);var m=r(21);var _=r(30);var b=r(44);var S=r(34);var x=r(85);var C=r(57);var w=r(90);var P=r(142);var I=r(87);var E=r(61);var L=r(29);var T=r(45);var M=I.f;var O=L.f;var A=P.f;var N=n.Symbol;var R=n.JSON;var k=R&&R.stringify;var D="prototype";var F=p("_hidden");var B=p("toPrimitive");var j={}.propertyIsEnumerable;var U=f("symbol-registry");var G=f("symbols");var V=f("op-symbols");var q=Object[D];var z=typeof N=="function"&&!!E.f;var H=n.QObject;var W=!H||!H[D]||!H[D].findChild;var Z=o&&l(function(){return w(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a!=7})?function(e,t,r){var n=M(q,t);if(n)delete q[t];O(e,t,r);if(n&&e!==q)O(q,t,n)}:O;var X=function(e){var t=G[e]=w(N[D]);t._k=e;return t};var Y=z&&typeof N.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof N};var Q=function e(t,r,n){if(t===q)Q(V,r,n);m(t);r=x(r,true);m(n);if(i(G,r)){if(!n.enumerable){if(!i(t,F))O(t,F,C(1,{}));t[F][r]=true}else{if(i(t,F)&&t[F][r])t[F][r]=false;n=w(n,{enumerable:C(0,false)})}return Z(t,r,n)}return O(t,r,n)};var J=function e(t,r){m(t);var n=y(r=S(r));var i=0;var o=n.length;var a;while(o>i)Q(t,a=n[i++],r[a]);return t};var K=function e(t,r){return r===undefined?w(t):J(w(t),r)};var $=function e(t){var r=j.call(this,t=x(t,true));if(this===q&&i(G,t)&&!i(V,t))return false;return r||!i(this,t)||!i(G,t)||i(this,F)&&this[F][t]?r:true};var ee=function e(t,r){t=S(t);r=x(r,true);if(t===q&&i(G,r)&&!i(V,r))return;var n=M(t,r);if(n&&i(G,r)&&!(i(t,F)&&t[F][r]))n.enumerable=true;return n};var te=function e(t){var r=A(S(t));var n=[];var o=0;var a;while(r.length>o){if(!i(G,a=r[o++])&&a!=F&&a!=u)n.push(a)}return n};var re=function e(t){var r=t===q;var n=A(r?V:S(t));var o=[];var a=0;var s;while(n.length>a){if(i(G,s=n[a++])&&(r?i(q,s):true))o.push(G[s])}return o};if(!z){N=function e(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:undefined);var r=function(e){if(this===q)r.call(V,e);if(i(this,F)&&i(this[F],t))this[F][t]=false;Z(this,t,C(1,e))};if(o&&W)Z(q,t,{configurable:true,set:r});return X(t)};s(N[D],"toString",function e(){return this._k});I.f=ee;L.f=Q;r(91).f=P.f=te;r(59).f=$;E.f=re;if(o&&!r(47)){s(q,"propertyIsEnumerable",$,true)}d.f=function(e){return X(p(e))}}a(a.G+a.W+a.F*!z,{Symbol:N});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ne.length>ie;)p(ne[ie++]);for(var oe=T(p.store),ae=0;oe.length>ae;)v(oe[ae++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=N(e)},keyFor:function e(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var r in U)if(U[r]===t)return r},useSetter:function(){W=true},useSimple:function(){W=false}});a(a.S+a.F*!z,"Object",{create:K,defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var se=l(function(){E.f(1)});a(a.S+a.F*se,"Object",{getOwnPropertySymbols:function e(t){return E.f(b(t))}});R&&a(a.S+a.F*(!z||l(function(){var e=N();return k([e])!="[null]"||k({a:e})!="{}"||k(Object(e))!="{}"})),"JSON",{stringify:function e(t){var r=[t];var n=1;var i,o;while(arguments.length>n)r.push(arguments[n++]);o=i=r[1];if(!_(i)&&t===undefined||Y(t))return;if(!g(i))i=function(e,t){if(typeof o=="function")t=o.call(this,e,t);if(!Y(t))return t};r[1]=i;return k.apply(R,r)}});N[D][B]||r(35)(N[D],B,N[D].valueOf);c(N,"Symbol");c(Math,"Math",true);c(n.JSON,"JSON",true)},function(e,t,r){e.exports=r(35)},function(e,t,r){var n=r(12).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(34);var i=r(91).f;var o={}.toString;var a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function e(t){return a&&o.call(t)=="[object Window]"?s(t):i(n(t))}},function(e,t,r){"use strict";var n=r(47);var i=r(17);var o=r(140);var a=r(35);var s=r(49);var u=r(257);var l=r(60);var f=r(144);var c=r(14)("iterator");var h=!([].keys&&"next"in[].keys());var p="@@iterator";var d="keys";var v="values";var y=function(){return this};e.exports=function(e,t,r,g,m,_,b){u(r,t,g);var S=function(e){if(!h&&e in P)return P[e];switch(e){case d:return function t(){return new r(this,e)};case v:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}};var x=t+" Iterator";var C=m==v;var w=false;var P=e.prototype;var I=P[c]||P[p]||m&&P[m];var E=I||S(m);var L=m?!C?E:S("entries"):undefined;var T=t=="Array"?P.entries||I:I;var M,O,A;if(T){A=f(T.call(new e));if(A!==Object.prototype&&A.next){l(A,x,true);if(!n&&typeof A[c]!="function")a(A,c,y)}}if(C&&I&&I.name!==v){w=true;E=function e(){return I.call(this)}}if((!n||b)&&(h||w||!P[c])){a(P,c,E)}s[t]=E;s[x]=y;if(m){M={values:C?E:S(v),keys:_?E:S(d),entries:L};if(b)for(O in M){if(!(O in P))o(P,O,M[O])}else i(i.P+i.F*(h||w),t,M)}return M}},function(e,t,r){var n=r(33);var i=r(44);var o=r(81)("IE_PROTO");var a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(n(e,o))return e[o];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?a:null}},function(e,t){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DynShowStyle=undefined;var n=r(0);var i=r(6);var o=r(147);var a=r(15);var s=r(63);var u=r(96);var l=r(97);var f=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Alpha=r.Alpha!==undefined?r.Alpha:0;this.BugSpare=r.BugSpare!==undefined?r.BugSpare:false;this.CustomRender=r.CustomRender!==undefined?r.CustomRender:false;this.CustomRenderPath=r.CustomRenderPath!==undefined?r.CustomRenderPath:null;this.DirectionLineClr=r.DirectionLineClr!==undefined?r.DirectionLineClr:0;this.DynNoteFlag=r.DynNoteFlag!==undefined?r.DynNoteFlag:false;this.DynNoteInfo=r.DynNoteInfo!==undefined?r.DynNoteInfo:null;this.IsShowArc=r.IsShowArc!==undefined?r.IsShowArc:0;this.ISShowLineDirection=r.ISShowLineDirection!==undefined?r.ISShowLineDirection:false;this.LineInfo=r.LineInfo!==undefined?r.LineInfo:null;this.MaxScale=r.MaxScale!==undefined?r.MaxScale:0;this.MinScale=r.MinScale!==undefined?r.MinScale:0;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.SpareLineInfo=r.SpareLineInfo!==undefined?r.SpareLineInfo:null;this.SparePointInfo=r.SparePointInfo!==undefined?r.SparePointInfo:null;this.SpareRegInfo=r.SpareRegInfo!==undefined?r.SpareRegInfo:null;this.SymbleScale=r.SymbleScale!==undefined?r.SymbleScale:0};t.DynShowStyle=f;n.Zondy.Object.DynShowStyle=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CDynNoteInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=r(148);var s=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Angle=r.Angle!==undefined?r.Angle:0;this.Backclr=r.Backclr!==undefined?r.Backclr:0;this.Backexp=r.Backexp!==undefined?r.Backexp:0;this.Bold=r.Bold!==undefined?r.Bold:0;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.FontColor=r.FontColor!==undefined?r.FontColor:0;this.FontSize=r.FontSize!==undefined?r.FontSize:0;this.FontStyle=r.FontStyle!==undefined?r.FontStyle:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:o.FontShape.Positive;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:false;this.IsOvprnt=r.IsOvprnt!==undefined?r.IsOvprnt:false;this.LabelLevel=r.LabelLevel!==undefined?r.LabelLevel:0;this.LableType=r.LableType!==undefined?r.LableType:null;this.Offsetx=r.Offsetx!==undefined?r.Offsetx:0;this.Offsety=r.Offsety!==undefined?r.Offsety:0;this.Space=r.Space!==undefined?r.Space:0;this.StrikeThrough=r.StrikeThrough!==undefined?r.StrikeThrough:0;this.UnderLine=r.UnderLine!==undefined?r.UnderLine:0};t.CDynNoteInfo=s;n.Zondy.Object.CDynNoteInfo=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DynNoteLableType=undefined;var n=r(0);var i=r(6);var o=r(149);var a=r(150);var s=r(151);var u=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};t.DynNoteLableType=u;n.Zondy.Object.DynNoteLableType=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LablePntInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Ang=r.Ang!==undefined&&r.Ang!==null?r.Ang:null;this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.Distance=r.Distance!==undefined&&r.Distance!==null?r.Distance:0;this.EightDirLableType=r.EightDirLableType!==undefined&&r.EightDirLableType!==null?r.EightDirLableType:null;this.PntType=r.PntType!==undefined&&r.PntType!==null?r.PntType:0};t.LablePntInfo=a;n.Zondy.Object.LablePntInfo=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LabelLinInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.DistFromLine=r.DistFromLine!==undefined&&r.DistFromLine!==null?r.DistFromLine:0;this.FromLineConstrain=r.FromLineConstrain!==undefined&&r.FromLineConstrain!==null?r.FromLineConstrain:0;this.Interval=r.Interval!==undefined&&r.Interval!==null?r.Interval:0;this.LinType=r.LinType!==undefined&&r.LinType!==null?r.LinType:0;this.Repeat=r.Repeat!==undefined&&r.Repeat!==null?r.Repeat:0;this.SpreadType=r.SpreadType!==undefined&&r.SpreadType!==null?r.SpreadType:null};t.LabelLinInfo=a;n.Zondy.Object.LabelLinInfo=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LabelRegInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.ClientOutLabel=r.ClientOutLabel!==undefined&&r.ClientOutLabel!==null?r.ClientOutLabel:false;this.LabelMiniRegion=r.LabelMiniRegion!==undefined&&r.LabelMiniRegion!==null?r.LabelMiniRegion:0;this.MayPlaceOutside=r.MayPlaceOutside!==undefined&&r.MayPlaceOutside!==null?r.MayPlaceOutside:0;this.MiniRegionArea=r.MiniRegionArea!==undefined&&r.MiniRegionArea!==null?r.MiniRegionArea:0;this.Offset=r.Offset!==undefined&&r.Offset!==null?r.Offset:0;this.RegType=r.RegType!==undefined&&r.RegType!==null?r.RegType:0};t.LabelRegInfo=a;n.Zondy.Object.LabelRegInfo=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CDisplayStyleExtend=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.Index=r.Index!==undefined?r.Index:0;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false};t.CDisplayStyleExtend=o;n.Zondy.Object.CDisplayStyleExtend=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CGDBInfo=undefined;var n=r(0);var i=function e(t){var r=t?t:{};this.GDBSvrName=r.ServerName!==undefined?r.ServerName:null;this.GDBName=r.GDBName!==undefined?r.GDBName:null;this.User=r.User!==undefined?r.User:null;this.Password=r.Password!==undefined?r.Password:null};t.CGDBInfo=i;n.Zondy.Object.CGDBInfo=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Feature=undefined;var n=r(0);var i=r(6);var o=r(98);var a=r(155);var s=r(15);var u=r(156);var l=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.AttValue=r.AttValue!==undefined&&r.AttValue!==null?r.AttValue:null;this.FID=r.FID!==undefined&&r.FID!==null?r.FID:0;this.bound=r.bound!==undefined&&r.bound!==null?r.bound:null;this.fGeom=r.fGeom!==undefined&&r.fGeom!==null?r.fGeom:null;this.ftype=r.ftype!==undefined&&r.ftype!==null?r.ftype:0;this.GraphicInfo=r.GraphicInfo!==undefined&&r.GraphicInfo!==null?r.GraphicInfo:null};l.prototype.getAttValue=function(e){if(this.AttValue===null){return null}var t=this.AttValue.length;if(typeof e==="number"){if(e>=t){return null}return this.AttValue[e]}};l.prototype.getGraphicInfo=function(){if(this.GraphicInfo===null){return null}else{return new u.WebGraphicsInfo(this.GraphicInfo)}};l.prototype.getAttValueArray=function(){return this.AttValue};l.prototype.getRectBound=function(){var e=this.bound;if(e!==null){return new o.Rectangle(e)}else{return e}};l.prototype.getGeometry=function(){return this.fGeom};l.prototype.getFID=function(){return this.FID};l.prototype.setAttValues=function(e){this.AttValue=e};l.prototype.setBound=function(e){var t=null;if(typeof e==="string"){t=new o.Rectangle(e)}if(e instanceof String){t=new o.Rectangle(e)}if(e instanceof o.Rectangle){t=e}if(e instanceof ol.extent){t=new o.Rectangle;t.setByOL(e)}this.bound=t};l.prototype.setFID=function(e){this.FID=e};l.prototype.setFType=function(e){this.ftype=e};l.prototype.destroy=function(){this.AttValue=null;this.FID=null;this.bound=null;this.fGeom=null;this.ftype=null;this.GraphicInfo=null};t.Feature=l;n.Zondy.Object.Feature=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureGeometry=undefined;var n=r(0);var i=r(6);var o=r(99);var a=r(100);var s=r(101);var u=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.PntGeom=r.PntGeom!==undefined&&r.PntGeom!==null?r.PntGeom:null;this.LinGeom=r.LinGeom!==undefined&&r.LinGeom!==null?r.LinGeom:null;this.RegGeom=r.RegGeom!==undefined&&r.RegGeom!==null?r.RegGeom:null};u.prototype.setPntGeom=function(e){this.PntGeom=e!==undefined&&e!==null&&Array.isArray(e)?e:null};u.prototype.setLine=function(e){this.LinGeom=e!==undefined&&e!==null&&Array.isArray(e)?e:null};u.prototype.setRegGeom=function(e){this.RegGeom=e!==undefined&&e!==null&&Array.isArray(e)?e:null};t.FeatureGeometry=u;n.Zondy.Object.FeatureGeometry=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WebGraphicsInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=r(96);var s=r(63);var u=r(97);var l=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.InfoType=r.InfoType!==undefined&&r.InfoType!==null?r.InfoType:0;this.PntInfo=r.PntInfo!==undefined&&r.PntInfo!==null?r.PntInfo:null;this.LinInfo=r.LinInfo!==undefined&&r.LinInfo!==null?r.LinInfo:null;this.RegInfo=r.RegInfo!==undefined&&r.RegInfo!==null?r.RegInfo:null};t.WebGraphicsInfo=l;n.Zondy.Object.WebGraphicsInfo=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Polygon=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(36);var d=r(19);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.pointArr=e!==undefined&&e!==null&&Array.isArray(e)?e:new Array;return o}(0,u.default)(t,[{key:"setByOL",value:function e(t){if(t!==undefined&&t!==null){var r=t.getLinearRing(0);var n=r.getCoordinates();var i=n.length;for(var o=0;o<i;o++){this.pointArr[o]=new d.Point2D(n[o][0],n[o][1])}}}},{key:"toString",value:function e(){if(this.pointArr===null||this.pointArr.length===0){return""}var t="";for(var r=0;r<this.pointArr.length;r++){t+=this.pointArr[r].x+","+this.pointArr[r].y+","}return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function e(){return"polygon"}}]);return t}(p.Tangram);t.Polygon=y;Zondy.Object.Polygon=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContourNoteParam=undefined;var n=r(0);var i=function e(t){var r=t!=undefined?t:{};this.IsClipLine=r.IsClipLine!=undefined?r.IsClipLine:true;this.isXYScaleOut=r.isXYScaleOut!=undefined?r.isXYScaleOut:false;this.NoteDirection=r.NoteDirection!=undefined?r.NoteDirection:1;this.LineWidth=r.LineWidth!=undefined?r.LineWidth:.05;this.MaxAngle=r.MaxAngle!=undefined?r.MaxAngle:90;this.MinDist=r.MinDist!=undefined?r.MinDist:10;this.IsAbs=r.IsAbs!=undefined?r.IsAbs:false;this.IsComma=r.IsComma!=undefined?r.IsComma:false;this.DigitNum=r.DigitNum!=undefined?r.DigitNum:0;this.FormatNo=r.FormatNo!=undefined?r.FormatNo:0;this.LogFlag=r.LogFlag!=undefined?r.LogFlag:0;this.Prefix=r.Prefix!=undefined?r.Prefix:"";this.Suffix=r.Suffix!=undefined?r.Suffix:"";this.ColorNo=r.ColorNo!=undefined?r.ColorNo:0;this.FixSize=r.FixSize!=undefined?r.FixSize:.01;this.FontNo=r.FontNo!=undefined?r.FontNo:0};t.ContourNoteParam=i;n.Zondy.Object.ContourAnalyse.ContourNoteParam=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContourParam=undefined;var n=r(0);var i=r(158);var o=r(160);var a=r(161);var s=function e(t){var r=t!=undefined?t:{};this.IsSmoothLine=r.IsSmoothLine!==undefined?r.IsSmoothLine:false;this.SmoothGrade=r.SmoothGrade!==undefined?r.SmoothGrade:1;this.IsMakeReg=r.IsMakeReg!==undefined?r.IsMakeReg:false;this.IsMakeNote=r.IsMakeNote!==undefined?r.IsMakeNote:false;this.IsMakeSLin=r.IsMakeSLin!==undefined?r.IsMakeSLin:false;this.MapWay=r.MapWay!==undefined?r.MapWay:1;this.FrameWidth=r.FrameWidth!==undefined?r.FrameWidth:1;this.FrameHeight=r.FrameHeight!==undefined?r.FrameHeight:1;this.IsDrawColorScl=r.IsDrawColorScl!==undefined?r.IsDrawColorScl:false;this.IsSaveEdge=r.IsSaveEdge!==undefined?r.IsSaveEdge:false;this.NoteParam=r.NoteParam!==undefined?r.NoteParam:new n.Zondy.Object.ContourAnalyse.ContourNoteParam;this.SlopLineParam=r.SlopLineParam!==undefined?r.SlopLineParam:new n.Zondy.Object.ContourAnalyse.SlopLineParam;this.ZValues=r.ZValues!==undefined?r.ZValues:new n.Zondy.Object.ContourAnalyse.ContourZValue};t.ContourParam=s;n.Zondy.Object.ContourAnalyse.ContourParam=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SlopLineParam=undefined;var n=r(0);var i=function e(t){var r=t!==undefined?t:{};this.XScale=r.XScale!==undefined?r.XScale:2;this.YScale=r.YScale!==undefined?r.YScale:10;this.LineType=r.LineType!==undefined?r.LineType:0;this.SubLineType=r.SubLineType!==undefined?r.SubLineType:0};t.SlopLineParam=i;n.Zondy.Object.ContourAnalyse.SlopLineParam=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContourZValue=undefined;var n=r(0);var i=r(63);var o=r(162);var a=function e(t){var r=t!=undefined?t:{};this.ZValue=r.ZValue!=undefined?r.ZValue:1;this.LineInfo=r.LineInfo!=undefined?r.LineInfo:null;this.RegInfo=r.RegInfo!=undefined?r.RegInfo:null;this.IsOutputNote=r.IsOutputNote!=undefined?r.IsOutputNote:false};t.ContourZValue=a;n.Zondy.Object.ContourAnalyse.ContourZValue=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContourRegionInfo=undefined;var n=r(0);var i=function e(t){var r=t!=undefined?t:{};this.PatID=r.PatID!=undefined?r.PatID:0;this.FillMode=r.FillMode!=undefined?r.FillMode:0;this.FillColor=r.FillColor!=undefined?r.FillColor:1;this.PatHeight=r.PatHeight!=undefined?r.PatHeight:1;this.PatWidth=r.PatWidth!=undefined?r.PatWidth:1;this.PatAngle=r.PatAngle!=undefined?r.PatAngle:1;this.PatColor=r.PatColor!=undefined?r.PatColor:1;this.OutPenWidth=r.OutPenWidth!=undefined?r.OutPenWidth:1;this.OverMethod=r.OverMethod!=undefined?r.OverMethod:0};t.ContourRegionInfo=i;n.Zondy.Object.ContourAnalyse.ContourRegionInfo=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MeshingParam=undefined;var n=r(0);var i=function e(t){var r=t!==undefined?t:{};this.SfClsURL=r.SfClsURL!==undefined?r.SfClsURL:null;this.FieldName=r.FieldName!==undefined?r.FieldName:null;this.XCellNum=r.XCellNum!==undefined?r.XCellNum:200;this.Bound=r.Bound!==undefined?r.Bound:null;this.CalN=r.CalN!==undefined?r.CalN:null;this.CalM=r.CalM!==undefined?r.CalM:null;this.bIsCalInValidCtrlPnt=r.bIsCalInValidCtrlPnt!==undefined?r.bIsCalInValidCtrlPnt:false;this.nYCtrlNum=r.nYCtrlNum!==undefined?r.nYCtrlNum:null;this.nXCtrlNum=r.nXCtrlNum!==undefined?r.nXCtrlNum:null;this.nLayerNum=r.nLayerNum!==undefined?r.nLayerNum:null};t.MeshingParam=i;n.Zondy.Object.ContourAnalyse.MeshingParam=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CommonServiceBase=undefined;var n=r(102);var i=d(n);var o=r(1);var a=d(o);var s=r(5);var u=d(s);var l=r(0);var f=r(6);var c=r(170);var h=r(171);var p=r(172);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(){function e(t,r){(0,a.default)(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"];this.events=null;this.eventListeners=null;this.url=null;this.urls=null;this.index=null;this.length=null;this.options=null;this.totalTimes=null;this.POLLING_TIMES=3;this._processSuccess=null;this._processFailed=null;this.isInTheSameDomain=null;if((0,f.isArray)(t)){n.urls=t;n.length=t.length;n.totalTimes=n.length;if(n.length===1){n.url=t[0]}else{n.index=parseInt(Math.random()*n.length);n.url=t[n.index]}}else{n.totalTimes=1;n.url=t}r=r||{};if(r){(0,f.extend)(this,r)}n.isInTheSameDomain=(0,f.isInTheSameDomain)(n.url);n.events=new c.Events(n,null,n.EVENT_TYPES,true);if(n.eventListeners instanceof Object){n.events.on(n.eventListeners)}}(0,u.default)(e,[{key:"destroy",value:function e(){var t=this;if((0,f.isArray)(t.urls)){t.urls=null;t.index=null;t.length=null;t.totalTimes=null}t.url=null;t.options=null;t._processSuccess=null;t._processFailed=null;t.isInTheSameDomain=null;t.EVENT_TYPES=null;if(t.events){t.events.destroy();t.events=null}if(t.eventListeners){t.eventListeners=null}}},{key:"request",value:function e(t){var r=this;t.url=t.url||r.url;t.isInTheSameDomain=r.isInTheSameDomain;r.calculatePollingTimes();r._processSuccess=t.success;r._processFailed=t.failure;t.scope=r;t.success=r.getUrlCompleted;t.failure=r.getUrlFailed;r.options=t;r._commit(r.options)}},{key:"getUrlCompleted",value:function e(t){var r=this;r._processSuccess(t)}},{key:"getUrlFailed",value:function e(t){var r=this;if(r.totalTimes>0){r.totalTimes--;r.ajaxPolling()}else{r._processFailed(t)}}},{key:"ajaxPolling",value:function e(){var t=this,r=t.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length);t.url=t.urls[t.index];r=r.replace(n,n.exec(t.url)[0]);t.options.url=r;t.options.isInTheSameDomain=(0,f.isInTheSameDomain)(r);t._commit(t.options)}},{key:"calculatePollingTimes",value:function e(){var t=this;if(t.times){if(t.totalTimes>t.POLLING_TIMES){if(t.times>t.POLLING_TIMES){t.totalTimes=t.POLLING_TIMES}else{t.totalTimes=t.times}}else{if(t.times<t.totalTimes){t.totalTimes=t.times}}}else{if(t.totalTimes>t.POLLING_TIMES){t.totalTimes=t.POLLING_TIMES}}t.totalTimes--}},{key:"serviceProcessCompleted",value:function e(t){t=(0,f.transformResult)(t);this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function e(t){t=(0,f.transformResult)(t);var r=t;this.events.triggerEvent("processFailed",{error:r})}},{key:"_commit",value:function e(t){if(t.method==="POST"||t.method==="PUT"){if(t.params){t.url=(0,f.urlAppend)(t.url,(0,f.getParameterString)(t.params||{}))}t.params=t.data}p.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(e){var r=void 0;if(e.text){r=function t(){return e.text()}}else{r=function t(){return e.json()}}if(e.status==200){return new i.default(function(n){r().then(function(e){if(!e)return;var r=null;if(typeof e==="string"&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")){r={};if(e.toLowerCase()==="true"){r.succeed=true}else{r.succeed=false;r.error=true}}else if(typeof e==="string"){r=(new h.JSONFormat).read(e)}if(!r&&isNaN(r)||r.error){if(r&&r.error){r={error:r.error}}else{r={error:true}}}if(r.error){var n=t.scope?(0,f.bind)(t.failure,t.scope):t.failure;n(r)}else{if(!isNaN(r)){r={value:r}}if(typeof r==="string"){r={value:r}}if(Object.prototype.toString.call(r)!=="[object Array]"){r.succeed=r.succeed===undefined?true:r.succeed}else{r={value:r,succeed:true}}var i=t.scope?(0,f.bind)(t.success,t.scope):t.success;i(r)}});n(e.status)},function(e){console.log("Fetch",e)})}else{return new i.default(function(n){r().then(function(e){if(!e)return;var r=null;if(typeof e==="string"&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")){r={};r.succeed=false}else if(typeof e==="string"){r=(new h.JSONFormat).read(e)}if(!r&&isNaN(r)||!r.success){r={succeed:false}}var n=t.scope?(0,f.bind)(t.failure,t.scope):t.failure;n(r)});n(e.status)},function(e){console.log("Fetch",e)})}}).catch(function(e){var r={error:true,value:{}};var n=t.scope?(0,f.bind)(t.failure,t.scope):t.failure;n(r)}).then(function(e,t){})}}]);return e}();t.CommonServiceBase=v;l.Zondy.Service.CommonServiceBase=v},function(e,t,r){var n=r(46);var i=r(14)("toStringTag");var o=n(function(){return arguments}())=="Arguments";var a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return e===undefined?"Undefined":e===null?"Null":typeof(r=a(t=Object(e),i))=="string"?r:o?n(t):(s=n(t))=="Object"&&typeof t.callee=="function"?"Arguments":s}},function(e,t,r){var n=r(165);var i=r(14)("iterator");var o=r(49);e.exports=r(10).getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){var n=r(21);var i=r(56);var o=r(14)("species");e.exports=function(e,t){var r=n(e).constructor;var a;return r===undefined||(a=n(r)[o])==undefined?t:i(a)}},function(e,t){e.exports=function(e){try{return{e:false,v:e()}}catch(e){return{e:true,v:e}}}},function(e,t,r){var n=r(21);var i=r(30);var o=r(104);e.exports=function(e,t){n(e);if(i(t)&&t.constructor===e)return t;var r=o.f(e);var a=r.resolve;a(t);return r.promise}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Events=undefined;var n=r(24);var i=a(n);var o=r(6);function a(e){return e&&e.__esModule?e:{default:e}}var s=function e(t,r,n,i){this.listeners={};this.object=t;this.eventTypes=[];this.extensions={};this.extensionCount={};(0,o.extend)(this,i);if(n!=null){for(var a=0,s=n.length;a<s;a++){this.addEventType(n[a])}}};s.prototype.destroy=function(){for(var e in this.extensions){if(typeof this.extensions[e]!=="boolean"){this.extensions[e].destroy()}}this.extensions=null;this.listeners=null;this.object=null;this.eventTypes=null};s.prototype.addEventType=function(e){if(!this.listeners[e]){this.eventTypes.push(e);this.listeners[e]=[]}};s.prototype.on=function(e){for(var t in e){if(t!=="scope"&&e.hasOwnProperty(t)){this.register(t,e.scope,e[t])}}};s.prototype.register=function(e,t,r,n){if(e in s&&!this.extensions[e]){this.extensions[e]=new s[e](this)}if(r!=null&&(0,o.indexOf)(this.eventTypes,e)!==-1){if(t==null){t=this.object}var a=this.listeners[e];if(!a){a=[];this.listeners[e]=a;this.extensionCount[e]=0}var u={obj:t,func:r};if(n){a.splice(this.extensionCount[e],0,u);if((typeof n==="undefined"?"undefined":(0,i.default)(n))==="object"&&n.extension){this.extensionCount[e]++}}else{a.push(u)}}};s.prototype.registerPriority=function(e,t,r){this.register(e,t,r,true)};s.prototype.un=function(e){for(var t in e){if(t!=="scope"&&e.hasOwnProperty(t)){this.unregister(t,e.scope,e[t])}}};s.prototype.unregister=function(e,t,r){if(t==null){t=this.object}var n=this.listeners[e];if(n!=null){for(var i=0,o=n.length;i<o;i++){if(n[i].obj===t&&n[i].func===r){n.splice(i,1);break}}}};s.prototype.remove=function(e){if(this.listeners[e]!=null){this.listeners[e]=[]}};s.prototype.triggerEvent=function(e,t){var r=this.listeners[e];if(!r||r.length==0){return undefined}if(t==null){t={}}t.object=this.object;if(!t.type){t.type=e}r=r.slice();var n;for(var i=0,o=r.length;i<o;i++){var a=r[i];n=a.func.apply(a.obj,[t.result]);if(n!=undefined&&n==false){break}}return n};t.Events=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.JSONFormat=undefined;var n=r(24);var i=u(n);var o=r(8);var a=u(o);var s=r(6);function u(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){this.data=null;this.keepData=false;this.indent="    ";this.space=" ";this.newline="\n";this.level=0;this.pretty=false;this.nativeJSON=function(){return!!(window.JSON&&typeof JSON.parse==="function"&&typeof a.default==="function")}();(0,s.extend)(this,t);this.options=t;this.serialize={object:function e(t){if(t==null){return"null"}if(t.constructor===Date){return this.serialize.date.apply(this,[t])}if(t.constructor===Array){return this.serialize.array.apply(this,[t])}var r=["{"];this.level+=1;var n,i,o;var a=false;for(n in t){if(t.hasOwnProperty(n)){i=this.write.apply(this,[n,this.pretty]);o=this.write.apply(this,[t[n],this.pretty]);if(i!=null&&o!=null){if(a){r.push(",")}r.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),o);a=true}}}this.level-=1;r.push(this.writeNewline(),this.writeIndent(),"}");return r.join("")},array:function e(t){var r;var n=["["];this.level+=1;for(var i=0,o=t.length;i<o;++i){r=this.write.apply(this,[t[i],this.pretty]);if(r!=null){if(i>0){n.push(",")}n.push(this.writeNewline(),this.writeIndent(),r)}}this.level-=1;n.push(this.writeNewline(),this.writeIndent(),"]");return n.join("")},string:function e(t){var r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(t)){return'"'+t.replace(/([\x00-\x1f\\"])/g,function(e,t){var n=r[t];if(n){return n}n=t.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})+'"'}return'"'+t+'"'},number:function e(t){return isFinite(t)?String(t):"null"},boolean:function e(t){return String(t)},date:function e(t){function r(e){return e<10?"0"+e:e}return'"'+t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+'"'}}};l.prototype.read=function(e,t){var r;if(this.nativeJSON){try{r=JSON.parse(e,t)}catch(e){}}if(this.keepData){this.data=r}return r};l.prototype.write=function(e,t){this.pretty=!!t;var r=null;var n=typeof e==="undefined"?"undefined":(0,i.default)(e);if(this.serialize[n]){try{r=!this.pretty&&this.nativeJSON?(0,a.default)(e):this.serialize[n].apply(this,[e])}catch(e){Console.error("Trouble serializing: "+e)}}return r};l.prototype.writeIndent=function(){var e=[];if(this.pretty){for(var t=0;t<this.level;++t){e.push(this.indent)}}return e.join("")};l.prototype.writeNewline=function(){return this.pretty?this.newline:""};l.prototype.writeSpace=function(){return this.pretty?this.space:""};t.JSONFormat=l;Zondy.Service.JSONFormat=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FetchRequest=t.RequestTimeout=t.CORS=undefined;var n=r(24);var i=f(n);var o=r(102);var a=f(o);var s=r(8);var u=f(s);var l=r(6);r(305);r(310);function f(e){return e&&e.__esModule?e:{default:e}}var c=window.fetch;var h=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;var p=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3;var d=Zondy.FetchRequest={commit:function e(t,r,n,i){t=t?t.toUpperCase():t;switch(t){case"GET":return this._get(r,n,i);case"POST":return this._post(r,n,i);case"PUT":return this._put(r,n,i);case"DELETE":return this._delete(r,n,i);default:return this._get(r,n,i)}},_get:function e(t,r,n){n=n||{};var i="GET";t=this._processUrl(t,n);t=Zondy.Util.urlAppend(t,this._getParameterString(r||{}));if(!this.urlIsLong(t)){return this._fetch(t,r,n,i)}return this._postSimulatie(i,t.substring(0,t.indexOf("?")-1),r,n)},_delete:function e(t,r,n){n=n||{};var i="DELETE";t=this._processUrl(t,n);t=Zondy.Util.urlAppend(t,this._getParameterString(r||{}));if(!this.urlIsLong(t)&&h){return this._fetch(t,r,n,i)}return this._postSimulatie(i,t.substring(0,t.indexOf("?")-1),r,n)},_post:function e(t,r,n){n=n||{};return this._fetch(this._processUrl(t,n),r,n,"POST")},_put:function e(t,r,n){n=n||{};return this._fetch(this._processUrl(t,n),r,n,"PUT")},urlIsLong:function e(t){var r=0,n=null;for(var i=0,o=t.length;i<o;i++){n=t.charCodeAt(i);if(n<127){r++}else if(128<=n&&n<=2047){r+=2}else if(2048<=n&&n<=65535){r+=3}}return r<2e3?false:true},_postSimulatie:function e(t,r,n,i){var o=r.indexOf("?")>-1?"&":"?";r+=o+"_method="+t;if(typeof n!=="string"){n=(0,u.default)(n)}return this._post(r,n,i)},_processUrl:function e(t,r){if(this._isMVTRequest(t)){return t}if(r&&r.proxy){if(typeof r.proxy==="function"){t=r.proxy(t)}else{t=decodeURIComponent(t);t=r.proxy+encodeURIComponent(t)}}return t},_fetch:function e(t,r,n,i){n=n||{};n.headers=n.headers||{};if(!n.headers["Content-Type"]){n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"}if(n.timeout){return this._timeout(n.timeout,c(t,{method:i,headers:n.headers,body:i==="PUT"||i==="POST"?r:undefined,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:p}).then(function(e){return e}))}return c(t,{method:i,body:i==="PUT"||i==="POST"?r:undefined,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:p}).then(function(e){return e}).catch(function(e){return e})},_timeout:function e(t,r){return new a.default(function(e,n){setTimeout(function(){n(new Error("timeout"))},t);r.then(e,n)})},_getParameterString:function e(t){var r=[];for(var n in t){var o=t[n];if(o!=null&&typeof o!=="function"){var a;if((typeof o==="undefined"?"undefined":(0,i.default)(o))==="object"&&o.constructor===Array){var s=[];var u;for(var l=0,f=o.length;l<f;l++){u=o[l];s.push(encodeURIComponent(u===null||u===undefined?"":u))}a="["+s.join(",")+"]"}else{a=encodeURIComponent(o)}r.push(encodeURIComponent(n)+"="+a)}}return r.join("&")},_isMVTRequest:function e(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};t.CORS=h;t.RequestTimeout=p;t.FetchRequest=d;Zondy.Service.FetchRequest=d;Zondy.Service.CORS=h;Zondy.Service.RequestTimeout=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GDBInfo=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(39);var d=r(9);var v=r(6);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.serverName=r.serverName!==undefined?r.serverName:null;n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.dsName=r.dsName!==undefined?r.dsName:null;n.rcsName=r.rcsName!==undefined?r.rcsName:null;n.User=r.User!==undefined?r.User:null;n.Password=r.Password!==undefined?r.Password:null;n.containAll=r.containAll!==undefined?r.containAll:true;return n}(0,u.default)(t,[{key:"getServerList",value:function e(t,r){var n=this;n.partUrl="datasource?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getGDBList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"?f=json"}else{n.partUrl="datasource/"+n.serverName+"?user="+n.User+"&psw="+n.Password+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getDsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getRcsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase()==="mapgislocal"){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?f=json"}else{n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json"}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getProjectList",value:function e(t,r){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"?f=json";var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getProjectInfo",value:function e(t,r,n){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?f=json";var o=i.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"AttachGDB",value:function e(t,r,n){var i=this;if(i.serverName===null||i.gdbName===null||t===null){return}i.partUrl="gdb/attach/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"DetachGDB",value:function e(t,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/detach/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"CreateGDB",value:function e(t,r,n){var i=this;if(i.serverName===null||i.gdbName===null){return}if(i.serverName.toLowerCase()==="mapgislocal"&&t===null){return}i.partUrl="gdb/creat/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json";if(i.User!==null&&i.Password!==null){i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password}var o=i.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"DeleteGDB",value:function e(t,r){var n=this;if(n.serverName===null||n.gdbName===null){return}n.partUrl="gdb/delete/"+n.gdbName+"?gdbSvrName="+n.serverName;if(n.User!==null&&n.Password!==null){n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}}]);return t}(p.CatalogService);t.GDBInfo=g;Zondy.Catalog.GDBInfo=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VFeature=t.VPolyline=t.VPolygon=t.VPoint=t.BaseParameter=t.ObjectIdsParameter=t.RectangleParameter=t.GeometryParameter=t.SQLParameter=t.FeatureService=t.QueryUnifyParameter=t.QueryServiceBase=t.QueryParameterBase=t.QueryParameter=t.QueryLayerFeature=t.QueryFeatureStruct=t.QueryFeatureRule=t.QueryDocFeature=t.QueryByLayerParameter=t.ObjClsQueryParameter=t.ObjClsQuery=t.MultiGeoQueryParameter=t.MultiGeoQuery=t.EditServiceBase=t.EditLayerFeature=t.EditDocFeature=undefined;var n=r(319);var i=r(320);var o=r(105);var a=r(321);var s=r(177);var u=r(322);var l=r(178);var f=r(179);var c=r(180);var h=r(176);var p=r(106);var d=r(323);var v=r(66);var y=r(175);var g=r(50);var m=r(324);var _=r(333);var b=r(337);var S=r(338);var x=r(340);var C=r(341);var w=r(40);var P=r(107);var I=r(112);var E=r(111);var L=r(342);t.EditDocFeature=n.EditDocFeature;t.EditLayerFeature=i.EditLayerFeature;t.EditServiceBase=o.EditServiceBase;t.MultiGeoQuery=a.MultiGeoQuery;t.MultiGeoQueryParameter=s.MultiGeoQueryParameter;t.ObjClsQuery=u.ObjClsQuery;t.ObjClsQueryParameter=l.ObjClsQueryParameter;t.QueryByLayerParameter=f.QueryByLayerParameter;t.QueryDocFeature=c.QueryDocFeature;t.QueryFeatureRule=h.QueryFeatureRule;t.QueryFeatureStruct=p.QueryFeatureStruct;t.QueryLayerFeature=d.QueryLayerFeature;t.QueryParameter=v.QueryParameter;t.QueryParameterBase=y.QueryParameterBase;t.QueryServiceBase=g.QueryServiceBase;t.QueryUnifyParameter=m.QueryUnifyParameter;t.FeatureService=_.FeatureService;t.SQLParameter=b.SQLParameter;t.GeometryParameter=S.GeometryParameter;t.RectangleParameter=x.RectangleParameter;t.ObjectIdsParameter=C.ObjectIdsParameter;t.BaseParameter=w.BaseParameter;t.VPoint=P.VPoint;t.VPolygon=I.VPolygon;t.VPolyline=E.VPolyline;t.VFeature=L.VFeature},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryParameterBase=undefined;var n=r(1);var i=l(n);var o=r(0);var a=r(6);var s=r(106);var u=r(176);function l(e){return e&&e.__esModule?e:{default:e}}var f=function e(t){(0,i.default)(this,e);var r=t?t:{};(0,a.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.where=r.where!==undefined?r.where:null;this.rule=r.rule!==undefined?r.rule:new u.QueryFeatureRule;this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.pageIndex=r.pageIndex!==undefined?r.pageIndex:0;this.recordNumber=r.recordNumber!==undefined?r.recordNumber:20;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.struct=r.struct!==undefined?r.struct:new s.QueryFeatureStruct;this.orderField=r.orderField!==undefined?r.orderField:null;this.rtnLabel=r.rtnLabel!==undefined?r.rtnLabel:false;this.fields=r.fields||"";this.coordPrecision=r.coordPrecision||r.coordPrecision===0?r.coordPrecision:2;this.isAsc=r.isAsc!==undefined?r.isAsc:false;this.cursorType=r.cursorType!==undefined?r.cursorType:"forward";this.proj=r.proj||null;this.guid=r.guid||"__readonly_user__"};t.QueryParameterBase=f;o.Zondy.Service.QueryParameterBase=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryFeatureRule=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t?t:{};(0,i.extend)(this,r);this.CompareRectOnly=r.CompareRectOnly!==undefined&&typeof r.CompareRectOnly==="boolean"?r.CompareRectOnly:false;this.EnableDisplayCondition=r.EnableDisplayCondition!==undefined&&typeof r.EnableDisplayCondition==="boolean"?r.EnableDisplayCondition:false;this.MustInside=r.MustInside!==undefined&&typeof r.MustInside==="boolean"?r.MustInside:false;this.Intersect=r.Intersect!==undefined&&typeof r.Intersect==="boolean"?r.Intersect:false};o.prototype.toJSON=function(){return(0,i.toJSON)(this)};t.QueryFeatureRule=o;n.Zondy.Service.QueryFeatureRule=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MultiGeoQueryParameter=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.geometry=r.geometry!==undefined?r.geometry:null;this.geometryType=r.geometryType!==undefined?r.geometryType:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json";this.nearDis=r.nearDis!==undefined?r.nearDis:1e-4};o.prototype.getParameterURL=function(){var e="";e+="?f="+this.resultFormat;e+="&geometryType="+this.geometryType;e+="&nearDis="+this.nearDis;return e};t.MultiGeoQueryParameter=o;n.Zondy.Service.MultiGeoQueryParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjClsQueryParameter=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.objectIds=r.objectIds!==undefined?r.objectIds:null;this.where=r.where!==undefined?r.where:null;this.resultFormat=r.resultFormat!==undefined?r.resultFormat:"json"};o.prototype.getParameterURL=function(){var e="";e+="&f="+this.resultFormat;if(this.objectIds!==null){e+="&objectIds="+this.objectIds}else{if(this.where!==null){e+="&where="+this.where}}return e};t.ObjClsQueryParameter=o;n.Zondy.Service.ObjClsQueryParameter=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryByLayerParameter=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(66);var g=r(106);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.gdbp=e!==undefined?e:null;return o}(0,u.default)(t,[{key:"getParameterURL",value:function e(){var r=(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"getParameterURL",this).call(this);return r+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function e(){var r=(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"getParameterObject",this).call(this,this);r.gdbp=this.gdbp;return r}}]);return t}(y.QueryParameter);t.QueryByLayerParameter=_;v.Zondy.Service.QueryByLayerParameter=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryDocFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(50);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e,r,n,o){(0,a.default)(this,t);var s=o?o:{};var l=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,s));l.queryParam=e;l.docName=r;l.layerIndex=n==undefined?-1:n;l.mapIndex=0;l.partUrl="docs/"+l.docName+"/"+l.mapIndex.toString()+"/"+l.layerIndex.toString()+"/query";return l}return t}(h.QueryServiceBase);t.QueryDocFeature=d;c.Zondy.Service.QueryDocFeature=d},function(e,t,r){e.exports={default:r(334),__esModule:true}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CAllOtherDataItemInfoSource=undefined;var n=r(0);var i={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};t.CAllOtherDataItemInfoSource=i;n.Zondy.Object.Theme.CAllOtherDataItemInfoSource=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CAnnInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Ovprnt!==undefined?r.Ovprnt:0;this.BackClr=r.BackClr!==undefined?r.BackClr:0;this.BackExp=r.BackExp!==undefined?r.BackExp:0;this.Chnt=r.Chnt!==undefined?r.Chnt:0;this.Color=r.Color!==undefined?r.Color:0;this.FontAngle=r.FontAngle!==undefined?r.FontAngle:0;this.Height=r.Height!==undefined?r.Height:0;this.Ifnt=r.Ifnt!==undefined?r.Ifnt:0;this.Ifnx=r.Ifnx!==undefined?r.Ifnx:0;this.IsFilled=r.IsFilled!==undefined?r.IsFilled:false;this.IsHzpl=r.IsHzpl!==undefined?r.IsHzpl:true;this.OffsetX=r.OffsetX!==undefined?r.OffsetX:0;this.OffsetY=r.OffsetY!==undefined?r.OffsetY:0;this.Space=r.Space!==undefined?r.Space:0;this.Width=r.Width!==undefined?r.Width:0};t.CAnnInfo=o;n.Zondy.Object.Theme.CAnnInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CChartLabelFormat=undefined;var n=r(0);var i={Unknown:0,Value:1,Percent:2};t.CChartLabelFormat=i;n.Zondy.Object.Theme.CChartLabelFormat=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CChartTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(3);var u=y(s);var l=r(4);var f=y(l);var c=r(0);var h=r(23);var p=r(186);var d=r(187);var v=r(190);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.ChartType=r.ChartType!==undefined?r.ChartType:p.CChartType.Bar;n.ChartThemeInfoArr=r.ChartThemeInfoArr!==undefined?r.ChartThemeInfoArr:null;n.RepresentInfo=r.RepresentInfo!==undefined?r.RepresentInfo:null;n.Type="CChartTheme";return n}return t}(h.CTheme);t.CChartTheme=g;c.Zondy.Object.Theme.CChartTheme=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CChartType=undefined;var n=r(0);var i={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};t.CChartType=i;n.Zondy.Object.Theme.CChartType=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CChartThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(31);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.Expression=e!==undefined?e:"";return o}return t}(h.CThemeInfo);t.CChartThemeInfo=d;c.Zondy.Object.Theme.CChartThemeInfo=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CLinInfo=undefined;var n=r(0);var i=r(6);var o=r(15);var a=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.AdjustFlg=r.AdjustFlg!==undefined?r.AdjustFlg:o.CLinAdjustType.Adjust;this.HeadType=r.HeadType!==undefined?r.HeadType:o.CLinHeadType.Round;this.JointType=r.JointType!==undefined?r.JointType:o.CLinJointType.Round;this.LinStyID=r.LinStyID!==undefined?r.LinStyID:0;this.MakeMethod=r.MakeMethod!==undefined?r.MakeMethod:o.CLinStyleMakeType.Byrule;this.OutClr=r.OutClr!==undefined?r.OutClr:[46,4,3];this.XScale=r.XScale!==undefined?r.XScale:10;this.YScale=r.YScale!==undefined?r.YScale:10;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:[.05,.05,.05]};t.CLinInfo=a;n.Zondy.Object.Theme.CLinInfo=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRegInfo=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.LibID=r.LibID!==undefined?r.LibID:0;this.Ovprnt=r.Ovprnt!==undefined?r.Ovprnt:false;this.Angle=r.Angle!==undefined?r.Angle:0;this.EndClr=r.EndClr!==undefined?r.EndClr:0;this.FillClr=r.FillClr!==undefined?r.FillClr:46;this.FillMode=r.FillMode!==undefined?r.FillMode:0;this.FullPatFlg=r.FullPatFlg!==undefined?r.FullPatFlg:true;this.PatClr=r.PatClr!==undefined?r.PatClr:3;this.PatHeight=r.PatHeight!==undefined?r.PatHeight:5;this.PatID=r.PatID!==undefined?r.PatID:0;this.PatWidth=r.PatWidth!==undefined?r.PatWidth:5;this.OutPenW=r.OutPenW!==undefined?r.OutPenW:1};t.CRegInfo=o;n.Zondy.Object.Theme.CRegInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CChartThemeRepresentInfo=undefined;var n=r(0);var i=r(6);var o=r(183);var a=r(184);var s=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.AnnInfoLabel=r.AnnInfoLabel!==undefined?r.AnnInfoLabel:new o.CAnnInfo;this.DigitLabel=r.DigitLabel!==undefined?r.DigitLabel:0;this.FormatLabel=r.FormatLabel!==undefined?r.FormatLabel:a.CChartLabelFormat.Unknown;this.IsDrawLabel=r.IsDrawLabel!==undefined?r.IsDrawLabel:true;this.LineColor=r.LineColor!==undefined?r.LineColor:-1;this.MaxLength=r.MaxLength!==undefined?r.MaxLength:30;this.MinRadius=r.MinRadius!==undefined?r.MinRadius:10;this.PieSizeFixFlag=r.PieSizeFixFlag!==undefined?r.PieSizeFixFlag:0;this.PieTiltedAngle=r.PieTiltedAngle!==undefined?r.PieTiltedAngle:30;this.PlotRadius=r.PlotRadius!==undefined?r.PlotRadius:1;this.ThickPersent=r.ThickPersent!==undefined?r.ThickPersent:10;this.Width=r.Width!==undefined?r.Width:3};t.CChartThemeRepresentInfo=s;n.Zondy.Object.Theme.CChartThemeRepresentInfo=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CDotDensityTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(23);var p=r(68);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.Expression=r.Expression!==undefined?r.Expression:"";n.Info=r.Info!==undefined?r.Info:null;n.Value=r.Value!==undefined?r.Value:null;n.Type="CDotDensityTheme";return n}return t}(h.CTheme);t.CDotDensityTheme=v;c.Zondy.Object.Theme.CDotDensityTheme=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CFourColorTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(23);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.ClrInfo=r.ClrInfo!==undefined?r.ClrInfo:[25,57,89,121];n.Type="CFourColorTheme";return n}return t}(h.CTheme);t.CFourColorTheme=d;c.Zondy.Object.Theme.CFourColorTheme=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CGraduatedSymbolTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(23);var p=r(68);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.BaseValue=r.BaseValue!==undefined?r.BaseValue:141e-6;n.DispMinus=r.DispMinus!==undefined?r.DispMinus:false;n.DispZero=r.DispZero!==undefined?r.DispZero:false;n.Expression=r.Expression!==undefined?r.Expression:null;n.MinusPntInfo=r.MinusPntInfo!==undefined?r.MinusPntInfo:null;n.PlusPntInfo=r.PlusPntInfo!==undefined?r.PlusPntInfo:null;n.ZeroPntInfo=r.ZeroPntInfo!==undefined?r.ZeroPntInfo:null;n.Type="CGraduatedSymbolTheme";return n}return t}(h.CTheme);t.CGraduatedSymbolTheme=v;c.Zondy.Object.Theme.CGraduatedSymbolTheme=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CMultiClassTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(3);var u=v(s);var l=r(4);var f=v(l);var c=r(0);var h=r(23);var p=r(31);var d=r(195);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.ExpInfoArr=r.ExpInfoArr!==undefined?r.ExpInfoArr:null;n.MultiClassThemeInfoArr=r.MultiClassThemeInfoArr!==undefined?r.MultiClassThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CMultiClassTheme";return n}return t}(h.CTheme);t.CMultiClassTheme=y;c.Zondy.Object.Theme.CMultiClassTheme=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExpInfo=undefined;var n=r(0);var i=r(6);var o=function e(t,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.Expression=t!==undefined?t:"";this.ItemValueArr=r!==undefined?r:null};t.ExpInfo=o;n.Zondy.Object.Theme.ExpInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRandomTheme=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(23);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.Type="CRandomTheme";return n}return t}(h.CTheme);t.CRandomTheme=d;c.Zondy.Object.Theme.CRandomTheme=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRangeTheme=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(3);var u=y(s);var l=r(4);var f=y(l);var c=r(0);var h=r(23);var p=r(182);var d=r(31);var v=r(198);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.AllOtherDataItemInfoSource=r.AllOtherDataItemInfoSource!==undefined?r.AllOtherDataItemInfoSource:p.CAllOtherDataItemInfoSource.DefaultThemeInfo;n.Expression=r.Expression!==undefined?r.Expression:"";n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.RangeThemeInfoArr=r.RangeThemeInfoArr!==undefined?r.RangeThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CRangeTheme";return n}return t}(h.CTheme);t.CRangeTheme=g;c.Zondy.Object.Theme.CRangeTheme=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CRangeThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(31);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=n?n:{};var s=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,o));s.StartValue=e!==undefined?e:"";s.EndValue=r!==undefined?r:"";return s}return t}(h.CThemeInfo);t.CRangeThemeInfo=d;c.Zondy.Object.Theme.CRangeThemeInfo=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CSimpleTheme=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(23);var p=r(31);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.ThemeInfo=r.ThemeInfo!==undefined?r.ThemeInfo:new p.CThemeInfo;n.Type="CSimpleTheme";return n}return t}(h.CTheme);t.CSimpleTheme=v;c.Zondy.Object.Theme.CSimpleTheme=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CUniqueTheme=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(3);var u=v(s);var l=r(4);var f=v(l);var c=r(0);var h=r(23);var p=r(31);var d=r(201);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.DefaultInfo=r.DefaultInfo!==undefined?r.DefaultInfo:null;n.Expression=r.Expression!==undefined?r.Expression:"";n.UniqueThemeInfoArr=r.UniqueThemeInfoArr!==undefined?r.UniqueThemeInfoArr:null;n.GeoInfoType=r.GeoInfoType!==undefined?r.GeoInfoType:null;n.Type="CUniqueTheme";return n}return t}(h.CTheme);t.CUniqueTheme=y;c.Zondy.Object.Theme.CUniqueTheme=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CUniqueThemeInfo=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(31);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.Value=e!==undefined?e:"";return o}return t}(h.CThemeInfo);t.CUniqueThemeInfo=d;c.Zondy.Object.Theme.CUniqueThemeInfo=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FolderInfo=undefined;var n=r(0);var i=r(120);var o=function e(t,r){this.name=t!==undefined?t:null;this.attribute=r!==undefined?r:null};t.FolderInfo=o;n.Zondy.Object.Theme.FolderInfo=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemesInfo=undefined;var n=r(0);var i=r(23);var o=function e(t,r){this.LayerName=t!==undefined?t:null;this.ThemeArr=r!==undefined?r:null};t.ThemesInfo=o;n.Zondy.Object.Theme.ThemesInfo=o},function(e,t,r){"use strict";var n=r(125);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var a=function(){var e=[];for(var t=0;t<256;++t){e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase())}return e}();var s=function e(t){while(t.length>1){var r=t.pop();var n=r.obj[r.prop];if(o(n)){var i=[];for(var a=0;a<n.length;++a){if(typeof n[a]!=="undefined"){i.push(n[a])}}r.obj[r.prop]=i}}};var u=function e(t,r){var n=r&&r.plainObjects?Object.create(null):{};for(var i=0;i<t.length;++i){if(typeof t[i]!=="undefined"){n[i]=t[i]}}return n};var l=function e(t,r,n){if(!r){return t}if(typeof r!=="object"){if(o(t)){t.push(r)}else if(t&&typeof t==="object"){if(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r)){t[r]=true}}else{return[t,r]}return t}if(!t||typeof t!=="object"){return[t].concat(r)}var a=t;if(o(t)&&!o(r)){a=u(t,n)}if(o(t)&&o(r)){r.forEach(function(r,o){if(i.call(t,o)){var a=t[o];if(a&&typeof a==="object"&&r&&typeof r==="object"){t[o]=e(a,r,n)}else{t.push(r)}}else{t[o]=r}});return t}return Object.keys(r).reduce(function(t,o){var a=r[o];if(i.call(t,o)){t[o]=e(t[o],a,n)}else{t[o]=a}return t},a)};var f=function e(t,r){return Object.keys(r).reduce(function(e,t){e[t]=r[t];return e},t)};var c=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1"){return n.replace(/%[0-9a-f]{2}/gi,unescape)}try{return decodeURIComponent(n)}catch(e){return n}};var h=function e(t,r,i,o,s){if(t.length===0){return t}var u=t;if(typeof t==="symbol"){u=Symbol.prototype.toString.call(t)}else if(typeof t!=="string"){u=String(t)}if(i==="iso-8859-1"){return escape(u).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"})}var l="";for(var f=0;f<u.length;++f){var c=u.charCodeAt(f);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===n.RFC1738&&(c===40||c===41)){l+=u.charAt(f);continue}if(c<128){l=l+a[c];continue}if(c<2048){l=l+(a[192|c>>6]+a[128|c&63]);continue}if(c<55296||c>=57344){l=l+(a[224|c>>12]+a[128|c>>6&63]+a[128|c&63]);continue}f+=1;c=65536+((c&1023)<<10|u.charCodeAt(f)&1023);l+=a[240|c>>18]+a[128|c>>12&63]+a[128|c>>6&63]+a[128|c&63]}return l};var p=function e(t){var r=[{obj:{o:t},prop:"o"}];var n=[];for(var i=0;i<r.length;++i){var o=r[i];var a=o.obj[o.prop];var u=Object.keys(a);for(var l=0;l<u.length;++l){var f=u[l];var c=a[f];if(typeof c==="object"&&c!==null&&n.indexOf(c)===-1){r.push({obj:a,prop:f});n.push(c)}}}s(r);return t};var d=function e(t){return Object.prototype.toString.call(t)==="[object RegExp]"};var v=function e(t){if(!t||typeof t!=="object"){return false}return!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))};var y=function e(t,r){return[].concat(t,r)};var g=function e(t,r){if(o(t)){var n=[];for(var i=0;i<t.length;i+=1){n.push(r(t[i]))}return n}return r(t)};e.exports={arrayToObject:u,assign:f,combine:y,compact:p,decode:c,encode:h,isBuffer:v,isRegExp:d,maybeMap:g,merge:l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LevelRenderer=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(0);var u=r(6);var l=r(206);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,i.default)(this,e);e._instances={};e.Tool={};this.CLASS_NAME="Zondy.LevelRenderer"}(0,a.default)(e,[{key:"destroy",value:function e(){this.dispose()}},{key:"init",value:function t(r){var n=new l.Render((0,u.newGuid)(),r);e._instances[n.id]=n;return n}},{key:"dispose",value:function t(r){if(r){r.dispose();this.delInstance(r.id)}else{for(var n in e._instances){e._instances[n].dispose()}e._instances={}}return this}},{key:"getInstance",value:function t(r){return e._instances[r]}},{key:"delInstance",value:function t(r){delete e._instances[r];return this}}]);return e}();t.LevelRenderer=c;s.Zondy.LevelRenderer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Render=undefined;var n=r(1);var i=p(n);var o=r(5);var a=p(o);var s=r(0);var u=r(6);var l=r(207);var f=r(216);var c=r(217);var h=r(218);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,r){(0,i.default)(this,e);this.id=t;this.storage=new l.Storage;this.painter=new f.Painter(r,this.storage);this.handler=new c.Handler(r,this.storage,this.painter);this.animatingElements=[];this.animation=new h.Animation({stage:{update:e.getFrameCallback(this)}});this._needsRefreshNextFrame=false;this.animation.start();this.CLASS_NAME="Zondy.LevelRenderer.Render"}(0,a.default)(e,[{key:"destroy",value:function e(){this.id=null;this.storage=null;this.painter=null;this.handler=null;this.animatingElements=null;this.animation=null;this._needsRefreshNextFrame=null}},{key:"getId",value:function e(){return this.id}},{key:"addShape",value:function e(t){this.storage.addRoot(t);return this}},{key:"addGroup",value:function e(t){this.storage.addRoot(t);return this}},{key:"delShape",value:function e(t){this.storage.delRoot(t);return this}},{key:"delGroup",value:function e(t){this.storage.delRoot(t);return this}},{key:"modShape",value:function e(t,r){this.storage.mod(t,r);return this}},{key:"modGroup",value:function e(t,r){this.storage.mod(t,r);return this}},{key:"modLayer",value:function e(t,r){this.painter.modLayer(t,r);return this}},{key:"addHoverShape",value:function e(t){this.storage.addHover(t);return this}},{key:"render",value:function e(t){this.painter.render(t);this._needsRefreshNextFrame=false;return this}},{key:"refresh",value:function e(t){this.painter.refresh(t);this._needsRefreshNextFrame=false;return this}},{key:"refreshNextFrame",value:function e(){this._needsRefreshNextFrame=true;return this}},{key:"refreshHover",value:function e(t){this.painter.refreshHover(t);return this}},{key:"refreshShapes",value:function e(t,r){this.painter.refreshShapes(t,r);return this}},{key:"resize",value:function e(){this.painter.resize();return this}},{key:"animate",value:function e(t,r,n){if(typeof t==="string"){t=this.storage.get(t)}if(t){var i;if(r){var o=r.split(".");var a=t;for(var s=0,l=o.length;s<l;s++){if(!a){continue}a=a[o[s]]}if(a){i=a}}else{i=t}if(!i){return}var f=this.animatingElements;if(typeof t.__aniCount==="undefined"){t.__aniCount=0}if(t.__aniCount===0){f.push(t)}t.__aniCount++;return this.animation.animate(i,{loop:n}).done(function(){t.__aniCount--;if(t.__aniCount===0){var e=(0,u.indexOf)(f,t);f.splice(e,1)}})}}},{key:"clearAnimation",value:function e(){this.animation.clear()}},{key:"getWidth",value:function e(){return this.painter.getWidth()}},{key:"getHeight",value:function e(){return this.painter.getHeight()}},{key:"toDataURL",value:function e(t,r,n){return this.painter.toDataURL(t,r,n)}},{key:"shapeToImage",value:function e(t,r,n){var i=(0,u.newGuid)();return this.painter.shapeToImage(i,t,r,n)}},{key:"on",value:function e(t,r){this.handler.on(t,r);return this}},{key:"un",value:function e(t,r){this.handler.un(t,r);return this}},{key:"trigger",value:function e(t,r){this.handler.trigger(t,r);this.handler.dispatch(t,r);return this}},{key:"clear",value:function e(){this.storage.delRoot();this.painter.clear();return this}},{key:"dispose",value:function e(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=null;this.animatingElements=null;this.storage=null;this.painter=null;this.handler=null}},{key:"updateHoverShapes",value:function e(t){this.painter.updateHoverLayer(t);return this}},{key:"getAllShapes",value:function e(){return this.storage._shapeList}},{key:"clearAll",value:function e(){this.clear();this.painter.clearHover();return this}},{key:"getHoverOne",value:function e(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function e(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++){t.storage.mod(e[r].id)}if(e.length||t._needsRefreshNextFrame){t.refresh()}}}}}]);return e}();t.Render=d;s.Zondy.LevelRenderer.Render=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Storage=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(0);var u=r(6);var l=r(208);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,i.default)(this,e);this._elements={};this._hoverElements=[];this._roots=[];this._shapeList=[];this._shapeListOffset=0;this.CLASS_NAME="Zondy.LevelRenderer.Storage"}(0,a.default)(e,[{key:"destroy",value:function e(){this.dispose();this._shapeList=null;this._shapeListOffset=null}},{key:"iterShape",value:function e(t,r){if(!r){var n={hover:false,normal:"down",update:false};r=n}if(r.hover){for(var i=0,o=this._hoverElements.length;i<o;i++){var a=this._hoverElements[i];a.updateTransform();if(t(a)){return this}}}if(r.update){this.updateShapeList()}switch(r.normal){case"down":{var s=this._shapeList.length;while(s--){if(t(this._shapeList[s])){return this}}break}default:{for(var u=0,l=this._shapeList.length;u<l;u++){if(t(this._shapeList[u])){return this}}break}}return this}},{key:"getHoverShapes",value:function t(r){var n=[],i=this._hoverElements.length;for(var o=0;o<i;o++){n.push(this._hoverElements[o]);var a=this._hoverElements[o].hoverConnect;if(a){var s;a=a instanceof Array?a:[a];for(var u=0,l=a.length;u<l;u++){s=a[u].id?a[u]:this.get(a[u]);if(s){n.push(s)}}}}n.sort(e.shapeCompareFunc);if(r){for(var f=0,c=n.length;f<c;f++){n[f].updateTransform()}}return n}},{key:"getShapeList",value:function e(t){if(t){this.updateShapeList()}return this._shapeList}},{key:"updateShapeList",value:function t(){this._shapeListOffset=0;var r=this._roots.length;for(var n=0;n<r;n++){var i=this._roots[n];this._updateAndAddShape(i)}this._shapeList.length=this._shapeListOffset;var o=this._shapeList.length;for(var a=0;a<o;a++){this._shapeList[a].__renderidx=a}this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function e(t,r){if(t.ignore){return}t.updateTransform();if(t.type==="group"){if(t.clipShape){t.clipShape.parent=t;t.clipShape.updateTransform();if(r){r=r.slice();r.push(t.clipShape)}else{r=[t.clipShape]}}for(var n=0;n<t._children.length;n++){var i=t._children[n];i.__dirty=t.__dirty||i.__dirty;this._updateAndAddShape(i,r)}t.__dirty=false}else{t.__clipShapes=r;this._shapeList[this._shapeListOffset++]=t}}},{key:"mod",value:function e(t,r){var n=this._elements[t];if(n){n.modSelf();if(r){if(r.parent||r._storage||r.__startClip){var i={};for(var o in r){if(o==="parent"||o==="_storage"||o==="__startClip"){continue}if(r.hasOwnProperty(o)){i[o]=r[o]}}(0,u.merge)(n,i,true)}else{(0,u.merge)(n,r,true)}}}return this}},{key:"drift",value:function e(t,r,n){var i=this._elements[t];if(i){i.needTransform=true;if(i.draggable==="horizontal"){n=0}else if(i.draggable==="vertical"){r=0}if(!i.ondrift||i.ondrift&&!i.ondrift(r,n)){i.drift(r,n)}}return this}},{key:"addHover",value:function e(t){t.updateNeedTransform();this._hoverElements.push(t);return this}},{key:"delHover",value:function e(){this._hoverElements=[];return this}},{key:"hasHoverShape",value:function e(){return this._hoverElements.length>0}},{key:"addRoot",value:function e(t){if(t instanceof l.Group){t.addChildrenToStorage(this)}this.addToMap(t);this._roots.push(t)}},{key:"delRoot",value:function e(t){if(typeof t=="undefined"){for(var r=0;r<this._roots.length;r++){var n=this._roots[r];if(n instanceof l.Group){n.delChildrenFromStorage(this)}}this._elements={};this._hoverElements=[];this._roots=[];return}if(t instanceof Array){var i=t.length;for(var o=0;o<i;o++){this.delRoot(t[o])}return}var a;if(typeof t=="string"){a=this._elements[t]}else{a=t}var s=(0,u.indexOf)(this._roots,a);if(s>=0){this.delFromMap(a.id);this._roots.splice(s,1);if(a instanceof l.Group){a.delChildrenFromStorage(this)}}}},{key:"addToMap",value:function e(t){if(t instanceof l.Group){t._storage=this}t.modSelf();this._elements[t.id]=t;return this}},{key:"get",value:function e(t){return this._elements[t]}},{key:"delFromMap",value:function e(t){var r=this._elements[t];if(r){delete this._elements[t];if(r instanceof l.Group){r._storage=null}}return this}},{key:"dispose",value:function e(){this._elements=null;this._roots=null;this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function e(t,r){if(t.zlevel===r.zlevel){if(t.z===r.z){return t.__renderidx-r.__renderidx}return t.z-r.z}return t.zlevel-r.zlevel}}]);return e}();t.Storage=c;s.Zondy.LevelRenderer.Storage=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Group=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(6);var g=r(51);var m=r(70);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));e=e||{};r.id=null;r.type="group";r.clipShape=null;r._children=[];r._storage=null;r.__dirty=true;r.ignore=false;(0,y.extend)(r,e);r.id=r.id||(0,y.newGuid)();r.CLASS_NAME="Zondy.LevelRenderer.Group";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.id=null;this.type=null;this.clipShape=null;this._children=null;this._storage=null;this.__dirty=null;this.ignore=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"children",value:function e(){return this._children.slice()}},{key:"childAt",value:function e(t){return this._children[t]}},{key:"addChild",value:function e(r){if(r===this){return}if(r.parent===this){return}if(r.parent){r.parent.removeChild(r)}this._children.push(r);r.parent=this;if(this._storage&&this._storage!==r._storage){this._storage.addToMap(r);if(r instanceof t){r.addChildrenToStorage(this._storage)}}}},{key:"removeChild",value:function e(r){var n=(0,y.indexOf)(this._children,r);this._children.splice(n,1);r.parent=null;if(this._storage){this._storage.delFromMap(r.id);if(r instanceof t){r.delChildrenFromStorage(this._storage)}}}},{key:"eachChild",value:function e(t,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){t.call(r,o)}else{t(o)}}}},{key:"traverse",value:function e(t,r){var n=!!r;for(var i=0;i<this._children.length;i++){var o=this._children[i];if(n){t.call(r,o)}else{t(o)}if(o.type==="group"){o.traverse(t,r)}}}},{key:"addChildrenToStorage",value:function e(t){for(var r=0;r<this._children.length;r++){var n=this._children[r];t.addToMap(n);if(n.type==="group"){n.addChildrenToStorage(t)}}}},{key:"delChildrenFromStorage",value:function e(t){for(var r=0;r<this._children.length;r++){var n=this._children[r];t.delFromMap(n.id);if(n.type==="group"){n.delChildrenFromStorage(t)}}}},{key:"modSelf",value:function e(){this.__dirty=true}}]);return t}((0,y.mixin)(g.Eventful,m.Transformable));t.Group=b;v.Zondy.LevelRenderer.Group=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Area=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(0);var u=r(42);var l=r(71);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,i.default)(this,e);this.util=new u.Util;this.curve=new l.Curve;this._ctx=null;this._textWidthCache={};this._textHeightCache={};this._textWidthCacheCounter=0;this._textHeightCacheCounter=0;this.TEXT_CACHE_MAX=5e3;this.PI2=Math.PI*2;this.roots=[-1,-1,-1];this.extrema=[-1,-1];this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}(0,a.default)(e,[{key:"normalizeRadian",value:function e(t){t%=this.PI2;if(t<0){t+=this.PI2}return t}},{key:"isInside",value:function e(t,r,n,i){if(!r||!t){return false}var o=t.type;this._ctx=this._ctx||this.util.getContext();var a=this._mathMethod(t,r,n,i);if(typeof a!="undefined"){return a}if(t.buildPath&&this._ctx.isPointInPath){return this._buildPathMethod(t,this._ctx,r,n,i)}switch(o){case"ellipse":case"smicellipse":return true;case"trochoid":var s=r.location==="out"?r.r1+r.r2+r.d:r.r1-r.r2+r.d;return this.isInsideCircle(r,n,i,s);case"rose":return this.isInsideCircle(r,n,i,r.maxr);default:return false}}},{key:"_mathMethod",value:function e(t,r,n,i){var o=t.type;switch(o){case"bezier-curve":if(typeof r.cpX2==="undefined"){return this.isInsideQuadraticStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.xEnd,r.yEnd,r.lineWidth,n,i)}return this.isInsideCubicStroke(r.xStart,r.yStart,r.cpX1,r.cpY1,r.cpX2,r.cpY2,r.xEnd,r.yEnd,r.lineWidth,n,i);case"line":return this.isInsideLine(r.xStart,r.yStart,r.xEnd,r.yEnd,r.lineWidth,n,i);case"broken-line":return this.isInsideBrokenLine(r.pointList,r.lineWidth,n,i);case"smicbroken-line":{var a=n;var s=i;if(t.refOriginalPosition){a=n-t.refOriginalPosition[0];s=i-t.refOriginalPosition[1]}return this.isInsideBrokenLine(r.pointList,r.lineWidth,a,s)}case"ring":return this.isInsideRing(r.x,r.y,r.r0,r.r,n,i);case"smicring":{var u=r.x;var l=r.y;if(t.refOriginalPosition){u=r.x+t.refOriginalPosition[0];l=r.y+t.refOriginalPosition[1]}return this.isInsideRing(u,l,r.r0,r.r,n,i)}case"circle":return this.isInsideCircle(r.x,r.y,r.r,n,i);case"smicpoint":{var f=n;var c=i;if(t.refOriginalPosition){f=n-t.refOriginalPosition[0];c=i-t.refOriginalPosition[1]}return this.isInsideCircle(r.x,r.y,r.r,f,c)}case"sector":{var h=r.startAngle*Math.PI/180;var p=r.endAngle*Math.PI/180;if(!r.clockWise){h=-h;p=-p}return this.isInsideSector(r.x,r.y,r.r0,r.r,h,p,!r.clockWise,n,i)}case"smicsector":{var d=r.startAngle*Math.PI/180;var v=r.endAngle*Math.PI/180;if(!r.clockWise){d=-d;v=-v}var y=r.x;var g=r.y;if(t.refOriginalPosition){y=r.x+t.refOriginalPosition[0];g=r.y+t.refOriginalPosition[1]}return this.isInsideSector(y,g,r.r0,r.r,d,v,!r.clockWise,n,i)}case"path":return this.isInsidePath(r.pathArray,Math.max(r.lineWidth,5),r.brushType,n,i);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(r.pointList,n,i);case"smicpolygon":{var m=n;var _=i;if(t.refOriginalPosition){m=n-t.refOriginalPosition[0];_=i-t.refOriginalPosition[1]}if(t.holePolygonPointLists&&t.holePolygonPointLists.length>0){var b=this.isInsidePolygon(r.pointList,m,_);var S=t.holePolygonPointLists;var x=false;for(var C=0,w=S.length;C<w;C++){var P=S[C];var I=this.isInsidePolygon(P,m,_);if(I===true){x=true}}return b===true&&x===false}else{return this.isInsidePolygon(r.pointList,m,_)}}case"text":var E=r.__rect||t.getRect(r);return this.isInsideRect(E.x,E.y,E.width,E.height,n,i);case"smictext":var L=t.getTextBackground(r);return this.isInsidePolygon(L,n,i);case"rectangle":case"image":return this.isInsideRect(r.x,r.y,r.width,r.height,n,i);case"smicimage":{var T=r.x;var M=r.y;if(t.refOriginalPosition){T=r.x+t.refOriginalPosition[0];M=r.y+t.refOriginalPosition[1]}return this.isInsideRect(T,M,r.width,r.height,n,i)}}}},{key:"_buildPathMethod",value:function e(t,r,n,i,o){r.beginPath();t.buildPath(r,n);r.closePath();return r.isPointInPath(i,o)}},{key:"isOutside",value:function e(t,r,n,i){return!this.isInside(t,r,n,i)}},{key:"isInsideLine",value:function e(t,r,n,i,o,a,s){if(o===0){return false}var u=Math.max(o,5);var l=0;var f=0;if(s>r+u&&s>i+u||s<r-u&&s<i-u||a>t+u&&a>n+u||a<t-u&&a<n-u){return false}if(t!==n){l=(r-i)/(t-n);f=(t*i-n*r)/(t-n)}else{return Math.abs(a-t)<=u/2}var c=l*a-s+f;var h=c*c/(l*l+1);return h<=u/2*u/2}},{key:"isInsideCubicStroke",value:function e(t,r,n,i,o,a,s,u,l,f,c){if(l===0){return false}var h=Math.max(l,5);if(c>r+h&&c>i+h&&c>a+h&&c>u+h||c<r-h&&c<i-h&&c<a-h&&c<u-h||f>t+h&&f>n+h&&f>o+h&&f>s+h||f<t-h&&f<n-h&&f<o-h&&f<s-h){return false}var p=this.curve.cubicProjectPoint(t,r,n,i,o,a,s,u,f,c,null);return p<=h/2}},{key:"isInsideQuadraticStroke",value:function e(t,r,n,i,o,a,s,u,l){if(s===0){return false}var f=Math.max(s,5);if(l>r+f&&l>i+f&&l>a+f||l<r-f&&l<i-f&&l<a-f||u>t+f&&u>n+f&&u>o+f||u<t-f&&u<n-f&&u<o-f){return false}var c=this.curve.quadraticProjectPoint(t,r,n,i,o,a,u,l,null);return c<=f/2}},{key:"isInsideArcStroke",value:function e(t,r,n,i,o,a,s,u,l){var f=this.PI2;if(s===0){return false}var c=Math.max(s,5);u-=t;l-=r;var h=Math.sqrt(u*u+l*l);if(h-c>n||h+c<n){return false}if(Math.abs(i-o)>=f){return true}if(a){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=f}var d=Math.atan2(l,u);if(d<0){d+=f}return d>=i&&d<=o||d+f>=i&&d+f<=o}},{key:"isInsideBrokenLine",value:function e(t,r,n,i){var o=Math.max(r,10);for(var a=0,s=t.length-1;a<s;a++){var u=t[a][0];var l=t[a][1];var f=t[a+1][0];var c=t[a+1][1];if(this.isInsideLine(u,l,f,c,o,n,i)){return true}}return false}},{key:"isInsideRing",value:function e(t,r,n,i,o,a){var s=(o-t)*(o-t)+(a-r)*(a-r);return s<i*i&&s>n*n}},{key:"isInsideRect",value:function e(t,r,n,i,o,a){return o>=t&&o<=t+n&&a>=r&&a<=r+i}},{key:"isInsideCircle",value:function e(t,r,n,i,o){return(i-t)*(i-t)+(o-r)*(o-r)<n*n}},{key:"isInsideSector",value:function e(t,r,n,i,o,a,s,u,l){return this.isInsideArcStroke(t,r,(n+i)/2,o,a,s,i-n,u,l)}},{key:"isInsidePolygon",value:function e(t,r,n){var i=t.length;var o=0;for(var a=0,s=i-1;a<i;a++){var u=t[s][0];var l=t[s][1];var f=t[a][0];var c=t[a][1];o+=this.windingLine(u,l,f,c,r,n);s=a}return o!==0}},{key:"windingLine",value:function e(t,r,n,i,o,a){if(a>r&&a>i||a<r&&a<i){return 0}if(i==r){return 0}var s=i<r?1:-1;var u=(a-r)/(i-r);var l=u*(n-t)+t;return l>o?s:0}},{key:"swapExtrema",value:function e(){var t=this.extrema[0];this.extrema[0]=this.extrema[1];this.extrema[1]=t}},{key:"windingCubic",value:function e(t,r,n,i,o,a,s,u,l,f){var c=this.curve;var h=this.roots;var p=this.extrema;if(f>r&&f>i&&f>a&&f>u||f<r&&f<i&&f<a&&f<u){return 0}var d=c.cubicRootAt(r,i,a,u,f,h);if(d===0){return 0}else{var v=0;var y=-1;var g,m;for(var _=0;_<d;_++){var b=h[_];var S=c.cubicAt(t,n,o,s,b);if(S<l){continue}if(y<0){y=c.cubicExtrema(r,i,a,u,p);if(p[1]<p[0]&&y>1){this.swapExtrema()}g=c.cubicAt(r,i,a,u,p[0]);if(y>1){m=c.cubicAt(r,i,a,u,p[1])}}if(y===2){if(b<p[0]){v+=g<r?1:-1}else if(b<p[1]){v+=m<g?1:-1}else{v+=u<m?1:-1}}else{if(b<p[0]){v+=g<r?1:-1}else{v+=u<g?1:-1}}}return v}}},{key:"windingQuadratic",value:function e(t,r,n,i,o,a,s,u){var l=this.curve;var f=this.roots;if(u>r&&u>i&&u>a||u<r&&u<i&&u<a){return 0}var c=l.quadraticRootAt(r,i,a,u,f);if(c===0){return 0}else{var h=l.quadraticExtremum(r,i,a);if(h>=0&&h<=1){var p=0;var d=l.quadraticAt(r,i,a,h);for(var v=0;v<c;v++){var y=l.quadraticAt(t,n,o,f[v]);if(y>s){continue}if(f[v]<h){p+=d<r?1:-1}else{p+=a<d?1:-1}}return p}else{var g=l.quadraticAt(t,n,o,f[0]);if(g>s){return 0}return a<r?1:-1}}}},{key:"windingArc",value:function e(t,r,n,i,o,a,s,u){var l=this.roots;var f=this.PI2;u-=r;if(u>n||u<-n){return 0}var c=Math.sqrt(n*n-u*u);l[0]=-c;l[1]=c;if(Math.abs(i-o)>=f){i=0;o=f;var h=a?1:-1;if(s>=l[0]+t&&s<=l[1]+t){return h}else{return 0}}if(a){var p=i;i=this.normalizeRadian(o);o=this.normalizeRadian(p)}else{i=this.normalizeRadian(i);o=this.normalizeRadian(o)}if(i>o){o+=f}var d=0;for(var v=0;v<2;v++){var y=l[v];if(y+t>s){var g=Math.atan2(u,y);var m=a?1:-1;if(g<0){g=f+g}if(g>=i&&g<=o||g+f>=i&&g+f<=o){if(g>Math.PI/2&&g<Math.PI*1.5){m=-m}d+=m}}}return d}},{key:"isInsidePath",value:function e(t,r,n,i,o){var a=0;var s=0;var u=0;var l=0;var f=0;var c=true;var h=true;n=n||"fill";var p=n==="stroke"||n==="both";var d=n==="fill"||n==="both";for(var v=0;v<t.length;v++){var y=t[v];var g=y.points;if(c||y.command==="M"){if(v>0){if(d){a+=this.windingLine(s,u,l,f,i,o)}if(a!==0){return true}}l=g[g.length-2];f=g[g.length-1];c=false;if(h&&y.command!=="A"){h=false;s=l;u=f}}switch(y.command){case"M":s=g[0];u=g[1];break;case"L":if(p){if(this.isInsideLine(s,u,g[0],g[1],r,i,o)){return true}}if(d){a+=this.windingLine(s,u,g[0],g[1],i,o)}s=g[0];u=g[1];break;case"C":if(p){if(this.isInsideCubicStroke(s,u,g[0],g[1],g[2],g[3],g[4],g[5],r,i,o)){return true}}if(d){a+=this.windingCubic(s,u,g[0],g[1],g[2],g[3],g[4],g[5],i,o)}s=g[4];u=g[5];break;case"Q":if(p){if(this.isInsideQuadraticStroke(s,u,g[0],g[1],g[2],g[3],r,i,o)){return true}}if(d){a+=this.windingQuadratic(s,u,g[0],g[1],g[2],g[3],i,o)}s=g[2];u=g[3];break;case"A":var m=g[0];var _=g[1];var b=g[2];var S=g[3];var x=g[4];var C=g[5];var w=Math.cos(x)*b+m;var P=Math.sin(x)*S+_;if(!h){a+=this.windingLine(s,u,w,P)}else{h=false;l=w;f=P}var I=(i-m)*S/b+m;if(p){if(this.isInsideArcStroke(m,_,S,x,x+C,1-g[7],r,I,o)){return true}}if(d){a+=this.windingArc(m,_,S,x,x+C,1-g[7],I,o)}s=Math.cos(x+C)*b+m;u=Math.sin(x+C)*S+_;break;case"z":if(p){if(this.isInsideLine(s,u,l,f,r,i,o)){return true}}c=true;break}}if(d){a+=this.windingLine(s,u,l,f,i,o)}return a!==0}},{key:"getTextWidth",value:function e(t,r){var n=t+":"+r;if(this._textWidthCache[n]){return this._textWidthCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}t=(t+"").split("\n");var i=0;for(var o=0,a=t.length;o<a;o++){i=Math.max(this._ctx.measureText(t[o]).width,i)}this._ctx.restore();this._textWidthCache[n]=i;if(++this._textWidthCacheCounter>this.TEXT_CACHE_MAX){this._textWidthCacheCounter=0;this._textWidthCache={}}return i}},{key:"getTextHeight",value:function e(t,r){var n=t+":"+r;if(this._textHeightCache[n]){return this._textHeightCache[n]}this._ctx=this._ctx||this.util.getContext();this._ctx.save();if(r){this._ctx.font=r}t=(t+"").split("\n");var i=(this._ctx.measureText("ZH").width+2)*t.length;this._ctx.restore();this._textHeightCache[n]=i;if(++this._textHeightCacheCounter>this.TEXT_CACHE_MAX){this._textHeightCacheCounter=0;this._textHeightCache={}}return i}}]);return e}();t.Area=c;s.Zondy.LevelRenderer.Tool.Area=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ComputeBoundingBox=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(0);var u=r(71);var l=r(72);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,i.default)(this,e);if(arguments.length===3){this.computeBoundingBox(arguments)}this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}(0,a.default)(e,[{key:"computeBoundingBox",value:function e(t,r,n){if(t.length===0){return}var i=t[0][0];var o=t[0][0];var a=t[0][1];var s=t[0][1];for(var u=1;u<t.length;u++){var l=t[u];if(l[0]<i){i=l[0]}if(l[0]>o){o=l[0]}if(l[1]<a){a=l[1]}if(l[1]>s){s=l[1]}}r[0]=i;r[1]=a;n[0]=o;n[1]=s}},{key:"cubeBezier",value:function e(t,r,n,i,o,a){var s=new u.Curve;var l=[];s.cubicExtrema(t[0],r[0],n[0],i[0],l);for(var f=0;f<l.length;f++){l[f]=s.cubicAt(t[0],r[0],n[0],i[0],l[f])}var c=[];s.cubicExtrema(t[1],r[1],n[1],i[1],c);for(var h=0;h<c.length;h++){c[h]=s.cubicAt(t[1],r[1],n[1],i[1],c[h])}l.push(t[0],i[0]);c.push(t[1],i[1]);var p=Math.min.apply(null,l);var d=Math.max.apply(null,l);var v=Math.min.apply(null,c);var y=Math.max.apply(null,c);o[0]=p;o[1]=v;a[0]=d;a[1]=y}},{key:"quadraticBezier",value:function e(t,r,n,i,o){var a=new u.Curve;var s=a.quadraticExtremum(t[0],r[0],n[0]);var l=a.quadraticExtremum(t[1],r[1],n[1]);s=Math.max(Math.min(s,1),0);l=Math.max(Math.min(l,1),0);var f=1-s;var c=1-l;var h=f*f*t[0]+2*f*s*r[0]+s*s*n[0];var p=f*f*t[1]+2*f*s*r[1]+s*s*n[1];var d=c*c*t[0]+2*c*l*r[0]+l*l*n[0];var v=c*c*t[1]+2*c*l*r[1]+l*l*n[1];i[0]=Math.min(t[0],n[0],h,d);i[1]=Math.min(t[1],n[1],p,v);o[0]=Math.max(t[0],n[0],h,d);o[1]=Math.max(t[1],n[1],p,v)}},{key:"arc",value:function e(t,r,n,i,o,a,s,u){var f=new l.Vector;var c=f.create();var h=f.create();var p=f.create();c[0]=Math.cos(i)*n+t;c[1]=Math.sin(i)*n+r;h[0]=Math.cos(o)*n+t;h[1]=Math.sin(o)*n+r;f.min(s,c,h);f.max(u,c,h);i=i%(Math.PI*2);if(i<0){i=i+Math.PI*2}o=o%(Math.PI*2);if(o<0){o=o+Math.PI*2}if(i>o&&!a){o+=Math.PI*2}else if(i<o&&a){i+=Math.PI*2}if(a){var d=o;o=i;i=d}for(var v=0;v<o;v+=Math.PI/2){if(v>i){p[0]=Math.cos(v)*n+t;p[1]=Math.sin(v)*n+r;f.min(s,p,s);f.max(u,p,u)}}}}]);return e}();t.ComputeBoundingBox=c;s.Zondy.LevelRenderer.Tool.ComputeBoundingBox=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Env=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var t=this;function r(e){var r=t.os={};var n=t.browser={};var i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/);var o=e.match(/(Android);?[\s\/]+([\d.]+)?/);var a=e.match(/(iPad).*OS\s([\d_]+)/);var s=e.match(/(iPod)(.*OS\s([\d_]+))?/);var u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/);var l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/);var f=l&&e.match(/TouchPad/);var c=e.match(/Kindle\/([\d.]+)/);var h=e.match(/Silk\/([\d._]+)/);var p=e.match(/(BlackBerry).*Version\/([\d.]+)/);var d=e.match(/(BB10).*Version\/([\d.]+)/);var v=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/);var y=e.match(/PlayBook/);var g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/);var m=e.match(/Firefox\/([\d.]+)/);var _=e.match(/MSIE ([\d.]+)/);var b=i&&e.match(/Mobile\//)&&!g;var S=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g;if(n.webkit=!!i){n.version=i[1]}if(o){r.android=true;r.version=o[2]}if(u&&!s){r.ios=r.iphone=true;r.version=u[2].replace(/_/g,".")}if(a){r.ios=r.ipad=true;r.version=a[2].replace(/_/g,".")}if(s){r.ios=r.ipod=true;r.version=s[3]?s[3].replace(/_/g,"."):null}if(l){r.webos=true;r.version=l[2]}if(f){r.touchpad=true}if(p){r.blackberry=true;r.version=p[2]}if(d){r.bb10=true;r.version=d[2]}if(v){r.rimtabletos=true;r.version=v[2]}if(y){n.playbook=true}if(c){r.kindle=true;r.version=c[1]}if(h){n.silk=true;n.version=h[1]}if(!h&&r.android&&e.match(/Kindle Fire/)){n.silk=true}if(g){n.chrome=true;n.version=g[1]}if(m){n.firefox=true;n.version=m[1]}if(_){n.ie=true;n.version=_[1]}if(b&&(e.match(/Safari/)||!!r.ios)){n.safari=true}if(S){n.webview=true}if(_){n.ie=true;n.version=_[1]}r.tablet=!!(a||y||o&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||_&&!e.match(/Phone/)&&e.match(/Touch/));r.phone=!!(!r.tablet&&!r.ipod&&(o||u||l||p||d||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||_&&e.match(/Touch/)));return{browser:n,os:r,canvasSupported:document.createElement("canvas").getContext?true:false}}return r(navigator.userAgent)}(0,a.default)(e,[{key:"destory",value:function e(){return true}}]);return e}();t.Env=l;s.Zondy.LevelRenderer.Tool.Env=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Event=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.stop=typeof window.addEventListener==="function"?function(e){e.preventDefault();e.stopPropagation();e.cancelBubble=true}:function(e){e.returnValue=false;e.cancelBubble=true};this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}(0,a.default)(e,[{key:"getX",value:function e(t){return typeof t.zrenderX!="undefined"&&t.zrenderX||typeof t.offsetX!="undefined"&&t.offsetX||typeof t.layerX!="undefined"&&t.layerX||typeof t.clientX!="undefined"&&t.clientX}},{key:"getY",value:function e(t){return typeof t.zrenderY!="undefined"&&t.zrenderY||typeof t.offsetY!="undefined"&&t.offsetY||typeof t.layerY!="undefined"&&t.layerY||typeof t.clientY!="undefined"&&t.clientY}},{key:"getDelta",value:function e(t){return typeof t.zrenderDelta!="undefined"&&t.zrenderDelta||typeof t.wheelDelta!="undefined"&&t.wheelDelta||typeof t.detail!="undefined"&&-t.detail}}]);return e}();t.Event=l;s.Zondy.LevelRenderer.Tool.Event=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Http=undefined;var n=r(24);var i=f(n);var o=r(1);var a=f(o);var s=r(5);var u=f(s);var l=r(0);function f(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,a.default)(this,e);this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}(0,u.default)(e,[{key:"get",value:function e(t,r,n){if((typeof t==="undefined"?"undefined":(0,i.default)(t))==="object"){var o=t;t=o.url;r=o.onsuccess;n=o.onerror}var a=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");a.open("GET",t,true);a.onreadystatechange=function(){if(a.readyState===4){if(a.status>=200&&a.status<300||a.status===304){r&&r(a.responseText)}else{n&&n()}a.onreadystatechange=new Function;a=null}};a.send(null)}}]);return e}();t.Http=c;l.Zondy.LevelRenderer.Tool.Http=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Math=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this._radians=window.Math.PI/180;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}(0,a.default)(e,[{key:"sin",value:function e(t,r){return window.Math.sin(r?t*this._radians:t)}},{key:"cos",value:function e(t,r){return window.Math.cos(r?t*this._radians:t)}},{key:"degreeToRadian",value:function e(t){return t*this._radians}},{key:"radianToDegree",value:function e(t){return t/this._radians}}]);return e}();t.Math=l;s.Zondy.LevelRenderer.Tool.Math=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Matrix=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}(0,a.default)(e,[{key:"create",value:function e(){var t=this.ArrayCtor;var r=new t(6);this.identity(r);return r}},{key:"identity",value:function e(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t}},{key:"copy",value:function e(t,r){t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4];t[5]=r[5];return t}},{key:"mul",value:function e(t,r,n){t[0]=r[0]*n[0]+r[2]*n[1];t[1]=r[1]*n[0]+r[3]*n[1];t[2]=r[0]*n[2]+r[2]*n[3];t[3]=r[1]*n[2]+r[3]*n[3];t[4]=r[0]*n[4]+r[2]*n[5]+r[4];t[5]=r[1]*n[4]+r[3]*n[5]+r[5];return t}},{key:"translate",value:function e(t,r,n){t[0]=r[0];t[1]=r[1];t[2]=r[2];t[3]=r[3];t[4]=r[4]+n[0];t[5]=r[5]+n[1];return t}},{key:"rotate",value:function e(t,r,n){var i=r[0];var o=r[2];var a=r[4];var s=r[1];var u=r[3];var l=r[5];var f=Math.sin(n);var c=Math.cos(n);t[0]=i*c+s*f;t[1]=-i*f+s*c;t[2]=o*c+u*f;t[3]=-o*f+c*u;t[4]=c*a+f*l;t[5]=c*l-f*a;return t}},{key:"scale",value:function e(t,r,n){var i=n[0];var o=n[1];t[0]=r[0]*i;t[1]=r[1]*o;t[2]=r[2]*i;t[3]=r[3]*o;t[4]=r[4]*i;t[5]=r[5]*o;return t}},{key:"invert",value:function e(t,r){var n=r[0];var i=r[2];var o=r[4];var a=r[1];var s=r[3];var u=r[5];var l=n*s-a*i;if(!l){return null}l=1/l;t[0]=s*l;t[1]=-a*l;t[2]=-i*l;t[3]=n*l;t[4]=(i*u-s*o)*l;t[5]=(a*o-n*u)*l;return t}},{key:"mulVector",value:function e(t,r,n){var i=r[0];var o=r[2];var a=r[4];var s=r[1];var u=r[3];var l=r[5];t[0]=n[0]*i+n[1]*o+a;t[1]=n[0]*s+n[1]*u+l;return t}}]);return e}();t.Matrix=l;s.Zondy.LevelRenderer.Tool.Matrix=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PaintLayer=t.Painter=undefined;var n=r(2);var i=b(n);var o=r(3);var a=b(o);var s=r(4);var u=b(s);var l=r(1);var f=b(l);var c=r(5);var h=b(c);var p=r(0);var d=r(6);var v=r(42);var y=r(70);var g=r(128);var m=r(20);var _=r(129);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(){function e(t,r){(0,f.default)(this,e);this.root=t;this.storage=r;this._domRoot=null;this._layers={};this._zlevelList=[];this._layerConfig={};this._bgDom=null;this.shapeToImage=null;e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1);this.CLASS_NAME="Zondy.LevelRenderer.Painter";this.root.innerHTML="";this._width=this._getWidth();this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n;n.style.position="relative";n.style.overflow="hidden";n.style.width=this._width+"px";n.style.height=this._height+"px";this.root.appendChild(n);this.shapeToImage=this._createShapeToImageProcessor();this._bgDom=e.createDom((0,d.newGuid)(),"div",this);n.appendChild(this._bgDom);this._bgDom.onselectstart=a;this._bgDom.style["-webkit-user-select"]="none";this._bgDom.style["user-select"]="none";this._bgDom.style["-webkit-touch-callout"]="none";var i=new x((0,d.newGuid)(),this);this._layers["hover"]=i;n.appendChild(i.dom);i.initContext();i.dom.onselectstart=a;i.dom.style["-webkit-user-select"]="none";i.dom.style["user-select"]="none";i.dom.style["-webkit-touch-callout"]="none";var o=this;this.updatePainter=function(e,t){o.refreshShapes(e,t)};function a(){return false}function s(){}}(0,h.default)(e,[{key:"destroy",value:function e(){this.dispose();this._zlevelList=null;this._layerConfig=null;this._bgDom=null;this.shapeToImage=null}},{key:"render",value:function e(t){this.refresh(t,true);return this}},{key:"refresh",value:function e(t,r){var n=this.storage.getShapeList(true);this._paintList(n,r);if(typeof t=="function"){t()}return this}},{key:"_paintList",value:function e(t,r){if(typeof r=="undefined"){r=false}this._updateLayerStatus(t);var n;var i;var o;for(var a in this._layers){if(a!=="hover"){this._layers[a].unusedCount++;this._layers[a].updateTransform()}}var s=[];for(var u=0,l=t.length;u<l;u++){var f=t[u];if(i!==f.zlevel){if(n&&n.needTransform){o.restore()}n=this.getLayer(f.zlevel);o=n.ctx;i=f.zlevel;n.unusedCount=0;if(n.dirty||r){n.clear()}if(n.needTransform){o.save();n.setTransform(o)}}if(o&&f.__startClip){var c=f.__startClip;o.save();if(c.needTransform){var h=c.transform;m.SUtil.Util_matrix.invert(s,h);o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}o.beginPath();c.buildPath(o,c.style);o.clip();if(c.needTransform){var p=s;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((n&&n.dirty||r)&&!f.invisible){if(!f.onbrush||f.onbrush&&!f.onbrush(o,false)){if(g.Config.catchBrushException){try{f.brush(o,false,this.updatePainter)}catch(e){}}else{f.brush(o,false,this.updatePainter)}}}if(o&&f.__stopClip){o.restore()}f.__dirty=false}if(o&&n&&n.needTransform){o.restore()}for(var d in this._layers){if(d!=="hover"){var v=this._layers[d];v.dirty=false;if(v.unusedCount===1){v.clear()}}}}},{key:"getLayer",value:function e(t){var r=this._layers[t];if(!r){var n=this._zlevelList.length;var i=null;var o=-1;if(n>0&&t>this._zlevelList[0]){for(o=0;o<n-1;o++){if(this._zlevelList[o]<t&&this._zlevelList[o+1]>t){break}}i=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t);r=new x((0,d.newGuid)(),this);var a=i?i.dom:this._bgDom;if(a.nextSibling){a.parentNode.insertBefore(r.dom,a.nextSibling)}else{a.parentNode.appendChild(r.dom)}r.initContext();this._layers[t]=r;if(this._layerConfig[t]){(new v.Util).merge(r,this._layerConfig[t],true)}r.updateTransform()}return r}},{key:"getLayers",value:function e(){return this._layers}},{key:"_updateLayerStatus",value:function e(t){var r=this._layers;var n={};for(var i in r){if(i!=="hover"){n[i]=r[i].elCount;r[i].elCount=0}}for(var o=0;o<t.length;o++){var a=t[o];var s=a.zlevel;var u=r[s];if(u){u.elCount++;if(u.dirty){continue}u.dirty=a.__dirty}}for(var l in r){if(l!=="hover"){if(n[l]!==r[l].elCount){r[l].dirty=true}}}}},{key:"refreshShapes",value:function e(t,r){for(var n=0,i=t.length;n<i;n++){var o=t[n];this.storage.mod(o.id)}this.refresh(r);return this}},{key:"clear",value:function e(){for(var t in this._layers){if(t==="hover"){continue}this._layers[t].clear()}return this}},{key:"modLayer",value:function e(t,r){if(r){if(!this._layerConfig[t]){this._layerConfig[t]=r}else{(new v.Util).merge(this._layerConfig[t],r,true)}var n=this._layers[t];if(n){(new v.Util).merge(n,this._layerConfig[t],true)}}}},{key:"delLayer",value:function e(t){var r=this._layers[t];if(!r){return}this.modLayer(t,{position:r.position,rotation:r.rotation,scale:r.scale});r.dom.parentNode.removeChild(r.dom);delete this._layers[t];this._zlevelList.splice((new v.Util).indexOf(this._zlevelList,t),1)}},{key:"refreshHover",value:function e(){this.clearHover();var t=this.storage.getHoverShapes(true);for(var r=0,n=t.length;r<n;r++){this._brushHover(t[r])}this.storage.delHover();return this}},{key:"clearHover",value:function e(){var t=this._layers.hover;t&&t.clear();return this}},{key:"resize",value:function e(){var t=this._domRoot;t.style.display="none";var r=this._getWidth();var n=this._getHeight();t.style.display="";if(this._width!==r||n!==this._height){this._width=r;this._height=n;t.style.width=r+"px";t.style.height=n+"px";for(var i in this._layers){this._layers[i].resize(r,n)}this.refresh(null,true)}return this}},{key:"clearLayer",value:function e(t){var r=this._layers[t];if(r){r.clear()}}},{key:"dispose",value:function e(){this.root.innerHTML="";this.root=null;this.storage=null;this._domRoot=null;this._layers=null}},{key:"getDomHover",value:function e(){return this._layers.hover.dom}},{key:"toDataURL",value:function t(r,n,i){var o=e.createDom((0,d.newGuid)(),"canvas",this);this._bgDom.appendChild(o);var a=o.getContext("2d");e.devicePixelRatio!==1&&a.scale(e.devicePixelRatio,e.devicePixelRatio);a.fillStyle=n||"#fff";a.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio);a.fill();var s=this;this.storage.iterShape(function(e){if(!e.invisible){if(!e.onbrush||e.onbrush&&!e.onbrush(a,false)){if(g.Config.catchBrushException){try{e.brush(a,false,s.updatePainter)}catch(e){}}else{e.brush(a,false,s.updatePainter)}}}},{normal:"up",update:true});var u=o.toDataURL(r,i);a=null;this._bgDom.removeChild(o);return u}},{key:"getWidth",value:function e(){return this._width}},{key:"getHeight",value:function e(){return this._height}},{key:"_getWidth",value:function e(){var t=this.root;var r=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function e(){var t=this.root;var r=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function e(t){var r=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(r,true)){var n=this.getLayer(t.zlevel);if(n.needTransform){r.save();n.setTransform(r)}if(g.Config.catchBrushException){try{t.brush(r,true,this.updatePainter)}catch(e){}}else{t.brush(r,true,this.updatePainter)}if(n.needTransform){r.restore()}}}},{key:"_shapeToImage",value:function e(t,r,n,i,o){var a=document.createElement("canvas");var s=a.getContext("2d");var u=o||window.devicePixelRatio||1;a.style.width=n+"px";a.style.height=i+"px";a.setAttribute("width",n*u);a.setAttribute("height",i*u);s.clearRect(0,0,n*u,i*u);var l={position:r.position,rotation:r.rotation,scale:r.scale};r.position=[0,0,0];r.rotation=0;r.scale=[1,1];if(r){r.brush(s,false)}var f=new _.SmicImage({id:t,style:{x:0,y:0,image:a}});if(l.position!=null){f.position=r.position=l.position}if(l.rotation!=null){f.rotation=r.rotation=l.rotation}if(l.scale!=null){f.scale=r.scale=l.scale}return f}},{key:"_createShapeToImageProcessor",value:function t(){var r=this;return function(t,n,i,o){return r._shapeToImage(t,n,i,o,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function e(t){if(!(t instanceof Array)){return this}this.clearHover();this.storage.delHover();for(var r=0;r<t.length;r++){this.storage.addHover(t[r]);this._brushHover(t[r])}}}],[{key:"createDom",value:function t(r,n,i){var o=document.createElement(n);var a=i._width;var s=i._height;o.style.position="absolute";o.style.left=0;o.style.top=0;o.style.width=a+"px";o.style.height=s+"px";o.setAttribute("width",a*e.devicePixelRatio);o.setAttribute("height",s*e.devicePixelRatio);o.setAttribute("id",r);return o}}]);return e}();var x=function(e){(0,u.default)(t,e);function t(e,r){(0,f.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.dom=null;n.domBack=null;n.ctxBack=null;n.painter=r;n.unusedCount=0;n.config=null;n.dirty=true;n.elCount=0;n.clearColor=0;n.motionBlur=false;n.lastFrameAlpha=.7;n.zoomable=false;n.panable=false;n.maxZoom=Infinity;n.minZoom=0;n.ctx=null;n.dom=S.createDom((0,d.newGuid)(),"canvas",r);n.dom.onselectstart=o;n.dom.style["-webkit-user-select"]="none";n.dom.style["user-select"]="none";n.dom.style["-webkit-touch-callout"]="none";function o(){return false}n.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer";return n}(0,h.default)(t,[{key:"destroy",value:function e(){this.dom=null;this.domBack=null;this.ctxBack=null;this.painter=null;this.unusedCount=null;this.config=null;this.dirty=null;this.elCount=null;this.clearColor=null;this.motionBlur=null;this.lastFrameAlpha=null;this.zoomable=null;this.panable=null;this.maxZoom=null;this.minZoom=null;this.ctx=null;y.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function e(){this.ctx=this.dom.getContext("2d");if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"createBackBuffer",value:function e(){this.domBack=S.createDom((0,d.newGuid)(),"canvas",this.painter);this.ctxBack=this.domBack.getContext("2d");if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}},{key:"resize",value:function e(t,r){this.dom.style.width=t+"px";this.dom.style.height=r+"px";this.dom.setAttribute("width",t*S.devicePixelRatio);this.dom.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctx.scale(S.devicePixelRatio,S.devicePixelRatio)}if(this.domBack){this.domBack.setAttribute("width",t*S.devicePixelRatio);this.domBack.setAttribute("height",r*S.devicePixelRatio);if(S.devicePixelRatio!==1){this.ctxBack.scale(S.devicePixelRatio,S.devicePixelRatio)}}}},{key:"clear",value:function e(){var t=this.dom;var r=this.ctx;var n=t.width;var i=t.height;var o=this.clearColor;var a=this.motionBlur;var s=this.lastFrameAlpha;if(a){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(t,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(o){r.save();r.fillStyle=this.config.clearColor;r.fillRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}else{r.clearRect(0,0,n/S.devicePixelRatio,i/S.devicePixelRatio)}if(a){var u=this.domBack;r.save();r.globalAlpha=s;r.drawImage(u,0,0,n/S.devicePixelRatio,i/S.devicePixelRatio);r.restore()}}}]);return t}(y.Transformable);t.Painter=S;p.Zondy.LevelRenderer.Painter=S;t.PaintLayer=x;p.Zondy.LevelRenderer.PaintLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Handler=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(4);var h=g(c);var p=r(0);var d=r(51);var v=r(128);var y=r(20);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));o.root=e;o.storage=r;o.painter=n;o._lastX=0;o._lastY=0;o._mouseX=0;o._mouseY=0;o._findHover=null;o._domHover=null;o._findHover=l(h,o);o._domHover=n.getDomHover();o.CLASS_NAME="Zondy.LevelRenderer.Handler";var s={resize:function e(t){t=t||window.event;this._lastHover=null;this._isMouseDown=0;this.dispatch(v.Config.EVENT.RESIZE,t)},click:function e(t){t=this._zrenderEventFixed(t);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<10){this._dispatchAgency(r,v.Config.EVENT.CLICK,t)}}this._mousemoveHandler(t)},dblclick:function e(t){t=t||window.event;t=this._zrenderEventFixed(t);var r=this._lastHover;if(r&&r.clickable||!r){if(this._clickThreshold<5){this._dispatchAgency(r,v.Config.EVENT.DBLCLICK,t)}}this._mousemoveHandler(t)},mousewheel:function e(t){t=this._zrenderEventFixed(t);var r=t.wheelDelta||-t.detail;var n=r>0?1.1:1/1.1;var i=this.painter.getLayers();var o=false;for(var a in i){if(a!=="hover"){var s=i[a];var u=s.position;if(s.zoomable){s.__zoom=s.__zoom||1;var l=s.__zoom;l*=n;l=Math.max(Math.min(s.maxZoom,l),s.minZoom);n=l/s.__zoom;s.__zoom=l;u[0]-=(this._mouseX-u[0])*(n-1);u[1]-=(this._mouseY-u[1])*(n-1);s.scale[0]*=n;s.scale[1]*=n;s.dirty=true;o=true}}}if(o){this.painter.refresh()}this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEWHEEL,t);this._mousemoveHandler(t)},mousemove:function e(t){this._clickThreshold++;t=this._zrenderEventFixed(t);this._lastX=this._mouseX;this._lastY=this._mouseY;this._mouseX=y.SUtil.Util_event.getX(t);this._mouseY=y.SUtil.Util_event.getY(t);var r=this._mouseX-this._lastX;var n=this._mouseY-this._lastY;this._processDragStart(t);this._hasfound=0;this._event=t;this._iterateAndFindHover();if(!this._hasfound){if(!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget){this._processOutShape(t);this._processDragLeave(t)}this._lastHover=null;this.storage.delHover();this.painter.clearHover()}var i="";if(this._draggingTarget){this.storage.drift(this._draggingTarget.id,r,n);this._draggingTarget.modSelf();this.storage.addHover(this._draggingTarget)}else if(this._isMouseDown){var o=this.painter.getLayers();var a=false;for(var s in o){if(s!=="hover"){var u=o[s];if(u.panable){i="move";u.position[0]+=r;u.position[1]+=n;a=true;u.dirty=true}}}if(a){this.painter.refresh()}}if(this._draggingTarget||this._hasfound&&this._lastHover.draggable){i="move"}else if(this._hasfound&&this._lastHover.clickable){i="pointer"}this.root.style.cursor=i;this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEMOVE,t);if(this._draggingTarget||this._hasfound||this.storage.hasHoverShape()){this.painter.refreshHover()}},mouseout:function e(t){t=this._zrenderEventFixed(t);var r=t.toElement||t.relatedTarget;if(r!==this.root){while(r&&r.nodeType!==9){if(r===this.root){this._mousemoveHandler(t);return}r=r.parentNode}}t.zrenderX=this._lastX;t.zrenderY=this._lastY;this.root.style.cursor="";this._isMouseDown=0;this._processOutShape(t);this._processDrop(t);this._processDragEnd(t);this.painter.refreshHover();this.dispatch(v.Config.EVENT.GLOBALOUT,t)},mousedown:function e(t){this._clickThreshold=0;if(this._lastDownButton===2){this._lastDownButton=t.button;this._mouseDownTarget=null;return}this._lastMouseDownMoment=new Date;t=this._zrenderEventFixed(t);this._isMouseDown=1;this._mouseDownTarget=this._lastHover;this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEDOWN,t);this._lastDownButton=t.button},mouseup:function e(t){t=this._zrenderEventFixed(t);this.root.style.cursor="";this._isMouseDown=0;this._mouseDownTarget=null;this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEUP,t);this._processDrop(t);this._processDragEnd(t)},touchstart:function e(t){t=this._zrenderEventFixed(t,true);this._lastTouchMoment=new Date;this._mobildFindFixed(t);this._mousedownHandler(t)},touchmove:function e(t){t=this._zrenderEventFixed(t,true);this._mousemoveHandler(t);if(this._isDragging){y.SUtil.Util_event.stop(t)}},touchend:function e(t){t=this._zrenderEventFixed(t,true);this._mouseupHandler(t);var r=new Date;if(r-this._lastTouchMoment<v.Config.EVENT.touchClickDelay){this._mobildFindFixed(t);this._clickHandler(t);if(r-this._lastClickMoment<v.Config.EVENT.touchClickDelay/2){this._dblclickHandler(t);if(this._lastHover&&this._lastHover.clickable){y.SUtil.Util_event.stop(t)}}this._lastClickMoment=r}this.painter.clearHover()}};c(o);if(window.addEventListener){window.addEventListener("resize",o._resizeHandler);if(y.SUtil.Util_env.os.tablet||y.SUtil.Util_env.os.phone){e.addEventListener("touchstart",o._touchstartHandler);e.addEventListener("touchmove",o._touchmoveHandler);e.addEventListener("touchend",o._touchendHandler)}else{e.addEventListener("click",o._clickHandler);e.addEventListener("dblclick",o._dblclickHandler);e.addEventListener("mousewheel",o._mousewheelHandler);e.addEventListener("mousemove",o._mousemoveHandler);e.addEventListener("mousedown",o._mousedownHandler);e.addEventListener("mouseup",o._mouseupHandler)}e.addEventListener("DOMMouseScroll",o._mousewheelHandler);e.addEventListener("mouseout",o._mouseoutHandler)}else{window.attachEvent("onresize",o._resizeHandler);e.attachEvent("onclick",o._clickHandler);e.ondblclick=o._dblclickHandler;e.attachEvent("onmousewheel",o._mousewheelHandler);e.attachEvent("onmousemove",o._mousemoveHandler);e.attachEvent("onmouseout",o._mouseoutHandler);e.attachEvent("onmousedown",o._mousedownHandler);e.attachEvent("onmouseup",o._mouseupHandler)}function u(e,t){return function(r){return e.call(t,r)}}function l(e,t){return function(r,n,i){return e.call(t,r,n,i)}}function c(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"];var r=t.length;while(r--){var n=t[r];e["_"+n+"Handler"]=u(s[n],e)}}function h(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id===e.id||e.isSilent()){return false}var i=n._event;if(e.isCover(t,r)){if(e.hoverable){if(e.isHoverByRefDataID&&e.isHoverByRefDataID===true){if(e.refDataID){var o=e.refDataID;var a=null;if(e.refDataHoverGroup){a=e.refDataHoverGroup}var s=n.storage._shapeList;for(var u=0,l=s.length;u<l;u++){var f=s[u];if(f.refDataID&&o===f.refDataID){if(a){if(f.refDataHoverGroup&&a===f.refDataHoverGroup){n.storage.addHover(f)}}else{n.storage.addHover(f)}}}}}else{n.storage.addHover(e)}}var c=e.parent;while(c){if(c.clipShape&&!c.clipShape.isCover(n._mouseX,n._mouseY)){return false}c=c.parent}if(n._lastHover!==e){n._processOutShape(i);n._processDragLeave(i);n._lastHover=e;n._processDragEnter(i)}n._processOverShape(i);n._processDragOver(i);n._hasfound=1;return true}return false}return o}(0,u.default)(t,[{key:"destroy",value:function e(){this.dispose();this._lastX=null;this._lastY=null;this._mouseX=null;this._mouseY=null;this._findHover=null;d.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function e(t,r){this.bind(t,r);return this}},{key:"un",value:function e(t,r){this.unbind(t,r);return this}},{key:"trigger",value:function e(t,r){var n=v.Config.EVENT;switch(t){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+t+"Handler"](r);break}}},{key:"dispose",value:function e(){var t=this.root;if(window.removeEventListener){window.removeEventListener("resize",this._resizeHandler);if(y.SUtil.Util_env.os.tablet||y.SUtil.Util_env.os.phone){t.removeEventListener("touchstart",this._touchstartHandler);t.removeEventListener("touchmove",this._touchmoveHandler);t.removeEventListener("touchend",this._touchendHandler)}else{t.removeEventListener("click",this._clickHandler);t.removeEventListener("dblclick",this._dblclickHandler);t.removeEventListener("mousewheel",this._mousewheelHandler);t.removeEventListener("mousemove",this._mousemoveHandler);t.removeEventListener("mousedown",this._mousedownHandler);t.removeEventListener("mouseup",this._mouseupHandler)}t.removeEventListener("DOMMouseScroll",this._mousewheelHandler);t.removeEventListener("mouseout",this._mouseoutHandler)}else{window.detachEvent("onresize",this._resizeHandler);t.detachEvent("onclick",this._clickHandler);t.detachEvent("dblclick",this._dblclickHandler);t.detachEvent("onmousewheel",this._mousewheelHandler);t.detachEvent("onmousemove",this._mousemoveHandler);t.detachEvent("onmouseout",this._mouseoutHandler);t.detachEvent("onmousedown",this._mousedownHandler);t.detachEvent("onmouseup",this._mouseupHandler)}this.root=null;this._domHover=null;this.storage=null;this.painter=null;this.un()}},{key:"_processDragStart",value:function e(t){var r=this._lastHover;if(this._isMouseDown&&r&&r.draggable&&!this._draggingTarget&&this._mouseDownTarget===r){if(r.dragEnableTime&&new Date-this._lastMouseDownMoment<r.dragEnableTime){return}var n=r;this._draggingTarget=n;this._isDragging=1;n.invisible=true;this.storage.mod(n.id);this._dispatchAgency(n,v.Config.EVENT.DRAGSTART,t);this.painter.refresh()}}},{key:"_processDragEnter",value:function e(t){if(this._draggingTarget){this._dispatchAgency(this._lastHover,v.Config.EVENT.DRAGENTER,t,this._draggingTarget)}}},{key:"_processDragOver",value:function e(t){if(this._draggingTarget){this._dispatchAgency(this._lastHover,v.Config.EVENT.DRAGOVER,t,this._draggingTarget)}}},{key:"_processDragLeave",value:function e(t){if(this._draggingTarget){this._dispatchAgency(this._lastHover,v.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}}},{key:"_processDrop",value:function e(t){if(this._draggingTarget){this._draggingTarget.invisible=false;this.storage.mod(this._draggingTarget.id);this.painter.refresh();this._dispatchAgency(this._lastHover,v.Config.EVENT.DROP,t,this._draggingTarget)}}},{key:"_processDragEnd",value:function e(t){if(this._draggingTarget){this._dispatchAgency(this._draggingTarget,v.Config.EVENT.DRAGEND,t);this._lastHover=null}this._isDragging=0;this._draggingTarget=null}},{key:"_processOverShape",value:function e(t){this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function e(t){this._dispatchAgency(this._lastHover,v.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function e(t,r,n,i){var o="on"+r;var a={type:r,event:n,target:t,cancelBubble:false};var s=t;if(i){a.dragged=i}while(s){s[o]&&(a.cancelBubble=s[o](a));s.dispatch(r,a);s=s.parent;if(a.cancelBubble){break}}if(t){if(!a.cancelBubble){this.dispatch(r,a)}}else if(!i){this.dispatch(r,{type:r,event:n})}}},{key:"_iterateAndFindHover",value:function e(){var t=y.SUtil.Util_matrix.create();var r=this.storage.getShapeList();var n;var i;var o=[0,0];for(var a=r.length-1;a>=0;a--){var s=r[a];if(n!==s.zlevel){i=this.painter.getLayer(s.zlevel,i);o[0]=this._mouseX;o[1]=this._mouseY;if(i.needTransform){y.SUtil.Util_matrix.invert(t,i.transform);y.SUtil.Util_vector.applyTransform(o,o,t)}}if(this._findHover(s,o[0],o[1])){break}}}},{key:"_mobildFindFixed",value:function e(t){var r=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null;this._mouseX=t.zrenderX;this._mouseY=t.zrenderY;this._event=t;this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<r.length;n++){var i=r[n];i.x&&(this._mouseX+=i.x);i.y&&(this._mouseX+=i.y);this._iterateAndFindHover()}if(this._lastHover){t.zrenderX=this._mouseX;t.zrenderY=this._mouseY}}},{key:"_zrenderEventFixed",value:function e(t,r){if(t.zrenderFixed){return t}if(!r){t=t||window.event;var n=t.toElement||t.relatedTarget||t.srcElement||t.target;if(n&&n!==this._domHover){t.zrenderX=(typeof t.offsetX!="undefined"?t.offsetX:t.layerX)+n.offsetLeft;t.zrenderY=(typeof t.offsetY!="undefined"?t.offsetY:t.layerY)+n.offsetTop}}else{var i=t.type!=="touchend"?t.targetTouches[0]:t.changedTouches[0];if(i){var o=this.root.getBoundingClientRect();t.zrenderX=i.clientX-o.left;t.zrenderY=i.clientY-o.top}}t.zrenderFixed=1;return t}},{key:"getLastHoverOne",value:function e(){if(this._lastHover){return this._lastHover}return null}}]);return t}(d.Eventful);t.Handler=m;p.Zondy.LevelRenderer.Handler=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Animator=t.Animation=undefined;var n=r(24);var i=S(n);var o=r(2);var a=S(o);var s=r(1);var u=S(s);var l=r(5);var f=S(l);var c=r(3);var h=S(c);var p=r(4);var d=S(p);var v=r(0);var y=r(6);var g=r(42);var m=r(51);var _=r(219);var b=r(20);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));e=e||{};r.stage={};r.onframe=function(){};r._clips=[];r._running=false;r._time=0;(0,y.extend)(r,e);r.CLASS_NAME="Zondy.LevelRenderer.Animation";return r}(0,f.default)(t,[{key:"add",value:function e(t){this._clips.push(t)}},{key:"remove",value:function e(t){var r=(new g.Util).indexOf(this._clips,t);if(r>=0){this._clips.splice(r,1)}}},{key:"_update",value:function e(){var t=(new Date).getTime();var r=t-this._time;var n=this._clips;var i=n.length;var o=[];var a=[];for(var s=0;s<i;s++){var u=n[s];var l=u.step(t);if(l){o.push(l);a.push(u)}}if(this.stage.update){this.stage.update()}for(var f=0;f<i;){if(n[f]._needsRemove){n[f]=n[i-1];n.pop();i--}else{f++}}i=o.length;for(var c=0;c<i;c++){a[c].fire(o[c])}this._time=t;this.onframe(r);this.dispatch("frame",r)}},{key:"start",value:function e(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)};var r=this;this._running=true;function n(){if(r._running){r._update();t(n)}}this._time=(new Date).getTime();t(n)}},{key:"stop",value:function e(){this._running=false}},{key:"clear",value:function e(){this._clips=[]}},{key:"animate",value:function e(t,r){r=r||{};var n=new C(t,r.loop,r.getter,r.setter);n.animation=this;return n}}],[{key:"_interpolateNumber",value:function e(t,r,n){return(r-t)*n+t}},{key:"_interpolateArray",value:function e(r,n,i,o,a){var s=r.length;if(a===1){for(var u=0;u<s;u++){o[u]=t._interpolateNumber(r[u],n[u],i)}}else{var l=r[0].length;for(var f=0;f<s;f++){for(var c=0;c<l;c++){o[f][c]=t._interpolateNumber(r[f][c],n[f][c],i)}}}}},{key:"_isArrayLike",value:function e(t){switch(typeof t==="undefined"?"undefined":(0,i.default)(t)){case"undefined":case"string":return false}return typeof t.length!=="undefined"}},{key:"_catmullRomInterpolateArray",value:function e(r,n,i,o,a,s,u,l,f){var c=r.length;if(f===1){for(var h=0;h<c;h++){l[h]=t._catmullRomInterpolate(r[h],n[h],i[h],o[h],a,s,u)}}else{var p=r[0].length;for(var d=0;d<c;d++){for(var v=0;v<p;v++){l[d][v]=t._catmullRomInterpolate(r[d][v],n[d][v],i[d][v],o[d][v],a,s,u)}}}}},{key:"_catmullRomInterpolate",value:function e(t,r,n,i,o,a,s){var u=(n-t)*.5;var l=(i-r)*.5;return(2*(r-n)+u+l)*s+(-3*(r-n)-2*u-l)*a+u*o+r}},{key:"_cloneValue",value:function e(r){var n=Array.prototype.slice;if(t._isArrayLike(r)){var i=r.length;if(t._isArrayLike(r[0])){var o=[];for(var a=0;a<i;a++){o.push(n.call(r[a]))}return o}else{return n.call(r)}}else{return r}}},{key:"rgba2String",value:function e(t){t[0]=Math.floor(t[0]);t[1]=Math.floor(t[1]);t[2]=Math.floor(t[2]);return"rgba("+t.join(",")+")"}}]);return t}(m.Eventful);var C=function(){function e(t,r,n,i){(0,u.default)(this,e);this._tracks={};this._target=t;this._loop=r||false;this._getter=n||o;this._setter=i||a;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[];this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator";function o(e,t){return e[t]}function a(e,t,r){e[t]=r}}(0,f.default)(e,[{key:"when",value:function e(t,r){for(var n in r){if(!this._tracks[n]){this._tracks[n]=[];if(t!==0){this._tracks[n].push({time:0,value:x._cloneValue(this._getter(this._target,n))})}}this._tracks[n].push({time:parseInt(t,10),value:r[n]})}return this}},{key:"during",value:function e(t){this._onframeList.push(t);return this}},{key:"start",value:function e(t){var r=this;var n=this._setter;var i=this._getter;var o=r._onframeList.length;var a=t==="spline";var s=function e(){r._clipCount--;if(r._clipCount===0){r._tracks={};var t=r._doneList.length;for(var n=0;n<t;n++){r._doneList[n].call(r)}}};var u=function e(u,l){var f=u.length;if(!f){return}var c=u[0].value;var h=x._isArrayLike(c);var p=false;var d=h&&x._isArrayLike(c[0])?2:1;u.sort(function(e,t){return e.time-t.time});var v=u[f-1].time;var y=[];var g=[];for(var m=0;m<f;m++){y.push(u[m].time/v);var S=u[m].value;if(typeof S=="string"){S=b.SUtil.Util_color.toArray(S);if(S.length===0){S[0]=S[1]=S[2]=0;S[3]=1}p=true}g.push(S)}var C=0;var w=0;var P;var I;var E;var L;var T;var M;var O;if(p){var A=[0,0,0,0]}var N=function e(t,s){if(s<w){P=Math.min(C+1,f-1);for(I=P;I>=0;I--){if(y[I]<=s){break}}I=Math.min(I,f-2)}else{for(I=C;I<f;I++){if(y[I]>s){break}}I=Math.min(I-1,f-2)}C=I;w=s;var u=y[I+1]-y[I];if(u===0){return}else{E=(s-y[I])/u}if(a){T=g[I];L=g[I===0?I:I-1];M=g[I>f-2?f-1:I+1];O=g[I>f-3?f-1:I+2];if(h){x._catmullRomInterpolateArray(L,T,M,O,E,E*E,E*E*E,i(t,l),d)}else{var c=void 0;if(p){c=x.rgba2String(A)}else{c=x._catmullRomInterpolate(L,T,M,O,E,E*E,E*E*E)}n(t,l,c)}}else{if(h){x._interpolateArray(g[I],g[I+1],E,i(t,l),d)}else{var v=void 0;if(p){x._interpolateArray(g[I],g[I+1],E,A,1);v=x.rgba2String(A)}else{v=x._interpolateNumber(g[I],g[I+1],E)}n(t,l,v)}}for(I=0;I<o;I++){r._onframeList[I](t,s)}};var R=new _.Clip({target:r._target,life:v,loop:r._loop,delay:r._delay,onframe:N,ondestroy:s});if(t&&t!=="spline"){R.easing=t}r._clipList.push(R);r._clipCount++;r.animation.add(R)};for(var l in this._tracks){u(this._tracks[l],l)}return this}},{key:"stop",value:function e(){for(var t=0;t<this._clipList.length;t++){var r=this._clipList[t];this.animation.remove(r)}this._clipList=[]}},{key:"delay",value:function e(t){this._delay=t;return this}},{key:"done",value:function e(t){if(t){this._doneList.push(t)}return this}}]);return e}();t.Animation=x;v.Zondy.LevelRenderer.Animation=x;t.Animator=C;v.Zondy.LevelRenderer.Animation.Animator=C},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Clip=undefined;var n=r(1);var i=l(n);var o=r(5);var a=l(o);var s=r(0);var u=r(220);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,i.default)(this,e);this._targetPool=t.target||{};if(!(this._targetPool instanceof Array)){this._targetPool=[this._targetPool]}this._life=t.life||1e3;this._delay=t.delay||0;this._startTime=(new Date).getTime()+this._delay;this._endTime=this._startTime+this._life*1e3;this.loop=typeof t.loop=="undefined"?false:t.loop;this.gap=t.gap||0;this.easing=t.easing||"Linear";this.onframe=t.onframe;this.ondestroy=t.ondestroy;this.onrestart=t.onrestart;this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}(0,a.default)(e,[{key:"destroy",value:function e(){}},{key:"step",value:function e(t){var r=new u.Easing;var n=(t-this._startTime)/this._life;if(n<0){return}n=Math.min(n,1);var i=typeof this.easing=="string"?r[this.easing]:this.easing;var o=typeof i==="function"?i(n):n;this.fire("frame",o);if(n===1){if(this.loop){this.restart();return"restart"}this._needsRemove=true;return"destroy"}return null}},{key:"restart",value:function e(){var t=(new Date).getTime();var r=(t-this._startTime)%this._life;this._startTime=(new Date).getTime()-r+this.gap}},{key:"fire",value:function e(t,r){for(var n=0,i=this._targetPool.length;n<i;n++){if(this["on"+t]){this["on"+t](this._targetPool[n],r)}}}}]);return e}();t.Clip=f;s.Zondy.LevelRenderer.Animation.Clip=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Easing=undefined;var n=r(1);var i=u(n);var o=r(5);var a=u(o);var s=r(0);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e);this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}(0,a.default)(e,[{key:"destroy",value:function e(){}},{key:"Linear",value:function e(t){return t}},{key:"QuadraticIn",value:function e(t){return t*t}},{key:"QuadraticOut",value:function e(t){return t*(2-t)}},{key:"QuadraticInOut",value:function e(t){if((t*=2)<1){return.5*t*t}return-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function e(t){return t*t*t}},{key:"CubicOut",value:function e(t){return--t*t*t+1}},{key:"CubicInOut",value:function e(t){if((t*=2)<1){return.5*t*t*t}return.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function e(t){return t*t*t*t}},{key:"QuarticOut",value:function e(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function e(t){if((t*=2)<1){return.5*t*t*t*t}return-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function e(t){return t*t*t*t*t}},{key:"QuinticOut",value:function e(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function e(t){if((t*=2)<1){return.5*t*t*t*t*t}return.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function e(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function e(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function e(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function e(t){return t===0?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function e(t){return t===1?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function e(t){if(t===0){return 0}if(t===1){return 1}if((t*=2)<1){return.5*Math.pow(1024,t-1)}return.5*(-Math.pow(2,-10*(t-1))+2)}},{key:"CircularIn",value:function e(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function e(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function e(t){if((t*=2)<1){return-.5*(Math.sqrt(1-t*t)-1)}return.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function e(t){var r;var n=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return-(n*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i))}},{key:"ElasticOut",value:function e(t){var r;var n=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}return n*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/i)+1}},{key:"ElasticInOut",value:function e(t){var r;var n=.1;var i=.4;if(t===0){return 0}if(t===1){return 1}if(!n||n<1){n=1;r=i/4}else{r=i*Math.asin(1/n)/(2*Math.PI)}if((t*=2)<1){return-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i))}return n*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/i)*.5+1}},{key:"BackIn",value:function e(t){var r=1.70158;return t*t*((r+1)*t-r)}},{key:"BackOut",value:function e(t){var r=1.70158;return--t*t*((r+1)*t+r)+1}},{key:"BackInOut",value:function e(t){var r=1.70158*1.525;if((t*=2)<1){return.5*(t*t*((r+1)*t-r))}return.5*((t-=2)*t*((r+1)*t+r)+2)}},{key:"BounceIn",value:function e(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function e(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}}},{key:"BounceInOut",value:function e(t){if(t<.5){return this.BounceIn(t*2)*.5}return this.BounceOut(t*2-1)*.5+.5}}]);return e}();t.Easing=l;s.Zondy.LevelRenderer.Animation.Easing=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Rectangle=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n,o){(0,a.default)(this,t);var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o));s.x=!isNaN(e)?e:0;s.y=!isNaN(e)?r:0;s.width=!isNaN(n)?n:0;s.height=!isNaN(o)?o:0;s.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle";return s}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.width=null;this.height=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Rectangle=m;v.Zondy.Feature.ShapeParameters.Rectangle=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Label=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));o.x=e;o.y=r;o.text=n;o.CLASS_NAME="Zondy.Feature.ShapeParameters.Label";return o}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.text=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Label=m;v.Zondy.Feature.ShapeParameters.Label=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Image=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(27);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u,l,c,h){(0,a.default)(this,t);var p=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u,l,c,h));p.x=e;p.y=r;p.image=n;p.width=o;p.height=s;p.sx=u;p.sy=l;p.sWidth=c;p.sHeight=h;p.CLASS_NAME="Zondy.Feature.ShapeParameters.Image";return p}(0,u.default)(t,[{key:"destroy",value:function e(){this.x=null;this.y=null;this.image=null;this.width=null;this.height=null;this.sx=null;this.sy=null;this.sWidth=null;this.sHeight=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}}]);return t}(y.ShapeParameters);t.Image=m;v.Zondy.Feature.ShapeParameters.Image=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicText=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(16);var g=r(20);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smictext";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicText";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=this.style;if(r){i=this.getHighlightStyle(i,this.highlightStyle||{})}if(typeof i.text=="undefined"||i.text===false){return}t.save();this.doClip(t);this.setContext(t,i);this.setTransform(t);if(i.textFont){t.font=i.textFont}t.textAlign=i.textAlign||"start";t.textBaseline=i.textBaseline||"middle";var o=(i.text+"").split("\n");var a=g.SUtil.Util_area.getTextHeight("ZH",i.textFont);var s=this.getRectNoRotation(i);var u=i.x+n[0];var l;if(i.textBaseline==="top"){l=s.y}else if(i.textBaseline==="bottom"){l=s.y+a}else{l=s.y+a/2}var f=i.x+n[0];var c=i.y+n[1];for(var h=0,p=o.length;h<p;h++){if(i.labelRect){t.fillRect(s.x-2,s.y,s.width+4,s.height);t.fillStyle=i.strokeColor;t.strokeRect(s.x-2,s.y,s.width+4,s.height);t.fillStyle=i.textColor}switch(i.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",i);if(i.textRotation&&i.textRotation!==0){t.save();t.translate(f,c);t.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){t.strokeText(o[h],0,a*h,i.maxWidth)}else{t.strokeText(o[h],0,a*h)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){t.strokeText(o[h],0,a*(h+1)-s.height,i.maxWidth)}else{t.strokeText(o[h],0,a*(h+1)-s.height)}}else{if(i.maxWidth){t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2,i.maxWidth)}else{t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2)}}t.restore()}else{if(i.maxWidth){t.strokeText(o[h],u,l,i.maxWidth)}else{t.strokeText(o[h],u,l)}}this.setCtxGlobalAlpha(t,"reset",i);break;case"both":if(i.textRotation&&i.textRotation!==0){t.save();t.translate(f,c);t.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*h,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*h,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i)}else{this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*h);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*h);this.setCtxGlobalAlpha(t,"reset",i)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*(h+1)-s.height,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*(h+1)-s.height,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i)}else{this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*(h+1)-s.height);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*(h+1)-s.height);this.setCtxGlobalAlpha(t,"reset",i)}}else{if(i.maxWidth){this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*(h+1)-s.height/2-a/2,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i)}else{this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],0,a*(h+1)-s.height/2-a/2);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],0,a*(h+1)-s.height/2-a/2);this.setCtxGlobalAlpha(t,"reset",i)}}t.restore()}else{if(i.maxWidth){this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],u,l,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],u,l,i.maxWidth);this.setCtxGlobalAlpha(t,"reset",i)}else{this.setCtxGlobalAlpha(t,"fill",i);t.fillText(o[h],u,l);this.setCtxGlobalAlpha(t,"reset",i);this.setCtxGlobalAlpha(t,"stroke",i);t.strokeText(o[h],u,l);this.setCtxGlobalAlpha(t,"reset",i)}}break;default:this.setCtxGlobalAlpha(t,"fill",i);if(i.textRotation&&i.textRotation!==0){t.save();t.translate(f,c);t.rotate(i.textRotation*Math.PI/180);if(i.textBaseline==="top"){if(i.maxWidth){t.fillText(o[h],0,a*h,i.maxWidth)}else{t.fillText(o[h],0,a*h)}}else if(i.textBaseline==="bottom"){if(i.maxWidth){t.fillText(o[h],0,a*(h+1)-s.height,i.maxWidth)}else{t.fillText(o[h],0,a*(h+1)-s.height)}}else{if(i.maxWidth){t.fillText(o[h],0,a*(h+1)-s.height/2-a/2,i.maxWidth)}else{t.fillText(o[h],0,a*(h+1)-s.height/2-a/2)}}t.restore()}else{if(i.maxWidth){t.fillText(o[h],u,l,i.maxWidth)}else{t.fillText(o[h],u,l)}}this.setCtxGlobalAlpha(t,"reset",i)}l+=a}t.restore();return}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}var r,n,i,o;var a=this.getTextBackground(t,true);for(var s=0,u=a.length;s<u;s++){var l=a[s];if(s===0){r=l[0];i=l[0];n=l[1];o=l[1]}else{if(l[0]<r){r=l[0]}if(l[0]>i){i=l[0]}if(l[1]<n){n=l[1]}if(l[1]>o){o=l[1]}}}t.__rect={x:r,y:n,width:i-r,height:o-n};return t.__rect}},{key:"getRectNoRotation",value:function e(t){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_area.getTextHeight("ZH",t.textFont);var i=g.SUtil.Util_area.getTextWidth(t.text,t.textFont);var o=g.SUtil.Util_area.getTextHeight(t.text,t.textFont);var a=t.x+r[0];if(t.textAlign==="end"||t.textAlign==="right"){a-=i}else if(t.textAlign==="center"){a-=i/2}var s;if(t.textBaseline==="top"){s=t.y+r[1]}else if(t.textBaseline==="bottom"){s=t.y+r[1]-o}else{s=t.y+r[1]-o/2}var u=false;var l;if(t.maxWidth){var f=parseInt(t.maxWidth);if(f<i){l=i;u=true;i=f}a=t.x+r[0];if(t.textAlign==="end"||t.textAlign==="right"){a-=i}else if(t.textAlign==="center"){a-=i/2}}if(t.textFont){var c=t.textFont;var h=c.toLowerCase();if(h.indexOf("italic")>-1){if(l&&u===true){i+=n/3*(i/l)}else{i+=n/3}}}var p={x:a,y:s,width:i,height:o};return p}},{key:"getTextBackground",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if((!r||r===false)&&t.__textBackground){return t.__textBackground}var i=this.getRectNoRotation(t);var o=t.x+n[0];var a=t.y+n[1];var s=[];if(t.textRotation&&t.textRotation!==0){var u=t.textRotation;var l=this.getRotatedLocation(i.x,i.y,o,a,u);var f=this.getRotatedLocation(i.x+i.width,i.y,o,a,u);var c=this.getRotatedLocation(i.x+i.width,i.y+i.height,o,a,u);var h=this.getRotatedLocation(i.x,i.y+i.height,o,a,u);s.push(l);s.push(f);s.push(c);s.push(h)}else{var p=[i.x,i.y];var d=[i.x+i.width,i.y];var v=[i.x+i.width,i.y+i.height];var y=[i.x,i.y+i.height];s.push(p);s.push(d);s.push(v);s.push(y)}t.__textBackground=s;return t.__textBackground}},{key:"getRotatedLocation",value:function e(t,r,n,i,o){var a=new Array,s,u;r=-r;i=-i;o=-o;s=(t-n)*Math.cos(o/180*Math.PI)-(r-i)*Math.sin(o/180*Math.PI)+n;u=(t-n)*Math.sin(o/180*Math.PI)+(r-i)*Math.cos(o/180*Math.PI)+i;a[0]=s;a[1]=-u;return a}}]);return t}(y.Shape);t.SmicText=_;v.Zondy.LevelRenderer.SmicText=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicCircle=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smiccircle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicCircle";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];t.moveTo(i+r.r,o);t.arc(i,o,r.r,0,Math.PI*2,true);return true}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=t.x+r[0];var i=t.y+r[1];var o=t.r;var a;if(t.brushType==="stroke"||t.brushType==="fill"){a=t.lineWidth||1}else{a=0}t.__rect={x:Math.round(n-o-a/2),y:Math.round(i-o-a/2),width:o*2+a,height:o*2+a};return t.__rect}}]);return t}(y.Shape);t.SmicCircle=m;v.Zondy.LevelRenderer.SmicCircle=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicRectangle=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicrectangle";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var a=r.width;var s=r.height;var u=r.radius;var l;var f;var c;var h;if(typeof u==="number"){l=f=c=h=u}else if(u instanceof Array){if(u.length===1){l=f=c=h=u[0]}else if(u.length===2){l=c=u[0];f=h=u[1]}else if(u.length===3){l=u[0];f=h=u[1];c=u[2]}else{l=u[0];f=u[1];c=u[2];h=u[3]}}else{l=f=c=h=0}var p;if(l+f>a){p=l+f;l*=a/p;f*=a/p}if(c+h>a){p=c+h;c*=a/p;h*=a/p}if(f+c>s){p=f+c;f*=s/p;c*=s/p}if(l+h>s){p=l+h;l*=s/p;h*=s/p}t.moveTo(i+l,o);t.lineTo(i+a-f,o);f!==0&&t.quadraticCurveTo(i+a,o,i+a,o+f);t.lineTo(i+a,o+s-c);c!==0&&t.quadraticCurveTo(i+a,o+s,i+a-c,o+s);t.lineTo(i+h,o+s);h!==0&&t.quadraticCurveTo(i,o+s,i,o+s-h);t.lineTo(i,o+l);l!==0&&t.quadraticCurveTo(i,o,i+l,o)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;if(!r.radius){t.moveTo(r.x+n[0],r.y+n[1]);t.lineTo(r.x+n[0]+r.width,r.y+n[1]);t.lineTo(r.x+n[0]+r.width,r.y+n[1]+r.height);t.lineTo(r.x+n[0],r.y+n[1]+r.height);t.lineTo(r.x+n[0],r.y+n[1])}else{this._buildRadiusPath(t,r)}t.closePath();return}},{key:"getRect",value:function e(t){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;if(t.__rect){return t.__rect}var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-n/2),y:Math.round(t.y+r[1]-n/2),width:t.width+n,height:t.height+n};return t.__rect}}]);return t}(y.Shape);t.SmicRectangle=m;v.Zondy.LevelRenderer.SmicRectangle=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicSector=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(16);var g=r(20);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicsector";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.x+n[0];var o=r.y+n[1];var a=r.r0||0;var s=r.r;var u=r.startAngle;var l=r.endAngle;var f=r.clockWise||false;u=g.SUtil.Util_math.degreeToRadian(u);l=g.SUtil.Util_math.degreeToRadian(l);if(!f){u=-u;l=-l}var c=g.SUtil.Util_math.cos(u);var h=g.SUtil.Util_math.sin(u);t.moveTo(c*a+i,h*a+o);t.lineTo(c*s+i,h*s+o);t.arc(i,o,s,u,l,!f);t.lineTo(g.SUtil.Util_math.cos(l)*a+i,g.SUtil.Util_math.sin(l)*a+o);if(a!==0){t.arc(i,o,a,l,u,f)}t.closePath();return}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n=g.SUtil.Util_vector.create();var i=g.SUtil.Util_vector.create();var o=g.SUtil.Util_vector.create();var a=g.SUtil.Util_vector.create();var s=t.x+r[0];var u=t.y+r[1];var l=t.r0||0;var f=t.r;var c=g.SUtil.Util_math.degreeToRadian(t.startAngle);var h=g.SUtil.Util_math.degreeToRadian(t.endAngle);var p=t.clockWise;if(!p){c=-c;h=-h}if(l>1){g.SUtil.Util_computeBoundingBox.arc(s,u,l,c,h,!p,n,o)}else{n[0]=o[0]=s;n[1]=o[1]=u}g.SUtil.Util_computeBoundingBox.arc(s,u,f,c,h,!p,i,a);g.SUtil.Util_vector.min(n,n,i);g.SUtil.Util_vector.max(o,o,a);t.__rect={x:n[0],y:n[1],width:o[0]-n[0],height:o[1]-n[1]};return t.__rect}}]);return t}(y.Shape);t.SmicSector=_;v.Zondy.LevelRenderer.SmicSector=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.rangeThemeLayer=t.RangeThemeLayer=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(4);var h=b(c);var p=r(11);var d=b(p);var v=r(0);var y=r(6);var g=r(69);var m=r(52);var _=r(13);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(t,[{key:"createThematicFeature",value:function e(t){var r=this.getStyleByData(t);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=_.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(t,this,_.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function e(t){var r={};var n=t;r=(0,y.copyAttributesWithClip)(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var a=this.styleGroups;var s=false;var u=null;for(var l in o){if(i===l){s=true;u=o[l];break}}if(s){for(var f=0,c=a.length;f<c;f++){if(u>=a[f].start&&u<a[f].end){var h=a[f].style;r=(0,y.copyAttributesWithClip)(r,h)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=(0,y.copyAttributesWithClip)(n.style)}return r}}]);return t}(g.GeoFeatureThemeLayer);t.RangeThemeLayer=S;var x=t.rangeThemeLayer=function e(t,r){return new S(t,r)};v.Zondy.Map.rangeThemeLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RankSymbol=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(32);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.setting=null;if(o&&o.codomain){l.setting=o;l.DVBCodomain=l.setting.codomain}l.CLASS_NAME="Zondy.Theme.RankSymbol";return l}(0,u.default)(t,[{key:"destroy",value:function e(){this.setting=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function e(){var t=true;if(!this.setting){return false}var r=this.setting;if(r.XOffset){this.XOffset=r.XOffset}if(r.YOffset){this.YOffset=r.YOffset}this.XOffset=r.XOffset?r.XOffset:0;this.YOffset=r.YOffset?r.YOffset:0;this.origonPoint=[];this.chartBox=[];this.dataViewBox=[];this.DVBParameter=r.dataViewBoxParameter?r.dataViewBoxParameter:[0,0,0,0];this.DVBOrigonPoint=[];this.DVBCenterPoint=[];this.origonPointOffset=[];this.resetLocation();var n=this.width;var i=this.height;var o=this.location;this.origonPoint=[o[0]-n/2,o[1]-i/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+i,a[0]+n,a[1]];var s=this.chartBox;var u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;if(l[0]>=l[2]||l[1]<=l[3]){return false}this.DVBOrigonPoint=[l[0],l[3]];this.DVBWidth=Math.abs(l[2]-l[0]);this.DVBHeight=Math.abs(l[1]-l[3]);this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2];this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]];return t}}]);return t}(y.Graph);t.RankSymbol=m;v.Zondy.Theme.RankSymbol=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GraphThemeLayer=t.graphThemeLayer=undefined;var n=r(2);var i=x(n);var o=r(1);var a=x(o);var s=r(5);var u=x(s);var l=r(3);var f=x(l);var c=r(7);var h=x(c);var p=r(4);var d=x(p);var v=r(11);var y=x(v);var g=r(0);var m=r(126);var _=r(43);var b=r(19);var S=r(65);function x(e){return e&&e.__esModule?e:{default:e}}var C=function(e){(0,d.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));o.chartsSetting=n.chartsSetting||{};o.themeFields=n.themeFields||null;o.overlayWeightField=n.overlayWeightField||null;o.isOverLay=n.isOverLay||true;o.charts=n.charts||[];o.cache=n.cache||{};o.chartsType=r;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(t,[{key:"setChartsType",value:function e(t){this.chartsType=t;this.redraw()}},{key:"addFeatures",value:function e(t){var r=this;y.default.Evented.prototype.fire("beforefeaturesadded",{features:t});if(t&&(true||t instanceof S.FeatureSet)){var n=null;var i=t.LabelDots;var o=t.AttStruct;var a=t.SFEleArray;if(a!=null&&a.length>0){for(var s=0;s<a.length;s++){var u=a[s];if(u.AttValue!=null&&u.AttValue.length>0){var n={};for(var l=0;l<u.AttValue.length;l++){n[o.FldName[l]]=u.AttValue[l]}n["FID"]=u.FID}u.attributes=n;i&&i[s]&&(u.LabelDot=i[s]);r.features.push(u)}}}if(this.renderer){this.redrawThematicFeatures(this.map.getBounds())}}},{key:"redrawThematicFeatures",value:function e(t){this.clearCache();this.renderer.clearAll();var r=this.features;for(var n=0,i=r.length;n<i;n++){var o=r[n];var a=this.cache;var s=o.FID;if(a[s]){continue}a[s]=s;var u=this.createThematicFeature(o);if(u&&this.overlayWeightField){if(o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])){u["__overlayWeight"]=o.attributes[this.overlayWeightField]}}if(u){this.charts.push(u)}}this.drawCharts()}},{key:"createThematicFeature",value:function e(t){var r;if(_.Theme[this.chartsType]&&this.themeFields&&this.chartsSetting){r=new _.Theme[this.chartsType](t,this,this.themeFields,this.chartsSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}},{key:"drawCharts",value:function e(){if(!this.renderer){return}var t=this.charts;if(this.overlayWeightField){t.sort(function(e,t){if(typeof e["__overlayWeight"]=="undefined"&&typeof t["__overlayWeight"]=="undefined"){return 0}else if(typeof e["__overlayWeight"]!="undefined"&&typeof t["__overlayWeight"]=="undefined"){return-1}else if(typeof e["__overlayWeight"]=="undefined"&&typeof t["__overlayWeight"]!="undefined"){return 1}else if(typeof e["__overlayWeight"]!="undefined"&&typeof t["__overlayWeight"]!="undefined"){if(parseFloat(e["__overlayWeight"])<parseFloat(t["__overlayWeight"])){return 1}else{return-1}}return 0})}if(!this.isOverLay){for(var r=0,n=t.length;r<n;r++){var i=t[r];var o=i.resetLocation();var a=i.shapes;for(var s=0,u=a.length;s<u;s++){a[s].refOriginalPosition=o;this.renderer.addShape(a[s])}}}else{var l=[];for(var f=0,c=t.length;f<c;f++){var h=t[f];var p=h.resetLocation();var d=h.chartBounds;var v=[{x:d.xmin,y:d.ymin},{x:d.xmin,y:d.ymax},{x:d.xmax,y:d.ymax},{x:d.xmax,y:d.ymin},{x:d.xmin,y:d.ymax}];var y=false;if(f!==0){for(var g=0;g<l.length;g++){if(this.isQuadrilateralOverLap(v,l[g])){y=true;break}}}if(y){continue}else{l.push(v)}var m=h.shapes;for(var _=0,b=m.length;_<b;_++){m[_].refOriginalPosition=p;this.renderer.addShape(m[_])}}}this.renderer.render()}},{key:"getShapesByFeatureID",value:function e(t){var r=[];var n=this.renderer.getAllShapes();if(!t){return n}for(var i=0,o=n.length;i<o;i++){var a=n[i];if(a.refDataID&&t===a.refDataID){r.push(a)}}return r}},{key:"isQuadrilateralOverLap",value:function e(t,r){var n=t.length,i=r.length;if(n!==5||i!==5){return null}var o=false;for(var a=0;a<n;a++){if(this.isPointInPoly(t[a],r)){o=true;break}}for(var s=0;s<i;s++){if(this.isPointInPoly(r[s],t)){o=true;break}}for(var u=0;u<n-1;u++){if(o){break}for(var l=0;l<i-1;l++){var f=this.lineIntersection(t[u],t[u+1],r[l],r[l+1]);if(f.CLASS_NAME==="Zondy.Object.Point2D"){o=true;break}}}return o}},{key:"lineIntersection",value:function e(t,r,n,i){var o=null;var a;var s;var u=(i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x);var l=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x);var f=(i.y-n.y)*(r.x-t.x)-(i.x-n.x)*(r.y-t.y);if(f!==0){a=u/f;s=l/f;if(a>=0&&s<=1&&a<=1&&s>=0){o=new b.Point2D(t.x+a*(r.x-t.x),t.y+a*(r.y-t.y))}else{o="No Intersection"}}else{if(u===0&&l===0){var c=Math.max(t.y,r.y);var h=Math.min(t.y,r.y);var p=Math.max(t.x,r.x);var d=Math.min(t.x,r.x);if((n.y>=h&&n.y<=c||i.y>=h&&i.y<=c)&&n.x>=d&&n.x<=p||i.x>=d&&i.x<=p){o="Coincident"}else{o="Parallel"}}else{o="Parallel"}}return o}},{key:"isPointInPoly",value:function e(t,r){for(var n=false,i=-1,o=r.length,a=o-1;++i<o;a=i){(r[i].y<=t.y&&t.y<r[a].y||r[a].y<=t.y&&t.y<r[i].y)&&t.x<(r[a].x-r[i].x)*(t.y-r[i].y)/(r[a].y-r[i].y)+r[i].x&&(n=!n)}return n}},{key:"isChartInMap",value:function e(t,r){var n=t;var i=false;for(var o=0,a=r.length;o<a;o++){var s=r[o];if(s.x>=n.xmin&&s.x<=n.xmax&&s.y>=n.ymin&&s.y<=n.ymax){i=true;break}}return i}},{key:"clearCache",value:function e(){this.cache={};this.charts=[]}},{key:"removeFeatures",value:function e(r){this.clearCache();(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"removeFeatures",this).call(this,r)}},{key:"removeAllFeatures",value:function e(){this.clearCache();(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function e(){this.clearCache();if(this.renderer){this.redrawThematicFeatures(this.map.getBounds());return true}return false}},{key:"clear",value:function e(){if(this.renderer){this.renderer.clearAll();this.renderer.refresh()}this.removeAllFeatures();this.clearCache()}}]);return t}(m.ThemeLayer);var w=t.graphThemeLayer=function e(t,r,n){return new C(t,r,n)};t.GraphThemeLayer=C;g.Zondy.Map.graphThemeLayer=w},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t,r){"use strict";r(233)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeckglLayer=t.MapvLayer=t.EchartsLayer=t.PostgisVectorTileService=t.PostgisTableService=t.PostgisQueryService=t.PostgisCustomQueryService=t.PostgisCatlogService=t.ThemeStyle=t.RankSymbolThemeLayer=t.SimpleThemeLayer=t.RandomThemeLayer=t.graphThemeLayer=t.GraphThemeLayer=t.UniqueThemeLayer=t.RangeThemeLayer=t.ThemeLayer=t.GeoFeatureThemeLayer=t.ThemesInfo=undefined;t.ThemeOper=t.ItemValue=t.FolderInfoAttribute=t.FolderInfo=t.ExpInfo=t.CUniqueThemeInfo=t.CUniqueTheme=t.CThemeInfo=t.CTheme=t.CSimpleTheme=t.CRegInfo=t.CRangeThemeInfo=t.CRangeTheme=t.CRandomTheme=t.CPntInfo=t.CMultiClassTheme=t.CLinInfo=t.CGraduatedSymbolTheme=t.CFourColorTheme=t.CDotDensityTheme=t.CChartType=t.CChartThemeRepresentInfo=t.CChartThemeInfo=t.CChartTheme=t.CChartLabelFormat=t.CAnnInfo=t.CAllOtherDataItemInfoSource=t.MapServiceBase=t.GetTileImageService=t.GetMapInfoService=t.GetMapImageService=t.GetLayerImageService=t.GetDocImageService=t.TopAnalysis=t.Smooth=t.ProjectRang=t.ProjectDots=t.GeometryAnalysisBase=t.CProjectParam=t.CProjectBySRSID=t.CalServiceBase=t.CalPolyLineLength=t.CalArea=t.ProjectBySRID=t.ProjectByLayer=t.ProjectBase=t.OverlayByPolygon=t.OverlayByLayer=t.OverlayBase=t.NetAnalysis=t.FeatureBuffBySingleRing=t.FeatureBuffByMultiplyRing=t.FeatureBuffBase=t.ContourAnalyse=t.ClipByPolygon=t.ClipByLayer=t.ClipByCircle=t.ClipBase=t.ClassBufferBySingleRing=t.ClassBufferByMultiplyRing=t.ClassBufferBase=t.AnalysisBase=t.QueryServiceBase=t.QueryParameterBase=t.QueryParameter=t.QueryLayerFeature=t.QueryFeatureStruct=t.QueryFeatureRule=t.QueryDocFeature=t.QueryByLayerParameter=t.ObjClsQueryParameter=t.ObjClsQuery=t.MultiGeoQueryParameter=t.MultiGeoQuery=t.EditServiceBase=t.EditLayerFeature=t.EditDocFeature=t.VectorLayer=t.TileLayer=t.CatalogService=t.MapDoc=t.GDBInfo=t.ColorInfo=t.JSONFormat=t.IgsServiceBase=t.FetchRequest=t.RequestTimeout=t.CORS=t.Events=t.CommonServiceBase=t.SlopLineParam=t.NetAnalysisExtent=t.NetAnalyse=t.MeshingParam=t.ContourRegionInfo=t.ContourZValue=t.ContourParam=t.ContourNoteParam=t.mixin=t.merge=undefined;t.DeepMerge=t.ChineseToUtf8=t.getTopAnalysisResult=t.bindAsEventListener=t.bind=t.newGuid=t.cloneObject=t.copyAttributesWithClip=t.copyAttributes=t.transformResult=t.toJSON=t.isInTheSameDomain=t.supportCanvas=t.isSupportCanvas=t.getBrowser=t.Browser=t.IS_GECKO=t.getParameters=t.urlAppend=t.getWFParameterString=t.getParameterString=t.applyDefaults=t.modifyDOMElement=t.indexOf=t.removeItem=t.isElement=t.getElement=t.reset=t.copyExcluce=t.copy=t.extendDeep=t.isArray=t.extend=t.WebGraphicsInfo=t.VectCls=t.Tangram=t.Rectangle=t.PolyLine=t.Polygon=t.Point2D=t.MultiPolygon=t.LablePntInfo=t.LabelRegInfo=t.LabelLinInfo=t.GRegion=t.GPoint=t.GLine=t.FeatureSet=t.FeatureGraphicBase=t.FeatureGeometry=t.Feature=t.LayerStatusType=t.MapType=t.CItemType=t.CLinStyleMakeType=t.CLinJointType=t.CLinHeadType=t.CLinAdjustType=t.NetElemType=t.NetAnalyType=t.ISShowArc=t.EightDirType=t.LineConstrain=t.LabelSpreadType=t.RepeatType=t.LabelPntType=t.LabelRegType=t.LabelLinType=t.FontShape=t.FeatureType=t.VectClsType=t.XClsType=t.DynShowStyle=t.DynNoteLableType=t.CRegionInfo=t.CPointInfo=t.CLineInfo=t.Circle=t.CGDBInfo=t.CDynNoteInfo=t.CDisplayStyleExtend=t.CDisplayStyle=t.CAttDataRow=t.CAttStruct=t.Zondy=t.Arc=t.AnyLine=t.ServiceBase=t.CalculateModelService=t.GeoDatasetService=t.UserService=t.TDTLayer=t.ArcGISLayer=t.MapVectorLayer=t.MapWMTSLayer=t.MapWmsLayer=t.MapTileLayer=t.MapDocLayer=t.mapboxgl=t.MapExtend=undefined;var n=r(234);var i=r(235);var o=r(22);var a=r(18);var s=r(288);var u=r(312);var l=r(313);var f=r(174);var c=r(343);var h=r(358);var p=r(366);var d=r(372);var v=r(375);var y=r(394);var g=r(416);var m=r(422);t.MapExtend=n.MapExtend;t.mapboxgl=i.mapboxgl;t.MapDocLayer=i.MapDocLayer;t.MapTileLayer=i.MapTileLayer;t.MapWmsLayer=i.MapWmsLayer;t.MapWMTSLayer=i.MapWMTSLayer;t.MapVectorLayer=i.MapVectorLayer;t.ArcGISLayer=i.ArcGISLayer;t.TDTLayer=i.TDTLayer;t.UserService=v.UserService;t.GeoDatasetService=v.GeoDatasetService;t.CalculateModelService=v.CalculateModelService;t.ServiceBase=o.ServiceBase;t.AnyLine=a.AnyLine;t.Arc=a.Arc;t.Zondy=a.Zondy;t.CAttStruct=a.CAttStruct;t.CAttDataRow=a.CAttDataRow;t.CDisplayStyle=a.CDisplayStyle;t.CDisplayStyleExtend=a.CDisplayStyleExtend;t.CDynNoteInfo=a.CDynNoteInfo;t.CGDBInfo=a.CGDBInfo;t.Circle=a.Circle;t.CLineInfo=a.CLineInfo;t.CPointInfo=a.CPointInfo;t.CRegionInfo=a.CRegionInfo;t.DynNoteLableType=a.DynNoteLableType;t.DynShowStyle=a.DynShowStyle;t.XClsType=a.XClsType;t.VectClsType=a.VectClsType;t.FeatureType=a.FeatureType;t.FontShape=a.FontShape;t.LabelLinType=a.LabelLinType;t.LabelRegType=a.LabelRegType;t.LabelPntType=a.LabelPntType;t.RepeatType=a.RepeatType;t.LabelSpreadType=a.LabelSpreadType;t.LineConstrain=a.LineConstrain;t.EightDirType=a.EightDirType;t.ISShowArc=a.ISShowArc;t.NetAnalyType=a.NetAnalyType;t.NetElemType=a.NetElemType;t.CLinAdjustType=a.CLinAdjustType;t.CLinHeadType=a.CLinHeadType;t.CLinJointType=a.CLinJointType;t.CLinStyleMakeType=a.CLinStyleMakeType;t.CItemType=a.CItemType;t.MapType=a.MapType;t.LayerStatusType=a.LayerStatusType;t.Feature=a.Feature;t.FeatureGeometry=a.FeatureGeometry;t.FeatureGraphicBase=a.FeatureGraphicBase;t.FeatureSet=a.FeatureSet;t.GLine=a.GLine;t.GPoint=a.GPoint;t.GRegion=a.GRegion;t.LabelLinInfo=a.LabelLinInfo;t.LabelRegInfo=a.LabelRegInfo;t.LablePntInfo=a.LablePntInfo;t.MultiPolygon=a.MultiPolygon;t.Point2D=a.Point2D;t.Polygon=a.Polygon;t.PolyLine=a.PolyLine;t.Rectangle=a.Rectangle;t.Tangram=a.Tangram;t.VectCls=a.VectCls;t.WebGraphicsInfo=a.WebGraphicsInfo;t.extend=a.extend;t.isArray=a.isArray;t.extendDeep=a.extendDeep;t.copy=a.copy;t.copyExcluce=a.copyExcluce;t.reset=a.reset;t.getElement=a.getElement;t.isElement=a.isElement;t.removeItem=a.removeItem;t.indexOf=a.indexOf;t.modifyDOMElement=a.modifyDOMElement;t.applyDefaults=a.applyDefaults;t.getParameterString=a.getParameterString;t.getWFParameterString=a.getWFParameterString;t.urlAppend=a.urlAppend;t.getParameters=a.getParameters;t.IS_GECKO=a.IS_GECKO;t.Browser=a.Browser;t.getBrowser=a.getBrowser;t.isSupportCanvas=a.isSupportCanvas;t.supportCanvas=a.supportCanvas;t.isInTheSameDomain=a.isInTheSameDomain;t.toJSON=a.toJSON;t.transformResult=a.transformResult;t.copyAttributes=a.copyAttributes;t.copyAttributesWithClip=a.copyAttributesWithClip;t.cloneObject=a.cloneObject;t.newGuid=a.newGuid;t.bind=a.bind;t.bindAsEventListener=a.bindAsEventListener;t.getTopAnalysisResult=a.getTopAnalysisResult;t.ChineseToUtf8=a.ChineseToUtf8;t.DeepMerge=a.DeepMerge;t.merge=a.merge;t.mixin=a.mixin;t.ContourNoteParam=s.ContourNoteParam;t.ContourParam=s.ContourParam;t.ContourZValue=s.ContourZValue;t.ContourRegionInfo=s.ContourRegionInfo;t.MeshingParam=s.MeshingParam;t.NetAnalyse=s.NetAnalyse;t.NetAnalysisExtent=s.NetAnalysisExtent;t.SlopLineParam=s.SlopLineParam;t.CommonServiceBase=u.CommonServiceBase;t.Events=u.Events;t.CORS=u.CORS;t.RequestTimeout=u.RequestTimeout;t.FetchRequest=u.FetchRequest;t.IgsServiceBase=u.IgsServiceBase;t.JSONFormat=u.JSONFormat;t.ColorInfo=l.ColorInfo;t.GDBInfo=l.GDBInfo;t.MapDoc=l.MapDoc;t.CatalogService=l.CatalogService;t.TileLayer=l.TileLayer;t.VectorLayer=l.VectorLayer;t.EditDocFeature=f.EditDocFeature;t.EditLayerFeature=f.EditLayerFeature;t.EditServiceBase=f.EditServiceBase;t.MultiGeoQuery=f.MultiGeoQuery;t.MultiGeoQueryParameter=f.MultiGeoQueryParameter;t.ObjClsQuery=f.ObjClsQuery;t.ObjClsQueryParameter=f.ObjClsQueryParameter;t.QueryByLayerParameter=f.QueryByLayerParameter;t.QueryDocFeature=f.QueryDocFeature;t.QueryFeatureRule=f.QueryFeatureRule;t.QueryFeatureStruct=f.QueryFeatureStruct;t.QueryLayerFeature=f.QueryLayerFeature;t.QueryParameter=f.QueryParameter;t.QueryParameterBase=f.QueryParameterBase;t.QueryServiceBase=f.QueryServiceBase;t.AnalysisBase=c.AnalysisBase;t.ClassBufferBase=c.ClassBufferBase;t.ClassBufferByMultiplyRing=c.ClassBufferByMultiplyRing;t.ClassBufferBySingleRing=c.ClassBufferBySingleRing;t.ClipBase=c.ClipBase;t.ClipByCircle=c.ClipByCircle;t.ClipByLayer=c.ClipByLayer;t.ClipByPolygon=c.ClipByPolygon;t.ContourAnalyse=c.ContourAnalyse;t.FeatureBuffBase=c.FeatureBuffBase;t.FeatureBuffByMultiplyRing=c.FeatureBuffByMultiplyRing;t.FeatureBuffBySingleRing=c.FeatureBuffBySingleRing;t.NetAnalysis=c.NetAnalysis;t.OverlayBase=c.OverlayBase;t.OverlayByLayer=c.OverlayByLayer;t.OverlayByPolygon=c.OverlayByPolygon;t.ProjectBase=c.ProjectBase;t.ProjectByLayer=c.ProjectByLayer;t.ProjectBySRID=c.ProjectBySRID;t.CalArea=h.CalArea;t.CalPolyLineLength=h.CalPolyLineLength;t.CalServiceBase=h.CalServiceBase;t.CProjectBySRSID=h.CProjectBySRSID;t.CProjectParam=h.CProjectParam;t.GeometryAnalysisBase=h.GeometryAnalysisBase;t.ProjectDots=h.ProjectDots;t.ProjectRang=h.ProjectRang;t.Smooth=h.Smooth;t.TopAnalysis=h.TopAnalysis;t.GetDocImageService=p.GetDocImageService;t.GetLayerImageService=p.GetLayerImageService;t.GetMapImageService=p.GetMapImageService;t.GetMapInfoService=p.GetMapInfoService;t.GetTileImageService=p.GetTileImageService;t.MapServiceBase=p.MapServiceBase;t.CAllOtherDataItemInfoSource=d.CAllOtherDataItemInfoSource;t.CAnnInfo=d.CAnnInfo;t.CChartLabelFormat=d.CChartLabelFormat;t.CChartTheme=d.CChartTheme;t.CChartThemeInfo=d.CChartThemeInfo;t.CChartThemeRepresentInfo=d.CChartThemeRepresentInfo;t.CChartType=d.CChartType;t.CDotDensityTheme=d.CDotDensityTheme;t.CFourColorTheme=d.CFourColorTheme;t.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme;t.CLinInfo=d.CLinInfo;t.CMultiClassTheme=d.CMultiClassTheme;t.CPntInfo=d.CPntInfo;t.CRandomTheme=d.CRandomTheme;t.CRangeTheme=d.CRangeTheme;t.CRangeThemeInfo=d.CRangeThemeInfo;t.CRegInfo=d.CRegInfo;t.CSimpleTheme=d.CSimpleTheme;t.CTheme=d.CTheme;t.CThemeInfo=d.CThemeInfo;t.CUniqueTheme=d.CUniqueTheme;t.CUniqueThemeInfo=d.CUniqueThemeInfo;t.ExpInfo=d.ExpInfo;t.FolderInfo=d.FolderInfo;t.FolderInfoAttribute=d.FolderInfoAttribute;t.ItemValue=d.ItemValue;t.ThemeOper=d.ThemeOper;t.ThemesInfo=d.ThemesInfo;t.GeoFeatureThemeLayer=y.GeoFeatureThemeLayer;t.ThemeLayer=y.ThemeLayer;t.RangeThemeLayer=y.RangeThemeLayer;t.UniqueThemeLayer=y.UniqueThemeLayer;t.GraphThemeLayer=y.GraphThemeLayer;t.graphThemeLayer=y.graphThemeLayer;t.RandomThemeLayer=y.RandomThemeLayer;t.SimpleThemeLayer=y.SimpleThemeLayer;t.RankSymbolThemeLayer=y.RankSymbolThemeLayer;t.ThemeStyle=y.ThemeStyle;t.PostgisCatlogService=g.PostgisCatlogService;t.PostgisCustomQueryService=g.PostgisCustomQueryService;t.PostgisQueryService=g.PostgisQueryService;t.PostgisTableService=g.PostgisTableService;t.PostgisVectorTileService=g.PostgisVectorTileService;t.EchartsLayer=m.EchartsLayer;t.MapvLayer=m.MapvLayer;t.DeckglLayer=m.DeckglLayer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapExtend=undefined;var n=r(11);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var a=t.MapExtend=function(){i.default.Map.prototype.overlayLayersManager={};i.default.Map.prototype.addLayer=function(e,t){if(e.source||e.type==="custom"||e.type==="background"){this.addLayerBak(e,t);return this}if(this.overlayLayersManager[e.id]||this.style._layers[e.id]){this.fire("error",{error:new Error("A layer with this id already exists.")});return}this._addLayer(e,this);this.overlayLayersManager[e.id]=e;return this};i.default.Map.prototype.getLayer=function(e){if(this.overlayLayersManager[e]){return this.overlayLayersManager[e]}return this.style.getLayer(e)};i.default.Map.prototype.moveLayer=function(e,t){if(this.overlayLayersManager[e]){n(e,t);return this}if(this.style._layers[e]){this.style.moveLayer(e,t);this._update(true);return this}};i.default.Map.prototype.removeLayer=function(e){if(this.overlayLayersManager[e]){t(this.overlayLayersManager[e]);delete this.overlayLayersManager[e];return this}this.style.removeLayer(e);this._update(true);return this};i.default.Map.prototype.setLayoutProperty=function(e,t,n){if(this.overlayLayersManager[e]){if(t==="visibility"){if(n==="visible"){n=true}else{n=false}r(this.overlayLayersManager[e],n);this.style.fire("data",{dataType:"style"})}return this}this.style.setLayoutProperty(e,t,n);this._update(true);return this};i.default.Map.prototype.updateTransform=function(e,t,r,n,o,a,s){this.transform.units=e;this.transform.latRange=[this._tileExtent[1],this._tileExtent[3]];this.transform.lngRange=[this._tileExtent[0],this._tileExtent[2]];var u=this.mercatorZfromAltitude;i.default.MercatorCoordinate.fromLngLat=function(e,n){n=n||0;var o=i.default.LngLat.convert(e);return new i.default.MercatorCoordinate((o.lng-t)/a,(r-o.lat)/s,u(n,o.lat))};i.default.MercatorCoordinate.prototype.toLngLat=function(){return new i.default.LngLat(this.x*a+t,r-this.y*s)};this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+o+";}}"],{type:"text/javascript"}))};function e(e,t){e.onAdd&&e.onAdd(t)}function t(e){e.removeFromMap&&e.removeFromMap()}function r(e,t){e.setVisibility&&e.setVisibility(t)}function n(e,t){var r=document.getElementById(e);if(t){var n=document.getElementById(t);if(!n){i.default.Evented.prototype.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this document.')})}}if(r&&n){n.parentNode.insertBefore(r,n)}else{r.parentNode.appendChild(r)}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TDTLayer=t.ArcGISLayer=t.MapVectorLayer=t.MapWMTSLayer=t.MapWmsLayer=t.MapTileLayer=t.MapDocLayer=t.mapboxgl=undefined;var n=r(28);var i=r(236);var o=r(265);var a=r(266);var s=r(267);var u=r(268);var l=r(269);var f=r(270);t.mapboxgl=n.mapboxgl;t.MapDocLayer=i.MapDocLayer;t.MapTileLayer=o.MapTileLayer;t.MapWmsLayer=a.MapWmsLayer;t.MapWMTSLayer=s.MapWMTSLayer;t.MapVectorLayer=u.MapVectorLayer;t.ArcGISLayer=l.ArcGISLayer;t.TDTLayer=f.TDTLayer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapDocLayer=undefined;var n=r(8);var i=s(n);var o=r(28);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/docs/"+t)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/docs/"+t)}this.options={layers:null,filters:null,style:null,f:null,proj:null,guid:null,keepCache:true,attribution:"Zondy Map doc Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,a.extend)(this.options,r)};u.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.sourceID||"source_"+(0,a.newGuid)();var r=this.layerID||"layer_"+(0,a.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:t};if(this.map.style){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.map_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.map_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var e=this;var t=e.url+"?";t+=encodeURI(e._initAllRequestParams().join("&"));t+="&bbox={bbox}";this._layerUrl=t};u.prototype._initAllRequestParams=function(){var e=this,t=e.options||{},r=[];var n=t.f||"png";r.push("f="+n);var o=this.options.tileSize||512;var s,u;if(typeof o==="number"){s=u=o}else{r.push("w="+o.x||512);r.push("h="+o.y||512)}r.push("w="+s);r.push("h="+u);if(t.layers){r.push("layers="+t.layers)}if(t.filters){r.push("filters="+t.filters)}if(t.style){r.push("style="+(0,i.default)(t.style))}var l=t.guid||(0,a.newGuid)();r.push("guid="+l);if(t.proj){r.push("proj="+t.proj)}if(t.cache!==undefined&&t.isAntialiasing!==null){r.push("cache="+t.cache)}if(t.update!==undefined&&t.isAntialiasing!==null){r.push("update="+t.update)}if(t.mode){r.push("mode="+t.mode)}if(t.isAntialiasing!==undefined&&t.isAntialiasing!==null){r.push("isAntialiasing="+t.isAntialiasing)}return r};u.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};t.MapDocLayer=u;o.Zondy.Map.MapDocLayer=u},function(e,t,r){var n=r(10);var i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function e(t){return i.stringify.apply(i,arguments)}},function(e,t,r){r(239);e.exports=r(10).Object.keys},function(e,t,r){var n=r(44);var i=r(45);r(55)("keys",function(){return function e(t){return i(n(t))}})},function(e,t,r){var n=r(34);var i=r(137);var o=r(241);e.exports=function(e){return function(t,r,a){var s=n(t);var u=i(s.length);var l=o(a,u);var f;if(e&&r!=r)while(u>l){f=s[l++];if(f!=f)return true}else for(;u>l;l++)if(e||l in s){if(s[l]===r)return e||l||0}return!e&&-1}}},function(e,t,r){var n=r(80);var i=Math.max;var o=Math.min;e.exports=function(e,t){e=n(e);return e<0?i(e+t,0):o(e,t)}},function(e,t,r){r(243);var n=r(10).Object;e.exports=function e(t,r,i){return n.defineProperty(t,r,i)}},function(e,t,r){var n=r(17);n(n.S+n.F*!r(25),"Object",{defineProperty:r(29).f})},function(e,t,r){r(245);var n=r(10).Object;e.exports=function e(t,r){return n.getOwnPropertyDescriptor(t,r)}},function(e,t,r){var n=r(34);var i=r(87).f;r(55)("getOwnPropertyDescriptor",function(){return function e(t,r){return i(n(t),r)}})},function(e,t,r){e.exports={default:r(247),__esModule:true}},function(e,t,r){r(139);e.exports=r(10).Object.getOwnPropertySymbols},function(e,t,r){var n=r(54)("meta");var i=r(30);var o=r(33);var a=r(29).f;var s=0;var u=Object.isExtensible||function(){return true};var l=!r(38)(function(){return u(Object.preventExtensions({}))});var f=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})};var c=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i};var h=function(e,t){if(!o(e,n)){if(!u(e))return true;if(!t)return false;f(e)}return e[n].w};var p=function(e){if(l&&d.NEED&&u(e)&&!o(e,n))f(e);return e};var d=e.exports={KEY:n,NEED:false,fastKey:c,getWeak:h,onFreeze:p}},function(e,t,r){var n=r(45);var i=r(61);var o=r(59);e.exports=function(e){var t=n(e);var r=i.f;if(r){var a=r(e);var s=o.f;var u=0;var l;while(a.length>u)if(s.call(e,l=a[u++]))t.push(l)}return t}},function(e,t,r){var n=r(46);e.exports=Array.isArray||function e(t){return n(t)=="Array"}},function(e,t,r){var n=r(29);var i=r(21);var o=r(45);e.exports=r(25)?Object.defineProperties:function e(t,r){i(t);var a=o(r);var s=a.length;var u=0;var l;while(s>u)n.f(t,l=a[u++],r[l]);return t}},function(e,t,r){r(253);var n=r(10).Object;e.exports=function e(t){return n.getOwnPropertyNames(t)}},function(e,t,r){r(55)("getOwnPropertyNames",function(){return r(142).f})},function(e,t,r){e.exports={default:r(255),__esModule:true}},function(e,t,r){r(93);r(94);e.exports=r(88).f("iterator")},function(e,t,r){var n=r(80);var i=r(79);e.exports=function(e){return function(t,r){var o=String(i(t));var a=n(r);var s=o.length;var u,l;if(a<0||a>=s)return e?"":undefined;u=o.charCodeAt(a);return u<55296||u>56319||a+1===s||(l=o.charCodeAt(a+1))<56320||l>57343?e?o.charAt(a):u:e?o.slice(a,a+2):(u-55296<<10)+(l-56320)+65536}}},function(e,t,r){"use strict";var n=r(90);var i=r(57);var o=r(60);var a={};r(35)(a,r(14)("iterator"),function(){return this});e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)});o(e,t+" Iterator")}},function(e,t,r){"use strict";var n=r(259);var i=r(260);var o=r(49);var a=r(34);e.exports=r(143)(Array,"Array",function(e,t){this._t=a(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var r=this._i++;if(!e||r>=e.length){this._t=undefined;return i(1)}if(t=="keys")return i(0,r);if(t=="values")return i(0,e[r]);return i(0,[r,e[r]])},"values");o.Arguments=o.Array;n("keys");n("values");n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports={default:r(262),__esModule:true}},function(e,t,r){r(139);r(145);r(263);r(264);e.exports=r(10).Symbol},function(e,t,r){r(89)("asyncIterator")},function(e,t,r){r(89)("observable")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapTileLayer=undefined;var n=r(28);var i=r(6);var o=function e(t,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var o=r&&r.ip?r.ip:"localhost";var a=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+o+":"+a+"/igs/rest/mrms/tile/"+t)}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/tile/"+t)}this.options={tileExtent:[-180,-90,180,90],zoomOffset:0,yAxis:"down",origin:[-180,90],tileSize:512,attribution:"Zondy Map Tile Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,i.extend)(this.options,r)};o.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.options.zoomOffset;mapboxgl.CanonicalTileID.prototype.url=function(e,r){var n=this.getTileBBox();if(t>this.z){t=0}var i=a(this.z-t,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z-t)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)};var r=this.sourceID||"source_"+(0,i.newGuid)();var n=this.layerID||"layer_"+(0,i.newGuid)();var o={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};var s={id:n,type:"raster",source:r};if(this.map.getStyle()){if(this.map.getSource(r)===undefined){this.map.addSource(r,o);this.sourceID=r}if(this.map.getLayer(n)===undefined){this.map.addLayer(s);this.layerID=n}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var u=this;u.map.on("load",function(){u.map.addSource(r,o);u.sourceID=r;u.map.addLayer(s);u.layerID=n;return u})}};o.prototype._initLayerUrl=function(){var e=this;var t=e.url+"/{z}/{y}/{x}";this._layerUrl=t};function a(e,t,r){var n="",i=void 0;for(var o=e;o>0;o--){i=1<<o-1;n+=(t&i?1:0)+(r&i?2:0)}return n}t.MapTileLayer=o;n.Zondy.Map.MapTileLayer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapWmsLayer=undefined;var n=r(8);var i=s(n);var o=r(28);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var t=t?t:{};var r=t&&t.domain?t.domain:"";if(r===""){this.networkProtocol=t.networkProtocol!==undefined?t.networkProtocol:location.protocol.split(":")[0]||"http";var n=t&&t.ip?t.ip:"localhost";var i=t&&t.port?t.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/"+t.serverType+"/"+t.serverName+"/WMSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/"+t.serverType+"/"+t.serverName+"/WMSServer")}this.options={layers:null,styles:null,format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",width:"256",height:"256",srs:"EPSG:4326",crs:"EPSG:4326",guid:null,keepCache:true,attribution:"Zondy WMS Data"};this.layerID=t.layerID?t.layerID:null;this.sourceID=t.sourceID?t.sourceID:null;this.map=null;(0,a.extend)(this.options,t)};u.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.sourceID||"source_"+(0,a.newGuid)();var r=this.layerID||"layer_"+(0,a.newGuid)();this.wms_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:t};if(this.map.getStyle()){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.wms_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.wms_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var e=this;var t=e.url+"?";t+=encodeURI(e._initAllRequestParams().join("&"));t+="&bbox={bbox}";this._layerUrl=t};u.prototype._initAllRequestParams=function(){var e=this,t=e.options||{},r=[];if(t.version){r.push("version="+t.version)}if(t.request){r.push("request="+t.request)}if(t.version==="1.1.1"){r.push("srs="+t.srs)}else if(t.version==="1.3.0"){r.push("crs="+t.crs)}if(t.service){r.push("service="+t.service)}if(t.layers){r.push("layers="+t.layers)}if(t.filters){r.push("filters="+t.filters)}if(t.styles){r.push("styles="+(0,i.default)(t.styles))}else{r.push("styles=")}if(t.format){r.push("format="+t.format)}else{r.push("format=image/png")}r.push("width="+t.width);r.push("height="+t.height);if(t.guid){r.push("guid="+t.guid)}if(!t.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wms_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wms_source);this.map.addLayer(this.mLayer)};t.MapWmsLayer=u;o.Zondy.Map.MapWmsLayer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapWMTSLayer=undefined;var n=r(8);var i=s(n);var o=r(28);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var t=t?t:{};var r=t&&t.domain?t.domain:"";if(r===""){this.networkProtocol=t.networkProtocol!==undefined?t.networkProtocol:location.protocol.split(":")[0]||"http";var n=t&&t.ip?t.ip:"localhost";var i=t&&t.port?t.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+n+":"+i+"/igs/rest/ogc/WMTSServer")}else{this.url=this._url=encodeURI(r+"/igs/rest/ogc/WMTSServer")}this.options={layer:"",style:null,format:"image/png",service:"WMTS",version:"1.0.0",request:"GetTile",tileMatrixSet:null,tileMatrix:"{z}",tileRow:"{y}",tileCol:"{x}",guid:null,keepCache:true,attribution:"Zondy WMTS Data"};this.layerID=t.layerID?t.layerID:null;this.sourceID=t.sourceID?t.sourceID:null;this.map=null;(0,a.extend)(this.options,t)};u.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();this.map.crs=this.options.crs;var t=this.sourceID||"source_"+(0,a.newGuid)();var r=this.layerID||"layer_"+(0,a.newGuid)();this.wmts_source={type:"raster",tiles:[this._layerUrl]};this.mLayer={id:r,type:"raster",source:t};if(this.map.getStyle()){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.wmts_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.wmts_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var e=this;var t=e.url+"?";t+=e._initAllRequestParams().join("&");this._layerUrl=t};u.prototype._initAllRequestParams=function(){var e=this,t=e.options||{},r=[];if(t.version){r.push("version="+t.version)}if(t.request){r.push("request="+t.request)}if(t.service){r.push("service="+t.service)}if(t.layer){r.push("layer="+t.layer)}if(t.style){r.push("style="+(0,i.default)(t.style))}else{r.push("style=")}if(t.format){r.push("format="+t.format)}else{r.push("format=image/png")}if(t.tileMatrixSet){r.push("tileMatrixSet="+t.tileMatrixSet)}if(t.tileMatrix){r.push("tileMatrix="+t.tileMatrix)}if(t.tileRow){r.push("tileRow="+t.tileRow)}if(t.tileCol){r.push("tileCol="+t.tileCol)}if(t.guid){r.push("guid="+t.guid)}if(!t.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.wmts_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.wmts_source);this.map.addLayer(this.mLayer)};t.MapWMTSLayer=u;o.Zondy.Map.MapWMTSLayer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapVectorLayer=undefined;var n=r(8);var i=s(n);var o=r(28);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t,r){var r=r?r:{};var n=r&&r.domain?r.domain:"";if(n===""){this.networkProtocol=r.networkProtocol!==undefined?r.networkProtocol:location.protocol.split(":")[0]||"http";var i=r&&r.ip?r.ip:"localhost";var o=r&&r.port?r.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+o+"/igs/rest/mrms/layers")}else{this.url=this._url=encodeURI(n+"/igs/rest/mrms/layers")}this.options={gdbps:t,filters:null,style:null,f:null,guid:null,keepCache:true,attribution:"Zondy Map vector Data"};this.layerID=r.layerID?r.layerID:null;this.sourceID=r.sourceID?r.sourceID:null;this.map=null;(0,a.extend)(this.options,r)};u.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.sourceID||"source_"+(0,a.newGuid)();var r=this.layerID||"layer_"+(0,a.newGuid)();this.vector_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:t};if(this.map.getStyle()){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.vector_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.vector_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};u.prototype._initLayerUrl=function(){var e=this;var t=e.url+"?";t+=encodeURI(e._initAllRequestParams().join("&"));t+="&bbox={bbox}";this._layerUrl=t};u.prototype._initAllRequestParams=function(){var e=this,t=e.options||{},r=[];var n=this.options.tileSize||512;r.push("width="+n);r.push("height="+n);if(t.gdbps){r.push("gdbps="+t.gdbps)}if(t.filters){r.push("filters="+t.filters)}if(t.style){r.push("style="+(0,i.default)(t.style))}if(t.f){r.push("f="+t.style)}else{r.push("f=png")}if(t.guid){r.push("guid="+t.guid)}if(!t.keepCache){r.push("temp="+Math.random())}return r};u.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.vector_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.vector_source);this.map.addLayer(this.mLayer)};t.MapVectorLayer=u;o.Zondy.Map.MapVectorLayer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ArcGISLayer=undefined;var n=r(28);var i=r(6);var o=function e(t){this.options={layerType:"NGS_Topo_US_2D",url:"http://services.arcgisonline.com/ArcGIS/rest/services/{layerType}/MapServer/tile/{z}/{y}/{x}.jpg",tileSize:256,f:"image",format:"png",dpi:96,transparent:true,attribution:"ArcGIS"};this.layerID=null;this.sourceID=null;this.map=null;(0,i.extend)(this.options,t)};o.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:t};if(this.map.style){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.map_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.map_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._url=this.options.url;if(this.options.layerType&&this._url.indexOf("{layerType}/MapServer/tile/{z}/{y}/{x}")>0){this._url=this.options.url.replace("{layerType}",this.options.layerType)}else{this._crs=this.options.crs||this.map.options.crs}this._layerUrl=this._url};o.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};t.ArcGISLayer=o;n.Zondy.Map.ArcGISLayer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TDTLayer=undefined;var n=r(28);var i=r(6);var o=function e(t){this.layerLabelMap={vec:"cva",ter:"cta",img:"cia"};this.layerZoomMap={vec:18,ter:14,img:18};this.options={layerType:"vec",isLabel:false,url:"http://t"+Math.round(Math.random()*7)+".tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],version:"1.0.0",tilematrixSet:"",tileSize:256,matrixIds:null,layer:"",attribution:""};this.layerID=t.layerID?t.layerID:null;this.sourceID=t.sourceID?t.sourceID:null;this.map=null;this.initialize(t);(0,i.extend)(this.options,t)};o.prototype.initialize=function(e){e=e||{};if(this.options.baseURL){var t=this.options.baseURL.split("gov.cn/")[1];if(this.options.baseURL.indexOf("?")>0){t=t.split("?")[0]}this.options.layerType=t.substring(0,t.length-7)}this.options.layer=this.options.isLabel&&this.layerLabelMap[this.options.layerType]?this.layerLabelMap[this.options.layerType]:this.options.layerType;if(this.options.layerType==="ter"){this.options.maxZoom=14}else{this.options.maxZoom=18}this._url=this.options.url;this.options.ip=this.options.ip?this.options.ip:"localhost";this.options.port=this.options.port?this.options.port:"6163"};o.prototype.addToMap=function(e){this.map=e;this._initLayerUrl();var t=this.sourceID||"source_"+(0,i.newGuid)();var r=this.layerID||"layer_"+(0,i.newGuid)();this.map_source={type:"raster",tiles:[this._layerUrl],tileSize:this.options.tileSize||512};this.mLayer={id:r,type:"raster",source:t};if(this.map.style){if(this.map.getSource(t)===undefined){this.map.addSource(t,this.map_source);this.sourceID=t}if(this.map.getLayer(r)===undefined){this.map.addLayer(this.mLayer);this.layerID=r}return this}else{this.map.setStyle({version:8,sources:{},layers:[]});var n=this;n.map.on("load",function(){n.map.addSource(t,n.map_source);n.sourceID=t;n.map.addLayer(n.mLayer);n.layerID=r;return n})}};o.prototype._initLayerUrl=function(){this._crs=this.options.crs||map.crs.epsgCode;this.options.tilematrixSet=this._crs==="EPSG:4326"?"c":"w";var e=[];if(this.options.layerType.indexOf("igs")>0){var t="http://{ip}:{port}/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?";var r=this.options&&this.options.domain?this.options.domain:"";if(r===""){this.networkProtocol=this.options.networkProtocol!==undefined?this.options.networkProtocol:location.protocol.split(":")[0]||"http";t=this.networkProtocol+"://"+this.options.ip+":"+this.options.port+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}else{t=r+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"}var n;switch(this.options.layerType){case"vec_igs":n="vector";break;case"img_igs":n="raster";break;case"cva_igs":n="vectorAnno";break;case"cia_igs":n="rasterAnno";break;default:n="vector";break}this._url=t.replace("{layerType}",n)}else if(this.options.baseURL){this._url=this.options.baseURL;if(this.options.baseURL.indexOf("?")<0){this._url+="?"}}else{this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet)}if(this.options.layerType.indexOf("igs")<0){e.push("request=GetTile");if(this.options.version){e.push("version="+this.options.version)}if(this.options.style){e.push("style="+this.options.style)}if(this.options.tilematrixSet){e.push("tilematrixSet="+this.options.tilematrixSet)}if(this.options.format){e.push("format="+this.options.format)}if(this.options.tileSize){e.push("width="+this.options.tileSize);e.push("height="+this.options.tileSize)}if(this.options.layer){e.push("layer="+this.options.layer)}e.push("tilematrix={z}");e.push("tilerow={y}");e.push("tilecol={x}")}if(this.options.token){e.push("tk="+this.options.token)}e.push("service=WMTS");this._url+=e.join("&");this._layerUrl=this._url};o.prototype.refreshMap=function(e){if(e){this.options.guid=e}this._initLayerUrl();this.map.removeLayer(this.layerID);this.map.removeSource(this.sourceID);this.map_source["tiles"]=[this._layerUrl];this.map.addSource(this.sourceID,this.map_source);this.map.addLayer(this.mLayer)};t.TDTLayer=o;n.Zondy.Map.TDTLayer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Arc=undefined;var n=r(0);var i=r(6);var o=function e(t,r){this.ArcID=0;var n=r!==undefined?r:{};(0,i.extend)(this,n);this.Dots=t!==undefined&&t!==null?t:null};t.Arc=o;n.Zondy.Object.Arc=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CAttDataRow=undefined;var n=r(0);var i=r(6);var o=function e(t,r,n){var o=n!==undefined?n:{};(0,i.extend)(this,o);this.FID=r!==undefined?r:0;this.Values=t!==undefined?t:null};t.CAttDataRow=o;n.Zondy.Object.CAttDataRow=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CDisplayStyle=undefined;var n=r(0);var i=r(6);var o=r(146);var a=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.AnnSizeFixed=r.AnnSizeFixed!==undefined?r.AnnSizeFixed:false;this.DriverQuality=r.DriverQuality!==undefined?r.DriverQuality:0;this.DynProjFlag=r.DynProjFlag!==undefined?r.DynProjFlag:false;this.FollowScale=r.FollowScale!==undefined?r.FollowScale:false;this.LinPenWidFixed=r.LinPenWidFixed!==undefined?r.LinPenWidFixed:false;this.LinSizeFixed=r.LinSizeFixed!==undefined?r.LinSizeFixed:false;this.PntPenWidFixed=r.PntPenWidFixed!==undefined?r.PntPenWidFixed:false;this.PntSizeFixed=r.PntSizeFixed!==undefined?r.PntSizeFixed:false;this.RegPenWidFixed=r.RegPenWidFixed!==undefined?r.RegPenWidFixed:false;this.RegSizeFixed=r.RegSizeFixed!==undefined?r.RegSizeFixed:false;this.ShowCoordPnt=r.ShowCoordPnt!==undefined?r.ShowCoordPnt:false;this.ShowElemRect=r.ShowElemRect!==undefined?r.ShowElemRect:false;this.ShowStyle=r.ShowStyle!==undefined?r.ShowStyle:null;this.SymbleShow=r.SymbleShow!==undefined?r.SymbleShow:false};t.CDisplayStyle=a;n.Zondy.Object.CDisplayStyle=a},function(e,t,r){"use strict";t.__esModule=true;var n=r(58);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,r){if(t in e){(0,i.default)(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Circle=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(36);var v=r(19);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=n?n:{};var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,o));s.point=e!==undefined&&e!==null?e:null;s.radious=r!==undefined&&r!==null?r:null;return s}(0,u.default)(t,[{key:"setByOL",value:function e(t){if(t!==undefined&&t!==null){var r=t.getCenter();var n=t.getRadius();this.point=new p.Zondy.Object.Point2D(r[0],r[1]);this.radious=n}}},{key:"toString",value:function e(){if(this.point===null||this.point.length===0||this.radious===null){return""}return this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function e(){return"Circle"}}]);return t}(d.Tangram);t.Circle=g;p.Zondy.Object.Circle=g},function(e,t,r){r(277);e.exports=r(10).Object.getPrototypeOf},function(e,t,r){var n=r(44);var i=r(144);r(55)("getPrototypeOf",function(){return function e(t){return i(n(t))}})},function(e,t,r){e.exports={default:r(279),__esModule:true}},function(e,t,r){r(280);e.exports=r(10).Object.setPrototypeOf},function(e,t,r){var n=r(17);n(n.S,"Object",{setPrototypeOf:r(281).set})},function(e,t,r){var n=r(30);var i=r(21);var o=function(e,t){i(e);if(!n(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(48)(Function.call,r(87).f(Object.prototype,"__proto__").set,2);n(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(r,i){o(r,i);if(t)r.__proto__=i;else n(r,i);return r}}({},false):undefined),check:o}},function(e,t,r){e.exports={default:r(283),__esModule:true}},function(e,t,r){r(284);var n=r(10).Object;e.exports=function e(t,r){return n.create(t,r)}},function(e,t,r){var n=r(17);n(n.S,"Object",{create:r(90)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MultiPolygon=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(36);var d=r(19);var v=r(157);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.polygonArr=e!==undefined&&e!==null&&Array.isArray(e)?e:new Array;return o}(0,u.default)(t,[{key:"setByOL",value:function e(t){if(t!==undefined&&t!==null){this.polygonArr=[];var r=t.getLinearRingCount();var n=t.getLinearRings();for(var i=0;i<r;i++){var o=n[i].getCoordinates();var a=o.length;var s=[];for(var u=0;u<a;u++){s[u]=new d.Point2D(o[u][0],o[u][1])}this.polygonArr[i]=new v.Polygon(s)}}}},{key:"toString",value:function e(){if(this.polygonArr===undefined||this.polygonArr===null||this.polygonArr.length===0)return"";var t="";for(var r=0;r<this.polygonArr.length;r++){t+=this.polygonArr[r].toString()+";"}return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function e(){return"multiPolygon"}}]);return t}(p.Tangram);t.MultiPolygon=g;Zondy.Object.MultiPolygon=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PolyLine=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(36);var d=r(19);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.nearDis=n.nearDis!==undefined&&n.nearDis!==null?parseFloat(n.nearDis):null;o.pointArr=e!==undefined&&e!==null&&Array.isArray(e)?e:new Array;return o}(0,u.default)(t,[{key:"setByOL",value:function e(t){if(t!==undefined&&t!==null){var r=t.getCoordinates();var n=r.length;for(var i=0;i<n;i++){this.pointArr[i]=new d.Point2D(r[i][0],r[i][1])}}}},{key:"toString",value:function e(){if(this.pointArr===null||this.pointArr.length===0)return"";var t=this.pointArr[0].x+","+this.pointArr[0].y;for(var r=1;r<this.pointArr.length;r++){t+=","+this.pointArr[r].x+","+this.pointArr[r].y}if(this.nearDis!==undefined&&this.nearDis!==null){t+=";"+this.nearDis}return this.Trim(t,"g")}},{key:"getGeometryType",value:function e(){return"line"}}]);return t}(p.Tangram);t.PolyLine=y;Zondy.Object.PolyLine=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VectCls=undefined;var n=r(0);var i=r(6);var o=r(15);var a=r(62);var s=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.clsType=r.clsType!==undefined?r.clsType:o.VectClsType.SFCls;this.clsName=r.clsName!==undefined?r.clsName:null;this.geoType=r.geoType!==undefined?r.geoType:1;this.srefName=r.srefName!==undefined?encodeURI(r.srefName):"";this.dsName=r.dsName!==undefined?encodeURI(r.dsName):"";this.attStruct=r.attStruct!==undefined?r.attStruct:null};t.VectCls=s;n.Zondy.Object.VectCls=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RuleParse=t.SlopLineParam=t.NetAnalysisExtent=t.NetAnalyse=t.MeshingParam=t.ContourRegionInfo=t.ContourZValue=t.ContourParam=t.ContourNoteParam=undefined;var n=r(158);var i=r(159);var o=r(161);var a=r(162);var s=r(163);var u=r(289);var l=r(290);var f=r(160);var c=r(311);t.ContourNoteParam=n.ContourNoteParam;t.ContourParam=i.ContourParam;t.ContourZValue=o.ContourZValue;t.ContourRegionInfo=a.ContourRegionInfo;t.MeshingParam=s.MeshingParam;t.NetAnalyse=u.NetAnalyse;t.NetAnalysisExtent=l.NetAnalysisExtent;t.SlopLineParam=f.SlopLineParam;t.RuleParse=c.RuleParse},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NetAnalyse=undefined;var n=r(0);var i=r(6);var o=function e(t){var r=t!==undefined?t:{};(0,i.extend)(this,r);this.netCls=r.netCls!==undefined?r.netCls:null;this.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;this.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;this.weight=r.weight!==undefined?r.weight:null;this.mode=r.mode!==undefined?r.mode:null;this.isTour=r.isTour!==undefined?r.isTour:false;this.isTravel=r.isTravel!==undefined?r.isTravel:false;this.usedTWgt=r.usedTWgt!==undefined?r.usedTWgt:false;this.turnWgt=r.turnWgt!==undefined?r.turnWgt:null;this.roadName=r.roadName!==undefined?r.roadName:"name"};t.NetAnalyse=o;n.Zondy.Object.NetAnalyse=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NetAnalysisExtent=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(6);var g=r(22);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.analyTp=r.analyTp!==undefined?r.analyTp:"UserMode";n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.outFormat=r.outFormat!==undefined?r.outFormat:"JSON";n.elementType=r.elementType!==undefined?r.elementType:2;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.roadName=r.roadName!==undefined?r.roadName:"name";n.baseUrl="igs/rest/netAnaly";return n}(0,f.default)(t,[{key:"getNetInfo",value:function e(t,r,n,i){if(t==null||t==undefined){t="weight"}this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var o=this;var a=o.getFullUrl();var s=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"addNetFlag",value:function e(t,r,n,o,a){var s=null;var u={};if(o!=null&&o.toUpperCase()=="POST"){u.dotVal=t;this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis}else{this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis}var l=this;var f=l.getFullUrl();var c=new m.IgsServiceBase(f,{eventListeners:{scope:l,processCompleted:r,processFailed:n}});if(o!=null&&o.toUpperCase()=="POST"){c.processAsync({method:"POST",data:(0,i.default)(u),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}else{c.processAsync()}}},{key:"netAnalyse",value:function e(t,r,n,o){this.partUrl="netAnalyse";var a=this;var s=a.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function e(t,r,n,o){this.partUrl="comNetAnalyse";var a=this;var s=a.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function e(t,r,n,o){this.partUrl="pluNetAnalyse";var a=this;var s=a.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});u.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(g.ServiceBase);t.NetAnalysisExtent=b;v.Zondy.Service.NetAnalysisExtent=b},function(e,t,r){r(145);r(93);r(94);r(292);r(303);r(304);e.exports=r(10).Promise},function(e,t,r){"use strict";var n=r(47);var i=r(12);var o=r(48);var a=r(165);var s=r(17);var u=r(30);var l=r(56);var f=r(293);var c=r(294);var h=r(167);var p=r(103).set;var d=r(298)();var v=r(104);var y=r(168);var g=r(299);var m=r(169);var _="Promise";var b=i.TypeError;var S=i.process;var x=S&&S.versions;var C=x&&x.v8||"";var w=i[_];var P=a(S)=="process";var I=function(){};var E,L,T,M;var O=L=v.f;var A=!!function(){try{var e=w.resolve(1);var t=(e.constructor={})[r(14)("species")]=function(e){e(I,I)};return(P||typeof PromiseRejectionEvent=="function")&&e.then(I)instanceof t&&C.indexOf("6.6")!==0&&g.indexOf("Chrome/66")===-1}catch(e){}}();var N=function(e){var t;return u(e)&&typeof(t=e.then)=="function"?t:false};var R=function(e,t){if(e._n)return;e._n=true;var r=e._c;d(function(){var n=e._v;var i=e._s==1;var o=0;var a=function(t){var r=i?t.ok:t.fail;var o=t.resolve;var a=t.reject;var s=t.domain;var u,l,f;try{if(r){if(!i){if(e._h==2)F(e);e._h=1}if(r===true)u=n;else{if(s)s.enter();u=r(n);if(s){s.exit();f=true}}if(u===t.promise){a(b("Promise-chain cycle"))}else if(l=N(u)){l.call(u,o,a)}else o(u)}else a(n)}catch(e){if(s&&!f)s.exit();a(e)}};while(r.length>o)a(r[o++]);e._c=[];e._n=false;if(t&&!e._h)k(e)})};var k=function(e){p.call(i,function(){var t=e._v;var r=D(e);var n,o,a;if(r){n=y(function(){if(P){S.emit("unhandledRejection",t,e)}else if(o=i.onunhandledrejection){o({promise:e,reason:t})}else if((a=i.console)&&a.error){a.error("Unhandled promise rejection",t)}});e._h=P||D(e)?2:1}e._a=undefined;if(r&&n.e)throw n.v})};var D=function(e){return e._h!==1&&(e._a||e._c).length===0};var F=function(e){p.call(i,function(){var t;if(P){S.emit("rejectionHandled",e)}else if(t=i.onrejectionhandled){t({promise:e,reason:e._v})}})};var B=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;if(!t._a)t._a=t._c.slice();R(t,true)};var j=function(e){var t=this;var r;if(t._d)return;t._d=true;t=t._w||t;try{if(t===e)throw b("Promise can't be resolved itself");if(r=N(e)){d(function(){var n={_w:t,_d:false};try{r.call(e,o(j,n,1),o(B,n,1))}catch(e){B.call(n,e)}})}else{t._v=e;t._s=1;R(t,false)}}catch(e){B.call({_w:t,_d:false},e)}};if(!A){w=function e(t){f(this,w,_,"_h");l(t);E.call(this);try{t(o(j,this,1),o(B,this,1))}catch(e){B.call(this,e)}};E=function e(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};E.prototype=r(300)(w.prototype,{then:function e(t,r){var n=O(h(this,w));n.ok=typeof t=="function"?t:true;n.fail=typeof r=="function"&&r;n.domain=P?S.domain:undefined;this._c.push(n);if(this._a)this._a.push(n);if(this._s)R(this,false);return n.promise},catch:function(e){return this.then(undefined,e)}});T=function(){var e=new E;this.promise=e;this.resolve=o(j,e,1);this.reject=o(B,e,1)};v.f=O=function(e){return e===w||e===M?new T(e):L(e)}}s(s.G+s.W+s.F*!A,{Promise:w});r(60)(w,_);r(301)(_);M=r(10)[_];s(s.S+s.F*!A,_,{reject:function e(t){var r=O(this);var n=r.reject;n(t);return r.promise}});s(s.S+s.F*(n||!A),_,{resolve:function e(t){return m(n&&this===M?w:this,t)}});s(s.S+s.F*!(A&&r(302)(function(e){w.all(e)["catch"](I)})),_,{all:function e(t){var r=this;var n=O(r);var i=n.resolve;var o=n.reject;var a=y(function(){var e=[];var n=0;var a=1;c(t,false,function(t){var s=n++;var u=false;e.push(undefined);a++;r.resolve(t).then(function(t){if(u)return;u=true;e[s]=t;--a||i(e)},o)});--a||i(e)});if(a.e)o(a.v);return n.promise},race:function e(t){var r=this;var n=O(r);var i=n.reject;var o=y(function(){c(t,false,function(e){r.resolve(e).then(n.resolve,i)})});if(o.e)i(o.v);return n.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||n!==undefined&&n in e){throw TypeError(r+": incorrect invocation!")}return e}},function(e,t,r){var n=r(48);var i=r(295);var o=r(296);var a=r(21);var s=r(137);var u=r(166);var l={};var f={};var t=e.exports=function(e,t,r,c,h){var p=h?function(){return e}:u(e);var d=n(r,c,t?2:1);var v=0;var y,g,m,_;if(typeof p!="function")throw TypeError(e+" is not iterable!");if(o(p))for(y=s(e.length);y>v;v++){_=t?d(a(g=e[v])[0],g[1]):d(e[v]);if(_===l||_===f)return _}else for(m=p.call(e);!(g=m.next()).done;){_=i(m,d,g.value,t);if(_===l||_===f)return _}};t.BREAK=l;t.RETURN=f},function(e,t,r){var n=r(21);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e["return"];if(o!==undefined)n(o.call(e));throw t}}},function(e,t,r){var n=r(49);var i=r(14)("iterator");var o=Array.prototype;e.exports=function(e){return e!==undefined&&(n.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,r){var n=r===undefined;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(12);var i=r(103).set;var o=n.MutationObserver||n.WebKitMutationObserver;var a=n.process;var s=n.Promise;var u=r(46)(a)=="process";e.exports=function(){var e,t,r;var l=function(){var n,i;if(u&&(n=a.domain))n.exit();while(e){i=e.fn;e=e.next;try{i()}catch(n){if(e)r();else t=undefined;throw n}}t=undefined;if(n)n.enter()};if(u){r=function(){a.nextTick(l)}}else if(o&&!(n.navigator&&n.navigator.standalone)){var f=true;var c=document.createTextNode("");new o(l).observe(c,{characterData:true});r=function(){c.data=f=!f}}else if(s&&s.resolve){var h=s.resolve(undefined);r=function(){h.then(l)}}else{r=function(){i.call(n,l)}}return function(n){var i={fn:n,next:undefined};if(t)t.next=i;if(!e){e=i;r()}t=i}}},function(e,t,r){var n=r(12);var i=n.navigator;e.exports=i&&i.userAgent||""},function(e,t,r){var n=r(35);e.exports=function(e,t,r){for(var i in t){if(r&&e[i])e[i]=t[i];else n(e,i,t[i])}return e}},function(e,t,r){"use strict";var n=r(12);var i=r(10);var o=r(29);var a=r(25);var s=r(14)("species");e.exports=function(e){var t=typeof i[e]=="function"?i[e]:n[e];if(a&&t&&!t[s])o.f(t,s,{configurable:true,get:function(){return this}})}},function(e,t,r){var n=r(14)("iterator");var i=false;try{var o=[7][n]();o["return"]=function(){i=true};Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return false;var r=false;try{var o=[7];var a=o[n]();a.next=function(){return{done:r=true}};o[n]=function(){return a};e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(17);var i=r(10);var o=r(12);var a=r(167);var s=r(169);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise);var r=typeof e=="function";return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(17);var i=r(104);var o=r(168);n(n.S,"Promise",{try:function(e){var t=i.f(this);var r=o(e);(r.e?t.reject:t.resolve)(r.v);return t.promise}})},function(e,t,r){"use strict";var n=r(306);var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}window.Promise=i.default},function(e,t,r){"use strict";var n,i;var o=r(307);var a=l(o);var s=r(24);var u=l(s);function l(e){return e&&e.__esModule?e:{default:e}}(function(o,a){(false?undefined:(0,u.default)(t))==="object"&&typeof e!=="undefined"?e.exports=a():true?!(n=a,i=typeof n==="function"?n.call(t,r,t,e):n,i!==undefined&&(e.exports=i)):undefined})(undefined,function(){"use strict";var e=setTimeout;function t(){}function r(e,t){return function(){e.apply(t,arguments)}}function n(e,t){while(e._state===3){e=e._value}if(e._state===0){e._deferreds.push(t);return}e._handled=true;c._immediateFn(function(){var r=e._state===1?t.onFulfilled:t.onRejected;if(r===null){(e._state===1?i:o)(t.promise,e._value);return}var n;try{n=r(e._value)}catch(e){o(t.promise,e);return}i(t.promise,n)})}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&((typeof t==="undefined"?"undefined":(0,u.default)(t))==="object"||typeof t==="function")){var n=t.then;if(t instanceof c){e._state=3;e._value=t;s(e);return}else if(typeof n==="function"){f(r(n,t),e);return}}e._state=1;e._value=t;s(e)}catch(t){o(e,t)}}function o(e,t){e._state=2;e._value=t;s(e)}function s(e){if(e._state===2&&e._deferreds.length===0){c._immediateFn(function(){if(!e._handled){c._unhandledRejectionFn(e._value)}})}for(var t=0,r=e._deferreds.length;t<r;t++){n(e,e._deferreds[t])}e._deferreds=null}function l(e,t,r){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.promise=r}function f(e,t){var r=false;try{e(function(e){if(r)return;r=true;i(t,e)},function(e){if(r)return;r=true;o(t,e)})}catch(e){if(r)return;r=true;o(t,e)}}function c(e){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if(typeof e!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];f(e,this)}var h=c.prototype;h.catch=function(e){return this.then(null,e)};h.then=function(e,r){var i=new this.constructor(t);n(this,new l(e,r,i));return i};c.all=function(e){return new c(function(t,r){if(!e||typeof e.length==="undefined")throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(e);if(n.length===0)return t([]);var i=n.length;function o(e,a){try{if(a&&((typeof a==="undefined"?"undefined":(0,u.default)(a))==="object"||typeof a==="function")){var s=a.then;if(typeof s==="function"){s.call(a,function(t){o(e,t)},r);return}}n[e]=a;if(--i===0){t(n)}}catch(e){r(e)}}for(var a=0;a<n.length;a++){o(a,n[a])}})};c.resolve=function(e){if(e&&(typeof e==="undefined"?"undefined":(0,u.default)(e))==="object"&&e.constructor===c){return e}return new c(function(t){t(e)})};c.reject=function(e){return new c(function(t,r){r(e)})};c.race=function(e){return new c(function(t,r){for(var n=0,i=e.length;n<i;n++){e[n].then(t,r)}})};c._immediateFn=typeof a.default==="function"&&function(e){(0,a.default)(e)}||function(t){e(t,0)};c._unhandledRejectionFn=function e(t){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",t)}};return c})},function(e,t,r){e.exports={default:r(308),__esModule:true}},function(e,t,r){r(309);e.exports=r(10).setImmediate},function(e,t,r){var n=r(17);var i=r(103);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){"use strict";var n=r(102);var i=s(n);var o=r(92);var a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}(function(t){"use strict";if(!t.__disableNativeFetch&&t.fetch){return}function r(e){if(typeof e!=="string"){e=String(e)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e)){throw new TypeError("Invalid character in header field name")}return e.toLowerCase()}function n(e){if(typeof e!=="string"){e=String(e)}return e}function o(e){this.map={};if(e instanceof o){e.forEach(function(e,t){this.append(t,e)},this)}else if(e){(0,a.default)(e).forEach(function(t){this.append(t,e[t])},this)}}o.prototype.append=function(e,t){e=r(e);t=n(t);var i=this.map[e];if(!i){i=[];this.map[e]=i}i.push(t)};o.prototype["delete"]=function(e){delete this.map[r(e)]};o.prototype.get=function(e){var t=this.map[r(e)];return t?t[0]:null};o.prototype.getAll=function(e){return this.map[r(e)]||[]};o.prototype.has=function(e){return this.map.hasOwnProperty(r(e))};o.prototype.set=function(e,t){this.map[r(e)]=[n(t)]};o.prototype.forEach=function(e,t){(0,a.default)(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};function s(e){if(e.bodyUsed){return i.default.reject(new TypeError("Already read"))}e.bodyUsed=true}function u(e){return new i.default(function(t,r){e.onload=function(){t(e.result)};e.onerror=function(){r(e.error)}})}function l(e){var t=new FileReader;t.readAsArrayBuffer(e);return u(t)}function f(e,t){var r=new FileReader;var n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"";var i=/charset\=[0-9a-zA-Z\-\_]*;?/;var o=e.type.match(i)||n.match(i);var a=[e];if(o){a.push(o[0].replace(/^charset\=/,"").replace(/;$/,""))}r.readAsText.apply(r,a);return u(r)}var c={blob:"FileReader"in t&&"Blob"in t&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function h(){this.bodyUsed=false;this._initBody=function(e,t){this._bodyInit=e;if(typeof e==="string"){this._bodyText=e}else if(c.blob&&Blob.prototype.isPrototypeOf(e)){this._bodyBlob=e;this._options=t}else if(c.formData&&FormData.prototype.isPrototypeOf(e)){this._bodyFormData=e}else if(!e){this._bodyText=""}else if(c.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(e)){}else{throw new Error("unsupported BodyInit type")}};if(c.blob){this.blob=function(){var e=s(this);if(e){return e}if(this._bodyBlob){return i.default.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return i.default.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(l)};this.text=function(){var e=s(this);if(e){return e}if(this._bodyBlob){return f(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return i.default.resolve(this._bodyText)}}}else{this.text=function(){var e=s(this);return e?e:i.default.resolve(this._bodyText)}}if(c.formData){this.formData=function(){return this.text().then(y)}}this.json=function(){return this.text().then(JSON.parse)};return this}var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function d(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}function v(e,t){t=t||{};var r=t.body;if(v.prototype.isPrototypeOf(e)){if(e.bodyUsed){throw new TypeError("Already read")}this.url=e.url;this.credentials=e.credentials;if(!t.headers){this.headers=new o(e.headers)}this.method=e.method;this.mode=e.mode;if(!r){r=e._bodyInit;e.bodyUsed=true}}else{this.url=e}this.credentials=t.credentials||this.credentials||"omit";if(t.headers||!this.headers){this.headers=new o(t.headers)}this.method=d(t.method||this.method||"GET");this.mode=t.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&r){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(r,t)}v.prototype.clone=function(){return new v(this)};function y(e){var t=new FormData;e.trim().split("&").forEach(function(e){if(e){var r=e.split("=");var n=r.shift().replace(/\+/g," ");var i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}});return t}function g(e){var t=new o;var r=e.getAllResponseHeaders().trim().split("\n");r.forEach(function(e){var r=e.trim().split(":");var n=r.shift().trim();var i=r.join(":").trim();t.append(n,i)});return t}h.call(v.prototype);function m(e,t){if(!t){t={}}this._initBody(e,t);this.type="default";this.status=t.status;this.ok=this.status>=200&&this.status<300;this.statusText=t.statusText;this.headers=t.headers instanceof o?t.headers:new o(t.headers);this.url=t.url||""}h.call(m.prototype);m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})};m.error=function(){var e=new m(null,{status:0,statusText:""});e.type="error";return e};var _=[301,302,303,307,308];m.redirect=function(e,t){if(_.indexOf(t)===-1){throw new RangeError("Invalid status code")}return new m(null,{status:t,headers:{location:e}})};t.Headers=o;t.Request=v;t.Response=m;t.fetch=function(e,t){return new i.default(function(r,n){var i;if(v.prototype.isPrototypeOf(e)&&!t){i=e}else{i=new v(e,t)}var o=new XMLHttpRequest;function a(){if("responseURL"in o){return o.responseURL}if(/^X-Request-URL:/m.test(o.getAllResponseHeaders())){return o.getResponseHeader("X-Request-URL")}return}var s=false;function u(){if(o.readyState!==4){return}var e=o.status===1223?204:o.status;if(e<100||e>599){if(s){return}else{s=true}n(new TypeError("Network request failed"));return}var t={status:e,statusText:o.statusText,headers:g(o),url:a()};var i="response"in o?o.response:o.responseText;if(s){return}else{s=true}r(new m(i,t))}o.onreadystatechange=u;o.onload=u;o.onerror=function(){if(s){return}else{s=true}n(new TypeError("Network request failed"))};o.open(i.method,i.url,true);try{if(i.credentials==="include"){if("withCredentials"in o){o.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}if("responseType"in o&&c.blob){o.responseType="blob"}i.headers.forEach(function(e,t){o.setRequestHeader(t,e)});o.send(typeof i._bodyInit==="undefined"?null:i._bodyInit)})};t.fetch.polyfill=true;if(typeof e!=="undefined"&&e.exports){e.exports=t.fetch}})(typeof self!=="undefined"?self:undefined)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RuleParse=t.IgserverRules=t.MapRules=undefined;var n=r(1);var i=s(n);var o=r(5);var a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}var u=t.MapRules=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}];var l=t.IgserverRules=[{type:"DynamicTile",id:2,title:"",description:"IGSMap2D",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"IGSMap2D",id:3,title:"",description:"IGServerREST",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSTile",id:5,title:"",description:"IGServerREST",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"WMS",id:8,title:"WMS",description:"OGC-WMS",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WMTS",id:10,title:"WMTS",description:"OGC-WMTS",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}}];var f=t.RuleParse=function(){function e(){(0,i.default)(this,e)}(0,a.default)(e,[{key:"get",value:function e(t,r,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"baseUrl";var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"GetMap";var s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:"mapboxgl";var f=undefined;if(typeof t==="number"){f=l.find(function(e){return e.id===t})}else if(typeof t==="string"){f=l.find(function(e){return e.title==t})}if(!f)return undefined;var c=f[o][a];c=c.replace("{ip}",r);c=c.replace("{port}",n);while(c.indexOf("{serverName}")>=0){c=c.replace("{serverName}",i)}var h=void 0;switch(s){case"mapboxgl":h=u.filter(function(e){return e.type==="mapboxgl"});c=c.replace("{level}/{row}/{col}",h[0].rule);c=c.replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}");c=c.replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":h=u.filter(function(e){return e.type==="cesium"});c=c.replace("{level}/{row}/{col}",h[0].rule)}return c}},{key:"GetCapabilities",value:function e(t,r,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"baseUrl";return this.get(t,r,n,i,o,"GetCapabilities")}},{key:"GetMap",value:function e(t,r,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"baseUrl";var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"mapboxgl";return this.get(t,r,n,i,o,"GetMap",a)}},{key:"GetFeatureInfo",value:function e(t,r,n,i){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"baseUrl";return this.get(t,r,n,i,o,"GetFeatureInfo")}}]);return e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.JSONFormat=t.IgsServiceBase=t.FetchRequest=t.RequestTimeout=t.CORS=t.Events=t.CommonServiceBase=undefined;var n=r(164);var i=r(170);var o=r(172);var a=r(9);var s=r(171);t.CommonServiceBase=n.CommonServiceBase;t.Events=i.Events;t.CORS=o.CORS;t.RequestTimeout=o.RequestTimeout;t.FetchRequest=o.FetchRequest;t.IgsServiceBase=a.IgsServiceBase;t.JSONFormat=s.JSONFormat;var u={Events:i.Events,CommonServiceBase:n.CommonServiceBase,CORS:o.CORS,RequestTimeout:o.RequestTimeout,FetchRequest:o.FetchRequest,IgsServiceBase:a.IgsServiceBase,JSONFormat:s.JSONFormat};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SystomInfo=t.VectorLayer=t.TileLayer=t.CatalogService=t.MapDoc=t.GDBInfo=t.ColorInfo=undefined;var n=r(314);var i=r(173);var o=r(315);var a=r(39);var s=r(316);var u=r(317);var l=r(318);t.ColorInfo=n.ColorInfo;t.GDBInfo=i.GDBInfo;t.MapDoc=o.MapDoc;t.CatalogService=a.CatalogService;t.TileLayer=s.TileLayer;t.VectorLayer=u.VectorLayer;t.SystomInfo=l.SystomInfo},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorInfo=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(39);var d=r(9);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.SystemLibID=r.SystemLibID!==undefined?r.SystemLibID:0;n.ColorNO=r.ColorNO!==undefined?r.ColorNO:6;n.Red=r.Red!==undefined?r.Red:0;n.Green=r.Green!==undefined?r.Green:0;n.Blue=r.Blue!==undefined?r.Blue:0;n.addNew=r.addNew!==undefined?r.addNew:false;return n}(0,u.default)(t,[{key:"getColorNO",value:function e(t,r,n){var i=this;if(t!==null&&t!==undefined){if(t.SystemLibID!==undefined){i.SystemLibID=t.SystemLibID}if(t.Red!==undefined){i.Red=t.Red}if(t.Green!==undefined){i.Green=t.Green}if(t.Blue!==undefined){i.Blue=t.Blue}if(t.addNew!==undefined){i.addNew=t.addNew}}i.partUrl="ColorLib/getColorNO?f=json&libID="+i.SystemLibID+"&r="+i.Red+"&g="+i.Green+"&b="+i.Blue+"&addNew="+i.addNew;var o=i.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getColorRGB",value:function e(t,r,n){var i=this;if(t!==null&&t!==undefined){if(t.SystemLibID!==undefined){i.SystemLibID=t.SystemLibID}if(t.ColorNO!==undefined){i.ColorNO=t.ColorNO}}i.partUrl="ColorLib/getColorRGB?f=json&libID="+i.SystemLibID+"&colorNO="+i.ColorNO;var o=i.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}}]);return t}(p.CatalogService);t.ColorInfo=y;Zondy.Catalog.ColorInfo=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapDoc=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(6);var g=r(39);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.mapIndex=r.mapIndex!==undefined?r.mapIndex:0;n.layerID=r.layerID!==undefined?r.layerID:0;n.version=r.version!==undefined?r.version:2;n.include=r.include!==undefined?r.include:"{includeDetails:true,includeSubs:false}";n.returnFullStyle=r.returnFullStyle!==undefined?r.returnFullStyle:false;n.guid=r.guid!==undefined?r.guid:(0,y.newGuid)();return n}(0,f.default)(t,[{key:"getMapDocList",value:function e(t,r){var n=this;n.partUrl="docs?v="+this.version+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getMapDocInfo",value:function e(t,r,n,i,o){var a=this;if(typeof o==="boolean"){a.returnFullStyle=o}if(typeof r==="boolean"||typeof n==="boolean"){var s={includeDetails:typeof r==="boolean"?r:true,includeSubs:typeof n==="boolean"?n:false};a.include=(0,y.toJSON)(s)}a.partUrl="docs/"+a.docName+"?include="+a.include+"&returnFullStyle="+a.returnFullStyle+"&guid="+a.guid+"&f=json";var u=a.getFullUrl();var l=new m.IgsServiceBase(u,{eventListeners:{scope:a,processCompleted:t,processFailed:i}});l.processAsync()}},{key:"getMapInfo",value:function e(t,r,n){var i=this;if(typeof r==="boolean"){i.returnFullStyle=r}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var o=i.getFullUrl();var a=new m.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:t,processFailed:n}});a.processAsync()}},{key:"getMapDocTree",value:function e(t,r){var n=this;n.partUrl="docs/"+n.docName+"?tree=true&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getLayerInfo",value:function e(t,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerID+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getLayersInfo",value:function e(t,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers?f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"deleteLayer",value:function e(t,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/delete?layerIDs="+n.layerID+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();var o=new m.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"addLayer",value:function e(t,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/add?guid="+o.guid+"&f=json";var a=o.getFullUrl();var s=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function e(t,r,n){var o=this;o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/layers/index?guid="+o.guid+"&f=json";var a=o.getFullUrl();var s=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function e(t,r,n,i){var o=this;o.partUrl="legendInfo/"+o.docName+"?f=json&layerIndexes="+t+"&fields="+r;var a=o.getFullUrl();var s=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});s.processAsync()}}]);return t}(g.CatalogService);t.MapDoc=b;v.Zondy.Catalog.MapDoc=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TileLayer=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(39);var d=r(9);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.tileName=r.tileName!==undefined?r.tileName:null;n.version=r.version!==undefined?r.version:"2.0";return n}(0,u.default)(t,[{key:"getTileList",value:function e(t,r){var n=this;n.partUrl="tiles?f=json";if(this.version){if(n.version==="2.0"){n.partUrl+="&v=2"}else{n.partUrl+="&v="+n.version}}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getTileInfo",value:function e(t,r){var n=this;n.partUrl="tiles/"+n.tileName+"?f=json";if(n.version){n.partUrl+="&v="+n.version}var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}}]);return t}(p.CatalogService);t.TileLayer=y;Zondy.Catalog.TileLayer=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VectorLayer=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(6);var y=r(173);var g=r(9);var m=r(62);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};return(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r))}(0,f.default)(t,[{key:"getSfclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?user="+n.User+"&psw="+n.Password+"&containAll="+this.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getAclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getOclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getNclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getRdsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?containAll="+n.containAll+"&f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getDsSfclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0||n.serverName.toLowerCase()==="mapgislocalplus")n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getDsAclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getDsOclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getDsNclsList",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getRdsListInRcs",value:function e(t,r){var n=this;if(n.serverName.toLowerCase().indexOf("mapgislocal")>=0)n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?f=json";else n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getLayerList",value:function e(t,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?containAll="+i.containAll+"&f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getLayerListInDS",value:function e(t,r,n){var i=this;if(i.serverName.toLowerCase().indexOf("mapgislocal")>=0)i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?f=json";else i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&f=json";var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getLayerInfo",value:function e(t,r,n,i){var o=this;o.partUrl="layerinfo?gdbpUrl="+t+"&f=json"+"&encryptPassword="+i+"&proj="+this.proj;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync()}},{key:"CreateVectCls",value:function e(t,r,n){var o=this;t=t!==null?t:null;if(t===null||o.serverName===null||o.gdbName===null){return}if(o.User!==null&&o.Password!==null){o.partUrl="datasource/"+o.User+":"+o.Password+"@"}else{o.partUrl="datasource/"}if(t.clsName===null){t.clsName=(0,v.newGuid)()}o.partUrl+=o.serverName+"/"+o.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?"+"geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json";if(t.attStruct===null){t.attStruct=new m.CAttStruct}var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deleteXCls",value:function e(t,r,n,i){var o=this;if(o.serverName===null||o.gdbName===null||t===null||r===null){return}o.partUrl="datasource/"+o.serverName+"/"+o.gdbName+"/"+t+"/"+r+"/delete?f=json";var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});s.processAsync()}}]);return t}(y.GDBInfo);t.VectorLayer=b;Zondy.Catalog.VectorLayer=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SystomInfo=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(39);var d=r(9);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.f=r.f||"json";n.page=r.page||0;n.pageCount=r.pageCount||20;n.systemLib=r.systemLib||null;n.type=r.type||null;return n}(0,u.default)(t,[{key:"GetSystemLibrary",value:function e(t,r){var n=this;n.partUrl="systemlibraries?f="+n.f;var i=n.getFullUrl();var o=new d.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"GetSymbol",value:function e(t,r){var n=this;var i="symbols?&systemLib="+n.systemLib+"&type="+n.type;if(n.f){i+="&f="+n.f}if(n.page){i+="&page="+n.page}if(n.size){i+="&size="+n.pageCount}n.partUrl=i;var o=n.getFullUrl();var a=new d.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});a.processAsync()}}]);return t}(p.CatalogService);t.SystomInfo=y;Zondy.Catalog.SystomInfo=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EditDocFeature=undefined;var n=r(8);var i=m(n);var o=r(2);var a=m(o);var s=r(1);var u=m(s);var l=r(5);var f=m(l);var c=r(3);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(105);var g=r(9);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e,r,n){(0,u.default)(this,t);var i=n?n:{};var o=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,i));o.docName=e!==undefined?e:null;o.mapIndex=0;o.layerIndex=r!==undefined?r:0;return o}(0,f.default)(t,[{key:"add",value:function e(t,r,n){var o=this;if(t===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/addFeatures?f="+o.f+"&guid="+o.guid;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function e(t,r,n){var o=this;if(t===undefined){return}o.partUrl="docs/"+o.docName+"/"+o.mapIndex+"/"+o.layerIndex+"/updateFeatures?f="+o.f+"&guid="+o.guid;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function e(t,r,n){var i=this;if(t===undefined){return}i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/deleteFeatures?f="+i.f+"&objectIds="+t+"&guid="+i.guid;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}}]);return t}(y.EditServiceBase);t.EditDocFeature=_;v.Zondy.Service.EditDocFeature=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EditLayerFeature=undefined;var n=r(8);var i=m(n);var o=r(2);var a=m(o);var s=r(1);var u=m(s);var l=r(5);var f=m(l);var c=r(3);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(105);var g=r(9);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var n=r?r:{};var i=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,n));i.gdbp=e!==undefined?e:null;return i}(0,f.default)(t,[{key:"add",value:function e(t,r,n){var o=this;if(t===undefined){return}o.partUrl="layer/addFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"update",value:function e(t,r,n){var o=this;if(t===undefined){return}o.partUrl="layer/updateFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"deletes",value:function e(t,r,n){var i=this;if(t===undefined){return}i.partUrl="layer/deleteFeatures?f="+i.f+"&objectIds="+t+"&gdbp="+i.gdbp+"&guid="+i.guid;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}}]);return t}(y.EditServiceBase);t.EditLayerFeature=_;v.Zondy.Service.EditLayerFeature=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MultiGeoQuery=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(50);var g=r(177);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e,r,n,i){(0,u.default)(this,t);var o=i?i:{};var s=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,o));s.queryParam=e;s.mapName=r;s.mapIndex=0;s.layerIndex=n;s.baseUrl="igs/rest/extend/MultiGeo";s.partUrl="docs/"+s.mapName+"/"+s.mapIndex.toString()+"/"+s.layerIndex+"/Geoquery";s.partUrl+=e.getParameterURL();return s}(0,f.default)(t,[{key:"query",value:function e(t,r){if(this.queryParam===null||!(this.queryParam instanceof g.MultiGeoQueryParameter)){return}var n=null;if(this.queryParam.geometryType==="point"){n={pointArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="line"){n={lineArr:this.queryParam.geometry}}else if(this.queryParam.geometryType==="polygon"){n={PolygonObjs:this.queryParam.geometry}}var o=this;var a=o.getFullUrl();var s=new m.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:t,processFailed:r}});s.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.QueryServiceBase);t.MultiGeoQuery=b;v.Zondy.Service.MultiGeoQuery=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjClsQuery=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(4);var h=g(c);var p=r(0);var d=r(50);var v=r(178);var y=r(9);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=n?n:{};var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,o));s.queryParam=e;s.gdbp=r;s.baseUrl="igs/rest/extend/dxlcz";s.partUrl="objlayer/query?gdbp="+r;s.partUrl+=e.getParameterURL();return s}(0,u.default)(t,[{key:"query",value:function e(t,r){if(this.queryParam===null||!(this.queryParam instanceof v.ObjClsQueryParameter)){return}var n=this;var i=n.getFullUrl();var o=new y.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}}]);return t}(d.QueryServiceBase);t.ObjClsQuery=m;p.Zondy.Service.ObjClsQuery=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryLayerFeature=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(50);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.queryParam=e;o.partUrl="layer/query";return o}return t}(h.QueryServiceBase);t.QueryLayerFeature=d;c.Zondy.Service.QueryLayerFeature=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueryUnifyParameter=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(3);var u=v(s);var l=r(4);var f=v(l);var c=r(179);var h=r(66);var p=r(180);var d=r(325);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.QueryUnifyParameter=function(e){(0,f.default)(t,e);function t(){(0,a.default)(this,t);return(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return t}((0,d.mix)(c.QueryByLayerParameter,h.QueryParameter,p.QueryDocFeature));t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(58);var i=p(n);var o=r(86);var a=p(o);var s=r(326);var u=p(s);var l=r(330);var f=p(l);var c=r(1);var h=p(c);t.mix=d;t.copyProperties=v;function p(e){return e&&e.__esModule?e:{default:e}}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var n=function e(){(0,h.default)(this,e);var r=true;var n=false;var i=undefined;try{for(var o=(0,f.default)(t),a;!(r=(a=o.next()).done);r=true){var s=a.value;s&&v(this,new s)}}catch(e){n=true;i=e}finally{try{if(!r&&o.return){o.return()}}finally{if(n){throw i}}}};var i=true;var o=false;var a=undefined;try{for(var s=(0,f.default)(t),u;!(i=(u=s.next()).done);i=true){var l=u.value;l&&v(n,l);l&&v(n.prototype,l.prototype)}}catch(e){o=true;a=e}finally{try{if(!i&&s.return){s.return()}}finally{if(o){throw a}}}return n}function v(e,t){var r=true;var n=false;var o=undefined;try{for(var s=(0,f.default)((0,u.default)(t)),l;!(r=(l=s.next()).done);r=true){var c=l.value;if(c!=="constructor"&&c!=="prototype"&&c!=="name"){var h=(0,a.default)(t,c);(0,i.default)(e,c,h)}}}catch(e){n=true;o=e}finally{try{if(!r&&s.return){s.return()}}finally{if(n){throw o}}}}t.default=d},function(e,t,r){e.exports={default:r(327),__esModule:true}},function(e,t,r){r(328);e.exports=r(10).Reflect.ownKeys},function(e,t,r){var n=r(17);n(n.S,"Reflect",{ownKeys:r(329)})},function(e,t,r){var n=r(91);var i=r(61);var o=r(21);var a=r(12).Reflect;e.exports=a&&a.ownKeys||function e(t){var r=n.f(o(t));var a=i.f;return a?r.concat(a(t)):r}},function(e,t,r){e.exports={default:r(331),__esModule:true}},function(e,t,r){r(94);r(93);e.exports=r(332)},function(e,t,r){var n=r(21);var i=r(166);e.exports=r(10).getIterator=function(e){var t=i(e);if(typeof t!="function")throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureService=undefined;var n=r(78);var i=d(n);var o=r(181);var a=d(o);var s=r(1);var u=d(s);var l=r(5);var f=d(l);var c=r(40);var h=r(174);var p=r(18);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(){(0,f.default)(e,null,[{key:"get",value:function e(t,r,n){var i=new XMLHttpRequest;i.open("GET",t,true);i.onreadystatechange=function(){if(i.readyState==4&&i.status==200||i.status==304){r.call(this,i.responseText)}else if(i.readyState===4&&i.status!==200&&i.status!==304){n.call(this,i.responseText)}};i.send()}}]);function e(t){(0,u.default)(this,e);this.url=t.url;var r=this.url.split("http://");this._ip=r[1].split(":")[0];var n=r[1].split(":")[1].split("/");this._port=n[0];if(this.url.indexOf("igs/rest/mrfs/docs")>-1){this._mapId=n[n.length-1]}}return e}();v.prototype.query=function(e,t,r){e=c.BaseParameter.formatParam(e);var n=(0,a.default)({},e);var o=void 0,s=void 0,u=void 0,l=void 0,f=void 0,d=void 0,v=void 0;f=n.layers;if(typeof f==="string"){f=f.split(",")}d=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"];(0,i.default)(n).forEach(function(e){switch(e){case"pagination":n["recordNumber"]=n.pagination;break;case"orderBy":n["orderField"]=n.orderBy;break;case"spatialRelationType":n["MustInside"]=n.spatialRelationType==="MustInside";n["Intersect"]=n.spatialRelationType==="Intersect";break;case"objectIds":n.objectIds=n.objectIds.join(",")}});if(n.hasOwnProperty("geometry")&&n.geometry||n.hasOwnProperty("rectangle")&&n.rectangle.length>0){o=new h.QueryFeatureRule({EnableDisplayCondition:n.enableDisplayCondition,MustInside:n.MustInside,CompareRectOnly:n.compareRectOnly,Intersect:n.Intersect});if(!n.hasOwnProperty("geometry")&&n.rectangle.length>0){l=new p.Rectangle(n.rectangle[0],n.rectangle[1],n.rectangle[2],n.rectangle[3]);delete n.rectangle}else if(n.geometry.type==="Point"){l=new p.Point2D(n.geometry.coordinates[0],n.geometry.coordinates[1],{nearDis:"0.001"});delete n.geometry}else if(n.geometry.type==="LineString"||n.geometry.type==="Polygon"){var y=[];for(var g=0;g<n.geometry.coordinates.length;g++){y.push(new p.Point2D(n.geometry.coordinates[g][0],n.geometry.coordinates[g][1]))}switch(n.geometry.type){case"LineString":l=new p.PolyLine(y);break;case"Polygon":l=new p.Polygon(y);break}delete n.geometry}else if(n.geometry.type==="MultiPolygon"){var m=[];for(var _=0;_<n.geometry.coordinates.length;_++){var b=[],S=n.geometry.coordinates[_];for(var x=0;x<S.length;x++){b.push(new p.Point2D(S[x][0],S[x][1]))}m.push(new p.Polygon(b))}l=new p.MultiPolygon(m);delete n.geometry}}u=new h.QueryFeatureStruct({IncludeGeometry:n.IncludeGeometry,IncludeAttribute:n.IncludeAttribute,IncludeWebGraphic:n.IncludeWebGraphic});var C=new RegExp("^[0-9]+$");if(f.length<=0){throw new Error("")}else if(C.test(f[0])){s=new h.QueryParameter;v=new h.QueryDocFeature(s,this._mapId,f.join(","),{ip:this._ip,port:this._port})}else if(typeof f[0]==="string"&&f[0].indexOf("gdbp")>-1){s=new h.QueryByLayerParameter(f);v=new h.QueryLayerFeature(s,{ip:this._ip,port:this._port})}else{throw new Error("Idgdbp")}if(l){s.geometry=l;s.rule=o}s.struct=u;var w=(0,a.default)({},n);for(var P=0;P<d.length;P++){if(w.hasOwnProperty(d[P])){delete w[d[P]]}}(0,p.extend)(s,w);v.query(function(e){if(t){t(e)}},function(e){if(r){r(e)}})};v.prototype.add=function(e,t,r,n){var i=this,o=void 0;this.getFieldAtt(t,function(a){var s=i.getFeatureSet(a,e);o=i.getFeatureService(t);o.add(s,r,n)})};v.prototype.update=function(e,t,r,n){var i=this,o=void 0;this.getFieldAtt(t,function(a){var s=i.getFeatureSet(a,e);o=i.getFeatureService(t);o.update(s,r,n)})};v.prototype.delete=function(e,t,r,n){e=e.join(",");var i=this.getFeatureService(t);i.deletes(e,r,n)};v.prototype.getFeatureSet=function(e,t){var r=[];var n=e.FieldAtt.FldType;for(var i=0;i<n.length;i++){r.push(n[i].substr(3,n[i].length).toLowerCase())}e.FieldAtt.FldType=r;var o=new p.FeatureSet({AttStruct:new p.CAttStruct(e.FieldAtt)});for(var a=0;a<t.length;a++){var s=t[a].hasOwnProperty("geometry")&&t[a].geometry,u=void 0,l=void 0,f=void 0;var c=[];for(var h=0;h<e.FieldAtt.FldName.length;h++){if(t[a].attributes.hasOwnProperty(e.FieldAtt.FldName[h])){c.push(t[a].attributes[e.FieldAtt.FldName[h]])}else{c.push(null)}}var d=new p.Feature({AttValue:c}),v=void 0;if(s){var y=t[a].geometryType,g=void 0,m=void 0,_=void 0,b=void 0,S=void 0,x=void 0,C=void 0,w=void 0;u=t[a].geometry;switch(y){case"Point":l=[];for(var P=0;P<u.length;P++){S=new p.GPoint(u[P].coordinates[0],u[P].coordinates[1]);l.push(S)}g=new p.FeatureGeometry({PntGeom:l});v=1;if(t[a].style){_=new p.CPointInfo(t[a].style);m=new p.WebGraphicsInfo({InfoType:1,PntInfo:_})}break;case"LineString":l=[];for(var I=0;I<u.length;I++){x=[];for(var E=0;E<u[I].coordinates.length;E++){x.push(new p.Point2D(u[I].coordinates[E].x,u[I].coordinates[E].y))}C=new Arc(x);b=new p.AnyLine([C]);f=new p.GLine(b);l.push(f)}g=new p.FeatureGeometry({LinGeom:l});v=2;if(t[a].style){_=new p.CLineInfo(t[a].style);m=new p.WebGraphicsInfo({InfoType:2,LinInfo:_})}break;case"Polygon":l=[];for(var L=0;L<u.length;L++){b=[];var T=[];for(var M=0;M<u[L].exterior.length;M++){T.push(new p.Point2D(u[L].exterior[M].x,u[L].exterior[M].y))}b.push(new p.AnyLine([new Arc(T)]));for(var O=0;O<u[L].interior.length;O++){var A=[];for(var N=0;N<u[L].interior[O].length;N++){A.push(new p.Point2D(u[L].interior[O][N].x,u[L].interior[O][N].y))}b.push(new p.AnyLine([new Arc(A)]))}w=new p.GRegion(b);l.push(w)}g=new p.FeatureGeometry({RegGeom:l});v=3;if(t[a].style){_=new p.CRegionInfo(t[a].style);m=new p.WebGraphicsInfo({InfoType:3,RegInfo:_})}break}d.fGeom=g;d.GraphicInfo=m;d.ftype=v}if(t[a].FID){d.setFID(t[a].FID)}o.addFeature(d)}return o};v.prototype.getFeatureService=function(e){var t=void 0;if(e.indexOf("gdbp")>=0){t=new h.EditLayerFeature(e)}else{t=new h.EditDocFeature(this._mapId,e,{ip:this._ip,port:this._port})}return t};v.prototype.getFieldAtt=function(e,t){var r=this;if(e.indexOf("gdbp")>=0){this.getGDBPInfo(e,t)}else{this.getLayerInfo(e,function(e){r.getGDBPInfo(e,t)})}};v.prototype.getGDBPInfo=function(e,t){v.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+e,function(e){e=JSON.parse(e);t(e)})};v.prototype.getLayerInfo=function(e,t){v.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+e+"?f=json",function(e){e=JSON.parse(e);var r=e.URL;t(r)})};t.FeatureService=v;p.Zondy.Service.FeatureService=v},function(e,t,r){r(335);e.exports=r(10).Object.assign},function(e,t,r){var n=r(17);n(n.S+n.F,"Object",{assign:r(336)})},function(e,t,r){"use strict";var n=r(25);var i=r(45);var o=r(61);var a=r(59);var s=r(44);var u=r(136);var l=Object.assign;e.exports=!l||r(38)(function(){var e={};var t={};var r=Symbol();var n="abcdefghijklmnopqrst";e[r]=7;n.split("").forEach(function(e){t[e]=e});return l({},e)[r]!=7||Object.keys(l({},t)).join("")!=n})?function e(t,r){var l=s(t);var f=arguments.length;var c=1;var h=o.f;var p=a.f;while(f>c){var d=u(arguments[c++]);var v=h?i(d).concat(h(d)):i(d);var y=v.length;var g=0;var m;while(y>g){m=v[g++];if(!n||p.call(d,m))l[m]=d[m]}}return l}:l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SQLParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(40);var h=r(18);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.where=undefined;(0,h.extend)(r,e);return r}return t}(c.BaseParameter);t.SQLParameter=d;h.Zondy.Service.SQLParameter=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeometryParameter=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(3);var u=y(s);var l=r(4);var f=y(l);var c=r(40);var h=r(18);var p=r(107);var d=r(111);var v=r(112);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.geometry=undefined;r.where=undefined;r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersect";(0,h.extend)(r,e);return r}return t}(c.BaseParameter);g.prototype.fromGeoJSON=function(e){if(e){var t=this;switch(e.geometry.type){case"Point":t.geometry=new p.VPoint({coordinates:e.geometry.coordinates});break;case"LineString":t.geometry=new d.VPolyline({coordinates:e.geometry.coordinates});break;case"Polygon":t.geometry=new v.VPolygon({coordinates:e.geometry.coordinates[0]});break}}};t.GeometryParameter=g;h.Zondy.Service.GeometryParameter=g},function(e,t){var r=e.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=a}}catch(e){i=a}})();function s(e){if(n===setTimeout){return setTimeout(e,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(i===clearTimeout){return clearTimeout(e)}if((i===a||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var l=[];var f=false;var c;var h=-1;function p(){if(!f||!c){return}f=false;if(c.length){l=c.concat(l)}else{h=-1}if(l.length){d()}}function d(){if(f){return}var e=s(p);f=true;var t=l.length;while(t){c=l;l=[];while(++h<t){if(c){c[h].run()}}h=-1;t=l.length}c=null;f=false;u(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}l.push(new v(e,t));if(l.length===1&&!f){s(d)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function y(){}r.on=y;r.addListener=y;r.once=y;r.off=y;r.removeListener=y;r.removeAllListeners=y;r.emit=y;r.prependListener=y;r.prependOnceListener=y;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RectangleParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(40);var h=r(18);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.where=undefined;r.rectangle=[];r.compareRectOnly=false;r.enableDisplayCondition=false;r.spatialRelationType="Intersects";(0,h.extend)(r,e);return r}return t}(c.BaseParameter);t.RectangleParameter=d;h.Zondy.Service.RectangleParameter=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjectIdsParameter=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(40);var h=r(18);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));r.objectIds=[];(0,h.extend)(r,e);return r}return t}(c.BaseParameter);t.ObjectIdsParameter=d;h.Zondy.Service.ObjectIdsParameter=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VFeature=undefined;var n=r(8);var i=v(n);var o=r(181);var a=v(o);var s=r(1);var u=v(s);var l=r(5);var f=v(l);var c=r(18);var h=r(107);var p=r(111);var d=r(112);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(){(0,f.default)(e,null,[{key:"fromQueryResult",value:function t(r){if(!r.hasOwnProperty("SFEleArray")||!r.hasOwnProperty("AttStruct")||r.hasOwnProperty("SFEleArray")&&!r.SFEleArray||r.hasOwnProperty("AttStruct")&&!r.AttStruct){return[]}var n=r.SFEleArray;var i=r.AttStruct;var o=[],a=void 0;for(var s=0;s<n.length;s++){var u={},l=[],f=void 0;for(var c=0;c<n[s].AttValue.length;c++){if(n[s].AttValue[c]!==""){u[i.FldName[c]]=n[s].AttValue[c]}}if(n[s].fGeom){switch(n[s].ftype){case 1:var v=n[s].fGeom.PntGeom;for(var y=0;y<v.length;y++){var g=new h.VPoint({coordinates:[v[y].Dot.x,v[y].Dot.y]});l.push(g);f="Point"}break;case 2:var m=n[s].fGeom.LinGeom;for(var _=0;_<m.length;_++){var b=new p.VPolyline({coordinates:m[_].Line.Arcs[0].Dots});l.push(b);f="LineString"}break;case 3:var S=n[s].fGeom.RegGeom;for(var x=0;x<S.length;x++){var C=new d.VPolygon;C.exterior=S[x].Rings[0].Arcs[0].Dots;for(var w=1;w<S[x].Rings.length;w++){C.interior.push(S[x].Rings[w].Arcs[0].Dots)}l.push(C);f="Polygon"}break}}var P=void 0;if(n[s].GraphicInfo){var I=n[s].GraphicInfo;switch(I.InfoType){case 1:P=I.PntInfo;break;case 2:P=I.LinInfo;break;case 3:P=I.RegInfo;break}}a=new e({attributes:u,FID:n[s].FID,geometry:l,geometryType:f,style:P});o.push(a)}return o}},{key:"fromGeoJSON",value:function t(r){var n=void 0,i=[];if(!r.hasOwnProperty("type")){throw new Error("geoJSON")}if(r.type==="Feature"){n=new e({geometry:e.geometry,attributes:r.properties});return n}else if(r.type==="FeatureCollection"){var o=r.features,a=void 0,s=void 0,u=void 0;for(var l=0;l<o.length;l++){a=[];u=o[l].geometry.coordinates;switch(o[l].geometry.type){case"Point":a.push(o[l].geometry);break;case"LineString":s=[];for(var f=0;f<u.length;f++){s.push({x:Number(u[f][0]),y:Number(u[f][1])})}o[l].geometry.coordinates=s;a.push(o[l].geometry);break;case"Polygon":var c=new d.VPolygon;for(var h=0;h<u[0].length;h++){c.exterior.push({x:Number(u[0][h][0]),y:Number(u[0][h][1])})}for(var p=1;p<u.length;p++){var v=[];for(var y=0;y<u[p].length;y++){v.push({x:Number(u[p][y][0]),y:Number(u[p][y][1])})}c.exterior.push(v)}a.push(c);break}n=new e({geometry:a,attributes:o[l].properties,geometryType:o[l].geometry.type});i.push(n)}return i}else{throw new Error("geoJSON")}}},{key:"toAntTableData",value:function t(r){var n=[];var i=e.fromQueryResult(r);for(var o=0;o<i.length;o++){n.push((0,a.default)(i[o].attributes,{key:i[o].FID?i[o].FID:o}))}return n}},{key:"resultToGeojson",value:function t(r){var n=e.fromQueryResult(r);var o=[];n=JSON.parse((0,i.default)(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));var a=void 0;for(var s=0;s<n.length;s++){a=e.polygonToGeojson(n[s]);o=o.concat(a)}var u={type:"feature",features:o};return u}},{key:"polygonToGeojson",value:function e(t){var r=void 0,n=[];var i=t.geometry;var o=t.properties;for(var a=0;a<i.length;a++){r={};if(i[a].type==="Polygon"){i[a].coordinates=i[a].coordinates.concat(i[a].exterior,i[a].interior)}r.geometry=i[a];r.properties=o;n.push(r)}return n}}]);function e(t){(0,u.default)(this,e);this.geometry=undefined;this.geometryType=undefined;this.attributes=undefined;this.style=undefined;this.FID=undefined;(0,c.extend)(this,t)}return e}();t.VFeature=y;c.Zondy.Service.VFeature=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FunctionWareService=t.ProjectBySRID=t.ProjectByLayer=t.ProjectBase=t.OverlayByPolygon=t.OverlayByLayer=t.OverlayBase=t.NetAnalysis=t.FeatureBuffBySingleRing=t.FeatureBuffByMultiplyRing=t.FeatureBuffBase=t.ContourAnalyse=t.ClipByPolygon=t.ClipByLayer=t.ClipByCircle=t.ClipBase=t.ClassBufferBySingleRing=t.ClassBufferByMultiplyRing=t.ClassBufferBase=t.AnalysisBase=undefined;var n=r(26);var i=r(113);var o=r(344);var a=r(345);var s=r(67);var u=r(346);var l=r(347);var f=r(348);var c=r(349);var h=r(114);var p=r(350);var d=r(351);var v=r(352);var y=r(115);var g=r(353);var m=r(354);var _=r(116);var b=r(355);var S=r(356);var x=r(357);t.AnalysisBase=n.AnalysisBase;t.ClassBufferBase=i.ClassBufferBase;t.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing;t.ClassBufferBySingleRing=a.ClassBufferBySingleRing;t.ClipBase=s.ClipBase;t.ClipByCircle=u.ClipByCircle;t.ClipByLayer=l.ClipByLayer;t.ClipByPolygon=f.ClipByPolygon;t.ContourAnalyse=c.ContourAnalyse;t.FeatureBuffBase=h.FeatureBuffBase;t.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing;t.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing;t.NetAnalysis=v.NetAnalysis;t.OverlayBase=y.OverlayBase;t.OverlayByLayer=g.OverlayByLayer;t.OverlayByPolygon=m.OverlayByPolygon;t.ProjectBase=_.ProjectBase;t.ProjectByLayer=b.ProjectByLayer;t.ProjectBySRID=S.ProjectBySRID;t.FunctionWareService=x.FunctionWareService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClassBufferByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(113);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.flowID="600232";n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"2,4,8,10";return n}return t}(h.ClassBufferBase);t.ClassBufferByMultiplyRing=d;c.Zondy.Service.ClassBufferByMultiplyRing=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClassBufferBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(113);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.isByAtt=r.isByAtt!==undefined?r.isByAtt:true;n.fldName=r.fldName!==undefined?r.fldName:null;n.dynPrjRad=r.dynPrjRad!==undefined?r.dynPrjRad:0;n.flowID="600231";return n}return t}(h.ClassBufferBase);t.ClassBufferBySingleRing=d;c.Zondy.Service.ClassBufferBySingleRing=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClipByCircle=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(67);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.center=r.center!==undefined?r.center:null;n.radius=r.radius!==undefined?r.radius:null;n.step=r.step!==undefined?r.step:.001;n.flowID="600229";return n}return t}(h.ClipBase);t.ClipByCircle=d;c.Zondy.Service.ClipByCircle=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClipByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(67);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo1=r.srcInfo1!==undefined?r.srcInfo1:null;n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600230";return n}return t}(h.ClipBase);t.ClipByLayer=d;c.Zondy.Service.ClipByLayer=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClipByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(67);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo=r.srcInfo!==undefined?r.srcInfo:null;n.strPos=r.strPos!==undefined?r.strPos:null;n.flowID="600228";return n}return t}(h.ClipBase);t.ClipByPolygon=d;c.Zondy.Service.ClipByPolygon=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ContourAnalyse=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(3);var u=g(s);var l=r(4);var f=g(l);var c=r(0);var h=r(6);var p=r(26);var d=r(9);var v=r(163);var y=r(159);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.flowID="600320";n.linSfclsURL=r.linSfclsURL!==undefined?r.linSfclsURL:null;n.regSfclsURL=r.regSfclsURL!==undefined?r.regSfclsURL:null;n.annoClsURL=r.annoClsURL!==undefined?r.annoClsURL:null;n.meshingParam=r.meshingParam!==undefined?r.meshingParam:null;n.contourParam=r.contourParam!==undefined?r.contourParam:null;return n}return t}(p.AnalysisBase);t.ContourAnalyse=m;c.Zondy.Service.ContourAnalyse=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureBuffByMultiplyRing=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(114);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.radiusStr=r.radiusStr!==undefined?r.radiusStr:"0.003,0.002,0.001";n.flowID="600239";return n}return t}(h.FeatureBuffBase);t.FeatureBuffByMultiplyRing=d;c.Zondy.Service.FeatureBuffByMultiplyRing=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureBuffBySingleRing=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(114);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.leftRad=r.leftRad!==undefined?r.leftRad:.001;n.rightRad=r.rightRad!==undefined?r.rightRad:.001;n.flowID="600238";return n}return t}(h.FeatureBuffBase);t.FeatureBuffBySingleRing=d;c.Zondy.Service.FeatureBuffBySingleRing=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NetAnalysis=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(26);var p=r(15);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.netClsUrl=r.netClsUrl!==undefined?r.netClsUrl:null;n.flagPosStr=r.flagPosStr!==undefined?r.flagPosStr:null;n.barrierPosStr=r.barrierPosStr!==undefined?r.barrierPosStr:null;n.analyType=r.analyType!==undefined?r.analyType:p.NetAnalyType.UserMode;n.weight=r.weight!==undefined?r.weight:",Weight1,Weight1";n.elementType=r.elementType!==undefined?r.elementType:p.NetElemType.Edge;n.nearDis=r.nearDis!==undefined?r.nearDis:.001;n.outFormat=r.outFormat!==undefined?r.outFormat:"json";n.flowID="600233";return n}return t}(h.AnalysisBase);t.NetAnalysis=v;c.Zondy.Service.NetAnalysis=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OverlayByLayer=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(115);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.srcInfo2=r.srcInfo2!==undefined?r.srcInfo2:null;n.flowID="600227";return n}return t}(h.OverlayBase);t.OverlayByLayer=d;c.Zondy.Service.OverlayByLayer=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OverlayByPolygon=undefined;var n=r(2);var i=p(n);var o=r(1);var a=p(o);var s=r(3);var u=p(s);var l=r(4);var f=p(l);var c=r(0);var h=r(115);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){(0,f.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.strGRegionXML=r.strGRegionXML!==undefined?r.strGRegionXML:null;n.inFormat=r.inFormat!==undefined?r.inFormat:"json";n.flowID="600237";return n}return t}(h.OverlayBase);t.OverlayByPolygon=d;c.Zondy.Service.OverlayByPolygon=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProjectByLayer=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(116);var p=r(6);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r||{};(0,p.extend)(n,e);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.flowID="600235";return o}return t}(h.ProjectBase);t.ProjectByLayer=v;c.Zondy.Service.ProjectByLayer=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProjectBySRID=undefined;var n=r(2);var i=d(n);var o=r(1);var a=d(o);var s=r(3);var u=d(s);var l=r(4);var f=d(l);var c=r(0);var h=r(116);var p=r(6);function d(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r||{};(0,p.extend)(n,e);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.flowID="600234";o.srID=n.srID!==undefined?n.srID:32;return o}return t}(h.ProjectBase);t.ProjectBySRID=v;c.Zondy.Service.ProjectBySRID=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FunctionWareService=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(26);var g=r(9);var m=r(6);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.guid=r.guid?r.guid:(0,m.newGuid)();n.f=r.f!==undefined?r.f:"json";return n}(0,f.default)(t,[{key:"executeWorkFlow",value:function e(t,r,n,o,a,s){if(!n){n=false}var u={};if(s!==null&&s.toUpperCase()==="POST"){u.paraValues=r;this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+n+"&guid="+this.guid}else{this.partUrl="execute/"+t+"?paraValues="+r+"&f="+this.f+"&isAsy="+n+"&guid="+this.guid}var l=this;var f=l.getFullUrl();var c=new g.IgsServiceBase(f,{eventListeners:{scope:l,processCompleted:o,processFailed:a}});if(s!==null&&s.toUpperCase()==="POST"){c.processAsync({method:"POST",data:(0,i.default)(u)})}else{c.processAsync()}}},{key:"getInstanceMessage",value:function e(t,r,n){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getInstanceOutPutValue",value:function e(t,r,n,i){this.partUrl="outputvalues/"+t+"?name="+r+"&f="+this.f+"&guid="+this.guid;var o=this;var a=o.getFullUrl();var s=new g.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});s.processAsync()}},{key:"getInstanceResult",value:function e(t,r,n){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getInstanceStatus",value:function e(t,r,n){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getWorkFlowGroups",value:function e(t,r){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfoByID",value:function e(t,r,n){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getWorkFlowInfos",value:function e(t,r){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getWorkFlowInfosByGroup",value:function e(t,r,n){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}},{key:"getFolder1",value:function e(t,r){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getFolder2",value:function e(t,r){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var n=this;var i=n.getFullUrl();var o=new g.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});o.processAsync()}},{key:"getFolder3",value:function e(t,r,n){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var i=this;var o=i.getFullUrl();var a=new g.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:r,processFailed:n}});a.processAsync()}}]);return t}(y.AnalysisBase);t.FunctionWareService=b;v.Zondy.Service.FunctionWareService=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CoordinateElpTrans=t.TopAnalysis=t.Smooth=t.ProjectRang=t.ProjectDots=t.GeometryAnalysisBase=t.CProjectParam=t.CProjectBySRSID=t.CalServiceBase=t.CalPolyLineLength=t.CalArea=undefined;var n=r(359);var i=r(360);var o=r(117);var a=r(119);var s=r(118);var u=r(37);var l=r(361);var f=r(362);var c=r(363);var h=r(364);var p=r(365);t.CalArea=n.CalArea;t.CalPolyLineLength=i.CalPolyLineLength;t.CalServiceBase=o.CalServiceBase;t.CProjectBySRSID=a.CProjectBySRSID;t.CProjectParam=s.CProjectParam;t.GeometryAnalysisBase=u.GeometryAnalysisBase;t.ProjectDots=l.ProjectDots;t.ProjectRang=f.ProjectRang;t.Smooth=c.Smooth;t.TopAnalysis=h.TopAnalysis;t.CoordinateElpTrans=p.CoordinateElpTrans},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalArea=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(3);var u=v(s);var l=r(4);var f=v(l);var c=r(0);var h=r(117);var p=r(6);var d=r(19);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};(0,p.extend)(n,{dots:e});var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.partUrl="geomservice/calArea?f=json";return o}return t}(h.CalServiceBase);t.CalArea=y;c.Zondy.Service.CalArea=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalPolyLineLength=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(3);var u=v(s);var l=r(4);var f=v(l);var c=r(0);var h=r(117);var p=r(6);var d=r(19);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,f.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=r?r:{};(0,p.extend)(n,{dots:e});var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,n));o.partUrl="geomservice/calLength?f=json";return o}return t}(h.CalServiceBase);t.CalPolyLineLength=y;c.Zondy.Service.CalPolyLineLength=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProjectDots=undefined;var n=r(8);var i=b(n);var o=r(2);var a=b(o);var s=r(1);var u=b(s);var l=r(5);var f=b(l);var c=r(3);var h=b(c);var p=r(4);var d=b(p);var v=r(0);var y=r(37);var g=r(19);var m=r(118);var _=r(9);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,d.default)(t,e);function t(e,r,n,i){(0,u.default)(this,t);var o=i?i:{};var s=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,o));s.InputDots=e;s.SrcProjParam=r;s.DesProjParm=n;return s}(0,f.default)(t,[{key:"execute",value:function e(t,r){this.partUrl="geomservice/projectdots?f=json";var n={};n["InputDots"]=this.InputDots;n["SrcProjParam"]=this.SrcProjParam;n["DesProjParm"]=this.DesProjParm;var o=this.getFullUrl();var a=this;var s=new _.IgsServiceBase(o,{eventListeners:{scope:a,processCompleted:t,processFailed:r}});s.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.GeometryAnalysisBase);t.ProjectDots=S;v.Zondy.Service.ProjectDots=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProjectRang=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(37);var v=r(9);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e?e:{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.gdbsvrName=r.gdbsvrName!==undefined?r.gdbsvrName:"MapGISLocal";n.gdbName=r.gdbName!==undefined?r.gdbName:null;n.srefID=r.srefID!==undefined?r.srefID:0;n.desfID=r.desfID!==undefined?r.desfID:0;n.userName=r.userName!==undefined?r.userName:null;n.password=r.password!==undefined?r.password:null;return n}(0,u.default)(t,[{key:"execute",value:function e(t,r,n){var i="";if(t){i=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax}if(this.userName===null||this.password===null){this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i}else{this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i+"&userName="+this.userName+"&password="+this.password}var o=this.getFullUrl();var a=this;var s=new v.IgsServiceBase(o,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});s.processAsync()}}]);return t}(d.GeometryAnalysisBase);t.ProjectRang=g;p.Zondy.Service.ProjectRang=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Smooth=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(37);var g=r(19);var m=r(9);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e?e:{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.type=r.type!==undefined?r.type:0;n.step=r.step!==undefined?r.step:1;return n}(0,f.default)(t,[{key:"setType",value:function e(t){this.type=t}},{key:"setStep",value:function e(t){this.step=t}},{key:"execute",value:function e(t,r,n){if(this.type==2){if(t.length<4){alert("Beizer");return}}else{if(t.length<3){alert("");return}}this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var o=this.getFullUrl();var a=this;var s=new m.IgsServiceBase(o,{eventListeners:{scope:a,processCompleted:r,processFailed:n}});s.processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.GeometryAnalysisBase);t.Smooth=b;v.Zondy.Service.Smooth=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TopAnalysis=undefined;var n=r(8);var i=x(n);var o=r(2);var a=x(o);var s=r(1);var u=x(s);var l=r(5);var f=x(l);var c=r(3);var h=x(c);var p=r(4);var d=x(p);var v=r(0);var y=r(37);var g=r(9);var m=r(99);var _=r(100);var b=r(101);var S=r(6);function x(e){return e&&e.__esModule?e:{default:e}}var C=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e?e:{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.pnt=r.pnt!==undefined?r.pnt:null;n.line=r.line!==undefined?r.line:null;n.reg=r.reg!==undefined?r.reg:null;n.nearDis=r.nearDis!==undefined?r.nearDis:.01;n.relativeObj=r.relativeObj!==undefined?r.relativeObj:null;n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,f.default)(t,[{key:"setPnt",value:function e(t){this.pnt=t}},{key:"setLine",value:function e(t){this.line=t}},{key:"setReg",value:function e(t){this.reg=t}},{key:"setRelativeObj",value:function e(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function e(t){var r=(0,S.getTopAnalysisResult)(t);this.p_onSuccess(r)}},{key:"execute",value:function e(t,r){var n=this;n.p_onSuccess=t;var o={};o.NearDis=this.nearDis;o.Pnt=this.pnt;o.Line=this.line;o.Reg=this.reg;o.RelativeObj=this.relativeObj;n.partUrl="geomservice/topanalysis?f=json";var a=n.getFullUrl();var n=this;var s=new g.IgsServiceBase(a,{eventListeners:{scope:n,processCompleted:n.onGetRltSuccess,processFailed:r}});s.processAsync({method:"POST",data:(0,i.default)(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.GeometryAnalysisBase);t.TopAnalysis=C;v.Zondy.Service.TopAnalysis=C},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CoordinateElpTrans=undefined;var n=r(8);var i=m(n);var o=r(2);var a=m(o);var s=r(1);var u=m(s);var l=r(5);var f=m(l);var c=r(3);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(37);var g=r(9);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e?e:{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.points=r.points!==undefined?r.points:"";n.dx=r.dx!==undefined?r.dx:"";n.dy=r.dy!==undefined?r.dy:"";n.dz=r.dz!==undefined?r.dz:"";n.m=r.m!==undefined?r.m:"";n.wx=r.wx!==undefined?r.wx:"";n.wy=r.wy!==undefined?r.wy:"";n.wz=r.wz!==undefined?r.wz:"";n.srcsrsname=r.srcsrsname!==undefined?r.srcsrsname:"";n.dessrsname=r.dessrsname!==undefined?r.dessrsname:"";return n}(0,f.default)(t,[{key:"coordinateTrans",value:function e(t,r,n){var o={};if(n!==null&&n.toUpperCase()==="POST"){o.paraValues="";this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname}else{o=this;this.partUrl="geomservice/transcoordinate"}var a=this.getFullUrl();var s=this;var u=new g.IgsServiceBase(a,{eventListeners:{scope:s,processCompleted:t,processFailed:r}});if(n!==null&&n.toUpperCase()==="POST"){u.processAsync({method:"POST",data:(0,i.default)(o)})}else{u.processAsync()}}}]);return t}(y.GeometryAnalysisBase);t.CoordinateElpTrans=_;v.Zondy.Service.CoordinateTransform=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapServiceBase=t.GetTileImageService=t.GetMapInfoService=t.GetMapImageService=t.GetLayerImageService=t.GetDocImageService=undefined;var n=r(367);var i=r(368);var o=r(369);var a=r(370);var s=r(371);var u=r(41);t.GetDocImageService=n.GetDocImageService;t.GetLayerImageService=i.GetLayerImageService;t.GetMapImageService=o.GetMapImageService;t.GetMapInfoService=a.GetMapInfoService;t.GetTileImageService=s.GetTileImageService;t.MapServiceBase=u.MapServiceBase},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GetDocImageService=undefined;var n=r(8);var i=_(n);var o=r(2);var a=_(o);var s=r(1);var u=_(s);var l=r(5);var f=_(l);var c=r(3);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(41);var g=r(119);var m=r(6);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.docName=r.docName!==undefined?r.docName:null;n.cache=r.cache!==undefined?r.cache:false;if(n.cache){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;n.update=r.update!==undefined?r.update:false}else{n.layers=r.layers!==undefined?r.layers:null;n.style=r.style!==undefined?r.style:null;n.picType=r.picType!==undefined?r.picType:"gif";n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.proj=r.proj!==undefined?r.proj:null;n.guid=r.guid!==undefined?r.guid:(0,m.newGuid)()}return n}(0,f.default)(t,[{key:"GetMapImage",value:function e(){if(this.docName){if(this.cache===true){this.partUrl="docs/"+this.docName+"?"+"cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString()}else{this.partUrl="docs/"+this.docName+"?";if(this.bbox!==null){this.partUrl+="bbox="+this.bbox}if(this.picWidth!==null){this.partUrl+="&w="+this.picWidth}if(this.picHeight!==null){this.partUrl+="&h="+this.picHeight}if(this.layers!==null){this.partUrl+="&layers="+this.layers}if(this.filters!==null){this.partUrl+="&filters="+encodeURI(this.filters)}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.proj!==null){this.partUrl+="&proj="+(0,i.default)(this.proj)}if(this.picType!==null){this.partUrl+="&f="+this.picType}if(this.guid!==null){this.partUrl+="&guid="+this.guid}}var t=this.getFullUrl();return t}return null}}]);return t}(y.MapServiceBase);t.GetDocImageService=b;v.Zondy.Service.GetDocImageService=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GetLayerImageService=undefined;var n=r(8);var i=m(n);var o=r(2);var a=m(o);var s=r(1);var u=m(s);var l=r(5);var f=m(l);var c=r(3);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(41);var g=r(152);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,u.default)(this,t);var r=e||{};var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));n.gdbps=r.gdbps!==undefined?r.gdbps:null;n.picType=r.picType!==undefined?r.picType:"gif";n.style=r.style!==undefined?r.style:null;n.bbox=r.bbox!==undefined?r.bbox:null;n.filters=r.filters!==undefined?r.filters:null;n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;return n}(0,f.default)(t,[{key:"GetLayerImage",value:function e(){if(this.gdbps!==null&&this.picWidth!==null&&this.picHeight!==null){this.partUrl="layers?"+"f="+this.picType;this.partUrl+="&gdbps=";this.gdbps.split(",");var t=this.gdbps.split(",");for(var r=0;r<t.length;r++){this.partUrl+=t[r];if(r<t.length-1){this.partUrl+=","}}if(this.style!==null){this.partUrl+="&style="+(0,i.default)(this.style)}if(this.filters!==null){this.partUrl+="&filters="+this.filters}if(this.bbox!==null){this.partUrl+="&bbox="+this.bbox}this.partUrl+="&w="+this.picWidth;this.partUrl+="&h="+this.picHeight;var n=this.getFullUrl();return n}return null}}]);return t}(y.MapServiceBase);t.GetLayerImageService=_;v.Zondy.Service.GetLayerImageService=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GetMapImageService=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(41);var v=r(15);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.mapType=r.mapType!==undefined?r.mapType:v.MapType.Doc;if(n.mapType===v.MapType.Tile){n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0}else{n.picType=r.picType!==undefined?r.picType:"gif";n.picWidth=r.picWidth!==undefined?r.picWidth:512;n.picHeight=r.picHeight!==undefined?r.picHeight:512;n.xmin=r.xmin!==undefined?r.xmin:null;n.xmax=r.xmax!==undefined?r.xmax:null;n.ymin=r.ymin!==undefined?r.ymin:null;n.ymax=r.ymax!==undefined?r.ymax:null}return n}(0,u.default)(t,[{key:"GetImage",value:function e(){if(this.mapName){if(this.mapType===v.MapType.Tile){this.partUrl="tile/"+this.mapName+"?"+"lvl="+this.level+"&row="+this.row+"&col="+this.col}else{this.partUrl="map/"+this.mapName+"?"+"width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType;if(this.xmin!==null&&this.xmax!==null&&this.ymin!==null&&this.ymax!==null){this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax}}var t=this.getFullUrl();return t}return null}}]);return t}(d.MapServiceBase);t.GetMapImageService=g;p.Zondy.Service.GetMapImageService=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GetMapInfoService=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(4);var h=g(c);var p=r(0);var d=r(41);var v=r(9);var y=r(6);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.mapName=r.mapName!==undefined?r.mapName:null;n.guid=r.guid!==undefined?r.guid:(0,y.newGuid)();n.token=r.token;n.type=r.type;return n}(0,u.default)(t,[{key:"GetMapInfo",value:function e(t,r){var n=this;if(n.mapName){n.partUrl="info/"+this.mapName;var i=[];if(n.guid){i.push("guid="+n.guid)}if(this.token){i.push("token="+n.token)}if(this.type){i.push("type="+n.type)}if(i.length>0){n.partUrl+="?"+i.join("&")}var o=n.getFullUrl();var a=new v.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:t,processFailed:r}});a.processAsync()}}}]);return t}(d.MapServiceBase);t.GetMapInfoService=m;p.Zondy.Service.GetMapInfoService=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GetTileImageService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(41);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=e||{};var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,r));n.hdfName=r.hdfName!==undefined?r.hdfName:null;n.level=r.level!==undefined?r.level:0;n.row=r.row!==undefined?r.row:0;n.col=r.col!==undefined?r.col:0;return n}(0,u.default)(t,[{key:"GetTileImage",value:function e(){if(this.hdfName!==undefined){this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col;var t=this.getFullUrl();return t}return null}}]);return t}(d.MapServiceBase);t.GetTileImageService=y;p.Zondy.Service.GetTileImageService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemesInfo=t.ThemeOper=t.ItemValue=t.FolderInfoAttribute=t.FolderInfo=t.ExpInfo=t.CUniqueThemeInfo=t.CUniqueTheme=t.CThemeInfo=t.CTheme=t.CSimpleTheme=t.CRegInfo=t.CRangeThemeInfo=t.CRangeTheme=t.CRandomTheme=t.CPntInfo=t.CMultiClassTheme=t.CLinInfo=t.CGraduatedSymbolTheme=t.CFourColorTheme=t.CDotDensityTheme=t.CChartType=t.CChartThemeRepresentInfo=t.CChartThemeInfo=t.CChartTheme=t.CChartLabelFormat=t.CAnnInfo=t.CAllOtherDataItemInfoSource=undefined;var n=r(182);var i=r(183);var o=r(184);var a=r(185);var s=r(187);var u=r(190);var l=r(186);var f=r(191);var c=r(192);var h=r(193);var p=r(188);var d=r(194);var v=r(68);var y=r(196);var g=r(197);var m=r(198);var _=r(189);var b=r(199);var S=r(23);var x=r(31);var C=r(200);var w=r(201);var P=r(195);var I=r(202);var E=r(120);var L=r(373);var T=r(374);var M=r(203);t.CAllOtherDataItemInfoSource=n.CAllOtherDataItemInfoSource;t.CAnnInfo=i.CAnnInfo;t.CChartLabelFormat=o.CChartLabelFormat;t.CChartTheme=a.CChartTheme;t.CChartThemeInfo=s.CChartThemeInfo;t.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo;t.CChartType=l.CChartType;t.CDotDensityTheme=f.CDotDensityTheme;t.CFourColorTheme=c.CFourColorTheme;t.CGraduatedSymbolTheme=h.CGraduatedSymbolTheme;t.CLinInfo=p.CLinInfo;t.CMultiClassTheme=d.CMultiClassTheme;t.CPntInfo=v.CPntInfo;t.CRandomTheme=y.CRandomTheme;t.CRangeTheme=g.CRangeTheme;t.CRangeThemeInfo=m.CRangeThemeInfo;t.CRegInfo=_.CRegInfo;t.CSimpleTheme=b.CSimpleTheme;t.CTheme=S.CTheme;t.CThemeInfo=x.CThemeInfo;t.CUniqueTheme=C.CUniqueTheme;t.CUniqueThemeInfo=w.CUniqueThemeInfo;t.ExpInfo=P.ExpInfo;t.FolderInfo=I.FolderInfo;t.FolderInfoAttribute=E.FolderInfoAttribute;t.ItemValue=L.ItemValue;t.ThemeOper=T.ThemeOper;t.ThemesInfo=M.ThemesInfo},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ItemValue=undefined;var n=r(0);var i=r(6);var o=r(15);var a=function e(t,r,n,a){var s=a!==undefined?a:{};(0,i.extend)(this,s);this.StartValue=t!==undefined?t:"";this.EndValue=r!==undefined?r:"";this.ClassItemType=n!==undefined?n:o.CItemType.RangeTheme};t.ItemValue=a;n.Zondy.Object.Theme.ItemValue=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemeOper=undefined;var n=r(8);var i=O(n);var o=r(2);var a=O(o);var s=r(1);var u=O(s);var l=r(5);var f=O(l);var c=r(3);var h=O(c);var p=r(4);var d=O(p);var v=r(0);var y=r(22);var g=r(6);var m=r(9);var _=r(194);var b=r(199);var S=r(185);var x=r(193);var C=r(191);var w=r(196);var P=r(192);var I=r(200);var E=r(197);var L=r(120);var T=r(202);var M=r(203);function O(e){return e&&e.__esModule?e:{default:e}}var A=function(e){(0,d.default)(t,e);function t(e,r){(0,u.default)(this,t);var r=r||{};r.baseUrl="igs/rest/theme";var n=(0,h.default)(this,(t.__proto__||(0,a.default)(t)).call(this,r));if(e!==null){n.guid=e}else{n.guid=(0,g.newGuid)()}n.p_onSuccess=r.p_onSuccess!==undefined?r.p_onSuccess:null;return n}(0,f.default)(t,[{key:"onGetThemesInfoSuccess",value:function e(t){var r=new T.FolderInfo;(0,g.extendDeep)(r,t.result||t);if(r!==null&&r.attribute!==null&&r.attribute.length>0){var n=[];var i=null;for(var o=0;o<r.attribute.length;o++){n[o]=new M.ThemesInfo;if(r.attribute[o]!==null){n[o].LayerName=r.attribute[o].name;i=JSON.parse(r.attribute[o].value);if(i!==null&&i.length>0){n[o].ThemeArr=[];for(var a=0;a<i.length;a++){switch(i[a].name){case"CMultiClassTheme":n[o].ThemeArr[a]=new _.CMultiClassTheme;break;case"CSimpleTheme":n[o].ThemeArr[a]=new b.CSimpleTheme;break;case"CChartTheme":n[o].ThemeArr[a]=new S.CChartTheme;break;case"CGraduatedSymbolTheme":n[o].ThemeArr[a]=new x.CGraduatedSymbolTheme;break;case"CDotDensityTheme":n[o].ThemeArr[a]=new C.CDotDensityTheme;break;case"CRandomTheme":n[o].ThemeArr[a]=new w.CRandomTheme;break;case"CFourColorTheme":n[o].ThemeArr[a]=new P.CFourColorTheme;break;case"CUniqueTheme":n[o].ThemeArr[a]=new I.CUniqueTheme;break;case"CRangeTheme":n[o].ThemeArr[a]=new E.CRangeTheme;break}(0,g.extendDeep)(n[o].ThemeArr[a],JSON.parse(i[a].value))}}}}if(this.p_onSuccess!==null&&typeof this.p_onSuccess==="function"){this.p_onSuccess(n)}}}},{key:"getThemesInfo",value:function e(t,r,n,i){var o=this;o.p_onSuccess=n;var a=Math.random();o.partUrl=t+"/get?idxArr="+r+"&r="+a+"&guid="+o.guid;var s=o.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:o.onGetThemesInfoSuccess,processFailed:i}});u.processAsync()}},{key:"removeThemesInfo",value:function e(t,r,n,i){var o=this;var a=Math.random();o.partUrl=t+"/remove?idxArr="+r+"&r="+a+"&guid="+o.guid;var s=o.getFullUrl();var u=new m.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:n,processFailed:i}});u.processAsync()}},{key:"updateThemesInfo",value:function e(t,r,n,o,a){var s=this;var u=Math.random();s.partUrl=t+"/update?idxArr="+r+"&guid="+this.guid;var l=s.getFullUrl();var f=new T.FolderInfo;if(n!==null&&n.length>0){f.name="ThemeInfo";f.attribute=[];for(var c=0;c<n.length;c++){f.attribute[c]=new L.FolderInfoAttribute;f.attribute[c].name=n[c].LayerName;if(n[c].ThemeArr!==null&&n[c].ThemeArr.length>0){var h=[];for(var p=0;p<n[c].ThemeArr.length;p++){if(n[c].ThemeArr[p]!==null)h[p]=new L.FolderInfoAttribute(n[c].ThemeArr[p].Type,(0,i.default)(n[c].ThemeArr[p]))}f.attribute[c].value=(0,i.default)(h)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:s,processCompleted:o,processFailed:a}});d.processAsync({method:"POST",data:(0,i.default)(f),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function e(t,r,n,o,a){var s=this;var u=Math.random();s.partUrl=t+"/add?idxArr="+r+"&guid="+this.guid;var l=s.getFullUrl();var f=new T.FolderInfo;if(n!==null&&n.length>0){f.name="ThemeInfo";f.attribute=[];for(var c=0;c<n.length;c++){f.attribute[c]=new L.FolderInfoAttribute;f.attribute[c].name=n[c].LayerName;if(n[c].ThemeArr!==null&&n[c].ThemeArr.length>0){var h=[];for(var p=0;p<n[c].ThemeArr.length;p++){if(n[c].ThemeArr[p]!==null)h[p]=new L.FolderInfoAttribute(n[c].ThemeArr[p].Type,(0,i.default)(n[c].ThemeArr[p]))}f.attribute[c].value=(0,i.default)(h)}}}var d=new m.IgsServiceBase(l,{eventListeners:{scope:s,processCompleted:o,processFailed:a}});d.processAsync({method:"POST",data:(0,i.default)(f),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]);return t}(y.ServiceBase);t.ThemeOper=A;v.Zondy.Service.ThemeOper=A},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalculateModelService=t.GeoDatasetService=t.UserService=undefined;var n=r(376);var i=r(389);var o=r(392);t.UserService=n.UserService;t.GeoDatasetService=i.GeoDatasetService;t.CalculateModelService=o.CalculateModelService;var a={UserService:n.UserService,GeoDatasetService:i.GeoDatasetService,CalculateModelService:o.CalculateModelService};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UserService=undefined;var n=r(377);t.UserService=n.UserService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UserService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(121);function v(e){return e&&e.__esModule?e:{default:e}}var y="login";var g=t.UserService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/clouddisk/rest/users/";return r}(0,u.default)(t,[{key:"login",value:function e(t,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var a=""+o+i+y;this.post(a,t,r,n)}}]);return t}(d.CloudDiskService);t.default=g;p.Zondy.CloudDisk.UserService=g},function(e,t,r){"use strict";var n=r(379);var i=r(204);var o=r(125);var a=Object.prototype.hasOwnProperty;var s={brackets:function e(t){return t+"[]"},comma:"comma",indices:function e(t,r){return t+"["+r+"]"},repeat:function e(t){return t}};var u=Array.isArray;var l=Array.prototype.push;var f=function(e,t){l.apply(e,u(t)?t:[t])};var c=Date.prototype.toISOString;var h=o["default"];var p={addQueryPrefix:false,allowDots:false,charset:"utf-8",charsetSentinel:false,delimiter:"&",encode:true,encoder:i.encode,encodeValuesOnly:false,format:h,formatter:o.formatters[h],indices:false,serializeDate:function e(t){return c.call(t)},skipNulls:false,strictNullHandling:false};var d=function e(t){return typeof t==="string"||typeof t==="number"||typeof t==="boolean"||typeof t==="symbol"||typeof t==="bigint"};var v=function e(t,r,o,a,s,l,c,h,v,y,g,m,_,b,S){var x=t;if(S.has(t)){throw new RangeError("Cyclic object value")}if(typeof c==="function"){x=c(r,x)}else if(x instanceof Date){x=y(x)}else if(o==="comma"&&u(x)){x=i.maybeMap(x,function(e){if(e instanceof Date){return y(e)}return e})}if(x===null){if(a){return l&&!_?l(r,p.encoder,b,"key",g):r}x=""}if(d(x)||i.isBuffer(x)){if(l){var C=_?r:l(r,p.encoder,b,"key",g);return[m(C)+"="+m(l(x,p.encoder,b,"value",g))]}return[m(r)+"="+m(String(x))]}var w=[];if(typeof x==="undefined"){return w}var P;if(o==="comma"&&u(x)){P=[{value:x.length>0?x.join(",")||null:undefined}]}else if(u(c)){P=c}else{var I=Object.keys(x);P=h?I.sort(h):I}for(var E=0;E<P.length;++E){var L=P[E];var T=typeof L==="object"&&L.value!==undefined?L.value:x[L];if(s&&T===null){continue}var M=u(x)?typeof o==="function"?o(r,L):r:r+(v?"."+L:"["+L+"]");S.set(t,true);var O=n();f(w,e(T,M,o,a,s,l,c,h,v,y,g,m,_,b,O))}return w};var y=function e(t){if(!t){return p}if(t.encoder!==null&&t.encoder!==undefined&&typeof t.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var r=t.charset||p.charset;if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var n=o["default"];if(typeof t.format!=="undefined"){if(!a.call(o.formatters,t.format)){throw new TypeError("Unknown format option provided.")}n=t.format}var i=o.formatters[n];var s=p.filter;if(typeof t.filter==="function"||u(t.filter)){s=t.filter}return{addQueryPrefix:typeof t.addQueryPrefix==="boolean"?t.addQueryPrefix:p.addQueryPrefix,allowDots:typeof t.allowDots==="undefined"?p.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:p.charsetSentinel,delimiter:typeof t.delimiter==="undefined"?p.delimiter:t.delimiter,encode:typeof t.encode==="boolean"?t.encode:p.encode,encoder:typeof t.encoder==="function"?t.encoder:p.encoder,encodeValuesOnly:typeof t.encodeValuesOnly==="boolean"?t.encodeValuesOnly:p.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof t.serializeDate==="function"?t.serializeDate:p.serializeDate,skipNulls:typeof t.skipNulls==="boolean"?t.skipNulls:p.skipNulls,sort:typeof t.sort==="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:p.strictNullHandling}};e.exports=function(e,t){var r=e;var i=y(t);var o;var a;if(typeof i.filter==="function"){a=i.filter;r=a("",r)}else if(u(i.filter)){a=i.filter;o=a}var l=[];if(typeof r!=="object"||r===null){return""}var c;if(t&&t.arrayFormat in s){c=t.arrayFormat}else if(t&&"indices"in t){c=t.indices?"indices":"repeat"}else{c="indices"}var h=s[c];if(!o){o=Object.keys(r)}if(i.sort){o.sort(i.sort)}var p=n();for(var d=0;d<o.length;++d){var g=o[d];if(i.skipNulls&&r[g]===null){continue}f(l,v(r[g],g,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,p))}var m=l.join(i.delimiter);var _=i.addQueryPrefix===true?"?":"";if(i.charsetSentinel){if(i.charset==="iso-8859-1"){_+="utf8=%26%2310003%3B&"}else{_+="utf8=%E2%9C%93&"}}return m.length>0?_+m:""}},function(e,t,r){"use strict";var n=r(123);var i=r(384);var o=r(386);var a=n("%TypeError%");var s=n("%WeakMap%",true);var u=n("%Map%",true);var l=i("WeakMap.prototype.get",true);var f=i("WeakMap.prototype.set",true);var c=i("WeakMap.prototype.has",true);var h=i("Map.prototype.get",true);var p=i("Map.prototype.set",true);var d=i("Map.prototype.has",true);var v=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n){if(n.key===t){r.next=n.next;n.next=e.next;e.next=n;return n}}};var y=function(e,t){var r=v(e,t);return r&&r.value};var g=function(e,t,r){var n=v(e,t);if(n){n.value=r}else{e.next={key:t,next:e.next,value:r}}};var m=function(e,t){return!!v(e,t)};e.exports=function e(){var t;var r;var n;var i={assert:function(e){if(!i.has(e)){throw new a("Side channel does not contain "+o(e))}},get:function(e){if(s&&e&&(typeof e==="object"||typeof e==="function")){if(t){return l(t,e)}}else if(u){if(r){return h(r,e)}}else{if(n){return y(n,e)}}},has:function(e){if(s&&e&&(typeof e==="object"||typeof e==="function")){if(t){return c(t,e)}}else if(u){if(r){return d(r,e)}}else{if(n){return m(n,e)}}return false},set:function(e,i){if(s&&e&&(typeof e==="object"||typeof e==="function")){if(!t){t=new s}f(t,e,i)}else if(u){if(!r){r=new u}p(r,e,i)}else{if(!n){n={key:{},next:null}}g(n,e,i)}}};return i}},function(e,t,r){"use strict";var n=typeof Symbol!=="undefined"&&Symbol;var i=r(381);e.exports=function e(){if(typeof n!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof n("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return i()}},function(e,t,r){"use strict";e.exports=function e(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var t={};var r=Symbol("test");var n=Object(r);if(typeof r==="string"){return false}if(Object.prototype.toString.call(r)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(n)!=="[object Symbol]"){return false}var i=42;t[r]=i;for(r in t){return false}if(typeof Object.keys==="function"&&Object.keys(t).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(t).length!==0){return false}var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r){return false}if(!Object.prototype.propertyIsEnumerable.call(t,r)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==true){return false}}return true}},function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var o=Object.prototype.toString;var a="[object Function]";e.exports=function e(t){var r=this;if(typeof r!=="function"||o.call(r)!==a){throw new TypeError(n+r)}var s=i.call(arguments,1);var u;var l=function(){if(this instanceof u){var e=r.apply(this,s.concat(i.call(arguments)));if(Object(e)===e){return e}return this}else{return r.apply(t,s.concat(i.call(arguments)))}};var f=Math.max(0,r.length-s.length);var c=[];for(var h=0;h<f;h++){c.push("$"+h)}u=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l);if(r.prototype){var p=function e(){};p.prototype=r.prototype;u.prototype=new p;p.prototype=null}return u}},function(e,t,r){"use strict";var n=r(124);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,r){"use strict";var n=r(123);var i=r(385);var o=i(n("String.prototype.indexOf"));e.exports=function e(t,r){var a=n(t,!!r);if(typeof a==="function"&&o(t,".prototype.")>-1){return i(a)}return a}},function(e,t,r){"use strict";var n=r(124);var i=r(123);var o=i("%Function.prototype.apply%");var a=i("%Function.prototype.call%");var s=i("%Reflect.apply%",true)||n.call(a,o);var u=i("%Object.getOwnPropertyDescriptor%",true);var l=i("%Object.defineProperty%",true);var f=i("%Math.max%");if(l){try{l({},"a",{value:1})}catch(e){l=null}}e.exports=function e(t){var r=s(n,a,arguments);if(u&&l){var i=u(r,"length");if(i.configurable){l(r,"length",{value:1+f(0,t.length-(arguments.length-1))})}}return r};var c=function e(){return s(n,o,arguments)};if(l){l(e.exports,"apply",{value:c})}else{e.exports.apply=c}},function(e,t,r){var n=typeof Map==="function"&&Map.prototype;var i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;var o=n&&i&&typeof i.get==="function"?i.get:null;var a=n&&Map.prototype.forEach;var s=typeof Set==="function"&&Set.prototype;var u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;var l=s&&u&&typeof u.get==="function"?u.get:null;var f=s&&Set.prototype.forEach;var c=typeof WeakMap==="function"&&WeakMap.prototype;var h=c?WeakMap.prototype.has:null;var p=typeof WeakSet==="function"&&WeakSet.prototype;var d=p?WeakSet.prototype.has:null;var v=typeof WeakRef==="function"&&WeakRef.prototype;var y=v?WeakRef.prototype.deref:null;var g=Boolean.prototype.valueOf;var m=Object.prototype.toString;var _=Function.prototype.toString;var b=String.prototype.match;var S=typeof BigInt==="function"?BigInt.prototype.valueOf:null;var x=Object.getOwnPropertySymbols;var C=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?Symbol.prototype.toString:null;var w=typeof Symbol==="function"&&typeof Symbol.iterator==="object";var P=Object.prototype.propertyIsEnumerable;var I=(typeof Reflect==="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);var E=r(387).custom;var L=E&&j(E)?E:null;var T=typeof Symbol==="function"&&typeof Symbol.toStringTag!=="undefined"?Symbol.toStringTag:null;e.exports=function e(t,r,n,i){var s=r||{};if(V(s,"quoteStyle")&&(s.quoteStyle!=="single"&&s.quoteStyle!=="double")){throw new TypeError('option "quoteStyle" must be "single" or "double"')}if(V(s,"maxStringLength")&&(typeof s.maxStringLength==="number"?s.maxStringLength<0&&s.maxStringLength!==Infinity:s.maxStringLength!==null)){throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`')}var u=V(s,"customInspect")?s.customInspect:true;if(typeof u!=="boolean"&&u!=="symbol"){throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`")}if(V(s,"indent")&&s.indent!==null&&s.indent!=="\t"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0)){throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`')}if(typeof t==="undefined"){return"undefined"}if(t===null){return"null"}if(typeof t==="boolean"){return t?"true":"false"}if(typeof t==="string"){return K(t,s)}if(typeof t==="number"){if(t===0){return Infinity/t>0?"0":"-0"}return String(t)}if(typeof t==="bigint"){return String(t)+"n"}var c=typeof s.depth==="undefined"?5:s.depth;if(typeof n==="undefined"){n=0}if(n>=c&&c>0&&typeof t==="object"){return A(t)?"[Array]":"[Object]"}var h=ie(s,n);if(typeof i==="undefined"){i=[]}else if(H(i,t)>=0){return"[Circular]"}function p(t,r,o){if(r){i=i.slice();i.push(r)}if(o){var a={depth:s.depth};if(V(s,"quoteStyle")){a.quoteStyle=s.quoteStyle}return e(t,a,n+1,i)}return e(t,s,n+1,i)}if(typeof t==="function"){var d=z(t);var v=ae(t,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(v.length>0?" { "+v.join(", ")+" }":"")}if(j(t)){var y=w?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(t);return typeof t==="object"&&!w?ee(y):y}if(J(t)){var m="<"+String(t.nodeName).toLowerCase();var _=t.attributes||[];for(var b=0;b<_.length;b++){m+=" "+_[b].name+"="+M(O(_[b].value),"double",s)}m+=">";if(t.childNodes&&t.childNodes.length){m+="..."}m+="</"+String(t.nodeName).toLowerCase()+">";return m}if(A(t)){if(t.length===0){return"[]"}var x=ae(t,p);if(h&&!ne(x)){return"["+oe(x,h)+"]"}return"[ "+x.join(", ")+" ]"}if(k(t)){var P=ae(t,p);if(P.length===0){return"["+String(t)+"]"}return"{ ["+String(t)+"] "+P.join(", ")+" }"}if(typeof t==="object"&&u){if(L&&typeof t[L]==="function"){return t[L]()}else if(u!=="symbol"&&typeof t.inspect==="function"){return t.inspect()}}if(W(t)){var E=[];a.call(t,function(e,r){E.push(p(r,t,true)+" => "+p(e,t))});return re("Map",o.call(t),E,h)}if(Y(t)){var G=[];f.call(t,function(e){G.push(p(e,t))});return re("Set",l.call(t),G,h)}if(Z(t)){return te("WeakMap")}if(Q(t)){return te("WeakSet")}if(X(t)){return te("WeakRef")}if(F(t)){return ee(p(Number(t)))}if(U(t)){return ee(p(S.call(t)))}if(B(t)){return ee(g.call(t))}if(D(t)){return ee(p(String(t)))}if(!N(t)&&!R(t)){var $=ae(t,p);var se=I?I(t)===Object.prototype:t instanceof Object||t.constructor===Object;var ue=t instanceof Object?"":"null prototype";var le=!se&&T&&Object(t)===t&&T in t?q(t).slice(8,-1):ue?"Object":"";var fe=se||typeof t.constructor!=="function"?"":t.constructor.name?t.constructor.name+" ":"";var ce=fe+(le||ue?"["+[].concat(le||[],ue||[]).join(": ")+"] ":"");if($.length===0){return ce+"{}"}if(h){return ce+"{"+oe($,h)+"}"}return ce+"{ "+$.join(", ")+" }"}return String(t)};function M(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function O(e){return String(e).replace(/"/g,"&quot;")}function A(e){return q(e)==="[object Array]"&&(!T||!(typeof e==="object"&&T in e))}function N(e){return q(e)==="[object Date]"&&(!T||!(typeof e==="object"&&T in e))}function R(e){return q(e)==="[object RegExp]"&&(!T||!(typeof e==="object"&&T in e))}function k(e){return q(e)==="[object Error]"&&(!T||!(typeof e==="object"&&T in e))}function D(e){return q(e)==="[object String]"&&(!T||!(typeof e==="object"&&T in e))}function F(e){return q(e)==="[object Number]"&&(!T||!(typeof e==="object"&&T in e))}function B(e){return q(e)==="[object Boolean]"&&(!T||!(typeof e==="object"&&T in e))}function j(e){if(w){return e&&typeof e==="object"&&e instanceof Symbol}if(typeof e==="symbol"){return true}if(!e||typeof e!=="object"||!C){return false}try{C.call(e);return true}catch(e){}return false}function U(e){if(!e||typeof e!=="object"||!S){return false}try{S.call(e);return true}catch(e){}return false}var G=Object.prototype.hasOwnProperty||function(e){return e in this};function V(e,t){return G.call(e,t)}function q(e){return m.call(e)}function z(e){if(e.name){return e.name}var t=b.call(_.call(e),/^function\s*([\w$]+)/);if(t){return t[1]}return null}function H(e,t){if(e.indexOf){return e.indexOf(t)}for(var r=0,n=e.length;r<n;r++){if(e[r]===t){return r}}return-1}function W(e){if(!o||!e||typeof e!=="object"){return false}try{o.call(e);try{l.call(e)}catch(e){return true}return e instanceof Map}catch(e){}return false}function Z(e){if(!h||!e||typeof e!=="object"){return false}try{h.call(e,h);try{d.call(e,d)}catch(e){return true}return e instanceof WeakMap}catch(e){}return false}function X(e){if(!y||!e||typeof e!=="object"){return false}try{y.call(e);return true}catch(e){}return false}function Y(e){if(!l||!e||typeof e!=="object"){return false}try{l.call(e);try{o.call(e)}catch(e){return true}return e instanceof Set}catch(e){}return false}function Q(e){if(!d||!e||typeof e!=="object"){return false}try{d.call(e,d);try{h.call(e,h)}catch(e){return true}return e instanceof WeakSet}catch(e){}return false}function J(e){if(!e||typeof e!=="object"){return false}if(typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){return true}return typeof e.nodeName==="string"&&typeof e.getAttribute==="function"}function K(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength;var n="... "+r+" more character"+(r>1?"s":"");return K(e.slice(0,t.maxStringLength),t)+n}var i=e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,$);return M(i,"single",t)}function $(e){var t=e.charCodeAt(0);var r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];if(r){return"\\"+r}return"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function ee(e){return"Object("+e+")"}function te(e){return e+" { ? }"}function re(e,t,r,n){var i=n?oe(r,n):r.join(", ");return e+" ("+t+") {"+i+"}"}function ne(e){for(var t=0;t<e.length;t++){if(H(e[t],"\n")>=0){return false}}return true}function ie(e,t){var r;if(e.indent==="\t"){r="\t"}else if(typeof e.indent==="number"&&e.indent>0){r=Array(e.indent+1).join(" ")}else{return null}return{base:r,prev:Array(t+1).join(r)}}function oe(e,t){if(e.length===0){return""}var r="\n"+t.prev+t.base;return r+e.join(","+r)+"\n"+t.prev}function ae(e,t){var r=A(e);var n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++){n[i]=V(e,i)?t(e[i],e):""}}var o=typeof x==="function"?x(e):[];var a;if(w){a={};for(var s=0;s<o.length;s++){a["$"+o[s]]=o[s]}}for(var u in e){if(!V(e,u)){continue}if(r&&String(Number(u))===u&&u<e.length){continue}if(w&&a["$"+u]instanceof Symbol){continue}else if(/[^\w$]/.test(u)){n.push(t(u,e)+": "+t(e[u],e))}else{n.push(u+": "+t(e[u],e))}}if(typeof x==="function"){for(var l=0;l<o.length;l++){if(P.call(e,o[l])){n.push("["+t(o[l])+"]: "+t(e[o[l]],e))}}}return n}},function(e,t){},function(e,t,r){"use strict";var n=r(204);var i=Object.prototype.hasOwnProperty;var o=Array.isArray;var a={allowDots:false,allowPrototypes:false,allowSparse:false,arrayLimit:20,charset:"utf-8",charsetSentinel:false,comma:false,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:false,interpretNumericEntities:false,parameterLimit:1e3,parseArrays:true,plainObjects:false,strictNullHandling:false};var s=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})};var u=function(e,t){if(e&&typeof e==="string"&&t.comma&&e.indexOf(",")>-1){return e.split(",")}return e};var l="utf8=%26%2310003%3B";var f="utf8=%E2%9C%93";var c=function e(t,r){var c={};var h=r.ignoreQueryPrefix?t.replace(/^\?/,""):t;var p=r.parameterLimit===Infinity?undefined:r.parameterLimit;var d=h.split(r.delimiter,p);var v=-1;var y;var g=r.charset;if(r.charsetSentinel){for(y=0;y<d.length;++y){if(d[y].indexOf("utf8=")===0){if(d[y]===f){g="utf-8"}else if(d[y]===l){g="iso-8859-1"}v=y;y=d.length}}}for(y=0;y<d.length;++y){if(y===v){continue}var m=d[y];var _=m.indexOf("]=");var b=_===-1?m.indexOf("="):_+1;var S,x;if(b===-1){S=r.decoder(m,a.decoder,g,"key");x=r.strictNullHandling?null:""}else{S=r.decoder(m.slice(0,b),a.decoder,g,"key");x=n.maybeMap(u(m.slice(b+1),r),function(e){return r.decoder(e,a.decoder,g,"value")})}if(x&&r.interpretNumericEntities&&g==="iso-8859-1"){x=s(x)}if(m.indexOf("[]=")>-1){x=o(x)?[x]:x}if(i.call(c,S)){c[S]=n.combine(c[S],x)}else{c[S]=x}}return c};var h=function(e,t,r,n){var i=n?t:u(t,r);for(var o=e.length-1;o>=0;--o){var a;var s=e[o];if(s==="[]"&&r.parseArrays){a=[].concat(i)}else{a=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s;var f=parseInt(l,10);if(!r.parseArrays&&l===""){a={0:i}}else if(!isNaN(f)&&s!==l&&String(f)===l&&f>=0&&(r.parseArrays&&f<=r.arrayLimit)){a=[];a[f]=i}else{a[l]=i}}i=a}return i};var p=function e(t,r,n,o){if(!t){return}var a=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t;var s=/(\[[^[\]]*])/;var u=/(\[[^[\]]*])/g;var l=n.depth>0&&s.exec(a);var f=l?a.slice(0,l.index):a;var c=[];if(f){if(!n.plainObjects&&i.call(Object.prototype,f)){if(!n.allowPrototypes){return}}c.push(f)}var p=0;while(n.depth>0&&(l=u.exec(a))!==null&&p<n.depth){p+=1;if(!n.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))){if(!n.allowPrototypes){return}}c.push(l[1])}if(l){c.push("["+a.slice(l.index)+"]")}return h(c,r,n,o)};var d=function e(t){if(!t){return a}if(t.decoder!==null&&t.decoder!==undefined&&typeof t.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}if(typeof t.charset!=="undefined"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1"){throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined")}var r=typeof t.charset==="undefined"?a.charset:t.charset;return{allowDots:typeof t.allowDots==="undefined"?a.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes==="boolean"?t.allowPrototypes:a.allowPrototypes,allowSparse:typeof t.allowSparse==="boolean"?t.allowSparse:a.allowSparse,arrayLimit:typeof t.arrayLimit==="number"?t.arrayLimit:a.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel==="boolean"?t.charsetSentinel:a.charsetSentinel,comma:typeof t.comma==="boolean"?t.comma:a.comma,decoder:typeof t.decoder==="function"?t.decoder:a.decoder,delimiter:typeof t.delimiter==="string"||n.isRegExp(t.delimiter)?t.delimiter:a.delimiter,depth:typeof t.depth==="number"||t.depth===false?+t.depth:a.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===true,interpretNumericEntities:typeof t.interpretNumericEntities==="boolean"?t.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof t.parameterLimit==="number"?t.parameterLimit:a.parameterLimit,parseArrays:t.parseArrays!==false,plainObjects:typeof t.plainObjects==="boolean"?t.plainObjects:a.plainObjects,strictNullHandling:typeof t.strictNullHandling==="boolean"?t.strictNullHandling:a.strictNullHandling}};e.exports=function(e,t){var r=d(t);if(e===""||e===null||typeof e==="undefined"){return r.plainObjects?Object.create(null):{}}var i=typeof e==="string"?c(e,r):e;var o=r.plainObjects?Object.create(null):{};var a=Object.keys(i);for(var s=0;s<a.length;++s){var u=a[s];var l=p(u,i[u],r,typeof e==="string");o=n.merge(o,l,r)}if(r.allowSparse===true){return o}return n.compact(o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoDatasetService=undefined;var n=r(390);t.GeoDatasetService=n.GeoDatasetService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoDatasetService=undefined;var n=r(391);t.GeoDatasetService=n.GeoDatasetService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GeoDatasetService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(121);function v(e){return e&&e.__esModule?e:{default:e}}var y="schema";var g="featureclass/metadata";var m="raster/metadata";var _="featureclass/statistics";var b=t.GeoDatasetService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/giscore/dataconvert/rest/geodataset/";return r}(0,u.default)(t,[{key:"schema",value:function e(t,r,n){var i=this.serviceUrl;i+=y;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"featuremetadata",value:function e(t,r,n){var i=this.serviceUrl;i+=g;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"rastermetadata",value:function e(t,r,n){var i=this.serviceUrl;i+=m;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"statistics",value:function e(t,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"query",value:function e(t,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,t);this.get(o,r,n)}}]);return t}(d.CloudDiskService);t.default=b;p.Zondy.CloudDisk.GisCore.GeoDatasetService=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalculateModelService=undefined;var n=r(393);t.CalculateModelService=n.CalculateModelService},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalculateModelService=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(4);var h=g(c);var p=r(122);var d=g(p);var v=r(0);var y=r(121);function g(e){return e&&e.__esModule?e:{default:e}}var m="";var _="/catalog";var b="/catalog/{type}?";var S="/execute/{type}/{modelID}?";var x="/node";var C="/node/{id}?";var w="/node/root";var P="/nodes";var I="/nodes/{nodeId}?";var E=t.CalculateModelService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/clouddisk/rest/CalculateModel";return r}(0,u.default)(t,[{key:"add",value:function e(t,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var a=""+o+i+m+"?nodeId="+t.nodeId;delete t.nodeId;this.post(a,t,r,n)}},{key:"catalog",value:function e(t,r,n){var i=this.serviceUrl;i+=_;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"catalogtype",value:function e(t,r,n){var i=t.type;var o=this.serviceUrl;var a=this.getBaseUrl();var s=""+a+o+b;s=s.replace("{type}",i);delete t.type;s=s+d.default.stringify(t);this.get(s,r,n)}},{key:"execute",value:function e(t,r,n){var i=this.serviceUrl;var o=t.type,a=t.modelID;var s=this.getBaseUrl();var u=""+s+i+S;u=u.replace("{type}",o);u=u.replace("{modelID}",a);this.post(u,undefined,r,n)}},{key:"node",value:function e(t,r,n){var i=this.serviceUrl;var o=this.getBaseUrl();var a=""+o+i+x;this.post(a,t,r,n)}},{key:"nodeid",value:function e(t,r,n){var i=t.id;var o=this.serviceUrl;var a=""+baseurl+o+C;a=a.replace("{id}",i);this.get(a,r,n)}},{key:"noderoot",value:function e(t,r,n){t={};var i=this.serviceUrl;i+=w;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"nodes",value:function e(t,r,n){t={};var i=this.serviceUrl;i+=P;var o=this.getFullUrl(i,t);this.get(o,r,n)}},{key:"nodesid",value:function e(t,r,n){var i=t.nodeId;var o=this.serviceUrl;var a=""+baseurl+o+I;a=a.replace("{nodeId}",i);delete t.nodeId;a=a+d.default.stringify(t);this.get(a,r,n)}}]);return t}(y.CloudDiskService);t.default=E;v.Zondy.CloudDisk.Model.CalculateModelService=E},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.uniqueTheme3DLayer=t.UniqueTheme3DLayer=t.rangeTheme3DLayer=t.RangeTheme3DLayer=t.Theme3DLayer=t.ThemeStyle=t.RankSymbolThemeLayer=t.SimpleThemeLayer=t.RandomThemeLayer=t.graphThemeLayer=t.GraphThemeLayer=t.UniqueThemeLayer=t.rangeThemeLayer=t.RangeThemeLayer=t.ThemeLayer=t.GeoFeatureThemeLayer=undefined;var n=r(69);var i=r(126);var o=r(228);var a=r(395);var s=r(230);var u=r(410);var l=r(411);var f=r(412);var c=r(413);var h=r(134);var p=r(414);var d=r(415);t.GeoFeatureThemeLayer=n.GeoFeatureThemeLayer;t.ThemeLayer=i.ThemeLayer;t.RangeThemeLayer=o.RangeThemeLayer;t.rangeThemeLayer=o.rangeThemeLayer;t.UniqueThemeLayer=a.UniqueThemeLayer;t.GraphThemeLayer=s.GraphThemeLayer;t.graphThemeLayer=s.graphThemeLayer;t.RandomThemeLayer=u.RandomThemeLayer;t.SimpleThemeLayer=l.SimpleThemeLayer;t.RankSymbolThemeLayer=f.RankSymbolThemeLayer;t.ThemeStyle=c.ThemeStyle;t.Theme3DLayer=h.Theme3DLayer;t.RangeTheme3DLayer=p.RangeTheme3DLayer;t.rangeTheme3DLayer=p.rangeTheme3DLayer;t.UniqueTheme3DLayer=d.UniqueTheme3DLayer;t.uniqueTheme3DLayer=d.uniqueTheme3DLayer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.uniqueThemeLayer=t.UniqueThemeLayer=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(4);var h=b(c);var p=r(11);var d=b(p);var v=r(0);var y=r(6);var g=r(228);var m=r(13);var _=r(396);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.themeField=r.themeField;n.style=r.style;n.styleGroups=r.styleGroups;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;return n}(0,u.default)(t,[{key:"createThematicFeature",value:function e(t){var r=this.getStyleByData(t);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=m.ShapeFactory.transformStyle(this.highlightStyle);var i=new _.ThemeVector(t,this,m.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function e(t){var r={};var n=t;r=(0,y.copyAttributesWithClip)(r,this.style);if(this.themeField&&this.styleGroups&&this.styleGroups.length>0&&n.attributes){var i=this.themeField;var o=n.attributes;var a=this.styleGroups;var s=false;var u=null;for(var l in o){if(i===l){s=true;u=o[l];break}}if(s){for(var f=0,c=a.length;f<c;f++){if(u.toString()===a[f].value.toString()){var h=a[f].style;r=(0,y.copyAttributesWithClip)(r,h)}}}}if(n.style&&this.isAllowFeatureStyle===true){r=(0,y.copyAttributesWithClip)(n.style)}return r}}]);return t}(g.RangeThemeLayer);t.UniqueThemeLayer=S;var x=t.uniqueThemeLayer=function e(t,r){return new S(t,r)};v.Zondy.Map.uniqueThemeLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SUtil=t.LevelRendererVector=t.Util=t.Transformable=t.Storage=t.SmicText=t.SmicStar=t.SmicSector=t.SmicRing=t.SmicRectangle=t.SmicPolygon=t.SmicPoint=t.SmicIsogon=t.SmicImage=t.SmicEllipse=t.SmicCircle=t.SmicBrokenLine=t.Shape=t.PaintLayer=t.Painter=t.Matrix=t.Math=t.Http=t.Handler=t.Group=t.Eventful=t.LevelRendererEvent=t.Env=t.Easing=t.LevelRendererCurve=t.Config=t.ComputeBoundingBox=t.Color=t.Clip=t.Area=t.Animator=t.Animation=t.Render=t.LevelRenderer=t.FeatureTheme=t.Sector=t.FeatureRectangle=t.FeaturePolygon=t.Point=t.FeatureLine=t.Label=t.Image=t.FeatureCircle=t.ShapeParameters=t.ShapeFactory=t.ThemeVector=t.Ring=t.RankSymbol=t.OverlayPoint=t.Pie=t.Line=t.Graph=t.OverlayCircle=t.Bar3D=t.Bar=undefined;var n=r(397);var i=r(398);var o=r(399);var a=r(32);var s=r(400);var u=r(401);var l=r(402);var f=r(229);var c=r(403);var h=r(52);var p=r(404);var d=r(405);t.Bar=n.Bar;t.Bar3D=i.Bar3D;t.OverlayCircle=o.Circle;t.Graph=a.Graph;t.Line=s.Line;t.Pie=u.Pie;t.OverlayPoint=l.Point;t.RankSymbol=f.RankSymbol;t.Ring=c.Ring;t.ThemeVector=h.ThemeVector;t.ShapeFactory=p.ShapeFactory;t.ShapeParameters=p.ShapeParameters;t.FeatureCircle=p.FeatureCircle;t.Image=p.Image;t.Label=p.Label;t.FeatureLine=p.FeatureLine;t.Point=p.Point;t.FeaturePolygon=p.FeaturePolygon;t.FeatureRectangle=p.FeatureRectangle;t.Sector=p.Sector;t.FeatureTheme=p.FeatureTheme;t.LevelRenderer=d.LevelRenderer;t.Render=d.Render;t.Animation=d.Animation;t.Animator=d.Animator;t.Area=d.Area;t.Clip=d.Clip;t.Color=d.Color;t.ComputeBoundingBox=d.ComputeBoundingBox;t.Config=d.Config;t.LevelRendererCurve=d.LevelRendererCurve;t.Easing=d.Easing;t.Env=d.Env;t.LevelRendererEvent=d.LevelRendererEvent;t.Eventful=d.Eventful;t.Group=d.Group;t.Handler=d.Handler;t.Http=d.Http;t.Math=d.Math;t.Matrix=d.Matrix;t.Painter=d.Painter;t.PaintLayer=d.PaintLayer;t.Shape=d.Shape;t.SmicBrokenLine=d.SmicBrokenLine;t.SmicCircle=d.SmicCircle;t.SmicEllipse=d.SmicEllipse;t.SmicImage=d.SmicImage;t.SmicIsogon=d.SmicIsogon;t.SmicPoint=d.SmicPoint;t.SmicPolygon=d.SmicPolygon;t.SmicRectangle=d.SmicRectangle;t.SmicRing=d.SmicRing;t.SmicSector=d.SmicSector;t.SmicStar=d.SmicStar;t.SmicText=d.SmicText;t.Storage=d.Storage;t.Transformable=d.Transformable;t.Util=d.Util;t.LevelRendererVector=d.LevelRendererVector;t.SUtil=d.SUtil},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Bar=undefined;var n=r(2);var i=S(n);var o=r(1);var a=S(o);var s=r(5);var u=S(s);var l=r(3);var f=S(l);var c=r(7);var h=S(c);var p=r(4);var d=S(p);var v=r(0);var y=r(6);var g=r(13);var m=r(74);var _=r(127);var b=r(32);function S(e){return e&&e.__esModule?e:{default:e}}var x=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Bar";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]];var r={showShadow:true,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2};var n=this.setting;if(!n.barLinearGradient){n.barLinearGradient=t}if(!n.dataViewBoxParameter){if(typeof n.useAxis==="undefined"||n.useAxis){n.dataViewBoxParameter=[45,15,15,15]}else{n.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var o=this.dataViewBox;var a=this.dataValues;if(a.length<1){return}for(var s=0,u=a.length;s<u;s++){if(a[s]<i[0]||a[s]>i[1]){return}}var l=this.calculateXShapeInfo();if(!l){return}var f=l.xPositions;var c=l.width;if(typeof n.useBackground==="undefined"||n.useBackground){this.shapes.push(g.ShapeFactory.Background(this.shapeFactory,this.chartBox,n))}if(typeof n.useAxis==="undefined"||n.useAxis){this.shapes=this.shapes.concat(g.ShapeFactory.GraphAxis(this.shapeFactory,o,n,l))}for(var h=0;h<a.length;h++){var p=o[1]-(a[h]-i[0])/this.DVBUnitValue;var d=[[f[h]-c/2,o[1]-1],[f[h]+c/2,o[1]-1],[f[h]+c/2,p],[f[h]-c/2,p]];var v=new m.Polygon(d);if(typeof n.showShadow==="undefined"||n.showShadow){if(n.barShadowStyle){var _=n.barShadowStyle;if(_.shadowBlur){r.shadowBlur=_.shadowBlur}if(_.shadowColor){r.shadowColor=_.shadowColor}if(_.shadowOffsetX){r.shadowOffsetX=_.shadowOffsetX}if(_.shadowOffsetY){r.shadowOffsetY=_.shadowOffsetY}}v.style={};(0,y.copyAttributesWithClip)(v.style,r)}v.refDataID=this.data.FID;v.dataInfo={field:this.fields[h],value:a[h]};if(typeof n.barHoverAble!=="undefined"){v.hoverable=n.barHoverAble}if(typeof n.barClickAble!=="undefined"){v.clickable=n.barClickAble}this.shapes.push(this.shapeFactory.createShape(v))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function e(){var t=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var a=0;var s=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=s-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}a=u/n}else{a=s/(2*n+1);i=[a,a,a]}var l=0;for(var f=0;f<n;f++){if(f===0){l=i[0]+a/2}else{l+=a+i[1]}o.push(t[0]+l)}return{xPositions:o,width:a}}},{key:"resetLinearGradient",value:function e(){if(this.RelativeCoordinate){var t=this.shapes.length;var r=this.setting.barLinearGradient;var n=-1;for(var i=0;i<t;i++){var o=this.shapes[i];if(o.CLASS_NAME==="Zondy.LevelRenderer.Shape.SmicPolygon"){var a=o.style;var s=this.location[0]+a.pointList[0][0];var u=this.location[0]+a.pointList[1][0];n++;if(n>=r.length){n=n%r.length}var l=r[n][0];var f=r[n][1];var c=new _.Color;var h=c.getLinearGradient(s,0,u,0,[[0,l],[1,f]]);o.style.color=h}}}}}]);return t}(b.Graph);t.Bar=x;v.Zondy.Theme.Bar=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Bar3D=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(7);var h=b(c);var p=r(4);var d=b(p);var v=r(0);var y=r(6);var g=r(13);var m=r(74);var _=r(32);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Bar3D";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t=this.setting;if(!t.dataViewBoxParameter){if(typeof t.useAxis==="undefined"||t.useAxis){t.dataViewBoxParameter=[45,25,20,20]}else{t.dataViewBoxParameter=[5,5,5,5]}}t.axisUseArrow=typeof t.axisUseArrow!=="undefined"?t.axisUseArrow:true;t.axisXLabelsOffset=typeof t.axisXLabelsOffset!=="undefined"?t.axisXLabelsOffset:[-10,10];if(!this.initBaseParameter()){return}var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox;var i=this.dataValues;if(i.length<1){return}for(var o=0,a=i.length;o<a;o++){if(i[o]<r[0]||i[o]>r[1]){return}}var s=this.calculateXShapeInfo();if(!s){return}var u=s.xPositions;var l=s.width;if(typeof t.useBackground==="undefined"||t.useBackground){this.shapes.push(g.ShapeFactory.Background(this.shapeFactory,this.chartBox,t))}if(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15){t.axis3DParameter=20}if(typeof t.useAxis==="undefined"||t.useAxis){this.shapes=this.shapes.concat(g.ShapeFactory.GraphAxis(this.shapeFactory,n,t,s))}var f=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10;for(var c=0;c<i.length;c++){var h=n[1]-(i[c]-r[0])/this.DVBUnitValue;var p=u[c]-l/2;var d=u[c]+l/2;var v=[[p,h],[d,h],[d-f,h+f],[p-f,h+f]];var _=[[d,h],[d-f,h+f],[d-f,n[1]+f],[d,n[1]]];var b=[[p-f,n[1]+f],[d-f,n[1]+f],[d-f,h+f],[p-f,h+f]];if(f<=0){b=[[p,n[1]],[d,n[1]],[d,h],[p,h]]}var S=new m.Polygon(v);var x=new m.Polygon(_);var C=new m.Polygon(b);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle;t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields;t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain;t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle;t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields;t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain;C.style=g.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,i[c]);x.style=g.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,i[c]);S.style=g.ShapeFactory.ShapeStyleTool({stroke:true,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,i[c]);t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle;t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle;C.highlightStyle=g.ShapeFactory.ShapeStyleTool({stroke:true},t.barFaceHoverStyle);x.highlightStyle=g.ShapeFactory.ShapeStyleTool({stroke:true},t.barSideHoverStyle);S.highlightStyle=g.ShapeFactory.ShapeStyleTool({stroke:true},t.barTopHoverStyle);S.refDataID=x.refDataID=C.refDataID=this.data.FID;S.isHoverByRefDataID=x.isHoverByRefDataID=C.isHoverByRefDataID=true;S.refDataHoverGroup=x.refDataHoverGroup=C.refDataHoverGroup=(0,y.newGuid)();S.dataInfo=x.dataInfo=C.dataInfo={field:this.fields[c],value:i[c]};if(typeof t.barHoverAble!=="undefined"){S.hoverable=x.hoverable=C.hoverable=t.barHoverAble}if(typeof t.barClickAble!=="undefined"){S.clickable=x.clickable=C.clickable=t.barClickAble}this.shapes.push(this.shapeFactory.createShape(x));this.shapes.push(this.shapeFactory.createShape(S));this.shapes.push(this.shapeFactory.createShape(C))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function e(){var t=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var a=0;var s=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===3){i=r.xShapeBlank;var u=s-(i[0]+i[2]+(n-1)*i[1]);if(u<=n){return null}a=u/n}else{a=s/(2*n+1);i=[a,a,a]}var l=0;for(var f=0;f<n;f++){if(f===0){l=i[0]+a/2}else{l+=a+i[1]}o.push(t[0]+l)}return{xPositions:o,width:a}}}]);return t}(_.Graph);t.Bar3D=S;v.Zondy.Theme.Bar3D=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Circle=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(7);var h=b(c);var p=r(4);var d=b(p);var v=r(0);var y=r(43);var g=r(131);var m=r(13);var _=r(229);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Circle";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t="#ff9277";if(!this.setting){return false}var r=this.setting;if(!r.codomain){return false}var n=typeof r.decimalNumber!=="undefined"&&!isNaN(r.decimalNumber)?r.decimalNumber:-1;var i=y.Theme.getDataValues(this.data,this.fields,n);this.dataValues=i?i:[];var o=this.dataValues;if(!r.maxR){r.maxR=100}if(!r.minR){r.minR=0}var a=this.DVBCodomain;if(a&&a[1]-a[0]>0){this.DVBUnitValue=r.maxR/(a[1]-a[0])}else{this.DVBUnitValue=r.maxR}var s=this.DVBUnitValue;var u=o[0]*s+r.minR;this.width=2*u;this.height=2*u;if(!this.initBaseParameter()){return}if(a){if(o[0]<a[0]||o[0]>a[1]){return}}var l=this.DVBCenterPoint;var f=new g.Circle(l[0],l[1],u);f.style=m.ShapeFactory.ShapeStyleTool(null,r.circleStyle,null,null,0);if(typeof r.fillColor!=="undefined"){f.style.fillColor=r.fillColor}else{f.style.fillColor=t}f.highlightStyle=m.ShapeFactory.ShapeStyleTool(null,r.circleHoverStyle);if(typeof r.circleHoverAble!=="undefined"){f.hoverable=r.circleHoverAble}if(typeof r.circleClickAble!=="undefined"){f.clickable=r.circleClickAble}f.refDataID=this.data.FID;f.dataInfo={field:this.fields[0],r:u,value:o[0]};this.shapes.push(this.shapeFactory.createShape(f));this.shapesConvertToRelativeCoordinate()}}]);return t}(_.RankSymbol);t.Circle=S;v.Zondy.Theme.Circle=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Line=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(7);var h=b(c);var p=r(4);var d=b(p);var v=r(0);var y=r(13);var g=r(73);var m=r(130);var _=r(32);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Line";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t=this.setting;if(!t.dataViewBoxParameter){if(typeof t.useAxis==="undefined"||t.useAxis){t.dataViewBoxParameter=[45,15,15,15]}else{t.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;if(o.length<1){return}var a=this.calculateXShapeInfo();if(!a){return}var s=a.xPositions;if(typeof t.useBackground==="undefined"||t.useBackground){this.shapes.push(y.ShapeFactory.Background(this.shapeFactory,this.chartBox,t))}this.shapes=this.shapes.concat(y.ShapeFactory.GraphAxis(this.shapeFactory,r,t,a));var u;var l;var f=[];var c=[];for(var h=0,p=o.length;h<p;h++){if(o[h]<n[0]||o[h]>n[1]){return null}u=s[h];l=r[1]-(o[h]-n[0])/i;var d=new g.Point(u,l);d.style=y.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,h,o[h]);d.highlightStyle=y.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle);if(typeof t.pointHoverAble!=="undefined"){d.hoverable=t.pointHoverAble}if(typeof t.pointClickAble!=="undefined"){d.clickable=t.pointClickAble}d.refDataID=this.data.FID;d.dataInfo={field:this.fields[h],value:o[h]};c.push(this.shapeFactory.createShape(d));var v=[u,l];f.push(v)}var _=new m.Line(f);_.style=y.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle);_.clickable=false;_.hoverable=false;var b=this.shapeFactory.createShape(_);this.shapes.push(b);this.shapes=this.shapes.concat(c);this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function e(){var t=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var a=0;var s=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=s-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=s/(n+1);i=[u,u,u]}var f=0;for(var c=0;c<n;c++){if(c===0){f=i[0]}else{f+=u}o.push(t[0]+f)}return{xPositions:o,width:a}}}]);return t}(_.Graph);t.Line=S;v.Zondy.Theme.Line=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Pie=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(13);var g=r(75);var m=r(32);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Pie";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t=this.setting;var r=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(!this.initBaseParameter()){return}if(t.useBackground){this.shapes.push(y.ShapeFactory.Background(this.shapeFactory,this.chartBox,t))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var a=0;for(var s=0;s<n.length;s++){a+=Math.abs(n[s])}this.DVBUnitValue=360/a;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var f=0;var c=0;var h=f;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;for(var d=0;d<n.length;d++){var v=Math.abs(n[d]);if(d===0){c=f+v*u}else if(d===v.length-1){c=h}else{c=f+v*u}if(c-f>=360){c=359.9999999}var m=new g.Sector(l[0],l[1],p,f,c);if(typeof t.sectorStyleByFields==="undefined"){var _=d%r.length;m.style=y.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,r,null,_)}else{m.style=y.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,n[d])}m.highlightStyle=y.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle);if(typeof t.sectorHoverAble!=="undefined"){m.hoverable=t.sectorHoverAble}if(typeof t.sectorClickAble!=="undefined"){m.clickable=t.sectorClickAble}m.refDataID=this.data.FID;m.dataInfo={field:this.fields[d],value:n[d]};this.shapes.push(this.shapeFactory.createShape(m));f=c}this.shapesConvertToRelativeCoordinate()}}]);return t}(m.Graph);t.Pie=b;v.Zondy.Theme.Pie=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Point=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(13);var g=r(73);var m=r(32);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Point";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){var t=this.setting;if(!t.dataViewBoxParameter){if(typeof t.useAxis==="undefined"||t.useAxis){t.dataViewBoxParameter=[45,15,15,15]}else{t.dataViewBoxParameter=[5,5,5,5]}}if(!this.initBaseParameter()){return}var r=this.dataViewBox;var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue;var o=this.dataValues;var a=this.calculateXShapeInfo();if(!a){return}var s=a.xPositions;if(typeof t.useBackground==="undefined"||t.useBackground){this.shapes.push(y.ShapeFactory.Background(this.shapeFactory,this.chartBox,t))}this.shapes=this.shapes.concat(y.ShapeFactory.GraphAxis(this.shapeFactory,r,t,a));var u;var l;for(var f=0,c=o.length;f<c;f++){if(o[f]<n[0]||o[f]>n[1]){return null}u=s[f];l=r[1]-(o[f]-n[0])/i;var h=new g.Point(u,l);h.style=y.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]);h.highlightStyle=y.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle);if(typeof t.pointHoverAble!=="undefined"){h.hoverable=t.pointHoverAble}if(typeof t.pointClickAble!=="undefined"){h.clickable=t.pointClickAble}h.refDataID=this.data.FID;h.dataInfo={field:this.fields[f],value:o[f]};this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}},{key:"calculateXShapeInfo",value:function e(){var t=this.dataViewBox;var r=this.setting;var n=this.dataValues.length;if(n<1){return null}var i;var o=[];var a=0;var s=this.DVBWidth;var u=0;if(r.xShapeBlank&&r.xShapeBlank.length&&r.xShapeBlank.length===2){i=r.xShapeBlank;var l=s-(i[0]+i[1]);if(l<=n){return null}u=l/(n-1)}else{u=s/(n+1);i=[u,u,u]}var f=0;for(var c=0;c<n;c++){if(c===0){f=i[0]}else{f+=u}o.push(t[0]+f)}return{xPositions:o,width:a}}}]);return t}(m.Graph);t.Point=b;v.Zondy.Theme.Point=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Ring=undefined;var n=r(2);var i=_(n);var o=r(1);var a=_(o);var s=r(5);var u=_(s);var l=r(3);var f=_(l);var c=r(7);var h=_(c);var p=r(4);var d=_(p);var v=r(0);var y=r(13);var g=r(75);var m=r(32);function _(e){return e&&e.__esModule?e:{default:e}}var b=function(e){(0,d.default)(t,e);function t(e,r,n,o,s,u){(0,a.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n,o,s,u));l.CLASS_NAME="Zondy.Theme.Ring";return l}(0,u.default)(t,[{key:"destroy",value:function e(){(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function e(){if(!this.initBaseParameter()){return}var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];var r=this.setting;if(r.useBackground){this.shapes.push(y.ShapeFactory.Background(this.shapeFactory,this.chartBox,r))}var n=this.dataValues;if(n.length<1){return}var i=this.DVBCodomain;for(var o=0;o<n.length;o++){if(n[o]<i[0]||n[o]>i[1]){return}}var a=0;for(var s=0;s<n.length;s++){a+=Math.abs(n[s])}this.DVBUnitValue=360/a;var u=this.DVBUnitValue;var l=this.DVBCenterPoint;var f=0;var c=0;var h=f;var p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2;var d=r.innerRingRadius>=0&&r.innerRingRadius<p;var v=typeof r.innerRingRadius!=="undefined"&&!isNaN(r.innerRingRadius)&&d?r.innerRingRadius:0;for(var m=0;m<n.length;m++){var _=Math.abs(n[m]);if(m===0){c=f+_*u}else if(m===_.length-1){c=h}else{c=f+_*u}var b=new g.Sector(l[0],l[1],p,f,c,v);if(typeof r.sectorStyleByFields==="undefined"){var S=m%t.length;b.style=y.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,t,null,S)}else{b.style=y.ShapeFactory.ShapeStyleTool(null,r.sectorStyle,r.sectorStyleByFields,r.sectorStyleByCodomain,m,n[m])}b.highlightStyle=y.ShapeFactory.ShapeStyleTool(null,r.sectorHoverStyle);if(typeof r.sectorHoverAble!=="undefined"){b.hoverable=r.sectorHoverAble}if(typeof r.sectorClickAble!=="undefined"){b.clickable=r.sectorClickAble}b.refDataID=this.data.FID;b.dataInfo={field:this.fields[m],value:n[m]};this.shapes.push(this.shapeFactory.createShape(b));f=c}this.shapesConvertToRelativeCoordinate()}}]);return t}(m.Graph);t.Ring=b;v.Zondy.Theme.Ring=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FeatureTheme=t.Sector=t.FeatureRectangle=t.FeaturePolygon=t.Point=t.FeatureLine=t.Label=t.Image=t.FeatureCircle=t.ShapeParameters=t.ShapeFactory=undefined;var n=r(13);var i=r(27);var o=r(131);var a=r(223);var s=r(222);var u=r(130);var l=r(73);var f=r(74);var c=r(221);var h=r(75);var p=r(43);t.ShapeFactory=n.ShapeFactory;t.ShapeParameters=i.ShapeParameters;t.FeatureCircle=o.Circle;t.Image=a.Image;t.Label=s.Label;t.FeatureLine=u.Line;t.Point=l.Point;t.FeaturePolygon=f.Polygon;t.FeatureRectangle=c.Rectangle;t.Sector=h.Sector;t.FeatureTheme=p.Theme},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SUtil=t.LevelRendererVector=t.Util=t.Transformable=t.Storage=t.SmicText=t.SmicStar=t.SmicSector=t.SmicRing=t.SmicRectangle=t.SmicPolygon=t.SmicPoint=t.SmicIsogon=t.SmicImage=t.SmicEllipse=t.SmicCircle=t.SmicBrokenLine=t.Shape=t.PaintLayer=t.Painter=t.Matrix=t.Math=t.Http=t.Handler=t.Group=t.Eventful=t.LevelRendererEvent=t.Env=t.Easing=t.LevelRendererCurve=t.Config=t.ComputeBoundingBox=t.Color=t.Clip=t.Area=t.Animator=t.Animation=t.Render=t.LevelRenderer=undefined;var n=r(205);var i=r(206);var o=r(218);var a=r(209);var s=r(219);var u=r(127);var l=r(210);var f=r(128);var c=r(71);var h=r(220);var p=r(211);var d=r(212);var v=r(51);var y=r(208);var g=r(217);var m=r(213);var _=r(214);var b=r(215);var S=r(216);var x=r(16);var C=r(133);var w=r(225);var P=r(406);var I=r(129);var E=r(407);var L=r(132);var T=r(76);var M=r(226);var O=r(408);var A=r(227);var N=r(409);var R=r(224);var k=r(207);var D=r(70);var F=r(42);var B=r(72);var j=r(20);t.LevelRenderer=n.LevelRenderer;t.Render=i.Render;t.Animation=o.Animation;t.Animator=o.Animator;t.Area=a.Area;t.Clip=s.Clip;t.Color=u.Color;t.ComputeBoundingBox=l.ComputeBoundingBox;t.Config=f.Config;t.LevelRendererCurve=c.Curve;t.Easing=h.Easing;t.Env=p.Env;t.LevelRendererEvent=d.Event;t.Eventful=v.Eventful;t.Group=y.Group;t.Handler=g.Handler;t.Http=m.Http;t.Math=_.Math;t.Matrix=b.Matrix;t.Painter=S.Painter;t.PaintLayer=S.PaintLayer;t.Shape=x.Shape;t.SmicBrokenLine=C.SmicBrokenLine;t.SmicCircle=w.SmicCircle;t.SmicEllipse=P.SmicEllipse;t.SmicImage=I.SmicImage;t.SmicIsogon=E.SmicIsogon;t.SmicPoint=L.SmicPoint;t.SmicPolygon=T.SmicPolygon;t.SmicRectangle=M.SmicRectangle;t.SmicRing=O.SmicRing;t.SmicSector=A.SmicSector;t.SmicStar=N.SmicStar;t.SmicText=R.SmicText;t.Storage=k.Storage;t.Transformable=D.Transformable;t.Util=F.Util;t.LevelRendererVector=B.Vector;t.SUtil=j.SUtil},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicEllipse=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicellipse";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=.5522848;var o=r.x+n[0];var a=r.y+n[1];var s=r.a;var u=r.b;var l=s*i;var f=u*i;t.moveTo(o-s,a);t.bezierCurveTo(o-s,a-f,o-l,a-u,o,a-u);t.bezierCurveTo(o+l,a-u,o+s,a-f,o+s,a);t.bezierCurveTo(o+s,a+f,o+l,a+u,o,a+u);t.bezierCurveTo(o-l,a+u,o-s,a+f,o-s,a);t.closePath()}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-t.a-n/2),y:Math.round(t.x+r[1]-t.b-n/2),width:t.a*2+n,height:t.b*2+n};return t.__rect}}]);return t}(y.Shape);t.SmicEllipse=m;v.Zondy.LevelRenderer.SmicEllipse=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicIsogon=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(16);var g=r(20);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicisogon";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=g.SUtil.Util_math.sin;var o=g.SUtil.Util_math.cos;var a=Math.PI;var s=r.n;if(!s||s<2){return}var u=r.x+n[0];var l=r.y+n[1];var f=r.r;var c=2*a/s;var h=-a/2;var p=u+f*o(h);var d=l+f*i(h);h+=c;var v=r.pointList=[];v.push([p,d]);for(var y=0,m=s-1;y<m;y++){v.push([u+f*o(h),l+f*i(h)]);h+=c}v.push([p,d]);t.moveTo(v[0][0],v[0][1]);for(var _=0;_<v.length;_++){t.lineTo(v[_][0],v[_][1])}t.closePath();return}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-t.r-n/2),y:Math.round(t.y+r[1]-t.r-n/2),width:t.r*2+n,height:t.r*2+n};return t.__rect}}]);return t}(y.Shape);t.SmicIsogon=_;v.Zondy.LevelRenderer.SmicIsogon=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicRing=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(7);var h=g(c);var p=r(4);var d=g(p);var v=r(0);var y=r(16);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicring";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;t.arc(r.x+n[0],r.y+n[1],r.r,0,Math.PI*2,false);t.moveTo(r.x+n[0]+r.r0,r.y+n[1]);t.arc(r.x+n[0],r.y+n[1],r.r0,0,Math.PI*2,true);return}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-t.r-n/2),y:Math.round(t.y+r[1]-t.r-n/2),width:t.r*2+n,height:t.r*2+n};return t.__rect}}]);return t}(y.Shape);t.SmicRing=m;v.Zondy.LevelRenderer.SmicRing=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SmicStar=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(0);var y=r(16);var g=r(20);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,d.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.type="smicstar";if(!r.refOriginalPosition||r.refOriginalPosition.length!==2){r.refOriginalPosition=[0,0]}r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar";return r}(0,u.default)(t,[{key:"destroy",value:function e(){this.type=null;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function e(t,r){if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var n=this.refOriginalPosition;var i=r.n;if(!i||i<2){return}var o=g.SUtil.Util_math.sin;var a=g.SUtil.Util_math.cos;var s=Math.PI;var u=r.x+n[0];var l=r.y+n[1];var f=r.r;var c=r.r0;if(c==null){c=i>4?f*a(2*s/i)/a(s/i):f/3}var h=s/i;var p=-s/2;var d=u+f*a(p);var v=l+f*o(p);p+=h;var y=r.pointList=[];y.push([d,v]);for(var m=0,_=i*2-1,b;m<_;m++){b=m%2===0?c:f;y.push([u+b*a(p),l+b*o(p)]);p+=h}y.push([d,v]);t.moveTo(y[0][0],y[0][1]);for(var S=0;S<y.length;S++){t.lineTo(y[S][0],y[S][1])}t.closePath();return}},{key:"getRect",value:function e(t){if(t.__rect){return t.__rect}if(!this.refOriginalPosition||this.refOriginalPosition.length!==2){this.refOriginalPosition=[0,0]}var r=this.refOriginalPosition;var n;if(t.brushType==="stroke"||t.brushType==="fill"){n=t.lineWidth||1}else{n=0}t.__rect={x:Math.round(t.x+r[0]-t.r-n/2),y:Math.round(t.y+r[1]-t.r-n/2),width:t.r*2+n,height:t.r*2+n};return t.__rect}}]);return t}(y.Shape);t.SmicStar=_;v.Zondy.LevelRenderer.SmicStar=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.randomThemeLayer=t.RandomThemeLayer=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(4);var h=b(c);var p=r(11);var d=b(p);var v=r(0);var y=r(6);var g=r(69);var m=r(52);var _=r(13);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(t,[{key:"getColor",value:function e(){var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=t.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function e(t){var r=this.getStyleByData(t);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=_.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(t,this,_.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function e(){var t=this;var r=(0,y.copyAttributesWithClip)({},t.style);r.fillColor=t.getColor();return r}}]);return t}(g.GeoFeatureThemeLayer);t.RandomThemeLayer=S;var x=t.randomThemeLayer=function e(t,r){return new S(t,r)};v.Zondy.Map.randomThemeLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.simpleThemeLayer=t.SimpleThemeLayer=undefined;var n=r(2);var i=b(n);var o=r(1);var a=b(o);var s=r(5);var u=b(s);var l=r(3);var f=b(l);var c=r(4);var h=b(c);var p=r(11);var d=b(p);var v=r(0);var y=r(6);var g=r(69);var m=r(52);var _=r(13);function b(e){return e&&e.__esModule?e:{default:e}}var S=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.style=r.style;n.isHoverAble=r.isHoverAble;n.highlightStyle=r.highlightStyle;n.themeField=r.themeField;n.styleGroups=r.styleGroups;return n}(0,u.default)(t,[{key:"getColor",value:function e(){var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f";var r=t.split(",");var n="#";for(var i=0;i<6;i++){n+=r[Math.floor(Math.random()*16)]}return n}},{key:"createThematicFeature",value:function e(t){var r=this.getStyleByData(t);var n={};n.nodesClipPixel=this.nodesClipPixel;n.isHoverAble=this.isHoverAble;n.isMultiHover=this.isMultiHover;n.isClickAble=this.isClickAble;n.highlightStyle=_.ShapeFactory.transformStyle(this.highlightStyle);var i=new m.ThemeVector(t,this,_.ShapeFactory.transformStyle(r),n);for(var o=0;o<i.shapes.length;o++){this.renderer.addShape(i.shapes[o])}return i}},{key:"getStyleByData",value:function e(){var t=this;var r=(0,y.copyAttributesWithClip)({},t.style);if(r.fillColor==null){r.fillColor=t.getColor()}t.style=r;return r}}]);return t}(g.GeoFeatureThemeLayer);t.SimpleThemeLayer=S;var x=t.simpleThemeLayer=function e(t,r){return new S(t,r)};v.Zondy.Map.simpleThemeLayer=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.rankSymbolThemeLayer=t.RankSymbolThemeLayer=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(4);var h=m(c);var p=r(11);var d=m(p);var v=r(0);var y=r(43);var g=r(230);function m(e){return e&&e.__esModule?e:{default:e}}var _=function(e){(0,h.default)(t,e);function t(e,r,n){(0,a.default)(this,t);var o=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));o.symbolType=r;o.symbolSetting=n.symbolSetting;o.themeField=n.themeField;o.options={calGravity:n.calGravity||true};return o}(0,u.default)(t,[{key:"setSymbolType",value:function e(t){this.symbolType=t;this.redraw()}},{key:"createThematicFeature",value:function e(t){var r;if(y.Theme[this.symbolType]&&this.themeField&&this.symbolSetting){r=new y.Theme[this.symbolType](t,this,[this.themeField],this.symbolSetting,null,this.options)}if(!r){return false}r.assembleShapes();return r}}]);return t}(g.GraphThemeLayer);t.RankSymbolThemeLayer=_;var b=t.rankSymbolThemeLayer=function e(t,r,n){return new _(t,r,n)};v.Zondy.Map.rankSymbolThemeLayer=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ThemeStyle=undefined;var n=r(1);var i=s(n);var o=r(0);var a=r(6);function s(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){(0,i.default)(this,e);t=t||{};this.fill=true;this.fillColor="#000000";this.fillOpacity=1;this.stroke=false;this.strokeColor="#000000";this.strokeOpacity=1;this.strokeWidth=1;this.strokeLinecap="butt";this.strokeLineJoin="miter";this.strokeDashstyle="solid";this.pointRadius=6;this.shadowBlur=0;this.shadowColor="#000000";this.shadowOffsetX=0;this.shadowOffsetY=0;this.label="";this.labelRect=false;this.fontColor="";this.fontSize=12;this.fontStyle="normal";this.fontVariant="normal";this.fontWeight="normal";this.fontFamily="arial,sans-serif";this.labelPosition="top";this.labelAlign="center";this.labelBaseline="middle";this.labelXOffset=0;this.labelYOffset=0;(0,a.extend)(this,t)};t.ThemeStyle=u;o.Zondy.Map.ThemeStyle=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.rangeTheme3DLayer=t.RangeTheme3DLayer=undefined;var n=r(2);var i=y(n);var o=r(1);var a=y(o);var s=r(5);var u=y(s);var l=r(3);var f=y(l);var c=r(4);var h=y(c);var p=r(0);var d=r(134);var v=r(6);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.heightStops=null;n.colorStops=null;n.base=null;n.legendRatio=1;(0,v.extend)(n,r);return n}(0,u.default)(t,[{key:"getLayerStyleOptions",value:function e(){var t=this.opacity==null?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var r=/^[0-9]+.?[0-9]*$/;var n={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:r.test(this.base)?this.base:1},"fill-extrusion-opacity":t};if(this.heightStops){n["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:r.test(this.base)?this.base:1}}else if(this.height){n["fill-extrusion-height"]=this.height}else{n["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"}}if(this.baseHeightField){n["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return n}},{key:"getHighlightStyleOptions",value:function e(){var t=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";return{"fill-extrusion-color":t,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function e(){var t=this.colorStops&&this.colorStops.length||0;var r="<ul>";var n;for(n=0;n<t;n++){var i=this.colorStops[n][0];var o=this._getWrapperText(i);if(n===t-1){o="> "+o}else{var a=this._getWrapperText(this.colorStops[n+1][0]);o=o+"-"+a}var s=this.colorStops[n][1];r+="<li><span style='background-color:"+s+";'></span><span>"+o+"</span></li>"}r+="</ul>";return r}},{key:"_getWrapperText",value:function e(t){var r=t*(this.legendRatio==null?1:parseFloat(this.legendRatio));var n=parseFloat(r);if(n%1e6<=1e6){return n.toString()}return parseInt(n/1e3)+"k"}}]);return t}(d.Theme3DLayer);t.RangeTheme3DLayer=g;var m=t.rangeTheme3DLayer=function e(t,r){return new g(t,r)};p.Zondy.Map.rangeTheme3DLayer=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.uniqueTheme3DLayer=t.UniqueTheme3DLayer=undefined;var n=r(2);var i=g(n);var o=r(1);var a=g(o);var s=r(5);var u=g(s);var l=r(3);var f=g(l);var c=r(4);var h=g(c);var p=r(11);var d=r(0);var v=r(134);var y=r(6);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){(0,h.default)(t,e);function t(e,r){(0,a.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r));n.colorStops=null;n.heightStops=null;(0,y.extend)(n,r);return n}(0,u.default)(t,[{key:"getLayerStyleOptions",value:function e(){var t=this.opacity==null?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":t};if(this.height!=null){r["fill-extrusion-height"]=this.height}else{r["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical",stops:this.heightStops}}if(this.baseHeightField){r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}}return r}},{key:"getHighlightStyleOptions",value:function e(){var t=this.highlight&&this.highlight.color!=null?this.highlight.color:"#ADA91E";var r={"fill-extrusion-color":t,"fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};if(this.height!=null){r["fill-extrusion-height"]=this.height||0}return r}},{key:"_createLegendElement",value:function e(){var t="<ul>";var r=this.colorStops&&this.colorStops.length||0;for(var n=0;n<r;n++){var i=this.colorStops[n][0];var o=this.colorStops[n][1];t+="<li><span style='background-color:"+o+";'></span><span>"+i+"</span></li>"}t+="</ul>";return t}}]);return t}(v.Theme3DLayer);t.UniqueTheme3DLayer=m;var _=t.uniqueTheme3DLayer=function e(t,r){return new m(t,r)};d.Zondy.Map.uniqueTheme3DLayer=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisVectorTileService=t.PostgisTableService=t.PostgisQueryService=t.PostgisCustomQueryService=t.PostgisCatlogService=undefined;var n=r(417);var i=r(418);var o=r(419);var a=r(420);var s=r(421);t.PostgisCatlogService=n.PostgisCatlogService;t.PostgisCustomQueryService=i.PostgisCustomQueryService;t.PostgisQueryService=o.PostgisQueryService;t.PostgisTableService=a.PostgisTableService;t.PostgisVectorTileService=s.PostgisVectorTileService;var u={PostgisCatlogService:n.PostgisCatlogService,PostgisCustomQueryService:i.PostgisCustomQueryService,PostgisQueryService:o.PostgisQueryService,PostgisTableService:a.PostgisTableService,PostgisVectorTileService:s.PostgisVectorTileService};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisCatlogService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(53);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.PostgisCatlogService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/datastore/rest/catalog/pg/services/";r.path=e.path;r.classify=e.classify;r.keyWords=e.keyWords;r.fixOption(e);return r}(0,u.default)(t,[{key:"fixOption",value:function e(t){this.option={classify:t.classify,keyWords:t.keyWords,pageSize:t.pageSize,pageNo:t.pageNo}}},{key:"query",value:function e(t,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var a=this.getFullUrl(n,o);this.get(a,t,r)}}]);return t}(d.DataStoreService);t.default=y;p.Zondy.DataStore.PostGIS.PostgisCatlogService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisCustomQueryService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(53);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.PostgisCustomQueryService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/datastore/rest/dataset/pg/executequery/";r.path=e.path;r.queryBody=e.queryBody;r.fixOption(e);return r}(0,u.default)(t,[{key:"fixOption",value:function e(t){this.option={queryBody:t.queryBody}}},{key:"query",value:function e(t,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var a=this.getFullUrl(n,o);this.get(a,t,r)}}]);return t}(d.DataStoreService);t.default=y;p.Zondy.DataStore.PostGIS.PostgisCustomQueryService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisQueryService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(53);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.PostgisQueryService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/datastore/rest/dataset/pg/query/";r.path=e.path;r.geometry=e.geometry;r.geoFormat=e.geoFormat;r.sref=e.sref;r.filter=e.filter;r.fields=e.fields;r.segments=e.segments;r.statisticFields=e.statisticFields;r.includeProperites=e.includeProperites;r.includeGeometry=e.includeGeometry;r.fixOption(e);return r}(0,u.default)(t,[{key:"fixOption",value:function e(t){this.option={geometry:t.geometry,geoFormat:t.geoFormat,sref:t.sref,filter:t.filter,fields:t.fields,segments:t.segments,statisticFields:t.statisticFields,includeProperites:t.includeProperites,propertyNames:t.propertyNames,includeGeometry:t.includeGeometry,pageSize:t.pageSize,pageNo:t.pageNo}}},{key:"query",value:function e(t,r){var n=this.serviceUrl,i=this.path,o=this.option,a=this.geometry,s=this.geoFormat;n+=i;var u=this.getFullUrl(n,o);this.get(u,t,r)}},{key:"queryByWkt",value:function e(t){}},{key:"queryByGeojson",value:function e(t){}},{key:"queryByCircle",value:function e(t){}},{key:"queryByRect",value:function e(t){}}]);return t}(d.DataStoreService);t.default=y;p.Zondy.DataStore.PostGIS.PostgisQueryService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisTableService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(53);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.PostgisTableService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/datastore/rest/dataset/pg/schema/";r.path=e.path;r.tableNames=e.tableNames;r.fixOption(e);return r}(0,u.default)(t,[{key:"fixOption",value:function e(t){this.option={tableNames:t.tableNames}}},{key:"query",value:function e(t,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var a=this.getFullUrl(n,o);this.get(a,t,r)}}]);return t}(d.DataStoreService);t.default=y;p.Zondy.DataStore.PostGIS.PostgisTableService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PostgisVectorTileService=undefined;var n=r(2);var i=v(n);var o=r(1);var a=v(o);var s=r(5);var u=v(s);var l=r(3);var f=v(l);var c=r(4);var h=v(c);var p=r(0);var d=r(53);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.PostgisVectorTileService=function(e){(0,h.default)(t,e);function t(e){(0,a.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));r.serviceUrl="/datastore/rest/dataset/pg/vectortile/";r.path=e.path;r.version=e.version;r.tileMatrix=e.tileMatrix;r.tileRow=e.tileRow;r.tileCol=e.tileCol;r.fixOption(e);return r}(0,u.default)(t,[{key:"fixOption",value:function e(t){this.option={version:t.version,tileMatrix:t.tileMatrix,tileRow:t.tileRow,tileCol:t.tileCol}}},{key:"getWmtsUrl",value:function e(){var t=this.serviceUrl,r=this.path,n=this.option;t+=r;var i=this.getFullUrl(t,n);i=decodeURI(i);return i}},{key:"query",value:function e(t,r){var n=this.serviceUrl,i=this.path,o=this.option;n+=i;var a=this.getFullUrl(n,o);this.get(a,t,r)}}]);return t}(d.DataStoreService);t.default=y;p.Zondy.DataStore.PostGIS.PostgisVectorTileService=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeckglLayer=t.MapvLayer=t.EchartsLayer=undefined;var n=r(423);var i=r(425);var o=r(428);t.EchartsLayer=n.EchartsLayer;t.MapvLayer=i.MapvLayer;t.DeckglLayer=o.DeckglLayer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EchartsLayer=undefined;var n=r(1);var i=h(n);var o=r(5);var a=h(o);var s=r(11);var u=h(s);var l=r(231);var f=h(l);r(77);var c=r(424);function h(e){return e&&e.__esModule?e:{default:e}}var p=t.EchartsLayer=function(){function e(t,r){(0,i.default)(this,e);this.map=t;this.options=r;this.layerId=r.layerId||"echartlayerdefaultid";this.layerClass=r.classId||"echartlayerdefaultclass";this.initDevicePixelRatio();this.mapContainer=t.getCanvasContainer();this.canvas=this._createCanvas();this.mapContainer.appendChild(this.canvas);this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";this.chart=f.default.init(this.canvas);this.visible=true;this.initEcharts();this._resizeCanvas();return this}(0,a.default)(e,[{key:"initDevicePixelRatio",value:function e(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"initEcharts",value:function e(){f.default.mapboxglMap=this.map;f.default.registerCoordinateSystem("mapboxgl",c.MapCoordSys);f.default.extendComponentModel({type:"mapboxgl",getBMap:function e(){return this.__mapboxgl},defaultOption:{roam:false}});f.default.registerAction({type:"MapboxGLRoma",event:"MapboxGLRoma",update:"updateLayout"},function(e,t){});return this}},{key:"_createCanvas",value:function e(){var t=document.createElement("div");t.id=this.layerId;t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.width=parseInt(this.map.getCanvas().style.width);t.height=parseInt(this.map.getCanvas().style.height);t.style.width=this.map.getCanvas().style.width;t.style.height=this.map.getCanvas().style.height;t.setAttribute("id",this.layerId);t.setAttribute("class",this.layerClass);return t}},{key:"_resizeCanvas",value:function e(){var t=this;window.onresize=function(){var e=t.canvas;var r=t.map;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.width=r.getCanvas().style.width;e.style.height=r.getCanvas().style.height;e.width=parseInt(r.getCanvas().style.width);e.height=parseInt(r.getCanvas().style.height);t.chart.resize()}}},{key:"addTo",value:function e(t){var r=this;f.default.extendComponentView({type:"mapboxgl",render:function e(t,n,i){var o=true;var a=f.default.mapboxglMap;var s=i.getZr().painter.getViewportRoot();var u=t.coordinateSystem;var l=function e(n,a){if(o||!r.visible){return}var l=document.getElementsByClassName("mapboxgl-map")[0];var f=[-parseInt(l.style.left,10)||0,-parseInt(l.style.top,10)||0];s.style.left=f[0]+"px";s.style.top=f[1]+"px";u.setMapOffset(f);t.__mapOffset=f;i.dispatchAction({type:"MapboxGLRoma"})};function c(){if(o||!r.visible){return}i.dispatchAction({type:"MapboxGLRoma"})}a.off("move",this._oldMoveHandler);a.off("zoomend",this._oldZoomEndHandler);a.on("move",l);a.on("zoomend",c);this._oldMoveHandler=l;this._oldZoomEndHandler=c;var h=t.get("roam");if(h&&h!=="scale"){}else{}if(h&&h!=="move"){}else{}o=false}});this.chart.setOption(this.options);return this}},{key:"_visible",value:function e(){this.visible=true;this.canvas.style.visibility="visible"}},{key:"_unvisible",value:function e(){this.visible=false;this.canvas.style.visibility="hidden"}},{key:"show",value:function e(){this._visible()}},{key:"hide",value:function e(){this._unvisible()}},{key:"remove",value:function e(){var t=this;this.map._listeners.move.forEach(function(e){if(e.name==="moveHandler"){t.map.off("move",e)}});this.map._listeners.move.forEach(function(e){if(e.name==="zoomEndHandler"){t.map.off("zoomend",e)}});this.chart.clear();if(this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);this.map=undefined;return this}},{key:"update",value:function e(t){this.chart.setOption(t)}}]);return e}();u.default.zondy.EchartsLayer=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapCoordSys=u;var n=r(11);var i=s(n);var o=r(231);var a=s(o);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){this._MapboxGLMap=e;this.dimensions=["lng","lat"];this._mapOffset=[0,0];this._api=t}u.prototype.dimensions=["lng","lat"];u.prototype.setMapOffset=function(e){this._mapOffset=e};u.prototype.getBMap=function(){return this._MapboxGLMap};u.prototype.dataToPoint=function(e){var t=this._MapboxGLMap.project(e);var r=this._mapOffset;return[t.x-r[0],t.y-r[1]]};u.prototype.pointToData=function(e){var t=this._mapOffset;var e=this._MapboxGLMap.project([e[0]+t[0],e[1]+t[1]]);return[e.lng,e.lat]};u.prototype.getViewRect=function(){var e=this._api;return new a.default.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())};u.prototype.getRoamTransform=function(){return a.default.matrix.create()};u.prototype.prepareCustoms=function(e){var t=a.default.util;var r=this.getViewRect();return{coordSys:{type:"mapboxgl",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(n,this)}};function n(e,r){r=r||[0,0];return t.map([0,1],function(t){var n=r[t];var i=e[t]/2;var o=[];var a=[];o[t]=n-i;a[t]=n+i;o[1-t]=a[1-t]=r[1-t];return Math.abs(this.dataToPoint(o)[t]-this.dataToPoint(a)[t])},this)}};u.dimensions=u.prototype.dimensions;u.create=function(e,t){var r;e.eachComponent("mapboxgl",function(e){var n=t.getZr().painter.getViewportRoot();var i=a.default.mapboxglMap;r=new u(i,t);r.setMapOffset(e.__mapOffset||[0,0]);e.coordinateSystem=r});e.eachSeries(function(e){if(e.get("coordinateSystem")==="mapboxgl"){e.coordinateSystem=r}})};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapvLayer=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(11);var u=f(s);r(77);var l=r(426);function f(e){return e&&e.__esModule?e:{default:e}}var c=t.MapvLayer=function(){function e(t,r,n){(0,i.default)(this,e);this.map=t;this.layerID=n.layerID;delete n["layerID"];this.mapvBaseLayer=new l.MapvBaseLayer(t,r,n,this);this.mapVOptions=n;this.initDevicePixelRatio();this.canvas=this._createCanvas();this.render=this.render.bind(this);this.bindEvent();this.mapContainer=t.getCanvasContainer();this.mapContainer.appendChild(this.canvas);this._reset()}(0,a.default)(e,[{key:"initDevicePixelRatio",value:function e(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"bindEvent",value:function e(){var t=this.map;this.innerMoveStart=this.moveStartEvent.bind(this);this.innerMoveEnd=this.moveEndEvent.bind(this);this.innnerZoomStart=this.zoomStartEvent.bind(this);this.innnerZoomEnd=this.zoomEndEvent.bind(this);this.innnerRotateStart=this.rotateStartEvent.bind(this);this.innnerRotateEnd=this.rotateEndEvent.bind(this);this.innerResize=this.resizeEvent.bind(this);this.innerRemove=this.removeEvent.bind(this);t.on("resize",this.innerResize);t.on("zoomstart",this.innnerZoomStart);t.on("zoomend",this.innnerZoomEnd);t.on("rotatestart",this.innnerRotateStart);t.on("rotateend",this.innnerRotateEnd);t.on("movestart",this.innerMoveStart);t.on("moveend",this.innerMoveEnd);this.map.on("remove",this.innerRemove)}},{key:"unbindEvent",value:function e(){var t=this.map;t.off("resize",this.innerResize);t.off("zoomstart",this.innnerZoomStart);t.off("zoomend",this.innnerZoomEnd);t.off("rotatestart",this.innnerRotateStart);t.off("rotateend",this.innnerRotateEnd);t.off("movestart",this.innerMoveStart);t.off("moveend",this.innerMoveEnd)}},{key:"moveStartEvent",value:function e(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"moveEndEvent",value:function e(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"zoomStartEvent",value:function e(){this._unvisiable()}},{key:"zoomEndEvent",value:function e(){this._unvisiable()}},{key:"rotateStartEvent",value:function e(){this.mapvBaseLayer.animatorMovestartEvent();this._unvisiable()}},{key:"rotateEndEvent",value:function e(){this.mapvBaseLayer.animatorMoveendEvent();this._reset();this._visiable()}},{key:"resizeEvent",value:function e(){this._reset();this._visiable()}},{key:"removeEvent",value:function e(){this.mapContainer.removeChild(this.canvas)}},{key:"addData",value:function e(t,r){this.mapvBaseLayer.addData(t,r)}},{key:"updateData",value:function e(t,r){this.mapvBaseLayer.updateData(t,r)}},{key:"getData",value:function e(){if(this.mapvBaseLayer){this.dataSet=this.mapvBaseLayer.getData()}return this.dataSet}},{key:"removeData",value:function e(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function e(){this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function e(){this.canvas.style.display="block";return this}},{key:"_unvisiable",value:function e(){this.canvas.style.display="none";return this}},{key:"_createCanvas",value:function e(){var t=document.createElement("canvas");var r=this.devicePixelRatio;t.id=this.layerID;t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.width=parseInt(this.map.getCanvas().style.width)*r;t.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){t.getContext("2d").scale(r,r)}t.style.width=this.map.getCanvas().style.width;t.style.height=this.map.getCanvas().style.height;return t}},{key:"_reset",value:function e(){if(this.canvas==null){return}this.resizeCanvas();this.fixPosition();this.onResize();this.render()}},{key:"draw",value:function e(){return this._reset()}},{key:"show",value:function e(){this._visiable()}},{key:"hide",value:function e(){this._unvisiable()}},{key:"update",value:function e(t){if(t==undefined){return}this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function e(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";if(this.canvas==undefined||this.canvas==null)return;var t=this.canvas;var r=this.devicePixelRatio;t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.width=parseInt(this.map.getCanvas().style.width)*r;t.height=parseInt(this.map.getCanvas().style.height)*r;if(!this.mapVOptions.context||this.mapVOptions.context=="2d"){t.getContext("2d").scale(r,r)}}},{key:"fixPosition",value:function e(){}},{key:"onResize",value:function e(){}},{key:"originPosition",value:function e(){this.originPitch=this.map.getPitch();this.originBearing=this.map.getBearing();var t=this.map.project(new u.default.LngLat(0,0));this.originX=t.x;this.originY=t.y}},{key:"render",value:function e(){if(this.mapvBaseLayer==undefined)return;this.mapvBaseLayer._canvasUpdate()}},{key:"moveTo",value:function e(t,r){var n=document.getElementById(this.layerID);r=r!==undefined?r:true;if(r){var i=document.getElementById(t);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(t);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"remove",value:function e(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}},{key:"destroy",value:function e(){this.removeAllData();this.unbindEvent();this.mapContainer.removeChild(this.canvas);this.disposeFlag=true}}]);return e}();u.default.zondy.MapvLayer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MapvBaseLayer=undefined;var n=r(2);var i=m(n);var o=r(1);var a=m(o);var s=r(5);var u=m(s);var l=r(3);var f=m(l);var c=r(7);var h=m(c);var p=r(4);var d=m(p);var v=r(427);var y=r(11);var g=m(y);function m(e){return e&&e.__esModule?e:{default:e}}var _=v.baiduMapLayer?v.baiduMapLayer.__proto__:Function;var b=t.MapvBaseLayer=function(e){(0,d.default)(t,e);function t(e,r,n,o){(0,a.default)(this,t);var s=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));if(!_)return(0,f.default)(s);s.map=e;s.dataSet=r;var u=s;var l=null;n=n||{};u.init(n);u.argCheck(n);s.initDevicePixelRatio();s.canvasLayer=o;s.stopAniamation=false;s.animation=n.animation;s.mousemoveEvent=s.mousemoveEvent.bind(s);s.bindEvent();return s}(0,u.default)(t,[{key:"initDevicePixelRatio",value:function e(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function e(r){var n=r.point;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"clickEvent",this).call(this,n,r)}},{key:"mousemoveEvent",value:function e(r){var n=r.point;(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"mousemoveEvent",this).call(this,n,r)}},{key:"addAnimatorEvent",value:function e(){}},{key:"animatorMovestartEvent",value:function e(){var t=this.options.animation;if(this.isEnabledTime()&&this.animator){this.steps.step=t.stepsRange.start}}},{key:"animatorMoveendEvent",value:function e(){if(this.isEnabledTime()&&this.animator){}}},{key:"bindEvent",value:function e(){var t=this.map;if(this.options.methods){if(this.options.methods.click){t.on("click",this.clickEvent)}if(this.options.methods.mousemove){t.on("mousemove",this.mousemoveEvent)}}}},{key:"unbindEvent",value:function e(){var t=this.map;if(this.options.methods){if(this.options.methods.click){t.off("click",this.clickEvent)}if(this.options.methods.mousemove){t.off("mousemove",this.mousemoveEvent)}}}},{key:"getContext",value:function e(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function e(t){var r=this;r.options=t;this.initDataRange(t);this.context=r.options.context||"2d";if(r.options.zIndex){this.canvasLayer&&this.canvasLayer.setZIndex(r.options.zIndex)}this.initAnimator()}},{key:"_canvasUpdate",value:function e(t){var r=this.map;if(!this.canvasLayer||this.stopAniamation||this.canvasLayer.disposeFlag){return}var n=this;var i=n.options.animation;var o=this.getContext();if(n.isEnabledTime()){if(t===undefined){this.clear(o);return}if(this.context==="2d"){o.save();o.globalCompositeOperation="destination-out";o.fillStyle="rgba(0, 0, 0, .1)";o.fillRect(0,0,o.canvas.width,o.canvas.height);o.restore()}}else{this.clear(o)}if(this.context==="2d"){for(var a in n.options){o[a]=n.options[a]}}else{o.clear(o.COLOR_BUFFER_BIT)}if(n.options.minZoom&&r.getZoom()<n.options.minZoom||n.options.maxZoom&&r.getZoom()>n.options.maxZoom){return}var s={transferCoordinate:function e(t){var n=r.project(new g.default.LngLat(t[0],t[1]));return[n.x,n.y]}};if(t!==undefined){s.filter=function(e){var r=i.trails||10;if(t&&e.time>t-r&&e.time<t){return true}else{return false}}}var u=n.dataSet.get(s);this.processData(u);if(n.options.unit=="m"&&n.options.size){n.options._size=n.options.size}else{n.options._size=n.options.size}var l=r.project(new g.default.LngLat(0,0));this.drawContext(o,new v.DataSet(u),n.options,l);n.options.updateCallback&&n.options.updateCallback(t)}},{key:"updateData",value:function e(r,n){var o=r;if(o&&o.get){o=o.get()}if(o!=undefined){this.dataSet.set(o)}(0,h.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function e(t,r){var n=t;if(t&&t.get){n=t.get()}this.dataSet.add(n);this.update({options:r})}},{key:"getData",value:function e(){return this.dataSet}},{key:"removeData",value:function e(t){if(!this.dataSet){return}var r=this.dataSet.get({filter:function e(r){return t!=null&&typeof t==="function"?!t(r):true}});this.dataSet.set(r);this.update({options:null})}},{key:"clearData",value:function e(){this.dataSet&&this.dataSet.clear();this.update({options:null})}},{key:"draw",value:function e(){this.canvasLayer.draw()}},{key:"clear",value:function e(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]);return t}(_)},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeckglLayer=undefined;var n=r(1);var i=f(n);var o=r(5);var a=f(o);var s=r(11);var u=f(s);r(77);var l=r(429);function f(e){return e&&e.__esModule?e:{default:e}}var c=t.DeckglLayer=function(){function e(t,r){(0,i.default)(this,e);this.layerTypeID=t;this.data=[].concat(r.data);this.props=r.props?r.props:{};this.callback=r.callback?r.callback:{};this.id=r.layerId?r.layerId:"graphicLayer_"+this.layerTypeID+"_";this.visibility=true}(0,a.default)(e,[{key:"onAdd",value:function e(t){this.map=t;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(t.getCRS&&t.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"addTo",value:function e(t){this.map=t;if(this.canvas){this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas);return this}if(t.getCRS&&t.getCRS()!==u.default.CRS.EPSG3857){this.coordinateSystem=3;this.isGeographicCoordinateSystem=true}this._initContainer();this._createLayerByLayerTypeID();var r=this._getState();var n={};for(var i in r){n[i]=r[i]}n.layers=[this.layer];n.canvas=this.canvas;this.deckGL=new window.DeckGL.experimental.DeckGLJS(n);this.map.on("render",this._moveEvent.bind(this));this.map.on("resize",this._resizeEvent.bind(this));this._draw();return this}},{key:"remove",value:function e(){this.map.off("render",this._moveEvent.bind(this));this.map.off("resize",this._resizeEvent.bind(this));this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function e(){this.remove();this.clear()}},{key:"moveTo",value:function e(t,r){var n=document.getElementById(this.id);r=r!==undefined?r:true;if(r){var i=document.getElementById(t);if(n&&i){i.parentNode.insertBefore(n,i)}return}var o=document.getElementById(t);if(n){if(o.nextSibling){o.parentNode.insertBefore(n,o.nextSibling);return}o.parentNode.appendChild(n)}}},{key:"setVisibility",value:function e(t){if(this.canvas&&t!==this.visibility){this.visibility=t;this.canvas.style.display=t?"block":"none"}}},{key:"setStyle",value:function e(t){l.Util.extend(this.props,t);this._createLayerByLayerTypeID();this.update()}},{key:"setData",value:function e(t){this.data=this.data||[];this.data.length=0;var r=!l.Util.isArray(t)?[t]:[].concat(t);if(!this.layer.props.data){this.layer.props.data=[]}this.layer.props.data.length=0;for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.data=this.layer.props.data;this.update()}},{key:"addData",value:function e(t){this.data=this.data||[];var r=!l.Util.isArray(t)?[t]:[].concat(t);if(!this.layer.props.data){this.layer.props.data=[]}for(var n=0;n<r.length;n++){this.layer.props.data.push(r[n])}this.update()}},{key:"update",value:function e(){if(this.layer.lifecycle!=="Awaiting state"){var t={dataChanged:true,propsChanged:true,viewportChanged:true,updateTriggersChanged:true};this.layer.setChangeFlags(t)}this._draw()}},{key:"clear",value:function e(){this.removeData();this.deckGL.finalize()}},{key:"removeData",value:function e(){this.data.length=0;if(this.layer.props.data){this.layer.props.data.length=0}this.update()}},{key:"_draw",value:function e(){var t=this._getState();t.layers=[this.layer];t.canvas=this.canvas;this.deckGL.setProps(t)}},{key:"_getState",value:function e(){var t=this.map;var r=parseInt(this.canvas.style.width);var n=parseInt(this.canvas.style.height);var i=t.getCenter();var o=i.lng;var a=i.lat;var s=t.getZoom();var l=t.getMaxZoom();var f=t.getPitch();var c=t.getBearing();var h={width:r,height:n,longitude:o,latitude:a,zoom:s,maxZoom:l,pitch:f,bearing:c};var p={};for(var d in h){p[d]=h[d]}for(var v in this.props){p[v]=this.props[v]}if(t.getCRS&&t.getCRS()!==u.default.CRS.EPSG3857){p.coordinateSystem=this.coordinateSystem;p.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem}p.data=this.data;return p}},{key:"_createLayerByLayerTypeID",value:function e(){this.props.data=this.data;this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem;this.props.coordinateSystem=this.coordinateSystem;this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover);if(this.layerTypeID==="scatter-plot"){this.props.id="scatter-plot";this._createScatterPlotLayer()}else if(this.layerTypeID==="path-layer"){this.props.id="path-layer";this._createPathLayer()}else if(this.layerTypeID==="polygon-layer"){this.props.id="polygon-layer";this._createPolygonLayer()}else if(this.layerTypeID==="arc-layer"){this.props.id="arc-layer";this._createArcLineLayer()}else if(this.layerTypeID==="hexagon-layer"){this.props.id="hexagon-layer";this._createHexagonLayer()}else{throw new Error(this.layerTypeID+" does not support")}}},{key:"_createScatterPlotLayer",value:function e(){var t=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e){return[0,0,0]}var t=e.getLngLat();return t&&[t.lng,t.lat,0]};if(this.callback.getColor){this.props.getColor=this.callback.getColor?this.callback.getColor:function(e){var r=e&&e.getStyle();return r&&r.color||t.props.color}}if(this.callback.getRadius){this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(e){var r=e&&e.getStyle();return r&&r.radius||t.props.radius}}if(this.props.color||this.props.radius){this.props.updateTriggers={};if(this.props.radius){this.props.updateTriggers.getRadius=[this.props.radius]}if(this.props.color){this.props.updateTriggers.getColor=[this.props.color]}}this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function e(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates};if(this.callback.getColor){this.props.getColor=this.callback.getColor}if(this.callback.getWidth){this.props.getWidth=this.callback.getWidth}if(this.callback.getDashArray){this.props.getDashArray=this.callback.getDashArray}this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function e(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates};if(this.callback.getElevation){this.props.getElevation=this.callback.getElevation}if(this.callback.getFillColor){this.props.getFillColor=this.callback.getFillColor}if(this.callback.getLineColor){this.props.getLineColor=this.callback.getLineColor}if(this.callback.getLineWidth){this.props.getLineWidth=this.callback.getLineWidth}this.props.updateTriggers={};this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128];this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function e(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){if(!e){return[0,0,0]}return e.geometry.coordinates[0]};this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){if(!e){return[0,0,0]}return e.geometry.coordinates[1]};if(this.callback.getStrokeWidth){this.props.getStrokeWidth=this.callback.getStrokeWidth}if(this.callback.getSourceColor){this.props.getSourceColor=this.callback.getSourceColor}if(this.callback.getTargetColor){this.props.getTargetColor=this.callback.getTargetColor}this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function e(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e){return[0,0,0]}return e.geometry.coordinates};if(this.callback.getColorValue){this.props.getColorValue=this.callback.getColorValue}if(this.callback.getElevationValue){this.props.getElevationValue=this.callback.getElevationValue}this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function e(){this.canvas=this._createCanvas();this.mapContainer=this.map.getCanvasContainer();this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function e(){var t=document.createElement("canvas");t.id=this.id;t.style.position="absolute";t.style.top=0+"px";t.style.left=0+"px";t.style.cursor="";var r=this.map;t.width=parseInt(r.getCanvas().style.width);t.height=parseInt(r.getCanvas().style.height);t.style.width=r.getCanvas().style.width;t.style.height=r.getCanvas().style.height;return t}},{key:"_moveEvent",value:function e(){this._draw()}},{key:"_resizeEvent",value:function e(){var t=this.canvas;var r=this.map;t.width=parseInt(r.getCanvas().style.width);t.height=parseInt(r.getCanvas().style.height);t.style.width=r.getCanvas().style.width;t.style.height=r.getCanvas().style.height;this._draw()}}]);return e}();u.default.zondy.DeckglLayer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Util=undefined;var n=r(92);var i=c(n);var o=r(1);var a=c(o);var s=r(5);var u=c(s);var l=r(11);var f=c(l);r(77);function c(e){return e&&e.__esModule?e:{default:e}}var h=t.Util=function(){function e(){(0,a.default)(this,e)}(0,u.default)(e,null,[{key:"isArray",value:function e(t){return Object.prototype.toString.call(t)=="[object Array]"}},{key:"toProcessingParam",value:function e(t){var r={};if(t.length<1){r=""}else{var n=[];for(var i=0;i<t.length;i++){var o={};o.x=t[i][0];o.y=t[i][1];n.push(o)}r.type="REGION";r.points=n}return r}},{key:"extend",value:function e(t){for(var r=0;r<(0,i.default)(arguments).length;r++){var n=(0,i.default)(arguments)[r];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}var o=arguments[n];if(o){for(var a=0;a<(0,i.default)(o).length;a++){var s=(0,i.default)(o)[a];if(n=="caller"||n=="callee"||n=="length"||n=="arguments"){continue}t[s]=o[s]}}}return t}},{key:"isNumber",value:function e(t){if(t===""){return false}var r=Number(t);if(r===0){return true}return!isNaN(r)}},{key:"isString",value:function e(t){return typeof t==="string"&&t.constructor===String}},{key:"newGuid",value:function e(t){var r=t||32;var n="";for(var i=1;i<r;i++){var o=Math.floor(Math.random()*16).toString(16);n+=o}return n}},{key:"hexToRgba",value:function e(t,r){var n=[],i=[];t=t.replace(/#/,"");if(t.length==3){var o=[];for(var a=0;a<3;a++){o.push(t.charAt(a)+t.charAt(a))}t=o.join("")}for(var s=0;s<6;s+=2){n[s]="0x"+t.substr(s,2);i.push(parseInt(Number(n[s])))}i.push(r);return"rgba("+i.join(",")+")"}},{key:"isMatchAdministrativeName",value:function e(t,r){if(this.isString(r)){var n=t.substr(0,2);if(n===""){n=t.substr(0,3)}return!!r.match(new RegExp(n))}return false}}]);return e}();f.default.zondy.Util=h}]);