!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=467)}([function(t,e,r){"use strict";r.r(e),r.d(e,"DOCUMENT",function(){return n}),r.d(e,"XML_SCHEMA_INSTANCE_URI",function(){return o}),r.d(e,"createElementNS",function(){return s}),r.d(e,"getAllTextContent",function(){return a}),r.d(e,"getAllTextContent_",function(){return u}),r.d(e,"isDocument",function(){return l}),r.d(e,"getAttributeNS",function(){return c}),r.d(e,"parse",function(){return h}),r.d(e,"makeArrayExtender",function(){return p}),r.d(e,"makeArrayPusher",function(){return f}),r.d(e,"makeReplacer",function(){return d}),r.d(e,"makeObjectPropertyPusher",function(){return g}),r.d(e,"makeObjectPropertySetter",function(){return y}),r.d(e,"makeChildAppender",function(){return v}),r.d(e,"makeArraySerializer",function(){return m}),r.d(e,"makeSimpleNodeFactory",function(){return _}),r.d(e,"OBJECT_PROPERTY_NODE_FACTORY",function(){return b}),r.d(e,"makeSequence",function(){return S}),r.d(e,"makeStructureNS",function(){return x}),r.d(e,"parseNode",function(){return O}),r.d(e,"pushParseAndPop",function(){return E}),r.d(e,"serialize",function(){return C}),r.d(e,"pushSerializeAndPop",function(){return T});var i=r(15),n=document.implementation.createDocument("","",null),o="http://www.w3.org/2001/XMLSchema-instance";function s(t,e){return n.createElementNS(t,e)}function a(t,e){return u(t,e,[]).join("")}function u(t,e,r){var i;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else for(i=t.firstChild;i;i=i.nextSibling)u(i,e,r);return r}function l(t){return"documentElement"in t}function c(t,e,r){return t.getAttributeNS(e,r)||""}function h(t){return(new DOMParser).parseFromString(t,"application/xml")}function p(t,e){return function(r,n){var o=t.call(void 0!==e?e:this,r,n);if(void 0!==o){var s=n[n.length-1];Object(i.c)(s,o)}}}function f(t,e){return function(r,i){var n=t.call(void 0!==e?e:this,r,i);void 0!==n&&i[i.length-1].push(n)}}function d(t,e){return function(r,i){var n=t.call(void 0!==e?e:this,r,i);void 0!==n&&(i[i.length-1]=n)}}function g(t,e,r){return function(i,n){var o=t.call(void 0!==r?r:this,i,n);if(void 0!==o){var s=n[n.length-1],a=void 0!==e?e:i.localName;(a in s?s[a]:s[a]=[]).push(o)}}}function y(t,e,r){return function(i,n){var o=t.call(void 0!==r?r:this,i,n);void 0!==o&&(n[n.length-1][void 0!==e?e:i.localName]=o)}}function v(t,e){return function(r,i,n){t.call(void 0!==e?e:this,r,i,n),n[n.length-1].node.appendChild(r)}}function m(t,e){var r,i;return function(e,n,o){if(void 0===r){r={};var s={};s[e.localName]=t,r[e.namespaceURI]=s,i=_(e.localName)}C(r,i,n,o)}}function _(t,e){var r=t;return function(t,i,n){var o=i[i.length-1].node,a=r;return void 0===a&&(a=n),s(void 0!==e?e:o.namespaceURI,a)}}var b=_();function S(t,e){for(var r=e.length,i=new Array(r),n=0;n<r;++n)i[n]=t[e[n]];return i}function x(t,e,r){var i,n,o=void 0!==r?r:{};for(i=0,n=t.length;i<n;++i)o[t[i]]=e;return o}function O(t,e,r,i){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=t[n.namespaceURI];if(void 0!==o){var s=o[n.localName];void 0!==s&&s.call(i,n,r)}}}function E(t,e,r,i,n){return i.push(t),O(e,r,i,n),i.pop()}function C(t,e,r,i,n,o){for(var s,a,u=(void 0!==n?n:r).length,l=0;l<u;++l)void 0!==(s=r[l])&&void 0!==(a=e.call(void 0!==o?o:this,s,i,void 0!==n?n[l]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,i)}function T(t,e,r,i,n,o,s){return n.push(t),C(e,r,i,n,o,s),n.pop()}},function(t,e,r){"use strict";r.r(e),r.d(e,"boundingExtent",function(){return s}),r.d(e,"buffer",function(){return a}),r.d(e,"clone",function(){return u}),r.d(e,"closestSquaredDistanceXY",function(){return l}),r.d(e,"containsCoordinate",function(){return c}),r.d(e,"containsExtent",function(){return h}),r.d(e,"containsXY",function(){return p}),r.d(e,"coordinateRelationship",function(){return f}),r.d(e,"createEmpty",function(){return d}),r.d(e,"createOrUpdate",function(){return g}),r.d(e,"createOrUpdateEmpty",function(){return y}),r.d(e,"createOrUpdateFromCoordinate",function(){return v}),r.d(e,"createOrUpdateFromCoordinates",function(){return m}),r.d(e,"createOrUpdateFromFlatCoordinates",function(){return _}),r.d(e,"createOrUpdateFromRings",function(){return b}),r.d(e,"equals",function(){return S}),r.d(e,"extend",function(){return x}),r.d(e,"extendCoordinate",function(){return O}),r.d(e,"extendCoordinates",function(){return E}),r.d(e,"extendFlatCoordinates",function(){return C}),r.d(e,"extendRings",function(){return T}),r.d(e,"extendXY",function(){return P}),r.d(e,"forEachCorner",function(){return w}),r.d(e,"getArea",function(){return I}),r.d(e,"getBottomLeft",function(){return L}),r.d(e,"getBottomRight",function(){return R}),r.d(e,"getCenter",function(){return M}),r.d(e,"getCorner",function(){return A}),r.d(e,"getEnlargedArea",function(){return j}),r.d(e,"getForViewAndSize",function(){return N}),r.d(e,"getHeight",function(){return F}),r.d(e,"getIntersectionArea",function(){return D}),r.d(e,"getIntersection",function(){return k}),r.d(e,"getMargin",function(){return G}),r.d(e,"getSize",function(){return B}),r.d(e,"getTopLeft",function(){return U}),r.d(e,"getTopRight",function(){return V}),r.d(e,"getWidth",function(){return z}),r.d(e,"intersects",function(){return W}),r.d(e,"isEmpty",function(){return Y}),r.d(e,"returnOrUpdate",function(){return X}),r.d(e,"scaleFromCenter",function(){return Z}),r.d(e,"intersectsSegment",function(){return H}),r.d(e,"applyTransform",function(){return q});var i=r(23),n=r(177),o=r(72);function s(t){for(var e=[1/0,1/0,-1/0,-1/0],r=0,i=t.length;r<i;++r)O(e,t[r]);return e}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function u(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function l(t,e,r){var i,n;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(n=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*n}function c(t,e){return p(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function f(t,e){var r=t[0],i=t[1],n=t[2],s=t[3],a=e[0],u=e[1],l=o.a.UNKNOWN;return a<r?l|=o.a.LEFT:a>n&&(l|=o.a.RIGHT),u<i?l|=o.a.BELOW:u>s&&(l|=o.a.ABOVE),l===o.a.UNKNOWN&&(l=o.a.INTERSECTING),l}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,r,i,n){return n?(n[0]=t,n[1]=e,n[2]=r,n[3]=i,n):[t,e,r,i]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function v(t,e){var r=t[0],i=t[1];return g(r,i,r,i,e)}function m(t,e){return E(y(e),t)}function _(t,e,r,i,n){return C(y(n),t,e,r,i)}function b(t,e){return T(y(e),t)}function S(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function x(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function O(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function E(t,e){for(var r=0,i=e.length;r<i;++r)O(t,e[r]);return t}function C(t,e,r,i,n){for(;r<i;r+=n)P(t,e[r],e[r+1]);return t}function T(t,e){for(var r=0,i=e.length;r<i;++r)E(t,e[r]);return t}function P(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function w(t,e,r){var i;return(i=e.call(r,L(t)))?i:(i=e.call(r,R(t)))?i:(i=e.call(r,V(t)))?i:(i=e.call(r,U(t)))||!1}function I(t){var e=0;return Y(t)||(e=z(t)*F(t)),e}function L(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function M(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function A(t,e){var r;return e===n.a.BOTTOM_LEFT?r=L(t):e===n.a.BOTTOM_RIGHT?r=R(t):e===n.a.TOP_LEFT?r=U(t):e===n.a.TOP_RIGHT?r=V(t):Object(i.a)(!1,13),r}function j(t,e){var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-i)}function N(t,e,r,i,n){var o=e*i[0]/2,s=e*i[1]/2,a=Math.cos(r),u=Math.sin(r),l=o*a,c=o*u,h=s*a,p=s*u,f=t[0],d=t[1],y=f-l+p,v=f-l-p,m=f+l-p,_=f+l+p,b=d-c-h,S=d-c+h,x=d+c+h,O=d+c-h;return g(Math.min(y,v,m,_),Math.min(b,S,x,O),Math.max(y,v,m,_),Math.max(b,S,x,O),n)}function F(t){return t[3]-t[1]}function D(t,e){return I(k(t,e))}function k(t,e,r){var i=r||[1/0,1/0,-1/0,-1/0];return W(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):y(i),i}function G(t){return z(t)+F(t)}function B(t){return[t[2]-t[0],t[3]-t[1]]}function U(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function z(t){return t[2]-t[0]}function W(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Y(t){return t[2]<t[0]||t[3]<t[1]}function X(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Z(t,e){var r=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=i,t[3]+=i}function H(t,e,r){var i=!1,n=f(t,e),s=f(t,r);if(n===o.a.INTERSECTING||s===o.a.INTERSECTING)i=!0;else{var a,u,l=t[0],c=t[1],h=t[2],p=t[3],d=e[0],g=e[1],y=r[0],v=r[1],m=(v-g)/(y-d);s&o.a.ABOVE&&!(n&o.a.ABOVE)&&(i=(a=y-(v-p)/m)>=l&&a<=h),i||!(s&o.a.RIGHT)||n&o.a.RIGHT||(i=(u=v-(y-h)*m)>=c&&u<=p),i||!(s&o.a.BELOW)||n&o.a.BELOW||(i=(a=y-(v-c)/m)>=l&&a<=h),i||!(s&o.a.LEFT)||n&o.a.LEFT||(i=(u=v-(y-l)*m)>=c&&u<=p)}return i}function q(t,e,r){var i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(i,i,2),function(t,e,r){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}([i[0],i[2],i[4],i[6]],[i[1],i[3],i[5],i[7]],r)}},function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s}),r.d(e,"c",function(){return a}),r.d(e,"d",function(){return u}),r.d(e,"e",function(){return l}),r.d(e,"f",function(){return c}),r.d(e,"g",function(){return h}),r.d(e,"h",function(){return p}),r.d(e,"i",function(){return f}),r.d(e,"j",function(){return d}),r.d(e,"k",function(){return g}),r.d(e,"l",function(){return y}),r.d(e,"m",function(){return v}),r.d(e,"n",function(){return m});var i=r(0),n=r(112);function o(t){return s(Object(i.getAllTextContent)(t,!1))}function s(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function a(t){var e=Object(i.getAllTextContent)(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function u(t){return l(Object(i.getAllTextContent)(t,!1))}function l(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function c(t){return h(Object(i.getAllTextContent)(t,!1))}function h(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function p(t){return Object(i.getAllTextContent)(t,!1).trim()}function f(t,e){m(t,e?"1":"0")}function d(t,e){t.appendChild(i.DOCUMENT.createCDATASection(e))}function g(t,e){var r=new Date(1e3*e),o=r.getUTCFullYear()+"-"+Object(n.b)(r.getUTCMonth()+1,2)+"-"+Object(n.b)(r.getUTCDate(),2)+"T"+Object(n.b)(r.getUTCHours(),2)+":"+Object(n.b)(r.getUTCMinutes(),2)+":"+Object(n.b)(r.getUTCSeconds(),2)+"Z";t.appendChild(i.DOCUMENT.createTextNode(o))}function y(t,e){var r=e.toPrecision();t.appendChild(i.DOCUMENT.createTextNode(r))}function v(t,e){var r=e.toString();t.appendChild(i.DOCUMENT.createTextNode(r))}function m(t,e){t.appendChild(i.DOCUMENT.createTextNode(e))}},function(t,e,r){"use strict";r.r(e),r.d(e,"bindListener",function(){return n}),r.d(e,"findListener",function(){return o}),r.d(e,"getListeners",function(){return s}),r.d(e,"listen",function(){return l}),r.d(e,"listenOnce",function(){return c}),r.d(e,"unlisten",function(){return h}),r.d(e,"unlistenByKey",function(){return p}),r.d(e,"unlistenAll",function(){return f});var i=r(11);function n(t){var e=function(e){var r=t.listener,i=t.bindTo||t.target;return t.callOnce&&p(t),r.call(i,e)};return t.boundListener=e,e}function o(t,e,r,i){for(var n,o=0,s=t.length;o<s;++o)if((n=t[o]).listener===e&&n.bindTo===r)return i&&(n.deleteIndex=o),n}function s(t,e){var r=a(t);return r?r[e]:void 0}function a(t,e){var r=t.ol_lm;return!r&&e&&(r=t.ol_lm={}),r}function u(t,e){var r=s(t,e);if(r){for(var n=0,o=r.length;n<o;++n)t.removeEventListener(e,r[n].boundListener),Object(i.clear)(r[n]);r.length=0;var u=a(t);u&&(delete u[e],0===Object.keys(u).length&&function(t){delete t.ol_lm}(t))}}function l(t,e,r,i,s){var u=a(t,!0),l=u[e];l||(l=u[e]=[]);var c=o(l,r,i,!1);return c?s||(c.callOnce=!1):(c={bindTo:i,callOnce:!!s,listener:r,target:t,type:e},t.addEventListener(e,n(c)),l.push(c)),c}function c(t,e,r,i){return l(t,e,r,i,!0)}function h(t,e,r,i){var n=s(t,e);if(n){var a=o(n,r,i,!0);a&&p(a)}}function p(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=s(t.target,t.type);if(e){var r="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==r&&e.splice(r,1),0===e.length&&u(t.target,t.type)}Object(i.clear)(t)}}function f(t){var e=a(t);if(e)for(var r in e)u(t,r)}},function(t,e,r){"use strict";function i(){return function(){throw new Error("Unimplemented abstract method.")}()}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}r.r(e),r.d(e,"abstract",function(){return i}),r.d(e,"inherits",function(){return n}),r.d(e,"getUid",function(){return s}),r.d(e,"VERSION",function(){return a});var o=0;function s(t){return t.ol_uid||(t.ol_uid=String(++o))}var a="5.3.3"},function(t,e,r){"use strict";r.r(e),e.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.Zondy=window.Zondy||{};i.Event=i.Event||{},i.Object=i.Object||{},i.Object.ContourAnalyse=i.Object.ContourAnalyse||{},i.Object.Theme=i.Object.Theme||{},i.Theme=i.Theme||{},i.Service=i.Service||{},i.Socket=i.Socket||{},i.Enum=i.Enum||{},i.Enum.Net=i.Enum.Net||{},i.Enum.Theme=i.Enum.Theme||{},i.Enum.Map=i.Enum.Map||{},i.Catalog=i.Catalog||{},i.Util=i.Util||{},i.CRS=i.CRS||{},i.Map=i.Map||{},i.xsd=i.xsd||{},i.XLink=i.XLink||{},i.extent=i.extent||{},i.xml=i.xml||{},i.array=i.array||{},i.string=i.string||{},i.LevelRenderer=i.LevelRenderer||{},i.LevelRenderer.Tool=i.LevelRenderer.Tool||{},i.LevelRenderer.Animation=i.LevelRenderer.Animation||{},i.Feature=i.Feature||{},i.Feature.ShapeParameters=i.Feature.ShapeParameters||{},i.Geometry=i.Geometry||{},i.Client=i.Client||{},i.Source=i.Source||{},i.GeomInteraction=i.GeomInteraction||{},i.Format=i.Format||{},i.Control=i.Control||{},i.OGC=i.OGC||{},i.DataStore=i.DataStore||{},i.DataStore.ElasticSearch=i.DataStore.ElasticSearch||{},i.DataStore.PostGIS=i.DataStore.PostGIS||{},i.DataStore.Hbase=i.DataStore.Hbase||{},i.DataStore.MongoDB=i.DataStore.MongoDB||{},i.CloudDisk=i.CloudDisk||{},i.CloudDisk.GisCore=i.CloudDisk.GisCore||{},i.CloudDisk.Model=i.CloudDisk.Model||{},i.IGServerX=i.IGServerX||{},i.IGServerX.Vector=i.IGServerX.Vector||{},e.Zondy=i},function(t,e,r){"use strict";r.r(e),r.d(e,"ONE",function(){return i}),r.d(e,"SRC_ALPHA",function(){return n}),r.d(e,"COLOR_ATTACHMENT0",function(){return o}),r.d(e,"COLOR_BUFFER_BIT",function(){return s}),r.d(e,"TRIANGLES",function(){return a}),r.d(e,"TRIANGLE_STRIP",function(){return u}),r.d(e,"ONE_MINUS_SRC_ALPHA",function(){return l}),r.d(e,"ARRAY_BUFFER",function(){return c}),r.d(e,"ELEMENT_ARRAY_BUFFER",function(){return h}),r.d(e,"STREAM_DRAW",function(){return p}),r.d(e,"STATIC_DRAW",function(){return f}),r.d(e,"DYNAMIC_DRAW",function(){return d}),r.d(e,"CULL_FACE",function(){return g}),r.d(e,"BLEND",function(){return y}),r.d(e,"STENCIL_TEST",function(){return v}),r.d(e,"DEPTH_TEST",function(){return m}),r.d(e,"SCISSOR_TEST",function(){return _}),r.d(e,"UNSIGNED_BYTE",function(){return b}),r.d(e,"UNSIGNED_SHORT",function(){return S}),r.d(e,"UNSIGNED_INT",function(){return x}),r.d(e,"FLOAT",function(){return O}),r.d(e,"RGBA",function(){return E}),r.d(e,"FRAGMENT_SHADER",function(){return C}),r.d(e,"VERTEX_SHADER",function(){return T}),r.d(e,"LINK_STATUS",function(){return P}),r.d(e,"LINEAR",function(){return w}),r.d(e,"TEXTURE_MAG_FILTER",function(){return I}),r.d(e,"TEXTURE_MIN_FILTER",function(){return L}),r.d(e,"TEXTURE_WRAP_S",function(){return R}),r.d(e,"TEXTURE_WRAP_T",function(){return M}),r.d(e,"TEXTURE_2D",function(){return A}),r.d(e,"TEXTURE0",function(){return j}),r.d(e,"CLAMP_TO_EDGE",function(){return N}),r.d(e,"COMPILE_STATUS",function(){return F}),r.d(e,"FRAMEBUFFER",function(){return D}),r.d(e,"getContext",function(){return G}),r.d(e,"DEBUG",function(){return V}),r.d(e,"HAS",function(){return z}),r.d(e,"MAX_TEXTURE_SIZE",function(){return B}),r.d(e,"EXTENSIONS",function(){return U});var i=1,n=770,o=36064,s=16384,a=4,u=5,l=771,c=34962,h=34963,p=35040,f=35044,d=35048,g=2884,y=3042,v=2960,m=2929,_=3089,b=5121,S=5123,x=5125,O=5126,E=6408,C=35632,T=35633,P=35714,w=9729,I=10240,L=10241,R=10242,M=10243,A=3553,j=33984,N=33071,F=35713,D=36160,k=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function G(t,e){for(var r=k.length,i=0;i<r;++i)try{var n=t.getContext(k[i],e);if(n)return n}catch(t){}return null}var B,U,V=!0,z=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var W=G(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});W&&(z=!0,B=W.getParameter(W.MAX_TEXTURE_SIZE),U=W.getSupportedExtensions())}catch(t){}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";r.r(e);var i=r(188),n=r(1),o=r(19),s=r(126),a=r(49),u=6378137,l=Math.PI*u,c=[-l,-l,l,l],h=[-180,-85,180,85],p=function(t){function e(e){t.call(this,{code:e,units:a.default.METERS,extent:c,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/u)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),f=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("urn:ogc:def:crs:EPSG:6.18:3:3857"),new p("urn:ogc:def:crs:EPSG::3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function d(t,e,r){var i=t.length,n=r>1?r:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(i));for(var s=l,a=0;a<i;a+=n){o[a]=s*t[a]/180;var c=u*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));c>s?c=s:c<-s&&(c=-s),o[a+1]=c}return o}function g(t,e,r){var i=t.length,n=r>1?r:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(i));for(var s=0;s<i;s+=n)o[s]=180*t[s]/l,o[s+1]=360*Math.atan(Math.exp(t[s+1]/u))/Math.PI-90;return o}var y=[-180,-90,180,90],v=6378137*Math.PI/180,m=function(t){function e(e,r){t.call(this,{code:e,units:a.default.DEGREES,extent:y,axisOrientation:r,global:!0,metersPerUnit:v,worldExtent:y})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),_=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:EPSG::4326","neu"),new m("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("urn:x-ogc:def:crs:EPSG:4326","neu")],b={},S=r(83);function x(t,e,r){var i;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];i=e}else i=t.slice();return i}function O(t,e,r){if(void 0!==e&&t!==e){for(var i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function E(t){!function(t,e){b[t]=e}(t.getCode(),t),Object(S.a)(t,t,x)}function C(t){t.forEach(E)}function T(t){return"string"==typeof t?function(t){return b[t]||null}(t):t||null}function P(t,e,r,n){var o,s=(t=T(t)).getPointResolutionFunc();if(s)o=s(e,r);else if(t.getUnits()==a.default.DEGREES&&!n||n==a.default.DEGREES)o=e;else{var u=D(t,T("EPSG:4326")),l=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];l=u(l,l,2),o=(Object(i.getDistance)(l.slice(0,2),l.slice(2,4))+Object(i.getDistance)(l.slice(4,6),l.slice(6,8)))/2;var c=n?a.METERS_PER_UNIT[n]:t.getMetersPerUnit();void 0!==c&&(o/=c)}return o}function w(t){C(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Object(S.a)(e,t,x)})})}function I(t,e,r,i){t.forEach(function(t){e.forEach(function(e){Object(S.a)(t,e,r),Object(S.a)(e,t,i)})})}function L(){b={},Object(S.b)()}function R(t,e){return t?"string"==typeof t?T(t):t:T(e)}function M(t){return function(e,r,i){for(var n=e.length,o=void 0!==i?i:2,s=void 0!==r?r:new Array(n),a=0;a<n;a+=o){var u=t([e[a],e[a+1]]);s[a]=u[0],s[a+1]=u[1];for(var l=o-1;l>=2;--l)s[a+l]=e[a+l]}return s}}function A(t,e,r,i){var n=T(t),o=T(e);Object(S.a)(n,o,M(r)),Object(S.a)(o,n,M(i))}function j(t,e){return G(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function N(t,e){var r=G(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=r[0];return(i<-180||i>180)&&(r[0]=Object(o.d)(i+180,360)-180),r}function F(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?r:D(t,e)===x&&r}function D(t,e){var r=t.getCode(),i=e.getCode(),n=Object(S.c)(r,i);return n||(n=O),n}function k(t,e){return D(T(t),T(e))}function G(t,e,r){return k(e,r)(t,void 0,t.length)}function B(t,e,r){var i=k(e,r);return Object(n.applyTransform)(t,i)}function U(t,e,r){return D(e,r)(t)}function V(){w(f),w(_),I(_,f,d,g)}r.d(e,"cloneTransform",function(){return x}),r.d(e,"identityTransform",function(){return O}),r.d(e,"addProjection",function(){return E}),r.d(e,"addProjections",function(){return C}),r.d(e,"get",function(){return T}),r.d(e,"getPointResolution",function(){return P}),r.d(e,"addEquivalentProjections",function(){return w}),r.d(e,"addEquivalentTransforms",function(){return I}),r.d(e,"clearAllProjections",function(){return L}),r.d(e,"createProjection",function(){return R}),r.d(e,"createTransformFromCoordinateTransform",function(){return M}),r.d(e,"addCoordinateTransforms",function(){return A}),r.d(e,"fromLonLat",function(){return j}),r.d(e,"toLonLat",function(){return N}),r.d(e,"equivalent",function(){return F}),r.d(e,"getTransformFromProjections",function(){return D}),r.d(e,"getTransform",function(){return k}),r.d(e,"transform",function(){return G}),r.d(e,"transformExtent",function(){return B}),r.d(e,"transformWithProjections",function(){return U}),r.d(e,"addCommon",function(){return V}),r.d(e,"METERS_PER_UNIT",function(){return a.METERS_PER_UNIT}),r.d(e,"Projection",function(){return s.default}),V()},function(t,e,r){"use strict";r.r(e),e.default={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,r){"use strict";r.r(e),r.d(e,"assign",function(){return i}),r.d(e,"clear",function(){return n}),r.d(e,"getValues",function(){return o}),r.d(e,"isEmpty",function(){return s});var i="function"==typeof Object.assign?Object.assign:function(t,e){var r=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1,o=arguments.length;n<o;++n){var s=r[n];if(void 0!==s&&null!==s)for(var a in s)s.hasOwnProperty(a)&&(i[a]=s[a])}return i};function n(t){for(var e in t)delete t[e]}function o(t){var e=[];for(var r in t)e.push(t[r]);return e}function s(t){var e;for(e in t)return!1;return!e}},function(t,e,r){t.exports={default:r(539),__esModule:!0}},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(123));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";e.__esModule=!0;var i=s(r(541)),n=s(r(545)),o=s(r(123));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,n.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,r){"use strict";function i(t,e,r){for(var i,o,s=r||n,a=0,u=t.length,l=!1;a<u;)(o=+s(t[i=a+(u-a>>1)],e))<0?a=i+1:(u=i,l=!o);return l?a:~a}function n(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function s(t,e,r){var i,n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function a(t,e,r){for(;e<r;){var i=t[e];t[e]=t[r],t[r]=i,++e,--r}}function u(t,e){for(var r=Array.isArray(e)?e:[e],i=r.length,n=0;n<i;n++)t[t.length]=r[n]}function l(t,e){var r=t.indexOf(e),i=r>-1;return i&&t.splice(r,1),i}function c(t,e){for(var r,i=t.length>>>0,n=0;n<i;n++)if(e(r=t[n],n,t))return r;return null}function h(t,e){var r=t.length;if(r!==e.length)return!1;for(var i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function p(t,e){var r,i=t.length,n=Array(t.length);for(r=0;r<i;r++)n[r]={index:r,value:t[r]};for(n.sort(function(t,r){return e(t.value,r.value)||t.index-r.index}),r=0;r<t.length;r++)t[r]=n[r].value}function f(t,e){var r;return t.every(function(i,n){return r=n,!e(i,n,t)})?-1:r}function d(t,e,r){var i=e||n;return t.every(function(e,n){if(0===n)return!0;var o=i(t[n-1],e);return!(o>0||r&&0===o)})}r.d(e,"a",function(){return i}),r.d(e,"i",function(){return n}),r.d(e,"f",function(){return o}),r.d(e,"h",function(){return s}),r.d(e,"k",function(){return a}),r.d(e,"c",function(){return u}),r.d(e,"j",function(){return l}),r.d(e,"d",function(){return c}),r.d(e,"b",function(){return h}),r.d(e,"l",function(){return p}),r.d(e,"e",function(){return f}),r.d(e,"g",function(){return d})},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(240));e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(t,n.key,n)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}()},function(t,e,r){"use strict";r.r(e),e.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,r){"use strict";r.d(e,"c",function(){return o}),r.d(e,"f",function(){return s}),r.d(e,"e",function(){return a}),r.d(e,"i",function(){return l}),r.d(e,"a",function(){return c}),r.d(e,"g",function(){return h}),r.d(e,"h",function(){return p}),r.d(e,"j",function(){return f}),r.d(e,"b",function(){return d}),r.d(e,"d",function(){return g});var i=r(23),n=new Array(6);function o(){return[1,0,0,1,0,0]}function s(t){return u(t,1,0,0,1,0,0)}function a(t,e){var r=t[0],i=t[1],n=t[2],o=t[3],s=t[4],a=t[5],u=e[0],l=e[1],c=e[2],h=e[3],p=e[4],f=e[5];return t[0]=r*u+n*l,t[1]=i*u+o*l,t[2]=r*c+n*h,t[3]=i*c+o*h,t[4]=r*p+n*f+s,t[5]=i*p+o*f+a,t}function u(t,e,r,i,n,o,s){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=o,t[5]=s,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){var r=e[0],i=e[1];return e[0]=t[0]*r+t[2]*i+t[4],e[1]=t[1]*r+t[3]*i+t[5],e}function h(t,e){var r=Math.cos(e),i=Math.sin(e);return a(t,u(n,r,i,-i,r,0,0))}function p(t,e,r){return a(t,u(n,e,0,0,r,0,0))}function f(t,e,r){return a(t,u(n,1,0,0,1,e,r))}function d(t,e,r,i,n,o,s,a){var u=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=n*u,t[2]=-i*u,t[3]=n*l,t[4]=s*i*l-a*i*u+e,t[5]=s*n*u+a*n*l+r,t}function g(t){var e=function(t){return t[0]*t[3]-t[1]*t[2]}(t);Object(i.a)(0!==e,32);var r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5];return t[0]=s/e,t[1]=-n/e,t[2]=-o/e,t[3]=r/e,t[4]=(o*u-s*a)/e,t[5]=-(r*u-n*a)/e,t}},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"e",function(){return s}),r.d(e,"h",function(){return a}),r.d(e,"g",function(){return u}),r.d(e,"f",function(){return l}),r.d(e,"i",function(){return c}),r.d(e,"j",function(){return h}),r.d(e,"d",function(){return p}),r.d(e,"c",function(){return f});var i=r(23);function n(t,e,r){return Math.min(Math.max(t,e),r)}var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function s(t){return Object(i.a)(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function a(t,e,r,i,n,o){var s=n-r,a=o-i;if(0!==s||0!==a){var l=((t-r)*s+(e-i)*a)/(s*s+a*a);l>1?(r=n,i=o):l>0&&(r+=s*l,i+=a*l)}return u(t,e,r,i)}function u(t,e,r,i){var n=r-t,o=i-e;return n*n+o*o}function l(t){for(var e=t.length,r=0;r<e;r++){for(var i=r,n=Math.abs(t[r][r]),o=r+1;o<e;o++){var s=Math.abs(t[o][r]);s>n&&(n=s,i=o)}if(0===n)return null;var a=t[i];t[i]=t[r],t[r]=a;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}function c(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function p(t,e){var r=t%e;return r*e<0?r+e:r}function f(t,e,r){return t+r*(e-t)}},function(t,e,r){"use strict";r.r(e),e.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,r){"use strict";r.r(e),r.d(e,"defaultFont",function(){return u}),r.d(e,"defaultFillStyle",function(){return l}),r.d(e,"defaultLineCap",function(){return c}),r.d(e,"defaultLineDash",function(){return h}),r.d(e,"defaultLineDashOffset",function(){return p}),r.d(e,"defaultLineJoin",function(){return f}),r.d(e,"defaultMiterLimit",function(){return d}),r.d(e,"defaultStrokeStyle",function(){return g}),r.d(e,"defaultTextAlign",function(){return y}),r.d(e,"defaultTextBaseline",function(){return v}),r.d(e,"defaultPadding",function(){return m}),r.d(e,"defaultLineWidth",function(){return _}),r.d(e,"labelCache",function(){return b}),r.d(e,"checkedFonts",function(){return S}),r.d(e,"textHeights",function(){return O}),r.d(e,"checkFont",function(){return E}),r.d(e,"measureTextHeight",function(){return T}),r.d(e,"measureTextWidth",function(){return P}),r.d(e,"rotateAtOffset",function(){return w}),r.d(e,"resetTransform",function(){return I}),r.d(e,"drawImage",function(){return L});var i=r(37),n=r(24),o=r(11),s=r(168),a=r(18),u="10px sans-serif",l=[0,0,0,1],c="round",h=[],p=0,f="round",d=10,g=[0,0,0,1],y="center",v="middle",m=[0,0,0,0],_=1,b=new s.default,S={},x=null,O={},E=function(){var t,e,r=60,n=S,s="32px ",a=["monospace","serif"],u=a.length,l="wmytzilWMYTZIL@#/&?$%10";function c(t){for(var r=C(),i=100;i<=700;i+=300){for(var n=i+" ",o=!0,c=0;c<u;++c){var h=a[c];if(r.font=n+s+h,e=r.measureText(l).width,t!=h){r.font=n+s+t+","+h;var p=r.measureText(l).width;o=o&&p!=e}}if(o)return!0}return!1}function h(){var e=!0;for(var i in n)n[i]<r&&(c(i)?(n[i]=r,Object(o.clear)(O),x=null,b.clear()):(++n[i],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=Object(i.g)(e);if(o)for(var s=0,a=o.length;s<a;++s){var u=o[s];u in n||(n[u]=r,c(u)||(n[u]=0,void 0===t&&(t=setInterval(h,32))))}}}();function C(){return x||(x=Object(n.createCanvasContext2D)(1,1)),x}var T=function(){var t,e=O;return function(r){var i=e[r];return void 0==i&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=r,document.body.appendChild(t),i=e[r]=t.offsetHeight,document.body.removeChild(t)),i}}();function P(t,e){var r=C();return t!=r.font&&(r.font=t),r.measureText(e).width}function w(t,e,r,i){0!==e&&(t.translate(r,i),t.rotate(e),t.translate(-r,-i))}var I=Object(a.c)();function L(t,e,r,i,n,o,s,a,u,l,c){var h;1!=r&&(h=t.globalAlpha,t.globalAlpha=h*r),e&&t.setTransform.apply(t,e),t.drawImage(i,n,o,s,a,u,l,s*c,a*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,I)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=void 0;var i=p(r(53)),n=p(r(291)),o=p(r(240)),s=p(r(299)),a=p(r(516)),u=p(r(372)),l=p(r(8)),c=p(r(123)),h=r(6);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t,e){if(t=t||{},e){for(var r in e){var i=e[r];void 0!==i&&(t[r]=i)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},d=function(t){return"[object Array]"===Object.prototype.toString.call(t)},g=function t(e,r){var i,n=Object.prototype.toString;for(i in e=e||{},r)r.hasOwnProperty(i)&&("object"===(0,c.default)(r[i])?("[object Null]"!==n.call(e[i])&&"[object Undefined]"!==n.call(e[i])||(e[i]="[object Array]"===n.call(r[i])?[]:{}),t(e[i],r[i])):e[i]=r[i],""!==r[i]&&null!==r[i]||(e[i]=r[i]));return e},y=function(t,e){var r;if(t=t||{},e)for(var i in t)void 0!==(r=e[i])&&(t[i]=r)},v=function(t,e,r){var i;if(t=t||{},e)for(var n in e)void 0!==(i=e[n])&&"function"!=typeof i&&r.indexOf(n)<0&&(t[n]=i)},m=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===(0,c.default)(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===(0,c.default)(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},_=function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var i=arguments[e];if("string"==typeof i&&(i=document.getElementById(i)),1===arguments.length)return i;t.push(i)}return t},b=function(t){return!(!t||1!==t.nodeType)},S=function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},x=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1},O=function(t,e,r,i,n,o,s,a){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),i&&(t.style.width=i.w+"px",t.style.height=i.h+"px"),n&&(t.style.position=n),o&&(t.style.border=o),s&&(t.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},E=function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var i in e)(void 0===t[i]||!r&&e.hasOwnProperty&&e.hasOwnProperty(i)&&!t.hasOwnProperty(i))&&(t[i]=e[i]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},C=function(t){var e=[];for(var r in t){var i=t[r];if(null!=i&&"function"!=typeof i){var n;if("object"===(void 0===i?"undefined":(0,c.default)(i))&&i.constructor===Array){for(var o,s=[],a=0,u=i.length;a<u;a++)o=i[a],s.push(encodeURIComponent(null===o||void 0===o?"":o));n=s.join(",")}else n=encodeURIComponent(i);e.push(encodeURIComponent(r)+"="+n)}}return e.join("&")},T=function(t){var e=[];for(var r in t){var i=t[r];if(null!=i&&"function"!=typeof i){var n;if("object"===(void 0===i?"undefined":(0,c.default)(i))&&i.constructor===Array){for(var o,s=[],a=0,u=i.length;a<u;a++)o=i[a],s.push(encodeURIComponent(null===o||void 0===o?"":o));n=s.join(",")}else n=encodeURIComponent(i);e.push(encodeURIComponent(r)+":"+n)}}return e.join(";")},P=function(t,e){var r=t;if(e){var i=(t+" ").split(/[?&]/);r+=" "===i.pop()?e:i.length?"&"+e:"?"+e}return r},w=function(t){var e="";if((t=null===t||void 0===t?window.location.href:t).indexOf("?")>-1){var r=t.indexOf("?")+1;t.indexOf("#");var i=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(r,i)}for(var n={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var u=o[s].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),n[l]=c}}return n},I=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),L=function(){var t,e="",r="",i="pc",n=navigator.userAgent.toLowerCase();return n.indexOf("msie")>-1||n.indexOf("trident")>-1&&n.indexOf("rv")>-1?(e="msie",t=n.match(/msie ([\d.]+)/)||n.match(/rv:([\d.]+)/)):n.indexOf("chrome")>-1?(e="chrome",t=n.match(/chrome\/([\d.]+)/)):n.indexOf("firefox")>-1?(e="firefox",t=n.match(/firefox\/([\d.]+)/)):n.indexOf("opera")>-1?(e="opera",t=n.match(/version\/([\d.]+)/)):n.indexOf("safari")>-1&&(e="safari",t=n.match(/version\/([\d.]+)/)),r=t?t[1]:"",n.indexOf("ipad")>-1||n.indexOf("ipod")>-1||n.indexOf("iphone")>-1?i="apple":n.indexOf("android")>-1&&(r=(t=n.match(/version\/([\d.]+)/))?t[1]:"",i="android"),{name:e,version:r,device:i}}(),R=function(){return L},M=function(){var t=!0,e=R();return document.createElement("canvas").getContext?("firefox"===e.name&&parseFloat(e.version)<5&&(t=!1),"safari"===e.name&&parseFloat(e.version)<4&&(t=!1),"opera"===e.name&&parseFloat(e.version)<10&&(t=!1),"msie"===e.name&&parseFloat(e.version)<9&&(t=!1)):t=!1,t}(),A=function(){return M},j=function(t){if(!t)return!0;var e=t.indexOf("//"),r=document.location.toString(),i=r.indexOf("//");if(-1===e)return!0;var n,o=n=t.substring(0,e),s=r.substring(i+2);i=s.indexOf("/");var a=s.indexOf(":"),u=s.substring(0,i),l=document.location.protocol;if(-1!==a||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,p=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),p+=":"+("http:"===n.toLowerCase()?80:443)),h===document.domain&&p===u},N=function t(e){var r=e;if(null==r)return null;switch(r.constructor){case String:return(r=(r=(r=(r=(r=(r='"'+r.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var i=[],n=0,o=r.length;n<o;n++)i.push(t(r[n]));return"["+i.join(",")+"]";case Number:return isFinite(r)?String(r):null;case Boolean:return String(r);case Date:return"{'__type':\"System.DateTime\",'Year':"+r.getFullYear()+",'Month':"+(r.getMonth()+1)+",'Day':"+r.getDate()+",'Hour':"+r.getHours()+",'Minute':"+r.getMinutes()+",'Second':"+r.getSeconds()+",'Millisecond':"+r.getMilliseconds()+",'TimezoneOffset':"+r.getTimezoneOffset()+"}";default:if("object"===(void 0===r?"undefined":(0,c.default)(r))){if(r.length){for(i=[],n=0,o=r.length;n<o;n++)i.push(t(r[n]));return"["+i.join(",")+"]"}var s=[];for(var a in r)"function"!=typeof r[a]&&"CLASS_NAME"!==a&&s.push("'"+a+"':"+t(r[a]));return s.length>0?"{"+s.join(",")+"}":"{}"}return r.toString()}},F=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},D=function(t,e){if(t=t||{},e)for(var r in e){var i=e[r];void 0!==i&&"CLASS_NAME"!==r&&"function"!=typeof i&&(t[r]=i)}return t},k=function(t,e,r){if(t=t||{},e)for(var i in e){var n=!1;if(r&&r.length)for(var o=0,s=r.length;o<s;o++)if(i===r[o]){n=!0;break}if(!0!==n){var a=e[i];void 0!==a&&"CLASS_NAME"!==i&&"function"!=typeof a&&(t[i]=a)}}return t},G=function t(e){if(null===e||"object"!==(void 0===e?"undefined":(0,c.default)(e)))return e;if(e instanceof Date)return(r=new Date).setTime(e.getTime()),r;if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t(e[i]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},B=function(){for(var t="",e=1;e<=32;e++)t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-");return t},U=function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var i=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,i)}},V=function(t,e){return function(r){return t.call(e,r||window.event)}},z=function(t){switch(t.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},W=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return Y(t)})},Y=function(t){var e=escape(t).split("%"),r="";""!=e[0]&&(r=e[0]);for(var i=1;i<e.length;i++)"u"==e[i].substring(0,1)?r+=Z(X(e[i].substring(1,5))):r+="%"+e[i];return r},X=function(t){for(var e,r="",i="",n=0;n<t.length;n++)r=t.charAt(n),e="0123456789ABCDEF".indexOf(r),i+=q(e);return i},Z=function(t){var e="",r="",i="";if(16==t.length){r="1110"+t.substring(0,4),r+="10"+t.substring(4,10),r+="10"+t.substring(10,16);for(var n="0123456789ABCDEF",o=0;o<3;o++)e+="%",i=r.substring(8*o,8*(o+1)),e+=n.charAt(H(i.substring(0,4))),e+=n.charAt(H(i.substring(4,8)));return e}return""},H=function(t){var e=0;if(4==t.length){for(var r=0;r<4;r++)e+=t.charAt(r)*Math.pow(2,3-r);return e}return-1},q=function(t){for(var e="",r=0,i=0;i<4;i++)t>=(r=Math.pow(2,3-i))?(e+="1",t-=r):e+="0";return e},K=function t(e,r){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(r))for(var i in r)e[i]?e[i]=t(e[i],r[i]):e[i]=r[i];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(r)?e.concat(r):r;return e},J=function(t,e,r,i){e.hasOwnProperty(r)&&("object"!=(0,c.default)(t[r])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[r])]?!i&&r in t||(t[r]=e[r]):Q(t[r],e[r],i))},Q=function(t,e,r){for(var i in e)J(t,e,i,r);return t},$=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var i=function t(r){(0,l.default)(this,t);for(var i=0;i<e.length;i++)h(this,new e[i](r))},n=0;n<e.length;n++){var c=e[n];h(i,c),h(i.prototype,c.prototype),h(i.prototype,new c)}return i;function h(t,e){var r=(0,u.default)(e);a.default&&(r=r.concat((0,a.default)(e)));for(var i=0;i<r.length;i++){var n=r[i];if("constructor"!==n&&"prototype"!==n&&"name"!==n&&"length"!==n){var l=(0,s.default)(e,n);window.ActiveXObject?(0,o.default)(t,n,l||{}):(0,o.default)(t,n,l)}}}},tt=function(t,e){var r=document.createElement("CANVAS");return t&&(r.width=t),e&&(r.height=e),r.getContext("2d")},et=function(t,e,r,o){return(0,n.default)(t).forEach(function(n){var s=t[n],a=n;if(ot(s)&&"function"!=typeof s){if(r&&r.indexOf(n)>-1){var u={};"geometry"===n&&("polygon"===s.type&&(u.rings=t[n].rings),"multipoint"===s.type&&(u.points=t[n].points),"point"===s.type&&t[n].x&&t[n].y&&(u.y=t[n].y,u.x=t[n].x),"polyline"===s.type&&(u.paths=t[n].paths),u.spatialReference=t[n].spatialReference,s=u,e+="&geometryType=esriGeometry"+t[n].type.charAt(0).toUpperCase()+t[n].type.slice(1)),s=(0,i.default)(s)}o&&o.hasOwnProperty(n)&&(a=o[n]),e+="&"+a+"="+s}}),e},rt=function(t,e,r){return(0,n.default)(e).forEach(function(n){if(r&&r.indexOf(n)>-1){var o=n;o=n.substring(0,o.length-"Features".length)+"s",t+=o+"="+encodeURIComponent(e[n]instanceof Object?(0,i.default)(e[n]):e[n])+"&"}else t+=n+"="+e[n]+"&"}),t},it=function(t,e,r){return new t({longitude:r[0],latitude:r[1],z:r[2],spatialReference:G(e.spatialReference)})},nt=function t(e){for(var r=0;r<e.length;r++)e[r]instanceof Array?t(e[r]):e[r]instanceof Object&&(e[r]=e[r].toArray());return e},ot=function(t){return""!==t&&null!==t&&void 0!==t};e.extend=f,e.isArray=d,e.extendDeep=g,e.copy=y,e.copyExcluce=v,e.reset=m,e.getElement=_,e.isElement=b,e.removeItem=S,e.indexOf=x,e.modifyDOMElement=O,e.applyDefaults=E,e.getParameterString=C,e.getWFParameterString=T,e.urlAppend=P,e.getParameters=w,e.IS_GECKO=I,e.Browser=L,e.getBrowser=R,e.isSupportCanvas=M,e.supportCanvas=A,e.isInTheSameDomain=j,e.toJSON=N,e.transformResult=F,e.copyAttributes=D,e.copyAttributesWithClip=k,e.cloneObject=G,e.newGuid=B,e.bind=U,e.bindAsEventListener=V,e.getTopAnalysisResult=z,e.ChineseToUtf8=W,e.DeepMerge=K,e.merge=Q,e.mixin=$,e.createCanvasContext2D=tt,e.formatQuery=et,e.formatEdits=rt,e.returnPoint=it,e.formatPoints=nt,e.notNULL=ot,h.Zondy.Util.extend=f,h.Zondy.Util.isArray=d,h.Zondy.Util.extendDeep=g,h.Zondy.Util.copy=y,h.Zondy.Util.copyExcluce=v,h.Zondy.Util.reset=m,h.Zondy.Util.getElement=_,h.Zondy.Util.isElement=b,h.Zondy.Util.removeItem=S,h.Zondy.Util.indexOf=x,h.Zondy.Util.modifyDOMElement=O,h.Zondy.Util.applyDefaults=E,h.Zondy.Util.getParameterString=C,h.Zondy.Util.getWFParameterString=T,h.Zondy.Util.urlAppend=P,h.Zondy.Util.getParameters=w,h.Zondy.IS_GECKO=I,h.Zondy.Browser=L,h.Zondy.Util.getBrowser=R,h.Zondy.Util.isSupportCanvas=M,h.Zondy.Util.supportCanvas=A,h.Zondy.Util.isInTheSameDomain=j,h.Zondy.Util.toJSON=N,h.Zondy.Util.transformResult=F,h.Zondy.Util.copyAttributes=D,h.Zondy.Util.copyAttributesWithClip=k,h.Zondy.Util.cloneObject=G,h.Zondy.Util.newGuid=B,h.Zondy.Util.bind=U,h.Zondy.Util.bindAsEventListener=V,h.Zondy.Util.getTopAnalysisResult=z,h.Zondy.Util.ChineseToUtf8=W,h.Zondy.Util.DeepMerge=K,h.Zondy.Util.merge=Q,h.Zondy.Util.mixin=$,h.Zondy.Util.createCanvasContext2D=tt,h.Zondy.Util.formatQuery=et,h.Zondy.Util.formatEdits=rt,h.Zondy.Util.returnPoint=it,h.Zondy.Util.returnPoint=nt,h.Zondy.Util.returnPoint=ot},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r(185);function n(t,e){if(!t)throw new i.a(e)}},function(t,e,r){"use strict";function i(t,e){var r=document.createElement("canvas");return t&&(r.width=t),e&&(r.height=e),r.getContext("2d")}function n(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+(parseInt(r.marginLeft,10)+parseInt(r.marginRight,10))}function o(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10))}function s(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function u(t){for(;t.lastChild;)t.removeChild(t.lastChild)}r.r(e),r.d(e,"createCanvasContext2D",function(){return i}),r.d(e,"outerWidth",function(){return n}),r.d(e,"outerHeight",function(){return o}),r.d(e,"replaceNode",function(){return s}),r.d(e,"removeNode",function(){return a}),r.d(e,"removeChildren",function(){return u})},function(t,e,r){"use strict";r.r(e),r.d(e,"ObjectEvent",function(){return u}),r.d(e,"getChangeEventType",function(){return h});var i=r(4),n=r(119),o=r(150),s=r(35),a=r(11),u=function(t){function e(e,r,i){t.call(this,e),this.key=r,this.oldValue=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),l=function(t){function e(e){t.call(this),Object(i.getUid)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(a.assign)({},this.values_)},e.prototype.notify=function(t,e){var r;r=h(t),this.dispatchEvent(new u(r,t,e)),r=n.a.PROPERTYCHANGE,this.dispatchEvent(new u(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(o.default),c={};function h(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}e.default=l},function(t,e,r){"use strict";r.r(e),r.d(e,"add",function(){return o}),r.d(e,"closestOnCircle",function(){return s}),r.d(e,"closestOnSegment",function(){return a}),r.d(e,"createStringXY",function(){return u}),r.d(e,"degreesToStringHDMS",function(){return l}),r.d(e,"format",function(){return c}),r.d(e,"equals",function(){return h}),r.d(e,"rotate",function(){return p}),r.d(e,"scale",function(){return f}),r.d(e,"squaredDistance",function(){return d}),r.d(e,"distance",function(){return g}),r.d(e,"squaredDistanceToSegment",function(){return y}),r.d(e,"toStringHDMS",function(){return v}),r.d(e,"toStringXY",function(){return m});var i=r(19),n=r(112);function o(t,e){return t[0]+=e[0],t[1]+=e[1],t}function s(t,e){var r=e.getRadius(),i=e.getCenter(),n=i[0],o=i[1],s=t[0]-n,a=t[1]-o;0===s&&0===a&&(s=1);var u=Math.sqrt(s*s+a*a);return[n+r*s/u,o+r*a/u]}function a(t,e){var r,i,n=t[0],o=t[1],s=e[0],a=e[1],u=s[0],l=s[1],c=a[0],h=a[1],p=c-u,f=h-l,d=0===p&&0===f?0:(p*(n-u)+f*(o-l))/(p*p+f*f||0);return d<=0?(r=u,i=l):d>=1?(r=c,i=h):(r=u+d*p,i=l+d*f),[r,i]}function u(t){return function(e){return m(e,t)}}function l(t,e,r){var o=Object(i.d)(e+180,360)-180,s=Math.abs(3600*o),a=r||0,u=Math.pow(10,a),l=Math.floor(s/3600),c=Math.floor((s-3600*l)/60),h=s-3600*l-60*c;return(h=Math.ceil(h*u)/u)>=60&&(h=0,c+=1),c>=60&&(c=0,l+=1),l+"° "+Object(n.b)(c,2)+"′ "+Object(n.b)(h,2,a)+"″"+(0==o?"":" "+t.charAt(o<0?1:0))}function c(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function h(t,e){for(var r=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){r=!1;break}return r}function p(t,e){var r=Math.cos(e),i=Math.sin(e),n=t[0]*r-t[1]*i,o=t[1]*r+t[0]*i;return t[0]=n,t[1]=o,t}function f(t,e){return t[0]*=e,t[1]*=e,t}function d(t,e){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function g(t,e){return Math.sqrt(d(t,e))}function y(t,e){return d(t,a(t,e))}function v(t,e){return t?l("NS",t[1],e)+" "+l("EW",t[0],e):""}function m(t,e){return c(t,"{x}, {y}",e)}},function(t,e,r){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,r){"use strict";r.r(e),e.default={ANIMATING:0,INTERACTING:1}},function(t,e,r){"use strict";function i(){return!0}function n(){return!1}function o(){}r.d(e,"b",function(){return i}),r.d(e,"a",function(){return n}),r.d(e,"c",function(){return o})},function(t,e,r){"use strict";e.a={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},function(t,e,r){"use strict";r.r(e);var i=r(10);e.default={SINGLECLICK:"singleclick",CLICK:i.default.CLICK,DBLCLICK:i.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,r){"use strict";r.r(e),r.d(e,"altKeyOnly",function(){return a}),r.d(e,"altShiftKeysOnly",function(){return u}),r.d(e,"focus",function(){return l}),r.d(e,"always",function(){return c}),r.d(e,"click",function(){return h}),r.d(e,"mouseActionButton",function(){return p}),r.d(e,"never",function(){return f}),r.d(e,"pointerMove",function(){return d}),r.d(e,"singleClick",function(){return g}),r.d(e,"doubleClick",function(){return y}),r.d(e,"noModifierKeys",function(){return v}),r.d(e,"platformModifierKeyOnly",function(){return m}),r.d(e,"shiftKeyOnly",function(){return _}),r.d(e,"targetNotEditable",function(){return b}),r.d(e,"mouseOnly",function(){return S}),r.d(e,"primaryAction",function(){return x});var i=r(31),n=r(23),o=r(29),s=r(42),a=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},u=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},l=function(t){return t.target.getTargetElement()===document.activeElement},c=o.b,h=function(t){return t.type==i.default.CLICK},p=function(t){var e=t.originalEvent;return 0==e.button&&!(s.WEBKIT&&s.MAC&&e.ctrlKey)},f=o.a,d=function(t){return"pointermove"==t.type},g=function(t){return t.type==i.default.SINGLECLICK},y=function(t){return t.type==i.default.DBLCLICK},v=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},m=function(t){var e=t.originalEvent;return!e.altKey&&(s.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},_=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},b=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},S=function(t){var e=t.pointerEvent;return Object(n.a)(void 0!==e,56),"mouse"==e.pointerType},x=function(t){var e=t.pointerEvent;return Object(n.a)(void 0!==e,56),e.isPrimary&&0===e.button}},function(t,e,r){"use strict";r.r(e),r.d(e,"transformWithOptions",function(){return a});var i=r(11),n=r(4),o=r(9),s=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function a(t,e,r){var i,n=r?Object(o.get)(r.featureProjection):null,s=r?Object(o.get)(r.dataProjection):null;if(i=n&&s&&!Object(o.equivalent)(n,s)?Array.isArray(t)?Object(o.transformExtent)(t,s,n):(e?t.clone():t).transform(e?n:s,e?s:n):t,e&&r&&void 0!==r.decimals&&!Array.isArray(i)){var a=Math.pow(10,r.decimals);i===t&&(i=t.clone()),i.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t})}return i}s.prototype.getReadOptions=function(t,e){var r;return e&&(r={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(r)},s.prototype.adaptOptions=function(t){return Object(i.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},s.prototype.getLastExtent=function(){return null},s.prototype.getType=function(){return Object(n.abstract)()},s.prototype.readFeature=function(t,e){return Object(n.abstract)()},s.prototype.readFeatures=function(t,e){return Object(n.abstract)()},s.prototype.readGeometry=function(t,e){return Object(n.abstract)()},s.prototype.readProjection=function(t){return Object(n.abstract)()},s.prototype.writeFeature=function(t,e){return Object(n.abstract)()},s.prototype.writeFeatures=function(t,e){return Object(n.abstract)()},s.prototype.writeGeometry=function(t,e){return Object(n.abstract)()},e.default=s},function(t,e,r){"use strict";r.r(e),r.d(e,"circular",function(){return x}),r.d(e,"fromExtent",function(){return O}),r.d(e,"fromCircle",function(){return E}),r.d(e,"makeRegular",function(){return C});var i=r(15),n=r(1),o=r(20),s=r(5),a=r(144),u=r(38),l=r(63),c=r(188),h=r(153),p=r(99),f=r(103),d=r(73),g=r(77),y=r(172),v=r(154),m=r(79),_=r(116),b=r(19),S=function(t){function e(e,r,i){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==r&&i?(this.setFlatCoordinates(r,e),this.ends_=i):this.setCoordinates(e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(p.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return Object(f.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(h.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.d)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(g.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(n.getCenter)(this.getExtent());this.flatInteriorPoint_=Object(y.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new u.default(this.getFlatInteriorPoint(),o.default.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new a.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,i=[],n=0,o=0,s=r.length;o<s;++o){var u=r[o],l=new a.default(e.slice(n,u),t);i.push(l),n=u}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.b)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.d)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=Object(_.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,i),new e(r,o.default.XY,i)},e.prototype.getType=function(){return s.default.POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Object(d.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(l.default);function x(t,e,r,n){for(var s=r||32,a=[],u=0;u<s;++u)Object(i.c)(a,Object(c.offset)(t,e,2*Math.PI*u/s,n));return a.push(a[0],a[1]),new S(a,o.default.XY,[a.length])}function O(t){var e=t[0],r=t[1],i=t[2],n=t[3],s=[e,r,e,n,i,n,i,r,e,r];return new S(s,o.default.XY,[s.length])}function E(t,e,r){for(var i=e||32,n=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=n*(i+1),u=new Array(a),l=0;l<a;l+=n){u[l]=0,u[l+1]=0;for(var c=2;c<n;c++)u[l+c]=s[c]}var h=[u.length],p=new S(u,o,h);return C(p,s,t.getRadius(),r),p}function C(t,e,r,i){for(var n=t.getFlatCoordinates(),o=t.getStride(),s=n.length/o-1,a=i||0,u=0;u<=s;++u){var l=u*o,c=a+2*Object(b.d)(u,s)*Math.PI/s;n[l]=e[0]+r*Math.cos(c),n[l+1]=e[1]+r*Math.sin(c)}t.changed()}e.default=S},function(t,e,r){"use strict";r.r(e),r.d(e,"stopPropagation",function(){return n}),r.d(e,"preventDefault",function(){return o});var i=function(t){this.propagationStopped,this.type=t,this.target=null};function n(t){t.stopPropagation()}function o(t){t.preventDefault()}i.prototype.preventDefault=function(){this.propagationStopped=!0},i.prototype.stopPropagation=function(){this.propagationStopped=!0},e.default=i},function(t,e,r){"use strict";r.r(e),r.d(e,"createStyleFunction",function(){return u});var i=r(23),n=r(3),o=r(10),s=r(25),a=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(n.listen)(this,Object(s.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;this.setGeometry(r)}else{var i=e;this.setProperties(i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(n.listen)(t,o.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?u(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(n.unlisten)(this,Object(s.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(n.listen)(this,Object(s.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(s.default);function u(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(i.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=a},function(t,e,r){"use strict";r.d(e,"c",function(){return i}),r.d(e,"d",function(){return n}),r.d(e,"e",function(){return o}),r.d(e,"f",function(){return s}),r.d(e,"b",function(){return a}),r.d(e,"a",function(){return u}),r.d(e,"g",function(){return l});var i="ol-hidden",n="ol-selectable",o="ol-unselectable",s="ol-unsupported",a="ol-control",u="ol-collapsed",l=function(){var t,e={};return function(r){if(t||(t=document.createElement("div").style),!(r in e)){t.font=r;var i=t.fontFamily;if(t.font="",!i)return null;e[r]=i.split(/,\s?/)}return e[r]}}()},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(5),o=r(63),s=r(73),a=r(19),u=function(t){function e(e,r){t.call(this),this.setCoordinates(e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,i){var n=this.flatCoordinates,o=Object(a.g)(t,e,n[0],n[1]);if(o<i){for(var s=this.stride,u=0;u<s;++u)r[u]=n[u];return r.length=s,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(i.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},e.prototype.getType=function(){return n.default.POINT},e.prototype.intersectsExtent=function(t){return Object(i.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.default);e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(20),s=r(5),a=r(63),u=r(99),l=r(73),c=r(77),h=r(87),p=r(154),f=r(263),d=r(261),g=r(116),y=function(t){function e(e,r){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?this.setCoordinates(e,r):this.setFlatCoordinates(r,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,i){return i<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,i))},e.prototype.forEachSegment=function(t){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM)return null;var r=void 0!==e&&e;return Object(h.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,o.default.XY)},e.prototype.getType=function(){return s.default.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.default);e.default=y},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(12)),n=o(r(299));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,r,o){null===e&&(e=Function.prototype);var s=(0,n.default)(e,r);if(void 0===s){var a=(0,i.default)(e);return null===a?void 0:t(a,r,o)}if("value"in s)return s.value;var u=s.get;return void 0!==u?u.call(o):void 0}},function(t,e,r){"use strict";r.r(e),r.d(e,"pan",function(){return u}),r.d(e,"rotate",function(){return l}),r.d(e,"rotateWithoutConstraints",function(){return c}),r.d(e,"zoom",function(){return h}),r.d(e,"zoomByDelta",function(){return p}),r.d(e,"zoomWithoutConstraints",function(){return f});var i=r(25),n=r(58),o=r(173),s=r(19),a=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(o.a.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(o.a.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(i.default);function u(t,e,r){var i=t.getCenter();if(i){var o=t.constrainCenter([i[0]+e[0],i[1]+e[1]]);r?t.animate({duration:r,easing:n.linear,center:o}):t.setCenter(o)}}function l(t,e,r,i){c(t,e=t.constrainRotation(e,0),r,i)}function c(t,e,r,i){if(void 0!==e){var o=t.getRotation(),s=t.getCenter();void 0!==o&&s&&i>0?t.animate({rotation:e,anchor:r,duration:i,easing:n.easeOut}):t.rotate(e,r)}}function h(t,e,r,i,n){f(t,e=t.constrainResolution(e,0,n),r,i)}function p(t,e,r,i){var n=t.getResolution(),o=t.constrainResolution(n,e,0);if(void 0!==o){var a=t.getResolutions();o=Object(s.a)(o,t.getMinResolution()||a[a.length-1],t.getMaxResolution()||a[0])}if(r&&void 0!==o&&o!==n){var u=t.getCenter(),l=t.calculateCenterZoom(o,r);l=t.constrainCenter(l),r=[(o*u[0]-n*l[0])/(o-n),(o*u[1]-n*l[1])/(o-n)]}f(t,o,r,i)}function f(t,e,r,i){if(e){var o=t.getResolution(),s=t.getCenter();if(void 0!==o&&s&&e!==o&&i)t.animate({resolution:e,anchor:r,duration:i,easing:n.easeOut});else{if(r){var a=t.calculateCenterZoom(e,r);t.setCenter(a)}t.setResolution(e)}}}e.default=a},function(t,e,r){"use strict";r.r(e),r.d(e,"FIREFOX",function(){return o}),r.d(e,"SAFARI",function(){return s}),r.d(e,"WEBKIT",function(){return a}),r.d(e,"MAC",function(){return u}),r.d(e,"DEVICE_PIXEL_RATIO",function(){return l}),r.d(e,"CANVAS_LINE_DASH",function(){return c}),r.d(e,"GEOLOCATION",function(){return h}),r.d(e,"TOUCH",function(){return p}),r.d(e,"POINTER",function(){return f}),r.d(e,"MSPOINTER",function(){return d});var i=r(7);r.d(e,"WEBGL",function(){return i.HAS});var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==n.indexOf("firefox"),s=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom"),a=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge"),u=-1!==n.indexOf("macintosh"),l=window.devicePixelRatio||1,c=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),h="geolocation"in navigator,p="ontouchstart"in window,f="PointerEvent"in window,d=!!navigator.msPointerEnabled},function(t,e,r){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,r){"use strict";r.r(e),r.d(e,"GMLNS",function(){return m});var i=r(15),n=r(36),o=r(33),s=r(117),a=r(20),u=r(39),l=r(144),c=r(56),h=r(68),p=r(74),f=r(38),d=r(34),g=r(11),y=r(9),v=r(0),m="http://www.opengis.net/gml",_=/^[\s\xa0]*$/,b=function(t){function e(e){t.call(this);var r=e||{};this.featureType=r.featureType,this.featureNS=r.featureNS,this.srsName=r.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Object(v.makeArrayPusher)(this.readFeaturesInternal),featureMembers:Object(v.makeReplacer)(this.readFeaturesInternal)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,i=null;if("FeatureCollection"==r)i=Object(v.pushParseAndPop)([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var n=e[0],o=n.featureType,s=n.featureNS;if(!o&&t.childNodes){o=[],s={};for(var a=0,u=t.childNodes.length;a<u;++a){var l=t.childNodes[a];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",p=0,f=l.namespaceURI;for(var d in s){if(s[d]===f){h=d;break}++p}h||(s[h="p"+p]=f),o.push(h+":"+c)}}}"featureMember"!=r&&(n.featureType=o,n.featureNS=s)}if("string"==typeof s){var g=s;(s={}).p0=g}var y={},m=Array.isArray(o)?o:[o];for(var _ in s){for(var b={},S=0,x=m.length;S<x;++S)(-1===m[S].indexOf(":")?"p0":m[S].split(":")[0])===_&&(b[m[S].split(":").pop()]="featureMembers"==r?Object(v.makeArrayPusher)(this.readFeatureElement,this):Object(v.makeReplacer)(this.readFeatureElement,this));y[s[_]]=b}i="featureMember"==r?Object(v.pushParseAndPop)(void 0,y,t,e):Object(v.pushParseAndPop)([],y,t,e)}return null===i&&(i=[]),i},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var i=Object(v.pushParseAndPop)(null,this.GEOMETRY_PARSERS,t,e,this);return i?Object(o.transformWithOptions)(i,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var i,o={},s=t.firstElementChild;s;s=s.nextElementSibling){var a=void 0,u=s.localName;0===s.childNodes.length||1===s.childNodes.length&&(3===s.firstChild.nodeType||4===s.firstChild.nodeType)?(a=Object(v.getAllTextContent)(s,!1),_.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(s,e)),a?"boundedBy"!==u&&(i=u):a=this.readFeatureElementInternal(s,e,!1)),o[u]?(o[u]instanceof Array||(o[u]=[o[u]]),o[u].push(a)):o[u]=a;var l=s.attributes.length;if(l>0){o[u]={_content_:o[u]};for(var c=0;c<l;c++){var h=s.attributes[c].name;o[u][h]=s.attributes[c].value}}}if(r){var p=new n.default(o);i&&p.setGeometryName(i);var f=t.getAttribute("fid")||Object(v.getAttributeNS)(t,this.namespace,"id");return f&&p.setId(f),p}return o},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new f.default(r,a.default.XYZ)},e.prototype.readMultiPoint=function(t,e){var r=Object(v.pushParseAndPop)([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new h.default(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=Object(v.pushParseAndPop)([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new c.default(r)},e.prototype.readMultiPolygon=function(t,e){var r=Object(v.pushParseAndPop)([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new p.default(r)},e.prototype.pointMemberParser_=function(t,e){Object(v.parseNode)(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){Object(v.parseNode)(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){Object(v.parseNode)(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new u.default(r,a.default.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){return Object(v.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new l.default(r,a.default.XYZ)},e.prototype.readPolygon=function(t,e){var r=Object(v.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,o,s=r[0],u=[s.length];for(n=1,o=r.length;n<o;++n)Object(i.c)(s,r[n]),u.push(s.length);return new d.default(s,a.default.XYZ,u)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return Object(v.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&Object(g.assign)(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return Object(y.get)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(s.a);b.prototype.namespace=m,b.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(v.makeArrayPusher)(b.prototype.pointMemberParser_),pointMembers:Object(v.makeArrayPusher)(b.prototype.pointMemberParser_)}},b.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(v.makeArrayPusher)(b.prototype.lineStringMemberParser_),lineStringMembers:Object(v.makeArrayPusher)(b.prototype.lineStringMemberParser_)}},b.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(v.makeArrayPusher)(b.prototype.polygonMemberParser_),polygonMembers:Object(v.makeArrayPusher)(b.prototype.polygonMemberParser_)}},b.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(v.makeArrayPusher)(b.prototype.readFlatCoordinatesFromNode_)}},b.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(v.makeArrayPusher)(b.prototype.readLineString)}},b.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(v.makeArrayPusher)(b.prototype.readPolygon)}},b.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(v.makeReplacer)(b.prototype.readFlatLinearRing_)}},e.default=b},function(t,e,r){"use strict";function i(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function n(t){return t[0]>0&&t[1]>0}function o(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}r.r(e),r.d(e,"buffer",function(){return i}),r.d(e,"hasArea",function(){return n}),r.d(e,"scale",function(){return o}),r.d(e,"toSize",function(){return s})},function(t,e,r){"use strict";function i(t,e,r,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=r,i):[t,e,r]}function n(t,e,r){return t+"/"+e+"/"+r}function o(t){return n(t[0],t[1],t[2])}function s(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function u(t){var e,r,i=t[0],n=new Array(i),o=1<<i-1;for(e=0;e<i;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),n[e]=String.fromCharCode(r),o>>=1;return n.join("")}function l(t,e){var r=t[0],i=t[1],n=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,r):e.getFullTileRange(r))||o.containsXY(i,n)}r.r(e),r.d(e,"createOrUpdate",function(){return i}),r.d(e,"getKeyZXY",function(){return n}),r.d(e,"getKey",function(){return o}),r.d(e,"fromKey",function(){return s}),r.d(e,"hash",function(){return a}),r.d(e,"quadKey",function(){return u}),r.d(e,"withinExtentAndZ",function(){return l})},function(t,e,r){"use strict";r.r(e),r.d(e,"centroid",function(){return a});var i=r(31),n=r(41),o=r(11),s=function(t){function e(e){var r=e||{};t.call(this,r),r.handleDownEvent&&(this.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(this.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(this.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(this.handleUpEvent=r.handleUpEvent),r.stopDown&&(this.stopDown=r.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==i.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==i.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==i.default.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==i.default.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===i.default.POINTERDOWN||e===i.default.POINTERDRAG||e===i.default.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==i.default.POINTERUP?delete this.trackedPointers_[r]:t.type==i.default.POINTERDOWN?this.trackedPointers_[r]=e:r in this.trackedPointers_&&(this.trackedPointers_[r]=e),this.targetPointers=Object(o.getValues)(this.trackedPointers_)}},e}(n.default);function a(t){for(var e=t.length,r=0,i=0,n=0;n<e;n++)r+=t[n].clientX,i+=t[n].clientY;return[r/e,i/e]}e.default=s},function(t,e,r){"use strict";r.r(e),r.d(e,"CollectionEvent",function(){return a});var i=r(185),n=r(51),o=r(25),s="length",a=function(t){function e(e,r){t.call(this,e),this.element=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(35).default),u=function(t){function e(e,r){t.call(this);var i=r||{};if(this.unique_=!!i.unique,this.array_=e||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(s)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new a(n.default.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new a(n.default.REMOVE,e)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new a(n.default.REMOVE,i)),this.dispatchEvent(new a(n.default.ADD,e))}else{for(var o=r;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(s,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new i.a(58)},e}(o.default);e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"METERS_PER_UNIT",function(){return n});var i={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},n={};n[i.DEGREES]=2*Math.PI*6370997/360,n[i.FEET]=.3048,n[i.METERS]=1,n[i.USFEET]=1200/3937,e.default=i},function(t,e,r){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,r){"use strict";r.r(e),e.default={ADD:"add",REMOVE:"remove"}},function(t,e,r){"use strict";function i(t,e,r,i,n,o){for(var s=o||[],a=0,u=e;u<r;u+=i){var l=t[u],c=t[u+1];s[a++]=n[0]*l+n[2]*c+n[4],s[a++]=n[1]*l+n[3]*c+n[5]}return o&&s.length!=a&&(s.length=a),s}function n(t,e,r,i,n,o,s){for(var a=s||[],u=Math.cos(n),l=Math.sin(n),c=o[0],h=o[1],p=0,f=e;f<r;f+=i){var d=t[f]-c,g=t[f+1]-h;a[p++]=c+d*u-g*l,a[p++]=h+d*l+g*u;for(var y=f+2;y<f+i;++y)a[p++]=t[y]}return s&&a.length!=p&&(a.length=p),a}function o(t,e,r,i,n,o,s,a){for(var u=a||[],l=s[0],c=s[1],h=0,p=e;p<r;p+=i){var f=t[p]-l,d=t[p+1]-c;u[h++]=l+n*f,u[h++]=c+o*d;for(var g=p+2;g<p+i;++g)u[h++]=t[g]}return a&&u.length!=h&&(u.length=h),u}function s(t,e,r,i,n,o,s){for(var a=s||[],u=0,l=e;l<r;l+=i){a[u++]=t[l]+n,a[u++]=t[l+1]+o;for(var c=l+2;c<l+i;++c)a[u++]=t[c]}return s&&a.length!=u&&(a.length=u),a}r.d(e,"c",function(){return i}),r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"d",function(){return s})},function(t,e,r){t.exports={default:r(507),__esModule:!0}},function(t,e){var r=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgsServiceBase=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e),r=r||{};var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.CLASS_NAME="Zondy.IgsServiceBase",o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){this.request({method:t&&t.method?t.method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){(t=(0,l.transformResult)(t)).succeed?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events&&this.events.triggerEvent("processFailed",{result:t})}}]),e}(r(395).CommonServiceBase);e.IgsServiceBase=h,Zondy.Service.IgsServiceBase=h},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(20),s=r(5),a=r(39),u=r(63),l=r(99),c=r(73),h=r(77),p=r(87),f=r(154),d=r(116),g=function(t){function e(e,r,n){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,r);else if(void 0!==r&&n)this.setFlatCoordinates(r,e),this.ends_=n;else{for(var o=this.getLayout(),s=e,a=[],u=[],l=0,c=s.length;l<c;++l){var h=s[l];0===l&&(o=h.getLayout()),Object(i.c)(a,h.getFlatCoordinates()),u.push(a.length)}this.setFlatCoordinates(o,a),this.ends_=u}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,i){return i<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(l.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(l.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,i))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM||0===this.flatCoordinates.length)return null;var i=void 0!==e&&e,n=void 0!==r&&r;return Object(p.c)(this.flatCoordinates,0,this.ends_,this.stride,t,i,n)},e.prototype.getCoordinates=function(){return Object(h.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new a.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,i=[],n=0,o=0,s=e.length;o<s;++o){var u=e[o],l=new a.default(t.slice(n,u),r);i.push(l),n=u}return i},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,o=this.stride,s=0,a=n.length;s<a;++s){var u=n[s],l=Object(p.a)(e,r,u,o,.5);Object(i.c)(t,l),r=u}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,i),new e(r,o.default.XY,i)},e.prototype.getType=function(){return s.default.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Object(c.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(u.default);e.default=g},function(t,e,r){"use strict";r.r(e),r.d(e,"asString",function(){return a}),r.d(e,"fromString",function(){return u}),r.d(e,"asArray",function(){return l}),r.d(e,"normalize",function(){return c}),r.d(e,"toString",function(){return h});var i=r(23),n=r(19),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$/i;function a(t){return"string"==typeof t?t:h(t)}var u=function(){var t={},e=0;return function(r){var n;if(t.hasOwnProperty(r))n=t[r];else{if(e>=1024){var a=0;for(var u in t)0==(3&a++)&&(delete t[u],--e)}n=function(t){var e,r,n,a,u;if(s.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}(t)),o.exec(t)){var l,h=t.length-1;l=h<=4?1:2;var p=4===h||8===h;e=parseInt(t.substr(1+0*l,l),16),r=parseInt(t.substr(1+1*l,l),16),n=parseInt(t.substr(1+2*l,l),16),a=p?parseInt(t.substr(1+3*l,l),16):255,1==l&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,p&&(a=(a<<4)+a)),u=[e,r,n,a/255]}else 0==t.indexOf("rgba(")?c(u=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((u=t.slice(4,-1).split(",").map(Number)).push(1),c(u)):Object(i.a)(!1,14);return u}(r),t[r]=n,++e}return n}}();function l(t){return Array.isArray(t)?t:u(t)}function c(t){return t[0]=Object(n.a)(t[0]+.5|0,0,255),t[1]=Object(n.a)(t[1]+.5|0,0,255),t[2]=Object(n.a)(t[2]+.5|0,0,255),t[3]=Object(n.a)(t[3],0,1),t}function h(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+r+","+i+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,r){"use strict";function i(t){return Math.pow(t,3)}function n(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}function a(t){return t<.5?o(2*t):1-o(2*(t-.5))}r.r(e),r.d(e,"easeIn",function(){return i}),r.d(e,"easeOut",function(){return n}),r.d(e,"inAndOut",function(){return o}),r.d(e,"linear",function(){return s}),r.d(e,"upAndDown",function(){return a})},function(t,e,r){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(t,e,r){"use strict";r.r(e),r.d(e,"getForProjection",function(){return c}),r.d(e,"wrapX",function(){return h}),r.d(e,"createForExtent",function(){return p}),r.d(e,"createXYZ",function(){return f}),r.d(e,"createForProjection",function(){return g}),r.d(e,"extentFromProjection",function(){return y});var i=r(86),n=r(45),o=r(1),s=r(177),a=r(9),u=r(49),l=r(101);function c(t){var e=t.getDefaultTileGrid();return e||(e=g(t),t.setDefaultTileGrid(e)),e}function h(t,e,r){var i=e[0],n=t.getTileCoordCenter(e),s=y(r);if(Object(o.containsCoordinate)(s,n))return e;var a=Object(o.getWidth)(s),u=Math.ceil((s[0]-n[0])/a);return n[0]+=a*u,t.getTileCoordForCoordAndZ(n,i)}function p(t,e,r,i){var n=void 0!==i?i:s.a.TOP_LEFT,a=d(t,e,r);return new l.default({extent:t,origin:Object(o.getCorner)(t,n),resolutions:a,tileSize:r})}function f(t){var e=t||{},r=e.extent||Object(a.get)("EPSG:3857").getExtent(),i={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d(r,e.maxZoom,e.tileSize)};return new l.default(i)}function d(t,e,r){for(var s=void 0!==e?e:i.a,a=Object(o.getHeight)(t),u=Object(o.getWidth)(t),l=Object(n.toSize)(void 0!==r?r:i.b),c=Math.max(u/l[0],a/l[1]),h=s+1,p=new Array(h),f=0;f<h;++f)p[f]=c/Math.pow(2,f);return p}function g(t,e,r,i){return p(y(t),e,r,i)}function y(t){var e=(t=Object(a.get)(t)).getExtent();if(!e){var r=180*a.METERS_PER_UNIT[u.default.DEGREES]/t.getMetersPerUnit();e=Object(o.createOrUpdate)(-r,-r,r,r)}return e}},function(t,e,r){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,r){"use strict";r.r(e);var i=r(29),n=r(134),o=r(25),s=r(24),a=r(3),u=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:i.c,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(s.removeNode)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(s.removeNode)(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)Object(a.unlistenByKey)(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==i.c&&this.listenerKeys.push(Object(a.listen)(t,n.a.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(o.default);e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"getStrideForLayout",function(){return c}),r.d(e,"transformGeom2D",function(){return h});var i=r(4),n=r(1),o=r(89),s=r(20),a=r(52),u=r(11),l=function(t){function e(){t.call(this),this.layout=s.default.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(i.abstract)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=r,r):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=c(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(i.abstract)()},e.prototype.setLayout=function(t,e,r){var i;if(t)i=c(t);else{for(var n=0;n<r;++n){if(0===e.length)return this.layout=s.default.XY,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=s.default.XY:3==t?e=s.default.XYZ:4==t&&(e=s.default.XYZM),e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Object(a.a)(r,0,r.length,i,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var i=e;void 0===i&&(i=t);var o=r;o||(o=Object(n.getCenter)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();Object(a.b)(s,0,s.length,u,t,i,o,s),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();Object(a.d)(r,0,r.length,i,t,e,r),this.changed()}},e}(o.default);function c(t){var e;return t==s.default.XY?e=2:t==s.default.XYZ||t==s.default.XYM?e=3:t==s.default.XYZM&&(e=4),e}function h(t,e,r){var i=t.getFlatCoordinates();if(i){var n=t.getStride();return Object(a.c)(i,0,i.length,n,e,r)}return null}e.default=l},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o});var i=r(30),n=[i.a.POLYGON,i.a.CIRCLE,i.a.LINE_STRING,i.a.IMAGE,i.a.TEXT,i.a.DEFAULT],o={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1}},function(t,e,r){"use strict";e.a={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},function(t,e,r){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,r){"use strict";r.r(e);var i=r(71),n=r(4),o=r(142),s=r(187),a=r(17),u=r(3),l=r(10),c=r(9),h=r(95),p=r(1),f=r(19),d=r(85),g=r(274),y=function(t){function e(e,r,n,o,s,u,l,c,h,y,v){t.call(this,s,a.default.IDLE),this.renderEdges_=void 0!==v&&v,this.pixelRatio_=l,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=r,this.targetTileGrid_=o,this.wrappedTileCoord_=u||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var m=o.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent(),b=this.sourceTileGrid_.getExtent(),S=_?Object(p.getIntersection)(m,_):m;if(0!==Object(p.getArea)(S)){var x=e.getExtent();x&&(b=b?Object(p.getIntersection)(b,x):x);var O=o.getResolution(this.wrappedTileCoord_[0]),E=Object(p.getCenter)(S),C=Object(d.a)(e,n,E,O);if(!isFinite(C)||C<=0)this.state=a.default.EMPTY;else{var T=void 0!==y?y:i.b;if(this.triangulation_=new g.a(e,n,S,b,C*T),0!==this.triangulation_.getTriangles().length){this.sourceZ_=r.getZForResolution(C);var P=this.triangulation_.calculateSourceExtent();if(b&&(e.canWrapX()?(P[1]=Object(f.a)(P[1],b[1],b[3]),P[3]=Object(f.a)(P[3],b[1],b[3])):P=Object(p.getIntersection)(P,b)),Object(p.getArea)(P)){for(var w=r.getTileRangeForExtentAndZ(P,this.sourceZ_),I=w.minX;I<=w.maxX;I++)for(var L=w.minY;L<=w.maxY;L++){var R=h(this.sourceZ_,I,L,l);R&&this.sourceTiles_.push(R)}0===this.sourceTiles_.length&&(this.state=a.default.EMPTY)}else this.state=a.default.EMPTY}else this.state=a.default.EMPTY}}else this.state=a.default.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==a.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,i){e&&e.getState()==a.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.default.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),i="number"==typeof r?r:r[0],n="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(d.b)(i,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=a.default.LOADED}this.changed()},e.prototype.load=function(){if(this.state==a.default.IDLE){this.state=a.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,i){var n=e.getState();if(n==a.default.IDLE||n==a.default.LOADING){t++;var o=Object(u.listen)(e,l.default.CHANGE,function(r){var i=e.getState();i!=a.default.LOADED&&i!=a.default.ERROR&&i!=a.default.EMPTY||(Object(u.unlistenByKey)(o),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,r){t.getState()==a.default.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(u.unlistenByKey),this.sourcesListenerKeys_=null},e}(h.default),v=r(232),m=r(46),_=r(60),b=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:S,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:o.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(!i.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,r){if(i.a){var n=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==n?r:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[o];s.expireCache(s==n?r:{})}}else t.prototype.expireCache.call(this,e,r)},e.prototype.getGutterForProjection=function(t){return i.a&&this.getProjection()&&t&&!Object(c.equivalent)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(i.a&&this.getProjection()&&e&&!Object(c.equivalent)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!i.a)return t.prototype.getTileGridForProjection.call(this,e);var r=this.getProjection();if(!this.tileGrid||r&&!Object(c.equivalent)(r,e)){var o=Object(n.getUid)(e);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=Object(_.getForProjection)(e)),this.tileGridForProjection[o]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!i.a)return t.prototype.getTileCacheForProjection.call(this,e);var r=this.getProjection();if(!r||Object(c.equivalent)(r,e))return this.tileCache;var o=Object(n.getUid)(e);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new s.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},e.prototype.createTile_=function(t,e,r,i,n,o){var s=[t,e,r],c=this.getTileCoordForTileUrlFunction(s,n),h=c?this.tileUrlFunction(c,i,n):void 0,p=new this.tileClass(s,void 0!==h?a.default.IDLE:a.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=o,Object(u.listen)(p,l.default.CHANGE,this.handleTileChange,this),p},e.prototype.getTile=function(t,e,r,n,o){var s=this.getProjection();if(i.a&&s&&o&&!Object(c.equivalent)(s,o)){var a,u=this.getTileCacheForProjection(o),l=[t,e,r],h=Object(m.getKey)(l);u.containsKey(h)&&(a=u.get(h));var p=this.getKey();if(a&&a.key==p)return a;var f=this.getTileGridForProjection(s),d=this.getTileGridForProjection(o),g=this.getTileCoordForTileUrlFunction(l,o),v=new y(s,f,o,d,l,g,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,i){return this.getTileInternal(t,e,r,i,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return v.key=p,a?(v.interimTile=a,v.refreshInterimChain(),u.replace(h,v)):u.set(h,v),v}return this.getTileInternal(t,e,r,n,s||o)},e.prototype.getTileInternal=function(t,e,r,i,n){var o=null,s=Object(m.getKeyZXY)(t,e,r),u=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=u){var l=o;o=this.createTile_(t,e,r,i,n,u),l.getState()==a.default.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,r,i,n,u),this.tileCache.set(s,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(i.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(i.a){var r=Object(c.get)(t);if(r){var o=Object(n.getUid)(r);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},e}(v.default);function S(t,e){t.getImage().src=e}e.default=b},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(5),s=r(38),a=r(63),u=r(73),l=r(77),c=r(19),h=function(t){function e(e,r){t.call(this),r&&!Array.isArray(e[0])?this.setFlatCoordinates(r,e):this.setCoordinates(e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(i.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,i){if(i<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;for(var o=this.flatCoordinates,s=this.stride,a=0,u=o.length;a<u;a+=s){var l=Object(c.g)(t,e,o[a],o[a+1]);if(l<i){i=l;for(var h=0;h<s;++h)r[h]=o[a+h];r.length=s}}return i},e.prototype.getCoordinates=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new s.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,i=[],n=0,o=t.length;n<o;n+=r){var a=new s.default(t.slice(n,n+r),e);i.push(a)}return i},e.prototype.getType=function(){return o.default.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,i=0,o=e.length;i<o;i+=r){var s=e[i],a=e[i+1];if(Object(n.containsXY)(t,s,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.default);e.default=h},function(t,e,r){"use strict";r.r(e),r.d(e,"visibleAtResolution",function(){return f});var i=r(3),n=r(10),o=r(4),s=r(25),a=r(227),u=r(61),l=r(11),c=r(59),h=r(43),p=function(t){function e(e){var r=Object(l.assign)({},e);delete r.source,t.call(this,r),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(i.listen)(this,Object(s.getChangeEventType)(u.a.SOURCE),this.handleSourcePropertyChange_,this);var n=e.source?e.source:null;this.setSource(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(u.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(i.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(i.listen)(t,n.default.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(i.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(i.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(i.listen)(t,c.a.PRECOMPOSE,function(t){var e=t,r=this.getLayerState();r.managed=!1,void 0===this.getZIndex()&&(r.zIndex=1/0),e.frameState.layerStatesArray.push(r),e.frameState.layerStates[Object(o.getUid)(this)]=r},this),this.mapRenderKey_=Object(i.listen)(this,n.default.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(u.a.SOURCE,t)},e}(a.default);function f(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.default=p},function(t,e,r){"use strict";r.r(e),r.d(e,"toFunction",function(){return l}),r.d(e,"createDefaultStyle",function(){return h}),r.d(e,"createEditingStyle",function(){return p});var i=r(23),n=r(5),o=r(266),s=r(98),a=r(94),u=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function l(t){var e,r;"function"==typeof t?e=t:(Array.isArray(t)?r=t:(Object(i.a)("function"==typeof t.getZIndex,41),r=[t]),e=function(){return r});return e}u.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new u({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(t){this.renderer_=t},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(t){this.fill_=t},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(t){this.image_=t},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(t){this.stroke_=t},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(t){this.text_=t},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},u.prototype.setZIndex=function(t){this.zIndex_=t};var c=null;function h(t,e){if(!c){var r=new s.default({color:"rgba(255,255,255,0.4)"}),i=new a.default({color:"#3399CC",width:1.25});c=[new u({image:new o.default({fill:r,stroke:i,radius:5}),fill:r,stroke:i})]}return c}function p(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[n.default.POLYGON]=[new u({fill:new s.default({color:[255,255,255,.5]})})],t[n.default.MULTI_POLYGON]=t[n.default.POLYGON],t[n.default.LINE_STRING]=[new u({stroke:new a.default({color:e,width:5})}),new u({stroke:new a.default({color:r,width:3})})],t[n.default.MULTI_LINE_STRING]=t[n.default.LINE_STRING],t[n.default.CIRCLE]=t[n.default.POLYGON].concat(t[n.default.LINE_STRING]),t[n.default.POINT]=[new u({image:new o.default({radius:6,fill:new s.default({color:r}),stroke:new a.default({color:e,width:1.5})}),zIndex:1/0})],t[n.default.MULTI_POINT]=t[n.default.POINT],t[n.default.GEOMETRY_COLLECTION]=t[n.default.POLYGON].concat(t[n.default.LINE_STRING],t[n.default.POINT]),t}function f(t){return t.getGeometry()}e.default=u},function(t,e,r){"use strict";r.d(e,"b",function(){return i}),r.d(e,"a",function(){return n});var i=.5,n=!0},function(t,e,r){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,r){"use strict";function i(t,e,r,i){for(var n=0,o=r.length;n<o;++n)t[e++]=r[n];return e}function n(t,e,r,i){for(var n=0,o=r.length;n<o;++n)for(var s=r[n],a=0;a<i;++a)t[e++]=s[a];return e}function o(t,e,r,i,o){for(var s=o||[],a=0,u=0,l=r.length;u<l;++u){var c=n(t,e,r[u],i);s[a++]=c,e=c}return s.length=a,s}function s(t,e,r,i,n){for(var s=n||[],a=0,u=0,l=r.length;u<l;++u){var c=o(t,e,r[u],i,s[a]);s[a++]=c,e=c[c.length-1]}return s.length=a,s}r.r(e),r.d(e,"deflateCoordinate",function(){return i}),r.d(e,"deflateCoordinates",function(){return n}),r.d(e,"deflateCoordinatesArray",function(){return o}),r.d(e,"deflateMultiCoordinatesArray",function(){return s})},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(20),s=r(5),a=r(68),u=r(34),l=r(63),c=r(153),h=r(267),p=r(99),f=r(103),d=r(73),g=r(77),y=r(172),v=r(154),m=r(79),_=r(116),b=function(t){function e(e,r,n){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=this.getLayout(),s=e,a=[],u=[],l=0,c=s.length;l<c;++l){var h=s[l];0===l&&(o=h.getLayout());for(var p=a.length,f=h.getEnds(),d=0,g=f.length;d<g;++d)f[d]+=p;Object(i.c)(a,h.getFlatCoordinates()),u.push(f)}r=o,e=a,n=u}void 0!==r&&n?(this.setFlatCoordinates(r,e),this.endss_=n):this.setCoordinates(e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;Object(i.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),i=0;i<t;++i)r[i]=this.endss_[i].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,i){return i<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(p.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(p.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,i))},e.prototype.containsXY=function(t,e){return Object(f.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(c.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.e)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(g.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Object(h.a)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(y.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new a.default(this.getFlatInteriorPoints().slice(),o.default.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.c)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.e)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],i=[];return r.length=Object(_.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,i),new e(r,o.default.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(var o=0,s=i.length;o<s;++o)i[o]-=e;return new u.default(this.flatCoordinates.slice(e,n),this.layout,i)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,i=[],n=0,o=0,s=r.length;o<s;++o){var a=r[o].slice(),l=a[a.length-1];if(0!==n)for(var c=0,h=a.length;c<h;++c)a[c]-=n;var p=new u.default(e.slice(n,l),t,a);i.push(p),n=l}return i},e.prototype.getType=function(){return s.default.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=Object(d.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var i=r[r.length-1];this.flatCoordinates.length=0===i.length?0:i[i.length-1]}this.changed()},e}(l.default);e.default=b},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(71),o=r(27),s=r(15),a=r(35),u=r(1),l=r(9),c=r(151),h=r(3),p=r(10),f=r(85),d=r(274),g=function(t){function e(e,r,i,s,a,l){var c=e.getExtent(),h=r.getExtent(),p=h?Object(u.getIntersection)(i,h):i,g=Object(u.getCenter)(p),y=Object(f.a)(e,r,g,s),v=n.b,m=new d.a(e,r,p,c,y*v),_=l(m.calculateSourceExtent(),y,a),b=o.a.LOADED;_&&(b=o.a.IDLE);var S=_?_.getPixelRatio():1;t.call(this,i,s,S,b),this.targetProj_=r,this.maxSourceExtent_=c,this.triangulation_=m,this.targetResolution_=s,this.targetExtent_=i,this.sourceImage_=_,this.sourcePixelRatio_=S,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.a.LOADED){var e=Object(u.getWidth)(this.targetExtent_)/this.targetResolution_,r=Object(u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(f.b)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.a.LOADED||t==o.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(h.listen)(this.sourceImage_,p.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=o.a.LOADED&&e!=o.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Object(h.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(c.a),y=r(169);r.d(e,"defaultImageLoadFunction",function(){return _});var v=function(t){function e(e,r){t.call(this,e),this.image=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),m=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(s.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,i){var o=this.getProjection();if(n.a&&o&&i&&!Object(l.equivalent)(o,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(l.equivalent)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&Object(u.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new g(o,i,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,o)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(i=o),this.getImageInternal(t,e,r,i)},e.prototype.getImageInternal=function(t,e,r,n){return Object(i.abstract)()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case o.a.LOADING:this.loading=!0,this.dispatchEvent(new v("imageloadstart",e));break;case o.a.LOADED:this.loading=!1,this.dispatchEvent(new v("imageloadend",e));break;case o.a.ERROR:this.loading=!1,this.dispatchEvent(new v("imageloaderror",e))}},e}(y.default);function _(t,e){t.getImage().src=e}e.default=m},function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return u}),r.d(e,"d",function(){return l}),r.d(e,"c",function(){return c});var i=r(23),n=r(19),o=r(46);function s(t,e){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,s=/\{-y\}/g;return function(a,u,l){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,function(){return(-a[2]-1).toString()}).replace(s,function(){var t=a[0],r=e.getFullTileRange(t);return Object(i.a)(r,55),(r.getHeight()+a[2]).toString()}):void 0}}function a(t,e){for(var r=t.length,i=new Array(r),n=0;n<r;++n)i[n]=s(t[n],e);return u(i)}function u(t){return 1===t.length?t[0]:function(e,r,i){if(e){var s=Object(o.hash)(e),a=Object(n.d)(s,t.length);return t[a](e,r,i)}}}function l(t,e,r){}function c(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var i,n=r[1].charCodeAt(0),o=r[2].charCodeAt(0);for(i=n;i<=o;++i)e.push(t.replace(r[0],String.fromCharCode(i)));return e}if(r=r=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(r[2],10),a=parseInt(r[1],10);a<=s;a++)e.push(t.replace(r[0],a.toString()));return e}return e.push(t),e}},function(t,e,r){"use strict";function i(t,e,r,i,n){for(var o=void 0!==n?n:[],s=0,a=e;a<r;a+=i)o[s++]=t.slice(a,a+i);return o.length=s,o}function n(t,e,r,n,o){for(var s=void 0!==o?o:[],a=0,u=0,l=r.length;u<l;++u){var c=r[u];s[a++]=i(t,e,c,n,s[a]),e=c}return s.length=a,s}function o(t,e,r,i,o){for(var s=void 0!==o?o:[],a=0,u=0,l=r.length;u<l;++u){var c=r[u];s[a++]=n(t,e,c,i,s[a]),e=c[c.length-1]}return s.length=a,s}r.d(e,"a",function(){return i}),r.d(e,"b",function(){return n}),r.d(e,"c",function(){return o})},function(t,e,r){"use strict";r.r(e),r.d(e,"asColorLike",function(){return n});var i=r(57);function n(t){return Array.isArray(t)?Object(i.toString)(t):t}},function(t,e,r){"use strict";function i(t,e,r,i){for(;e<r-i;){for(var n=0;n<i;++n){var o=t[e+n];t[e+n]=t[r-i+n],t[r-i+n]=o}e+=i,r-=i}}function n(t,e,r,i){for(var n=0,o=t[r-i],s=t[r-i+1];e<r;e+=i){var a=t[e],u=t[e+1];n+=(a-o)*(u+s),o=a,s=u}return n>0}function o(t,e,r,i,o){for(var s=void 0!==o&&o,a=0,u=r.length;a<u;++a){var l=r[a],c=n(t,e,l,i);if(0===a){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;e=l}return!0}function s(t,e,r,i,n){for(var s=0,a=r.length;s<a;++s)if(!o(t,e,r[s],i,n))return!1;return!0}function a(t,e,r,o,s){for(var a=void 0!==s&&s,u=0,l=r.length;u<l;++u){var c=r[u],h=n(t,e,c,o);(0===u?a&&h||!a&&!h:a&&!h||!a&&h)&&i(t,e,c,o),e=c}return e}function u(t,e,r,i,n){for(var o=0,s=r.length;o<s;++o)e=a(t,e,r[o],i,n);return e}r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return s}),r.d(e,"d",function(){return a}),r.d(e,"e",function(){return u})},function(t,e,r){"use strict";e.a={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},function(t,e,r){"use strict";e.a={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,r){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(t,e,r){"use strict";r.d(e,"b",function(){return n}),r.d(e,"a",function(){return o}),r.d(e,"c",function(){return s}),r(11);var i={};function n(){i={}}function o(t,e,r){var n=t.getCode(),o=e.getCode();n in i||(i[n]={}),i[n][o]=r}function s(t,e){var r;return t in i&&e in i[t]&&(r=i[t][e]),r}},function(t,e,r){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return l});var i=r(24),n=r(1),o=r(19),s=r(9);function a(t,e,r,i){var o=Object(s.transform)(r,e,t),a=Object(s.getPointResolution)(e,i,r),u=e.getMetersPerUnit();void 0!==u&&(a*=u);var l=t.getMetersPerUnit();void 0!==l&&(a/=l);var c=t.getExtent();if(!c||Object(n.containsCoordinate)(c,o)){var h=Object(s.getPointResolution)(t,a,o)/a;isFinite(h)&&h>0&&(a/=h)}return a}function u(t,e,r,i){var n=r-t,o=i-e,s=Math.sqrt(n*n+o*o);return[Math.round(r+n/s),Math.round(i+o/s)]}function l(t,e,r,s,a,l,c,h,p,f,d){var g=Object(i.createCanvasContext2D)(Math.round(r*t),Math.round(r*e));if(0===p.length)return g.canvas;g.scale(r,r);var y=Object(n.createEmpty)();p.forEach(function(t,e,r){Object(n.extend)(y,t.extent)});var v=Object(n.getWidth)(y),m=Object(n.getHeight)(y),_=Object(i.createCanvasContext2D)(Math.round(r*v/s),Math.round(r*m/s)),b=r/s;p.forEach(function(t,e,r){var i=t.extent[0]-y[0],o=-(t.extent[3]-y[3]),s=Object(n.getWidth)(t.extent),a=Object(n.getHeight)(t.extent);_.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,i*b,o*b,s*b,a*b)});var S=Object(n.getTopLeft)(c);return h.getTriangles().forEach(function(t,e,i){var n=t.source,a=t.target,c=n[0][0],h=n[0][1],p=n[1][0],f=n[1][1],d=n[2][0],v=n[2][1],m=(a[0][0]-S[0])/l,b=-(a[0][1]-S[1])/l,x=(a[1][0]-S[0])/l,O=-(a[1][1]-S[1])/l,E=(a[2][0]-S[0])/l,C=-(a[2][1]-S[1])/l,T=c,P=h;c=0,h=0;var w=[[p-=T,f-=P,0,0,x-m],[d-=T,v-=P,0,0,E-m],[0,0,p,f,O-b],[0,0,d,v,C-b]],I=Object(o.f)(w);if(I){g.save(),g.beginPath();var L=(m+x+E)/3,R=(b+O+C)/3,M=u(L,R,m,b),A=u(L,R,x,O),j=u(L,R,E,C);g.moveTo(A[0],A[1]),g.lineTo(M[0],M[1]),g.lineTo(j[0],j[1]),g.clip(),g.transform(I[0],I[2],I[1],I[3],m,b),g.translate(y[0]-T,y[3]-P),g.scale(s/r,-s/r),g.drawImage(_.canvas,0,0),g.restore()}}),d&&(g.save(),g.strokeStyle="black",g.lineWidth=1,h.getTriangles().forEach(function(t,e,r){var i=t.target,n=(i[0][0]-S[0])/l,o=-(i[0][1]-S[1])/l,s=(i[1][0]-S[0])/l,a=-(i[1][1]-S[1])/l,u=(i[2][0]-S[0])/l,c=-(i[2][1]-S[1])/l;g.beginPath(),g.moveTo(s,a),g.lineTo(n,o),g.lineTo(u,c),g.closePath(),g.stroke()}),g.restore()),g.canvas}},function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return n});var i=42,n=256},function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s}),r.d(e,"c",function(){return a});var i=r(15),n=r(19);function o(t,e,r,o,s,a){var u=NaN,l=NaN,c=(r-e)/o;if(1===c)u=t[e],l=t[e+1];else if(2==c)u=(1-s)*t[e]+s*t[e+o],l=(1-s)*t[e+1]+s*t[e+o+1];else if(0!==c){for(var h=t[e],p=t[e+1],f=0,d=[0],g=e+o;g<r;g+=o){var y=t[g],v=t[g+1];f+=Math.sqrt((y-h)*(y-h)+(v-p)*(v-p)),d.push(f),h=y,p=v}var m=s*f,_=Object(i.a)(d,m);if(_<0){var b=(m-d[-_-2])/(d[-_-1]-d[-_-2]),S=e+(-_-2)*o;u=Object(n.c)(t[S],t[S+o],b),l=Object(n.c)(t[S+1],t[S+o+1],b)}else u=t[e+_*o],l=t[e+_*o+1]}return a?(a[0]=u,a[1]=l,a):[u,l]}function s(t,e,r,i,o,s){if(r==e)return null;var a;if(o<t[e+i-1])return s?((a=t.slice(e,e+i))[i-1]=o,a):null;if(t[r-1]<o)return s?((a=t.slice(r-i,r))[i-1]=o,a):null;if(o==t[e+i-1])return t.slice(e,e+i);for(var u=e/i,l=r/i;u<l;){var c=u+l>>1;o<t[(c+1)*i-1]?l=c:u=c+1}var h=t[u*i-1];if(o==h)return t.slice((u-1)*i,(u-1)*i+i);var p=(o-h)/(t[(u+1)*i-1]-h);a=[];for(var f=0;f<i-1;++f)a.push(Object(n.c)(t[(u-1)*i+f],t[u*i+f],p));return a.push(o),a}function a(t,e,r,i,n,o,a){if(a)return s(t,e,r[r.length-1],i,n,o);var u;if(n<t[i-1])return o?((u=t.slice(0,i))[i-1]=n,u):null;if(t[t.length-1]<n)return o?((u=t.slice(t.length-i))[i-1]=n,u):null;for(var l=0,c=r.length;l<c;++l){var h=r[l];if(e!=h){if(n<t[e+i-1])return null;if(n<=t[h-1])return s(t,e,h,i,n,!1);e=h}}return null}},function(t,e,r){"use strict";r.r(e);var i=r(98),n=r(262),o=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new i.default({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:n.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},o.prototype.getOverflow=function(){return this.overflow_},o.prototype.getFont=function(){return this.font_},o.prototype.getMaxAngle=function(){return this.maxAngle_},o.prototype.getPlacement=function(){return this.placement_},o.prototype.getOffsetX=function(){return this.offsetX_},o.prototype.getOffsetY=function(){return this.offsetY_},o.prototype.getFill=function(){return this.fill_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.getText=function(){return this.text_},o.prototype.getTextAlign=function(){return this.textAlign_},o.prototype.getTextBaseline=function(){return this.textBaseline_},o.prototype.getBackgroundFill=function(){return this.backgroundFill_},o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},o.prototype.getPadding=function(){return this.padding_},o.prototype.setOverflow=function(t){this.overflow_=t},o.prototype.setFont=function(t){this.font_=t},o.prototype.setMaxAngle=function(t){this.maxAngle_=t},o.prototype.setOffsetX=function(t){this.offsetX_=t},o.prototype.setOffsetY=function(t){this.offsetY_=t},o.prototype.setPlacement=function(t){this.placement_=t},o.prototype.setFill=function(t){this.fill_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setStroke=function(t){this.stroke_=t},o.prototype.setText=function(t){this.text_=t},o.prototype.setTextAlign=function(t){this.textAlign_=t},o.prototype.setTextBaseline=function(t){this.textBaseline_=t},o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},o.prototype.setPadding=function(t){this.padding_=t},e.default=o},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(25),o=r(1),s=r(52),a=r(9),u=r(49),l=r(18),c=Object(l.c)(),h=function(t){function e(){t.call(this),this.extent_=Object(o.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return Object(i.abstract)()},e.prototype.closestPointXY=function(t,e,r,n){return Object(i.abstract)()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(i.abstract)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(o.returnOrUpdate)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(i.abstract)()},e.prototype.scale=function(t,e,r){Object(i.abstract)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(i.abstract)()},e.prototype.getType=function(){return Object(i.abstract)()},e.prototype.applyTransform=function(t){Object(i.abstract)()},e.prototype.intersectsExtent=function(t){return Object(i.abstract)()},e.prototype.translate=function(t,e){Object(i.abstract)()},e.prototype.transform=function(t,e){var r=Object(a.get)(t),i=r.getUnits()==u.default.TILE_PIXELS?function(t,i,n){var u=r.getExtent(),h=r.getWorldExtent(),p=Object(o.getHeight)(h)/Object(o.getHeight)(u);return Object(l.b)(c,h[0],h[3],p,-p,0,0,0),Object(s.c)(t,0,t.length,n,c,i),Object(a.getTransform)(r,e)(t,i,n)}:Object(a.getTransform)(r,e);return this.applyTransform(i),this},e}(n.default);e.default=h},function(t,e,r){"use strict";r.d(e,"a",function(){return a});var i=r(48),n=r(214),o=r(213),s=r(212);function a(t){var e=t||{},r=new i.default;return(void 0===e.zoom||e.zoom)&&r.push(new s.default(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new o.default(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new n.default(e.attributionOptions)),r}},function(t,e,r){"use strict";r.d(e,"a",function(){return l}),r.d(e,"b",function(){return c}),r.d(e,"c",function(){return h}),r.d(e,"d",function(){return p});var i=r(4),n=r(27),o=r(5),s=r(30),a=.5,u={Point:function(t,e,r,i){var o=r.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var a=t.getReplay(r.getZIndex(),s.a.IMAGE);a.setImageStyle(o,t.addDeclutter(!1)),a.drawPoint(e,i)}var u=r.getText();if(u){var l=t.getReplay(r.getZIndex(),s.a.TEXT);l.setTextStyle(u,t.addDeclutter(!!o)),l.drawText(e,i)}},LineString:function(t,e,r,i){var n=r.getStroke();if(n){var o=t.getReplay(r.getZIndex(),s.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,i)}var a=r.getText();if(a){var u=t.getReplay(r.getZIndex(),s.a.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,i)}},Polygon:function(t,e,r,i){var n=r.getFill(),o=r.getStroke();if(n||o){var a=t.getReplay(r.getZIndex(),s.a.POLYGON);a.setFillStrokeStyle(n,o),a.drawPolygon(e,i)}var u=r.getText();if(u){var l=t.getReplay(r.getZIndex(),s.a.TEXT);l.setTextStyle(u,t.addDeclutter(!1)),l.drawText(e,i)}},MultiPoint:function(t,e,r,i){var o=r.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var a=t.getReplay(r.getZIndex(),s.a.IMAGE);a.setImageStyle(o,t.addDeclutter(!1)),a.drawMultiPoint(e,i)}var u=r.getText();if(u){var l=t.getReplay(r.getZIndex(),s.a.TEXT);l.setTextStyle(u,t.addDeclutter(!!o)),l.drawText(e,i)}},MultiLineString:function(t,e,r,i){var n=r.getStroke();if(n){var o=t.getReplay(r.getZIndex(),s.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,i)}var a=r.getText();if(a){var u=t.getReplay(r.getZIndex(),s.a.TEXT);u.setTextStyle(a,t.addDeclutter(!1)),u.drawText(e,i)}},MultiPolygon:function(t,e,r,i){var n=r.getFill(),o=r.getStroke();if(o||n){var a=t.getReplay(r.getZIndex(),s.a.POLYGON);a.setFillStrokeStyle(n,o),a.drawMultiPolygon(e,i)}var u=r.getText();if(u){var l=t.getReplay(r.getZIndex(),s.a.TEXT);l.setTextStyle(u,t.addDeclutter(!1)),l.drawText(e,i)}},GeometryCollection:function(t,e,r,i){var n,o,s=e.getGeometriesArray();for(n=0,o=s.length;n<o;++n){(0,u[s[n].getType()])(t,s[n],r,i)}},Circle:function(t,e,r,i){var n=r.getFill(),o=r.getStroke();if(n||o){var a=t.getReplay(r.getZIndex(),s.a.CIRCLE);a.setFillStrokeStyle(n,o),a.drawCircle(e,i)}var u=r.getText();if(u){var l=t.getReplay(r.getZIndex(),s.a.TEXT);l.setTextStyle(u,t.addDeclutter(!1)),l.drawText(e,i)}}};function l(t,e){return parseInt(Object(i.getUid)(t),10)-parseInt(Object(i.getUid)(e),10)}function c(t,e){var r=h(t,e);return r*r}function h(t,e){return a*t/e}function p(t,e,r,i,a,l){var c=!1,h=r.getImage();if(h){var p=h.getImageState();p==n.a.LOADED||p==n.a.ERROR?h.unlistenImageChange(a,l):(p==n.a.IDLE&&h.load(),p=h.getImageState(),h.listenImageChange(a,l),c=!0)}return function(t,e,r,i){var n=r.getGeometryFunction()(e);if(n){var a=n.getSimplifiedGeometry(i);if(r.getRenderer())!function t(e,r,i,n){if(r.getType()!=o.default.GEOMETRY_COLLECTION)e.getReplay(i.getZIndex(),s.a.DEFAULT).drawCustom(r,n,i.getRenderer());else for(var a=r.getGeometries(),u=0,l=a.length;u<l;++u)t(e,a[u],i,n)}(t,a,r,e);else(0,u[a.getType()])(t,a,r,e)}}(t,e,r,i),c}},function(t,e,r){"use strict";e.a={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,r){"use strict";function i(t,e){var r=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))});var i=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+i}r.r(e),r.d(e,"appendParams",function(){return i})},function(t,e,r){"use strict";r.r(e);var i=r(4),n=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},n.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},n.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},n.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},n.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},n.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},n.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(i.getUid)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.default=n},function(t,e,r){"use strict";r.r(e);var i=r(17),n=r(58),o=r(102),s=r(10),a=function(t){function e(e,r,i){t.call(this);var n=i||{};this.tileCoord=e,this.state=r,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(s.default.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==i.default.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==i.default.LOADED){t.interimTile=null;break}t.getState()==i.default.LOADING?e=t:t.getState()==i.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var i=e-r+1e3/60;return i>=this.transition_?1:Object(n.easeIn)(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(o.a);e.default=a},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){"use strict";r.r(e);var i=r(50),n=r(69),o=r(265),s=r(11),a=r(70),u="renderOrder",l=function(t){function e(e){var r=e||{},n=Object(s.assign)({},r);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,t.call(this,n),this.declutter_=void 0!==r.declutter&&r.declutter,this.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(r.style),this.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,this.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,this.renderMode_=r.renderMode||o.a.VECTOR,this.type=i.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(u)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(u,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:a.createDefaultStyle,this.styleFunction_=null===t?void 0:Object(a.toFunction)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(n.default);l.prototype.getSource,e.default=l},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(57),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Object(n.asString)(t):this.checksum_=Object(i.getUid)(this.color_):this.checksum_="f-"}return this.checksum_},e.default=o},function(t,e,r){"use strict";r.d(e,"e",function(){return o}),r.d(e,"a",function(){return s}),r.d(e,"f",function(){return a}),r.d(e,"d",function(){return u}),r.d(e,"b",function(){return l}),r.d(e,"c",function(){return c});var i=r(19);function n(t,e,r,n,o,s,a){var u,l=t[e],c=t[e+1],h=t[r]-l,p=t[r+1]-c;if(0===h&&0===p)u=e;else{var f=((o-l)*h+(s-c)*p)/(h*h+p*p);if(f>1)u=r;else{if(f>0){for(var d=0;d<n;++d)a[d]=Object(i.c)(t[e+d],t[r+d],f);return void(a.length=n)}u=e}}for(var g=0;g<n;++g)a[g]=t[u+g];a.length=n}function o(t,e,r,n,o){var s=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var u=t[e],l=t[e+1],c=Object(i.g)(s,a,u,l);c>o&&(o=c),s=u,a=l}return o}function s(t,e,r,i,n){for(var s=0,a=r.length;s<a;++s){var u=r[s];n=o(t,e,u,i,n),e=u}return n}function a(t,e,r,i,n){for(var o=0,a=r.length;o<a;++o){var u=r[o];n=s(t,e,u,i,n),e=u[u.length-1]}return n}function u(t,e,r,o,s,a,u,l,c,h,p){if(e==r)return h;var f,d;if(0===s){if((d=Object(i.g)(u,l,t[e],t[e+1]))<h){for(f=0;f<o;++f)c[f]=t[e+f];return c.length=o,d}return h}for(var g=p||[NaN,NaN],y=e+o;y<r;)if(n(t,y-o,y,o,u,l,g),(d=Object(i.g)(u,l,g[0],g[1]))<h){for(h=d,f=0;f<o;++f)c[f]=g[f];c.length=o,y+=o}else y+=o*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(a&&(n(t,r-o,e,o,u,l,g),(d=Object(i.g)(u,l,g[0],g[1]))<h)){for(h=d,f=0;f<o;++f)c[f]=g[f];c.length=o}return h}function l(t,e,r,i,n,o,s,a,l,c,h){for(var p=h||[NaN,NaN],f=0,d=r.length;f<d;++f){var g=r[f];c=u(t,e,g,i,n,o,s,a,l,c,p),e=g}return c}function c(t,e,r,i,n,o,s,a,u,c,h){for(var p=h||[NaN,NaN],f=0,d=r.length;f<d;++f){var g=r[f];c=l(t,e,g,i,n,o,s,a,u,c,p),e=g[g.length-1]}return c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFactory=void 0;var i=O(r(8)),n=O(r(16)),o=r(6),s=r(255),a=r(335),u=r(256),l=r(453),c=r(257),h=r(454),p=r(455),f=r(336),d=r(337),g=r(456),y=r(457),v=r(338),m=r(334),_=r(258),b=r(458),S=r(459),x=r(22);function O(t){return t&&t.__esModule?t:{default:t}}var E=function(){function t(e){(0,i.default)(this,t),this.shapeParameters=e,this.CLASS_NAME="Zondy.Feature.ShapeFactory"}return(0,n.default)(t,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof s.Point){var i=new Object;i.x=r.x,i.y=r.y,i.r=r.r,i=(0,x.copyAttributesWithClip)(i,r.style,["x","y"]);var n=new d.SmicPoint;return n.style=t.transformStyle(i),n.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(n,r,["x","y","style","highlightStyle"]),n}if(r instanceof a.Line){if(!r.pointList)return null;var o=new Object;o.pointList=r.pointList,o=(0,x.copyAttributesWithClip)(o,r.style,["pointList"]);var O=new v.SmicBrokenLine;return O.style=t.transformStyle(o),O.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(O,r,["pointList","style","highlightStyle"]),O}if(r instanceof u.Polygon){if(!r.pointList)return null;var E=new Object;E.pointList=r.pointList,E=(0,x.copyAttributesWithClip)(E,r.style,["pointList"]);var C=new _.SmicPolygon;return C.style=t.transformStyle(E),C.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(C,r,["pointList","style","highlightStyle"]),C}if(r instanceof l.Rectangle){if(!r.x&&!r.y&!r.width&!r.height)return null;var T=new Object;T.x=r.x,T.y=r.y,T.width=r.width,T.height=r.height,T=(0,x.copyAttributesWithClip)(T,r.style,["x","y","width","height"]);var P=new b.SmicRectangle;return P.style=t.transformStyle(T),P.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(P,r,["x","y","width","height","style","highlightStyle"]),P}if(r instanceof c.Sector){var w=new Object;w.x=r.x,w.y=r.y,w.r=r.r,w.startAngle=r.startAngle,w.endAngle=r.endAngle,r.r0&&(w.r0=r.r0),r.clockWise&&(w.clockWise=r.clockWise),w=(0,x.copyAttributesWithClip)(w,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var I=new S.SmicSector;return I.style=t.transformStyle(w),I.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(I,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),I}if(r instanceof h.Label){var L=new Object;L.x=r.x,L.y=r.y,L.text=r.text,L=(0,x.copyAttributesWithClip)(L,r.style,["x","y","text"]);var R=new g.SmicText;return R.style=t.transformStyle(L),R.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(R,r,["x","y","text","style","highlightStyle"]),R}if(r instanceof p.Image){var M=new Object;M.x=r.x,M.y=r.y,r.image&&(M.image=r.image),r.width&&(M.width=r.width),r.height&&(M.height=r.height),r.sx&&(M.sx=r.sx),r.sy&&(M.sy=r.sy),r.sWidth&&(M.sWidth=r.sWidth),r.sHeight&&(M.sHeight=r.sHeight),M=(0,x.copyAttributesWithClip)(M,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new m.SmicImage;return A.style=t.transformStyle(M),A.highlightStyle=t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(A,r,["x","y","image","width","height","style","highlightStyle"]),A}if(r instanceof f.Circle){var j=new Object;j.x=r.x,j.r=r.r,j.y=r.y,j=(0,x.copyAttributesWithClip)(j,r.style,["x","y","r"]);var N=new y.SmicCircle;return N.style=new t.transformStyle(j),N.highlightStyle=new t.transformStyle(r.highlightStyle),(0,x.copyAttributesWithClip)(N,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),N}return null}}],[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],i=[!0,!1];for(var n in t)switch(n){case"fill":i[0]=t[n];break;case"fillColor":e.color=t[n];break;case"stroke":i[1]=t[n];break;case"strokeWidth":e.lineWidth=t[n];break;case"strokeLinecap":e.lineCap=t[n];break;case"strokeLineJoin":e.lineJoin=t[n];break;case"strokeDashstyle":e.lineType=t[n];break;case"pointRadius":e.r=t[n];break;case"label":e.text=t[n];break;case"labelRect":e.labelRect=t[n];break;case"fontColor":e.textColor=t[n];break;case"fontStyle":r[0]=t[n];break;case"fontVariant":r[1]=t[n];break;case"fontWeight":r[2]=t[n];break;case"fontSize":var o="";t[n]&&t[n].toString().indexOf("px")<0&&(o="px"),r[3]=t[n]+o;break;case"fontFamily":r[4]=t[n];break;case"fontOpacity":e.opacity=t[n];break;case"labelPosition":e.textPosition=t[n];break;case"labelAlign":e.textAlign=t[n];break;case"labelBaseline":e.textBaseline=t[n];break;case"labelRotation":e.textRotation=t[n];break;default:e[n]=t[n]}return e.textFont=r.join(" "),!0===i[0]&&!1===i[1]?e.brushType="fill":!1===i[0]&&!0===i[1]?e.brushType="stroke":!0===i[0]&&!0===i[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var i=r||{},n=new l.Rectangle(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return n.style={fillColor:"#f3f3f3"},i.backgroundStyle&&(0,x.copyAttributesWithClip)(n.style,i.backgroundStyle),i.backgroundRadius&&(n.style.radius=i.backgroundRadius),n.clickable=!1,n.hoverable=!1,t.createShape(n)}},{key:"GraphAxis",value:function(t,e,r,i){var n,o=e,s=r||{},l=[],c=[],p=!!s.useXReferenceLine&&s.useXReferenceLine,f=s.axisYTick&&!isNaN(s.axisYTick)?s.axisYTick:0,d=[],g=[];if(0===f){if(g.push([o[0],o[3]-5]),g.push([o[0],o[1]]),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var y=parseInt(s.axis3DParameter),v=[o[0]-y,o[1]+y];s.axisUseArrow?(d.push([v[0]+1.5,v[1]-7.5]),d.push([v[0]-1,v[1]+1]),d.push([v[0]+7.5,v[1]-1.5]),g.push([v[0],v[1]])):g.push([v[0],v[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}else{var m=Math.abs(o[1]-o[3])/f,_=o[3];g.push([o[0],_-5]);for(var b=0;b<f;b++){if(g.push([o[0],_]),g.push([o[0]-5,_]),g.push([o[0],_]),p){var S=new a.Line([[o[0],_],[o[2],_]]);S.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},S.clickable=!1,S.hoverable=!1,s.xReferenceLineStyle&&(0,x.copyAttributesWithClip)(S.style,s.xReferenceLineStyle),l.push(t.createShape(S))}_+=m}if(g.push([o[0],o[1]]),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var O=parseInt(s.axis3DParameter),E=[o[0]-O,o[1]+O];s.axisUseArrow?(d.push([E[0]+1.5,E[1]-7.5]),d.push([E[0]-1,E[1]+1]),d.push([E[0]+7.5,E[1]-1.5]),g.push([E[0],E[1]])):g.push([E[0],E[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}if(s.axisUseArrow){var C=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],T=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],P=new u.Polygon(C);P.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(P.style,s.axisStyle),c.push(t.createShape(P));var w=new u.Polygon(T);if(w.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(w.style,s.axisStyle),c.push(t.createShape(w)),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var I=new u.Polygon(d);I.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(I.style,s.axisStyle),c.push(t.createShape(I))}}n=g;var L=new a.Line(n);L.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},s.axisStyle&&(0,x.copyAttributesWithClip)(L.style,s.axisStyle),L.clickable=!1,L.hoverable=!1;var R=[t.createShape(L)],M=[];if(s.axisYLabels&&s.axisYLabels.length&&s.axisYLabels.length>0){var A=s.axisYLabels,j=A.length,N=[0,0];if(s.axisYLabelsOffset&&s.axisYLabelsOffset.length&&(N=s.axisYLabelsOffset),1===j){var F=new h.Label(o[0]-5+N[0],o[3]+N[1],A[0]);F.style={labelAlign:"right"},s.axisYLabelsStyle&&(0,x.copyAttributesWithClip)(F.style,s.axisYLabelsStyle),F.clickable=!1,F.hoverable=!1,M.push(t.createShape(F))}else for(var D=o[3],k=Math.abs(o[1]-o[3])/(j-1),G=0;G<j;G++){var B=new h.Label(o[0]-5+N[0],D+N[1],A[G]);B.style={labelAlign:"right"},s.axisYLabelsStyle&&(0,x.copyAttributesWithClip)(B.style,s.axisYLabelsStyle),B.clickable=!1,B.hoverable=!1,M.push(t.createShape(B)),D+=k}}var U=[];if(s.axisXLabels&&s.axisXLabels.length&&s.axisXLabels.length>0){var V=s.axisXLabels,z=V.length,W=[0,0];if(s.axisXLabelsOffset&&s.axisXLabelsOffset.length&&(W=s.axisXLabelsOffset),i&&i.xPositions&&i.xPositions.length&&i.xPositions.length===z)for(var Y=i.xPositions,X=0;X<z;X++){var Z=new h.Label(Y[X]+W[0],o[1]+W[1],V[X]);Z.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(Z.style,s.axisXLabelsStyle),Z.clickable=!1,Z.hoverable=!1,U.push(t.createShape(Z))}else if(1===z){var H=new h.Label(o[0]-5+W[0],o[1]+W[0],V[0]);H.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(H.style,s.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,U.push(t.createShape(H))}else for(var q=o[0],K=Math.abs(o[2]-o[0])/(z-1),J=0;J<z;J++){var Q=new h.Label(q+W[0],o[1]+W[1],V[J]);Q.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(Q.style,s.axisXLabelsStyle),Q.clickable=!1,Q.hoverable=!1,U.push(t.createShape(Q)),q+=K}}return l.concat(R).concat(M).concat(U).concat(c)}},{key:"ShapeStyleTool",value:function(t,e,r,i,n,o){var s=t||{};if(e&&(0,x.copyAttributesWithClip)(s,e),r&&r.length&&void 0!==n&&!isNaN(n)&&n>=0&&r[n]&&(0,x.copyAttributesWithClip)(s,r[n]),i&&i.length&&void 0!==o)for(var a=i,u=a.length,l=parseFloat(o),c=0;c<u;c++)if(a[c].start<=l&&l<a[c].end){(0,x.copyAttributesWithClip)(s,a[c].style);break}return s}}]),t}();e.ShapeFactory=E,o.Zondy.Feature.ShapeFactory=E},function(t,e,r){"use strict";r.r(e);var i=r(86),n=r(23),o=r(128),s=r(15),a=r(1),u=r(19),l=r(45),c=r(46),h=[0,0,0],p=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(n.a)(Object(s.g)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var r=0,u=this.resolutions_.length-1;r<u;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(n.a)(this.origins_.length==this.resolutions_.length,20));var l=t.extent;void 0===l||this.origin_||this.origins_||(this.origin_=Object(a.getTopLeft)(l)),Object(n.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(n.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:i.b,Object(n.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==l?l:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new o.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):l&&this.calculateTileRanges_(l)};p.prototype.forEachTileCoord=function(t,e,r){for(var i=this.getTileRangeForExtentAndZ(t,e),n=i.minX,o=i.maxX;n<=o;++n)for(var s=i.minY,a=i.maxY;s<=a;++s)r([e,n,s])},p.prototype.forEachTileCoordParentTileRange=function(t,e,r,i,n){var s,a,u,l=null,c=t[0]-1;for(2===this.zoomFactor_?(a=t[1],u=t[2]):l=this.getTileCoordExtent(t,n);c>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),u=Math.floor(u/2),s=Object(o.a)(a,a,u,u,i)):s=this.getTileRangeForExtentAndZ(l,c,i),e.call(r,c,s))return!0;--c}return!1},p.prototype.getExtent=function(){return this.extent_},p.prototype.getMaxZoom=function(){return this.maxZoom},p.prototype.getMinZoom=function(){return this.minZoom},p.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},p.prototype.getResolution=function(t){return this.resolutions_[t]},p.prototype.getResolutions=function(){return this.resolutions_},p.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],n=2*t[2];return Object(o.a)(i,i+1,n,n+1,e)}var s=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null},p.prototype.getTileRangeExtent=function(t,e,r){var i=this.getOrigin(t),n=this.getResolution(t),o=Object(l.toSize)(this.getTileSize(t),this.tmpSize_),s=i[0]+e.minX*o[0]*n,u=i[0]+(e.maxX+1)*o[0]*n,c=i[1]+e.minY*o[1]*n,h=i[1]+(e.maxY+1)*o[1]*n;return Object(a.createOrUpdate)(s,c,u,h,r)},p.prototype.getTileRangeForExtentAndZ=function(t,e,r){var i=h;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i);var n=i[1],s=i[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,i),Object(o.a)(n,i[1],s,i[2],r)},p.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Object(l.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*r,e[1]+(t[2]+.5)*i[1]*r]},p.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Object(l.toSize)(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*n[0]*i,s=r[1]+t[2]*n[1]*i,u=o+n[0]*i,c=s+n[1]*i;return Object(a.createOrUpdate)(o,s,u,c,e)},p.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},p.prototype.getTileCoordForXYAndResolution_=function(t,e,r,i,n){var o=this.getZForResolution(r),s=r/this.getResolution(o),a=this.getOrigin(o),u=Object(l.toSize)(this.getTileSize(o),this.tmpSize_),h=i?.5:0,p=i?0:.5,f=Math.floor((t-a[0])/r+h),d=Math.floor((e-a[1])/r+p),g=s*f/u[0],y=s*d/u[1];return i?(g=Math.ceil(g)-1,y=Math.ceil(y)-1):(g=Math.floor(g),y=Math.floor(y)),Object(c.createOrUpdate)(o,g,y,n)},p.prototype.getTileCoordForXYAndZ_=function(t,e,r,i,n){var o=this.getOrigin(r),s=this.getResolution(r),a=Object(l.toSize)(this.getTileSize(r),this.tmpSize_),u=i?.5:0,h=i?0:.5,p=Math.floor((t-o[0])/s+u),f=Math.floor((e-o[1])/s+h),d=p/a[0],g=f/a[1];return i?(d=Math.ceil(d)-1,g=Math.ceil(g)-1):(d=Math.floor(d),g=Math.floor(g)),Object(c.createOrUpdate)(r,d,g,n)},p.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},p.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},p.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},p.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},p.prototype.getZForResolution=function(t,e){var r=Object(s.h)(this.resolutions_,t,e||0);return Object(u.a)(r,this.minZoom,this.maxZoom)},p.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),i=this.minZoom;i<e;++i)r[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=r},e.default=p},function(t,e,r){"use strict";var i=r(131),n=r(3),o=r(29),s=r(35),a=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var r=this.listeners_[t];r||(r=this.listeners_[t]=[]),-1===r.indexOf(e)&&r.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new s.default(t):t,r=e.type;e.target=this;var i,n=this.listeners_[r];if(n){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var a=0,u=n.length;a<u;++a)if(!1===n[a].call(this,e)||e.propagationStopped){i=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var l=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];l--;)this.removeEventListener(r,o.c);delete this.dispatching_[r]}return i}},e.prototype.disposeInternal=function(){Object(n.unlistenAll)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var i=r.indexOf(e);t in this.pendingRemovals_?(r[i]=o.c,++this.pendingRemovals_[t]):(r.splice(i,1),0===r.length&&delete this.listeners_[t])}},e}(i.a);e.a=a},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return s}),r.d(e,"d",function(){return a});var i=r(1);function n(t,e,r,n,s){return!Object(i.forEachCorner)(s,function(i){return!o(t,e,r,n,i[0],i[1])})}function o(t,e,r,i,n,o){for(var s=0,a=t[r-i],u=t[r-i+1];e<r;e+=i){var l=t[e],c=t[e+1];u<=o?c>o&&(l-a)*(o-u)-(n-a)*(c-u)>0&&s++:c<=o&&(l-a)*(o-u)-(n-a)*(c-u)<0&&s--,a=l,u=c}return 0!==s}function s(t,e,r,i,n,s){if(0===r.length)return!1;if(!o(t,e,r[0],i,n,s))return!1;for(var a=1,u=r.length;a<u;++a)if(o(t,r[a-1],r[a],i,n,s))return!1;return!0}function a(t,e,r,i,n,o){if(0===r.length)return!1;for(var a=0,u=r.length;a<u;++a){var l=r[a];if(s(t,e,l,i,n,o))return!0;e=l[l.length-1]}return!1}},function(t,e,r){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,r){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,r){var i=r(295)("wks"),n=r(237),o=r(96).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:n)("Symbol."+t))}).store=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=void 0;var i,n=function(t){return t&&t.__esModule?t:{default:t}}(r(561)),o=r(6),s={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=s,o.Zondy.Enum.XClsType=s;var a={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=a,o.Zondy.Enum.VectClsType=a;var u={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=u,o.Zondy.Enum.FeatureType=u;var l={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=l,o.Zondy.Enum.FontShape=l;var c={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=c,o.Zondy.Enum.LabelLinType=c;var h={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=h,o.Zondy.Enum.LabelRegType=h;var p={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=p,o.Zondy.Enum.LabelPntType=p;var f={Auto:0,NoRep:1,OnStep:2};e.RepeatType=f,o.Zondy.Enum.RepeatType=f;var d={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=d,o.Zondy.Enum.LabelSpreadType=d;var g={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=g,o.Zondy.Enum.LineConstrain=g;var y={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=y,o.Zondy.Enum.EightDirType=y;var v={Reg:0,Arc:1,All:2};e.ISShowArc=v,o.Zondy.Enum.ISShowArc=v;var m=(i={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,n.default)(i,"SysModeMinDis","SysModeMinDis"),(0,n.default)(i,"SysModeSysRecommend","SysModeSysRecommend"),i);e.NetAnalyType=m,o.Zondy.Enum.Net.NetAnalyType=m;var _={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=_,o.Zondy.Enum.Net.NetElemType=_;var b={Adjust:0,NoAdjust:1};e.CLinAdjustType=b,o.Zondy.Enum.Theme.CLinAdjustType=b;var S={Round:0,Square:1,Butt:2};e.CLinHeadType=S,o.Zondy.Enum.Theme.CLinHeadType=S;var x={Round:0,Square:1,Butt:2};e.CLinJointType=x,o.Zondy.Enum.Theme.CLinJointType=x;var O={Byrule:0,Bypoint:1};e.CLinStyleMakeType=O,o.Zondy.Enum.Theme.CLinStyleMakeType=O;var E={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=E,o.Zondy.Enum.Theme.CItemType=E;var C={Doc:"mapType",Tile:"tileType"};e.MapType=C,o.Zondy.Enum.Map.MapType=C;var T={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=T,o.Zondy.Enum.Map.LayerStatusType=T},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var i=d(r(12)),n=d(r(8)),o=d(r(16)),s=d(r(13)),a=d(r(40)),u=d(r(14)),l=r(6),c=r(22),h=r(207),p=r(252),f=r(115);function d(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return t=t||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,(0,c.extend)(r,t),r.id=r.id||(0,c.newGuid)(),r.CLASS_NAME="Zondy.LevelRenderer.Shape",r.getTansform=function(){var t=[];return function(e,r){var i=[e,r];return this.needTransform&&this.transform&&(f.SUtil.Util_matrix.invert(t,this.transform),f.SUtil.Util_matrix.mulVector(i,t,[e,r,1]),e===i[0]&&r===i[1]&&this.updateNeedTransform()),i}}(),r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"===this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],i=0,n=r.length;i<n;i++){var o=e[r[i][0]],s=r[i][1];void 0!==o&&(t[s]=o)}}},{key:"doClip",value:function(t){var e=f.SUtil.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var i=this.__clipShapes[r];if(i.needTransform){var n=i.transform;f.SUtil.Util_matrix.invert(e,n),t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}if(t.beginPath(),i.buildPath(t,i.style),t.clip(),i.needTransform){var o=e;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var i={};for(var n in t)i[n]=t[n];var o=f.SUtil.Util_color.getHighlightColor();for(var s in"stroke"!==t.brushType?(i.strokeColor=o,i.lineWidth=t.lineWidth||1,i.brushType="both"):"stroke"!==r?(i.strokeColor=o,i.lineWidth=t.lineWidth||1):i.strokeColor=e.strokeColor||f.SUtil.Util_color.mix(t.strokeColor,f.SUtil.Util_color.toRGB(o)),e)void 0!==e[s]&&(i[s]=e[s]);return i}},{key:"getHighlightZoom",value:function(){return"text"!==this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){}},{key:"getRect",value:function(t){}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var i=this.style.__rect;return i||(i=this.style.__rect=this.getRect(this.style)),t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height&&f.SUtil.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,r,i){if(void 0!==r.text&&!1!==r.text){var n=r.textColor||r.color||r.strokeColor;t.fillStyle=n;var o,s,a,u,l,c=10,h=r.textPosition||this.textPosition||"top";switch(l=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(i||r).__rect||this.getRect(i||r);switch(h){case"inside":a=p.x+p.width/2,u=p.y+p.height/2,o="center",s="middle","stroke"!==r.brushType&&n===r.color&&(t.fillStyle="#fff");break;case"left":a=p.x-c,u=p.y+p.height/2,o="end",s="middle";break;case"right":a=p.x+p.width+c,u=p.y+p.height/2,o="start",s="middle";break;case"top":a=p.x+p.width/2,u=p.y-c,o="center",s="bottom";break;case"bottom":a=p.x+p.width/2,u=p.y+p.height+c,o="center",s="top"}}break;case"start":case"end":var f=0,d=0,g=0,y=0;if(void 0!==r.pointList){var v=r.pointList;if(v.length<2)return;var m=v.length;switch(h){case"start":f=v[0][0]+l[0],d=v[1][0]+l[0],g=v[0][1]+l[1],y=v[1][1]+l[1];break;case"end":f=v[m-2][0]+l[0],d=v[m-1][0]+l[0],g=v[m-2][1]+l[1],y=v[m-1][1]+l[1]}}else f=r.xStart+l[0]||0,d=r.xEnd+l[0]||0,g=r.yStart+l[1]||0,y=r.yEnd+l[1]||0;switch(h){case"start":o=f<d?"end":"start",s=g<y?"bottom":"top",a=f,u=g;break;case"end":o=f<d?"start":"end",s=g<y?"top":"bottom",a=d,u=y}c-=4,f&&d&&f!==d?a-="end"===o?c:-c:o="center",g!==y?u-="bottom"===s?c:-c:s="middle";break;case"specific":a=r.textX||0,u=r.textY||0,o="start",s="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(a+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(u+=r.labelYOffset),null!=a&&null!=u&&e._fillText(t,r.text,a,u,r.textFont,r.textAlign||o,r.textBaseline||s)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}],[{key:"_fillText",value:function(t,r,i,n,o,s,a){o&&(t.font=o),t.textAlign=s,t.textBaseline=a;var u=e._getTextRect(r,i,n,o,s,a);r=(r+"").split("\n");var l=f.SUtil.Util_area.getTextHeight("ZH",o);switch(a){case"top":n=u.y;break;case"bottom":n=u.y+l;break;default:n=u.y+l/2}for(var c=0,h=r.length;c<h;c++)t.fillText(r[c],i,n),n+=l}},{key:"_getTextRect",value:function(t,e,r,i,n,o){var s=f.SUtil.Util_area.getTextWidth(t,i),a=f.SUtil.Util_area.getTextHeight("ZH",i);switch(t=(t+"").split("\n"),n){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(o){case"top":break;case"bottom":r-=a*t.length;break;default:r-=a*t.length/2}return{x:e,y:r,width:s,height:a*t.length}}}]),e}((0,c.mixin)(h.Eventful,p.Transformable));e.Shape=g,l.Zondy.LevelRenderer.Shape=g},function(t,e,r){"use strict";r.r(e);var i=r(151),n=r(27),o=r(3),s=r(10),a=r(1),u=function(t){function e(e,r,i,o,s,a){t.call(this,e,r,i,n.a.IDLE),this.src_=o,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.imageListenerKeys_=null,this.state=n.a.IDLE,this.imageLoadFunction_=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=n.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(a.getHeight)(this.extent)/this.image_.height),this.state=n.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=n.a.IDLE&&this.state!=n.a.ERROR||(this.state=n.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(o.listenOnce)(this.image_,s.default.ERROR,this.handleImageError_,this),Object(o.listenOnce)(this.image_,s.default.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(o.unlistenByKey),this.imageListenerKeys_=null},e}(i.a);e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"VectorSourceEvent",function(){return S});var i=r(4),n=r(48),o=r(51),s=r(119),a=r(15),u=r(23),l=r(3),c=r(35),h=r(10),p=r(1),f=r(230),d=r(29),g=r(341),y=r(11),v=r(169),m=r(43),_=r(105),b=r(120),S=function(t){function e(e,r){t.call(this,e),this.feature=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.default),x=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,projection:void 0,state:m.a.READY,wrapX:void 0===r.wrapX||r.wrapX}),this.loader_=d.c,this.format_=r.format,this.overlaps_=void 0==r.overlaps||r.overlaps,this.url_=r.url,void 0!==r.loader?this.loader_=r.loader:void 0!==this.url_&&(Object(u.a)(this.format_,7),this.loader_=Object(f.xhr)(this.url_,this.format_)),this.strategy_=void 0!==r.strategy?r.strategy:g.all;var i,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;this.featuresRtree_=s?new b.default:null,this.loadedExtentsRtree_=new b.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(i=r.features).getArray()),s||void 0!==i||(i=new n.default(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(i.getUid)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new S(_.a.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(l.listen)(e,h.default.CHANGE,this.handleFeatureChange_,this),Object(l.listen)(e,s.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,i=e.getId();return void 0!==i?i.toString()in this.idIndex_?r=!1:this.idIndex_[i.toString()]=e:(Object(u.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],o=0,s=t.length;o<s;o++){var a=t[o],u=Object(i.getUid)(a);this.addToIndex_(u,a)&&r.push(a)}for(var l=0,c=r.length;l<c;l++){var h=r[l],p=Object(i.getUid)(h);this.setupChangeEvents_(p,h);var f=h.getGeometry();if(f){var d=f.getExtent();e.push(d),n.push(h)}else this.nullGeometryFeatures_[p]=h}this.featuresRtree_&&this.featuresRtree_.load(e,n);for(var g=0,y=r.length;g<y;g++)this.dispatchEvent(new S(_.a.ADDFEATURE,r[g]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(l.listen)(this,_.a.ADDFEATURE,function(r){e||(e=!0,t.push(r.feature),e=!1)}),Object(l.listen)(this,_.a.REMOVEFEATURE,function(r){e||(e=!0,t.remove(r.feature),e=!1)}),Object(l.listen)(t,o.default.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(l.listen)(t,o.default.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(l.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new S(_.a.CLEAR);this.dispatchEvent(i),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(r){if(r.getGeometry().intersectsExtent(t)){var i=e(r);if(i)return i}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(y.isEmpty)(this.nullGeometryFeatures_)||Object(a.c)(t,Object(y.getValues)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],i=t[1],n=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],u=e||d.b;return this.featuresRtree_.forEachInExtent(a,function(t){if(u(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(r,i,o,s))<l){n=t;var c=Math.sqrt(s);a[0]=r-c,a[1]=i-c,a[2]=r+c,a[3]=i+c}}}),n},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=Object(i.getUid)(e),n=e.getGeometry();if(n){var o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var s=e.getId();if(void 0!==s){var a=s.toString();r in this.undefIdIndex_?(delete this.undefIdIndex_[r],this.idIndex_[a]=e):this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else r in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[r]=e);this.changed(),this.dispatchEvent(new S(_.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(i.getUid)(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(y.isEmpty)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var i=this,n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];n.forEachInExtent(a,function(t){return Object(p.containsExtent)(t.extent,a)})||(i.loader_.call(i,a,e,r),n.insert(a,{extent:a.slice()}),i.loading=i.loader_!==d.c)},a=0,u=o.length;a<u;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,function(r){if(Object(p.equals)(r.extent,t))return e=r,!0}),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=Object(i.getUid)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(i.getUid)(t);this.featureChangeKeys_[e].forEach(l.unlistenByKey),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r?delete this.idIndex_[r.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new S(_.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(v.default);e.default=x},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i,n,o){t.call(this,e,r,i.originalEvent,n,o),this.pointerEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(166).default);e.default=i},function(t,e,r){"use strict";function i(t,e,r){var i=void 0!==r?t.toFixed(r):""+t,n=i.indexOf(".");return(n=-1===n?i.length:n)>e?i:new Array(1+e-n).join("0")+i}function n(t,e){for(var r=(""+t).split("."),i=(""+e).split("."),n=0;n<Math.max(r.length,i.length);n++){var o=parseInt(r[n]||"0",10),s=parseInt(i[n]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}r.d(e,"b",function(){return i}),r.d(e,"a",function(){return n})},function(t,e,r){var i=r(96),n=r(54),o=r(203),s=r(163),a=r(161),u=function(t,e,r){var l,c,h,p=t&u.F,f=t&u.G,d=t&u.S,g=t&u.P,y=t&u.B,v=t&u.W,m=f?n:n[e]||(n[e]={}),_=m.prototype,b=f?i:d?i[e]:(i[e]||{}).prototype;for(l in f&&(r=e),r)(c=!p&&b&&void 0!==b[l])&&a(m,l)||(h=c?b[l]:r[l],m[l]=f&&"function"!=typeof b[l]?r[l]:y&&c?o(h,i):v&&b[l]==h?function(t){var e=function(e,r,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):g&&"function"==typeof h?o(Function.call,h):h,g&&((m.virtual||(m.virtual={}))[l]=h,t&u.R&&_&&!_[l]&&s(_,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point2D=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(16)),s=u(r(13)),a=u(r(14));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,o){(0,n.default)(this,e);var a=o||{},u=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));return u.x=void 0!==t?t:null,u.y=void 0!==r?r:null,u.nearDis=void 0!==a.nearDis?parseFloat(a.nearDis):null,u.CLASS_NAME="Zondy.Object.Point2D",u}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null===this.x||null===this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),e}(r(164).Tangram);e.Point2D=l,Zondy.Object.Point2D=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=void 0;var i=v(r(8)),n=v(r(16)),o=r(6),s=r(441),a=r(332),u=r(442),l=r(253),c=r(443),h=r(444),p=r(445),f=r(446),d=r(447),g=r(182),y=r(254);function v(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(){(0,i.default)(this,t)}return(0,n.default)(t,null,[{key:"SUtil_smoothBezier",value:function(e,r,i,n,o){o&&2===o||(o=[0,0]);var s,a,u=o,l=[],c=[],h=[],p=[],f=!!n;if(f){s=[1/0,1/0],a=[-1/0,-1/0];for(var d=e.length,g=0;g<d;g++)t.Util_vector.min(s,s,[e[g][0]+u[0],e[g][1]+u[1]]),t.Util_vector.max(a,a,[e[g][0]+u[0],e[g][1]+u[1]]);t.Util_vector.min(s,s,n[0]),t.Util_vector.max(a,a,n[1])}for(var y=e.length,v=0;v<y;v++){var m=[e[v][0]+u[0],e[v][1]+u[1]],_=void 0,b=void 0;if(i)_=[e[v?v-1:y-1][0]+u[0],e[v?v-1:y-1][1]+u[1]],b=[e[(v+1)%y][0]+u[0],e[(v+1)%y][1]+u[1]];else{if(0===v||v===y-1){l.push([e[v][0]+u[0],e[v][1]+u[1]]);continue}_=[e[v-1][0]+u[0],e[v-1][1]+u[1]],b=[e[v+1][0]+u[0],e[v+1][1]+u[1]]}t.Util_vector.sub(c,b,_),t.Util_vector.scale(c,c,r);var S=t.Util_vector.distance(m,_),x=t.Util_vector.distance(m,b),O=S+x;0!==O&&(S/=O,x/=O),t.Util_vector.scale(h,c,-S),t.Util_vector.scale(p,c,x);var E=t.Util_vector.add([],m,h),C=t.Util_vector.add([],m,p);f&&(t.Util_vector.max(E,E,s),t.Util_vector.min(E,E,a),t.Util_vector.max(C,C,s),t.Util_vector.min(C,C,a)),l.push(E),l.push(C)}return i&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,r,i,n){n&&2===n||(n=[0,0]);for(var o=n,s=e.length,a=[],u=0,l=1;l<s;l++)u+=t.Util_vector.distance([e[l-1][0]+o[0],e[l-1][1]+o[1]],[e[l][0]+o[0],e[l][1]+o[1]]);var c=u/5;c=c<s?s:c;for(var h=0;h<c;h++){var p=h/(c-1)*(r?s:s-1),f=Math.floor(p),d=p-f,g=void 0,y=[e[f%s][0]+o[0],e[f%s][1]+o[1]],v=void 0,m=void 0;r?(g=[e[(f-1+s)%s][0]+o[0],e[(f-1+s)%s][1]+o[1]],v=[e[(f+1)%s][0]+o[0],e[(f+1)%s][1]+o[1]],m=[e[(f+2)%s][0]+o[0],e[(f+2)%s][1]+o[1]]):(g=[e[0===f?f:f-1][0]+o[0],e[0===f?f:f-1][1]+o[1]],v=[e[f>s-2?s-1:f+1][0]+o[0],e[f>s-2?s-1:f+1][1]+o[1]],m=[e[f>s-3?s-1:f+2][0]+o[0],e[f>s-3?s-1:f+2][1]+o[1]]);var _=d*d,b=d*_;a.push([S(g[0],y[0],v[0],m[0],d,_,b),S(g[1],y[1],v[1],m[1],d,_,b)])}return a;function S(t,e,r,i,n,o,s){var a=.5*(r-t),u=.5*(i-e);return(2*(e-r)+a+u)*s+(-3*(e-r)-2*a-u)*o+a*n+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,i,n,o,s){var a=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return a[0]=o,a[1]=o,s&&s instanceof Array?t.setLineDash(s):t.setLineDash(a),t.moveTo(e,r),void t.lineTo(i,n);var u=i-e,l=n-r,c=Math.floor(Math.sqrt(u*u+l*l)/o);u/=c,l/=c;for(var h=!0,p=0;p<c;++p)h?t.moveTo(e,r):t.lineTo(e,r),h=!h,e+=u,r+=l;t.lineTo(i,n)}}]),t}();m.Util_area=new s.Area,m.Util_color=new a.Color,m.Util_computeBoundingBox=new u.ComputeBoundingBox,m.Util_curve=new l.Curve,m.Util_env=new c.Env,m.Util_event=new h.Event,m.Util_http=new p.Http,m.Util_math=new f.Math,m.Util_matrix=new d.Matrix,m.Util=new g.Util,m.Util_vector=new y.Vector,e.SUtil=m,o.Zondy.LevelRenderer.SUtil=m},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o}),r.d(e,"e",function(){return s}),r.d(e,"c",function(){return u}),r.d(e,"d",function(){return l});var i=r(19);function n(t,e,r,n,o,s,a){var u=(r-e)/n;if(u<3){for(;e<r;e+=n)s[a++]=t[e],s[a++]=t[e+1];return a}var l=new Array(u);l[0]=1,l[u-1]=1;for(var c=[e,r-n],h=0;c.length>0;){for(var p=c.pop(),f=c.pop(),d=0,g=t[f],y=t[f+1],v=t[p],m=t[p+1],_=f+n;_<p;_+=n){var b=t[_],S=t[_+1],x=Object(i.h)(b,S,g,y,v,m);x>d&&(h=_,d=x)}d>o&&(l[(h-e)/n]=1,f+n<h&&c.push(f,h),h+n<p&&c.push(h,p))}for(var O=0;O<u;++O)l[O]&&(s[a++]=t[e+O*n],s[a++]=t[e+O*n+1]);return a}function o(t,e,r,i,o,s,a,u){for(var l=0,c=r.length;l<c;++l){var h=r[l];a=n(t,e,h,i,o,s,a),u.push(a),e=h}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,r,i,n,o,a){if(e==r)return a;var u,l,c=s(t[e],n),h=s(t[e+1],n);e+=i,o[a++]=c,o[a++]=h;do{if(u=s(t[e],n),l=s(t[e+1],n),(e+=i)==r)return o[a++]=u,o[a++]=l,a}while(u==c&&l==h);for(;e<r;){var p=s(t[e],n),f=s(t[e+1],n);if(e+=i,p!=u||f!=l){var d=u-c,g=l-h,y=p-c,v=f-h;d*v==g*y&&(d<0&&y<d||d==y||d>0&&y>d)&&(g<0&&v<g||g==v||g>0&&v>g)?(u=p,l=f):(o[a++]=u,o[a++]=l,c=u,h=l,u=p,l=f)}}return o[a++]=u,o[a++]=l,a}function u(t,e,r,i,n,o,s,u){for(var l=0,c=r.length;l<c;++l){var h=r[l];s=a(t,e,h,i,n,o,s),u.push(s),e=h}return s}function l(t,e,r,i,n,o,s,a){for(var l=0,c=r.length;l<c;++l){var h=r[l],p=[];s=u(t,e,h,i,n,o,s,p),a.push(p),e=h[h.length-1]}return s}},function(t,e,r){"use strict";var i=r(4),n=r(15),o=r(33),s=r(104),a=r(0),u=function(t){function e(){t.call(this),this.xmlSerializer_=new XMLSerializer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return s.a.XML},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=Object(a.parse)(t);return this.readFeatureFromDocument(r,e)}return Object(a.isDocument)(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=Object(a.parse)(t);return this.readFeaturesFromDocument(r,e)}return Object(a.isDocument)(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Object(n.c)(r,this.readFeaturesFromNode(i,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return Object(i.abstract)()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=Object(a.parse)(t);return this.readGeometryFromDocument(r,e)}return Object(a.isDocument)(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Object(a.parse)(t);return this.readProjectionFromDocument(e)}return Object(a.isDocument)(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(o.default);e.a=u},function(t,e,r){"use strict";var i=function(t){function e(e,r,i,n){t.call(this,e,r),this.expression=i,this.matchCase=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(133).a);e.a=i},function(t,e,r){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(189),o=r.n(n),s=r(1),a=r(11),u=function(t){this.rbush_=o()(t,void 0),this.items_={}};u.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Object(i.getUid)(e)]=r},u.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,o=e.length;n<o;n++){var s=t[n],a=e[n],u={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[n]=u,this.items_[Object(i.getUid)(a)]=u}this.rbush_.load(r)},u.prototype.remove=function(t){var e=Object(i.getUid)(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},u.prototype.update=function(t,e){var r=this.items_[Object(i.getUid)(e)],n=[r.minX,r.minY,r.maxX,r.maxY];Object(s.equals)(n,t)||(this.remove(e),this.insert(t,e))},u.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},u.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},u.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},u.prototype.forEachInExtent=function(t,e,r){return this.forEach_(this.getInExtent(t),e,r)},u.prototype.forEach_=function(t,e,r){for(var i,n=0,o=t.length;n<o;n++)if(i=e.call(r,t[n]))return i;return i},u.prototype.isEmpty=function(){return Object(a.isEmpty)(this.items_)},u.prototype.clear=function(){this.rbush_.clear(),this.items_={}},u.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(s.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},u.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},e.default=u},function(t,e,r){"use strict";r.d(e,"c",function(){return n}),r.d(e,"d",function(){return o}),r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a});var i=r(19);function n(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function s(t){var e=2*Math.PI/t;return function(t,r){return void 0!==t?t=Math.floor((t+r)/e+.5)*e:void 0}}function a(t){var e=t||Object(i.j)(5);return function(t,r){return void 0!==t?Math.abs(t+r)<=e?0:t+r:void 0}}},function(t,e,r){var i=r(137);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){"use strict";e.__esModule=!0;var i=s(r(523)),n=s(r(530)),o="function"==typeof n.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof n.default&&t.constructor===n.default&&t!==n.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof n.default&&"symbol"===o(i.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof n.default&&t.constructor===n.default&&t!==n.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=void 0;var i=r(307),n=r(558),o=r(6),s=r(244),a=r(559),u=r(560),l=r(383),c=r(378),h=r(384),p=r(562),f=r(245),d=r(308),g=r(309),y=r(379),v=r(377),m=r(107),_=r(385),b=r(386),S=r(246),x=r(247),O=r(311),E=r(310),C=r(312),T=r(381),P=r(382),w=r(380),I=r(563),L=r(114),R=r(388),M=r(564),A=r(205),j=r(164),N=r(565),F=r(387),D=r(22);e.AnyLine=i.AnyLine,e.Arc=n.Arc,e.Zondy=o.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=a.CAttDataRow,e.CDisplayStyle=u.CDisplayStyle,e.CDisplayStyleExtend=l.CDisplayStyleExtend,e.CDynNoteInfo=c.CDynNoteInfo,e.CGDBInfo=h.CGDBInfo,e.Circle=p.Circle,e.CLineInfo=f.CLineInfo,e.CPointInfo=d.CPointInfo,e.CRegionInfo=g.CRegionInfo,e.DynNoteLableType=y.DynNoteLableType,e.DynShowStyle=v.DynShowStyle,e.XClsType=m.XClsType,e.VectClsType=m.VectClsType,e.FeatureType=m.FeatureType,e.FontShape=m.FontShape,e.LabelLinType=m.LabelLinType,e.LabelRegType=m.LabelRegType,e.LabelPntType=m.LabelPntType,e.RepeatType=m.RepeatType,e.LabelSpreadType=m.LabelSpreadType,e.LineConstrain=m.LineConstrain,e.EightDirType=m.EightDirType,e.ISShowArc=m.ISShowArc,e.NetAnalyType=m.NetAnalyType,e.NetElemType=m.NetElemType,e.CLinAdjustType=m.CLinAdjustType,e.CLinHeadType=m.CLinHeadType,e.CLinJointType=m.CLinJointType,e.CLinStyleMakeType=m.CLinStyleMakeType,e.CItemType=m.CItemType,e.MapType=m.MapType,e.LayerStatusType=m.LayerStatusType,e.Feature=_.Feature,e.FeatureGeometry=b.FeatureGeometry,e.FeatureGraphicBase=S.FeatureGraphicBase,e.FeatureSet=x.FeatureSet,e.GLine=O.GLine,e.GPoint=E.GPoint,e.GRegion=C.GRegion,e.LabelLinInfo=T.LabelLinInfo,e.LabelRegInfo=P.LabelRegInfo,e.LablePntInfo=w.LablePntInfo,e.MultiPolygon=I.MultiPolygon,e.Point2D=L.Point2D,e.Polygon=R.Polygon,e.PolyLine=M.PolyLine,e.Rectangle=A.Rectangle,e.Tangram=j.Tangram,e.VectCls=N.VectCls,e.WebGraphicsInfo=F.WebGraphicsInfo,e.extend=D.extend,e.isArray=D.isArray,e.extendDeep=D.extendDeep,e.copy=D.copy,e.copyExcluce=D.copyExcluce,e.reset=D.reset,e.getElement=D.getElement,e.isElement=D.isElement,e.removeItem=D.removeItem,e.indexOf=D.indexOf,e.modifyDOMElement=D.modifyDOMElement,e.applyDefaults=D.applyDefaults,e.getParameterString=D.getParameterString,e.getWFParameterString=D.getWFParameterString,e.urlAppend=D.urlAppend,e.getParameters=D.getParameters,e.IS_GECKO=D.IS_GECKO,e.Browser=D.Browser,e.getBrowser=D.getBrowser,e.isSupportCanvas=D.isSupportCanvas,e.supportCanvas=D.supportCanvas,e.isInTheSameDomain=D.isInTheSameDomain,e.toJSON=D.toJSON,e.transformResult=D.transformResult,e.copyAttributes=D.copyAttributes,e.copyAttributesWithClip=D.copyAttributesWithClip,e.cloneObject=D.cloneObject,e.newGuid=D.newGuid,e.bind=D.bind,e.bindAsEventListener=D.bindAsEventListener,e.getTopAnalysisResult=D.getTopAnalysisResult,e.ChineseToUtf8=D.ChineseToUtf8,e.DeepMerge=D.DeepMerge,e.merge=D.merge,e.mixin=D.mixin,e.createCanvasContext2D=D.createCanvasContext2D,e.formatQuery=D.formatQuery,e.formatEdits=D.formatEdits,e.returnPoint=D.returnPoint,e.formatPoints=D.formatPoints,e.notNULL=D.notNULL},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CTheme=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),n=r(6),o=r(22),s=function t(e){(0,i.default)(this,t);var r=void 0!==e?e:{};(0,o.extend)(this,r),this.Name=r&&r.Name?r.Name:null,this.IsBaseTheme=!r||!r.IsBaseTheme||r.IsBaseTheme,this.Visible=!r||!r.Visible||r.Visible};e.CTheme=s,n.Zondy.Object.Theme.CTheme=s},function(t,e,r){"use strict";r.r(e);var i=r(49),n=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||i.METERS_PER_UNIT[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.default=n},function(t,e,r){"use strict";r.r(e),r.d(e,"TileSourceEvent",function(){return f});var i=r(4),n=r(187),o=r(17),s=r(35),a=r(9),u=r(45),l=r(169),c=r(46),h=r(60),p=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new n.a(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,i){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var s,a,u,l=!0,h=r.minX;h<=r.maxX;++h)for(var p=r.minY;p<=r.maxY;++p)a=Object(c.getKeyZXY)(e,h,p),u=!1,n.containsKey(a)&&(u=(s=n.get(a)).getState()===o.default.LOADED)&&(u=!1!==i(s)),u||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,n,o){return Object(i.abstract)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(h.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(a.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var i=this.getTileGridForProjection(r),n=this.getTilePixelRatio(e),o=Object(u.toSize)(i.getTileSize(t),this.tmpSize);return 1==n?o:Object(u.scale)(o,n,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=Object(h.wrapX)(i,t,r)),Object(c.withinExtentAndZ)(t,i)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,r,i){},e}(l.default),f=function(t){function e(e,r){t.call(this,e),this.tile=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default);e.default=p},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=function(t,e,r,i){this.minX=t,this.maxX=e,this.minY=r,this.maxY=i};function n(t,e,r,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=r,o.maxY=n,o):new i(t,e,r,n)}i.prototype.contains=function(t){return this.containsXY(t[1],t[2])},i.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},i.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},i.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},i.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},i.prototype.getHeight=function(){return this.maxY-this.minY+1},i.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},i.prototype.getWidth=function(){return this.maxX-this.minX+1},i.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=i},function(t,e,r){"use strict";r.r(e);var i=r(3),n=r(10),o=r(1),s=r(89),a=r(5),u=r(11),l=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(i.unlisten)(this.geometries_[t],n.default.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(i.listen)(this.geometries_[t],n.default.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,i){if(i<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e))return i;for(var n=this.geometries_,s=0,a=n.length;s<a;++s)i=n[s].closestPointXY(t,e,r,i);return i},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)if(r[i].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(o.createOrUpdateEmpty)(t);for(var e=this.geometries_,r=0,i=e.length;r<i;++r)Object(o.extend)(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return c(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(r))return this.simplifiedGeometryCache[r];for(var i=[],n=this.geometries_,o=!1,s=0,a=n.length;s<a;++s){var l=n[s],c=l.getSimplifiedGeometry(t);i.push(c),c!==l&&(o=!0)}if(o){var h=new e(null);return h.setGeometriesArray(i),this.simplifiedGeometryCache[r]=h,h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return a.default.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,i=e.length;r<i;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var i=r;i||(i=Object(o.getCenter)(this.getExtent()));for(var n=this.geometries_,s=0,a=n.length;s<a;++s)n[s].scale(t,e,i);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(c(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,i=e.length;r<i;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,i=0,n=r.length;i<n;++i)r[i].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(s.default);function c(t){for(var e=[],r=0,i=t.length;r<i;++r)e.push(t[r].clone());return e}e.default=l},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(33),s=r(44),a=r(2),u=r(20),l=r(39),c=r(56),h=r(74),p=r(34),f=r(11),d=r(9),g=r(0),y=s.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",v={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},m=function(t){function e(e){var r=e||{};t.call(this,r),this.surface_=void 0!==r.surface&&r.surface,this.curve_=void 0!==r.curve&&r.curve,this.multiCurve_=void 0===r.multiCurve||r.multiCurve,this.multiSurface_=void 0===r.multiSurface||r.multiSurface,this.schemaLocation=r.schemaLocation?r.schemaLocation:y,this.hasZ=void 0!==r.hasZ&&r.hasZ}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readMultiCurve_=function(t,e){var r=Object(g.pushParseAndPop)([],this.MULTICURVE_PARSERS_,t,e,this);return r?new c.default(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=Object(g.pushParseAndPop)([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new h.default(r)},e.prototype.curveMemberParser_=function(t,e){Object(g.parseNode)(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){Object(g.parseNode)(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return Object(g.pushParseAndPop)([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return Object(g.pushParseAndPop)([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return Object(g.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return Object(g.pushParseAndPop)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=Object(g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=Object(g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=Object(g.pushParseAndPop)([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var n,o,s=r[0],a=[s.length];for(n=1,o=r.length;n<o;++n)Object(i.c)(s,r[n]),a.push(s.length);return new p.default(s,u.default.XYZ,a)}},e.prototype.readCurve_=function(t,e){var r=Object(g.pushParseAndPop)([null],this.CURVE_PARSERS_,t,e,this);return r?new l.default(r,u.default.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var r=Object(g.pushParseAndPop)([null],this.ENVELOPE_PARSERS_,t,e,this);return Object(n.createOrUpdate)(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,i=Object(g.getAllTextContent)(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=n.exec(i);)o.push(parseFloat(r[1])),i=i.substr(r[0].length);if(""===i){var s,a,u=e[0].srsName,l="enu";if(u&&(l=Object(d.get)(u).getAxisOrientation()),"neu"===l)for(s=0,a=o.length;s<a;s+=3){var c=o[s],h=o[s+1];o[s]=h,o[s+1]=c}var p=o.length;if(2==p&&o.push(0),0!==p)return o}},e.prototype.readFlatPosList_=function(t,e){var r=Object(g.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),i=e[0],n=i.srsName,o=i.srsDimension,s="enu";n&&(s=Object(d.get)(n).getAxisOrientation());var u,l,c,h=r.split(/\s+/),p=2;t.getAttribute("srsDimension")?p=Object(a.g)(t.getAttribute("srsDimension")):t.getAttribute("dimension")?p=Object(a.g)(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?p=Object(a.g)(t.parentNode.getAttribute("srsDimension")):o&&(p=Object(a.g)(o));for(var f=[],y=0,v=h.length;y<v;y+=p)u=parseFloat(h[y]),l=parseFloat(h[y+1]),c=3===p?parseFloat(h[y+2]):0,"en"===s.substr(0,2)?f.push(u,l,c):f.push(l,u,c);return f},e.prototype.writePos_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);var s=i.srsName,u="enu";s&&(u=Object(d.get)(s).getAxisOrientation());var l,c=e.getCoordinates();l="en"===u.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0],n&&(l+=" "+(c[2]||0)),Object(a.n)(t,l)},e.prototype.getCoords_=function(t,e,r){var i="enu";e&&(i=Object(d.get)(e).getAxisOrientation());var n="en"===i.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return r&&(n+=" "+(t[2]||0)),n},e.prototype.writePosList_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);for(var s,u=i.srsName,l=e.getCoordinates(),c=l.length,h=new Array(c),p=0;p<c;++p)s=l[p],h[p]=this.getCoords_(s,u,n);Object(a.n)(t,h.join(" "))},e.prototype.writePoint_=function(t,e,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var n=Object(g.createElementNS)(t.namespaceURI,"pos");t.appendChild(n),this.writePos_(n,e,r)},e.prototype.writeEnvelope=function(t,e,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(g.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,g.OBJECT_PROPERTY_NODE_FACTORY,n,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var n=Object(g.createElementNS)(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var i=e[e.length-1],n=i.node,o=i.exteriorWritten;return void 0===o&&(i.exteriorWritten=!0),Object(g.createElementNS)(n.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,r,void 0,this)}else if("Surface"===t.nodeName){var a=Object(g.createElementNS)(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=Object(g.createElementNS)(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,r)}else if("Curve"===t.nodeName){var o=Object(g.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName,s=i.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var i=r[r.length-1],n=i.srsName,o=i.hasZ;n&&t.setAttribute("srsName",n);var s=e.getPoints();Object(g.pushSerializeAndPop)({node:t,hasZ:o,srsName:n},this.POINTMEMBER_SERIALIZERS_,Object(g.makeSimpleNodeFactory)("pointMember"),s,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName,s=i.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var i=Object(g.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing_(i,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var i=this.GEOMETRY_NODE_FACTORY_(e,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon_(i,e,r))},e.prototype.writePointMember_=function(t,e,r){var i=Object(g.createElementNS)(t.namespaceURI,"Point");t.appendChild(i),this.writePoint_(i,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var i=this.GEOMETRY_NODE_FACTORY_(e,r);i&&(t.appendChild(i),this.writeCurveOrLineString_(i,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var i=Object(g.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon_(i,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var i=Object(g.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString_(i,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var i,n=r[r.length-1],s=Object(f.assign)({},n);s.node=t,i=Array.isArray(e)?n.dataProjection?Object(d.transformExtent)(e,n.featureProjection,n.dataProjection):e:Object(o.transformWithOptions)(e,!0,n),Object(g.pushSerializeAndPop)(s,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[i],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var i=e.getId();i&&t.setAttribute("fid",i);var n=r[r.length-1],o=n.featureNS,s=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var u=e.getProperties(),l=[],c=[];for(var h in u){var p=u[h];null!==p&&(l.push(h),c.push(p),h==s||"function"==typeof p.getSimplifiedGeometry?h in n.serializers[o]||(n.serializers[o][h]=Object(g.makeChildAppender)(this.writeGeometryElement,this)):h in n.serializers[o]||(n.serializers[o][h]=Object(g.makeChildAppender)(a.n)))}var d=Object(f.assign)({},n);d.node=t,Object(g.pushSerializeAndPop)(d,n.serializers,Object(g.makeSimpleNodeFactory)(void 0,o),c,r,l)},e.prototype.writeFeatureMembers_=function(t,e,r){var i=r[r.length-1],n=i.featureType,o=i.featureNS,s={};s[o]={},s[o][n]=Object(g.makeChildAppender)(this.writeFeatureElement,this);var a=Object(f.assign)({},i);a.node=t,Object(g.pushSerializeAndPop)(a,s,Object(g.makeSimpleNodeFactory)(n,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var i=e[e.length-1].node;return Object(g.createElementNS)(this.namespace,v[i.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var i,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.curve,u=n.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===o?i="MultiSurface":"Polygon"===i&&!0===s?i="Surface":"LineString"===i&&!0===a?i="Curve":"MultiLineString"===i&&!0===u&&(i="MultiCurve"),Object(g.createElementNS)(this.namespace,i)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=Object(g.createElementNS)(this.namespace,"geom"),i={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object(f.assign)(i,e),this.writeGeometryElement(r,t,[i]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Object(g.createElementNS)(this.namespace,"featureMembers");r.setAttributeNS(g.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object(f.assign)(i,e),this.writeFeatureMembers_(r,t,[i]),r},e}(s.default);m.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Object(g.makeReplacer)(m.prototype.readFlatPos_),posList:Object(g.makeReplacer)(m.prototype.readFlatPosList_)}},m.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:m.prototype.interiorParser_,exterior:m.prototype.exteriorParser_}},m.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(g.makeReplacer)(s.default.prototype.readPoint),MultiPoint:Object(g.makeReplacer)(s.default.prototype.readMultiPoint),LineString:Object(g.makeReplacer)(s.default.prototype.readLineString),MultiLineString:Object(g.makeReplacer)(s.default.prototype.readMultiLineString),LinearRing:Object(g.makeReplacer)(s.default.prototype.readLinearRing),Polygon:Object(g.makeReplacer)(s.default.prototype.readPolygon),MultiPolygon:Object(g.makeReplacer)(s.default.prototype.readMultiPolygon),Surface:Object(g.makeReplacer)(m.prototype.readSurface_),MultiSurface:Object(g.makeReplacer)(m.prototype.readMultiSurface_),Curve:Object(g.makeReplacer)(m.prototype.readCurve_),MultiCurve:Object(g.makeReplacer)(m.prototype.readMultiCurve_),Envelope:Object(g.makeReplacer)(m.prototype.readEnvelope_)}},m.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(g.makeArrayPusher)(m.prototype.curveMemberParser_),curveMembers:Object(g.makeArrayPusher)(m.prototype.curveMemberParser_)}},m.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(g.makeArrayPusher)(m.prototype.surfaceMemberParser_),surfaceMembers:Object(g.makeArrayPusher)(m.prototype.surfaceMemberParser_)}},m.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(g.makeArrayPusher)(s.default.prototype.readLineString),Curve:Object(g.makeArrayPusher)(m.prototype.readCurve_)}},m.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(g.makeArrayPusher)(s.default.prototype.readPolygon),Surface:Object(g.makeArrayPusher)(m.prototype.readSurface_)}},m.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(g.makeReplacer)(m.prototype.readPatch_)}},m.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(g.makeReplacer)(m.prototype.readSegment_)}},m.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(g.makeArrayPusher)(m.prototype.readFlatPosList_),upperCorner:Object(g.makeArrayPusher)(m.prototype.readFlatPosList_)}},m.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(g.makeReplacer)(m.prototype.readPolygonPatch_)}},m.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(g.makeReplacer)(m.prototype.readLineStringSegment_)}},m.prototype.writeFeatures,m.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(g.makeChildAppender)(m.prototype.writeRing_),interior:Object(g.makeChildAppender)(m.prototype.writeRing_)}},m.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(g.makeChildAppender)(a.n),upperCorner:Object(g.makeChildAppender)(a.n)}},m.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygonMember_)}},m.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(g.makeChildAppender)(m.prototype.writePointMember_)}},m.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(g.makeChildAppender)(m.prototype.writeLineStringOrCurveMember_),curveMember:Object(g.makeChildAppender)(m.prototype.writeLineStringOrCurveMember_)}},m.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(g.makeChildAppender)(m.prototype.writeCurveOrLineString_),MultiCurve:Object(g.makeChildAppender)(m.prototype.writeMultiCurveOrLineString_),Point:Object(g.makeChildAppender)(m.prototype.writePoint_),MultiPoint:Object(g.makeChildAppender)(m.prototype.writeMultiPoint_),LineString:Object(g.makeChildAppender)(m.prototype.writeCurveOrLineString_),MultiLineString:Object(g.makeChildAppender)(m.prototype.writeMultiCurveOrLineString_),LinearRing:Object(g.makeChildAppender)(m.prototype.writeLinearRing_),Polygon:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(g.makeChildAppender)(m.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(g.makeChildAppender)(m.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(g.makeChildAppender)(m.prototype.writeEnvelope)}},e.default=m},function(t,e,r){"use strict";var i=function(){this.disposed_=!1};i.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},i.prototype.disposeInternal=function(){},e.a=i},function(t,e,r){"use strict";var i=function(t){this.tagName_=t};i.prototype.getTagName=function(){return this.tagName_},e.a=i},function(t,e,r){"use strict";var i=function(t){function e(e,r){t.call(this,e),this.propertyName=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(132).a);e.a=i},function(t,e,r){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,r){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,r){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(178)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceBase=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(22);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,i.default)(this,t),(0,s.extend)(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null,this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:""}return(0,n.default)(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(o.Zondy.Util.isArray(t.ip))for(var r=0;r<t.ip.length;r++){e=new Array;var i;i=(0,s.isArray)(t.port)?void 0!==t.port[r]?t.port[r]:"6163":void 0!==t.port?t.port:"6163";var n;n=(0,s.isArray)(t.partUrl)?void 0!==t.partUrl[r]?t.partUrl[r]:null:void 0!==t.partUrl?t.partUrl:null,""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip[r]+":"+i:t.domainStr=t.domain,e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+n).trim()))}else""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port:t.domainStr=t.domain,e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();e.ServiceBase=u,o.Zondy.Service.ServiceBase=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalysisBase=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(6),c=r(22),h=r(139),p=r(55);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfws";var i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.flowID=void 0!==r.flowID?r.flowID:null,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e,r){var n={};if((0,c.copyExcluce)(n,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"===e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!==n)){var o=(0,c.getWFParameterString)(n);null===o&&""===o||(this.partUrl+="&paraValues="+o)}if("post"===e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var s=new Array;if(null!==n)for(var a in n)if(null!==n[a]){var u={};u.Key=a,u.Value=n[a].toString(),s.push(u)}n=s}var l=this.getFullUrl(),h=new p.IgsServiceBase(l,{eventListeners:{scope:this,processCompleted:t,processFailed:r}});"post"===e.toLowerCase()?h.processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):h.processAsync()}}]),e}(h.ServiceBase);e.AnalysisBase=d,l.Zondy.Service.AnalysisBase=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeParameters=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="Zondy.Feature.ShapeParameters"}return(0,n.default)(t,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),t}();e.ShapeParameters=a,o.Zondy.Feature.ShapeParameters=a},function(t,e,r){"use strict";r.r(e);var i=r(95),n=r(17),o=r(24),s=r(3),a=r(10),u=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,s),this.crossOrigin_=n,this.src_=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==n.default.LOADING&&(this.unlistenImage_(),this.image_=l()),this.interimTile&&this.interimTile.dispose(),this.state=n.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=n.default.ERROR,this.unlistenImage_(),this.image_=l(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=n.default.LOADED:this.state=n.default.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==n.default.ERROR&&(this.state=n.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==n.default.IDLE&&(this.state=n.default.LOADING,this.changed(),this.imageListenerKeys_=[Object(s.listenOnce)(this.image_,a.default.ERROR,this.handleImageError_,this),Object(s.listenOnce)(this.image_,a.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.unlistenByKey),this.imageListenerKeys_=null},e}(i.default);function l(){var t=Object(o.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}e.default=u},function(t,e,r){"use strict";r.r(e);var i=function(){};i.prototype.drawCustom=function(t,e,r){},i.prototype.drawGeometry=function(t){},i.prototype.setStyle=function(t){},i.prototype.drawCircle=function(t,e){},i.prototype.drawFeature=function(t,e){},i.prototype.drawGeometryCollection=function(t,e){},i.prototype.drawLineString=function(t,e){},i.prototype.drawMultiLineString=function(t,e){},i.prototype.drawMultiPoint=function(t,e){},i.prototype.drawMultiPolygon=function(t,e){},i.prototype.drawPoint=function(t,e){},i.prototype.drawPolygon=function(t,e){},i.prototype.drawText=function(t,e){},i.prototype.setFillStrokeStyle=function(t,e){},i.prototype.setImageStyle=function(t,e){},i.prototype.setTextStyle=function(t,e){},e.default=i},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(20),o=r(5),s=r(63),a=r(153),u=r(99),l=r(73),c=r(77),h=r(116),p=function(t){function e(e,r){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?this.setCoordinates(e,r):this.setFlatCoordinates(r,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<Object(i.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return Object(a.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,n.default.XY)},e.prototype.getType=function(){return o.default.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.default);e.default=p},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i="http://www.w3.org/1999/xlink";function n(t){return t.getAttributeNS(i,"href")}},function(t,e,r){var i=r(122),n=r(366),o=r(298),s=Object.defineProperty;e.f=r(138)?Object.defineProperty:function(t,e,r){if(i(t),e=o(e,!0),i(r),n)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeInfo=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),n=r(6),o=r(22);r(250),r(420),r(421);var s=function t(e){(0,i.default)(this,t);var r=void 0!==e?e:{};(0,o.extend)(this,r),this.Caption=void 0!==r.Caption?r.Caption:null,this.IsVisible=void 0===r.IsVisible||r.IsVisible,this.MaxScale=void 0!==r.MaxScale?parseFloat(r.MaxScale):0,this.MinScale=void 0!==r.MinScale?parseFloat(r.MinScale):0,this.RegInfo=void 0!==r.RegInfo?r.RegInfo:null,this.LinInfo=void 0!==r.LinInfo?r.LinInfo:null,this.PntInfo=void 0!==r.PntInfo?r.PntInfo:null};e.CThemeInfo=s,n.Zondy.Object.Theme.CThemeInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(209),h=r(100),p=r(205);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r,o,a,u,c){(0,n.default)(this,e);var p=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,c));if(p.shapeFactory=new h.ShapeFactory,p.shapeParameters=null,p.RelativeCoordinate=!1,p.setting=null,p.origonPoint=null,p.chartBox=null,p.chartBounds=null,p.width=null,p.height=null,p.XOffset=0,p.YOffset=0,p.DVBParameter=null,p.dataViewBox=null,p.DVBCodomain=null,p.DVBCenterPoint=null,p.DVBUnitValue=null,p.DVBOrigonPoint=null,p.DVBWidth=null,p.DVBHeight=null,p.origonPointOffset=null,p.fields=o||[],p.dataValues=null,u)p.lonlat=u;else if(c&&c.calGravity)if(t.ftype===l.Zondy.Enum.FeatureType.Pnt){var f=t.fGeom.PntGeom[0].Dot;p.lonlat=[f.x,f.y]}else if(t.ftype===l.Zondy.Enum.FeatureType.Lin){var d=[];t.fGeom.LinGeom[0].Line.Arcs.forEach(function(t){var e=t.Dots;d=[].concat(e)});var g=Math.ceil(d.length/2);f=d[g-1],p.lonlat=[f.x,f.y]}else if(t.ftype===l.Zondy.Enum.FeatureType.Reg)p.lonlat=p.getCenterOfGravityPoint(t);else{var y=t.bound;p.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}else y=t.bound,p.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2];return a&&a.width&&a.height&&a.codomain&&(p.setting=a),p.CLASS_NAME="Zondy.Feature.Theme.Graph",p}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var i=this.width,n=this.height,o=this.location;this.origonPoint=[o[0]-i/2,o[1]-n/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+n,s[0]+i,s[1]];var a=this.chartBox,u=this.DVBParameter;this.dataViewBox=[a[0]+u[0],a[1]-u[1],a[2]-u[2],a[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3]||(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]],0))}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,i=this.height,n=this.location;return this.chartBounds=new p.Rectangle(n[0]-r/2,n[1]-i/2,n[0]+r/2,n[1]+i/2),this.resetLinearGradient(),n}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,i=t.length;r<i;r++){t[r].refOriginalPosition=e;var n=t[r].style;for(var o in n)switch(o){case"pointList":for(var s=n[o],a=0,u=s.length;a<u;a++)s[a][0]-=e[0],s[a][1]-=e[1];break;case"x":n[o]-=e[0];break;case"y":n[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function(t){var e=[],r=0,i=0,n=0;if(t.ftype===l.Zondy.Enum.FeatureType.Reg)for(var o=t.fGeom.RegGeom,s=0;s<o.length;s++){var a=o[s];if(null!=a&&null!=a.Rings)for(var u=a.Rings,c=0;c<u.length;c++){var h=u[c];if(null!=h&&null!=h.Arcs)for(var p=h.Arcs,f=0;f<p.length;f++){var d=p[f];if(null!=d&&null!=d.Dots)for(var g=d.Dots,y=0;y<g.length;y++)e.push(g[y])}}}for(c=1;c<=e.length;c++){var v=e[c%e.length].x,m=e[c%e.length].y,_=e[c-1].x,b=e[c-1].y,S=(v*b-m*_)/2;r+=S,i+=S*(v+_)/3,n+=S*(m+b)/3}return[i/=r,n/=r]}}]),e}(c.Theme);c.Theme.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var i=[],n=t.attributes,o=0;o<e.length;o++)for(var s in n)if(s===e[o]&&null!==n[s]&&void 0!==n[s])try{!isNaN(r)&&r>=0?i.push(parseFloat(n[s].toString()).toFixed(r)):i.push(parseFloat(n[s].toString()))}catch(t){throw new Error("not a number")}return i.length===e.length&&i},e.Graph=d,l.Zondy.Theme.Graph=d},function(t,e,r){"use strict";r.r(e);var i=r(50),n=r(69),o=r(135),s=r(11),a=function(t){function e(e){var r=e||{},n=Object(s.assign)({},r);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(void 0!==r.preload?r.preload:0),this.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),this.type=i.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o.a.PRELOAD)},e.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(n.default);a.prototype.getSource,e.default=a},function(t,e,r){"use strict";r.r(e),r.d(e,"unByKey",function(){return a});var i=r(3),n=r(102),o=r(10),s=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.default.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=Object(i.listen)(this,t[o],e);return n}return Object(i.listen)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=Object(i.listenOnce)(this,t[o],e);return n}return Object(i.listenOnce)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)Object(i.unlisten)(this,t[r],e);else Object(i.unlisten)(this,t,e)},e}(n.a);function a(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)Object(i.unlistenByKey)(t[e]);else Object(i.unlistenByKey)(t)}e.default=s},function(t,e,r){"use strict";var i=r(4),n=r(102),o=r(10),s=function(t){function e(e,r,i,n){t.call(this),this.extent=e,this.pixelRatio_=i,this.resolution=r,this.state=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(i.abstract)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(i.abstract)()},e}(n.a);e.a=s},function(t,e,r){"use strict";var i=r(151),n=r(27),o=function(t){function e(e,r,i,o,s){var a=void 0!==s?n.a.IDLE:n.a.LOADED;t.call(this,e,r,i,a),this.loader_=void 0!==s?s:null,this.canvas_=o,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=n.a.ERROR):this.state=n.a.LOADED,this.changed()},e.prototype.load=function(){this.state==n.a.IDLE&&(this.state=n.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(i.a);e.a=o},function(t,e,r){"use strict";function i(t,e,r,i){for(var n=0,o=t[r-i],s=t[r-i+1];e<r;e+=i){var a=t[e],u=t[e+1];n+=s*a-o*u,o=a,s=u}return n/2}function n(t,e,r,n){for(var o=0,s=0,a=r.length;s<a;++s){var u=r[s];o+=i(t,e,u,n),e=u}return o}function o(t,e,r,i){for(var o=0,s=0,a=r.length;s<a;++s){var u=r[s];o+=n(t,e,u,i),e=u[u.length-1]}return o}r.d(e,"a",function(){return i}),r.d(e,"b",function(){return n}),r.d(e,"c",function(){return o})},function(t,e,r){"use strict";r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a}),r.d(e,"c",function(){return u}),r.d(e,"d",function(){return l});var i=r(1),n=r(103),o=r(261);function s(t,e,r,n,s){var a=Object(i.extendFlatCoordinates)(Object(i.createEmpty)(),t,e,r,n);return!!Object(i.intersects)(s,a)&&(!!Object(i.containsExtent)(s,a)||a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]||Object(o.a)(t,e,r,n,function(t,e){return Object(i.intersectsSegment)(s,t,e)}))}function a(t,e,r,i,n){for(var o=0,a=r.length;o<a;++o){if(s(t,e,r[o],i,n))return!0;e=r[o]}return!1}function u(t,e,r,i,o){if(!function(t,e,r,i,o){return!!(s(t,e,r,i,o)||Object(n.b)(t,e,r,i,o[0],o[1])||Object(n.b)(t,e,r,i,o[0],o[3])||Object(n.b)(t,e,r,i,o[2],o[1])||Object(n.b)(t,e,r,i,o[2],o[3]))}(t,e,r[0],i,o))return!1;if(1===r.length)return!0;for(var a=1,u=r.length;a<u;++a)if(Object(n.a)(t,r[a-1],r[a],i,o)&&!s(t,r[a-1],r[a],i,o))return!1;return!0}function l(t,e,r,i,n){for(var o=0,s=r.length;o<s;++o){var a=r[o];if(u(t,e,a,i,n))return!0;e=a[a.length-1]}return!1}},function(t,e,r){"use strict";var i=function(t,e){this.dispatcher=t,this.mapping_=e};i.prototype.getEvents=function(){return Object.keys(this.mapping_)},i.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=i},function(t,e,r){"use strict";var i=function(t){function e(e,r,i){t.call(this,e),this.map=r,this.frameState=void 0!==i?i:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(35).default);e.a=i},function(t,e,r){"use strict";var i=function(t){function e(e,r,i,n,o){t.call(this,e),this.vectorContext=r,this.frameState=i,this.context=n,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(35).default);e.a=i},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(50),o=r(128),s=r(17),a=r(28),u=r(24),l=r(1),c=r(268),h=r(18),p=function(t){function e(e,r){t.call(this,e),this.context=r?null:Object(u.createCanvasContext2D)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(l.createEmpty)(),this.tmpTileRange_=new o.b(0,0,0,0),this.imageTransform_=Object(h.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),r=t.getState(),i=e.getUseInterimTilesOnError();return r==s.default.LOADED||r==s.default.EMPTY||r==s.default.ERROR&&!i},e.prototype.getTile=function(t,e,r,i,n){var o=this.getLayer(),a=o.getSource().getTile(t,e,r,i,n);return a.getState()==s.default.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):a.setState(s.default.LOADED)),this.isDrawableTile_(a)||(a=a.getInterimTile()),a},e.prototype.prepareFrame=function(t,e){var r=t.pixelRatio,n=t.size,o=t.viewState,u=o.projection,c=o.resolution,p=o.center,f=this.getLayer(),d=f.getSource(),g=d.getRevision(),y=d.getTileGridForProjection(u),v=y.getZForResolution(c,this.zDirection),m=y.getResolution(v),_=Math.round(c/m)||1,b=t.extent;if(void 0!==e.extent&&(b=Object(l.getIntersection)(b,e.extent)),Object(l.isEmpty)(b))return!1;var S=y.getTileRangeForExtentAndZ(b,v),x=y.getTileRangeExtent(v,S),O=d.getTilePixelRatio(r),E={};E[v]={};var C,T,P,w=this.createLoadedTileFinder(d,u,E),I=t.viewHints,L=I[a.default.ANIMATING]||I[a.default.INTERACTING],R=this.tmpExtent,M=this.tmpTileRange_;for(this.newTiles_=!1,T=S.minX;T<=S.maxX;++T)for(P=S.minY;P<=S.maxY;++P)if(!(Date.now()-t.time>16&&L)){if(C=this.getTile(v,T,P,r,u),this.isDrawableTile_(C)){var A=Object(i.getUid)(this);if(C.getState()==s.default.LOADED){E[v][C.tileCoord.toString()]=C;var j=C.inTransition(A);this.newTiles_||!j&&-1!==this.renderedTiles.indexOf(C)||(this.newTiles_=!0)}if(1===C.getAlpha(A,t.time))continue}var N=y.getTileCoordChildTileRange(C.tileCoord,M,R),F=!1;N&&(F=w(v+1,N)),F||y.forEachTileCoordParentTileRange(C.tileCoord,w,null,M,R)}var D=m*r/O*_;if(!(this.renderedResolution&&Date.now()-t.time>16&&L)&&(this.newTiles_||!this.renderedExtent_||!Object(l.containsExtent)(this.renderedExtent_,b)||this.renderedRevision!=g||_!=this.oversampling_||!L&&D!=this.renderedResolution)){var k=this.context;if(k){var G=d.getTilePixelSize(v,r,u),B=Math.round(S.getWidth()*G[0]/_),U=Math.round(S.getHeight()*G[1]/_),V=k.canvas;V.width!=B||V.height!=U?(this.oversampling_=_,V.width=B,V.height=U):((this.renderedExtent_&&!Object(l.equals)(x,this.renderedExtent_)||this.renderedRevision!=g)&&k.clearRect(0,0,B,U),_=this.oversampling_)}this.renderedTiles.length=0;var z,W,Y,X,Z,H,q,K,J,Q,$=Object.keys(E).map(Number);for($.sort(function(t,e){return t===v?1:e===v?-1:t>e?1:t<e?-1:0}),X=0,Z=$.length;X<Z;++X)for(var tt in Y=$[X],W=d.getTilePixelSize(Y,r,u),z=y.getResolution(Y)/m,q=O*d.getGutterForProjection(u),K=E[Y])C=K[tt],T=((H=y.getTileCoordExtent(C.getTileCoord(),R))[0]-x[0])/m*O/_,P=(x[3]-H[3])/m*O/_,J=W[0]*z/_,Q=W[1]*z/_,this.drawTileImage(C,t,e,T,P,J,Q,q,v===Y),this.renderedTiles.push(C);this.renderedRevision=g,this.renderedResolution=m*r/O*_,this.renderedExtent_=x}var et=this.renderedResolution/c,rt=Object(h.b)(this.imageTransform_,r*n[0]/2,r*n[1]/2,et,et,0,(this.renderedExtent_[0]-p[0])/this.renderedResolution*r,(p[1]-this.renderedExtent_[3])/this.renderedResolution*r);return Object(h.b)(this.coordinateToCanvasPixelTransform,r*n[0]/2-rt[4],r*n[1]/2-rt[5],r/c,-r/c,0,-p[0],-p[1]),this.updateUsedTiles(t.usedTiles,d,v,S),this.manageTilePyramid(t,d,y,r,u,b,v,f.getPreload()),this.scheduleExpireCache(t,d),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,r,n,o,s,a,u,l){var c=this.getTileImage(t);if(c){var h=Object(i.getUid)(this),p=l?t.getAlpha(h,e.time):1,f=this.getLayer().getSource();1!==p||f.getOpaque(e.viewState.projection)||this.context.clearRect(n,o,s,a);var d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(c,u,u,c.width-2*u,c.height-2*u,n,o,s,a),d&&this.context.restore(),1!==p?e.animate=!0:l&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(c.a);p.handles=function(t){return t.getType()===n.a.TILE},p.create=function(t,e){return new p(e)},p.prototype.getLayer,e.default=p},function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return n}),r.d(e,"d",function(){return h});var i=1,n="mouse";function o(t){if(!this.isEventSimulatedFromTouch_(t)){i.toString()in this.pointerMap&&this.cancel(t);var e=h(t,this.dispatcher);this.pointerMap[i.toString()]=t,this.dispatcher.down(e,t)}}function s(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.move(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[i.toString()];if(e&&e.button===t.button){var r=h(t,this.dispatcher);this.dispatcher.up(r,t),this.cleanupMouse()}}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function l(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var c=function(t){function e(e){var r={mousedown:o,mousemove:s,mouseup:a,mouseover:u,mouseout:l};t.call(this,e,r),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,r=t.clientX,i=t.clientY,n=0,o=e.length,s=void 0;n<o&&(s=e[n]);n++){var a=Math.abs(r-s[0]),u=Math.abs(i-s[1]);if(a<=25&&u<=25)return!0}return!1},e.prototype.cancel=function(t){var e=h(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[i.toString()]},e}(r(155).a);function h(t,e){var r=e.cloneEvent(t,t),o=r.preventDefault;return r.preventDefault=function(){t.preventDefault(),o()},r.pointerId=i,r.isPrimary=!0,r.pointerType=n,r}e.c=c},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i="1.3.0"},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var i=r(364),n=r(292);t.exports=function(t){return i(n(t))}},function(t,e,r){var i=r(146),n=r(239);t.exports=r(138)?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tangram=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(22);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,i.default)(this,t);var r=e||{};(0,s.extend)(this,r)}return(0,n.default)(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var r;return r=t.replace(/(^\s+)|(\s+$)/g,""),"g"===e.toLowerCase()&&(r=r.replace(/\s/g,"")),r}}]),t}();e.Tangram=u,o.Zondy.Object.Tangram=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryAnalysisBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{};return r.baseUrl="igs/rest/mrgs",(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return(0,s.default)(e,t),e}(r(139).ServiceBase);e.GeometryAnalysisBase=l,a.Zondy.Service.GeometryAnalysisBase=l},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i,n,o){t.call(this,e,r,o),this.originalEvent=i,this.pixel=r.getEventPixel(i),this.coordinate=r.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(r(156).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(48),o=r(51),s=r(166),a=r(260),u=r(31),l=r(156),c=r(134),h=r(80),p=r(59),f=r(25),d=r(119),g=r(186),y=r(184),v=r(28),m=r(23),_=r(24),b=r(3),S=r(35),x=r(10),O=r(1),E=r(29),C=r(42),T=r(343),P=r(45),w=r(175),I=r(18),L=function(t){function e(e){t.call(this);var r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,i,o,s={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new T.default({layers:t.layers});return s[h.a.LAYERGROUP]=a,s[h.a.TARGET]=t.target,s[h.a.VIEW]=void 0!==t.view?t.view:new y.default,void 0!==t.controls&&(Array.isArray(t.controls)?r=new n.default(t.controls.slice()):(Object(m.a)("function"==typeof t.controls.getArray,47),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new n.default(t.interactions.slice()):(Object(m.a)("function"==typeof t.interactions.getArray,48),i=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new n.default(t.overlays.slice()):(Object(m.a)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new n.default,{controls:r,interactions:i,keyboardEventTarget:e,overlays:o,values:s}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:C.DEVICE_PIXEL_RATIO,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(I.c)(),this.pixelToCoordinateTransform_=Object(I.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(C.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=[x.default.CLICK,x.default.DBLCLICK,x.default.MOUSEDOWN,x.default.TOUCHSTART,x.default.MSPOINTERDOWN,u.default.POINTERDOWN,x.default.MOUSEWHEEL,x.default.WHEEL],s=0,l=i.length;s<l;++s)Object(b.listen)(this.overlayContainerStopEvent_,i[s],S.stopPropagation);for(var c in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new a.a(this,e.moveTolerance),u.default)Object(b.listen)(this.mapBrowserEventHandler_,u.default[c],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=r.keyboardEventTarget,this.keyHandlerKeys_=null,Object(b.listen)(this.viewport_,x.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(b.listen)(this.viewport_,x.default.WHEEL,this.handleBrowserEvent,this),Object(b.listen)(this.viewport_,x.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=r.controls||new n.default,this.interactions=r.interactions||new n.default,this.overlays_=r.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new g.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(b.listen)(this,Object(f.getChangeEventType)(h.a.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(b.listen)(this,Object(f.getChangeEventType)(h.a.VIEW),this.handleViewChanged_,this),Object(b.listen)(this,Object(f.getChangeEventType)(h.a.SIZE),this.handleSizeChanged_,this),Object(b.listen)(this,Object(f.getChangeEventType)(h.a.TARGET),this.handleTargetChanged_,this),this.setProperties(r.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(b.listen)(this.controls,o.default.ADD,function(t){t.element.setMap(this)},this),Object(b.listen)(this.controls,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(b.listen)(this.interactions,o.default.ADD,function(t){t.element.setMap(this)},this),Object(b.listen)(this.interactions,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(b.listen)(this.overlays_,o.default.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(b.listen)(this.overlays_,o.default.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(b.unlisten)(this.viewport_,x.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(b.unlisten)(this.viewport_,x.default.WHEEL,this.handleBrowserEvent,this),Object(b.unlisten)(this.viewport_,x.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(x.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var i=this.getCoordinateFromPixel(t),n=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:E.b;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,n,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=null;return this.forEachFeatureAtPixel(t,function(t){r||(r=[]),r.push(t)},e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var i=r||{},n=void 0!==i.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||E.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,n,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixel(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:E.b,n=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,n,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(h.a.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(I.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(h.a.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(I.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(h.a.SIZE)},e.prototype.getView=function(){return this.get(h.a.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,i){var n=this.frameState_;if(!(n&&e in n.wantedTiles))return w.a;if(!n.wantedTiles[e][t.getKey()])return w.a;var o=r[0]-n.focus[0],s=r[1]-n.focus[1];return 65536*Math.log(i)+Math.sqrt(o*o+s*s)/i},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,i=new s.default(r,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.getActive()&&!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,i=r;if(t){var n=t.viewHints;n[v.default.ANIMATING]&&(r=this.loadTilesWhileAnimating_?8:0,i=2),n[v.default.INTERACTING]&&(r=this.loadTilesWhileInteracting_?8:0,i=2)}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,i))}!t||!this.hasListener(p.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var r=0,i=e.length;r<i;++r){var n=e[r];if("function"==typeof n.getLayers)return t(n.getLayers().getArray());var o=n.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(p.a.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)Object(b.unlistenByKey)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(b.listen)(i,x.default.KEYDOWN,this.handleBrowserEvent,this),Object(b.listen)(i,x.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(x.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(_.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(x.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(b.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(b.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(i.getUid)(t)),this.viewPropertyListenerKey_=Object(b.listen)(t,d.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(b.listen)(t,x.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(b.listen)(t,d.a.PROPERTYCHANGE,this.render,this),Object(b.listen)(t,x.default.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,r=this.getSize(),n=this.getView(),o=Object(O.createEmpty)(),s=this.frameState_,a=null;if(void 0!==r&&Object(P.hasArea)(r)&&n&&n.isDef()){for(var u=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=this.getLayerGroup().getLayerStatesArray(),p={},f=0,d=h.length;f<d;++f)p[Object(i.getUid)(h[f].layer)]=h[f];e=n.getState(this.pixelRatio_),a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:p,layerStatesArray:h,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:u,wantedTiles:{}}}a&&(a.extent=Object(O.getForViewAndSize)(e.center,e.resolution,e.rotation,a.size,o)),this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!Object(O.isEmpty)(this.previousExtent_)&&!Object(O.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new l.a(c.a.MOVESTART,this,s)),this.previousExtent_=Object(O.createOrUpdateEmpty)(this.previousExtent_)),this.previousExtent_&&!a.viewHints[v.default.ANIMATING]&&!a.viewHints[v.default.INTERACTING]&&!Object(O.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new l.a(c.a.MOVEEND,this,a)),Object(O.clone)(a.extent,this.previousExtent_))),this.dispatchEvent(new l.a(c.a.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(h.a.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(h.a.SIZE,t)},e.prototype.setTarget=function(t){this.set(h.a.TARGET,t)},e.prototype.setView=function(t){this.set(h.a.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[Object(i.getUid)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Object(i.getUid)(t)],this.render()},e}(f.default);e.default=L},function(t,e,r){"use strict";r.r(e);var i=r(23),n=r(102),o=r(10),s=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.default.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var r=this.oldest_;r;)t.call(e,r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(i.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(i.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(i.a)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(n.a);e.default=s},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(25),o=r(9),s=r(43),a=function(t){function e(e){t.call(this),this.projection_=Object(o.get)(e.projection),this.attributions_=u(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:s.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(i.abstract)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=u(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(n.default);function u(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.default=a},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(78),o=r(1),s=r(5),a=r(63),u=r(52),l=r(42),c=r(143),h=r(21),p=r(18),f=function(t){function e(e,r,i,n,o){t.call(this),this.context_=e,this.pixelRatio_=r,this.extent_=i,this.transform_=n,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(p.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,r,i){if(this.image_){var n=Object(u.c)(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var c=0,h=n.length;c<h;c+=2){var f=n[c]-this.imageAnchorX_,d=n[c+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var g=f+this.imageAnchorX_,y=d+this.imageAnchorY_;Object(p.b)(s,g,y,this.imageScale_,this.imageScale_,l,-g,-y),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,r,i){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=Object(u.c)(t,e,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<r;e+=i){var a=n[e]+this.textOffsetX_,l=n[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var c=Object(p.b)(this.tmpLocalTransform_,a,l,this.textScale_,this.textScale_,s,-a,-l);o.setTransform.apply(o,c)}this.textStrokeState_&&o.strokeText(this.text_,a,l),this.textFillState_&&o.fillText(this.text_,a,l)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,i,n){var o=this.context_,s=Object(u.c)(t,e,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;n&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return n&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,i){for(var n=0,o=r.length;n<o;++n)e=this.moveToLineTo_(t,e,r[n],i,!0);return e},e.prototype.drawCircle=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(a.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],i=e[3]-e[1],n=Math.sqrt(r*r+i*i),s=this.context_;s.beginPath(),s.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case s.default.POINT:this.drawPoint(t);break;case s.default.LINE_STRING:this.drawLineString(t);break;case s.default.POLYGON:this.drawPolygon(t);break;case s.default.MULTI_POINT:this.drawMultiPoint(t);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.default.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&Object(o.intersects)(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,i=e.length;r<i;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(o.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,i=t.getFlatCoordinates(),n=0,s=t.getEnds(),a=t.getStride();r.beginPath();for(var u=0,l=s.length;u<l;++u)n=this.moveToLineTo_(i,n,s[u],a,!1);r.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),i=0,n=t.getEndss(),s=t.getStride();e.beginPath();for(var a=0,u=n.length;a<u;++a){var l=n[a];i=this.drawRings_(r,i,l,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=e.lineCap=t.lineCap),l.CANVAS_LINE_DASH&&(Object(i.b)(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,l.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,i=t.textAlign?t.textAlign:h.defaultTextAlign;r?(r.font!=t.font&&(r.font=e.font=t.font),r.textAlign!=i&&(r.textAlign=e.textAlign=i),r.textBaseline!=t.textBaseline&&(r.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:Object(n.asColorLike)(r||h.defaultFillStyle)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),s=e.getLineDash(),a=e.getLineDashOffset(),u=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:h.defaultLineCap,lineDash:s||h.defaultLineDash,lineDashOffset:a||h.defaultLineDashOffset,lineJoin:void 0!==u?u:h.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==l?l:h.defaultLineWidth),miterLimit:void 0!==c?c:h.defaultMiterLimit,strokeStyle:Object(n.asColorLike)(i||h.defaultStrokeStyle)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),i=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=n[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Object(n.asColorLike)(r||h.defaultFillStyle)}}else this.textFillState_=null;var i=t.getStroke();if(i){var o=i.getColor(),s=i.getLineCap(),a=i.getLineDash(),u=i.getLineDashOffset(),l=i.getLineJoin(),c=i.getWidth(),p=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==s?s:h.defaultLineCap,lineDash:a||h.defaultLineDash,lineDashOffset:u||h.defaultLineDashOffset,lineJoin:void 0!==l?l:h.defaultLineJoin,lineWidth:void 0!==c?c:h.defaultLineWidth,miterLimit:void 0!==p?p:h.defaultMiterLimit,strokeStyle:Object(n.asColorLike)(o||h.defaultStrokeStyle)}}else this.textStrokeState_=null;var f=t.getFont(),d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),v=t.getRotation(),m=t.getScale(),_=t.getText(),b=t.getTextAlign(),S=t.getTextBaseline();this.textState_={font:void 0!==f?f:h.defaultFont,textAlign:void 0!==b?b:h.defaultTextAlign,textBaseline:void 0!==S?S:h.defaultTextBaseline},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==m?m:1)}else this.text_=""},e}(c.default);e.default=f},function(t,e,r){"use strict";r.r(e);var i=r(67),n=r(60),o=function(t){function e(e){var r=e||{},i=void 0!==r.projection?r.projection:"EPSG:3857",o=void 0!==r.tileGrid?r.tileGrid:Object(n.createXYZ)({extent:Object(n.extentFromProjection)(i),maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i.default);e.default=o},function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s});var i=r(15),n=r(103);function o(t,e,r,o,s,a,u){for(var l,c,h,p,f,d,g,y=s[a+1],v=[],m=0,_=r.length;m<_;++m){var b=r[m];for(p=t[b-o],d=t[b-o+1],l=e;l<b;l+=o)f=t[l],g=t[l+1],(y<=d&&g<=y||d<=y&&y<=g)&&(h=(y-d)/(g-d)*(f-p)+p,v.push(h)),p=f,d=g}var S=NaN,x=-1/0;for(v.sort(i.i),p=v[0],l=1,c=v.length;l<c;++l){f=v[l];var O=Math.abs(f-p);O>x&&(h=(p+f)/2,Object(n.c)(t,e,r,o,h,y)&&(S=h,x=O)),p=f}return isNaN(S)&&(S=s[a]),u?(u.push(S,y,x),u):[S,y,x]}function s(t,e,r,i,n){for(var s=[],a=0,u=r.length;a<u;++a){var l=r[a];s=o(t,e,l,i,n,2*a,s),e=l[l.length-1]}return s}},function(t,e,r){"use strict";e.a={ACTIVE:"active"}},function(t,e,r){"use strict";r.r(e),r.d(e,"sortByZIndex",function(){return d});var i=r(4),n=r(131),o=r(3),s=r(10),a=r(1),u=r(29),l=r(69),c=r(190),h=r(18),p=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){Object(i.abstract)()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Object(h.b)(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(h.d)(Object(h.i)(i,r))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o,s,u){var c,h=e.viewState,p=h.resolution;function f(t,r){var s=e.layerStates[Object(i.getUid)(r)].managed;if(!(Object(i.getUid)(t)in e.skippedFeatureUids)||s)return n.call(o,t,s?r:null)}var d=h.projection,g=t;if(d.canWrapX()){var y=d.getExtent(),v=Object(a.getWidth)(y),m=t[0];(m<y[0]||m>y[2])&&(g=[m+v*Math.ceil((y[0]-m)/v),t[1]])}var _,b=e.layerStatesArray;for(_=b.length-1;_>=0;--_){var S=b[_],x=S.layer;if(Object(l.visibleAtResolution)(S,p)&&s.call(u,x)){var O=this.getLayerRenderer(x),E=x.getSource();if(E&&(c=O.forEachFeatureAtCoordinate(E.getWrapX()?g:t,e,r,f)),c)return c}}},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o,s,a){return Object(i.abstract)()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,i,n){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,u.b,this,i,n)},e.prototype.getLayerRenderer=function(t){var e=Object(i.getUid)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var r,n=0,a=this.layerRendererConstructors_.length;n<a;++n){var u=this.layerRendererConstructors_[n];if(u.handles(t)){r=u.create(this,t);break}}if(!r)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=r,this.layerRendererListeners_[e]=Object(o.listen)(r,s.default.CHANGE,this.handleLayerRendererChange_,this),r},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(o.unlistenByKey)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var r in this.layerRenderers_)e&&r in e.layerStates||this.removeLayerRendererByKey_(r).dispose()},e.prototype.renderFrame=function(t){Object(i.abstract)()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(f)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(n.a);function f(t,e){c.shared.expire()}function d(t,e){return t.zIndex-e.zIndex}e.default=p},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r(23),n=r(11),o=1/0,s=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};s.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(n.clear)(this.queuedElements_)},s.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(r);return delete this.queuedElements_[i],r},s.prototype.enqueue=function(t){Object(i.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=o&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},s.prototype.getCount=function(){return this.elements_.length},s.prototype.getLeftChildIndex_=function(t){return 2*t+1},s.prototype.getRightChildIndex_=function(t){return 2*t+2},s.prototype.getParentIndex_=function(t){return t-1>>1},s.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},s.prototype.isEmpty=function(){return 0===this.elements_.length},s.prototype.isKeyQueued=function(t){return t in this.queuedElements_},s.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},s.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,i=e.length,n=e[t],o=r[t],s=t;t<i>>1;){var a=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<i&&r[u]<r[a]?u:a;e[t]=e[l],r[t]=r[l],t=l}e[t]=n,r[t]=o,this.siftDown_(s,t)},s.prototype.siftDown_=function(t,e){for(var r=this.elements_,i=this.priorities_,n=r[e],o=i[e];e>t;){var s=this.getParentIndex_(e);if(!(i[s]>o))break;r[e]=r[s],i[e]=i[s],e=s}r[e]=n,i[e]=o},s.prototype.reprioritize=function(){var t,e,r,i=this.priorityFunction_,n=this.elements_,s=this.priorities_,a=0,u=n.length;for(e=0;e<u;++e)(r=i(t=n[e]))==o?delete this.queuedElements_[this.keyFunction_(t)]:(s[a]=r,n[a++]=t);n.length=a,s.length=a,this.heapify_()},e.b=s},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r(4);function n(t,e,r,n){var o=document.createElement("script"),s="olc_"+Object(i.getUid)(e);function a(){delete window[s],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var u=setTimeout(function(){a(),r&&r()},1e4);window[s]=function(t){clearTimeout(u),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)}},function(t,e,r){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogService=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{};return r.baseUrl="igs/rest/mrcs",(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return(0,s.default)(e,t),e}(r(139).ServiceBase);e.CatalogService=l,a.Zondy.Catalog.CatalogService=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseParameter=void 0;var i=a(r(291)),n=a(r(8)),o=a(r(16)),s=r(124);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.layers=[],this.pageIndex=0,this.pagination=100,this.resultFormat="json",this.IncludeAttribute=!0,this.IncludeGeometry=!0,this.IncludeWebGraphic=!1,this.orderBy=void 0,this.isAsc=void 0,this.proj=void 0,this.fields=void 0,this.coordPrecision=void 0,this.cursorType="backward"}return(0,o.default)(t,null,[{key:"formatParam",value:function(t){for(var e=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"],r=0;r<e.length;r++)"string"==typeof t[e[r]]&&(t[e[r]]="true"===t[e[r]]);return t}}]),t}();u.prototype.formatParameter=function(t,e){var r=void 0,n=this;return n._crs=e,"typename"===t?(r={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"},this.where&&this.geometry&&delete r.geometry,(0,i.default)(r).forEach(function(t){n.hasOwnProperty(t)&&n[t]&&(n[t]instanceof Array?r[r[t]]=n[t].join(","):r[r[t]]="where"===t||"geometry"===t?initFilter(n[t],n.geometry,n):n[t]),delete r[t]}),r):(r={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"},(0,i.default)(r).forEach(function(t){n.hasOwnProperty(t)&&(n[r[t]]=n[t],delete n[t])}),this)},e.BaseParameter=u,s.Zondy.Service.BaseParameter=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{};return r.baseUrl="igs/rest/mrms",(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return(0,s.default)(e,t),e}(r(139).ServiceBase);e.MapServiceBase=l,a.Zondy.Service.MapServiceBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var i=a(r(123)),n=a(r(8)),o=a(r(16)),s=r(6);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}return(0,o.default)(t,[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==(void 0===t?"undefined":(0,i.default)(t))&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var s in r={},t)t.hasOwnProperty(s)&&(r[s]=this.clone(t[s]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=(0,i.default)(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var i in e)this.mergeItem(t,e,i,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,i=this._canvas,n=this._pixelCtx,o=this._width,s=this._height,a=this._offsetX,u=this._offsetY;t+a>o&&(o=t+a+100,i.width=o,r=!0),e+u>s&&(s=e+u+100,i.height=s,r=!0),t<-a&&(o+=a=100*Math.ceil(-t/100),i.width=o,r=!0),e<-u&&(s+=u=100*Math.ceil(-e/100),i.height=s,r=!0),r&&n.translate(a,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function i(){}for(var n in i.prototype=e.prototype,t.prototype=new i,r)t.prototype[n]=r[n];t.constructor=t}}]),t}();e.Util=u,s.Zondy.LevelRenderer.Tool.Util=u},function(t,e,r){"use strict";r.r(e);var i=r(31),n=r(41),o=function(t){function e(e){t.call(this,{handleEvent:s});var r=e||{};this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default);function s(t){var e=!1;if(t.type==i.default.DBLCLICK){var r=t.originalEvent,o=t.map,s=t.coordinate,a=r.shiftKey?-this.delta_:this.delta_,u=o.getView();Object(n.zoomByDelta)(u,a,s,this.duration_),t.preventDefault(),e=!0}return!e}e.default=o},function(t,e,r){"use strict";r.r(e);var i=r(86),n=r(4),o=r(29),s=r(19);function a(t){return t}var u=r(25),l=r(15),c=r(121),h=r(28),p=r(65),f=r(23),d=r(26),g=r(58),y=r(1),v=r(5),m=r(34),_=r(11),b=r(9),S=r(49);r.d(e,"createCenterConstraint",function(){return C}),r.d(e,"createResolutionConstraint",function(){return T}),r.d(e,"createRotationConstraint",function(){return P}),r.d(e,"isNoopAnimation",function(){return w});var x=0,O=function(t){function e(e){t.call(this);var r=Object(_.assign)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(b.createProjection)(r.projection,"EPSG:3857"),this.applyOptions_(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[p.a.CENTER]=void 0!==t.center?t.center:null;var r=T(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=r.minZoom;var i=C(t),n=r.constraint,o=P(t);this.constraints_={center:i,resolution:n,rotation:o},void 0!==t.resolution?e[p.a.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[p.a.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[p.a.RESOLUTION]=Object(s.a)(Number(this.getResolution()||e[p.a.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[p.a.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(_.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(_.assign)({},e,t)},e.prototype.animate=function(t){var e,r=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&E(e,!0))}for(var o=Date.now(),a=this.getCenter().slice(),u=this.getResolution(),l=this.getRotation(),c=[],p=0;p<i;++p){var f=r[p],d={start:o,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||g.inAndOut};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center,a=d.targetCenter),void 0!==f.zoom?(d.sourceResolution=u,d.targetResolution=this.constrainResolution(this.maxResolution_,f.zoom-this.minZoom_,0),u=d.targetResolution):f.resolution&&(d.sourceResolution=u,d.targetResolution=f.resolution,u=d.targetResolution),void 0!==f.rotation){d.sourceRotation=l;var y=Object(s.d)(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+y,l=d.targetRotation}d.callback=e,w(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(h.default.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[h.default.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[h.default.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(h.default.ANIMATING,-this.hints_[h.default.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var r=this.animations_[t];r[0].callback&&E(r[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var i=this.animations_[r],n=!0,o=0,a=i.length;o<a;++o){var u=i[o];if(!u.complete){var l=t-u.start,c=u.duration>0?l/u.duration:1;c>=1?(u.complete=!0,c=1):n=!1;var f=u.easing(c);if(u.sourceCenter){var d=u.sourceCenter[0],g=u.sourceCenter[1],y=d+f*(u.targetCenter[0]-d),v=g+f*(u.targetCenter[1]-g);this.set(p.a.CENTER,[y,v])}if(u.sourceResolution&&u.targetResolution){var m=1===f?u.targetResolution:u.sourceResolution+f*(u.targetResolution-u.sourceResolution);u.anchor&&this.set(p.a.CENTER,this.calculateCenterZoom(m,u.anchor)),this.set(p.a.RESOLUTION,m)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var _=1===f?Object(s.d)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+f*(u.targetRotation-u.sourceRotation);u.anchor&&this.set(p.a.CENTER,this.calculateCenterRotate(_,u.anchor)),this.set(p.a.ROTATION,_)}if(e=!0,!u.complete)break}}if(n){this.animations_[r]=null,this.setHint(h.default.ANIMATING,-1);var b=i[0].callback;b&&E(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var r,i=this.getCenter();return void 0!==i&&(r=[i[0]-e[0],i[1]-e[1]],Object(d.rotate)(r,t-this.getRotation()),Object(d.add)(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,i=this.getCenter(),n=this.getResolution();return void 0!==i&&void 0!==n&&(r=[e[0]-t*(e[0]-i[0])/n,e[1]-t*(e[1]-i[1])/n]),r},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(n.getUid)(this)+'"]',r=document.querySelector(e);if(r){var i=getComputedStyle(r);t[0]=parseInt(i.width,10),t[1]=parseInt(i.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,r){var i=e||0,n=r||0;return this.constraints_.resolution(t,i,n)},e.prototype.constrainRotation=function(t,e){var r=e||0;return this.constraints_.rotation(t,r)},e.prototype.getCenter=function(){return this.get(p.a.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),r=this.getCenter();Object(f.a)(r,1);var i=this.getResolution();Object(f.a)(void 0!==i,2);var n=this.getRotation();return Object(f.a)(void 0!==n,3),Object(y.getForViewAndSize)(r,i,n,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(p.a.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var r=e||this.getSizeFromViewport_(),i=Object(y.getWidth)(t)/r[0],n=Object(y.getHeight)(t)/r[1];return Math.max(i,n)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.maxResolution_,i=this.minResolution_,n=Math.log(r/i)/Math.log(e);return function(t){return r/Math.pow(e,t*n)}},e.prototype.getRotation=function(){return this.get(p.a.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,r=this.maxResolution_,i=this.minResolution_,n=Math.log(r/i)/Math.log(e);return function(t){return Math.log(r/t)/Math.log(e)/n}},e.prototype.getState=function(t){var e=this.getCenter(),r=this.getProjection(),i=this.getResolution(),n=i/t,o=this.getRotation();return{center:[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n],projection:void 0!==r?r:null,resolution:i,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,i=this.minZoom_||0;if(this.resolutions_){var n=Object(l.h)(this.resolutions_,t,1);i=n,e=this.resolutions_[n],r=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,r=this.zoomFactor_;return i+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var r,i=e||{},n=i.size;n||(n=this.getSizeFromViewport_()),Object(f.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Object(f.a)(!Object(y.isEmpty)(t),25),r=Object(m.fromExtent)(t)):t.getType()===v.default.CIRCLE?(t=t.getExtent(),(r=Object(m.fromExtent)(t)).rotate(this.getRotation(),Object(y.getCenter)(t))):r=t;var s,a=void 0!==i.padding?i.padding:[0,0,0,0],u=void 0===i.constrainResolution||i.constrainResolution,l=void 0!==i.nearest&&i.nearest;s=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;for(var c=r.getFlatCoordinates(),h=this.getRotation(),p=Math.cos(-h),d=Math.sin(-h),g=1/0,_=1/0,b=-1/0,S=-1/0,x=r.getStride(),O=0,C=c.length;O<C;O+=x){var T=c[O]*p-c[O+1]*d,P=c[O]*d+c[O+1]*p;g=Math.min(g,T),_=Math.min(_,P),b=Math.max(b,T),S=Math.max(S,P)}var w=this.getResolutionForExtent([g,_,b,S],[n[0]-a[1]-a[3],n[1]-a[0]-a[2]]);if(w=isNaN(w)?s:Math.max(w,s),u){var I=this.constrainResolution(w,0,0);!l&&I<w&&(I=this.constrainResolution(I,-1,0)),w=I}d=-d;var L=(g+b)/2,R=(_+S)/2,M=[(L+=(a[1]-a[3])/2*w)*p-(R+=(a[0]-a[2])/2*w)*d,R*p+L*d],A=i.callback?i.callback:o.c;void 0!==i.duration?this.animate({resolution:w,center:M,duration:i.duration,easing:i.easing},A):(this.setResolution(w),this.setCenter(M),E(A,!0))},e.prototype.centerOn=function(t,e,r){var i=this.getRotation(),n=Math.cos(-i),o=Math.sin(-i),s=t[0]*n-t[1]*o,a=t[1]*n+t[0]*o,u=this.getResolution(),l=(s+=(e[0]/2-r[0])*u)*n-(a+=(r[1]-e[1]/2)*u)*(o=-o),c=a*n+s*o;this.setCenter([l,c])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var r=this.calculateCenterRotate(t,e);this.setCenter(r)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(p.a.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(p.a.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(p.a.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(u.default);function E(t,e){setTimeout(function(){t(e)},0)}function C(t){return void 0!==t.extent?function(t){return function(e){return e?[Object(s.a)(e[0],t[0],t[2]),Object(s.a)(e[1],t[1],t[3])]:void 0}}(t.extent):a}function T(t){var e,r,n,o=void 0!==t.minZoom?t.minZoom:x,a=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var c=t.resolutions;r=c[o],n=void 0!==c[a]?c[a]:c[c.length-1],e=function(t){return function(e,r,i){if(void 0!==e){var n=Object(l.h)(t,e,i);n=Object(s.a)(n+r,0,t.length-1);var o=Math.floor(n);if(n!=o&&o<t.length-1){var a=t[o]/t[o+1];return t[o]/Math.pow(a,n-o)}return t[o]}}}(c)}else{var h=Object(b.createProjection)(t.projection,"EPSG:3857"),p=h.getExtent(),f=(p?Math.max(Object(y.getWidth)(p),Object(y.getHeight)(p)):360*b.METERS_PER_UNIT[S.default.DEGREES]/h.getMetersPerUnit())/i.b/Math.pow(2,x),d=f/Math.pow(2,28-x);void 0!==(r=t.maxResolution)?o=0:r=f/Math.pow(u,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(u,a):f/Math.pow(u,a):d),a=o+Math.floor(Math.log(r/n)/Math.log(u)),n=r/Math.pow(u,a-o),e=function(t,e,r){return function(i,n,o){if(void 0!==i){var s=-o/2+.5,a=Math.floor(Math.log(e/i)/Math.log(t)+s),u=Math.max(a+n,0);return void 0!==r&&(u=Math.min(u,r)),e/Math.pow(t,u)}}}(u,r,a-o)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:o,zoomFactor:u}}function P(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(c.b)():!1===e?c.d:"number"==typeof e?Object(c.a)(e):c.d}return c.c}function w(t){return!(t.sourceCenter&&t.targetCenter&&!Object(d.equals)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}e.default=O},function(t,e,r){"use strict";var i=r(4),n=function(t){function e(e){var r="Assertion failed. See https://openlayers.org/en/"+("latest"===i.VERSION?i.VERSION:"v"+i.VERSION.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,r),this.code=e,this.name="AssertionError",this.message=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=n},function(t,e,r){"use strict";var i=r(17),n=r(3),o=r(10),s=function(t){function e(e,r){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);if(r){var i=e[0];Object(n.listen)(i,o.default.CHANGE,this.handleTileChange,this)}return r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(r===i.default.LOADED||r===i.default.ERROR||r===i.default.EMPTY||r===i.default.ABORT){Object(n.unlisten)(e,o.default.CHANGE,this.handleTileChange,this);var s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,o,s=0,a=!1;this.tilesLoading_<t&&s<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),(r=n.getState())===i.default.ABORT?a=!0:r!==i.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++s,n.load());0===s&&a&&this.tileChangeCallback_()},e}(r(175).b);e.a=s},function(t,e,r){"use strict";var i=r(168),n=r(46),o=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),r=e.tileCoord[0].toString();if(r in t&&t[r].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(n.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(n.getKey)(t.tileCoord)),t.dispose())},this)}},e}(i.default);e.a=o},function(t,e,r){"use strict";r.r(e),r.d(e,"DEFAULT_RADIUS",function(){return o}),r.d(e,"getDistance",function(){return s}),r.d(e,"getLength",function(){return u}),r.d(e,"getArea",function(){return c}),r.d(e,"offset",function(){return h});var i=r(19),n=r(5),o=6371008.8;function s(t,e,r){var n=r||o,s=Object(i.j)(t[1]),a=Object(i.j)(e[1]),u=(a-s)/2,l=Object(i.j)(e[0]-t[0])/2,c=Math.sin(u)*Math.sin(u)+Math.sin(l)*Math.sin(l)*Math.cos(s)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function a(t,e){for(var r=0,i=0,n=t.length;i<n-1;++i)r+=s(t[i],t[i+1],e);return r}function u(t,e){var r=e||{},i=r.radius||o,s=r.projection||"EPSG:3857",l=t.getType();l!==n.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(s,"EPSG:4326"));var c,h,p,f,d,g,y=0;switch(l){case n.default.POINT:case n.default.MULTI_POINT:break;case n.default.LINE_STRING:case n.default.LINEAR_RING:y=a(c=t.getCoordinates(),i);break;case n.default.MULTI_LINE_STRING:case n.default.POLYGON:for(p=0,f=(c=t.getCoordinates()).length;p<f;++p)y+=a(c[p],i);break;case n.default.MULTI_POLYGON:for(p=0,f=(c=t.getCoordinates()).length;p<f;++p)for(d=0,g=(h=c[p]).length;d<g;++d)y+=a(h[d],i);break;case n.default.GEOMETRY_COLLECTION:var v=t.getGeometries();for(p=0,f=v.length;p<f;++p)y+=u(v[p],e);break;default:throw new Error("Unsupported geometry type: "+l)}return y}function l(t,e){for(var r=0,n=t.length,o=t[n-1][0],s=t[n-1][1],a=0;a<n;a++){var u=t[a][0],l=t[a][1];r+=Object(i.j)(u-o)*(2+Math.sin(Object(i.j)(s))+Math.sin(Object(i.j)(l))),o=u,s=l}return r*e*e/2}function c(t,e){var r=e||{},i=r.radius||o,s=r.projection||"EPSG:3857",a=t.getType();a!==n.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(s,"EPSG:4326"));var u,h,p,f,d,g,y=0;switch(a){case n.default.POINT:case n.default.MULTI_POINT:case n.default.LINE_STRING:case n.default.MULTI_LINE_STRING:case n.default.LINEAR_RING:break;case n.default.POLYGON:for(u=t.getCoordinates(),y=Math.abs(l(u[0],i)),p=1,f=u.length;p<f;++p)y-=Math.abs(l(u[p],i));break;case n.default.MULTI_POLYGON:for(p=0,f=(u=t.getCoordinates()).length;p<f;++p)for(h=u[p],y+=Math.abs(l(h[0],i)),d=1,g=h.length;d<g;++d)y-=Math.abs(l(h[d],i));break;case n.default.GEOMETRY_COLLECTION:var v=t.getGeometries();for(p=0,f=v.length;p<f;++p)y+=c(v[p],e);break;default:throw new Error("Unsupported geometry type: "+a)}return y}function h(t,e,r,n){var s=n||o,a=Object(i.j)(t[1]),u=Object(i.j)(t[0]),l=e/s,c=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(r)),h=u+Math.atan2(Math.sin(r)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(c));return[Object(i.i)(h),Object(i.i)(c)]}},function(t,e,r){"use strict";t.exports=n,t.exports.default=n;var i=r(468);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,i,n){n||(n=v(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],u(n,t.leaf?i(o):o);return n}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var r=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-r)*Math.max(0,o-i)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,r,n,o){for(var s,a=[e,r];a.length;)(r=a.pop())-(e=a.pop())<=n||(s=e+Math.ceil((r-e)/n/2)*n,i(t,s,e,r,o),a.push(e,s,s,r))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!y(t,e))return r;for(var n,o,s,a,u=[];e;){for(n=0,o=e.children.length;n<o;n++)s=e.children[n],y(t,a=e.leaf?i(s):s)&&(e.leaf?r.push(s):g(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!y(t,e))return!1;for(var i,n,o,s,a=[];e;){for(i=0,n=e.children.length;i<n;i++)if(o=e.children[i],y(t,s=e.leaf?r(o):o)){if(e.leaf||g(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var r,i,n,s,a=this.data,u=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],r=c.pop(),s=!0),a.leaf&&-1!==(n=o(t,a.children,e)))return a.children.splice(n,1),l.push(a),this._condense(l),this;s||a.leaf||!g(a,u)?i?(r++,a=i.children[r],s=!1):a=null:(l.push(a),c.push(r),r=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var n,o=r-e+1,a=this._maxEntries;if(o<=a)return s(n=v(t.slice(e,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(n=v([])).leaf=!1,n.height=i;var u,l,c,h,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(m(t,e,r,f,this.compareMinX),u=e;u<=r;u+=f)for(m(t,u,c=Math.min(u+f-1,r),p,this.compareMinY),l=u;l<=c;l+=p)h=Math.min(l+p-1,c),n.children.push(this._build(t,l,h,i-1));return s(n,this.toBBox),n},_chooseSubtree:function(t,e,r,i){for(var n,o,s,a,u,l,c,p;i.push(e),!e.leaf&&i.length-1!==r;){for(c=p=1/0,n=0,o=e.children.length;n<o;n++)u=h(s=e.children[n]),(l=f(t,s)-u)<p?(p=l,c=u<c?u:c,a=s):l===p&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,n=r?t:i(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),u(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var r=t[e],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var o=this._chooseSplitIndex(r,n,i),a=v(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,s(r,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,n,o,s,u,l,c,p;for(l=c=1/0,i=e;i<=r-e;i++)s=d(n=a(t,0,i,this.toBBox),o=a(t,i,r,this.toBBox)),u=h(n)+h(o),s<l?(l=s,p=i,c=u<c?u:c):s===l&&u<c&&(c=u,p=i);return p},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,i)<this._allDistMargin(t,e,r,n)&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var n,o,s=this.toBBox,l=a(t,0,e,s),c=a(t,r-e,r,s),h=p(l)+p(c);for(n=e;n<r-e;n++)o=t.children[n],u(l,t.leaf?s(o):o),h+=p(l);for(n=r-e-1;n>=e;n--)o=t.children[n],u(c,t.leaf?s(o):o),h+=p(c);return h},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)u(e[i],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():s(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,r){"use strict";r.r(e),r.d(e,"shared",function(){return s});var i=r(57),n=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function o(t,e,r){return e+":"+t+":"+(r?Object(i.asString)(r):"null")}n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},n.prototype.get=function(t,e,r){var i=o(t,e,r);return i in this.cache_?this.cache_[i]:null},n.prototype.set=function(t,e,r,i){var n=o(t,e,r);this.cache_[n]=i,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e.default=n;var s=new n},function(t,e,r){"use strict";r.r(e);var i=r(71),n=r(152),o=r(50),s=r(28),a=r(15),u=r(1),l=r(265),c=r(11),h=r(233),p=r(268),f=r(18),d=function(t){function e(r){if(t.call(this,r),this.image_=null,this.imageTransform_=Object(f.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,r.getType()===o.a.VECTOR)for(var i=0,n=h.b.length;i<n;++i){var s=h.b[i];if(s!==e&&s.handles(r)){this.vectorRenderer_=new s(r);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var r,o=t.pixelRatio,l=t.size,h=t.viewState,p=h.center,d=h.resolution,g=this.getLayer().getSource(),y=t.viewHints,v=this.vectorRenderer_,m=t.extent;if(v||void 0===e.extent||(m=Object(u.getIntersection)(m,e.extent)),!y[s.default.ANIMATING]&&!y[s.default.INTERACTING]&&!Object(u.isEmpty)(m)){var _=h.projection;if(!i.a){var b=g.getProjection();b&&(_=b)}var S=this.skippedFeatures_;if(v){var x=v.context,O=Object(c.assign)({},t,{size:[Object(u.getWidth)(m)/d,Object(u.getHeight)(m)/d],viewState:Object(c.assign)({},t.viewState,{rotation:0})}),E=Object.keys(O.skippedFeatureUids).sort();r=new n.a(m,d,o,x.canvas,function(t){!v.prepareFrame(O,e)||!v.replayGroupChanged&&Object(a.b)(S,E)||(x.canvas.width=O.size[0]*o,x.canvas.height=O.size[1]*o,v.compose(x,O,e),S=E,t())})}else r=g.getImage(m,d,o,_);r&&this.loadImage(r)&&(this.image_=r,this.skippedFeatures_=S)}if(this.image_){var C=(r=this.image_).getExtent(),T=r.getResolution(),P=r.getPixelRatio(),w=o*T/(d*P),I=Object(f.b)(this.imageTransform_,o*l[0]/2,o*l[1]/2,w,w,0,P*(C[0]-p[0])/T,P*(p[1]-C[3])/T);Object(f.b)(this.coordinateToCanvasPixelTransform,o*l[0]/2-I[4],o*l[1]/2-I[5],o/d,-o/d,0,-p[0],-p[1]),this.renderedResolution=T*o/P}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,r,i,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,i,n):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,i,n)},e}(p.a);d.handles=function(t){return t.getType()===o.a.IMAGE||t.getType()===o.a.VECTOR&&t.getRenderMode()===l.a.IMAGE},d.create=function(t,e){return new d(e)},e.default=d},function(t,e,r){"use strict";var i=r(4),n=r(33),o=r(104),s=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return o.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(a(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(a(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(i.abstract)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(i.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(a(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(i.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(a(t))},e.prototype.readProjectionFromObject=function(t){return Object(i.abstract)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(i.abstract)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(i.abstract)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(i.abstract)()},e}(n.default);function a(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}e.a=s},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(33),o=r(44),s=r(2),a=r(11),u=r(9),l=r(0),c=o.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",h={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},p=function(t){function e(e){var r=e||{};t.call(this,r),this.FEATURE_COLLECTION_PARSERS[o.GMLNS].featureMember=Object(l.makeArrayPusher)(this.readFeaturesInternal),this.schemaLocation=r.schemaLocation?r.schemaLocation:c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFlatCoordinates_=function(t,e){var r=Object(l.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName,n="enu";if(i){var o=Object(u.get)(i);o&&(n=o.getAxisOrientation())}for(var s=r.trim().split(/\s+/),a=[],c=0,h=s.length;c<h;c++){var p=s[c].split(/,+/),f=parseFloat(p[0]),d=parseFloat(p[1]),g=3===p.length?parseFloat(p[2]):0;"en"===n.substr(0,2)?a.push(f,d,g):a.push(d,f,g)}return a},e.prototype.readBox_=function(t,e){var r=Object(l.pushParseAndPop)([null],this.BOX_PARSERS_,t,e,this);return Object(i.createOrUpdate)(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=Object(l.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=Object(l.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var i,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.multiCurve;return Array.isArray(t)?i="Envelope":"MultiPolygon"===(i=t.getType())&&!0===o?i="MultiSurface":"Polygon"===i&&!0===s?i="Surface":"MultiLineString"===i&&!0===a&&(i="MultiCurve"),Object(l.createElementNS)("http://www.opengis.net/gml",i)},e.prototype.writeFeatureElement=function(t,e,r){var i=e.getId();i&&t.setAttribute("fid",i);var n=r[r.length-1],o=n.featureNS,u=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var c=e.getProperties(),h=[],p=[];for(var f in c){var d=c[f];null!==d&&(h.push(f),p.push(d),f==u||"function"==typeof d.getSimplifiedGeometry?f in n.serializers[o]||(n.serializers[o][f]=Object(l.makeChildAppender)(this.writeGeometryElement,this)):f in n.serializers[o]||(n.serializers[o][f]=Object(l.makeChildAppender)(s.n)))}var g=Object(a.assign)({},n);g.node=t,Object(l.pushSerializeAndPop)(g,n.serializers,Object(l.makeSimpleNodeFactory)(void 0,o),p,r,h)},e.prototype.writeCurveOrLineString_=function(t,e,r){var i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,r)}else if("Curve"===t.nodeName){var o=Object(l.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var i=this.GEOMETRY_NODE_FACTORY_(e,r);i&&(t.appendChild(i),this.writeCurveOrLineString_(i,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName,s=i.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();Object(l.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var i,o=r[r.length-1],s=Object(a.assign)({},o);s.node=t,i=Array.isArray(e)?o.dataProjection?Object(u.transformExtent)(e,o.featureProjection,o.dataProjection):e:Object(n.transformWithOptions)(e,!0,o),Object(l.pushSerializeAndPop)(s,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[i],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Object(l.createElementNS)(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var i=r[r.length-1],n=i.hasZ,o=i.srsName,a=e.getCoordinates(),u=a.length,l=new Array(u),c=0;c<u;++c){var h=a[c];l[c]=this.getCoords_(h,o,n)}Object(s.n)(t,l.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var i=Object(l.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString_(i,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();Object(l.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,r,void 0,this)}else if("Surface"===t.nodeName){var a=Object(l.createElementNS)(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var i=e[e.length-1],n=i.node,o=i.exteriorWritten;return void 0===o&&(i.exteriorWritten=!0),Object(l.createElementNS)(n.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var i=Object(l.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon_(i,e,r)},e.prototype.writeRing_=function(t,e,r){var i=Object(l.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing_(i,e,r)},e.prototype.getCoords_=function(t,e,r){var i="enu";e&&(i=Object(u.get)(e).getAxisOrientation());var n="en"===i.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return r&&(n+=","+(t[2]||0)),n},e.prototype.writePoint_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var u=e.getCoordinates(),l=this.getCoords_(u,o,n);Object(s.n)(a,l)},e.prototype.writeMultiPoint_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);var s=e.getPoints();Object(l.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.POINTMEMBER_SERIALIZERS_,Object(l.makeSimpleNodeFactory)("pointMember"),s,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var i=Object(l.createElementNS)(t.namespaceURI,"Point");t.appendChild(i),this.writePoint_(i,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var i=r[r.length-1],n=i.hasZ,o=i.srsName,s=i.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();Object(l.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var i=this.GEOMETRY_NODE_FACTORY_(e,r);i&&(t.appendChild(i),this.writeSurfaceOrPolygon_(i,e,r))},e.prototype.writeEnvelope=function(t,e,r){var i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(l.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,l.OBJECT_PROPERTY_NODE_FACTORY,n,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var i=e[e.length-1].node;return Object(l.createElementNS)("http://www.opengis.net/gml",h[i.nodeName])},e}(o.default);p.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Object(l.makeReplacer)(p.prototype.readFlatCoordinates_)}},p.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:p.prototype.innerBoundaryIsParser_,outerBoundaryIs:p.prototype.outerBoundaryIsParser_}},p.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(l.makeArrayPusher)(p.prototype.readFlatCoordinates_)}},p.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(l.makeReplacer)(o.default.prototype.readPoint),MultiPoint:Object(l.makeReplacer)(o.default.prototype.readMultiPoint),LineString:Object(l.makeReplacer)(o.default.prototype.readLineString),MultiLineString:Object(l.makeReplacer)(o.default.prototype.readMultiLineString),LinearRing:Object(l.makeReplacer)(o.default.prototype.readLinearRing),Polygon:Object(l.makeReplacer)(o.default.prototype.readPolygon),MultiPolygon:Object(l.makeReplacer)(o.default.prototype.readMultiPolygon),Box:Object(l.makeReplacer)(p.prototype.readBox_)}},p.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(l.makeChildAppender)(p.prototype.writeCurveOrLineString_),MultiCurve:Object(l.makeChildAppender)(p.prototype.writeMultiCurveOrLineString_),Point:Object(l.makeChildAppender)(p.prototype.writePoint_),MultiPoint:Object(l.makeChildAppender)(p.prototype.writeMultiPoint_),LineString:Object(l.makeChildAppender)(p.prototype.writeCurveOrLineString_),MultiLineString:Object(l.makeChildAppender)(p.prototype.writeMultiCurveOrLineString_),LinearRing:Object(l.makeChildAppender)(p.prototype.writeLinearRing_),Polygon:Object(l.makeChildAppender)(p.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(l.makeChildAppender)(p.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(l.makeChildAppender)(p.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(l.makeChildAppender)(p.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(l.makeChildAppender)(p.prototype.writeEnvelope)}},p.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(l.makeChildAppender)(p.prototype.writeLineStringOrCurveMember_),curveMember:Object(l.makeChildAppender)(p.prototype.writeLineStringOrCurveMember_)}},p.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(l.makeChildAppender)(p.prototype.writeRing_),innerBoundaryIs:Object(l.makeChildAppender)(p.prototype.writeRing_)}},p.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(l.makeChildAppender)(p.prototype.writePointMember_)}},p.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(l.makeChildAppender)(p.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(l.makeChildAppender)(p.prototype.writeSurfaceOrPolygonMember_)}},p.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(l.makeChildAppender)(s.n),upperCorner:Object(l.makeChildAppender)(s.n)}},e.default=p},function(t,e,r){"use strict";var i=r(4),n=r(33),o=r(104),s=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return o.a.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(a(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return Object(i.abstract)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(a(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return Object(i.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(a(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return Object(i.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(a(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return Object(i.abstract)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return Object(i.abstract)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return Object(i.abstract)()},e}(n.default);function a(t){return"string"==typeof t?t:""}e.a=s},function(t,e,r){"use strict";var i=function(t){function e(e,r,i,n){t.call(this,e),this.geometryName=r||"the_geom",this.geometry=i,this.srsName=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(132).a);e.a=i},function(t,e,r){"use strict";var i=r(0),n=function(){};n.prototype.read=function(t){if(t){if("string"==typeof t){var e=Object(i.parse)(t);return this.readFromDocument(e)}return Object(i.isDocument)(t)?this.readFromDocument(t):this.readFromNode(t)}return null},n.prototype.readFromDocument=function(t){},n.prototype.readFromNode=function(t){},e.a=n},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(27),o=r(23),s=r(57),a=r(3),u=r(10),l=r(81),c=r(24),h=r(102),p=r(190),f=function(t){function e(e,r,i,n,o,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=i,this.src_=r,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===n.a.LOADED){this.tainted_=!1;var t=Object(c.createCanvasContext2D)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(u.default.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=n.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=n.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],i=Object(c.createCanvasContext2D)(e,r);i.fillRect(0,0,e,r),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==n.a.IDLE){this.imageState_=n.a.LOADING,this.imageListenerKeys_=[Object(a.listenOnce)(this.image_,u.default.ERROR,this.handleImageError_,this),Object(a.listenOnce)(this.image_,u.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),r=e.data,i=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,s=0,a=r.length;s<a;s+=4)r[s]*=i,r[s+1]*=n,r[s+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null},e}(h.a),d=r(66),g=function(t){function e(e){var r=e||{},a=void 0!==r.opacity?r.opacity:1,u=void 0!==r.rotation?r.rotation:0,c=void 0!==r.scale?r.scale:1,h=void 0!==r.rotateWithView&&r.rotateWithView;t.call(this,{opacity:a,rotation:u,scale:c,rotateWithView:h}),this.anchor_=void 0!==r.anchor?r.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:d.a.TOP_LEFT,this.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:l.a.FRACTION,this.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:l.a.FRACTION,this.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var g=void 0!==r.img?r.img:null,y=void 0!==r.imgSize?r.imgSize:null,v=r.src;Object(o.a)(!(void 0!==v&&g),4),Object(o.a)(!g||g&&y,5),void 0!==v&&0!==v.length||!g||(v=g.src||Object(i.getUid)(g)),Object(o.a)(void 0!==v&&v.length>0,6);var m=void 0!==r.src?n.a.IDLE:n.a.LOADED;this.color_=void 0!==r.color?Object(s.asArray)(r.color):null,this.iconImage_=function(t,e,r,i,n,o){var s=p.shared.get(e,i,o);return s||(s=new f(t,e,r,i,n,o),p.shared.set(e,i,o,s)),s}(g,v,y,this.crossOrigin_,m,this.color_),this.offset_=void 0!==r.offset?r.offset:[0,0],this.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:d.a.TOP_LEFT,this.origin_=null,this.size_=void 0!==r.size?r.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==l.a.FRACTION||this.anchorYUnits_==l.a.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==l.a.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==l.a.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=d.a.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=d.a.TOP_RIGHT&&this.anchorOrigin_!=d.a.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=d.a.BOTTOM_LEFT&&this.anchorOrigin_!=d.a.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=d.a.TOP_LEFT){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),this.offsetOrigin_!=d.a.TOP_RIGHT&&this.offsetOrigin_!=d.a.BOTTOM_RIGHT||(t[0]=r[0]-e[0]-t[0]),this.offsetOrigin_!=d.a.BOTTOM_LEFT&&this.offsetOrigin_!=d.a.BOTTOM_RIGHT||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(a.listen)(this.iconImage_,u.default.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(a.unlisten)(this.iconImage_,u.default.CHANGE,t,e)},e}(r(229).default);e.default=g},function(t,e,r){var i=r(292);t.exports=function(t){return Object(i(t))}},function(t,e,r){var i=r(363),n=r(296);t.exports=Object.keys||function(t){return i(t,n)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e,r){var i=r(113),n=r(54),o=r(178);t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],s={};s[t]=e(r),i(i.S+i.F*o(function(){r(1)}),"Object",s)}},function(t,e,r){var i=r(238);t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports={}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(16)),s=u(r(13)),a=u(r(14));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,o,a,u){(0,n.default)(this,e);var l=u||{},c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,l));return c.xmin=t,c.xmax=o,c.ymin=r,c.ymax=a,c}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){void 0!==t&&null!==t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null===(e=e||{}).inclusive&&(e.inclusive=!0);var r=!1,i=this.xmin===t.xmax||this.xmax===t.xmin||this.ymax===t.ymin||this.ymin===t.ymax;if(e.inclusive||!i){var n=t.ymin>=this.ymin&&t.ymin<=this.ymax||this.ymin>=t.ymin&&this.ymin<=t.ymax,o=t.ymax>=this.ymin&&t.ymax<=this.ymax||this.ymax>t.ymin&&this.ymax<t.ymax,s=t.xmin>=this.xmin&&t.xmin<=this.xmax||this.xmin>=t.xmin&&this.xmin<=t.xmax,a=t.xmax>=this.xmin&&t.xmax<=this.xmax||this.xmax>=t.xmin&&this.xmax<=t.xmax;r=(n||o)&&(s||a)}return r}}]),e}(r(164).Tangram);e.Rectangle=l,Zondy.Object.Rectangle=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=void 0;var i=g(r(53)),n=g(r(12)),o=g(r(8)),s=g(r(16)),a=g(r(13)),u=g(r(14)),l=r(6),c=r(22),h=r(139),p=r(247),f=r(248),d=r(55);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var r=t||{};r.baseUrl="igs/rest/mrfs";var i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.resultCallBack=void 0!==r.resultCallBack?r.resultCallBack:null,i.queryParam=void 0!==r.queryParam?r.queryParam:null,i.requestType=void 0!==r.requestType?r.requestType:"GET",i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"processResult",value:function(t){var e=new p.FeatureSet;(0,c.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};(0,c.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,r,n,o,s){this.resultCallBack=r;var a=new d.IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:"geojson"!==s?this.processResult:this.processGeoJsonResult,processFailed:o}});"GET"===n?a.processAsync():a.processAsync({method:"POST",data:(0,i.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,r){if(null!==this.queryParam){var i="";if(this.queryParam instanceof f.QueryParameter){i=this.getFullUrl();var n,o=null;"GET"===(n=r||(this.requestType?this.requestType:"GET")).toUpperCase()?i+=encodeURI("?"+this.queryParam.getParameterURL()):o=this.queryParam.getParameterObject(),this.restQuery(i,o,t,n,e,this.queryParam.resultFormat.toLowerCase())}}}}]),e}(h.ServiceBase);e.QueryServiceBase=y,l.Zondy.Service.QueryServiceBase=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Eventful=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this._handlers={},this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}return(0,n.default)(t,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var i=this._handlers;return e&&t?(i[t]||(i[t]=[]),i[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var i=this._handlers;return e&&t?(i[t]||(i[t]=[]),i[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var i=[],n=0,o=r[t].length;n<o;n++)r[t][n].h!==e&&i.push(r[t][n]);r[t]=i}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var i=this._handlers[t],n=i.length,o=0;o<n;){switch(r){case 1:i[o].h.call(i[o].ctx);break;case 2:i[o].h.call(i[o].ctx,e[1]);break;case 3:i[o].h.call(i[o].ctx,e[1],e[2]);break;default:i[o].h.apply(i[o].ctx,e)}i[o].one?(i.splice(o,1),n--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var i=e[e.length-1],n=this._handlers[t],o=n.length,s=0;s<o;){switch(r){case 1:n[s].h.call(i);break;case 2:n[s].h.call(i,e[1]);break;case 3:n[s].h.call(i,e[1],e[2]);break;default:n[s].h.apply(i,e)}n[s].one?(n.splice(s,1),o--):s++}}return this}}]),t}();e.Eventful=a,o.Zondy.LevelRenderer.Eventful=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeVector=void 0;var i=g(r(12)),n=g(r(8)),o=g(r(16)),s=g(r(13)),a=g(r(40)),u=g(r(14)),l=r(6),c=r(22),h=r(209),p=r(338),f=r(337),d=r(258);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,r,o,a,u){(0,n.default)(this,e);var l=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));if(!t.fGeom)return(0,s.default)(l);switch(l.dataBounds=t.bound,l.nodesClipPixel=2,l.isHoverAble=!0,l.isMultiHover=!0,l.isClickAble=!0,l.highlightStyle=null,l.shapeOptions={},l.style=o||{},l.CLASS_NAME="Zondy.Theme.ThemeVector",l.style=o||{},a&&(0,c.copyAttributesWithClip)(l,a,["shapeOptions","dataBounds"]),u&&(0,c.copyAttributesWithClip)(l.shapeOptions,u),t.fGeom,l.lonlat=[(l.dataBounds.xmin+l.dataBounds.xmax)/2,(l.dataBounds.ymin+l.dataBounds.ymax)/2],l.location=l.getLocalXY(l.lonlat),t.ftype){case 0:break;case 1:l.pointsToTF(t.fGeom.PntGeom);break;case 2:l.linesToTF(t.fGeom.LinGeom);break;case 3:l.regsToTF(t.fGeom.RegGeom)}return l}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function(t){if(!(null==t||t.length<=0)){t.components;for(var e=[],r=[],i=this.location,n=[],o=this.nodesClipPixel,s=0;s<t.length;s++){var a=t[s];if(r=[],e=this.getLocalXY([a.Dot.x,a.Dot.y]),r[0]=e[0]-i[0],r[1]=e[1]-i[1],n.length>0){var u=n[n.length-1];if(Math.abs(u[0]-r[0])<=o&&Math.abs(u[1]-r[1])<=o)continue}n.push(r);var l=new Object;l.r=6,(l=(0,c.copyAttributesWithClip)(l,this.style)).x=r[0],l.y=r[1];var h=new f.SmicPoint({style:l,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=i,h.refDataID=this.data.FID,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(h,this.shapeOptions),this.shapes.push(h)}}}},{key:"linesToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.lineToTF(t[e])}},{key:"lineToTF",value:function(t){var e=[];if(null!=t.Line&&null!=t.Line.Arcs&&t.Line.Arcs.length>0)for(var r=t.Line.Arcs,i=0;i<r.length;i++)for(var n=r[i].Dots,o=0;o<n.length;o++)e.push([n[o].x,n[o].y]);if(!(e.length<=0)){var s=[],a=[],u=this.location,l=[],h=this.nodesClipPixel;for(i=0;i<e.length;i++){var f=e[i];if(a=[],s=this.getLocalXY(f),a[0]=s[0]-u[0],a[1]=s[1]-u[1],l.length>0){var d=l[l.length-1];if(Math.abs(d[0]-a[0])<=h&&Math.abs(d[1]-a[1])<=h)continue}l.push(a)}if(l.length<2)return null;var g=new Object;(g=(0,c.copyAttributesWithClip)(g,this.style,["pointList"])).pointList=l;var y=new p.SmicBrokenLine({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(y.highlightStyle=this.highlightStyle),y.refOriginalPosition=this.location,y.refDataID=this.data.FID,y.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(y,this.shapeOptions),this.shapes.push(y)}}},{key:"regsToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.regToTF(t[e])}},{key:"regToTF",value:function(t){var e=t.Rings;if(!(null==e||e.length<=0)){for(var r=[],i=[],n=this.location,o=[],s=[],a=[],u=this.nodesClipPixel,l=0;l<e.length;l++){if(0===l){if(o=[],null!=e[l]&&null!=e[l].Arcs&&e[l].Arcs.length>0)for(var h=e[l].Arcs,p=0;p<h.length;p++)for(var f=h[p].Dots,g=0;g<f.length;g++){if(i=[],r=this.getLocalXY([f[g].x,f[g].y]),i[0]=r[0]-n[0],i[1]=r[1]-n[1],o.length>0){var y=o[o.length-1];if(Math.abs(y[0]-i[0])<=u&&Math.abs(y[1]-i[1])<=u)continue}o.push(i)}}else if(s=[],null!=e[l]&&null!=e[l].Arcs&&e[l].Arcs.length>0)for(h=e[l].Arcs,p=0;p<h.length;p++)for(f=h[p].Dots,g=0;g<f.length;g++){if(i=[],r=this.getLocalXY([f[g].x,f[g].y]),i[0]=r[0]-n[0],i[1]=r[1]-n[1],s.length>0){var v=s[s.length-1];if(Math.abs(v[0]-i[0])<=u&&Math.abs(v[1]-i[1])<=u)continue}s.push(i)}s.length<2||a.push(s)}if(!(o.length<2)){var m={};(m=(0,c.copyAttributesWithClip)(m,this.style,["pointList"])).pointList=o;var _=new d.SmicPolygon({style:m,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(_.highlightStyle=this.highlightStyle),_.refOriginalPosition=this.location,_.refDataID=this.data.FID,_.isHoverByRefDataID=this.isMultiHover,a.length>0&&(_.holePolygonPointLists=a),this.shapeOptions&&(0,c.copyAttributesWithClip)(_,this.shapeOptions),this.shapes.push(_)}}}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,i=this.shapes.length;r<i;r++){var n=this.shapes[r];n.refOriginalPosition=t,e.addShape(n)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}]),e}(h.Theme);e.ThemeVector=y,l.Zondy.Theme.ThemeVector=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(22);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,r){(0,i.default)(this,t),e&&r&&r.map&&r.renderer&&(this.id=(0,s.newGuid)(),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="Zondy.Feature.Theme")}return(0,n.default)(t,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}}]),t}();e.Theme=u,o.Zondy.Theme=u},function(t,e,r){"use strict";r.r(e);var i=function(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0};i.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},i.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},i.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var i=this.points_[e+2]-this.points_[r+2];if(i<1e3/60)return!1;var n=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,n),this.initialVelocity_=Math.sqrt(n*n+o*o)/i,this.initialVelocity_>this.minVelocity_},i.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},i.prototype.getAngle=function(){return this.angle_},e.default=i},function(t,e,r){"use strict";r.r(e);var i=r(167),n=r(90),o=r(228),s=r(11),a=r(191),u=r(233),l=r(158),c=r(259),h=r(342),p=function(t){function e(e){(e=Object(s.assign)({},e)).controls||(e.controls=Object(n.a)()),e.interactions||(e.interactions=Object(o.defaults)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new u.a(this);return t.registerLayerRenderers([a.default,l.default,c.default,h.default]),t},e}(i.default);e.default=p},function(t,e,r){"use strict";r.r(e);var i=r(3),n=r(10),o=r(62),s=r(37),a=r(58),u=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),target:r.target});var o=void 0!==r.className?r.className:"ol-zoom",a=void 0!==r.delta?r.delta:1,u=void 0!==r.zoomInLabel?r.zoomInLabel:"+",l=void 0!==r.zoomOutLabel?r.zoomOutLabel:"−",c=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",h=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=o+"-in",p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof u?document.createTextNode(u):u),Object(i.listen)(p,n.default.CLICK,this.handleClick_.bind(this,a));var f=document.createElement("button");f.className=o+"-out",f.setAttribute("type","button"),f.title=h,f.appendChild("string"==typeof l?document.createTextNode(l):l),Object(i.listen)(f,n.default.CLICK,this.handleClick_.bind(this,-a));var d=o+" "+s.e+" "+s.b,g=this.element;g.className=d,g.appendChild(p),g.appendChild(f),this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getResolution();if(r){var i=e.constrainResolution(r,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:i,duration:this.duration_,easing:a.easeOut})):e.setResolution(i)}}},e}(o.default);e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"render",function(){return l});var i=r(62),n=r(37),o=r(58),s=r(3),a=r(10),u=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),render:r.render||l,target:r.target});var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var u=r.tipLabel?r.tipLabel:"Reset rotation",c=document.createElement("button");c.className=i+"-reset",c.setAttribute("type","button"),c.title=u,c.appendChild(this.label_),Object(s.listen)(c,a.default.CLICK,this.handleClick_,this);var h=i+" "+n.e+" "+n.b,p=this.element;p.className=h,p.appendChild(c),this.callResetNorth_=r.resetNorth?r.resetNorth:void 0,this.duration_=void 0!==r.duration?r.duration:250,this.autoHide_=void 0===r.autoHide||r.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(n.c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))},e}(i.default);function l(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var i="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(n.c);o||0!==r?o&&0!==r&&this.element.classList.remove(n.c):this.element.classList.add(n.c)}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=r}}e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"render",function(){return h});var i=r(15),n=r(62),o=r(37),s=r(24),a=r(3),u=r(10),l=r(69),c=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),render:r.render||h,target:r.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===r.collapsed||r.collapsed,this.overrideCollapsible_=void 0!==r.collapsible,this.collapsible_=void 0===r.collapsible||r.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==r.className?r.className:"ol-attribution",n=void 0!==r.tipLabel?r.tipLabel:"Attributions",s=void 0!==r.collapseLabel?r.collapseLabel:"»";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;var l=void 0!==r.label?r.label:"i";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l):this.label_=l;var c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=n,p.appendChild(c),Object(a.listen)(p,u.default.CLICK,this.handleClick_,this);var f=i+" "+o.e+" "+o.b+(this.collapsed_&&this.collapsible_?" "+o.a:"")+(this.collapsible_?"":" ol-uncollapsible"),d=this.element;d.className=f,d.appendChild(this.ulElement_),d.appendChild(p),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],i=t.layerStatesArray,n=t.viewState.resolution,o=0,s=i.length;o<s;++o){var a=i[o];if(Object(l.visibleAtResolution)(a,n)){var u=a.layer.getSource();if(u){var c=u.getAttributions();if(c){var h=c(t);if(h)if(this.overrideCollapsible_||!1!==u.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var p=0,f=h.length;p<f;++p)h[p]in e||(r.push(h[p]),e[h[p]]=!0);else h in e||(r.push(h),e[h]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Object(i.b)(e,this.renderedAttributions_)){Object(s.removeChildren)(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var a=document.createElement("li");a.innerHTML=e[n],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(o.a),this.collapsed_?Object(s.replaceNode)(this.collapseLabel_,this.label_):Object(s.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(n.default);function h(t){this.updateElement_(t.frameState)}e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(28),n=r(26),o=r(58),s=r(32),a=r(29),u=r(47),l=function(t){function e(e){t.call(this,{stopDown:a.a});var r=e||{};this.kinetic_=r.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=r.condition?r.condition:s.noModifierKeys,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(i.default.INTERACTING,1));var e=this.targetPointers,r=Object(u.centroid)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=this.lastCentroid[0]-r[0],s=r[1]-this.lastCentroid[1],a=t.map.getView(),l=[o,s];Object(n.scale)(l,a.getResolution()),Object(n.rotate)(l,a.getRotation()),Object(n.add)(l,a.getCenter()),l=a.constrainCenter(l),a.setCenter(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenter(),u=e.getPixelFromCoordinate(a),l=e.getCoordinateFromPixel([u[0]-n*Math.cos(s),u[1]-n*Math.sin(s)]);r.animate({center:r.constrainCenter(l),duration:500,easing:o.easeOut})}return this.panning_&&(this.panning_=!1,r.setHint(i.default.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(u.default);e.default=l},function(t,e,r){"use strict";r.r(e);var i=r(121),n=r(28),o=r(32),s=r(29),a=r(41),u=function(t){function e(e){var r=e||{};t.call(this,{stopDown:s.a}),this.condition_=r.condition?r.condition:o.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(o.mouseOnly)(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==i.c){var n=e.getSize(),s=t.pixel,u=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){var l=u-this.lastAngle_,c=r.getRotation();Object(a.rotateWithoutConstraints)(r,c-l)}this.lastAngle_=u}}},e.prototype.handleUpEvent=function(t){if(!Object(o.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(n.default.INTERACTING,-1);var r=e.getRotation();return Object(a.rotate)(e,r,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!(!Object(o.mouseOnly)(t)||!Object(o.mouseActionButton)(t)||!this.condition_(t)||(t.map.getView().setHint(n.default.INTERACTING,1),this.lastAngle_=void 0,0))},e}(r(47).default);e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(58),n=r(32),o=r(1),s=function(t){function e(e){var r=e||{},i=r.condition?r.condition:n.shiftKeyOnly;t.call(this,{condition:i,className:r.className||"ol-dragzoom",onBoxEnd:a}),this.duration_=void 0!==r.duration?r.duration:200,this.out_=void 0!==r.out&&r.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(225).default);function a(){var t=this.getMap(),e=t.getView(),r=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var s=e.calculateExtent(r),a=Object(o.createOrUpdateFromCoordinates)([t.getPixelFromCoordinate(Object(o.getBottomLeft)(n)),t.getPixelFromCoordinate(Object(o.getTopRight)(n))]),u=e.getResolutionForExtent(a,r);Object(o.scaleFromCenter)(s,1/u),n=s}var l=e.constrainResolution(e.getResolutionForExtent(n,r)),c=Object(o.getCenter)(n);c=e.constrainCenter(c),e.animate({resolution:l,center:c,duration:this.duration_,easing:i.easeOut})}e.default=s},function(t,e,r){"use strict";r.r(e);var i=r(10),n=r(32),o=r(41),s=function(t){function e(e){t.call(this,{handleEvent:a});var r=e||{};this.condition_=r.condition?r.condition:n.targetNotEditable,this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default);function a(t){var e=!1;if(t.type==i.default.KEYDOWN||t.type==i.default.KEYPRESS){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,s=r=="+".charCodeAt(0)?this.delta_:-this.delta_,a=n.getView();Object(o.zoomByDelta)(a,s,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=s},function(t,e,r){"use strict";r.r(e),r.d(e,"Mode",function(){return c});var i=r(28),n=r(32),o=r(58),s=r(10),a=r(42),u=r(41),l=r(19),c={TRACKPAD:"trackpad",WHEEL:"wheel"},h=function(t){function e(e){var r=e||{};t.call(this,r),this.delta_=0,this.duration_=void 0!==r.duration?r.duration:250,this.timeout_=void 0!==r.timeout?r.timeout:80,this.useAnchor_=void 0===r.useAnchor||r.useAnchor,this.constrainResolution_=r.constrainResolution||!1,this.condition_=r.condition?r.condition:n.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(i.default.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==s.default.WHEEL&&e!==s.default.MOUSEWHEEL)return!0;t.preventDefault();var r,n=t.map,u=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==s.default.WHEEL?(r=u.deltaY,a.FIREFOX&&u.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=a.DEVICE_PIXEL_RATIO),u.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)):t.type==s.default.MOUSEWHEEL&&(r=-u.wheelDeltaY,a.SAFARI&&(r/=3)),0===r)return!1;var l=Date.now();if(void 0===this.startTime_&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?c.TRACKPAD:c.WHEEL),this.mode_===c.TRACKPAD){var h=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):h.setHint(i.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var p=h.getResolution()*Math.pow(2,r/this.trackpadDeltaPerZoom_),f=h.getMinResolution(),d=h.getMaxResolution(),g=0;if(p<f?(p=Math.max(p,f/this.trackpadZoomBuffer_),g=1):p>d&&(p=Math.min(p,d*this.trackpadZoomBuffer_),g=-1),this.lastAnchor_){var y=h.calculateCenterZoom(p,this.lastAnchor_);h.setCenter(h.constrainCenter(y))}return h.setResolution(p),0===g&&this.constrainResolution_&&h.animate({resolution:h.constrainResolution(p,r>0?-1:1),easing:o.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),g>0?h.animate({resolution:f,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}):g<0&&h.animate({resolution:d,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=l,!1}this.delta_+=r;var v=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),v),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=Object(l.a)(this.delta_,-1,1);Object(u.zoomByDelta)(e,-r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(u.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(28),n=r(29),o=r(41),s=r(47),a=r(121),u=function(t){function e(e){var r=e||{},i=r;i.stopDown||(i.stopDown=n.a),t.call(this,i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==r.threshold?r.threshold:.3,this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],i=this.targetPointers[1],n=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(void 0!==this.lastAngle_){var u=n-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=u}this.lastAngle_=n;var l=t.map,c=l.getView();if(c.getConstraints().rotation!==a.c){var h=l.getViewport().getBoundingClientRect(),p=Object(s.centroid)(this.targetPointers);if(p[0]-=h.left,p[1]-=h.top,this.anchor_=l.getCoordinateFromPixel(p),this.rotating_){var f=c.getRotation();l.render(),Object(o.rotateWithoutConstraints)(c,f+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(i.default.INTERACTING,-1),this.rotating_){var r=e.getRotation();Object(o.rotate)(e,r,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(i.default.INTERACTING,1),!0}return!1},e}(s.default);e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(28),n=r(29),o=r(41),s=r(47),a=function(t){function e(e){var r=e||{},i=r;i.stopDown||(i.stopDown=n.a),t.call(this,i),this.constrainResolution_=r.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==r.duration?r.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],i=this.targetPointers[1],n=r.clientX-i.clientX,a=r.clientY-i.clientY,u=Math.sqrt(n*n+a*a);void 0!==this.lastDistance_&&(e=this.lastDistance_/u),this.lastDistance_=u;var l=t.map,c=l.getView(),h=c.getResolution(),p=c.getMaxResolution(),f=c.getMinResolution(),d=h*e;d>p?(e=p/h,d=p):d<f&&(e=f/h,d=f),1!=e&&(this.lastScaleDelta_=e);var g=l.getViewport().getBoundingClientRect(),y=Object(s.centroid)(this.targetPointers);y[0]-=g.left,y[1]-=g.top,this.anchor_=l.getCoordinateFromPixel(y),l.render(),Object(o.zoomWithoutConstraints)(c,d,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(i.default.INTERACTING,-1);var r=e.getResolution();if(this.constrainResolution_||r<e.getMinResolution()||r>e.getMaxResolution()){var n=this.lastScaleDelta_-1;Object(o.zoom)(e,r,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(i.default.INTERACTING,1),!0}return!1},e}(s.default);e.default=a},function(t,e,r){"use strict";r.r(e);var i=r(134),n=r(25),o=r(82),s=r(37),a=r(24),u=r(3),l=r(1),c={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s.d,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(u.listen)(this,Object(n.getChangeEventType)(c.ELEMENT),this.handleElementChanged,this),Object(u.listen)(this,Object(n.getChangeEventType)(c.MAP),this.handleMapChanged,this),Object(u.listen)(this,Object(n.getChangeEventType)(c.OFFSET),this.handleOffsetChanged,this),Object(u.listen)(this,Object(n.getChangeEventType)(c.POSITION),this.handlePositionChanged,this),Object(u.listen)(this,Object(n.getChangeEventType)(c.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:o.a.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(c.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(c.MAP)},e.prototype.getOffset=function(){return this.get(c.OFFSET)},e.prototype.getPosition=function(){return this.get(c.POSITION)},e.prototype.getPositioning=function(){return this.get(c.POSITIONING)},e.prototype.handleElementChanged=function(){Object(a.removeChildren)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(a.removeNode)(this.element),Object(u.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(u.listen)(t,i.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(c.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(c.ELEMENT,t)},e.prototype.setMap=function(t){this.set(c.MAP,t)},e.prototype.setOffset=function(t){this.set(c.OFFSET,t)},e.prototype.setPosition=function(t){this.set(c.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),i=this.getRect(r,[Object(a.outerWidth)(r),Object(a.outerHeight)(r)]),n=this.autoPanMargin;if(!Object(l.containsExtent)(e,i)){var o=i[0]-e[0],s=e[2]-i[2],u=i[1]-e[1],c=e[3]-i[3],h=[0,0];if(o<0?h[0]=o-n:s<0&&(h[0]=Math.abs(s)+n),u<0?h[1]=u-n:c<0&&(h[1]=Math.abs(c)+n),0!==h[0]||0!==h[1]){var p=t.getView().getCenter(),f=t.getPixelFromCoordinate(p),d=[f[0]+h[0],f[1]+h[1]];t.getView().animate({center:t.getCoordinateFromPixel(d),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),i=r.left+window.pageXOffset,n=r.top+window.pageYOffset;return[i,n,i+e[0],n+e[1]]},e.prototype.setPositioning=function(t){this.set(c.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(r,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,i=this.getOffset(),n=this.getPositioning();this.setVisible(!0);var s=i[0],a=i[1];if(n==o.a.BOTTOM_RIGHT||n==o.a.CENTER_RIGHT||n==o.a.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=r.left="");var u=Math.round(e[0]-t[0]-s)+"px";this.rendered.right_!=u&&(this.rendered.right_=r.right=u)}else{""!==this.rendered.right_&&(this.rendered.right_=r.right=""),n!=o.a.BOTTOM_CENTER&&n!=o.a.CENTER_CENTER&&n!=o.a.TOP_CENTER||(s-=this.element.offsetWidth/2);var l=Math.round(t[0]+s)+"px";this.rendered.left_!=l&&(this.rendered.left_=r.left=l)}if(n==o.a.BOTTOM_LEFT||n==o.a.BOTTOM_CENTER||n==o.a.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=r.top="");var c=Math.round(e[1]-t[1]-a)+"px";this.rendered.bottom_!=c&&(this.rendered.bottom_=r.bottom=c)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=r.bottom=""),n!=o.a.CENTER_LEFT&&n!=o.a.CENTER_CENTER&&n!=o.a.CENTER_RIGHT||(a-=this.element.offsetHeight/2);var h=Math.round(t[1]+a)+"px";this.rendered.top_!=h&&(this.rendered.top_=r.top=h)}},e.prototype.getOptions=function(){return this.options},e}(n.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(95),o=r(17),s=[0,0,4096,4096],a=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,s),this.consumers=0,this.extent_=null,this.format_=n,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=o.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getExtent=function(){return this.extent_||s},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getReplayGroup=function(t,e){return this.replayGroups_[Object(i.getUid)(t)+","+e]},e.prototype.load=function(){this.state==o.default.IDLE&&(this.setState(o.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},e.prototype.onLoad=function(t,e,r){this.setProjection(e),this.setFeatures(t),this.setExtent(r)},e.prototype.onError=function(){this.setState(o.default.ERROR)},e.prototype.setExtent=function(t){this.extent_=t},e.prototype.setFeatures=function(t){this.features_=t,this.setState(o.default.LOADED)},e.prototype.setProjection=function(t){this.projection_=t},e.prototype.setReplayGroup=function(t,e,r){this.replayGroups_[Object(i.getUid)(t)+","+e]=r},e.prototype.setLoader=function(t){this.loader_=t},e}(n.default);e.default=a},function(t,e,r){"use strict";r.r(e);var i=r(50),n=function(t){function e(e){var r=e||{};t.call(this,r),this.type=i.a.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(69).default);n.prototype.getSource,e.default=n},function(t,e,r){"use strict";r.r(e);var i=r(35),n=r(32),o=r(29),s=r(47),a=r(131),u=r(34),l=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new u.default([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(a.a),c=function(t){function e(e,r,i){t.call(this,e),this.coordinate=r,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i.default),h=function(t){function e(e){t.call(this);var r=e||{};this.box_=new l(r.className||"ol-dragbox"),this.minArea_=void 0!==r.minArea?r.minArea:64,this.onBoxEnd_=r.onBoxEnd?r.onBoxEnd:o.c,this.startPixel_=null,this.condition_=r.condition?r.condition:n.always,this.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,r){var i=r[0]-e[0],n=r[1]-e[1];return i*i+n*n>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Object(n.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new c("boxdrag",t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Object(n.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new c("boxend",t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!(!Object(n.mouseOnly)(t)||!Object(n.mouseActionButton)(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new c("boxstart",t.coordinate,t)),0))},e}(s.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(26),n=r(10),o={LEFT:37,UP:38,RIGHT:39,DOWN:40},s=r(32),a=r(41),u=function(t){function e(e){t.call(this,{handleEvent:l});var r=e||{};this.defaultCondition_=function(t){return Object(s.noModifierKeys)(t)&&Object(s.targetNotEditable)(t)},this.condition_=void 0!==r.condition?r.condition:this.defaultCondition_,this.duration_=void 0!==r.duration?r.duration:100,this.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default);function l(t){var e=!1;if(t.type==n.default.KEYDOWN){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(r==o.DOWN||r==o.LEFT||r==o.RIGHT||r==o.UP)){var s=t.map.getView(),u=s.getResolution()*this.pixelDelta_,l=0,c=0;r==o.DOWN?c=-u:r==o.LEFT?l=-u:r==o.RIGHT?l=u:c=u;var h=[l,c];Object(i.rotate)(h,s.getRotation()),Object(a.pan)(s,h,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(25),o=r(61),s=r(19),a=r(11),u=function(t){function e(e){t.call(this);var r=Object(a.assign)({},e);r[o.a.OPACITY]=void 0!==e.opacity?e.opacity:1,r[o.a.VISIBLE]=void 0===e.visible||e.visible,r[o.a.Z_INDEX]=e.zIndex,r[o.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,r[o.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(r),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(s.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return Object(i.abstract)()},e.prototype.getLayerStatesArray=function(t){return Object(i.abstract)()},e.prototype.getExtent=function(){return this.get(o.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},e.prototype.getSourceState=function(){return Object(i.abstract)()},e.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e}(n.default);e.default=u},function(t,e,r){"use strict";r.r(e),r.d(e,"defaults",function(){return T});var i=r(48),n=r(210),o=r(183),s=r(215),a=r(216),u=r(217),l=r(226),c=r(218),h=r(219),p=r(220),f=r(221),d=r(32);r.d(e,"DoubleClickZoom",function(){return o.default});var g=r(277);r.d(e,"DragAndDrop",function(){return g.default});var y=r(225);r.d(e,"DragBox",function(){return y.default}),r.d(e,"DragPan",function(){return s.default}),r.d(e,"DragRotate",function(){return a.default});var v=r(278);r.d(e,"DragRotateAndZoom",function(){return v.default}),r.d(e,"DragZoom",function(){return u.default});var m=r(279);r.d(e,"Draw",function(){return m.default});var _=r(280);r.d(e,"Extent",function(){return _.default});var b=r(41);r.d(e,"Interaction",function(){return b.default}),r.d(e,"KeyboardPan",function(){return l.default}),r.d(e,"KeyboardZoom",function(){return c.default});var S=r(281);r.d(e,"Modify",function(){return S.default}),r.d(e,"MouseWheelZoom",function(){return h.default}),r.d(e,"PinchRotate",function(){return p.default}),r.d(e,"PinchZoom",function(){return f.default});var x=r(47);r.d(e,"Pointer",function(){return x.default});var O=r(282);r.d(e,"Select",function(){return O.default});var E=r(283);r.d(e,"Snap",function(){return E.default});var C=r(284);function T(t){var e=t||{},r=new i.default,g=new n.default(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new a.default),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new o.default({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new s.default({condition:e.onFocusOnly?d.focus:void 0,kinetic:g})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new p.default),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new f.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new l.default),r.push(new c.default({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new h.default({condition:e.onFocusOnly?d.focus:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new u.default({duration:e.zoomDuration})),r}r.d(e,"Translate",function(){return C.default})},function(t,e,r){"use strict";r.r(e);var i=r(4),n=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};n.prototype.clone=function(){return new n({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getSnapToPixel=function(){return!1},n.prototype.getAnchor=function(){return Object(i.abstract)()},n.prototype.getImage=function(t){return Object(i.abstract)()},n.prototype.getHitDetectionImage=function(t){return Object(i.abstract)()},n.prototype.getImageState=function(){return Object(i.abstract)()},n.prototype.getImageSize=function(){return Object(i.abstract)()},n.prototype.getHitDetectionImageSize=function(){return Object(i.abstract)()},n.prototype.getOrigin=function(){return Object(i.abstract)()},n.prototype.getSize=function(){return Object(i.abstract)()},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setSnapToPixel=function(t){},n.prototype.listenImageChange=function(t,e){return Object(i.abstract)()},n.prototype.load=function(){Object(i.abstract)()},n.prototype.unlistenImageChange=function(t,e){Object(i.abstract)()},e.default=n},function(t,e,r){"use strict";r.r(e),r.d(e,"loadFeaturesXhr",function(){return o}),r.d(e,"xhr",function(){return s});var i=r(29),n=r(104);function o(t,e,r,i){return function(o,s,a){var u=new XMLHttpRequest;u.open("GET","function"==typeof t?t(o,s,a):t,!0),e.getType()==n.a.ARRAY_BUFFER&&(u.responseType="arraybuffer"),u.onload=function(t){if(!u.status||u.status>=200&&u.status<300){var o,s=e.getType();s==n.a.JSON||s==n.a.TEXT?o=u.responseText:s==n.a.XML?(o=u.responseXML)||(o=(new DOMParser).parseFromString(u.responseText,"application/xml")):s==n.a.ARRAY_BUFFER&&(o=u.response),o?r.call(this,e.readFeatures(o,{featureProjection:a}),e.readProjection(o),e.getLastExtent()):i.call(this)}else i.call(this)}.bind(this),u.onerror=function(){i.call(this)}.bind(this),u.send()}}function s(t,e){return o(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},i.c)}},function(t,e,r){"use strict";r.d(e,"b",function(){return f});var i=r(4),n=r(95),o=r(17),s=r(24),a=r(3),u=r(1),l=r(10),c=r(230),h=r(29),p=function(t){function e(r,i,n,s,c,p,f,d,g,y,v,m,_,b,S){if(t.call(this,r,i,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=y,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=p,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],p){var x=this.extent=g.getTileCoordExtent(p),O=g.getResolution(S),E=d.getZForResolution(O),C=S!=r[0],T=0;if(d.forEachTileCoord(x,E,function(t){var e=Object(u.getIntersection)(x,d.getTileCoordExtent(t)),r=d.getExtent();if(r&&(e=Object(u.getIntersection)(e,r,e)),Object(u.getWidth)(e)/O>=.5&&Object(u.getHeight)(e)/O>=.5){++T;var i=t.toString(),n=y[i];if(!n&&!C){var h=f(t,v,m);n=y[i]=new _(t,void 0==h?o.default.EMPTY:o.default.IDLE,void 0==h?"":h,s,c),this.sourceTileListenerKeys_.push(Object(a.listen)(n,l.default.CHANGE,b))}!n||C&&n.getState()!=o.default.LOADED||(n.consumers++,this.tileKeys.push(i))}}.bind(this)),C&&T==this.tileKeys.length&&this.finishLoading_(),S<=r[0]&&this.state!=o.default.LOADED)for(;S>g.getMinZoom();){var P=new e(r,i,n,s,c,p,f,d,g,y,v,m,_,h.c,--S);if(P.state==o.default.LOADED){this.interimTile=P;break}}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state=o.default.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,r=this.tileKeys.length;e<r;++e){var i=this.tileKeys[e],n=this.getTile(i);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[i],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(a.unlistenByKey),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(a.unlistenByKey),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=Object(i.getUid)(t);return e in this.context_||(this.context_[e]=Object(s.createCanvasContext2D)()),this.context_[e]},e.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},e.prototype.getReplayState=function(t){var e=Object(i.getUid)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},e.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},e.prototype.getTile=function(t){return this.sourceTiles_[t]},e.prototype.load=function(){var t=0,e={};this.state==o.default.IDLE&&this.setState(o.default.LOADING),this.state==o.default.LOADING&&this.tileKeys.forEach(function(r){var n=this.getTile(r);if(n.state==o.default.IDLE&&(n.setLoader(this.loader_),n.load()),n.state==o.default.LOADING){var s=Object(a.listen)(n,l.default.CHANGE,function(r){var s=n.getState();if(s==o.default.LOADED||s==o.default.ERROR){var a=Object(i.getUid)(n);s==o.default.ERROR?e[a]=!0:(--t,delete e[a]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(s),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},e.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,r=t-1;r>=0;--r){var i=this.getTile(this.tileKeys[r]).getState();i!=o.default.LOADED&&--t,i==o.default.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(a.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(o.default.LOADED)):this.setState(e==this.tileKeys.length?o.default.EMPTY:o.default.ERROR)},e}(n.default);function f(t,e){var r=Object(c.loadFeaturesXhr)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}e.a=p},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(17),o=r(76),s=r(127),a=r(46),u=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):o.d,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,o=Object(i.getUid)(r),a=r.getState();a==n.default.LOADING?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=a==n.default.ERROR?"tileloaderror":a==n.default.LOADED||a==n.default.ABORT?"tileloadend":void 0),void 0!=e&&this.dispatchEvent(new s.TileSourceEvent(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=Object(o.c)(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(o.a)(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var i=Object(a.getKeyZXY)(t,e,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(s.default);e.default=u},function(t,e,r){"use strict";r.d(e,"b",function(){return d});var i=r(18),n=r(15),o=r(37),s=r(24),a=r(69),u=r(157),l=r(59),c=r(21),h=r(170),p=r(174),f=r(43),d=[],g=function(t){function e(e){t.call(this,e);var r=e.getViewport();this.context_=Object(s.createCanvasContext2D)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=o.e,r.insertBefore(this.canvas_,r.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(i.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap(),i=this.context_;if(r.hasListener(t)){var n=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new h.default(i,o,n,a,s),c=new u.a(t,l,e,i,null);r.dispatchEvent(c)}},e.prototype.getTransform=function(t){var e=t.viewState,r=this.canvas_.width/2,n=this.canvas_.height/2,o=t.pixelRatio/e.resolution,s=-o,a=-e.rotation,u=-e.center[0],l=-e.center[1];return Object(i.b)(this.transform_,r,n,o,s,a,u,l)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,r=t.pixelRatio,i=Math.round(t.size[0]*r),o=Math.round(t.size[1]*r);this.canvas_.width!=i||this.canvas_.height!=o?(this.canvas_.width=i,this.canvas_.height=o):e.clearRect(0,0,i,o);var s=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(l.a.PRECOMPOSE,t);var u=t.layerStatesArray;Object(n.l)(u,p.sortByZIndex),s&&(e.save(),Object(c.rotateAtOffset)(e,s,i/2,o/2));var h,d,g=t.viewState.resolution;for(h=0,d=u.length;h<d;++h){var y=u[h],v=y.layer,m=this.getLayerRenderer(v);Object(a.visibleAtResolution)(y,g)&&y.sourceState==f.a.READY&&m.prepareFrame(t,y)&&m.composeFrame(t,y,e)}s&&e.restore(),this.dispatchRenderEvent(l.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,o,s,u){var l,c,h=e.viewState.resolution,p=e.layerStatesArray,f=p.length,d=Object(i.a)(e.pixelToCoordinateTransform,t.slice());for(c=f-1;c>=0;--c){var g=p[c],y=g.layer;if(Object(a.visibleAtResolution)(g,h)&&s.call(u,y)&&(l=this.getLayerRenderer(y).forEachLayerAtCoordinate(d,e,r,n,o)))return l}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var r=0,i=e.length;r<i;++r){var o=e[r];Object(n.f)(d,o)||d.push(o)}},e}(p.default);e.a=g},function(t,e,r){"use strict";var i=r(15),n=r(24),o=r(1),s=r(52),a=r(11),u=r(271),l=r(30),c=r(4),h=r(78),p=r(72),f=r(5),d=r(77),g=r(263),y=r(19);function v(t,e,r,i,n,o,s,a){for(var u,l,c,h=[],p=t[e]>t[r-i],f=n.length,d=t[e],g=t[e+1],v=t[e+=i],m=t[e+1],_=0,b=Math.sqrt(Math.pow(v-d,2)+Math.pow(m-g,2)),S="",x=0,O=0;O<f;++O){l=p?f-O-1:O;var E=n.charAt(l),C=o(S=p?E+S:S+E)-x;x+=C;for(var T=s+C/2;e<r-i&&_+b<T;)d=v,g=m,v=t[e+=i],m=t[e+1],_+=b,b=Math.sqrt(Math.pow(v-d,2)+Math.pow(m-g,2));var P=T-_,w=Math.atan2(m-g,v-d);if(p&&(w+=w>0?-Math.PI:Math.PI),void 0!==c){var I=w-c;if(I+=I>Math.PI?-2*Math.PI:I<-Math.PI?2*Math.PI:0,Math.abs(I)>a)return null}var L=P/b,R=Object(y.c)(d,v,L),M=Object(y.c)(g,m,L);c==w?(p&&(u[0]=R,u[1]=M,u[2]=C/2),u[4]=S):(x=C,u=[R,M,C/2,w,S=E],p?h.unshift(u):h.push(u),c=w),s+=C}return h}var m=r(42),_=r(143),b=r(21),S={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},x=[S.FILL],O=[S.STROKE],E=[S.BEGIN_PATH],C=[S.CLOSE_PATH],T=S,P=r(64),w=r(18),I=Object(o.createEmpty)(),L=Object(w.c)(),R=function(t){function e(e,r,i,n,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=r,this.overlaps=o,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(w.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,r,i,n,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,r,i,n,s,a,u,l,c,h,p,f,d,g,y,v,m){var _=v||m;e-=n*=f,r-=s*=f;var S,x,O,E,C=g+c>i.width?i.width-c:g,T=u+h>i.height?i.height-h:u,P=y[3]+C*f+y[1],R=y[0]+T*f+y[2],M=e-y[3],A=r-y[0];(_||0!==p)&&(S=[M,A],x=[M+P,A],O=[M+P,A+R],E=[M,A+R]);var j=null;if(0!==p){var N=e+n,F=r+s;j=Object(w.b)(L,N,F,1,1,p,-N,-F),Object(o.createOrUpdateEmpty)(I),Object(o.extendCoordinate)(I,Object(w.a)(L,S)),Object(o.extendCoordinate)(I,Object(w.a)(L,x)),Object(o.extendCoordinate)(I,Object(w.a)(L,O)),Object(o.extendCoordinate)(I,Object(w.a)(L,E))}else Object(o.createOrUpdate)(M,A,M+P,A+R,I);var D=t.canvas,k=m?m[2]*f/2:0,G=I[0]-k<=D.width&&I[2]+k>=0&&I[1]-k<=D.height&&I[3]+k>=0;if(d&&(e=Math.round(e),r=Math.round(r)),a){if(!G&&1==a[4])return;Object(o.extend)(a,I);var B=G?[t,j?j.slice(0):null,l,i,c,h,C,T,e,r,f]:null;B&&_&&B.push(v,m,S,x,O,E),a.push(B)}else G&&(_&&this.replayTextBackground_(t,S,x,O,E,v,m),Object(b.drawImage)(t,j,l,i,c,h,C,T,e,r,f))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,r,i,n,s){var a=this.coordinates.length,u=this.getBufferedMaxExtent();s&&(e+=i);var l,c,h,f=[t[e],t[e+1]],d=[NaN,NaN],g=!0;for(l=e+i;l<r;l+=i)d[0]=t[l],d[1]=t[l+1],(h=Object(o.coordinateRelationship)(u,d))!==c?(g&&(this.coordinates[a++]=f[0],this.coordinates[a++]=f[1]),this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],g=!1):h===p.a.INTERSECTING?(this.coordinates[a++]=d[0],this.coordinates[a++]=d[1],g=!1):g=!0,f[0]=d[0],f[1]=d[1],c=h;return(n&&g||l===e+i)&&(this.coordinates[a++]=f[0],this.coordinates[a++]=f[1]),a},e.prototype.drawCustomCoordinates_=function(t,e,r,i,n){for(var o=0,s=r.length;o<s;++o){var a=r[o],u=this.appendFlatCoordinates(t,e,a,i,!1,!1);n.push(u),e=a}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var i,n,o,s,a,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==f.default.MULTI_POLYGON){i=(t=t).getOrientedFlatCoordinates(),s=[];var h=t.getEndss();a=0;for(var p=0,g=h.length;p<g;++p){var y=[];a=this.drawCustomCoordinates_(i,a,h[p],l,y),s.push(y)}this.instructions.push([T.CUSTOM,c,s,t,r,d.c])}else u==f.default.POLYGON||u==f.default.MULTI_LINE_STRING?(o=[],i=u==f.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(i,0,t.getEnds(),l,o),this.instructions.push([T.CUSTOM,c,o,t,r,d.b])):u==f.default.LINE_STRING||u==f.default.MULTI_POINT?(i=t.getFlatCoordinates(),n=this.appendFlatCoordinates(i,0,i.length,l,!1,!1),this.instructions.push([T.CUSTOM,c,n,t,r,d.a])):u==f.default.POINT&&(i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),n=this.coordinates.length,this.instructions.push([T.CUSTOM,c,n,t,r]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[T.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[T.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(w.a)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,b.resetTransform)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],m.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var r=t[4];if(1==r||r==t.length-5){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(var n=5,s=t.length;n<s;++n){var a=t[n];a&&(a.length>11&&this.replayTextBackground_(a[0],a[13],a[14],a[15],a[16],a[11],a[12]),b.drawImage.apply(void 0,a))}}t.length=5,Object(o.createOrUpdateEmpty)(t)}}},e.prototype.replay_=function(t,e,r,n,u,l,h){var p;this.pixelCoordinates_&&Object(i.b)(e,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=Object(s.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(w.i)(this.renderedTransform_,e));for(var f,d,y,m,_,S,x,O,E,C,I,L,R=!Object(a.isEmpty)(r),M=0,A=n.length,j=0,N=0,F=0,D=null,k=null,G=this.coordinateCache_,B=this.viewRotation_,U={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},V=this.instructions!=n||this.overlaps?0:200;M<A;){var z=n[M];switch(z[0]){case T.BEGIN_GEOMETRY:C=z[1],R&&r[Object(c.getUid)(C)]||!C.getGeometry()?M=z[2]:void 0===h||Object(o.intersects)(h,C.getGeometry().getExtent())?++M:M=z[2]+1;break;case T.BEGIN_PATH:N>V&&(this.fill_(t),N=0),F>V&&(t.stroke(),F=0),N||F||(t.beginPath(),m=_=NaN),++M;break;case T.CIRCLE:var W=p[j=z[1]],Y=p[j+1],X=p[j+2]-W,Z=p[j+3]-Y,H=Math.sqrt(X*X+Z*Z);t.moveTo(W+H,Y),t.arc(W,Y,H,0,2*Math.PI,!0),++M;break;case T.CLOSE_PATH:t.closePath(),++M;break;case T.CUSTOM:j=z[1],f=z[2];var q=z[3],K=z[4],J=6==z.length?z[5]:void 0;U.geometry=q,U.feature=C,M in G||(G[M]=[]);var Q=G[M];J?J(p,j,f,2,Q):(Q[0]=p[j],Q[1]=p[j+1],Q.length=2),K(Q,U),++M;break;case T.DRAW_IMAGE:j=z[1],f=z[2],E=z[3],d=z[4],y=z[5],O=l?null:z[6];var $=z[7],tt=z[8],et=z[9],rt=z[10],it=z[11],nt=z[12],ot=z[13],st=z[14],at=void 0,ut=void 0,lt=void 0;for(z.length>16?(at=z[15],ut=z[16],lt=z[17]):(at=b.defaultPadding,ut=lt=!1),it&&(nt+=B);j<f;j+=2)this.replayImage_(t,p[j],p[j+1],E,d,y,O,$,tt,et,rt,nt,ot,u,st,at,ut?D:null,lt?k:null);this.renderDeclutter_(O,C),++M;break;case T.DRAW_CHARS:var ct=z[1],ht=z[2],pt=z[3];O=l?null:z[4];var ft=z[5],dt=z[6],gt=z[7],yt=z[8],vt=z[9],mt=z[10],_t=z[11],bt=z[12],St=z[13],xt=z[14],Ot=Object(g.a)(p,ct,ht,2),Et=yt(bt);if(ft||Et<=Ot){var Ct=this.textStates[St].textAlign,Tt=v(p,ct,ht,2,bt,yt,(Ot-Et)*P.b[Ct],gt);if(Tt){var Pt=void 0,wt=void 0,It=void 0,Lt=void 0,Rt=void 0;if(mt)for(Pt=0,wt=Tt.length;Pt<wt;++Pt)It=(Rt=Tt[Pt])[4],Lt=this.getImage(It,St,"",mt),d=Rt[2]+_t,y=pt*Lt.height+2*(.5-pt)*_t-vt,this.replayImage_(t,Rt[0],Rt[1],Lt,d,y,O,Lt.height,1,0,0,Rt[3],xt,!1,Lt.width,b.defaultPadding,null,null);if(dt)for(Pt=0,wt=Tt.length;Pt<wt;++Pt)It=(Rt=Tt[Pt])[4],Lt=this.getImage(It,St,dt,""),d=Rt[2],y=pt*Lt.height-vt,this.replayImage_(t,Rt[0],Rt[1],Lt,d,y,O,Lt.height,1,0,0,Rt[3],xt,!1,Lt.width,b.defaultPadding,null,null)}}this.renderDeclutter_(O,C),++M;break;case T.END_GEOMETRY:if(void 0!==l){var Mt=l(C=z[1]);if(Mt)return Mt}++M;break;case T.FILL:V?N++:this.fill_(t),++M;break;case T.MOVE_TO_LINE_TO:for(j=z[1],f=z[2],I=p[j],x=(L=p[j+1])+.5|0,(S=I+.5|0)===m&&x===_||(t.moveTo(I,L),m=S,_=x),j+=2;j<f;j+=2)S=(I=p[j])+.5|0,x=(L=p[j+1])+.5|0,j!=f-2&&S===m&&x===_||(t.lineTo(I,L),m=S,_=x);++M;break;case T.SET_FILL_STYLE:D=z,this.alignFill_=z[2],N&&(this.fill_(t),N=0,F&&(t.stroke(),F=0)),t.fillStyle=z[1],++M;break;case T.SET_STROKE_STYLE:k=z,F&&(t.stroke(),F=0),this.setStrokeStyle_(t,z),++M;break;case T.STROKE:V?F++:t.stroke(),++M;break;default:++M}}N&&this.fill_(t),F&&t.stroke()},e.prototype.replay=function(t,e,r,i,n){this.viewRotation_=r,this.replay_(t,e,i,this.instructions,n,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,r,i,n,o){return this.viewRotation_=r,this.replay_(t,e,i,this.hitDetectionInstructions,!0,n,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,o=e.length,s=-1;for(t=0;t<o;++t)(n=(r=e[t])[0])==T.END_GEOMETRY?s=t:n==T.BEGIN_GEOMETRY&&(r[2]=t,Object(i.k)(this.hitDetectionInstructions,s,t),s=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var i=t.getColor();r.fillStyle=Object(h.asColorLike)(i||b.defaultFillStyle)}else r.fillStyle=void 0;if(e){var n=e.getColor();r.strokeStyle=Object(h.asColorLike)(n||b.defaultStrokeStyle);var o=e.getLineCap();r.lineCap=void 0!==o?o:b.defaultLineCap;var s=e.getLineDash();r.lineDash=s?s.slice():b.defaultLineDash;var a=e.getLineDashOffset();r.lineDashOffset=a||b.defaultLineDashOffset;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:b.defaultLineJoin;var l=e.getWidth();r.lineWidth=void 0!==l?l:b.defaultLineWidth;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:b.defaultMiterLimit,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t,e){var r=t.fillStyle,i=[T.SET_FILL_STYLE,r];return"string"!=typeof r&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[T.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,r){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t,r)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!Object(i.b)(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=u,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var r=[T.END_GEOMETRY,e];this.instructions.push(r),this.hitDetectionInstructions.push(r)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(o.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(o.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(_.default),M=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,i,n,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,r,i){return this.appendFlatCoordinates(t,e,r,i,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),i=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([T.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([T.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),i=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,i);this.instructions.push([T.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([T.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),i=t.getSize(),n=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroup_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=i[0]},e}(R),A=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,i,n,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,r,i){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,e,r,i,!1,!1),s=[T.MOVE_TO_LINE_TO,n,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),r},e.prototype.drawLineString=function(t,e){var r=this.state,i=r.strokeStyle,n=r.lineWidth;if(void 0!==i&&void 0!==n){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],E);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(O),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,i=r.strokeStyle,n=r.lineWidth;if(void 0!==i&&void 0!==n){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],E);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(s,u,o[l],a);this.hitDetectionInstructions.push(O),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(O),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(O),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(E)},e}(R),j=r(57),N=r(116),F=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,i,n,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,r,i){var n=this.state,o=void 0!==n.fillStyle,s=void 0!=n.strokeStyle,a=r.length;this.instructions.push(E),this.hitDetectionInstructions.push(E);for(var u=0;u<a;++u){var l=r[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,i,!0,!s),p=[T.MOVE_TO_LINE_TO,c,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(C),this.hitDetectionInstructions.push(C)),e=l}return o&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),s&&(this.instructions.push(O),this.hitDetectionInstructions.push(O)),e},e.prototype.drawCircle=function(t,e){var r=this.state,i=r.fillStyle,n=r.strokeStyle;if(void 0!==i||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,Object(j.asString)(b.defaultFillStyle)]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var u=[T.CIRCLE,a];this.instructions.push(E,u),this.hitDetectionInstructions.push(E,u),this.hitDetectionInstructions.push(x),void 0!==r.fillStyle&&this.instructions.push(x),void 0!==r.strokeStyle&&(this.instructions.push(O),this.hitDetectionInstructions.push(O)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,i=r.fillStyle,n=r.strokeStyle;if(void 0!==i||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,Object(j.asString)(b.defaultFillStyle)]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,i=r.fillStyle,n=r.strokeStyle;if(void 0!==i||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,Object(j.asString)(b.defaultFillStyle)]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(s,u,o[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,r=0,i=e.length;r<i;++r)e[r]=Object(N.e)(e[r],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(R);function D(t,e,r,i,n){var o,s,a,u,l,c,h,p,f,d=r,g=r,y=0,v=0,m=r;for(o=r;o<i;o+=n){var _=e[o],b=e[o+1];void 0!==u&&(p=_-u,f=b-l,a=Math.sqrt(p*p+f*f),void 0!==c&&(v+=s,Math.acos((c*p+h*f)/(s*a))>t&&(v>y&&(y=v,d=m,g=o),v=0,m=o-n)),s=a,c=p,h=f),u=_,l=b}return(v+=a)>y?[m,o]:[d,g]}var k=r(262),G=function(t){function e(e,r,i,n,o,s){t.call(this,e,r,i,n,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},b.labelCache.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var r=this.textFillState_,i=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(r||i)){var s,a,u=this.coordinates.length,l=t.getType(),c=null,h=2,p=2;if(n.placement===k.a.LINE){if(!Object(o.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var d;if(c=t.getFlatCoordinates(),p=t.getStride(),l==f.default.LINE_STRING)d=[c.length];else if(l==f.default.MULTI_LINE_STRING)d=t.getEnds();else if(l==f.default.POLYGON)d=t.getEnds().slice(0,1);else if(l==f.default.MULTI_POLYGON){var g=t.getEndss();for(d=[],s=0,a=g.length;s<a;++s)d.push(g[s][0])}this.beginGeometry(t,e);for(var y,v=n.textAlign,m=0,_=0,b=d.length;_<b;++_){if(void 0==v){var S=D(n.maxAngle,c,m,d[_],p);m=S[0],y=S[1]}else y=d[_];for(s=m;s<y;s+=p)this.coordinates.push(c[s],c[s+1]);h=this.coordinates.length,m=d[_],this.drawChars_(u,h,this.declutterGroup_),u=h}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),O=x.width/this.pixelRatio;switch(l){case f.default.POINT:case f.default.MULTI_POINT:h=(c=t.getFlatCoordinates()).length;break;case f.default.LINE_STRING:c=t.getFlatMidpoint();break;case f.default.CIRCLE:c=t.getCenter();break;case f.default.MULTI_LINE_STRING:h=(c=t.getFlatMidpoints()).length;break;case f.default.POLYGON:if(c=t.getFlatInteriorPoint(),!n.overflow&&c[2]/this.resolution<O)return;p=3;break;case f.default.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(c=[],s=0,a=E.length;s<a;s+=3)(n.overflow||E[s+2]/this.resolution>=O)&&c.push(E[s],E[s+1]);if(0==(h=c.length))return}h=this.appendFlatCoordinates(c,0,h,p,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,u,h),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,r,i){var o,s=i+e+t+r+this.pixelRatio;if(!b.labelCache.containsKey(s)){var a=i?this.strokeStates[i]||this.textStrokeState_:null,u=r?this.fillStates[r]||this.textFillState_:null,l=this.textStates[e]||this.textState_,c=this.pixelRatio,h=l.scale*c,p=P.b[l.textAlign||b.defaultTextAlign],f=i&&a.lineWidth?a.lineWidth:0,d=t.split("\n"),g=d.length,y=[],v=function(t,e,r){for(var i=e.length,n=0,o=0;o<i;++o){var s=Object(b.measureTextWidth)(t,e[o]);n=Math.max(n,s),r.push(s)}return n}(l.font,d,y),_=Object(b.measureTextHeight)(l.font),S=_*g,x=v+f,O=Object(n.createCanvasContext2D)(Math.ceil(x*h),Math.ceil((S+f)*h));o=O.canvas,b.labelCache.set(s,o),1!=h&&O.scale(h,h),O.font=l.font,i&&(O.strokeStyle=a.strokeStyle,O.lineWidth=f,O.lineCap=a.lineCap,O.lineJoin=a.lineJoin,O.miterLimit=a.miterLimit,m.CANVAS_LINE_DASH&&a.lineDash.length&&(O.setLineDash(a.lineDash),O.lineDashOffset=a.lineDashOffset)),r&&(O.fillStyle=u.fillStyle),O.textBaseline="middle",O.textAlign="center";var E,C=.5-p,T=p*o.width/h+C*f;if(i)for(E=0;E<g;++E)O.strokeText(d[E],T+C*y[E],.5*(f+_)+E*_);if(r)for(E=0;E<g;++E)O.fillText(d[E],T+C*y[E],.5*(f+_)+E*_)}return b.labelCache.get(s)},e.prototype.drawTextImage_=function(t,e,r){var i=this.textState_,n=this.textStrokeState_,o=this.pixelRatio,s=P.b[i.textAlign||b.defaultTextAlign],a=P.b[i.textBaseline],u=n&&n.lineWidth?n.lineWidth:0,l=s*t.width/o+2*(.5-s)*u,c=a*t.height/o+2*(.5-a)*u;this.instructions.push([T.DRAW_IMAGE,e,r,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,i.padding==b.defaultPadding?b.defaultPadding:i.padding.map(function(t){return t*o}),!!i.backgroundFill,!!i.backgroundStroke]),this.hitDetectionInstructions.push([T.DRAW_IMAGE,e,r,t,(l-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,i.padding,!!i.backgroundFill,!!i.backgroundStroke])},e.prototype.drawChars_=function(t,e,r){var i=this.textStrokeState_,n=this.textState_,o=this.textFillState_,s=this.strokeKey_;i&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:i.strokeStyle,lineCap:i.lineCap,lineDashOffset:i.lineDashOffset,lineWidth:i.lineWidth,lineJoin:i.lineJoin,miterLimit:i.miterLimit,lineDash:i.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||b.defaultTextAlign,scale:n.scale});var u=this.fillKey_;o&&(u in this.fillStates||(this.fillStates[u]={fillStyle:o.fillStyle}));var l=this.pixelRatio,c=P.b[n.textBaseline],h=this.textOffsetY_*l,p=this.text_,f=n.font,d=n.scale,g=i?i.lineWidth*d/2:0,y=this.widths_[f];y||(this.widths_[f]=y={}),this.instructions.push([T.DRAW_CHARS,t,e,c,r,n.overflow,u,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(b.measureTextWidth)(f,t)),e*d*l},h,s,g*l,p,a,1]),this.hitDetectionInstructions.push([T.DRAW_CHARS,t,e,c,r,n.overflow,u,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(b.measureTextWidth)(f,t)),e*d},h,s,g,p,a,1/l])},e.prototype.setTextStyle=function(t,e){var r,i,n;if(t){this.declutterGroup_=e;var o=t.getFill();o?((i=this.textFillState_)||(i=this.textFillState_={}),i.fillStyle=Object(h.asColorLike)(o.getColor()||b.defaultFillStyle)):i=this.textFillState_=null;var s=t.getStroke();if(s){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var a=s.getLineDash(),u=s.getLineDashOffset(),l=s.getWidth(),p=s.getMiterLimit();n.lineCap=s.getLineCap()||b.defaultLineCap,n.lineDash=a?a.slice():b.defaultLineDash,n.lineDashOffset=void 0===u?b.defaultLineDashOffset:u,n.lineJoin=s.getLineJoin()||b.defaultLineJoin,n.lineWidth=void 0===l?b.defaultLineWidth:l,n.miterLimit=void 0===p?b.defaultMiterLimit:p,n.strokeStyle=Object(h.asColorLike)(s.getColor()||b.defaultStrokeStyle)}else n=this.textStrokeState_=null;r=this.textState_;var f=t.getFont()||b.defaultFont;Object(b.checkFont)(f);var d=t.getScale();r.overflow=t.getOverflow(),r.font=f,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||b.defaultTextBaseline,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||b.defaultPadding,r.scale=void 0===d?1:d;var g=t.getOffsetX(),y=t.getOffsetY(),v=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===m?0:m,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:Object(c.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?"),this.fillKey_=i?"string"==typeof i.fillStyle?i.fillStyle:"|"+Object(c.getUid)(i.fillStyle):""}else this.text_=""},e}(R);r.d(e,"b",function(){return W});var B={Circle:F,Default:R,Image:M,LineString:A,Polygon:F,Text:G},U=function(t){function e(e,r,i,o,s,a,u){t.call(this),this.declutterTree_=a,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=r,this.overlaps_=s,this.pixelRatio_=o,this.resolution_=i,this.renderBuffer_=u,this.replaysByZIndex_={},this.hitDetectionContext_=Object(n.createCanvasContext2D)(1,1),this.hitDetectionTransform_=Object(w.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(o.createEmpty)()).push(1)),e},e.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var r=this.replaysByZIndex_[e],i=0,n=t.length;i<n;++i)if(t[i]in r)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var r in e)e[r].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,s,a,u){var c,h=2*(n=Math.round(n))+1,p=Object(w.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),f=this.hitDetectionContext_;f.canvas.width!==h||f.canvas.height!==h?(f.canvas.width=h,f.canvas.height=h):f.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(c=Object(o.createEmpty)(),Object(o.extendCoordinate)(c,t),Object(o.buffer)(c,e*(this.renderBuffer_+n),c));var d,g,y=function(t){if(void 0!==V[t])return V[t];for(var e=2*t+1,r=new Array(e),i=0;i<e;i++)r[i]=new Array(e);for(var n=t,o=0,s=0;n>=o;)z(r,t+n,t+o),z(r,t+o,t+n),z(r,t-o,t+n),z(r,t-n,t+o),z(r,t-n,t-o),z(r,t-o,t-n),z(r,t+o,t-n),z(r,t+n,t-o),2*((s+=1+2*++o)-n)+1>0&&(s+=1-2*(n-=1));return V[t]=r,r}(n);function v(t){for(var e=f.getImageData(0,0,h,h).data,r=0;r<h;r++)for(var i=0;i<h;i++)if(y[r][i]&&e[4*(i*h+r)+3]>0){var n=void 0;return(!d||g!=l.a.IMAGE&&g!=l.a.TEXT||-1!==d.indexOf(t))&&(n=a(t)),n||void f.clearRect(0,0,h,h)}}this.declutterTree_&&(d=this.declutterTree_.all().map(function(t){return t.value}));var m,_,b,S,x,O=Object.keys(this.replaysByZIndex_).map(Number);for(O.sort(i.i),m=O.length-1;m>=0;--m){var E=O[m].toString();for(b=this.replaysByZIndex_[E],_=P.a.length-1;_>=0;--_)if(void 0!==(S=b[g=P.a[_]]))if(!u||g!=l.a.IMAGE&&g!=l.a.TEXT){if(x=S.replayHitDetection(f,p,r,s,v,c))return x}else{var C=u[E];C?C.push(S,p.slice(0)):u[E]=[S,p.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,r=e[0],i=e[1],n=e[2],o=e[3],a=[r,i,r,o,n,o,n,i];return Object(s.c)(a,0,8,2,t,a),a},e.prototype.getReplay=function(t,e){var r=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[r];void 0===i&&(i={},this.replaysByZIndex_[r]=i);var n=i[e];return void 0===n&&(n=new(0,B[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[e]=n),n},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(a.isEmpty)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,r,n,o,s,a){var u=Object.keys(this.replaysByZIndex_).map(Number);u.sort(i.i),t.save(),this.clip(t,e);var c,h,p,f,d,g,y=s||P.a;for(c=0,h=u.length;c<h;++c){var v=u[c].toString();for(d=this.replaysByZIndex_[v],p=0,f=y.length;p<f;++p){var m=y[p];if(void 0!==(g=d[m]))if(!a||m!=l.a.IMAGE&&m!=l.a.TEXT)g.replay(t,e,r,n,o);else{var _=a[v];_?_.push(g,e.slice(0)):a[v]=[g,e.slice(0)]}}}t.restore()},e}(u.a),V={0:[[!0]]};function z(t,e,r){var i,n=Math.floor(t.length/2);if(e>=n)for(i=n;i<e;i++)t[i][r]=!0;else if(e<n)for(i=e+1;i<n;i++)t[i][r]=!0}function W(t,e,r,n){for(var o=Object.keys(t).map(Number).sort(i.i),s={},a=0,u=o.length;a<u;++a)for(var l=t[o[a].toString()],c=0,h=l.length;c<h;){var p=l[c++],f=l[c++];p.replay(e,f,r,s,n)}}e.a=U},function(t,e,r){"use strict";var i=r(3),n=r(102),o=r(42),s=r(92),a=r(159),u=r(155),l=["","unavailable","touch","pen","mouse"];function c(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function h(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function p(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function f(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function d(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function g(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function y(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function v(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var m=function(t){function e(e){var r={MSPointerDown:c,MSPointerMove:h,MSPointerUp:p,MSPointerOut:f,MSPointerOver:d,MSPointerCancel:g,MSGotPointerCapture:v,MSLostPointerCapture:y};t.call(this,e,r),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=l[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(u.a);function _(t){this.dispatcher.fireNativeEvent(t)}function b(t){this.dispatcher.fireNativeEvent(t)}function S(t){this.dispatcher.fireNativeEvent(t)}function x(t){this.dispatcher.fireNativeEvent(t)}function O(t){this.dispatcher.fireNativeEvent(t)}function E(t){this.dispatcher.fireNativeEvent(t)}function C(t){this.dispatcher.fireNativeEvent(t)}function T(t){this.dispatcher.fireNativeEvent(t)}var P=function(t){function e(e){var r={pointerdown:_,pointermove:b,pointerup:S,pointerout:x,pointerover:O,pointercancel:E,gotpointercapture:T,lostpointercapture:C};t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u.a),w=!1,I=function(t){function e(e,r,i){t.call(this,e),this.originalEvent=r;var n=i||{};this.buttons=function(t){var e;if(t.buttons||w)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(n),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(n,this.buttons),this.bubbles="bubbles"in n&&n.bubbles,this.cancelable="cancelable"in n&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey="ctrlKey"in n&&n.ctrlKey,this.altKey="altKey"in n&&n.altKey,this.shiftKey="shiftKey"in n&&n.shiftKey,this.metaKey="metaKey"in n&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary="isPrimary"in n&&n.isPrimary,r.preventDefault&&(this.preventDefault=function(){r.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(35).default);!function(){try{var t=new MouseEvent("click",{buttons:1});w=1===t.buttons}catch(t){}}();var L=I,R=r(15);function M(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function A(t){this.processTouches_(t,this.moveOverOut_)}function j(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function N(t){this.processTouches_(t,this.cancelOut_)}var F=function(t){function e(e,r){var i={touchstart:M,touchmove:A,touchend:j,touchcancel:N};t.call(this,e,i),this.pointerMap=e.pointerMap,this.mouseSource=r,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&a.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var r=this.dispatcher.cloneEvent(t,e);return r.pointerId=e.identifier+2,r.bubbles=!0,r.cancelable=!0,r.detail=this.clickCount_,r.button=0,r.buttons=1,r.width=e.radiusX||0,r.height=e.radiusY||0,r.pressure=e.force||.5,r.isPrimary=this.isPrimaryTouch_(e),r.pointerType="touch",r.clientX=e.clientX,r.clientY=e.clientY,r.screenX=e.screenX,r.screenY=e.screenY,r},e.prototype.processTouches_=function(t,e){var r=Array.prototype.slice.call(t.changedTouches),i=r.length;function n(){t.preventDefault()}for(var o=0;o<i;++o){var s=this.touchToPointer_(t,r[o]);s.preventDefault=n,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var r=t.length,i=0;i<r;i++)if(t[i].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,r=Object.keys(this.pointerMap),i=r.length;if(i>=e.length){for(var n=[],o=0;o<i;++o){var s=Number(r[o]),u=this.pointerMap[s];s==a.a||this.findTouch_(e,s-2)||n.push(u.out)}for(var l=0;l<n.length;++l)this.cancelOut_(t,n[l])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var r=e,i=this.pointerMap[r.pointerId];if(i){var n=i.out,o=i.outTarget;this.dispatcher.move(r,t),n&&o!==r.target&&(n.relatedTarget=r.target,r.relatedTarget=o,n.target=o,r.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(r,t)):(r.target=o,r.relatedTarget=null,this.cancelOut_(t,r))),i.out=r,i.outTarget=r.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,r=t.changedTouches[0];if(this.isPrimaryTouch_(r)){var i=[r.clientX,r.clientY];e.push(i),setTimeout(function(){Object(R.j)(e,i)},this.dedupTimeout_)}},e}(u.a),D=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],k=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(o.POINTER)this.registerSource("native",new P(this));else if(o.MSPOINTER)this.registerSource("ms",new m(this));else{var t=new a.c(this);this.registerSource("mouse",t),o.TOUCH&&this.registerSource("touch",new F(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var r=e,i=r.getEvents();i&&(i.forEach(function(t){var e=r.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(r))}.bind(this)),this.eventSourceList_.push(r))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var r=this.eventSourceList_[e];this.addEvents_(r.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var r=this.eventSourceList_[e];this.removeEvents_(r.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,r=this.eventMap_[e];r&&r(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(i.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(i.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var r={},i=0,n=D.length;i<n;i++){var o=D[i][0];r[o]=t[o]||e[o]||D[i][1]}return r},e.prototype.down=function(t,e){this.fireEvent(s.a.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(s.a.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(s.a.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(s.a.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(s.a.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(s.a.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(s.a.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(s.a.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,r){return new L(t,r,e)},e.prototype.fireEvent=function(t,e,r){var i=this.makeEvent(t,e,r);this.dispatchEvent(i)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Object(a.d)(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(n.a);e.a=k},function(t,e,r){"use strict";r.r(e),r.d(e,"render",function(){return b});var i=r(48),n=r(211),o=r(134),s=r(80),a=r(25),u=r(119),l=r(222),c=r(82),h=r(65),p=r(62),f=r(26),d=r(37),g=r(24),y=r(3),v=r(10),m=r(1),_=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),render:r.render||b,target:r.target}),this.collapsed_=void 0===r.collapsed||r.collapsed,this.collapsible_=void 0===r.collapsible||r.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==r.className?r.className:"ol-overviewmap",s=void 0!==r.tipLabel?r.tipLabel:"Overview map",a=void 0!==r.collapseLabel?r.collapseLabel:"«";"string"==typeof a?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;var u=void 0!==r.label?r.label:"»";"string"==typeof u?(this.label_=document.createElement("span"),this.label_.textContent=u):this.label_=u;var h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=s,p.appendChild(h),Object(y.listen)(p,v.default.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new n.default({controls:new i.default,interactions:new i.default,view:r.view});var f=this.ovmap_;r.layers&&r.layers.forEach(function(t){f.addLayer(t)}.bind(this));var g=document.createElement("div");g.className="ol-overviewmap-box",g.style.boxSizing="border-box",this.boxOverlay_=new l.default({position:[0,0],positioning:c.a.BOTTOM_LEFT,element:g}),this.ovmap_.addOverlay(this.boxOverlay_);var m=o+" "+d.e+" "+d.b+(this.collapsed_&&this.collapsible_?" "+d.a:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=m,_.appendChild(this.ovmapDiv_),_.appendChild(p);var S=this,x=this.boxOverlay_,O=this.boxOverlay_.getElement(),E=function(t){var e=function(t){return{clientX:t.clientX-O.offsetWidth/2,clientY:t.clientY+O.offsetHeight/2}}(t),r=f.getEventCoordinate(e);x.setPosition(r)},C=function(t){var e=f.getEventCoordinate(t);S.getMap().getView().setCenter(e),window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)};O.addEventListener("mousedown",function(){window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var i=r.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(y.listen)(e,u.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===s.a.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){Object(y.listen)(t,Object(a.getChangeEventType)(h.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){Object(y.unlisten)(t,Object(a.getChangeEventType)(h.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),i=t.getView().calculateExtent(r),n=e.getSize(),o=e.getView().calculateExtent(n),s=e.getPixelFromCoordinate(Object(m.getTopLeft)(i)),a=e.getPixelFromCoordinate(Object(m.getBottomRight)(i)),u=Math.abs(s[0]-a[0]),l=Math.abs(s[1]-a[1]),c=n[0],h=n[1];u<.1*c||l<.1*h||u>.75*c||l>.75*h?this.resetExtent_():Object(m.containsExtent)(o,i)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),i=t.getView().calculateExtent(r),n=e.getView(),o=Math.log(7.5)/Math.LN2,s=1/(.1*Math.pow(2,o/2));Object(m.scaleFromCenter)(i,s),n.fit(i)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenter(r.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),i=t.getView(),n=e.getView(),o=i.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),u=i.calculateExtent(r),l=n.getResolution(),c=Object(m.getBottomLeft)(u),h=Object(m.getTopRight)(u),p=this.calculateCoordinateRotate_(o,c);s.setPosition(p),a&&(a.style.width=Math.abs((c[0]-h[0])/l)+"px",a.style.height=Math.abs((h[1]-c[1])/l)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var r,i=this.getMap().getView().getCenter();return i&&(r=[e[0]-i[0],e[1]-i[1]],Object(f.rotate)(r,t),Object(f.add)(r,i)),r},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(d.a),this.collapsed_?Object(g.replaceNode)(this.collapseLabel_,this.label_):Object(g.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Object(y.listenOnce)(t,o.a.POSTRENDER,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(p.default);function b(t){this.validateExtent_(),this.updateBox_()}e.default=_},function(t,e){var r=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){t.exports={default:r(512),__esModule:!0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var i=r(146).f,n=r(161),o=r(106)("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttStruct=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};e.CAttStruct=o,i.Zondy.Object.CAttStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLineInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!==e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!==e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!==e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!==e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!==e.Yscale?e.Yscale:1};e.CLineInfo=o,i.Zondy.Object.CLineInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGraphicBase=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(22);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,i.default)(this,t);var r=void 0!==e?e:{};(0,s.extend)(this,r),this.GID=void 0!==r.GID&&null!==r.GID?r.GID:0}return(0,n.default)(t,[{key:"setGID",value:function(t){void 0!==t&&null!==t&&(this.GID=t)}}]),t}();e.FeatureGraphicBase=u,o.Zondy.Object.FeatureGraphicBase=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureSet=void 0;var i=r(6),n=r(22),o=(r(244),r(385)),s=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.TotalCount=void 0!==e.TotalCount&&null!==e.TotalCount?e.TotalCount:0,this.AttStruct=void 0!==e.AttStruct&&null!==e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!==e.SFEleArray?e.SFEleArray:new Array};s.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},s.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},s.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},s.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof o.Feature?e:new o.Feature(this.SFEleArray[t])},s.prototype.getAttType=function(t){var e;return null==this.AttStruct?null:null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},s.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,r=0;r<e;r++)if(this.AttStruct.FldName[r]==t)return r;return null},s.prototype.getAttNameByIndex=function(t){return null==this.AttStruct?null:null==this.AttStruct.FldName?null:this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},e.FeatureSet=s,i.Zondy.Object.FeatureSet=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameter=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(6),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{};return(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){var t="page="+this.pageIndex.toString();return t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),this.struct&&(t+="&structs="+(0,l.toJSON)(this.struct)),this.where&&(t+="&where="+this.where),this.rule&&(t+="&rule="+(0,l.toJSON)(this.rule)),this.objectIds&&(t+="&objectIds="+this.objectIds),this.orderField&&(t+="&orderField="+this.orderField),void 0!==this.rtnLabel&&(t+="&rtnLabel="+this.rtnLabel),this.fields&&(t+="&fields="+this.fields),void 0!==this.coordPrecision&&(t+="&coordPrecision="+this.coordPrecision),this.isAsc&&(t+="&isAsc="+this.isAsc),this.proj&&(t+="&srsIds="+this.proj),this.guid&&(t+="&guid="+this.guid),t+"&cursorType="+this.cursorType}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!==this.struct&&(t.structs=this.struct.toJSON()),null!==this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!==this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!==this.where&&(t.where=this.where),null!==this.rule&&(t.rule=this.rule.toJSON()),null!==this.orderField&&(t.orderField=this.orderField),null!==this.isAsc&&(t.isAsc=this.isAsc),t.cursorType=this.cursorType,t)}}]),e}(r(406).QueryParameterBase);e.QueryParameter=h,u.Zondy.Service.QueryParameter=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.desInfo=void 0!==r.desInfo?r.desInfo:null,s.attOptType=void 0!==r.attOptType?r.attOptType:1,s.infoOptType=void 0!==r.infoOptType?r.infoOptType:1,s.overType=void 0!==r.overType?r.overType:3,s.tolerance=void 0!==r.tolerance?r.tolerance:1e-4,s.isCleanNode=void 0!==r.isCleanNode&&r.isCleanNode,s.isLabelPnt=void 0!==r.isLabelPnt&&r.isLabelPnt,s.isValidReg=void 0!==r.isValidReg&&r.isValidReg,s}return(0,s.default)(e,t),e}(r(140).AnalysisBase);e.ClipBase=l,a.Zondy.Service.ClipBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPntInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CPntInfo=o,i.Zondy.Object.Theme.CPntInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoFeatureSource=void 0;var i=g(r(12)),n=g(r(8)),o=g(r(16)),s=g(r(13)),a=g(r(14)),u=r(6),l=r(436),c=r(22),h=r(100),p=r(208),f=r(247),d=r(205);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.cache=r.cache||{},o.cacheFields=r.cacheFields||[],o.style=r.style||{},o.maxCacheCount=r.maxCacheCount||0,o.isCustomSetMaxCacheCount=r.isCustomSetMaxCacheCount||!1,o.nodesClipPixel=r.nodesClipPixel||2,o.isHoverAble=r.isHoverAble||!1,o.isMultiHover=r.isMultiHover||!1,o.isClickAble=r.isClickAble||!0,o.highlightStyle=r.highlightStyle||null,o.isAllowFeatureStyle=r.isAllowFeatureStyle||!1,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.maxCacheCount=null,this.isCustomSetMaxCacheCount=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.cache=null,this.cacheFields=null,this.style=null,this.highlightStyle=null,this.isAllowFeatureStyle=null}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof f.FeatureSet){var e=null,r=t.AttStruct,i=t.SFEleArray;if(null!=i&&i.length>0)for(var n=0;n<i.length;n++){var o=i[n];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var s=0;s<o.AttValue.length;s++)e[r.FldName[s]]=o.AttValue[s];e.FID=o.FID}o.attributes=e,this.features.push(o)}}this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.changed()}},{key:"removeFeatures",value:function(t){this.clearCache(),l.ThemeSource.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),l.ThemeSource.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){var e=this.renderer.getHoverOne(),r=null;e&&e.refDataID&&(r=e.refDataID),this.renderer.clearAll();for(var i=this.features,n=this.cache,o=this.cacheFields,s=this.map.getView().getZoom(),a=this.maxCacheCount,u=new d.Rectangle(t[0],t[1],t[2],t[3]),l=0,c=i.length;l<c;l++){var h=i[l],p=h.bound;if(!u||u.intersectsBounds(p)){var f,g=h.FID+"_zoom_"+s.toString();if(n[g])n[g].updateAndAddShapes();else{if((f=this.createThematicFeature(i[l])).getShapesCount()<1)continue;if(n[g]=f,o.push(g),o.length>a){var y=o[0];o.splice(0,1),delete n[y]}}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var v=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(v)}}},{key:"createThematicFeature",value:function(t){var e=(0,c.copyAttributesWithClip)(this.style),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=h.ShapeFactory.transformStyle(this.highlightStyle);for(var i=new p.ThemeVector(t,this,h.ShapeFactory.transformStyle(e),r),n=0;n<i.shapes.length;n++)this.renderer.addShape(i.shapes[n]);return i}},{key:"canvasFunctionInternal_",value:function(t,e,r,i,n){return l.ThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var i=0,n=r.length;i<n;i++){var o=r[i];o.refDataID&&t===o.refDataID&&e.push(o)}return e}}]),e}(l.ThemeSource);e.GeoFeatureSource=y,u.Zondy.Source.GeoFeatureSource=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformable=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(115);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,i.default)(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="Zondy.LevelRenderer.Transformable",this.lookAt=function(){var t=s.SUtil.Util_vector.create();return function(e){this.transform||(this.transform=s.SUtil.Util_matrix.create());var r=this.transform;function i(t){return t>-5e-5&&t<5e-5}s.SUtil.Util_vector.sub(t,e,this.position),i(t[0])&&i(t[1])||(s.SUtil.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())}}()}return(0,n.default)(t,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||s.SUtil.Util_matrix.create();if(s.SUtil.Util_matrix.identity(e),this.needLocalTransform){if(n(this.scale[0])||n(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=n(t[0])||n(t[1]);r&&s.SUtil.Util_matrix.translate(e,e,t),s.SUtil.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],s.SUtil.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var i=n(t[0])||n(t[1]);i&&s.SUtil.Util_matrix.translate(e,e,t),s.SUtil.Util_matrix.rotate(e,e,this.rotation[0]),i&&(t[0]=-t[0],t[1]=-t[1],s.SUtil.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&s.SUtil.Util_matrix.rotate(e,e,this.rotation);(n(this.position[0])||n(this.position[1]))&&s.SUtil.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?s.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):s.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function n(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,i=this.scale,n=this.rotation;s(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];s(o-1)&&(o=Math.sqrt(o)),r[0]=t[4],r[1]=t[5],i[0]=e,i[1]=o,i[2]=i[3]=0,n[0]=Math.atan2(-t[1]/o,t[0]/e),n[1]=n[2]=0}function s(t){return t>5e-5||t<-5e-5}}}]),t}();e.Transformable=u,o.Zondy.LevelRenderer.Transformable=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curve=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(254);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,i.default)(this,t),this.vector=new s.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}return(0,n.default)(t,[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,i,n){var o=1-n;return o*o*(o*t+3*n*e)+n*n*(n*i+3*o*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,i,n){var o=1-n;return 3*(((e-t)*o+2*(r-e)*n)*o+(i-r)*n*n)}},{key:"cubicRootAt",value:function(t,e,r,i,n,o){var s=i+3*(e-r)-t,a=3*(r-2*e+t),u=3*(e-t),l=t-n,c=a*a-3*s*u,h=a*u-9*s*l,p=u*u-3*a*l,f=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(a))o[0]=0;else{var d=-u/a;d>=0&&d<=1&&(o[f++]=d)}else{var g=h*h-4*c*p;if(this.isAroundZero(g)){var y=h/c,v=-a/s+y,m=-y/2;v>=0&&v<=1&&(o[f++]=v),m>=0&&m<=1&&(o[f++]=m)}else if(g>0){var _=Math.sqrt(g),b=c*a+1.5*s*(-h+_),S=c*a+1.5*s*(-h-_),x=(-a-((b=b<0?-Math.pow(-b,this.ONE_THIRD):Math.pow(b,this.ONE_THIRD))+(S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))))/(3*s);x>=0&&x<=1&&(o[f++]=x)}else{var O=(2*c*a-3*s*h)/(2*Math.sqrt(c*c*c)),E=Math.acos(O)/3,C=Math.sqrt(c),T=Math.cos(E),P=(-a-2*C*T)/(3*s),w=(-a+C*(T+this.THREE_SQRT*Math.sin(E)))/(3*s),I=(-a+C*(T-this.THREE_SQRT*Math.sin(E)))/(3*s);P>=0&&P<=1&&(o[f++]=P),w>=0&&w<=1&&(o[f++]=w),I>=0&&I<=1&&(o[f++]=I)}}return f}},{key:"cubicExtrema",value:function(t,e,r,i,n){var o=6*r-12*e+6*t,s=9*e+3*i-3*t-9*r,a=3*e-3*t,u=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(o)){var l=-a/o;l>=0&&l<=1&&(n[u++]=l)}}else{var c=o*o-4*s*a;if(this.isAroundZero(c))n[0]=-o/(2*s);else if(c>0){var h=Math.sqrt(c),p=(-o+h)/(2*s),f=(-o-h)/(2*s);p>=0&&p<=1&&(n[u++]=p),f>=0&&f<=1&&(n[u++]=f)}}return u}},{key:"cubicSubdivide",value:function(t,e,r,i,n,o){var s=(e-t)*n+t,a=(r-e)*n+e,u=(i-r)*n+r,l=(a-s)*n+s,c=(u-a)*n+a,h=(c-l)*n+l;o[0]=t,o[1]=s,o[2]=l,o[3]=h,o[4]=h,o[5]=c,o[6]=u,o[7]=i}},{key:"cubicProjectPoint",value:function(t,e,r,i,n,o,s,a,u,l,c){var h,p=this.vector.create(),f=this.vector.create(),d=this.vector.create(),g=.005,y=1/0;p[0]=u,p[1]=l;for(var v=0;v<1;v+=.05){f[0]=this.cubicAt(t,r,n,s,v),f[1]=this.cubicAt(e,i,o,a,v);var m=this.vector.distSquare(p,f);m<y&&(h=v,y=m)}y=1/0;for(var _=0;_<32&&!(g<this.EPSILON);_++){var b=h-g,S=h+g;f[0]=this.cubicAt(t,r,n,s,b),f[1]=this.cubicAt(e,i,o,a,b);var x=this.vector.distSquare(f,p);if(b>=0&&x<y)h=b,y=x;else{d[0]=this.cubicAt(t,r,n,s,S),d[1]=this.cubicAt(e,i,o,a,S);var O=this.vector.distSquare(d,p);S<=1&&O<y?(h=S,y=O):g*=.5}}return c&&(c[0]=this.cubicAt(t,r,n,s,h),c[1]=this.cubicAt(e,i,o,a,h)),Math.sqrt(y)}},{key:"quadraticAt",value:function(t,e,r,i){var n=1-i;return n*(n*t+2*i*e)+i*i*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,i){return 2*((1-i)*(e-t)+i*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,i,n){var o=t-2*e+r,s=2*(e-t),a=t-i,u=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(s)){var l=-a/s;l>=0&&l<=1&&(n[u++]=l)}}else{var c=s*s-4*o*a;if(this.isAroundZero(c)){var h=-s/(2*o);h>=0&&h<=1&&(n[u++]=h)}else if(c>0){var p=Math.sqrt(c),f=(-s+p)/(2*o),d=(-s-p)/(2*o);f>=0&&f<=1&&(n[u++]=f),d>=0&&d<=1&&(n[u++]=d)}}return u}},{key:"quadraticExtremum",value:function(t,e,r){var i=t+r-2*e;return 0===i?.5:(t-e)/i}},{key:"quadraticProjectPoint",value:function(t,e,r,i,n,o,s,a,u){var l,c=this.vector.create(),h=this.vector.create(),p=this.vector.create(),f=.005,d=1/0;c[0]=s,c[1]=a;for(var g=0;g<1;g+=.05){h[0]=this.quadraticAt(t,r,n,g),h[1]=this.quadraticAt(e,i,o,g);var y=this.vector.distSquare(c,h);y<d&&(l=g,d=y)}d=1/0;for(var v=0;v<32&&!(f<this.EPSILON);v++){var m=l-f,_=l+f;h[0]=this.quadraticAt(t,r,n,m),h[1]=this.quadraticAt(e,i,o,m);var b=this.vector.distSquare(h,c);if(m>=0&&b<d)l=m,d=b;else{p[0]=this.quadraticAt(t,r,n,_),p[1]=this.quadraticAt(e,i,o,_);var S=this.vector.distSquare(p,c);_<=1&&S<d?(l=_,d=S):f*=.5}}return u&&(u[0]=this.quadraticAt(t,r,n,l),u[1]=this.quadraticAt(e,i,o,l)),Math.sqrt(d)}}]),t}();e.Curve=u,o.Zondy.LevelRenderer.Tool.Curve=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}return(0,n.default)(t,[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,i){return t[0]=e[0]+i*(r[0]-e[0]),t[1]=e[1]+i*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n+r[4],t[1]=r[1]*i+r[3]*n+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}]),t}();e.Vector=a,o.Zondy.LevelRenderer.Tool.Vector=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.x=isNaN(t)?0:t,o.y=isNaN(r)?0:r,o.r=6,o.CLASS_NAME="Zondy.Feature.ShapeParameters.Point",o}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Point=h,l.Zondy.Feature.ShapeParameters.Point=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.pointList=t,r.holePolygonPointLists=null,r.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Polygon=h,l.Zondy.Feature.ShapeParameters.Polygon=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sector=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o,a,u,l,c){(0,n.default)(this,e);var h=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l,c));return h.x=isNaN(t)?0:t,h.y=isNaN(r)?0:r,h.r=isNaN(o)?0:o,h.startAngle=isNaN(a)?0:a,h.endAngle=isNaN(u)?0:u,h.r0=isNaN(l)?0:l,h.clockWise=c,h.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector",h}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Sector=h,l.Zondy.Feature.ShapeParameters.Sector=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPolygon=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(22),h=r(108),p=r(115);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var i=!1;"fill"!==r.brushType&&"both"!==r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"===r.lineType||"dotted"===r.lineType||"dot"===r.lineType||"dash"===r.lineType||"dashot"===r.lineType||"longdash"===r.lineType||"longdashdot"===r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),i=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"===r.brushType||"both"===r.brushType)&&(i||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var n=(0,c.cloneObject)(r);if(n.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,s=o.length,a=0;a<s;a++){var u=o[a];n.pointList=u,t.globalCompositeOperation="destination-out",i=!1,"fill"!==n.brushType&&"both"!==n.brushType&&void 0!==n.brushType||(t.beginPath(),"dashed"===n.lineType||"dotted"===n.lineType||"dot"===n.lineType||"dash"===n.lineType||"dashot"===n.lineType||"longdash"===n.lineType||"longdashdot"===n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),i=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),n.lineWidth>0&&("stroke"===n.brushType||"both"===n.brushType)?(i||(t.beginPath(),this.buildPath(t,n)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=e.pointList;if(!(i.length<2))if(e.smooth&&"spline"!==e.smooth){var n,o,s,a=p.SUtil.SUtil_smoothBezier(i,e.smooth,!0,e.smoothConstraint,r);t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var u=i.length,l=0;l<u;l++)n=a[2*l],o=a[2*l+1],s=[i[(l+1)%u][0]+r[0],i[(l+1)%u][1]+r[1]],t.bezierCurveTo(n[0],n[1],o[0],o[1],s[0],s[1])}else if("spline"===e.smooth&&(i=p.SUtil.SUtil_smoothSpline(i,!0,null,r)),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=c;var h=e.lineWidth||1,f=h,d=h;"dashed"===e.lineType&&(f*=5,d*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=h,d+=h)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,d+=h),"dot"===e.lineType&&(d*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,d+=h)),"dash"===e.lineType&&(f*=4,d*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,d+=h)),"longdash"===e.lineType&&(f*=8,d*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,d+=h)),t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var g=1;g<i.length;g++)p.SUtil.SUtil_dashedLineTo(t,i[g-1][0]+r[0],i[g-1][1]+r[1],i[g][0]+r[0],i[g][1]+r[1],h,[f,d]);p.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+r[0],i[i.length-1][1]+r[1],i[0][0]+r[0],i[0][1]+r[1],h,[f,d])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var y=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=y;var v=e.lineWidth||1,m=v,_=v,b=v,S=v;"dashot"===e.lineType&&(m*=4,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),"longdashdot"===e.lineType&&(m*=8,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var x=1;x<i.length;x++)p.SUtil.SUtil_dashedLineTo(t,i[x-1][0]+r[0],i[x-1][1]+r[1],i[x][0]+r[0],i[x][1]+r[1],v,[m,_,b,S]);p.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+r[0],i[i.length-1][1]+r[1],i[0][0]+r[0],i[0][1]+r[1],v,[m,_,b,S])}}else{t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var O=1;O<i.length;O++)t.lineTo(i[O][0]+r[0],i[O][1]+r[1]);t.lineTo(i[0][0]+r[0],i[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var i,n=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<n&&(n=u[l][0]+r[0]),u[l][0]+r[0]>o&&(o=u[l][0]+r[0]),u[l][1]+r[1]<s&&(s=u[l][1]+r[1]),u[l][1]+r[1]>a&&(a=u[l][1]+r[1]);return i="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i/2),y:Math.round(s-i/2),width:o-n+i,height:a-s+i},t.__rect}}]),e}(h.Shape);e.SmicPolygon=d,l.Zondy.LevelRenderer.SmicPolygon=d},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(50),o=r(28),s=r(24),a=r(3),u=r(10),l=r(189),c=r.n(l),h=r(1),p=r(59),f=r(21),d=r(234),g=r(269),y=r(91),v=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?c()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(h.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(s.createCanvasContext2D)(),Object(a.listen)(f.labelCache,u.default.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(a.unlisten)(f.labelCache,u.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,r){var i=e.extent,n=e.pixelRatio,s=r.managed?e.skippedFeatureUids:{},a=e.viewState,u=a.projection,l=a.rotation,c=u.getExtent(),d=this.getLayer().getSource(),g=this.getTransform(e,0),y=r.extent,v=void 0!==y;v&&this.clip(t,e,y);var m=this.replayGroup_;if(m&&!m.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,b=this.getLayer(),S=0,x=0,O=1!==r.opacity,E=b.hasListener(p.a.RENDER);if(O||E){var C=t.canvas.width,T=t.canvas.height;if(l){var P=Math.round(Math.sqrt(C*C+T*T));S=(P-C)/2,x=(P-T)/2,C=T=P}this.context.canvas.width=C,this.context.canvas.height=T,_=this.context}else _=t;var w=_.globalAlpha;O||(_.globalAlpha=r.opacity),_!=t&&_.translate(S,x);var I=e.viewHints,L=!(I[o.default.ANIMATING]||I[o.default.INTERACTING]),R=e.size[0]*n,M=e.size[1]*n;if(Object(f.rotateAtOffset)(_,-l,R/2,M/2),m.replay(_,g,l,s,L),d.getWrapX()&&u.canWrapX()&&!Object(h.containsExtent)(c,i)){for(var A,j=i[0],N=Object(h.getWidth)(c),F=0;j<c[0];)A=N*--F,g=this.getTransform(e,A),m.replay(_,g,l,s,L),j+=N;for(F=0,j=i[2];j>c[2];)A=N*++F,g=this.getTransform(e,A),m.replay(_,g,l,s,L),j-=N}if(Object(f.rotateAtOffset)(_,l,R/2,M/2),E&&this.dispatchRenderEvent(_,e,g),_!=t){if(O){var D=t.globalAlpha;t.globalAlpha=r.opacity,t.drawImage(_.canvas,-S,-x),t.globalAlpha=D}else t.drawImage(_.canvas,-S,-x);_.translate(-S,-x)}O||(_.globalAlpha=w)}v&&t.restore()},e.prototype.composeFrame=function(t,e,r){var i=this.getTransform(t,0);this.preCompose(r,t,i),this.compose(r,t,e),this.postCompose(r,t,e,i)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o){if(this.replayGroup_){var s=e.viewState.resolution,a=e.viewState.rotation,u=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,r,{},function(t){var e=Object(i.getUid)(t);if(!(e in l))return l[e]=!0,n.call(o,t,u)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var r=this.getLayer(),i=r.getSource(),n=t.viewHints[o.default.ANIMATING],s=t.viewHints[o.default.INTERACTING],a=r.getUpdateWhileAnimating(),u=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&n||!u&&s)return!0;var l=t.extent,c=t.viewState,p=c.projection,f=c.resolution,g=t.pixelRatio,v=r.getRevision(),m=r.getRenderBuffer(),_=r.getRenderOrder();void 0===_&&(_=y.a);var b=Object(h.buffer)(l,m*f),S=c.projection.getExtent();if(i.getWrapX()&&c.projection.canWrapX()&&!Object(h.containsExtent)(S,t.extent)){var x=Object(h.getWidth)(S),O=Math.max(Object(h.getWidth)(b)/2,x);b[0]=S[0]-O,b[2]=S[2]+O}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==v&&this.renderedRenderOrder_==_&&Object(h.containsExtent)(this.renderedExtent_,b))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var E=new d.a(Object(y.c)(f,g),b,f,g,i.getOverlaps(),this.declutterTree_,r.getRenderBuffer());i.loadFeatures(b,f,p);var C=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,f)),e){var n=this.renderFeature(t,f,g,e,E);this.dirty_=this.dirty_||n}}.bind(this);if(_){var T=[];i.forEachFeatureInExtent(b,function(t){T.push(t)}),T.sort(_);for(var P=0,w=T.length;P<w;++P)C(T[P])}else i.forEachFeatureInExtent(b,C);return E.finish(),this.renderedResolution_=f,this.renderedRevision_=v,this.renderedRenderOrder_=_,this.renderedExtent_=b,this.replayGroup_=E,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,i,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=Object(y.d)(n,t,i[s],Object(y.b)(e,r),this.handleStyleImageChange_,this)||o;else o=Object(y.d)(n,t,i,Object(y.b)(e,r),this.handleStyleImageChange_,this);return o},e}(g.a);v.handles=function(t){return t.getType()===n.a.VECTOR},v.create=function(t,e){return new v(e)},e.default=v},function(t,e,r){"use strict";var i=r(42),n=r(31),o=r(111),s=r(3),a=r(102),u=r(92),l=r(235),c=function(t){function e(e,r){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=r?r*i.DEVICE_PIXEL_RATIO:i.DEVICE_PIXEL_RATIO,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new l.a(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(s.listen)(this.pointerEventHandler_,u.a.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(s.listen)(this.pointerEventHandler_,u.a.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new o.default(n.default.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new o.default(n.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new o.default(n.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==n.default.POINTERUP||e.type==n.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==n.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new o.default(n.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new o.default(n.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new l.a(document),this.dragListenerKeys_.push(Object(s.listen)(this.documentPointerEventHandler_,n.default.POINTERMOVE,this.handlePointerMove_,this),Object(s.listen)(this.documentPointerEventHandler_,n.default.POINTERUP,this.handlePointerUp_,this),Object(s.listen)(this.pointerEventHandler_,n.default.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new o.default(n.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new o.default(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(s.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(s.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(a.a);e.a=c},function(t,e,r){"use strict";function i(t,e,r,i,n,o){for(var s,a=[t[e],t[e+1]],u=[];e+i<r;e+=i){if(u[0]=t[e+i],u[1]=t[e+i+1],s=n.call(o,a,u))return s;a[0]=u[0],a[1]=u[1]}return!1}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,r){"use strict";function i(t,e,r,i){for(var n=t[e],o=t[e+1],s=0,a=e+i;a<r;a+=i){var u=t[a],l=t[a+1];s+=Math.sqrt((u-n)*(u-n)+(l-o)*(l-o)),n=u,o=l}return s}r.d(e,"a",function(){return i})},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(5),o=r(63),s=r(73),a=function(t){function e(e,r,i){if(t.call(this),void 0!==i&&void 0===r)this.setFlatCoordinates(i,e);else{var n=r||0;this.setCenterAndRadius(e,n,i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,i){var n=this.flatCoordinates,o=t-n[0],s=e-n[1],a=o*o+s*s;if(a<i){if(0===a)for(var u=0;u<this.stride;++u)r[u]=n[u];else{var l=this.getRadius()/Math.sqrt(a);r[0]=n[0]+l*o,r[1]=n[1]+l*s;for(var c=2;c<this.stride;++c)r[c]=n[c]}return r.length=this.stride,a}return i},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,i=t-r[0],n=e-r[1];return i*i+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Object(i.createOrUpdate)(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return n.default.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(i.intersects)(t,e)){var r=this.getCenter();return t[0]<=r[0]&&t[2]>=r[0]||t[1]<=r[1]&&t[3]>=r[1]||Object(i.forEachCorner)(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+r;for(var n=1;n<e;++n)i[e+n]=t[n];this.setFlatCoordinates(this.layout,i),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,n=Object(s.deflateCoordinate)(i,0,t,this.stride);i[n++]=i[0]+e;for(var o=1,a=this.stride;o<a;++o)i[n++]=i[o];i.length=n,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(o.default);a.prototype.transform,e.default=a},function(t,e,r){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e){var r=e||{};t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,atlasManager:r.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(r(340).default);e.default=i},function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r(1);function n(t,e,r,n){for(var o=[],s=Object(i.createEmpty)(),a=0,u=r.length;a<u;++a){var l=r[a];s=Object(i.createOrUpdateFromFlatCoordinates)(t,e,l[0],n),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return o}},function(t,e,r){"use strict";var i=r(4),n=r(26),o=r(24),s=r(1),a=r(269),u=r(18),l=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(u.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,r){this.preCompose(r,t);var i=this.getImage();if(i){var n=e.extent,o=void 0!==n&&!Object(s.containsExtent)(n,t.extent)&&Object(s.intersects)(n,t.extent);o&&this.clip(r,t,n);var a=this.getImageTransform(),u=r.globalAlpha;r.globalAlpha=e.opacity;var l=a[4],c=a[5],h=i.width*a[0],p=i.height*a[3];h>=.5&&p>=.5&&r.drawImage(i,0,0,+i.width,+i.height,Math.round(l),Math.round(c),Math.round(h),Math.round(p)),r.globalAlpha=u,o&&r.restore()}this.postCompose(r,t,e)},e.prototype.getImage=function(){return Object(i.abstract)()},e.prototype.getImageTransform=function(){return Object(i.abstract)()},e.prototype.forEachLayerAtCoordinate=function(t,e,r,i,s){if(this.getImage()){var a=Object(u.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(n.scale)(a,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(o.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),a[0],a[1],1,1,0,0,1,1);var l=this.hitCanvasContext_.getImageData(0,0,1,1).data;return l[3]>0?i.call(s,this.getLayer(),l):void 0}},e}(a.a);e.a=l},function(t,e,r){"use strict";var i=r(4),n=r(1),o=r(29),s=r(157),a=r(59),u=r(21),l=r(170),c=r(270),h=r(18),p=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(h.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,r){var i=e.pixelRatio,o=e.size[0]*i,s=e.size[1]*i,a=e.viewState.rotation,l=Object(n.getTopLeft)(r),c=Object(n.getTopRight)(r),p=Object(n.getBottomRight)(r),f=Object(n.getBottomLeft)(r);Object(h.a)(e.coordinateToPixelTransform,l),Object(h.a)(e.coordinateToPixelTransform,c),Object(h.a)(e.coordinateToPixelTransform,p),Object(h.a)(e.coordinateToPixelTransform,f),t.save(),Object(u.rotateAtOffset)(t,-a,o/2,s/2),t.beginPath(),t.moveTo(l[0]*i,l[1]*i),t.lineTo(c[0]*i,c[1]*i),t.lineTo(p[0]*i,p[1]*i),t.lineTo(f[0]*i,f[1]*i),t.clip(),Object(u.rotateAtOffset)(t,a,o/2,s/2)},e.prototype.dispatchComposeEvent_=function(t,e,r,i){var n=this.getLayer();if(n.hasListener(t)){var o=r.size[0]*r.pixelRatio,a=r.size[1]*r.pixelRatio,c=r.viewState.rotation;Object(u.rotateAtOffset)(e,-c,o/2,a/2);var h=void 0!==i?i:this.getTransform(r,0),p=new l.default(e,r.pixelRatio,r.extent,h,r.viewState.rotation),f=new s.a(t,p,r,e,null);n.dispatchEvent(f),Object(u.rotateAtOffset)(e,c,o/2,a/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,r,i,n){return this.forEachFeatureAtCoordinate(t,e,r,o.b)?i.call(n,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,r,i){this.dispatchComposeEvent_(a.a.POSTCOMPOSE,t,e,i)},e.prototype.preCompose=function(t,e,r){this.dispatchComposeEvent_(a.a.PRECOMPOSE,t,e,r)},e.prototype.dispatchRenderEvent=function(t,e,r){this.dispatchComposeEvent_(a.a.RENDER,t,e,r)},e.prototype.getTransform=function(t,e){var r=t.viewState,i=t.pixelRatio,n=i*t.size[0]/2,o=i*t.size[1]/2,s=i/r.resolution,a=-s,u=-r.rotation,l=-r.center[0]+e,c=-r.center[1];return Object(h.b)(this.transform_,n,o,s,a,u,l,c)},e.prototype.composeFrame=function(t,e,r){Object(i.abstract)()},e.prototype.prepareFrame=function(t,e){return Object(i.abstract)()},e}(c.a);e.a=p},function(t,e,r){"use strict";var i=r(4),n=r(27),o=r(150),s=r(17),a=r(3),u=r(10),l=r(43),c=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,r){return function(i,n){return t.forEachLoadedTile(e,i,n,function(t){r[i]||(r[i]={}),r[i][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===n.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=n.a.LOADED&&e!=n.a.ERROR&&Object(a.listen)(t,u.default.CHANGE,this.handleImageChange_,this),e==n.a.IDLE&&(t.load(),e=t.getState()),e==n.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==l.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=Object(i.getUid)(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r,n){var o=Object(i.getUid)(e),s=r.toString();o in t?s in t[o]?t[o][s].extend(n):t[o][s]=n:(t[o]={},t[o][s]=n)},e.prototype.manageTilePyramid=function(t,e,r,n,o,a,u,l,c,h){var p=Object(i.getUid)(e);p in t.wantedTiles||(t.wantedTiles[p]={});var f,d,g,y,v,m,_=t.wantedTiles[p],b=t.tileQueue;for(m=r.getMinZoom();m<=u;++m)for(d=r.getTileRangeForExtentAndZ(a,m,d),g=r.getResolution(m),y=d.minX;y<=d.maxX;++y)for(v=d.minY;v<=d.maxY;++v)u-m<=l?((f=e.getTile(m,y,v,n,o)).getState()==s.default.IDLE&&(_[f.getKey()]=!0,b.isKeyQueued(f.getKey())||b.enqueue([f,p,r.getTileCoordCenter(f.tileCoord),g])),void 0!==c&&c.call(h,f)):e.useTile(m,y,v,o)},e}(o.default);e.a=c},function(t,e,r){"use strict";var i=r(4),n=function(){};n.prototype.getReplay=function(t,e){return Object(i.abstract)()},n.prototype.isEmpty=function(){return Object(i.abstract)()},n.prototype.addDeclutter=function(t){return Object(i.abstract)()},e.a=n},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(1),o=r(5),s=r(267),a=r(172),u=r(87),l=r(9),c=r(52),h=r(18),p=Object(h.c)(),f=function(t,e,r,i,n){this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i};f.prototype.get=function(t){return this.properties_[t]},f.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===o.default.POINT?Object(n.createOrUpdateFromCoordinate)(this.flatCoordinates_):Object(n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},f.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Object(n.getCenter)(this.getExtent());this.flatInteriorPoints_=Object(a.a)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},f.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Object(s.a)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Object(a.b)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},f.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Object(u.a)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},f.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,o=r.length;n<o;++n){var s=r[n],a=Object(u.a)(t,e,s,2,.5);Object(i.c)(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_},f.prototype.getId=function(){return this.id_},f.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},f.prototype.getGeometry=function(){return this},f.prototype.getSimplifiedGeometry=function(t){return this},f.prototype.getProperties=function(){return this.properties_},f.prototype.getStride=function(){return 2},f.prototype.getStyleFunction=function(){},f.prototype.getType=function(){return this.type_},f.prototype.transform=function(t,e){var r=(t=Object(l.get)(t)).getExtent(),i=t.getWorldExtent(),o=Object(n.getHeight)(i)/Object(n.getHeight)(r);Object(h.b)(p,i[0],i[3],o,-o,0,0,0),Object(c.c)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)},f.prototype.getEnds=f.prototype.getEndss=function(){return this.ends_},f.prototype.getFlatCoordinates=f.prototype.getOrientedFlatCoordinates,e.default=f},function(t,e,r){"use strict";var i=r(23),n=function(t){function e(e,r){t.call(this,e),this.conditions=r,Object(i.a)(this.conditions.length>=2,57)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(132).a);e.a=n},function(t,e,r){"use strict";var i=r(1),n=r(19),o=r(9),s=function(t,e,r,n,s){this.sourceProj_=t,this.targetProj_=e;var a={},u=Object(o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=u(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Object(i.getWidth)(n)==Object(i.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(i.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(i.getWidth)(this.targetProj_.getExtent()):null;var l=Object(i.getTopLeft)(r),c=Object(i.getTopRight)(r),h=Object(i.getBottomRight)(r),p=Object(i.getBottomLeft)(r),f=this.transformInv_(l),d=this.transformInv_(c),g=this.transformInv_(h),y=this.transformInv_(p);if(this.addQuad_(l,c,h,p,f,d,g,y,10),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(t,e,r){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}};s.prototype.addTriangle_=function(t,e,r,i,n,o){this.triangles_.push({source:[i,n,o],target:[t,e,r]})},s.prototype.addQuad_=function(t,e,r,o,s,a,u,l,c){var h=Object(i.boundingExtent)([s,a,u,l]),p=this.sourceWorldWidth_?Object(i.getWidth)(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&p>.5&&p<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var y=Object(i.boundingExtent)([t,e,r,o]);g=Object(i.getWidth)(y)/this.targetWorldWidth_>.25||g}!d&&this.sourceProj_.isGlobal()&&p&&(g=p>.25||g)}if(g||!this.maxSourceExtent_||Object(i.intersects)(h,this.maxSourceExtent_)){if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(l[0])&&isFinite(l[1]))){if(!(c>0))return;g=!0}if(c>0){if(!g){var v,m=[(t[0]+r[0])/2,(t[1]+r[1])/2],_=this.transformInv_(m);v=d?(Object(n.d)(s[0],f)+Object(n.d)(u[0],f))/2-Object(n.d)(_[0],f):(s[0]+u[0])/2-_[0];var b=(s[1]+u[1])/2-_[1];g=v*v+b*b>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var S=[(e[0]+r[0])/2,(e[1]+r[1])/2],x=this.transformInv_(S),O=[(o[0]+t[0])/2,(o[1]+t[1])/2],E=this.transformInv_(O);this.addQuad_(t,e,S,O,s,a,x,E,c-1),this.addQuad_(O,S,r,o,E,x,u,l,c-1)}else{var C=[(t[0]+e[0])/2,(t[1]+e[1])/2],T=this.transformInv_(C),P=[(r[0]+o[0])/2,(r[1]+o[1])/2],w=this.transformInv_(P);this.addQuad_(t,C,P,o,s,T,w,l,c-1),this.addQuad_(C,e,r,P,T,a,u,w,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,o,s,u,l),this.addTriangle_(t,e,r,s,a,u)}},s.prototype.calculateSourceExtent=function(){var t=Object(i.createEmpty)();return this.triangles_.forEach(function(e,r,n){var o=e.source;Object(i.extendCoordinate)(t,o[0]),Object(i.extendCoordinate)(t,o[1]),Object(i.extendCoordinate)(t,o[2])}),t},s.prototype.getTriangles=function(){return this.triangles_},e.a=s},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e){t.call(this,"And",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(273).a),n=r(346),o=r(347),s=r(359),a=r(350),u=r(354),l=r(355),c=r(348),h=r(357),p=r(358),f=r(356),d=r(352),g=r(353),y=r(345),v=r(351),m=r(344),_=r(349);function b(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(i,e))}function S(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(m.default,e))}function x(t){return new y.default(t)}function O(t,e,r){return new n.default(t,e,r)}function E(t,e,r){return new o.default(t,e,r)}function C(t,e,r){return new c.default(t,e,r)}function T(t,e,r){return new _.default(t,e,r)}function P(t,e,r){return new a.default(t,e,r)}function w(t,e,r){return new v.default(t,e,r)}function I(t,e){return new d.default(t,e)}function L(t,e){return new g.default(t,e)}function R(t,e){return new u.default(t,e)}function M(t,e){return new l.default(t,e)}function A(t){return new f.default(t)}function j(t,e,r){return new h.default(t,e,r)}function N(t,e,r,i,n,o){return new p.default(t,e,r,i,n,o)}function F(t,e,r){return new s.default(t,e,r)}r.d(e,"and",function(){return b}),r.d(e,"or",function(){return S}),r.d(e,"not",function(){return x}),r.d(e,"bbox",function(){return O}),r.d(e,"contains",function(){return E}),r.d(e,"intersects",function(){return C}),r.d(e,"within",function(){return T}),r.d(e,"equalTo",function(){return P}),r.d(e,"notEqualTo",function(){return w}),r.d(e,"lessThan",function(){return I}),r.d(e,"lessThanOrEqualTo",function(){return L}),r.d(e,"greaterThan",function(){return R}),r.d(e,"greaterThanOrEqualTo",function(){return M}),r.d(e,"isNull",function(){return A}),r.d(e,"between",function(){return j}),r.d(e,"like",function(){return N}),r.d(e,"during",function(){return F})},function(t,e,r){"use strict";r.r(e);var i=r(25),n=r(3),o=r(35),s=r(10),a=r(34),u=r(42),l=r(19),c=r(9),h={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},p=function(t){function e(e){t.call(this,s.default.ERROR),this.code=e.code,this.message=e.message}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default),f=function(t){function e(e){t.call(this);var r=e||{};this.position_=null,this.transform_=c.identityTransform,this.watchId_=void 0,Object(n.listen)(this,Object(i.getChangeEventType)(h.PROJECTION),this.handleProjectionChanged_,this),Object(n.listen)(this,Object(i.getChangeEventType)(h.TRACKING),this.handleTrackingChanged_,this),void 0!==r.projection&&this.setProjection(r.projection),void 0!==r.trackingOptions&&this.setTrackingOptions(r.trackingOptions),this.setTracking(void 0!==r.tracking&&r.tracking)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Object(c.getTransformFromProjections)(Object(c.get)("EPSG:4326"),t),this.position_&&this.set(h.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(u.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(h.ACCURACY,e.accuracy),this.set(h.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(h.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(h.HEADING,null===e.heading?void 0:Object(l.j)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(h.POSITION,r),this.set(h.SPEED,null===e.speed?void 0:e.speed);var i=Object(a.circular)(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set(h.ACCURACY_GEOMETRY,i),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new p(t))},e.prototype.getAccuracy=function(){return this.get(h.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(h.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(h.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(h.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(h.HEADING)},e.prototype.getPosition=function(){return this.get(h.POSITION)},e.prototype.getProjection=function(){return this.get(h.PROJECTION)},e.prototype.getSpeed=function(){return this.get(h.SPEED)},e.prototype.getTracking=function(){return this.get(h.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(h.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(h.PROJECTION,Object(c.get)(t))},e.prototype.setTracking=function(t){this.set(h.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(h.TRACKING_OPTIONS,t)},e}(i.default);e.default=f},function(t,e,r){"use strict";r.r(e);var i=r(29),n=r(3),o=r(35),s=r(10),a=r(41),u=r(9),l=function(t){function e(e,r,i,n){t.call(this,e),this.features=i,this.file=r,this.projection=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default),c=function(t){function e(e){var r=e||{};t.call(this,{handleEvent:i.b}),this.formatConstructors_=r.formatConstructors?r.formatConstructors:[],this.projection_=r.projection?Object(u.get)(r.projection):null,this.dropListenKeys_=null,this.source_=r.source||null,this.target=r.target?r.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var r=e.target.result,i=this.getMap(),n=this.projection_;n||(n=i.getView().getProjection());for(var o=this.formatConstructors_,s=[],a=0,u=o.length;a<u;++a){var c=new o[a];if((s=this.tryReadFeatures_(c,r,{featureProjection:n}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new l("addfeatures",t,s,n))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(n.listen)(e,s.default.DROP,h,this),Object(n.listen)(e,s.default.DRAGENTER,p,this),Object(n.listen)(e,s.default.DRAGOVER,p,this),Object(n.listen)(e,s.default.DROP,p,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(n.unlistenByKey),this.dropListenKeys_=null)},e}(a.default);function h(t){for(var e=t.dataTransfer.files,r=0,i=e.length;r<i;++r){var n=e.item(r),o=new FileReader;o.addEventListener(s.default.LOAD,this.handleResult_.bind(this,n)),o.readAsText(n)}}function p(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(121),n=r(28),o=r(32),s=r(41),a=function(t){function e(e){var r=e||{};t.call(this,r),this.condition_=r.condition?r.condition:o.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==r.duration?r.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(o.mouseOnly)(t)){var e=t.map,r=e.getSize(),n=t.pixel,a=n[0]-r[0]/2,u=r[1]/2-n[1],l=Math.atan2(u,a),c=Math.sqrt(a*a+u*u),h=e.getView();if(h.getConstraints().rotation!==i.c&&void 0!==this.lastAngle_){var p=l-this.lastAngle_;Object(s.rotateWithoutConstraints)(h,h.getRotation()-p)}if(this.lastAngle_=l,void 0!==this.lastMagnitude_){var f=this.lastMagnitude_*(h.getResolution()/c);Object(s.zoomWithoutConstraints)(h,f)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/c),this.lastMagnitude_=c}},e.prototype.handleUpEvent=function(t){if(!Object(o.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(n.default.INTERACTING,-1);var r=this.lastScaleDelta_-1;return Object(s.rotate)(e,e.getRotation()),Object(s.zoom)(e,e.getResolution(),void 0,this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Object(o.mouseOnly)(t)&&!!this.condition_(t)&&(t.map.getView().setHint(n.default.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(r(47).default);e.default=a},function(t,e,r){"use strict";r.r(e),r.d(e,"createRegularPolygon",function(){return M}),r.d(e,"createBox",function(){return A});var i=r(10),n=r(36),o=r(31),s=r(111),a=r(25),u=r(26),l=r(3),c=r(35),h=r(32),p=r(1),f=r(29),d=r(264),g=r(5),y=r(39),v=r(56),m=r(68),_=r(74),b=r(159),S=r(38),x=r(34),O=r(47),E=r(173),C=r(97),T=r(110),P=r(70),w={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I="drawstart",L=function(t){function e(e,r){t.call(this,e),this.feature=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.default),R=function(t){function e(e){var r=e;r.stopDown||(r.stopDown=f.a),t.call(this,r),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===g.default.POINT||t===g.default.MULTI_POINT?e=w.POINT:t===g.default.LINE_STRING||t===g.default.MULTI_LINE_STRING?e=w.LINE_STRING:t===g.default.POLYGON||t===g.default.MULTI_POLYGON?e=w.POLYGON:t===g.default.CIRCLE&&(e=w.CIRCLE),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===w.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:f.b;var i=e.geometryFunction;if(!i)if(this.type_===g.default.CIRCLE)i=function(t,e){var r=e||new d.default([NaN,NaN]),i=Object(u.squaredDistance)(t[0],t[1]);return r.setCenterAndRadius(t[0],Math.sqrt(i)),r};else{var n,o=this.mode_;o===w.POINT?n=S.default:o===w.LINE_STRING?n=y.default:o===w.POLYGON&&(n=x.default),i=function(t,e){var r=e;return r?o===w.POLYGON?t[0].length?r.setCoordinates([t[0].concat([t[0][0]])]):r.setCoordinates([]):r.setCoordinates(t):r=new n(t),r}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new C.default({source:new T.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:function(){var t=Object(P.createEditingStyle)();return function(e,r){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:h.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=h.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:h.shiftKeyOnly,Object(l.listen)(this,Object(a.getChangeEventType)(E.a.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===i.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==w.POINT&&this.freehandCondition_(e);var r=e.type===o.default.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===o.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===o.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),n=!1):this.freehand_&&e.type===o.default.POINTERDOWN?n=!1:r?(n=e.type===o.default.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):(e.pointerEvent.pointerType==b.b||e.type===o.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===o.default.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.default(o.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.mode_===w.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===w.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,i=e[0]-r[0],n=e[1]-r[1],o=i*i+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,i=[this.finishCoordinate_];if(this.mode_===w.LINE_STRING)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===w.POLYGON){var n=this.sketchCoords_;r=n[0].length>this.minPoints_,i=[n[0][0],n[0][n[0].length-2]]}if(r)for(var o=t.map,s=0,a=i.length;s<a;s++){var u=i[s],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],p=c[1]-l[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+p*p)<=f){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new n.default(new S.default(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===w.POINT?this.sketchCoords_=e.slice():this.mode_===w.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new n.default(new y.default(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new n.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new L(I,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,i,o=t.coordinate,s=this.sketchFeature_.getGeometry();if(this.mode_===w.POINT?r=this.sketchCoords_:this.mode_===w.POLYGON?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=o[0],r[1]=o[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(o),s.getType()==g.default.POLYGON&&this.mode_!==w.POLYGON){this.sketchLine_||(this.sketchLine_=new n.default);var a=s.getLinearRing(0);(i=this.sketchLine_.getGeometry())?(i.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),i.changed()):(i=new y.default(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(i))}else this.sketchLineCoords_&&(i=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,i=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===w.LINE_STRING?(this.finishCoordinate_=i.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(i.slice()),this.geometryFunction_(r,n)):this.mode_===w.POLYGON&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(i.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===w.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===w.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry();this.mode_===w.LINE_STRING?(e.pop(),this.geometryFunction_(e,r)):this.mode_===w.POLYGON&&(e[0].pop(),this.geometryFunction_(e,r),e=r.getCoordinates()),this.type_===g.default.MULTI_POINT?t.setGeometry(new m.default([e])):this.type_===g.default.MULTI_LINE_STRING?t.setGeometry(new v.default([e])):this.type_===g.default.MULTI_POLYGON&&t.setGeometry(new _.default([e])),this.dispatchEvent(new L("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new L(I,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(O.default);function M(t,e){return function(r,i){var n=r[0],o=r[1],s=Math.sqrt(Object(u.squaredDistance)(n,o)),a=i||Object(x.fromCircle)(new d.default(n),t),l=e;if(!e){var c=o[0]-n[0],h=o[1]-n[1];l=Math.atan(h/c)-(c<0?Math.PI:0)}return Object(x.makeRegular)(a,n,s,l),a}}function A(){return function(t,e){var r=Object(p.boundingExtent)(t),i=[[Object(p.getBottomLeft)(r),Object(p.getBottomRight)(r),Object(p.getTopRight)(r),Object(p.getTopLeft)(r),Object(p.getBottomLeft)(r)]],n=e;return n?n.setCoordinates(i):n=new x.default(i),n}}e.default=R},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(31),o=r(26),s=r(35),a=r(1),u=r(5),l=r(38),c=r(34),h=r(47),p=r(97),f=r(110),d=r(70),g={EXTENTCHANGED:"extentchanged"},y=function(t){function e(e){t.call(this,g.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),v=function(t){function e(e){var r=e||{};t.call(this,r),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new p.default({source:new f.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:function(){var t=Object(d.createEditingStyle)();return function(e,r){return t[u.default.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new p.default({source:new f.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Object(d.createEditingStyle)();return function(e,r){return t[u.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixel(t),i=this.getExtent();if(i){var n=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(i);n.sort(function(t,e){return Object(o.squaredDistanceToSegment)(r,t)-Object(o.squaredDistanceToSegment)(r,e)});var s=n[0],a=Object(o.closestOnSegment)(r,s),u=e.getPixelFromCoordinate(a);if(Object(o.distance)(t,u)<=this.pixelTolerance_){var l=e.getPixelFromCoordinate(s[0]),c=e.getPixelFromCoordinate(s[1]),h=Object(o.squaredDistance)(u,l),p=Object(o.squaredDistance)(u,c),f=Math.sqrt(Math.min(h,p));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=h>p?s[1]:s[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,i=this.snapToVertex_(e,r);i||(i=r.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(i)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(c.fromExtent)(t)):e.setGeometry(void 0):(e=t?new i.default(Object(c.fromExtent)(t)):new i.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new i.default(new l.default(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=n.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,i=this.getExtent(),n=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==i[0]?e=i[2]:t[0]==i[2]&&(e=i[0]),t[1]==i[1]?r=i[3]:t[1]==i[3]&&(r=i[1]),null!==e&&null!==r?[e,r]:null};if(n&&i){var s=n[0]==i[0]||n[0]==i[2]?n[0]:null,a=n[1]==i[1]||n[1]==i[3]?n[1]:null;null!==s&&null!==a?this.pointerHandler_=m(o(n)):null!==s?this.pointerHandler_=_(o([s,i[1]]),o([s,i[3]])):null!==a&&(this.pointerHandler_=_(o([i[0],a]),o([i[2],a])))}else n=r.getCoordinateFromPixel(e),this.setExtent([n[0],n[1],n[0],n[1]]),this.pointerHandler_=m(n);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(a.getArea)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new y(this.extent_))},e}(h.default);function m(t){return function(e){return Object(a.boundingExtent)([t,e])}}function _(t,e){return t[0]==e[0]?function(r){return Object(a.boundingExtent)([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return Object(a.boundingExtent)([t,[e[0],r[1]]])}:null}e.default=v},function(t,e,r){"use strict";r.r(e),r.d(e,"ModifyEvent",function(){return C});var i=r(4),n=r(48),o=r(51),s=r(36),a=r(31),u=r(15),l=r(26),c=r(3),h=r(35),p=r(10),f=r(32),d=r(1),g=r(5),y=r(38),v=r(47),m=r(97),_=r(110),b=r(105),S=r(120),x=r(70),O=1,E="modifyend",C=function(t){function e(e,r,i){t.call(this,e),this.features=r,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default),T=function(t){function e(e){var r;if(t.call(this,e),this.condition_=e.condition?e.condition:f.primaryAction,this.defaultDeleteCondition_=function(t){return Object(f.altKeyOnly)(t)&&Object(f.singleClick)(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:f.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new S.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new m.default({source:new _.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:function(){var t=Object(x.createEditingStyle)();return function(e,r){return t[g.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,r=new n.default(this.source_.getFeatures()),Object(c.listen)(this.source_,b.a.ADDFEATURE,this.handleSourceAdd_,this),Object(c.listen)(this.source_,b.a.REMOVEFEATURE,this.handleSourceRemove_,this)):r=e.features,!r)throw new Error("The modify interaction requires features or a source");this.features_=r,this.features_.forEach(this.addFeature_.bind(this)),Object(c.listen)(this.features_,o.default.ADD,this.handleFeatureAdd_,this),Object(c.listen)(this.features_,o.default.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),Object(c.listen)(t,p.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new C("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(c.unlisten)(t,p.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach(function(e){t===e.feature&&r.push(e)});for(var i=r.length-1;i>=0;--i)e.remove(r[i])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),i={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:o};this.rBush_.insert(Object(d.boundingExtent)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(d.boundingExtent)(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:u};this.rBush_.insert(Object(d.boundingExtent)(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length;s<a;++s)for(var u=o[s],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),p={feature:t,geometry:e,depth:[s,i],index:l,segment:h};this.rBush_.insert(Object(d.boundingExtent)(h),p)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[r,r]},n={feature:t,geometry:e,index:O,segment:[r,r]},o=[i,n];i.featureSegments=n.featureSegments=o,this.rBush_.insert(Object(d.createOrUpdateFromCoordinate)(r),i),this.rBush_.insert(e.getExtent(),n)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),i=0;i<r.length;++i)this.SEGMENT_WRITERS_[r[i].getType()].call(this,t,r[i])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new s.default(new y.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=a.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,i=this.dragSegments_.length;r<i;++r){for(var n=this.dragSegments_[r],o=n[0],s=o.depth,a=o.geometry,u=void 0,c=o.segment,h=n[1];e.length<a.getStride();)e.push(c[h][e.length]);switch(a.getType()){case g.default.POINT:u=e,c[0]=c[1]=e;break;case g.default.MULTI_POINT:(u=a.getCoordinates())[o.index]=e,c[0]=c[1]=e;break;case g.default.LINE_STRING:(u=a.getCoordinates())[o.index+h]=e,c[h]=e;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(u=a.getCoordinates())[s[0]][o.index+h]=e,c[h]=e;break;case g.default.MULTI_POLYGON:(u=a.getCoordinates())[s[1]][s[0]][o.index+h]=e,c[h]=e;break;case g.default.CIRCLE:c[0]=c[1]=e,0===o.index?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius(Object(l.distance)(a.getCenter(),e)),this.changingFeature_=!1)}u&&this.setGeometryCoordinates_(a,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=[],o=r.getGeometry().getCoordinates(),s=Object(d.boundingExtent)([o]),a=this.rBush_.getInExtent(s),u={};a.sort(P);for(var c=0,h=a.length;c<h;++c){var p=a[c],f=p.segment,y=Object(i.getUid)(p.feature),v=p.depth;if(v&&(y+="-"+v.join("-")),u[y]||(u[y]=new Array(2)),p.geometry.getType()===g.default.CIRCLE&&p.index===O){var m=I(e,p);Object(l.equals)(m,o)&&!u[y][0]&&(this.dragSegments_.push([p,0]),u[y][0]=p)}else if(Object(l.equals)(f[0],o)&&!u[y][0])this.dragSegments_.push([p,0]),u[y][0]=p;else if(Object(l.equals)(f[1],o)&&!u[y][1]){if((p.geometry.getType()===g.default.LINE_STRING||p.geometry.getType()===g.default.MULTI_LINE_STRING)&&u[y][0]&&0===u[y][0].index)continue;this.dragSegments_.push([p,1]),u[y][1]=p}else this.insertVertexCondition_(t)&&Object(i.getUid)(f)in this.vertexSegments_&&!u[y][0]&&!u[y][1]&&n.push([p,o])}n.length&&this.willModifyFeatures_(t);for(var _=n.length-1;_>=0;--_)this.insertVertex_.apply(this,n[_])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],i=r.geometry;if(i.getType()===g.default.CIRCLE){var n=i.getCenter(),o=r.featureSegments[0],s=r.featureSegments[1];o.segment[0]=o.segment[1]=n,s.segment[0]=s.segment[1]=n,this.rBush_.update(Object(d.createOrUpdateFromCoordinate)(n),o),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update(Object(d.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new C(E,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var r=e.getCoordinateFromPixel(t),n=Object(d.buffer)(Object(d.createOrUpdateFromCoordinate)(r),e.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(n);if(o.length>0){o.sort(function(t,e){return w(r,t)-w(r,e)});var s=o[0],a=s.segment,u=I(r,s),c=e.getPixelFromCoordinate(u),h=Object(l.distance)(t,c);if(h<=this.pixelTolerance_){var p={};if(s.geometry.getType()===g.default.CIRCLE&&s.index===O)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u);else{var f=e.getPixelFromCoordinate(a[0]),y=e.getPixelFromCoordinate(a[1]),v=Object(l.squaredDistance)(c,f),m=Object(l.squaredDistance)(c,y);h=Math.sqrt(Math.min(v,m)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(u=v>m?a[1]:a[0]),this.createOrUpdateVertexFeature_(u);for(var _=1,b=o.length;_<b;++_){var S=o[_].segment;if(!(Object(l.equals)(a[0],S[0])&&Object(l.equals)(a[1],S[1])||Object(l.equals)(a[0],S[1])&&Object(l.equals)(a[1],S[0])))break;p[Object(i.getUid)(S)]=!0}}return p[Object(i.getUid)(a)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,i=t.segment,n=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case g.default.MULTI_POLYGON:(r=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case g.default.LINE_STRING:(r=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,a,s,1);var l={segment:[i[0],e],feature:n,geometry:o,depth:s,index:a};u.insert(Object(d.boundingExtent)(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,i[1]],feature:n,geometry:o,depth:s,index:a+1};u.insert(Object(d.boundingExtent)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.default.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new C(E,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,o,s,a,u,l,c,h,p=this.dragSegments_,f={},y=!1;for(o=p.length-1;o>=0;--o)c=(r=p[o])[0],h=Object(i.getUid)(c.feature),c.depth&&(h+="-"+c.depth.join("-")),h in f||(f[h]={}),0===r[1]?(f[h].right=c,f[h].index=c.index):1==r[1]&&(f[h].left=c,f[h].index=c.index+1);for(h in f){switch(l=f[h].right,a=f[h].left,u=(s=f[h].index)-1,c=void 0!==a?a:l,u<0&&(u=0),t=e=(n=c.geometry).getCoordinates(),y=!1,n.getType()){case g.default.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(s,1),y=!0);break;case g.default.LINE_STRING:e.length>2&&(e.splice(s,1),y=!0);break;case g.default.MULTI_POLYGON:t=t[c.depth[1]];case g.default.POLYGON:(t=t[c.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),y=!0,0===s&&(t.pop(),t.push(t[0]),u=t.length-1))}if(y){this.setGeometryCoordinates_(n,e);var v=[];if(void 0!==a&&(this.rBush_.remove(a),v.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),v.push(l.segment[1])),void 0!==a&&void 0!==l){var m={depth:c.depth,feature:c.feature,geometry:c.geometry,index:u,segment:v};this.rBush_.insert(Object(d.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(n,s,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return y},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,i){this.rBush_.forEachInExtent(t.getExtent(),function(n){n.geometry===t&&(void 0===r||void 0===n.depth||Object(u.b)(n.depth,r))&&n.index>e&&(n.index+=i)})},e}(v.default);function P(t,e){return t.index-e.index}function w(t,e){var r=e.geometry;if(r.getType()===g.default.CIRCLE){var i=r;if(e.index===O){var n=Object(l.squaredDistance)(i.getCenter(),t),o=Math.sqrt(n)-i.getRadius();return o*o}}return Object(l.squaredDistanceToSegment)(t,e.segment)}function I(t,e){var r=e.geometry;return r.getType()===g.default.CIRCLE&&e.index===O?r.getClosestPoint(t):Object(l.closestOnSegment)(t,e.segment)}e.default=T},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(51),o=r(15),s=r(3),a=r(35),u=r(32),l=r(29),c=r(5),h=r(41),p=r(97),f=r(11),d=r(110),g=r(70),y={SELECT:"select"},v=function(t){function e(e,r,i,n){t.call(this,e),this.selected=r,this.deselected=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),m=function(t){function e(e){t.call(this,{handleEvent:_});var r=e||{};this.condition_=r.condition?r.condition:u.singleClick,this.addCondition_=r.addCondition?r.addCondition:u.never,this.removeCondition_=r.removeCondition?r.removeCondition:u.never,this.toggleCondition_=r.toggleCondition?r.toggleCondition:u.shiftKeyOnly,this.multi_=!!r.multi&&r.multi,this.filter_=r.filter?r.filter:l.b,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0;var i,a=new p.default({source:new d.default({useSpatialIndex:!1,features:r.features,wrapX:r.wrapX}),style:r.style?r.style:function(){var t=Object(g.createEditingStyle)();return Object(o.c)(t[c.default.POLYGON],t[c.default.LINE_STRING]),Object(o.c)(t[c.default.GEOMETRY_COLLECTION],t[c.default.LINE_STRING]),function(e,r){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=a,r.layers)if("function"==typeof r.layers)i=r.layers;else{var h=r.layers;i=function(t){return Object(o.f)(h,t)}}else i=l.b;this.layerFilter_=i,this.featureLayerAssociation_={};var f=this.getFeatures();Object(s.listen)(f,n.default.ADD,this.addFeature_,this),Object(s.listen)(f,n.default.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(i.getUid)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(i.getUid)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap(),i=this.getFeatures();r&&i.forEach(r.unskipFeature.bind(r)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&i.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(i.getUid)(t)]},e}(h.default);function _(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),i=this.toggleCondition_(t),n=!e&&!r&&!i,s=t.map,a=this.getFeatures(),l=[],c=[];if(n){Object(f.clear)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return c.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=a.getLength()-1;h>=0;--h){var p=a.item(h),d=c.indexOf(p);d>-1?c.splice(d,1):(a.remove(p),l.push(p))}0!==c.length&&a.extend(c)}else{s.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.filter_(t,n))return!e&&!i||Object(o.f)(a.getArray(),t)?(r||i)&&Object(o.f)(a.getArray(),t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(c.push(t),this.addFeatureLayerAssociation_(t,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=l.length-1;g>=0;--g)a.remove(l[g]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new v(y.SELECT,c,l,t)),Object(u.pointerMove)(t)}e.default=m},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(51),o=r(26),s=r(3),a=r(10),u=r(1),l=r(29),c=r(5),h=r(34),p=r(47),f=r(11),d=r(105),g=r(120);function y(t){return t.feature?t.feature:t.element?t.element:void 0}var v=function(t){function e(e){var r=e||{},i=r;i.handleDownEvent||(i.handleDownEvent=l.b),i.stopDown||(i.stopDown=l.a),t.call(this,i),this.source_=r.source?r.source:null,this.vertex_=void 0===r.vertex||r.vertex,this.edge_=void 0===r.edge||r.edge,this.features_=r.features?r.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,this.sortByDistance_=function(t,e){return Object(o.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment)-Object(o.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment)}.bind(this),this.rBush_=new g.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=Object(i.getUid)(t),o=t.getGeometry();if(o){var l=this.SEGMENT_WRITERS_[o.getType()];l&&(this.indexedFeaturesExtents_[n]=o.getExtent(Object(u.createEmpty)()),l.call(this,t,o))}r&&(this.featureChangeListenerKeys_[n]=Object(s.listen)(t,a.default.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=y(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=y(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=Object(i.getUid)(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(f.getValues)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=Object(i.getUid)(t),o=this.indexedFeaturesExtents_[n];if(o){var a=this.rBush_,u=[];a.forEachInExtent(o,function(e){t===e.feature&&u.push(e)});for(var l=u.length-1;l>=0;--l)a.remove(u[l])}r&&(Object(s.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),i=this.featuresListenerKeys_,o=this.getFeatures_();r&&(i.forEach(s.unlistenByKey),i.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?i.push(Object(s.listen)(this.features_,n.default.ADD,this.handleFeatureAdd_,this),Object(s.listen)(this.features_,n.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push(Object(s.listen)(this.source_,d.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(s.listen)(this.source_,d.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var i=r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n=r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),s=Object(u.boundingExtent)([i,n]),a=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(a=a.filter(function(t){return t.feature.getGeometry().getType()!==c.default.CIRCLE}));var l,h,p,f,d=!1,g=null,y=null;if(a.length>0){this.pixelCoordinate_=e,a.sort(this.sortByDistance_);var v=a[0].segment,m=a[0].feature.getGeometry().getType()===c.default.CIRCLE;this.vertex_&&!this.edge_?(l=r.getPixelFromCoordinate(v[0]),h=r.getPixelFromCoordinate(v[1]),p=Object(o.squaredDistance)(t,l),f=Object(o.squaredDistance)(t,h),Math.sqrt(Math.min(p,f))<=this.pixelTolerance_&&(d=!0,g=p>f?v[1]:v[0],y=r.getPixelFromCoordinate(g))):this.edge_&&(g=m?Object(o.closestOnCircle)(e,a[0].feature.getGeometry()):Object(o.closestOnSegment)(e,v),y=r.getPixelFromCoordinate(g),Object(o.distance)(t,y)<=this.pixelTolerance_&&(d=!0,this.vertex_&&!m&&(l=r.getPixelFromCoordinate(v[0]),h=r.getPixelFromCoordinate(v[1]),p=Object(o.squaredDistance)(y,l),f=Object(o.squaredDistance)(y,h),Math.sqrt(Math.min(p,f))<=this.pixelTolerance_&&(g=p>f?v[1]:v[0],y=r.getPixelFromCoordinate(g))))),d&&(y=[Math.round(y[0]),Math.round(y[1])])}return{snapped:d,vertex:g,vertexPixel:y}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var r=Object(h.fromCircle)(e).getCoordinates()[0],i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:t,segment:o};this.rBush_.insert(Object(u.boundingExtent)(o),s)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),i=0;i<r.length;++i){var n=this.SEGMENT_WRITERS_[r[i].getType()];n&&n.call(this,t,r[i])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:t,segment:o};this.rBush_.insert(Object(u.boundingExtent)(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var l=o.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(Object(u.boundingExtent)(l),c)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length;s<a;++s)for(var l=o[s],c=0,h=l.length-1;c<h;++c){var p=l.slice(c,c+2),f={feature:t,segment:p};this.rBush_.insert(Object(u.boundingExtent)(p),f)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),i={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var l=o.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(Object(u.boundingExtent)(l),c)}},e}(p.default);e.default=v},function(t,e,r){"use strict";r.r(e),r.d(e,"TranslateEvent",function(){return h});var i=r(48),n=r(25),o=r(3),s=r(35),a=r(29),u=r(15),l=r(47),c=r(173),h=function(t){function e(e,r,i){t.call(this,e),this.features=r,this.coordinate=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),p=function(t){function e(e){var r,i=e||{};if(t.call(this,i),this.lastCoordinate_=null,this.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)r=i.layers;else{var s=i.layers;r=function(t){return Object(u.f)(s,t)}}else r=a.b;this.layerFilter_=r,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0,this.lastFeature_=null,Object(o.listen)(this,Object(n.getChangeEventType)(c.a.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new i.default([this.lastFeature_]);return this.dispatchEvent(new h("translatestart",e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new i.default([this.lastFeature_]);return this.dispatchEvent(new h("translateend",e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],o=this.features_||new i.default([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new h("translating",o,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(u.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(l.default);e.default=p},function(t,e,r){"use strict";r.r(e);var i=r(62),n=r(37),o=r(24),s=r(3),a=r(10),u=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),l=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),target:r.target}),this.cssClassName_=void 0!==r.className?r.className:"ol-full-screen";var i=void 0!==r.label?r.label:"⤢";this.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==r.labelActive?r.labelActive:"×";this.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,this.button_=document.createElement("button");var u=r.tipLabel?r.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,h()),this.button_.setAttribute("type","button"),this.button_.title=u,this.button_.appendChild(this.labelNode_),Object(s.listen)(this.button_,a.default.CLICK,this.handleClick_,this);var l=this.cssClassName_+" "+n.e+" "+n.b+" "+(c()?"":n.f),p=this.element;p.className=l,p.appendChild(this.button_),this.keys_=void 0!==r.keys&&r.keys,this.source_=r.source}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(c()){var t,e=this.getMap();e&&(h()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(t){t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen():p(t)}(t):p(t)))}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();h()?(this.setClassName_(this.button_,!0),Object(o.replaceNode)(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),Object(o.replaceNode)(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",i=this.cssClassName_+"-false",n=e?r:i;t.classList.remove(r),t.classList.remove(i),t.classList.add(n)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&this.listenerKeys.push(Object(s.listen)(document,u(),this.handleFullScreenChange_,this))},e}(i.default);function c(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function h(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function p(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}e.default=l},function(t,e,r){"use strict";r.r(e),r.d(e,"render",function(){return c});var i=r(3),n=r(10),o=r(25),s=r(62),a=r(9),u="projection",l=function(t){function e(e){var r=e||{},n=document.createElement("div");n.className=void 0!==r.className?r.className:"ol-mouse-position",t.call(this,{element:n,render:r.render||c,target:r.target}),Object(i.listen)(this,Object(o.getChangeEventType)(u),this.handleProjectionChanged_,this),r.coordinateFormat&&this.setCoordinateFormat(r.coordinateFormat),r.projection&&this.setProjection(r.projection),this.undefinedHTML_=void 0!==r.undefinedHTML?r.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(u)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(Object(i.listen)(r,n.default.MOUSEMOVE,this.handleMouseMove,this),Object(i.listen)(r,n.default.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(i.listen)(r,n.default.MOUSEOUT,this.handleMouseOut,this),Object(i.listen)(r,n.default.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(u,Object(a.get)(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Object(a.getTransformFromProjections)(this.mapProjection_,r):a.identityTransform}var i=this.getMap().getCoordinateFromPixel(t);if(i){this.transform_(i,i);var n=this.getCoordinateFormat();e=n?n(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(s.default);function c(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}e.default=l},function(t,e,r){"use strict";r.r(e),r.d(e,"Units",function(){return h}),r.d(e,"render",function(){return d});var i=r(25),n=r(23),o=r(62),s=r(37),a=r(3),u=r(9),l=r(49),c="units",h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},p=[1,2,5],f=function(t){function e(e){var r=e||{},n=void 0!==r.className?r.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:r.render||d,target:r.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+s.e,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==r.minWidth?r.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",Object(a.listen)(this,Object(i.getChangeEventType)(c),this.handleUnitsChanged_,this),this.setUnits(r.units||h.METRIC)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getUnits=function(){return this.get(c)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(c,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,i=this.getUnits(),o=i==h.DEGREES?l.default.DEGREES:l.default.METERS,s=Object(u.getPointResolution)(r,t.resolution,e,o);r.getUnits()!=l.default.DEGREES&&r.getMetersPerUnit()&&o==l.default.METERS&&(s*=r.getMetersPerUnit());var a=this.minWidth_*s,c="";if(i==h.DEGREES){var f=u.METERS_PER_UNIT[l.default.DEGREES];r.getUnits()==l.default.DEGREES?a*=f:s/=f,a<f/60?(c="″",s*=3600):a<f?(c="′",s*=60):c="°"}else i==h.IMPERIAL?a<.9144?(c="in",s/=.0254):a<1609.344?(c="ft",s/=.3048):(c="mi",s/=1609.344):i==h.NAUTICAL?(s/=1852,c="nm"):i==h.METRIC?a<.001?(c="μm",s*=1e6):a<1?(c="mm",s*=1e3):a<1e3?c="m":(c="km",s/=1e3):i==h.US?a<.9144?(c="in",s*=39.37):a<1609.344?(c="ft",s/=.30480061):(c="mi",s/=1609.3472):Object(n.a)(!1,33);for(var d,g,y=3*Math.floor(Math.log(this.minWidth_*s)/Math.log(10));;){if(d=p[(y%3+3)%3]*Math.pow(10,Math.floor(y/3)),g=Math.round(d/s),isNaN(g))return this.element.style.display="none",void(this.renderedVisible_=!1);if(g>=this.minWidth_)break;++y}var v=d+" "+c;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(o.default);function d(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}e.default=f},function(t,e,r){"use strict";r.r(e),r.d(e,"render",function(){return g});var i=r(28),n=r(62),o=r(37),s=r(58),a=r(3),u=r(35),l=r(10),c=r(19),h=r(92),p=r(235),f={VERTICAL:0,HORIZONTAL:1},d=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),render:r.render||g}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=f.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==r.duration?r.duration:200;var i=void 0!==r.className?r.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=i+"-thumb "+o.e;var s=this.element;s.className=i+" "+o.e+" "+o.b,s.appendChild(n),this.dragger_=new p.a(s),Object(a.listen)(this.dragger_,h.a.POINTERDOWN,this.handleDraggerStart_,this),Object(a.listen)(this.dragger_,h.a.POINTERMOVE,this.handleDraggerDrag_,this),Object(a.listen)(this.dragger_,h.a.POINTERUP,this.handleDraggerEnd_,this),Object(a.listen)(s,l.default.CLICK,this.handleContainerClick_,this),Object(a.listen)(n,l.default.CLICK,u.stopPropagation)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,i=t.firstElementChild,n=getComputedStyle(i),o=i.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=i.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[o,s],e>r?(this.direction_=f.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=f.VERTICAL,this.heightLimit_=r-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(r);e.animate({resolution:e.constrainResolution(i),duration:this.duration_,easing:s.easeOut})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild&&(this.getMap().getView().setHint(i.default.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0,0===this.dragListenerKeys_.length)){var e=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push(Object(a.listen)(document,l.default.MOUSEMOVE,e,this),Object(a.listen)(document,h.a.POINTERMOVE,e,this),Object(a.listen)(document,l.default.MOUSEUP,r,this),Object(a.listen)(document,h.a.POINTERUP,r,this))}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,r=t.clientX-this.previousX_+parseFloat(e.style.left),i=t.clientY-this.previousY_+parseFloat(e.style.top),n=this.getRelativePosition_(r,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},e.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(i.default.INTERACTING,-1),e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:s.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0,this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0}},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;this.direction_==f.HORIZONTAL?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var r;return r=this.direction_===f.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,Object(c.a)(r,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e}(n.default);function g(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}e.default=d},function(t,e,r){"use strict";r.r(e);var i=r(3),n=r(10),o=r(62),s=r(37),a=function(t){function e(e){var r=e||{};t.call(this,{element:document.createElement("div"),target:r.target}),this.extent=r.extent?r.extent:null;var o=void 0!==r.className?r.className:"ol-zoom-extent",a=void 0!==r.label?r.label:"E",u=void 0!==r.tipLabel?r.tipLabel:"Fit to extent",l=document.createElement("button");l.setAttribute("type","button"),l.title=u,l.appendChild("string"==typeof a?document.createTextNode(a):a),Object(i.listen)(l,n.default.CLICK,this.handleClick_,this);var c=o+" "+s.e+" "+s.b,h=this.element;h.className=c,h.appendChild(l)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e}(o.default);e.default=a},function(t,e,r){"use strict";r.r(e);var i=r(152),n=r(1),o=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,projection:r.projection,resolutions:r.resolutions,state:r.state}),this.canvasFunction_=r.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==r.ratio?r.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageInternal=function(t,e,r,o){e=this.findNearestResolution(e);var s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==e&&s.getPixelRatio()==r&&Object(n.containsExtent)(s.getExtent(),t))return s;t=t.slice(),Object(n.scaleFromCenter)(t,this.ratio_);var a=[Object(n.getWidth)(t)/e*r,Object(n.getHeight)(t)/e*r],u=this.canvasFunction_.call(this,t,e,r,a,o);return u&&(s=new i.a(t,e,r,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s},e}(r(75).default);e.default=o},function(t,e,r){t.exports={default:r(508),__esModule:!0}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},function(t,e,r){var i=r(295)("keys"),n=r(237);t.exports=function(t){return i[t]||(i[t]=n(t))}},function(t,e,r){var i=r(54),n=r(96),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:r(201)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var i=r(137),n=r(96).document,o=i(n)&&i(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},function(t,e,r){var i=r(137);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){t.exports={default:r(514),__esModule:!0}},function(t,e,r){var i=r(241),n=r(239),o=r(162),s=r(298),a=r(161),u=r(366),l=Object.getOwnPropertyDescriptor;e.f=r(138)?l:function(t,e){if(t=o(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return n(!i.f.call(t,e),t[e])}},function(t,e,r){e.f=r(106)},function(t,e,r){var i=r(96),n=r(54),o=r(201),s=r(301),a=r(146).f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,r){var i=r(122),n=r(520),o=r(296),s=r(294)("IE_PROTO"),a=function(){},u=function(){var t,e=r(297)("iframe"),i=o.length;for(e.style.display="none",r(370).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(a.prototype=i(t),r=new a,a.prototype=null,r[s]=t):r=u(),void 0===e?r:n(r,e)}},function(t,e,r){var i=r(363),n=r(296).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},function(t,e,r){"use strict";var i=r(525)(!0);r(373)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=i(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){r(527);for(var i=r(96),n=r(163),o=r(204),s=r(106)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<a.length;u++){var l=a[u],c=i[l],h=c&&c.prototype;h&&!h[s]&&n(h,s,l),o[l]=o.Array}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnyLine=void 0;var i=r(6),n=r(22),o=function(t,e){var r=void 0!==e?e:{};(0,n.extend)(this,r),this.Arcs=void 0!==t&&null!==t?t:null};e.AnyLine=o,i.Zondy.Object.AnyLine=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPointInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Angle=void 0!==e.Angle&&null!==e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!==e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!==e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!==e.SymWidth?e.SymWidth:1};e.CPointInfo=o,i.Zondy.Object.CPointInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegionInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.EndColor=void 0!==e.EndColor&&null!==e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!==e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!==e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!==e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!==e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!==e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!==e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!==e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!==e.PatWidth?e.PatWidth:1};e.CRegionInfo=o,i.Zondy.Object.CRegionInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPoint=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(14)),u=r(6),l=r(246),c=r(114);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,r,o){(0,n.default)(this,e);var a=o||{},u=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));return void 0!==t&&null!==t&&void 0!==r&&null!==r&&(u.Dot=new c.Point2D(t,r)),u}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setDot",value:function(t){this.Dot=void 0!==t&&null!==t?t:null}}]),e}(l.FeatureGraphicBase);e.GPoint=p,u.Zondy.Object.GPoint=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLine=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(6),l=r(246);function c(t){return t&&t.__esModule?t:{default:t}}r(307);var h=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.Line=void 0!==t&&null!==t?t:null,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setLine",value:function(t){this.Line=void 0!==t&&null!==t?t:null}}]),e}(l.FeatureGraphicBase);e.GLine=h,u.Zondy.Object.GLine=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRegion=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(6),l=r(246);function c(t){return t&&t.__esModule?t:{default:t}}r(307);var h=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.Rings=void 0!==t&&null!==t&&Array.isArray(t)?t:null,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setRings",value:function(t){this.Rings=void 0!==t&&null!==t?t:null}}]),e}(l.FeatureGraphicBase);e.GRegion=h,u.Zondy.Object.GRegion=h},function(t,e,r){t.exports={default:r(569),__esModule:!0}},function(t,e,r){var i,n,o,s=r(203),a=r(575),u=r(370),l=r(297),c=r(96),h=c.process,p=c.setImmediate,f=c.clearImmediate,d=c.MessageChannel,g=c.Dispatch,y=0,v={},m=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},_=function(t){m.call(t.data)};p&&f||(p=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return v[++y]=function(){a("function"==typeof t?t:Function(t),e)},i(y),y},f=function(t){delete v[t]},"process"==r(200)(h)?i=function(t){h.nextTick(s(m,t,1))}:g&&g.now?i=function(t){g.now(s(m,t,1))}:d?(o=(n=new d).port2,n.port1.onmessage=_,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):i="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:p,clear:f}},function(t,e,r){"use strict";var i=r(238);t.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,i){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=i}),this.resolve=i(e),this.reject=i(r)}(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditServiceBase=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(139),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.guid=void 0!==r.guid?r.guid:(0,l.newGuid)(),s.baseUrl="igs/rest/mrfs",s.f=void 0!==r.f?r.f:"json",s}return(0,s.default)(e,t),e}(u.ServiceBase);e.EditServiceBase=h,a.Zondy.Service.EditServiceBase=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureStruct=void 0;var i=r(6),n=r(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};o.prototype.toJSON=function(){return(0,n.toJSON)(this)},e.QueryFeatureStruct=o,i.Zondy.Service.QueryFeatureStruct=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPoint=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(13)),s=f(r(16)),a=f(r(14)),u=r(319),l=r(124),c=p(r(320)),h=p(r(321));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.type="Point",(0,l.extend)(r,t),r}return(0,a.default)(e,t),(0,s.default)(e,null,[{key:"getPointsCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var i=0;i<t[r].geometry.length;i++)e.push(t[r].geometry[i].coordinates);return e}},{key:"getPointsCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(c.point(t[r]));return h.center(h.featureCollection(e))}}]),e}(u.Geometry);e.VPoint=d,Zondy.Service.VPoint=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Geometry=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8));e.Geometry=function t(){(0,i.default)(this,t),this.coordinates=[]}},function(t,e,r){"use strict";r.r(e),r.d(e,"earthRadius",function(){return i}),r.d(e,"factors",function(){return n}),r.d(e,"unitsFactors",function(){return o}),r.d(e,"areaFactors",function(){return s}),r.d(e,"feature",function(){return a}),r.d(e,"geometry",function(){return u}),r.d(e,"point",function(){return l}),r.d(e,"points",function(){return c}),r.d(e,"polygon",function(){return h}),r.d(e,"polygons",function(){return p}),r.d(e,"lineString",function(){return f}),r.d(e,"lineStrings",function(){return d}),r.d(e,"featureCollection",function(){return g}),r.d(e,"multiLineString",function(){return y}),r.d(e,"multiPoint",function(){return v}),r.d(e,"multiPolygon",function(){return m}),r.d(e,"geometryCollection",function(){return _}),r.d(e,"round",function(){return b}),r.d(e,"radiansToLength",function(){return S}),r.d(e,"lengthToRadians",function(){return x}),r.d(e,"lengthToDegrees",function(){return O}),r.d(e,"bearingToAzimuth",function(){return E}),r.d(e,"radiansToDegrees",function(){return C}),r.d(e,"degreesToRadians",function(){return T}),r.d(e,"convertLength",function(){return P}),r.d(e,"convertArea",function(){return w}),r.d(e,"isNumber",function(){return I}),r.d(e,"isObject",function(){return L}),r.d(e,"validateBBox",function(){return R}),r.d(e,"validateId",function(){return M});var i=6371008.8,n={centimeters:100*i,centimetres:100*i,degrees:i/111325,feet:3.28084*i,inches:39.37*i,kilometers:i/1e3,kilometres:i/1e3,meters:i,metres:i,miles:i/1609.344,millimeters:1e3*i,millimetres:1e3*i,nauticalmiles:i/1852,radians:1,yards:1.0936*i},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i,yards:1.0936133},s={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=e||{},i.geometry=t,i}function u(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return l(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I(t[0])||!I(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),g(t.map(function(t){return l(t,e)}),r)}function h(t,e,r){void 0===r&&(r={});for(var i=0,n=t;i<n.length;i++){var o=n[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:t},e,r)}function p(t,e,r){return void 0===r&&(r={}),g(t.map(function(t){return h(t,e)}),r)}function f(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:t},e,r)}function d(t,e,r){return void 0===r&&(r={}),g(t.map(function(t){return f(t,e)}),r)}function g(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t,e,r){return void 0===r&&(r={}),a({type:"MultiLineString",coordinates:t},e,r)}function v(t,e,r){return void 0===r&&(r={}),a({type:"MultiPoint",coordinates:t},e,r)}function m(t,e,r){return void 0===r&&(r={}),a({type:"MultiPolygon",coordinates:t},e,r)}function _(t,e,r){return void 0===r&&(r={}),a({type:"GeometryCollection",geometries:t},e,r)}function b(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function S(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function x(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function O(t,e){return C(x(t,e))}function E(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return t%(2*Math.PI)*180/Math.PI}function T(t){return t%360*Math.PI/180}function P(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return S(x(t,e),r)}function w(t,e,r){if(void 0===e&&(e="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=s[e];if(!i)throw new Error("invalid original units");var n=s[r];if(!n)throw new Error("invalid final units");return t/i*n}function I(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function R(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!I(t))throw new Error("bbox must only contain numbers")})}function M(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,r){(function(t){!function(e){"use strict";var r=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*r,kilometers:6371.0088,kilometres:6371.0088,meters:r,metres:r,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:r/1852,radians:1,yards:6967335.223679999},n={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=e||{},i.geometry=t,i}function a(t,e,r){switch(t){case"Point":return u(e).geometry;case"LineString":return p(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return y(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return v(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return u(t,e)}),r)}function c(t,e,r){void 0===r&&(r={});for(var i=0,n=t;i<n.length;i++){var o=n[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,r)}function h(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return c(t,e)}),r)}function p(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,r)}function f(t,e,r){return void 0===r&&(r={}),d(t.map(function(t){return p(t,e)}),r)}function d(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function g(t,e,r){return void 0===r&&(r={}),s({type:"MultiLineString",coordinates:t},e,r)}function y(t,e,r){return void 0===r&&(r={}),s({type:"MultiPoint",coordinates:t},e,r)}function v(t,e,r){return void 0===r&&(r={}),s({type:"MultiPolygon",coordinates:t},e,r)}function m(t,e,r){return void 0===r&&(r={}),s({type:"GeometryCollection",geometries:t},e,r)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function b(t,e){void 0===e&&(e="kilometers");var r=i[e];if(!r)throw new Error(e+" units is invalid");return t*r}function S(t,e){void 0===e&&(e="kilometers");var r=i[e];if(!r)throw new Error(e+" units is invalid");return t/r}function x(t,e){return E(S(t,e))}function O(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function C(t){return t%360*Math.PI/180}function T(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(S(t,e),r)}function P(t,e,r){if(void 0===e&&(e="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=o[e];if(!i)throw new Error("invalid original units");var n=o[r];if(!n)throw new Error("invalid final units");return t/i*n}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function L(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!w(t))throw new Error("bbox must only contain numbers")})}function R(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var M=Object.freeze({__proto__:null,earthRadius:r,factors:i,unitsFactors:n,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:c,polygons:h,lineString:p,lineStrings:f,featureCollection:d,multiLineString:g,multiPoint:y,multiPolygon:v,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:S,lengthToDegrees:x,bearingToAzimuth:O,radiansToDegrees:E,degreesToRadians:C,convertLength:T,convertArea:P,isNumber:w,isObject:I,validateBBox:L,validateId:R});function A(t,e,r){if(null!==t)for(var i,n,o,s,a,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,v=0;v<y;v++){a=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var S=s.type;switch(h=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,p,v,_,b))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],p,v,_,b))return!1;p++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(n=0;n<u[i].length-h;n++){if(!1===e(u[i][n],p,v,_,b))return!1;p++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(b=0,n=0;n<u[i].length;n++){for(o=0;o<u[i][n].length-h;o++){if(!1===e(u[i][n][o],p,v,_,b))return!1;p++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===A(s.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function j(t,e,r,i){var n=r;return A(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)},i),n}function N(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function F(t,e,r){var i=r;return N(t,function(t,n){i=0===n&&void 0===r?t:e(i,t,n)}),i}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function k(t,e,r){var i=r;return D(t,function(t,n){i=0===n&&void 0===r?t:e(i,t,n)}),i}function G(t){var e=[];return A(t,function(t){e.push(t)}),e}function B(t,e){var r,i,n,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(r=0;r<g;r++){for(a=f?t.features[r].geometry:d?t.geometry:t,l=f?t.features[r].properties:d?t.properties:{},c=f?t.features[r].bbox:d?t.bbox:void 0,h=f?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<s;n++)if(null!==(o=u?a.geometries[n]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,h))return!1;p++}}function U(t,e,r){var i=r;return B(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)}),i}function V(t,e){B(t,function(t,r,i,n,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,i,{bbox:n,id:o}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},i),r,l))return!1}})}function z(t,e,r){var i=r;return V(t,function(t,n,o){i=0===n&&0===o&&void 0===r?t:e(i,t,n,o)}),i}function W(t,e){V(t,function(t,r,i){var n=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==A(t,function(o,c,h,f,d){if(void 0===s||r>a||f>u||d>l)return s=o,a=r,u=f,l=d,void(n=0);var g=p([s,o],t.properties);if(!1===e(g,r,i,d,n))return!1;n++,s=o})&&void 0}}})}function Y(t,e,r){var i=r,n=!1;return W(t,function(t,o,s,a,u){i=!1===n&&void 0===r?t:e(i,t,o,s,a,u),n=!0}),i}function X(t,e){if(!t)throw new Error("geojson is required");V(t,function(t,r,i){if(null!==t.geometry){var n=t.geometry.type,o=t.geometry.coordinates;switch(n){case"LineString":if(!1===e(t,r,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(p(o[s],t.properties),r,i,s))return!1}}})}function Z(t,e,r){var i=r;return X(t,function(t,n,o,s){i=0===n&&void 0===r?t:e(i,t,n,o,s)}),i}function H(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r,i=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),p([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),p([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return n<0&&(n=u.length+n),s<0&&(s=u[n].length+s-1),p([u[n][s],u[n][s+1]],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),s<0&&(s=u[n][o].length-s-1),p([u[n][o][s],u[n][o][s+1]],a,e)}throw new Error("geojson is invalid")}function q(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r,i=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return u(l,a,e);case"MultiPoint":return n<0&&(n=l.length+n),u(l[n],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return n<0&&(n=l.length+n),s<0&&(s=l[n].length+s),u(l[n][s],a,e);case"MultiPolygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),s<0&&(s=l[n][o].length-s),u(l[n][o][s],a,e)}throw new Error("geojson is invalid")}var K=Object.freeze({__proto__:null,coordAll:G,coordEach:A,coordReduce:j,featureEach:D,featureReduce:k,findPoint:q,findSegment:H,flattenEach:V,flattenReduce:z,geomEach:B,geomReduce:U,lineEach:X,lineReduce:Z,propEach:N,propReduce:F,segmentEach:W,segmentReduce:Y});function J(t){var e=[1/0,1/0,-1/0,-1/0];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Q(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&w(t[0])&&w(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function rt(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function it(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var i=0,n=t.features;i<n.length;i++){var o=n[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+o.geometry.type)}}function nt(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var st=Object.freeze({__proto__:null,getCoord:Q,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:rt,collectionOf:it,getGeom:nt,getType:ot}),at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,i,n=
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))ut.call(r,s)&&(n[s]=r[s]);if(at){i=at(r);for(var a=0;a<i.length;a++)lt.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n},ht={successCallback:null,verbose:!1},pt={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function ft(t,e,r){r=r||{};for(var i=Object.keys(ht),n=0;n<i.length;n++){var o=i[n],s=r[o];s=null!=s?s:ht[o],pt[o]=s}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],r=0;return t.cells.forEach(function(i,n){i.forEach(function(i,o){if(void 0!==i&&5!==(p=i).cval&&10!==p.cval&&!gt(i)){var s=function(t,e,r){var i,n,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][r],h=c.cval,p=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],f=vt(c,p);s.push([r+f[0],e+f[1]]),f=vt(c,p=l[h]),s.push([r+f[0],e+f[1]]),yt(c);for(var d=r+a[h],g=e+u[h],y=h;d>=0&&g>=0&&g<o&&(d!=r||g!=e)&&void 0!==(c=t[g][d]);){if(0===(h=c.cval)||15===h)return{path:s,info:"mergeable"};p=l[h],i=a[h],n=u[h],5!==h&&10!==h||(5===h?c.flipped?-1===u[y]?(p="left",i=-1,n=0):(p="right",i=1,n=0):-1===a[y]&&(p="bottom",i=0,n=-1):10===h&&(c.flipped?-1===a[y]?(p="top",i=0,n=1):(p="bottom",i=0,n=-1):1===u[y]&&(p="left",i=-1,n=0))),f=vt(c,p),s.push([d+f[0],g+f[1]]),yt(c),d+=i,g+=n,y=h}return{path:s,info:"closed"}}(t.cells,n,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],l=s.path[s.path.length-1][1],c=r-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var h=s.path.length-2;h>=0;--h)e[c].unshift(s.path[h]);a=!0;break}a||(e[r++]=s.path)}var p})}),e}(function(t,e){for(var r=t.length-1,i=t[0].length-1,n={rows:r,cols:i,cells:[]},o=0;o<r;++o){n.cells[o]=[];for(var s=0;s<i;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var p,f,d,g,y=!1;if(5==(a|=h>=e?1:0)||10===a){var v=(u+l+c+h)/4;5===a&&v<e?(a=10,y=!0):10===a&&v<e&&(a=5,y=!0)}0!==a&&15!==a&&(p=f=d=g=.5,1===a?(d=1-dt(e,u,h),f=1-dt(e,c,h)):2===a?(f=dt(e,h,c),g=1-dt(e,l,c)):3===a?(d=1-dt(e,u,h),g=1-dt(e,l,c)):4===a?(p=dt(e,u,l),g=dt(e,c,l)):5===a?(p=dt(e,u,l),g=dt(e,c,l),f=1-dt(e,c,h),d=1-dt(e,u,h)):6===a?(f=dt(e,h,c),p=dt(e,u,l)):7===a?(d=1-dt(e,u,h),p=dt(e,u,l)):8===a?(d=dt(e,h,u),p=1-dt(e,l,u)):9===a?(f=1-dt(e,c,h),p=1-dt(e,l,u)):10===a?(p=1-dt(e,l,u),g=1-dt(e,l,c),f=dt(e,h,c),d=dt(e,h,u)):11===a?(p=1-dt(e,l,u),g=1-dt(e,l,c)):12===a?(d=dt(e,h,u),g=dt(e,c,l)):13===a?(f=1-dt(e,c,h),g=dt(e,c,l)):14===a?(d=dt(e,h,u),f=dt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),n.cells[o][s]={cval:a,flipped:y,top:p,right:g,bottom:f,left:d})}}}return n}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function dt(t,e,r){return(t-e)/(r-e)}function gt(t){return 0===t.cval||15===t.cval}function yt(t){gt(t)||5===t.cval||10===t.cval||(t.cval=15)}function vt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var mt=bt,_t=bt;function bt(t,e,r,i,n){!function t(e,r,i,n,o){for(;n>i;){if(n-i>600){var s=n-i+1,a=r-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,r,Math.max(i,Math.floor(r-a*l/s+c)),Math.min(n,Math.floor(r+(s-a)*l/s+c)),o)}var h=e[r],p=i,f=n;for(St(e,i,r),o(e[n],h)>0&&St(e,i,n);p<f;){for(St(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;o(e[f],h)>0;)f--}0===o(e[i],h)?St(e,i,f):St(e,++f,n),f<=r&&(i=f+1),r<=f&&(n=f-1)}}(t,e,r||0,i||t.length-1,n||xt)}function St(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function xt(t,e){return t<e?-1:t>e?1:0}mt.default=_t;var Ot=Ct,Et=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Tt(t,e,r){if(!r)return e.indexOf(t);for(var i=0;i<e.length;i++)if(r(t,e[i]))return i;return-1}function Pt(t,e){wt(t,0,t.children.length,e,t)}function wt(t,e,r,i,n){n||(n=Ft(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],It(n,t.leaf?i(o):o);return n}function It(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Lt(t,e){return t.minX-e.minX}function Rt(t,e){return t.minY-e.minY}function Mt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function At(t){return t.maxX-t.minX+(t.maxY-t.minY)}function jt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Nt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ft(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Dt(t,e,r,i,n){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((r-e)/i/2)*i,mt(t,o,e,r,n),s.push(e,o,o,r))}function kt(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],i=this.toBBox;if(!Nt(t,e))return r;for(var n,o,s,a,u=[];e;){for(n=0,o=e.children.length;n<o;n++)s=e.children[n],Nt(t,a=e.leaf?i(s):s)&&(e.leaf?r.push(s):jt(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!Nt(t,e))return!1;for(var i,n,o,s,a=[];e;){for(i=0,n=e.children.length;i<n;i++)if(o=e.children[i],Nt(t,s=e.leaf?r(o):o)){if(e.leaf||jt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ft([]),this},remove:function(t,e){if(!t)return this;for(var r,i,n,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],r=l.pop(),o=!0),s.leaf&&-1!==(n=Tt(t,s.children,e)))return s.children.splice(n,1),u.push(s),this._condense(u),this;o||s.leaf||!jt(s,a)?i?(r++,s=i.children[r],o=!1):s=null:(u.push(s),l.push(r),r=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Lt,compareMinY:Rt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,i){var n,o=r-e+1,s=this._maxEntries;if(o<=s)return Pt(n=Ft(t.slice(e,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(n=Ft([])).leaf=!1,n.height=i;var a,u,l,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Dt(t,e,r,p,this.compareMinX),a=e;a<=r;a+=p)for(Dt(t,a,l=Math.min(a+p-1,r),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),n.children.push(this._build(t,u,c,i-1));return Pt(n,this.toBBox),n},_chooseSubtree:function(t,e,r,i){for(var n,o,s,a,u,l,c,h,p,f;i.push(e),!e.leaf&&i.length-1!==r;){for(c=h=1/0,n=0,o=e.children.length;n<o;n++)u=Mt(s=e.children[n]),p=t,f=s,(l=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var i=this.toBBox,n=r?t:i(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),It(s,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var r=t[e],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var o=this._chooseSplitIndex(r,n,i),s=Ft(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Pt(r,this.toBBox),Pt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=Ft([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var i,n,o,s,a,u,l,c,h,p,f,d,g,y;for(u=l=1/0,i=e;i<=r-e;i++)h=n=wt(t,0,i,this.toBBox),p=o=wt(t,i,r,this.toBBox),f=void 0,d=void 0,g=void 0,y=void 0,f=Math.max(h.minX,p.minX),d=Math.max(h.minY,p.minY),g=Math.min(h.maxX,p.maxX),y=Math.min(h.maxY,p.maxY),s=Math.max(0,g-f)*Math.max(0,y-d),a=Mt(n)+Mt(o),s<u?(u=s,c=i,l=a<l?a:l):s===u&&a<l&&(l=a,c=i);return c},_chooseSplitAxis:function(t,e,r){var i=t.leaf?this.compareMinX:Lt,n=t.leaf?this.compareMinY:Rt;this._allDistMargin(t,e,r,i)<this._allDistMargin(t,e,r,n)&&t.children.sort(i)},_allDistMargin:function(t,e,r,i){t.children.sort(i);var n,o,s=this.toBBox,a=wt(t,0,e,s),u=wt(t,r-e,r,s),l=At(a)+At(u);for(n=e;n<r-e;n++)o=t.children[n],It(a,t.leaf?s(o):o),l+=At(a);for(n=r-e-1;n>=e;n--)o=t.children[n],It(u,t.leaf?s(o):o),l+=At(u);return l},_adjustParentBBoxes:function(t,e,r){for(var i=r;i>=0;i--)It(e[i],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Pt(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Ot.default=Et;var Gt=function(t,e,r){var i=t*e,n=Bt*t,o=n-(n-t),s=t-o,a=Bt*e,u=a-(a-e),l=e-u,c=s*l-(i-o*u-s*u-o*l);return r?(r[0]=c,r[1]=i,r):[c,i]},Bt=+(Math.pow(2,27)+1),Ut=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],e[0]);var n,o,s=new Array(r+i),a=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=e[l],d=c(f);p<d?(o=h,(u+=1)<r&&(p=c(h=t[u]))):(o=f,(l+=1)<i&&(d=c(f=e[l]))),u<r&&p<d||l>=i?(n=h,(u+=1)<r&&(p=c(h=t[u]))):(n=f,(l+=1)<i&&(d=c(f=e[l])));for(var g,y,v=n+o,m=v-n,_=o-m,b=_,S=v;u<r&&l<i;)p<d?(n=h,(u+=1)<r&&(p=c(h=t[u]))):(n=f,(l+=1)<i&&(d=c(f=e[l]))),(_=(o=b)-(m=(v=n+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g;for(;u<r;)(_=(o=b)-(m=(v=(n=h)+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g,(u+=1)<r&&(h=t[u]);for(;l<i;)(_=(o=b)-(m=(v=(n=f)+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g,(l+=1)<i&&(f=e[l]);return b&&(s[a++]=b),S&&(s[a++]=S),a||(s[a++]=0),s.length=a,s},Vt=function(t,e,r){var i=t+e,n=i-t,o=e-n,s=t-(i-n);return r?(r[0]=s+o,r[1]=i,r):[s+o,i]},zt=function(t,e){var r=t.length;if(1===r){var i=Gt(t[0],e);return i[0]?i:[i[1]]}var n=new Array(2*r),o=[.1,.1],s=[.1,.1],a=0;Gt(t[0],e,o),o[0]&&(n[a++]=o[0]);for(var u=1;u<r;++u){Gt(t[u],e,s);var l=o[1];Vt(l,s[0],o),o[0]&&(n[a++]=o[0]);var c=s[1],h=o[1],p=c+h,f=h-(p-c);o[1]=p,f&&(n[a++]=f)}return o[1]&&(n[a++]=o[1]),0===a&&(n[a++]=0),n.length=a,n},Wt=function(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],-e[0]);var n,o,s=new Array(r+i),a=0,u=0,l=0,c=Math.abs,h=t[u],p=c(h),f=-e[l],d=c(f);p<d?(o=h,(u+=1)<r&&(p=c(h=t[u]))):(o=f,(l+=1)<i&&(d=c(f=-e[l]))),u<r&&p<d||l>=i?(n=h,(u+=1)<r&&(p=c(h=t[u]))):(n=f,(l+=1)<i&&(d=c(f=-e[l])));for(var g,y,v=n+o,m=v-n,_=o-m,b=_,S=v;u<r&&l<i;)p<d?(n=h,(u+=1)<r&&(p=c(h=t[u]))):(n=f,(l+=1)<i&&(d=c(f=-e[l]))),(_=(o=b)-(m=(v=n+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g;for(;u<r;)(_=(o=b)-(m=(v=(n=h)+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g,(u+=1)<r&&(h=t[u]);for(;l<i;)(_=(o=b)-(m=(v=(n=f)+o)-n))&&(s[a++]=_),b=S-((g=S+v)-(y=g-S))+(v-y),S=g,(l+=1)<i&&(f=-e[l]);return b&&(s[a++]=b),S&&(s[a++]=S),a||(s[a++]=0),s.length=a,s},Yt=kt(function(t){function e(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(n[s++]=t[i][o]);return r}function r(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",r(t.slice(0,e)),",",r(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var n=[],o=0;o<t.length;++o)n.push(["scale(",r(i(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return n;var s}function n(t){for(var n=[],o=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m",i,"[",t-r-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?n.push.apply(n,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var l=r(n),c=r(o),h="orientation"+t+"Exact",p=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Ut,Gt,zt,Wt)}var o=n(3),s=n(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var i,n=(t[1]-r[1])*(e[0]-r[0]),s=(t[0]-r[0])*(e[1]-r[1]),a=n-s;if(n>0){if(s<=0)return a;i=n+s}else{if(!(n<0))return a;if(s>=0)return a;i=-(n+s)}var u=3.3306690738754716e-16*i;return a>=u||a<=-u?a:o(t,e,r)},function(t,e,r,i){var n=t[0]-i[0],o=e[0]-i[0],a=r[0]-i[0],u=t[1]-i[1],l=e[1]-i[1],c=r[1]-i[1],h=t[2]-i[2],p=e[2]-i[2],f=r[2]-i[2],d=o*c,g=a*l,y=a*u,v=n*c,m=n*l,_=o*u,b=h*(d-g)+p*(y-v)+f*(m-_),S=7.771561172376103e-16*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(v))*Math.abs(p)+(Math.abs(m)+Math.abs(_))*Math.abs(f));return b>S||-b>S?b:s(t,e,r,i)}];!function(){for(;a.length<=5;)a.push(n(a.length));for(var e=[],r=["slow"],i=0;i<=5;++i)e.push("a"+i),r.push("o"+i);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)o.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(o.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[function(t){var e=a[t.length];return e||(e=a[t.length]=n(t.length)),e.apply(void 0,t)}].concat(a)),i=0;i<=5;++i)t.exports[i]=a[i]}()}),Xt=function(t){var e=t.length;if(e<3){for(var r=new Array(e),i=0;i<e;++i)r[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var n=new Array(e);for(i=0;i<e;++i)n[i]=i;n.sort(function(e,r){return t[e][0]-t[r][0]||t[e][1]-t[r][1]});var o=[n[0],n[1]],s=[n[0],n[1]];for(i=2;i<e;++i){for(var a=n[i],u=t[a],l=o.length;l>1&&Zt(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Zt(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}r=new Array(s.length+o.length-2);for(var c=0,h=(i=0,o.length);i<h;++i)r[c++]=o[i];for(var p=s.length-2;p>0;--p)r[c++]=s[p];return r},Zt=Yt[3],Ht=Kt,qt=Kt;function Kt(t,e){if(!(this instanceof Kt))return new Kt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Jt,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function Jt(t,e){return t<e?-1:t>e?1:0}Kt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];t>0;){var n=t-1>>1,o=e[n];if(r(i,o)>=0)break;e[t]=o,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,n)>=0)break;e[t]=a,t=o}e[t]=n}},Ht.default=qt;var Qt=function(t,e){for(var r=t[0],i=t[1],n=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>i!=c>i&&r<(l-a)*(i-u)/(c-u)+a&&(n=!n)}return n},$t=Yt[3],te=re,ee=re;function re(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;for(var i,n=function(t){for(var e=t[0],r=t[0],i=t[0],n=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>i[0]&&(i=s),s[1]<r[1]&&(r=s),s[1]>n[1]&&(n=s)}var a=[e,r,i,n],u=a.slice();for(o=0;o<t.length;o++)Qt(t[o],a)||u.push(t[o]);var l=Xt(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=Ot(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<n.length;a++){var u=n[a];o.remove(u),i=le(u,i),s.push(i)}var l=Ot(16);for(a=0;a<s.length;a++)l.insert(ue(s[a]));for(var c=e*e,h=r*r;s.length;){var p=s.shift(),f=p.p,d=p.next.p,g=ce(f,d);if(!(g<h)){var y=g/c;(u=ie(o,p.prev.p,f,d,p.next.next.p,y,l))&&Math.min(ce(u,f),ce(u,d))<=y&&(s.push(p),s.push(le(u,p)),o.remove(u),l.remove(p),l.insert(ue(p)),l.insert(ue(p.next)))}}p=i;var v=[];do{v.push(p.p),p=p.next}while(p!==i);return v.push(p.p),v}function ie(t,e,r,i,n,o,s){for(var a=new Ht(null,ne),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?he(c,r,i):oe(r,i,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,d=he(f,e,r),g=he(f,i,n);if(p.dist<d&&p.dist<g&&ae(r,f,s)&&ae(i,f,s))return f}(u=a.pop())&&(u=u.node)}return null}function ne(t,e){return t.dist-e.dist}function oe(t,e,r){if(se(t,r)||se(e,r))return 0;var i=pe(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===i)return 0;var n=pe(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===n)return 0;var o=pe(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=pe(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(i,n,o,s)}function se(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ae(t,e,r){for(var i,n,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=r.search({minX:a,minY:u,maxX:l,maxY:c}),p=0;p<h.length;p++)if(i=h[p].p,n=h[p].next.p,o=t,i!==(s=e)&&n!==o&&$t(i,n,o)>0!=$t(i,n,s)>0&&$t(o,s,i)>0!=$t(o,s,n)>0)return!1;return!0}function ue(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function le(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function ce(t,e){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function he(t,e,r){var i=e[0],n=e[1],o=r[0]-i,s=r[1]-n;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-n)*s)/(o*o+s*s);a>1?(i=r[0],n=r[1]):a>0&&(i+=o*a,n+=s*a)}return(o=t[0]-i)*o+(s=t[1]-n)*s}function pe(t,e,r,i,n,o,s,a){var u,l,c,h,p=r-t,f=i-e,d=s-n,g=a-o,y=t-n,v=e-o,m=p*p+f*f,_=p*d+f*g,b=d*d+g*g,S=p*y+f*v,x=d*y+g*v,O=m*b-_*_,E=O,C=O;0===O?(l=0,E=1,h=x,C=b):(h=m*x-_*S,(l=_*x-b*S)<0?(l=0,h=x,C=b):l>E&&(l=E,h=x+_,C=b)),h<0?(h=0,-S<0?l=0:-S>m?l=E:(l=-S,E=m)):h>C&&(h=C,-S+_<0?l=0:-S+_>m?l=E:(l=-S+_,E=m));var T=(1-(c=0===h?0:h/C))*n+c*s-((1-(u=0===l?0:l/E))*t+u*r),P=(1-c)*o+c*a-((1-u)*e+u*i);return T*T+P*P}function fe(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var r=[];if(A(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=te(r,e.concavity);return i.length>3?c([i]):null}function de(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Q(t),n=nt(e),o=n.type,s=e.bbox,a=n.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(ge(i,a[l][0],r.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)ge(i,a[l][h],!r.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function ge(t,e,r){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,o=e.length-1;n<e.length;o=n++){var s=e[n][0],a=e[n][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!r;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(i=!i)}return i}function ye(t,e){var r=[];return D(t,function(t){var i=!1;if("Point"===t.geometry.type)B(e,function(e){de(t,e)&&(i=!0)}),i&&r.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var n=[];B(e,function(e){A(t,function(t){de(t,e)&&(i=!0,n.push(t))})}),i&&r.push(y(n))}}),d(r)}function ve(t,e,r){void 0===r&&(r={});var i=Q(t),n=Q(e),o=C(n[1]-i[1]),s=C(n[0]-i[0]),a=C(i[1]),u=C(n[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r.units)}function me(t,e){var r=!1;return d(function(t){if(t.length<3)return[];t.sort(be);for(var e,r,i,n,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,f=l-u,d=h-c,g=f>d?f:d,y=.5*(l+u),v=.5*(h+c),m=[new _e({__sentinel:!0,x:y-20*g,y:v-g},{__sentinel:!0,x:y,y:v+20*g},{__sentinel:!0,x:y+20*g,y:v-g})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,p=m.length;p--;)(f=t[a].x-m[p].x)>0&&f*f>m[p].r?(_.push(m[p]),m.splice(p,1)):f*f+(d=t[a].y-m[p].y)*d>m[p].r||(b.push(m[p].a,m[p].b,m[p].b,m[p].c,m[p].c,m[p].a),m.splice(p,1));for(Se(b),p=b.length;p;)r=b[--p],e=b[--p],i=t[a],n=r.x-e.x,o=r.y-e.y,s=2*(n*(i.y-r.y)-o*(i.x-r.x)),Math.abs(s)>1e-12&&m.push(new _e(e,r,i))}for(Array.prototype.push.apply(_,m),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map(function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(r=!0,i.z=t.geometry.coordinates[2]),i})).map(function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],n=[t.c.x,t.c.y],o={};return r?(e.push(t.a.z),i.push(t.b.z),n.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},c([[e,i,n,e]],o)}))}te.default=ee;var _e=function(t,e,r){this.a=t,this.b=e,this.c=r;var i,n,o=e.x-t.x,s=e.y-t.y,a=r.x-t.x,u=r.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+r.x)+u*(t.y+r.y),h=2*(o*(r.y-e.y)-s*(r.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,i=this.x-t.x,n=this.y-t.y,this.r=i*i+n*n};function be(t,e){return e.x-t.x}function Se(t){var e,r,i,n,o,s=t.length;t:for(;s;)for(r=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(n=t[--i])&&r===o||e===o&&r===n){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function xe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Oe(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(t){return Oe(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ee(t);default:throw new Error("unknown GeoJSON type")}}function Oe(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=function t(e){var r={};return e?(Object.keys(e).forEach(function(i){var n=e[i];"object"==typeof n?null===n?r[i]=null:Array.isArray(n)?r[i]=n.map(function(t){return t}):r[i]=t(n):r[i]=n}),r):r}(t.properties),e.geometry=Ee(t.geometry),e}function Ee(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Ee(t)}),e):(e.coordinates=function t(e){var r=e;return"object"!=typeof r[0]?r.slice():r.map(function(e){return t(e)})}(t.coordinates),e)}function Ce(t){return t[0].toString()+","+t[1].toString()}function Te(t){return t}function Pe(t,e){var r=function(t){if(null==t)return Te;var e,r,i=t.scale[0],n=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*i+o,c[1]=(r+=t[1])*n+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),i=t.arcs;function n(t,e){e.length&&e.pop();for(var n=i[t<0?~t:t],o=0,s=n.length;o<s;++o)e.push(r(n[o],o));t<0&&function(t,e){for(var r,i=t.length,n=i-e;n<--i;)r=t[n],t[n++]=t[i],t[i]=r}(e,s)}function o(t){return r(t)}function s(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var r,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":r=o(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(o);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:i,coordinates:r}}(e)}var we=Object.prototype.hasOwnProperty;function Ie(t,e,r,i,n,o){3===arguments.length&&(i=o=Array,n=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=n;return{set:function(i,o){for(var l=e(i)&u,c=s[l],h=0;c!=n;){if(r(c,i))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=i,a[l]=o,o},maybeSet:function(i,o){for(var l=e(i)&u,c=s[l],h=0;c!=n;){if(r(c,i))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=i,a[l]=o,o},get:function(i,o){for(var l=e(i)&u,c=s[l],h=0;c!=n;){if(r(c,i))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,r=s.length;e<r;++e){var i=s[e];i!=n&&t.push(i)}return t}}}function Le(t,e){return t[0]===e[0]&&t[1]===e[1]}var Re=new ArrayBuffer(16),Me=new Float64Array(Re),Ae=new Uint32Array(Re);function je(t){Me[0]=t[0],Me[1]=t[1];var e=Ae[0]^Ae[1];return 2147483647&(e<<5^e>>7^Ae[2]^Ae[3])}function Ne(t,e,r,i){Fe(t,e,r),Fe(t,e,e+i),Fe(t,e+i,r)}function Fe(t,e,r){for(var i,n=e+(r---e>>1);e<n;++e,--r)i=t[e],t[e]=t[r],t[r]=i}function De(t){var e={type:"GeometryCollection",geometries:t.features.map(ke)};return null!=t.bbox&&(e.bbox=t.bbox),e}function ke(t){var e,r=Ge(t.geometry);for(e in null!=t.id&&(r.id=t.id),null!=t.bbox&&(r.bbox=t.bbox),t.properties){r.properties=t.properties;break}return r}function Ge(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ge)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Be(t){var e,r=t[0],i=t[1];return i<r&&(e=r,r=i,i=e),r+31*i}function Ue(t,e){var r,i=t[0],n=t[1],o=e[0],s=e[1];return n<i&&(r=i,i=n,n=r),s<o&&(r=o,o=s,s=r),i===o&&n===s}function Ve(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=xe(t));var r=[];V(t,function(t){r.push(t.geometry)});var i=function(t,e){var r=function(t){var e=1/0,r=1/0,i=-1/0,n=-1/0;function o(t){null!=t&&we.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>i&&(i=o),s<r&&(r=s),s>n&&(n=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return i>=e&&n>=r?[e,r,i,n]:void 0}(t=function(t){var e,r,i={};for(e in t)i[e]=null==(r=t[e])?{type:null}:("FeatureCollection"===r.type?De:"Feature"===r.type?ke:Ge)(r);return i}(t)),i=e>0&&r&&function(t,e,r){var i=e[0],n=e[1],o=e[2],s=e[3],a=o-i?(r-1)/(o-i):1,u=s-n?(r-1)/(s-n):1;function l(t){return[Math.round((t[0]-i)*a),Math.round((t[1]-n)*u)]}function c(t,e){for(var r,o,s,l,c,h=-1,p=0,f=t.length,d=new Array(f);++h<f;)r=t[h],l=Math.round((r[0]-i)*a),c=Math.round((r[1]-n)*u),l===o&&c===s||(d[p++]=[o=l,s=c]);for(d.length=p;p<e;)p=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function p(t){return c(t,4)}function f(t){return t.map(p)}function d(t){null!=t&&we.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=f(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(f)}};for(var y in t)d(t[y]);return{scale:[1/a,1/u],translate:[i,n]}}(t,r,e),n=function(t){var e,r,i,n,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,i=0,n=s.length;i<n;++i)for(e=s[i];e=e.next;)++u;for(i=0,n=a.length;i<n;++i)for(r=a[i];r=r.next;)++u;var l=Ie(2*u*1.4,je,Le),c=t.arcs=[];for(i=0,n=s.length;i<n;++i){e=s[i];do{h(e)}while(e=e.next)}for(i=0,n=a.length;i<n;++i)if((r=a[i]).next)do{h(r)}while(r=r.next);else p(r);function h(t){var e,r,i,n,s,a,u,h;if(i=l.get(e=o[t[0]]))for(u=0,h=i.length;u<h;++u)if(f(n=i[u],t))return t[0]=n[0],void(t[1]=n[1]);if(s=l.get(r=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):l.set(e,[t]),s?s.push(t):l.set(r,[t]),c.push(t)}function p(t){var e,r,i,n,s;if(r=l.get(o[t[0]]))for(n=0,s=r.length;n<s;++n){if(g(i=r[n],t))return t[0]=i[0],void(t[1]=i[1]);if(y(i,t))return t[0]=i[1],void(t[1]=i[0])}if(r=l.get(e=o[t[0]+v(t)]))for(n=0,s=r.length;n<s;++n){if(g(i=r[n],t))return t[0]=i[0],void(t[1]=i[1]);if(y(i,t))return t[0]=i[1],void(t[1]=i[0])}r?r.push(t):l.set(e,[t]),c.push(t)}function f(t,e){var r=t[0],i=e[0],n=t[1];if(r-n!=i-e[1])return!1;for(;r<=n;++r,++i)if(!Le(o[r],o[i]))return!1;return!0}function d(t,e){var r=t[0],i=e[0],n=t[1],s=e[1];if(r-n!=i-s)return!1;for(;r<=n;++r,--s)if(!Le(o[r],o[s]))return!1;return!0}function g(t,e){var r=t[0],i=e[0],n=t[1]-r;if(n!==e[1]-i)return!1;for(var s=v(t),a=v(e),u=0;u<n;++u)if(!Le(o[r+(u+s)%n],o[i+(u+a)%n]))return!1;return!0}function y(t,e){var r=t[0],i=e[0],n=t[1],s=e[1],a=n-r;if(a!==s-i)return!1;for(var u=v(t),l=a-v(e),c=0;c<a;++c)if(!Le(o[r+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function v(t){for(var e=t[0],r=t[1],i=e,n=i,s=o[i];++i<r;){var a=o[i];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(n=i,s=a)}return n-e}return t}(function(t){var e,r,i,n=function(t){var e,r,i,n,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=Ie(1.4*o.length,S,x,Int32Array,-1,Int32Array),e=new Int32Array(o.length),r=0,i=o.length;r<i;++r)e[r]=t.maybeSet(r,r);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),p=new Int8Array(o.length),f=0;for(e=0,r=o.length;e<r;++e)l[e]=c[e]=h[e]=-1;for(e=0,r=s.length;e<r;++e){var d=s[e],g=d[0],y=d[1];for(i=u[g],n=u[++g],++f,p[i]=1;++g<=y;)b(e,i,i=n,n=u[g]);++f,p[n]=1}for(e=0,r=o.length;e<r;++e)l[e]=-1;for(e=0,r=a.length;e<r;++e){var v=a[e],m=v[0]+1,_=v[1];for(b(e,u[_-1],i=u[m-1],n=u[m]);++m<=_;)b(e,i,i=n,n=u[m])}function b(t,e,r,i){if(l[r]!==t){l[r]=t;var n=c[r];if(n>=0){var o=h[r];n===e&&o===i||n===i&&o===e||(++f,p[r]=1)}else c[r]=e,h[r]=i}}function S(t){return je(o[t])}function x(t,e){return Le(o[t],o[e])}l=c=h=null;var O,E=function(t,e,r,i,n){3===arguments.length&&(i=Array,n=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=n;return{add:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=n;){if(r(u,i))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=n;){if(r(u,i))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,r=o.length;e<r;++e){var i=o[e];i!=n&&t.push(i)}return t}}}(1.4*f,je,Le);for(e=0,r=o.length;e<r;++e)p[O=u[e]]&&E.add(o[O]);return E}(t),o=t.coordinates,s=t.lines,a=t.rings;for(r=0,i=s.length;r<i;++r)for(var u=s[r],l=u[0],c=u[1];++l<c;)n.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(r=0,i=a.length;r<i;++r)for(var h=a[r],p=h[0],f=p,d=h[1],g=n.has(o[p]);++f<d;)n.has(o[f])&&(g?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(Ne(o,p,d,d-f),o[d]=o[p],g=!0,f=p));return t}(function(t){var e=-1,r=[],i=[],n=[];function o(t){t&&we.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var i=0,o=t.length;i<o;++i)n[++e]=t[i];var s={0:e-o+1,1:e};return r.push(s),s}function u(t){for(var r=0,o=t.length;r<o;++r)n[++e]=t[r];var s={0:e-o+1,1:e};return i.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:n,lines:r,rings:i,objects:t}}(t))),o=n.coordinates,s=Ie(1.4*n.arcs.length,Be,Ue);function a(t){t&&we.call(u,t.type)&&u[t.type](t)}t=n.objects,n.bbox=r,n.arcs=n.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete n.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var r=s.get(t);e.push(t[0]<t[1]?r:~r)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return i&&(n.transform=i,n.arcs=function(t){for(var e=-1,r=t.length;++e<r;){for(var i,n,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)i=(l=o[s])[0],n=l[1],i===c&&n===h||(o[a++]=[i-c,n-h],c=i,h=n);1===a&&(o[a++]=[0,0]),o.length=a}return t}(n.arcs)),n}({geoms:m(r).geometry});return function(t){return Pe(t,function(t,e){var r={},i=[],n=[];function o(t){t.forEach(function(e){e.forEach(function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)})}),i.push(t)}function s(e){return function(t){for(var e,r=-1,i=t.length,n=t[i-1],o=0;++r<i;)e=n,n=t[r],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)}(Pe(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),i.forEach(function(t){if(!t._){var e=[],i=[t];for(t._=1,n.push(e);t=i.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].forEach(function(t){t._||(t._=1,i.push(t))})})})}}),i.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:n.map(function(e){var i,n=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){r[t<0?~t:t].length<2&&n.push(t)})})}),(i=(n=function(t,e){var r={},i={},n={},o=[],s=-1;function a(t,e){for(var i in t){var n=t[i];delete e[n.start],delete n.start,delete n.end,n.forEach(function(t){r[t<0?~t:t]=1}),o.push(n)}}return e.forEach(function(r,i){var n,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(n=e[++s],e[s]=r,e[i]=n)}),e.forEach(function(e){var r,o,s=function(e){var r,i=t.arcs[e<0?~e:e],n=i[0];return t.transform?(r=[0,0],i.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})):r=i[i.length-1],e<0?[r,n]:[n,r]}(e),a=s[0],u=s[1];if(r=n[a])if(delete n[r.end],r.push(e),r.end=u,o=i[u]){delete i[o.start];var l=o===r?r:r.concat(o);i[l.start=r.start]=n[l.end=o.end]=l}else i[r.start]=n[r.end]=r;else if(r=i[u])if(delete i[r.start],r.unshift(e),r.start=a,o=n[a]){delete n[o.end];var c=o===r?r:o.concat(r);i[c.start=o.start]=n[c.end=r.end]=c}else i[r.start]=n[r.end]=r;else i[(r=[e]).start=a]=n[r.end=u]=r}),a(n,i),a(i,n),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}(t,n)).length)>1)for(var o,a,u=1,l=s(n[0]);u<i;++u)(o=s(n[u]))>l&&(a=n[0],n[0]=n[u],n[u]=a,l=o);return n}).filter(function(t){return t.length>0})}}.apply(this,arguments))}(i,i.objects.geoms.geometries)}function ze(t,e){void 0===e&&(e={});var r="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var i=ot(t),n=[];switch(i){case"LineString":n=We(t);break;case"MultiLineString":case"Polygon":$(t).forEach(function(t){n.push(We(t))});break;case"MultiPolygon":$(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(We(t))}),n.push(e)});break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(n.push(t),o[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===r?(t.coordinates=n,t):{type:i,coordinates:n}:!0===r?(t.geometry.coordinates=n,t):s({type:i,coordinates:n},t.properties,{bbox:t.bbox,id:t.id})}function We(t){var e=$(t);if(2===e.length&&!Ye(e[0],e[1]))return e;var r=[],i=e.length-1,n=r.length;r.push(e[0]);for(var o=1;o<i;o++){var s=r[r.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(r.push(e[o]),(n=r.length)>2&&Xe(r[n-3],r[n-1],r[n-2])&&r.splice(r.length-2,1))}if(r.push(e[e.length-1]),n=r.length,Ye(e[0],e[e.length-1])&&n<4)throw new Error("invalid polygon");return Xe(r[n-3],r[n-1],r[n-2])&&r.splice(r.length-2,1),r}function Ye(t,e){return t[0]===e[0]&&t[1]===e[1]}function Xe(t,e,r){var i=r[0],n=r[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0==(i-o)*c-(n-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=i&&i<=a:a<=i&&i<=o:c>0?s<=n&&n<=u:u<=n&&n<=s)}function Ze(t,e,r){var i=e.x,n=e.y,o=r.x-i,s=r.y-n;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-n)*s)/(o*o+s*s);a>1?(i=r.x,n=r.y):a>0&&(i+=o*a,n+=s*a)}return(o=t.x-i)*o+(s=t.y-n)*s}function He(t,e,r){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return function(t,e){var r=t.length-1,i=[t[0]];return function t(e,r,i,n,o){for(var s,a=n,u=r+1;u<i;u++){var l=Ze(e[u],e[r],e[i]);l>a&&(s=u,a=l)}a>n&&(s-r>1&&t(e,r,s,n,o),o.push(e[s]),i-s>1&&t(e,s,i,n,o))}(t,0,r,e,i),i.push(t[r]),i}(t=r?t:function(t,e){for(var r,i,n,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)n=a,o=void 0,s=void 0,(o=(i=r=t[l]).x-n.x)*o+(s=i.y-n.y)*s>e&&(u.push(r),a=r);return a!==r&&u.push(r),u}(t,i),i)}function qe(t,e,r){return He(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,r).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function Ke(t,e,r){return t.map(function(t){var i=t.map(function(t){return{x:t[0],y:t[1]}});if(i.length<4)throw new Error("invalid polygon");for(var n=He(i,e,r).map(function(t){return[t.x,t.y]});!Je(n);)n=He(i,e-=.01*e,r).map(function(t){return[t.x,t.y]});return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n})}function Je(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var Qe=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],i=this.points[e+1];this.centers.push({x:(r.x+i.x)/2,y:(r.y+i.y)/2,z:(r.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var n=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+n),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+n),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var n=this.pos(i);Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y)+(n.z-r.z)*(n.z-r.z))>t&&(e.push(i),r=n)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*r);return function(t,e,r,i,n){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:n.x*o[0]+i.x*o[1]+r.x*o[2]+e.x*o[3],y:n.y*o[0]+i.y*o[1]+r.y*o[2]+e.y*o[3],z:n.z*o[0]+i.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t}();function $e(t,e){void 0===e&&(e={});for(var r=e.resolution||1e4,i=e.sharpness||.85,n=[],o=nt(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new Qe({duration:r,points:o,sharpness:i}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&n.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),p(n,e.properties)}function tr(t,e){void 0===e&&(e={});var r=Number(t[0]),i=Number(t[1]),n=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[r,i];return c([[s,[n,i],[n,o],[r,o],s]],e.properties,{bbox:t,id:e.id})}function er(t){return tr(J(t))}function rr(t){var e=t[0],r=t[1],i=t[2],n=t[3];if(ve(t.slice(0,2),[i,r])>=ve(t.slice(0,2),[e,n])){var o=(r+n)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(n-r)/2,r,s+(n-r)/2,n]}function ir(t,e,r,i){void 0===i&&(i={});var n=Q(t),o=C(n[0]),s=C(n[1]),a=C(r),l=S(e,i.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([E(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),E(c)],i.properties)}function nr(t,e,r){void 0===r&&(r={});for(var i=r.steps||64,n=r.properties?r.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(ir(t,e,-360*s/i,r).geometry.coordinates);return o.push(o[0]),c([o],n)}function or(t,e,r){if(void 0===r&&(r={}),!0===r.final)return function(t,e){var r=or(e,t);return(r+180)%360}(t,e);var i=Q(t),n=Q(e),o=C(i[0]),s=C(n[0]),a=C(i[1]),u=C(n[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return E(Math.atan2(l,c))}function sr(t,e){void 0===e&&(e={});var r=J(t);return u([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}function ar(t,e){void 0===e&&(e={});var r=0,i=0,n=0;return A(t,function(t){r+=t[0],i+=t[1],n++},!0),u([r/n,i/n],e.properties)}function ur(t){var e=[];return"FeatureCollection"===t.type?D(t,function(t){A(t,function(r){e.push(u(r,t.properties))})}):A(t,function(r){e.push(u(r,t.properties))}),d(e)}var lr=hr,cr=hr;function hr(t,e,r){r=r||2;var i,n,o,s,a,u,l,c=e&&e.length,h=c?e[0]*r:t.length,p=pr(t,0,h,r,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,r,i){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=pr(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(xr(s));for(a.sort(_r),n=0;n<a.length;n++)br(a[n],r),r=fr(r,r.next);return r}(t,e,p,r)),t.length>80*r){i=o=t[0],n=s=t[1];for(var d=r;d<h;d+=r)(a=t[d])<i&&(i=a),(u=t[d+1])<n&&(n=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-i,s-n))?1/l:0}return dr(p,f,r,i,n,l),f}function pr(t,e,r,i,n){var o,s;if(n===Ar(t,e,r,i)>0)for(o=e;o<r;o+=i)s=Lr(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=Lr(o,t[o],t[o+1],s);return s&&Tr(s,s.next)&&(Rr(s),s=s.next),s}function fr(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!Tr(i,i.next)&&0!==Cr(i.prev,i,i.next))i=i.next;else{if(Rr(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function dr(t,e,r,i,n,o,s){if(t){!s&&o&&function(t,e,r,i){var n=t;do{null===n.z&&(n.z=Sr(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,u,l=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;a>0||u>0&&i;)0!==a&&(0===u||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,l*=2}while(s>1)}(n)}(t,i,n,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?yr(t,i,n,o):gr(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),Rr(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?dr(t=vr(t,e,r),e,r,i,n,o,2):2===s&&mr(t,e,r,i,n,o):dr(fr(t),e,r,i,n,o,1);break}}}function gr(t){var e=t.prev,r=t,i=t.next;if(Cr(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(Or(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Cr(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function yr(t,e,r,i){var n=t.prev,o=t,s=t.next;if(Cr(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,u=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,l=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,c=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,h=Sr(a,u,e,r,i),p=Sr(l,c,e,r,i),f=t.prevZ,d=t.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&Or(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Cr(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&Or(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Cr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&Or(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&Cr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&Or(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Cr(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function vr(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!Tr(n,o)&&Pr(n,i,i.next,o)&&wr(n,o)&&wr(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),Rr(i),Rr(i.next),i=t=o),i=i.next}while(i!==t);return i}function mr(t,e,r,i,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Er(s,a)){var u=Ir(s,a);return s=fr(s,s.next),u=fr(u,u.next),dr(s,e,r,i,n,o),void dr(u,e,r,i,n,o)}a=a.next}s=s.next}while(s!==t)}function _r(t,e){return t.x-e.x}function br(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s){if(s=a,a===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===s)return r.prev;var u,l=r,c=r.x,h=r.y,p=1/0;for(i=r.next;i!==l;)n>=i.x&&i.x>=c&&n!==i.x&&Or(o<h?n:s,o,c,h,o<h?s:n,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(n-i.x))<p||u===p&&i.x>r.x)&&wr(i,t)&&(r=i,p=u),i=i.next;return r}(t,e)){var r=Ir(e,t);fr(r,r.next)}}function Sr(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function xr(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function Or(t,e,r,i,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(n-s)*(i-a)>=0}function Er(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Pr(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&wr(t,e)&&wr(e,t)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)}function Cr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Tr(t,e){return t.x===e.x&&t.y===e.y}function Pr(t,e,r,i){return!!(Tr(t,e)&&Tr(r,i)||Tr(t,i)&&Tr(r,e))||Cr(t,e,r)>0!=Cr(t,e,i)>0&&Cr(r,i,t)>0!=Cr(r,i,e)>0}function wr(t,e){return Cr(t.prev,t,t.next)<0?Cr(t,e,t.next)>=0&&Cr(t,t.prev,e)>=0:Cr(t,e,t.prev)<0||Cr(t,t.next,e)<0}function Ir(t,e){var r=new Mr(t.i,t.x,t.y),i=new Mr(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function Lr(t,e,r,i){var n=new Mr(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Rr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Mr(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ar(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}function jr(t){var e=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}(t),r=lr(e.vertices,e.holes,2),i=[],n=[];r.forEach(function(t,i){var o=r[i];n.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<n.length;o+=3){var s=n.slice(o,o+3);s.push(n[o]),i.push(c([s]))}return i}function Nr(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,i=1/0,n=0;return D(e,function(e,r){var o=ve(t,e);o<i&&(n=r,i=o)}),(r=xe(e.features[n])).properties.featureIndex=n,r.properties.distanceToPoint=i,r}function Fr(t){if(!t)throw new Error("geojson is required");var e=[];return V(t,function(t){!function(t,e){var r=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":r=$(i);break;case"LineString":r=[$(i)]}r.forEach(function(r){(function(t,e){var r=[];return t.reduce(function(t,i){var n=p([t,i],e);return n.bbox=function(t,e){var r=t[0],i=t[1],n=e[0],o=e[1];return[r<n?r:n,i<o?i:o,r>n?r:n,i>o?i:o]}(t,i),r.push(n),i}),r})(r,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}hr.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(Ar(t,0,o,r));if(n)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Ar(t,l,c,r))}var h=0;for(a=0;a<i.length;a+=3){var p=i[a]*r,f=i[a+1]*r,d=i[a+2]*r;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},hr.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r},lr.default=cr;var Dr=kt(function(t,e){function r(t,e,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,i)}function n(t,e,i){void 0===i&&(i={});for(var n=0,o=t;n<o.length;n++){var s=o[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function a(t,e,i){return void 0===i&&(i={}),r({type:"MultiLineString",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),r({type:"MultiPoint",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),r({type:"MultiPolygon",coordinates:t},e,i)}function c(t,r){void 0===r&&(r="kilometers");var i=e.factors[r];if(!i)throw new Error(r+" units is invalid");return t*i}function h(t,r){void 0===r&&(r="kilometers");var i=e.factors[r];if(!i)throw new Error(r+" units is invalid");return t/i}function p(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=r,e.geometry=function(t,e,r){switch(t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return n(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return i(t,e)}),r)},e.polygon=n,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return n(t,e)}),r)},e.lineString=o,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map(function(t){return o(t,e)}),r)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),r({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),r)},e.convertArea=function(t,r,i){if(void 0===r&&(r="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=e.areaFactors[r];if(!n)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/n*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!f(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function kr(t,e,r){if(null!==t)for(var i,n,o,s,a,u,l,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,g="Feature"===f,y=d?t.features.length:1,v=0;v<y;v++){a=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var S=s.type;switch(h=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===e(u,p,v,_,b))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],p,v,_,b))return!1;p++,"MultiPoint"===S&&_++}"LineString"===S&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(n=0;n<u[i].length-h;n++){if(!1===e(u[i][n],p,v,_,b))return!1;p++}"MultiLineString"===S&&_++,"Polygon"===S&&b++}"Polygon"===S&&_++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(b=0,n=0;n<u[i].length;n++){for(o=0;o<u[i][n].length-h;o++){if(!1===e(u[i][n][o],p,v,_,b))return!1;p++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===kr(s.geometries[i],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gr(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function Br(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function Ur(t,e){var r,i,n,o,s,a,u,l,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(r=0;r<g;r++){for(a=f?t.features[r].geometry:d?t.geometry:t,l=f?t.features[r].properties:d?t.properties:{},c=f?t.features[r].bbox:d?t.bbox:void 0,h=f?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<s;n++)if(null!==(o=u?a.geometries[n]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,c,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],p,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,c,h))return!1;p++}}function Vr(t,e){Ur(t,function(t,r,i,n,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Dr.feature(t,i,{bbox:n,id:o}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Dr.feature(l,i),r,u))return!1}})}function zr(t,e){Vr(t,function(t,r,i){var n=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==kr(t,function(o,c,h,p,f){if(void 0===s||r>a||p>u||f>l)return s=o,a=r,u=p,l=f,void(n=0);var d=Dr.lineString([s,o],t.properties);if(!1===e(d,r,i,f,n))return!1;n++,s=o})&&void 0}}})}function Wr(t,e){if(!t)throw new Error("geojson is required");Vr(t,function(t,r,i){if(null!==t.geometry){var n=t.geometry.type,o=t.geometry.coordinates;switch(n){case"LineString":if(!1===e(t,r,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Dr.lineString(o[s],t.properties),r,i,s))return!1}}})}var Yr=kr,Xr=Br,Zr=Vr,Hr=Ur,qr=Wr,Kr=Gr,Jr=zr,Qr=Object.defineProperty({coordAll:function(t){var e=[];return kr(t,function(t){e.push(t)}),e},coordEach:Yr,coordReduce:function(t,e,r,i){var n=r;return kr(t,function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)},i),n},featureEach:Xr,featureReduce:function(t,e,r){var i=r;return Br(t,function(t,n){i=0===n&&void 0===r?t:e(i,t,n)}),i},findPoint:function(t,e){if(e=e||{},!Dr.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return Dr.point(u,a,e);case"MultiPoint":return n<0&&(n=u.length+n),Dr.point(u[n],a,e);case"LineString":return s<0&&(s=u.length+s),Dr.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Dr.point(u[o][s],a,e);case"MultiLineString":return n<0&&(n=u.length+n),s<0&&(s=u[n].length+s),Dr.point(u[n][s],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),s<0&&(s=u[n][o].length-s),Dr.point(u[n][o][s],a,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(e=e||{},!Dr.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":a=a||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Dr.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Dr.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return n<0&&(n=u.length+n),s<0&&(s=u[n].length+s-1),Dr.lineString([u[n][s],u[n][s+1]],a,e);case"MultiPolygon":return n<0&&(n=u.length+n),o<0&&(o=u[n].length+o),s<0&&(s=u[n][o].length-s-1),Dr.lineString([u[n][o][s],u[n][o][s+1]],a,e)}throw new Error("geojson is invalid")},flattenEach:Zr,flattenReduce:function(t,e,r){var i=r;return Vr(t,function(t,n,o){i=0===n&&0===o&&void 0===r?t:e(i,t,n,o)}),i},geomEach:Hr,geomReduce:function(t,e,r){var i=r;return Ur(t,function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)}),i},lineEach:qr,lineReduce:function(t,e,r){var i=r;return Wr(t,function(t,n,o,s){i=0===n&&void 0===r?t:e(i,t,n,o,s)}),i},propEach:Kr,propReduce:function(t,e,r){var i=r;return Gr(t,function(t,n){i=0===n&&void 0===r?t:e(i,t,n)}),i},segmentEach:Jr,segmentReduce:function(t,e,r){var i=r,n=!1;return zr(t,function(t,o,s,a,u){i=!1===n&&void 0===r?t:e(i,t,o,s,a,u),n=!0}),i}},"__esModule",{value:!0});function $r(t){var e=[1/0,1/0,-1/0,-1/0];return Qr.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}$r.default=$r;var ti=$r,ei=Object.defineProperty({default:ti},"__esModule",{value:!0}).default,ri=Qr.featureEach,ii=(Qr.coordEach,Dr.polygon,Dr.featureCollection);function ni(t){var e=Ot(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ei(t),Ot.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:ei(t),e.push(t)}):ri(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:ei(t),e.push(t)}),Ot.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ei(t),Ot.prototype.remove.call(this,t,e)},e.clear=function(){return Ot.prototype.clear.call(this)},e.search=function(t){var e=Ot.prototype.search.call(this,this.toBBox(t));return ii(e)},e.collides=function(t){return Ot.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Ot.prototype.all.call(this);return ii(t)},e.toJSON=function(){return Ot.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ot.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=ei(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=ei(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var oi=ni,si=ni;function ai(t,e){var r={},i=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=ui(t,e);return n&&i.push(n),d(i)}var o=oi();return o.load(Fr(e)),D(Fr(t),function(t){D(o.search(t),function(e){var n=ui(t,e);if(n){var o=$(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),d(i)}function ui(t,e){var r=$(t),i=$(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var n=r[0][0],o=r[0][1],s=r[1][0],a=r[1][1],l=i[0][0],c=i[0][1],h=i[1][0],p=i[1][1],f=(p-c)*(s-n)-(h-l)*(a-o),d=(h-l)*(o-c)-(p-c)*(n-l),g=(s-n)*(o-c)-(a-o)*(n-l);if(0===f)return null;var y=d/f,v=g/f;return y>=0&&y<=1&&v>=0&&v<=1?u([n+y*(s-n),o+y*(a-o)]):null}function li(t,e,r){void 0===r&&(r={});var i=u([1/0,1/0],{dist:1/0}),n=0;return V(t,function(t){for(var o=$(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=ve(e,a,r);var l=u(o[s+1]);l.properties.dist=ve(e,l,r);var c=ve(a,l,r),h=Math.max(a.properties.dist,l.properties.dist),f=or(a,l),d=ir(e,h,f+90,r),g=ir(e,h,f-90,r),y=ai(p([d.geometry.coordinates,g.geometry.coordinates]),p([a.geometry.coordinates,l.geometry.coordinates])),v=null;y.features.length>0&&((v=y.features[0]).properties.dist=ve(e,v,r),v.properties.location=n+ve(a,v,r)),a.properties.dist<i.properties.dist&&((i=a).properties.index=s,i.properties.location=n),l.properties.dist<i.properties.dist&&((i=l).properties.index=s+1,i.properties.location=n+c),v&&v.properties.dist<i.properties.dist&&((i=v).properties.index=s),n+=c}}),i}function ci(t,e,i){void 0===i&&(i={});var n=Q(t),o=Q(e);return o[0]+=o[0]-n[0]>180?-360:n[0]-o[0]>180?360:0,T(function(t,e,i){var n=i=void 0===i?r:Number(i),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*n}(n,o),"meters",i.units)}function hi(t,e,r){if(void 0===r&&(r={}),r.method||(r.method="geodesic"),r.units||(r.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):rt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=p(e):"LineString"===e.type?e=s(e):rt(e,"LineString","line");var i=1/0,n=t.geometry.coordinates;return W(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,r,i){var n=[r[0]-e[0],r[1]-e[1]],o=pi([t[0]-e[0],t[1]-e[1]],n);if(o<=0)return fi(t,e,{method:i.method,units:"degrees"});var s=pi(n,n);if(s<=o)return fi(t,r,{method:i.method,units:"degrees"});var a=o/s;return fi(t,[e[0]+a*n[0],e[1]+a*n[1]],{method:i.method,units:"degrees"})}(n,e,o,r);s<i&&(i=s)}),T(i,"degrees",r.units)}function pi(t,e){return t[0]*e[0]+t[1]*e[1]}function fi(t,e,r){return"planar"===r.method?ci(t,e,r):ve(t,e,r)}function di(t,e,r,i,n,o,s,a){var u,l,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(r-t)-(s-n)*(i-e))?null!==p.x&&null!==p.y&&p:(h=(r-t)*(l=e-o)-(i-e)*(c=t-n),l=((s-n)*l-(a-o)*c)/u,c=h/u,p.x=t+l*(r-t),p.y=e+l*(i-e),l>=0&&l<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function gi(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([s(t)]):d([t]):t}(t),r=sr(e),i=!1,n=0;!i&&n<e.features.length;){var o,a=e.features[n].geometry,l=!1;if("Point"===a.type)r.geometry.coordinates[0]===a.coordinates[0]&&r.geometry.coordinates[1]===a.coordinates[1]&&(i=!0);else if("MultiPoint"===a.type){var c=!1;for(o=0;!c&&o<a.coordinates.length;)r.geometry.coordinates[0]===a.coordinates[o][0]&&r.geometry.coordinates[1]===a.coordinates[o][1]&&(i=!0,c=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)yi(r.geometry.coordinates[0],r.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,i=!0),o++;else if("MultiLineString"===a.type)for(var h=0;h<a.coordinates.length;){l=!1,o=0;for(var p=a.coordinates[h];!l&&o<p.length-1;)yi(r.geometry.coordinates[0],r.geometry.coordinates[1],p[o][0],p[o][1],p[o+1][0],p[o+1][1])&&(l=!0,i=!0),o++;h++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||de(r,a)&&(i=!0);n++}if(i)return r;var f=d([]);for(n=0;n<e.features.length;n++)f.features=f.features.concat(ur(e.features[n]).features);return u(Nr(r,f).geometry.coordinates)}function yi(t,e,r,i,n,o){return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))===Math.sqrt((t-r)*(t-r)+(e-i)*(e-i))+Math.sqrt((n-t)*(n-t)+(o-e)*(o-e))}oi.default=si;var vi=6378137;function mi(t){return U(t,function(t,e){return t+function(t){var e,r=0;switch(t.type){case"Polygon":return _i(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=_i(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function _i(t){var e=0;if(t&&t.length>0){e+=Math.abs(bi(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(bi(t[r]))}return e}function bi(t){var e,r,i,n,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,n=u-1,o=0):s===u-1?(i=u-1,n=0,o=1):(i=s,n=s+1,o=s+2),e=t[i],r=t[n],a+=(Si(t[o][0])-Si(e[0]))*Math.sin(Si(r[1]));a=a*vi*vi/2}return a}function Si(t){return t*Math.PI/180}function xi(t,e){return void 0===e&&(e={}),Y(t,function(t,r){var i=r.geometry.coordinates;return t+ve(i[0],i[1],e)},0)}function Oi(t,e,r,i){if(!I(i=i||{}))throw new Error("options is invalid");var n,o=[];if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");n=t.coordinates}for(var s,a,u,l=n.length,c=0,h=0;h<n.length&&!(e>=c&&h===n.length-1);h++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(n[h]),p(o);a=or(n[h],n[h-1])-180,u=ir(n[h],s,a,i),o.push(u.geometry.coordinates)}if(c>=r)return(s=r-c)?(a=or(n[h],n[h-1])-180,u=ir(n[h],s,a,i),o.push(u.geometry.coordinates),p(o)):(o.push(n[h]),p(o));if(c>=e&&o.push(n[h]),h===n.length-1)return p(o);c+=ve(n[h],n[h+1],i)}if(c<e&&n.length===l)throw new Error("Start position is beyond line");var f=n[n.length-1];return p([f,f])}function Ei(t,e,r){void 0===r&&(r={});for(var i=Q(t),n=$(e),o=0;o<n.length-1;o++){var s=!1;if(r.ignoreEndVertices&&(0===o&&(s="start"),o===n.length-2&&(s="end"),0===o&&o+1===n.length-1&&(s="both")),Ci(n[o],n[o+1],i,s,void 0===r.epsilon?null:r.epsilon))return!0}return!1}function Ci(t,e,r,i,n){var o=r[0],s=r[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,p=c-u,f=(r[0]-a)*p-(r[1]-u)*h;if(null!==n){if(Math.abs(f)>n)return!1}else if(0!==f)return!1;return i?"start"===i?Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=l:l<=o&&o<a:p>0?u<s&&s<=c:c<=s&&s<u:"end"===i?Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<l:l<o&&o<=a:p>0?u<=s&&s<c:c<s&&s<=u:"both"===i&&(Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<l:l<o&&o<a:p>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=l:l<=o&&o<=a:p>0?u<=s&&s<=c:c<=s&&s<=u}function Ti(t,e){var r=nt(t),i=nt(e),n=r.type,o=i.type;switch(n){case"Point":switch(o){case"MultiPoint":return function(t,e){var r,i=!1;for(r=0;r<e.coordinates.length;r++)if(wi(e.coordinates[r],t.coordinates)){i=!0;break}return i}(r,i);case"LineString":return Ei(r,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return de(r,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var r=0;r<t.coordinates.length;r++){for(var i=!1,n=0;n<e.coordinates.length;n++)wi(t.coordinates[r],e.coordinates[n])&&(i=!0);if(!i)return!1}return!0}(r,i);case"LineString":return function(t,e){for(var r=!1,i=0;i<t.coordinates.length;i++){if(!Ei(t.coordinates[i],e))return!1;r||(r=Ei(t.coordinates[i],e,{ignoreEndVertices:!0}))}return r}(r,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var r=!0,i=!1,n=0;n<t.coordinates.length;n++){if(!(i=de(t.coordinates[1],e))){r=!1;break}i=de(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&i}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var r=0;r<t.coordinates.length;r++)if(!Ei(t.coordinates[r],e))return!1;return!0}(r,i);case"Polygon":case"MultiPolygon":return function(t,e){if(!Pi(J(e),J(t)))return!1;for(var r=!1,i=0;i<t.coordinates.length-1;i++){if(!de(t.coordinates[i],e))return!1;r||(r=de(t.coordinates[i],e,{ignoreBoundary:!0})),r||(r=de(Ii(t.coordinates[i],t.coordinates[i+1]),e,{ignoreBoundary:!0}))}return r}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var r=J(t);if(!Pi(J(e),r))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!de(t.coordinates[0][i],e))return!1;return!0}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Pi(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function wi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ii(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Li(t,e,r){void 0===r&&(r={}),r.mask&&!r.units&&(r.units="kilometers");for(var i=[],n=t[0],o=t[1],s=t[2],a=t[3],l=e/ve([n,o],[s,o],r)*(s-n),c=e/ve([n,o],[n,a],r)*(a-o),h=s-n,p=a-o,f=Math.floor(h/l),g=(p-Math.floor(p/c)*c)/2,y=n+(h-f*l)/2;y<=s;){for(var v=o+g;v<=a;){var m=u([y,v],r.properties);r.mask?Ti(m,r.mask)&&i.push(m):i.push(m),v+=c}y+=l}return d(i)}function Ri(t,e){void 0===e&&(e={});var r=e.precision,i=e.coordinates,n=e.mutate;if(r=null==r||isNaN(r)?6:r,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==n&&void 0!==n||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,r);return A(t,function(t){!function(t,e,r){t.length>r&&t.splice(r,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)}),t}function Mi(t){if(!t)throw new Error("geojson is required");var e=[];return V(t,function(t){e.push(t)}),d(e)}function Ai(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!Ai(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0}var ji=function(t,e,r,i,n){this.coord=t,this.param=e,this.ringAndEdgeIn=r,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=n},Ni=function(t,e,r,i,n,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=n,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Fi(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Di(t){for(var e=0,r=0;r<t.length-1;r++)t[r][0]<t[e][0]&&(e=r);if(Fi([t[Gi(e-1,t.length-1)],t[e],t[Gi(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function ki(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!ki(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}function Gi(t,e){return(t%e+e)%e}var Bi=Math.PI/180,Ui=180/Math.PI,Vi=function(t,e){this.lon=t,this.lat=e,this.x=Bi*t,this.y=Bi*e};Vi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Vi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Vi(e,t)};var zi=function(){this.coords=[],this.length=0};zi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Wi=function(t){this.properties=t||{},this.geometries=[]};Wi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Wi.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var Yi=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Vi(t.x,t.y),this.end=new Vi(e.x,e.y),this.properties=r||{};var i=this.start.x-this.end.x,n=this.start.y-this.end.y,o=Math.pow(Math.sin(n/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Xi(t,e){var r=[],i=oi();return V(e,function(e){if(r.forEach(function(t,e){t.id=e}),r.length){var n=i.search(e);if(n.features.length){var o=Hi(e,n);r=r.filter(function(t){return t.id!==o.id}),i.remove(o),D(Zi(o,e),function(t){r.push(t),i.insert(t)})}}else(r=Zi(t,e).features).forEach(function(t){t.bbox||(t.bbox=rr(J(t)))}),i.load(d(r))}),d(r)}function Zi(t,e){var r=[],i=$(t)[0],n=$(t)[t.geometry.coordinates.length-1];if(qi(i,Q(e))||qi(n,Q(e)))return d([t]);var o=oi(),s=Fr(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=Hi(e,a),l=k(s,function(t,i,n){var o=$(i)[1],s=Q(e);return n===u.id?(t.push(s),r.push(p(t)),qi(s,o)?[s]:[s,o]):(t.push(o),t)},[i]);return l.length>1&&r.push(p(l)),d(r)}function Hi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,i=1/0;return D(e,function(e){var n=li(e,t).properties.dist;n<i&&(r=e,i=n)}),r}function qi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ki(t,e,r,i,n){void 0===n&&(n={});var o=n.steps||64,s=Ji(r),a=Ji(i),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return p(nr(t,e,n).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,h=l,f=[],d=0;h<c;)f.push(ir(t,e,h,n).geometry.coordinates),h=l+360*++d/o;return h>c&&f.push(ir(t,e,c,n).geometry.coordinates),p(f,u)}function Ji(t){var e=t%360;return e<0&&(e+=360),e}function Qi(t,e){void 0===e&&(e={});var r=nt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return $i(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=nt(t).coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},n=[];return r.forEach(function(t){n.push(tn(t,i))}),d(n)}(r,e);default:throw new Error("invalid poly")}}function $i(t,e){return void 0===e&&(e={}),tn(nt(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function tn(t,e){return t.length>1?g(t,e):p(t[0],e)}function en(t,e){var r,i,n;void 0===e&&(e={});var o=e.properties,s=null===(r=e.autoComplete)||void 0===r||r,a=null===(i=e.orderCoords)||void 0===i||i;switch(null!==(n=e.mutate)&&void 0!==n&&n||(t=xe(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push($(rn(t,{},s,a)))}),v(u,o);default:return rn(t,o,s,a)}}function rn(t,e,r,i){e=e||("Feature"===t.type?t.properties:{});var n=nt(t),o=n.coordinates,s=n.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(o=nn(o)),c([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(r&&(t=nn(t)),i){var e=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.abs(e-i)*Math.abs(r-n)}(J(p(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),c(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function nn(t){var e=t[0],r=e[0],i=e[1],n=t[t.length-1],o=n[0],s=n[1];return r===o&&i===s||t.push(e),t}function on(t,e){var r,i,n,o,s,a,u;for(i=1;i<=8;i*=2){for(r=[],o=!(an(n=t[t.length-1],e)&i),s=0;s<t.length;s++)(u=!(an(a=t[s],e)&i))!==o&&r.push(sn(n,a,i,e)),u&&r.push(a),n=a,o=u;if(!(t=r).length)break}return r}function sn(t,e,r,i){return 8&r?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&r?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&r?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&r?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function an(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function un(t,e){for(var r=[],i=0,n=t;i<n.length;i++){var o=on(n[i],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}return r}Yi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),n=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=Ui*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(n,2)));return[Ui*Math.atan2(n,i),s]},Yi.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),n=0;n<t;++n){var o=i*n,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,p=360-l,f=1;f<r.length;++f){var d=r[f-1][0],g=r[f][0],y=Math.abs(g-d);y>p&&(g>c&&d<h||d>c&&g<h)?a=!0:y>u&&(u=y)}var v=[];if(a&&u<l){var m=[];v.push(m);for(var _=0;_<r.length;++_){var b=parseFloat(r[_][0]);if(_>0&&Math.abs(b-r[_-1][0])>p){var S=parseFloat(r[_-1][0]),x=parseFloat(r[_-1][1]),O=parseFloat(r[_][0]),E=parseFloat(r[_][1]);if(S>-180&&S<h&&180===O&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<h){m.push([-180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(S>c&&S<180&&-180===O&&_+1<r.length&&r[_-1][0]>c&&r[_-1][0]<180){m.push([180,r[_][1]]),_++,m.push([r[_][0],r[_][1]]);continue}if(S<h&&O>c){var C=S;S=O,O=C;var T=x;x=E,E=T}if(S>c&&O<h&&(O+=360),S<=180&&O>=180&&S<O){var P=(180-S)/(O-S),w=P*E+(1-P)*x;m.push([r[_-1][0]>c?180:-180,w]),(m=[]).push([r[_-1][0]>c?-180:180,w]),v.push(m)}else m=[],v.push(m);m.push([b,r[_][1]])}else m.push([r[_][0],r[_][1]])}}else{var I=[];v.push(I);for(var L=0;L<r.length;++L)I.push([r[L][0],r[L][1]])}for(var R=new Wi(this.properties),M=0;M<v.length;++M){var A=new zi;R.geometries.push(A);for(var j=v[M],N=0;N<j.length;++N)A.move_to(j[N])}return R};var ln=kt(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),cn=kt(function(t,e){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=r?i:n).supported=i,e.unsupported=n}),hn=kt(function(t){var e=Array.prototype.slice,r=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(i(t)||i(o))return!1;if(t.prototype!==o.prototype)return!1;if(cn(t))return!!cn(o)&&(t=e.call(t),o=e.call(o),r(t,o,s));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=ln(t),c=ln(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!r(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function i(t){return null==t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}});function pn(t,e,r){if(void 0===r&&(r={}),!I(r=r||{}))throw new Error("options is invalid");var i,n=r.tolerance||0,o=[],s=oi(),a=Fr(t);return s.load(a),W(e,function(t){var e=!1;t&&(D(s.search(t),function(r){if(!1===e){var o=$(t).sort(),s=$(r).sort();hn(o,s)||(0===n?Ei(o[0],r)&&Ei(o[1],r):li(r,o[0]).properties.dist<=n&&li(r,o[1]).properties.dist<=n)?(e=!0,i=i?fn(i,t):t):(0===n?Ei(s[0],t)&&Ei(s[1],t):li(t,s[0]).properties.dist<=n&&li(t,s[1]).properties.dist<=n)&&(i=i?fn(i,r):r)}}),!1===e&&i&&(o.push(i),i=void 0))}),i&&o.push(i),d(o)}function fn(t,e){var r=$(e),i=$(t),n=i[0],o=i[i.length-1],s=t.geometry.coordinates;return hn(r[0],n)?s.unshift(r[1]):hn(r[0],o)?s.push(r[1]):hn(r[1],n)?s.unshift(r[0]):hn(r[1],o)&&s.push(r[0]),t}function dn(t){var e=t%360;return e<0&&(e+=360),e}function gn(t,e,r){var i;return void 0===r&&(r={}),(i=r.final?yn(Q(e),Q(t)):yn(Q(t),Q(e)))>180?-(360-i):i}function yn(t,e){var r=C(t[1]),i=C(e[1]),n=C(e[0]-t[0]);n>Math.PI&&(n-=2*Math.PI),n<-Math.PI&&(n+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(E(Math.atan2(n,o))+360)%360}function vn(t,e,i,n){void 0===n&&(n={});var o=e<0,s=T(Math.abs(e),n.units,"meters");o&&(s=-Math.abs(s));var a=Q(t),l=function(t,e,i,n){var o=e/(n=void 0===n?r:Number(n)),s=t[0]*Math.PI/180,a=C(t[1]),u=C(i),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(h)>1e-11?l/h:Math.cos(a);return[(180*(s+o*Math.sin(u)/p)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,i);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,n.properties)}function mn(t,e,r,i,n,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),i=bn(a,u,e),r<=0&&i>0?bn(e,a,n)<0||(n=a):r>0&&i<=0&&(_n(e,a,o)||(o=a)),r=i}return[n,o]}function _n(t,e,r){return bn(t,e,r)>0}function bn(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function Sn(t){for(var e,r,i=$(t),n=0,o=1;o<i.length;)e=r||i[0],n+=((r=i[o])[0]-e[0])*(r[1]+e[1]),o++;return n>0}function xn(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){xn(t,e)}),t;case"LineString":return On($(t),e),t;case"Polygon":return En($(t),e),t;case"MultiLineString":return $(t).forEach(function(t){On(t,e)}),t;case"MultiPolygon":return $(t).forEach(function(t){En(t,e)}),t;case"Point":case"MultiPoint":return t}}function On(t,e){Sn(t)===e&&t.reverse()}function En(t,e){Sn(t[0])!==e&&t[0].reverse();for(var r=1;r<t.length;r++)Sn(t[r])===e&&t[r].reverse()}var Cn={successCallback:null,verbose:!1,polygons:!1},Tn={};function Pn(t,e,r,i){i=i||{};for(var n=Object.keys(Cn),o=0;o<n.length;o++){var s=n[o],a=i[s];a=null!=a?a:Cn[s],Tn[s]=a}Tn.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+r)+"]");var u,l=function(t,e,r){for(var i=t.length-1,n=t[0].length-1,o={rows:i,cols:n,cells:[]},s=e+Math.abs(r),a=0;a<i;++a){o.cells[a]=[];for(var u=0;u<n;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(f))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=p<e?0:p>s?8:4;var d=+(l|=f<e?0:f>s?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(c+h+p+f)/4;g=y>s?2:y<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var v,m,_,b,S,x,O,E;v=m=_=b=S=x=O=E=.5;var C=[];1===l?(_=1-mo(e,p,f),E=1-mo(e,c,f),C.push(ho[l])):169===l?(_=mo(s,f,p),E=mo(s,f,c),C.push(ho[l])):4===l?(x=1-mo(e,h,p),b=mo(e,f,p),C.push(lo[l])):166===l?(x=mo(s,p,h),b=1-mo(s,p,f),C.push(lo[l])):16===l?(S=mo(e,p,h),m=mo(e,c,h),C.push(uo[l])):154===l?(S=1-mo(s,h,p),m=1-mo(s,h,c),C.push(uo[l])):64===l?(O=mo(e,f,c),v=1-mo(e,h,c),C.push(fo[l])):106===l?(O=1-mo(s,c,f),v=mo(s,c,h),C.push(fo[l])):168===l?(b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),C.push(co[l]),C.push(ho[l])):2===l?(b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),C.push(co[l]),C.push(ho[l])):162===l?(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),C.push(co[l]),C.push(ho[l])):8===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),C.push(uo[l]),C.push(lo[l])):138===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(uo[l]),C.push(lo[l])):32===l?(S=mo(s,p,h),x=mo(e,p,h),v=mo(e,c,h),m=mo(s,c,h),C.push(uo[l]),C.push(lo[l])):42===l?(E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h),C.push(po[l]),C.push(fo[l])):128===l&&(E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(po[l]),C.push(fo[l])),5===l?(x=1-mo(e,h,p),E=1-mo(e,c,f),C.push(lo[l])):165===l?(x=mo(s,p,h),E=mo(s,f,c),C.push(lo[l])):20===l?(b=mo(e,f,p),m=mo(e,c,h),C.push(co[l])):150===l?(b=1-mo(s,p,f),m=1-mo(s,h,c),C.push(co[l])):80===l?(S=mo(e,p,h),O=mo(e,f,c),C.push(uo[l])):90===l?(S=1-mo(s,h,p),O=1-mo(s,c,f),C.push(uo[l])):65===l?(_=1-mo(e,p,f),v=1-mo(e,h,c),C.push(ho[l])):105===l?(_=mo(s,f,p),v=mo(s,c,h),C.push(ho[l])):160===l?(S=mo(s,p,h),x=mo(e,p,h),E=mo(e,f,c),O=mo(s,f,c),C.push(uo[l]),C.push(lo[l])):10===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),E=1-mo(s,c,f),O=1-mo(e,c,f),C.push(uo[l]),C.push(lo[l])):130===l?(b=1-mo(e,p,f),_=1-mo(s,p,f),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(co[l]),C.push(ho[l])):40===l?(b=mo(s,f,p),_=mo(e,f,p),v=mo(e,c,h),m=mo(s,c,h),C.push(co[l]),C.push(ho[l])):101===l?(x=mo(s,p,h),v=mo(s,c,h),C.push(lo[l])):69===l?(x=1-mo(e,h,p),v=1-mo(e,h,c),C.push(lo[l])):149===l?(E=mo(s,f,c),m=1-mo(s,h,c),C.push(po[l])):21===l?(E=1-mo(e,c,f),m=mo(e,c,h),C.push(po[l])):86===l?(b=1-mo(s,p,f),O=1-mo(s,c,f),C.push(co[l])):84===l?(b=mo(e,f,p),O=mo(e,f,c),C.push(co[l])):89===l?(S=1-mo(s,h,p),_=mo(s,f,p),C.push(ho[l])):81===l?(S=mo(e,p,h),_=1-mo(e,p,f),C.push(ho[l])):96===l?(S=mo(s,p,h),x=mo(e,p,h),O=mo(e,f,c),v=mo(s,c,h),C.push(uo[l]),C.push(lo[l])):74===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),O=1-mo(s,c,f),v=1-mo(e,h,c),C.push(uo[l]),C.push(lo[l])):24===l?(S=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),m=mo(e,c,h),C.push(uo[l]),C.push(ho[l])):146===l?(S=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),m=1-mo(s,h,c),C.push(uo[l]),C.push(ho[l])):6===l?(x=1-mo(e,h,p),b=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),C.push(lo[l]),C.push(co[l])):164===l?(x=mo(s,p,h),b=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),C.push(lo[l]),C.push(co[l])):129===l?(_=1-mo(e,p,f),E=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(ho[l]),C.push(po[l])):41===l?(_=mo(s,f,p),E=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h),C.push(ho[l]),C.push(po[l])):66===l?(b=1-mo(e,p,f),_=1-mo(s,p,f),O=1-mo(s,c,f),v=1-mo(e,h,c),C.push(co[l]),C.push(ho[l])):104===l?(b=mo(s,f,p),_=mo(e,f,p),O=mo(e,f,c),v=mo(s,c,h),C.push(ho[l]),C.push(go[l])):144===l?(S=mo(e,p,h),E=mo(e,f,c),O=mo(s,f,c),m=1-mo(s,h,c),C.push(uo[l]),C.push(fo[l])):26===l?(S=1-mo(s,h,p),E=1-mo(s,c,f),O=1-mo(e,c,f),m=mo(e,c,h),C.push(uo[l]),C.push(fo[l])):36===l?(x=mo(s,p,h),b=mo(e,f,p),v=mo(e,c,h),m=mo(s,c,h),C.push(lo[l]),C.push(co[l])):134===l?(x=1-mo(e,h,p),b=1-mo(s,p,f),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(lo[l]),C.push(co[l])):9===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),_=mo(s,f,p),E=1-mo(e,c,f),C.push(uo[l]),C.push(lo[l])):161===l?(S=mo(s,p,h),x=mo(e,p,h),_=1-mo(e,p,f),E=mo(s,f,c),C.push(uo[l]),C.push(lo[l])):37===l?(x=mo(s,p,h),E=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h),C.push(lo[l]),C.push(po[l])):133===l?(x=1-mo(e,h,p),E=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c),C.push(lo[l]),C.push(po[l])):148===l?(b=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),m=1-mo(s,h,c),C.push(co[l]),C.push(fo[l])):22===l?(b=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),m=mo(e,c,h),C.push(co[l]),C.push(fo[l])):82===l?(S=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),O=1-mo(s,c,f),C.push(uo[l]),C.push(ho[l])):88===l?(S=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),O=mo(e,f,c),C.push(uo[l]),C.push(ho[l])):73===l?(S=1-mo(e,h,p),x=1-mo(s,h,p),_=mo(s,f,p),v=1-mo(e,h,c),C.push(uo[l]),C.push(lo[l])):97===l?(S=mo(s,p,h),x=mo(e,p,h),_=1-mo(e,p,f),v=mo(s,c,h),C.push(uo[l]),C.push(lo[l])):145===l?(S=mo(e,p,h),_=1-mo(e,p,f),E=mo(s,f,c),m=1-mo(s,h,c),C.push(uo[l]),C.push(po[l])):25===l?(S=1-mo(s,h,p),_=mo(s,f,p),E=1-mo(e,c,f),m=mo(e,c,h),C.push(uo[l]),C.push(po[l])):70===l?(x=1-mo(e,h,p),b=1-mo(s,p,f),O=1-mo(s,c,f),v=1-mo(e,h,c),C.push(lo[l]),C.push(co[l])):100===l?(x=mo(s,p,h),b=mo(e,f,p),O=mo(e,f,c),v=mo(s,c,h),C.push(lo[l]),C.push(co[l])):34===l?(0===g?(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)):(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)),C.push(uo[l]),C.push(lo[l]),C.push(po[l]),C.push(fo[l])):35===l?(4===g?(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)):(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)),C.push(uo[l]),C.push(lo[l]),C.push(ho[l]),C.push(fo[l])):136===l?(0===g?(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)):(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)),C.push(uo[l]),C.push(lo[l]),C.push(po[l]),C.push(fo[l])):153===l?(0===g?(S=mo(e,p,h),_=1-mo(e,p,f),E=1-mo(e,c,f),m=mo(e,c,h)):(S=1-mo(s,h,p),_=mo(s,f,p),E=mo(s,f,c),m=1-mo(s,h,c)),C.push(uo[l]),C.push(ho[l])):102===l?(0===g?(x=1-mo(e,h,p),b=mo(e,f,p),O=mo(e,f,c),v=1-mo(e,h,c)):(x=mo(s,p,h),b=1-mo(s,p,f),O=1-mo(s,c,f),v=mo(s,c,h)),C.push(lo[l]),C.push(fo[l])):155===l?(4===g?(S=mo(e,p,h),_=1-mo(e,p,f),E=1-mo(e,c,f),m=mo(e,c,h)):(S=1-mo(s,h,p),_=mo(s,f,p),E=mo(s,f,c),m=1-mo(s,h,c)),C.push(uo[l]),C.push(po[l])):103===l?(4===g?(x=1-mo(e,h,p),b=mo(e,f,p),O=mo(e,f,c),v=1-mo(e,h,c)):(x=mo(s,p,h),b=1-mo(s,p,f),O=1-mo(s,c,f),v=mo(s,c,h)),C.push(lo[l]),C.push(co[l])):152===l?(0===g?(S=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),m=mo(e,c,h)):(S=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),m=1-mo(s,h,c)),C.push(uo[l]),C.push(co[l]),C.push(ho[l])):156===l?(4===g?(S=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),m=mo(e,c,h)):(S=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),m=1-mo(s,h,c)),C.push(uo[l]),C.push(ho[l]),C.push(fo[l])):137===l?(0===g?(S=mo(s,p,h),x=mo(e,p,h),_=1-mo(e,p,f),E=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)):(S=1-mo(e,h,p),x=1-mo(s,h,p),_=mo(s,f,p),E=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)),C.push(uo[l]),C.push(lo[l]),C.push(ho[l])):139===l?(4===g?(S=mo(s,p,h),x=mo(e,p,h),_=1-mo(e,p,f),E=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)):(S=1-mo(e,h,p),x=1-mo(s,h,p),_=mo(s,f,p),E=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)),C.push(uo[l]),C.push(lo[l]),C.push(po[l])):98===l?(0===g?(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),O=mo(e,f,c),v=1-mo(e,h,c)):(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),O=1-mo(s,c,f),v=mo(s,c,h)),C.push(uo[l]),C.push(lo[l]),C.push(fo[l])):99===l?(4===g?(S=1-mo(e,h,p),x=1-mo(s,h,p),b=mo(s,f,p),_=mo(e,f,p),O=mo(e,f,c),v=1-mo(e,h,c)):(S=mo(s,p,h),x=mo(e,p,h),b=1-mo(e,p,f),_=1-mo(s,p,f),O=1-mo(s,c,f),v=mo(s,c,h)),C.push(uo[l]),C.push(lo[l]),C.push(ho[l])):38===l?(0===g?(x=1-mo(e,h,p),b=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)):(x=mo(s,p,h),b=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)),C.push(lo[l]),C.push(po[l]),C.push(fo[l])):39===l?(4===g?(x=1-mo(e,h,p),b=mo(e,f,p),E=mo(e,f,c),O=mo(s,f,c),v=1-mo(s,h,c),m=1-mo(e,h,c)):(x=mo(s,p,h),b=1-mo(s,p,f),E=1-mo(s,c,f),O=1-mo(e,c,f),v=mo(e,c,h),m=mo(s,c,h)),C.push(lo[l]),C.push(co[l]),C.push(fo[l])):85===l&&(S=1,x=0,b=1,_=0,E=0,O=1,v=0,m=1),(v<0||v>1||m<0||m>1||S<0||S>1||b<0||b>1||E<0||E>1||O<0||O>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+p+","+f+" "+g+" "+v+" "+m+" "+S+" "+x+" "+b+" "+_+" "+E+" "+O),o.cells[a][u]={cval:l,cval_real:d,flipped:g,topleft:v,topright:m,righttop:S,rightbottom:x,bottomright:b,bottomleft:_,leftbottom:E,lefttop:O,edges:C}}}}}return o}(t,e,r);return Tn.polygons?(Tn.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],r=0;return l.cells.forEach(function(t,i){t.forEach(function(t,n){if(void 0!==t){var o=vo[t.cval](t);"object"==typeof o&&_o(o)?"object"==typeof o[0]&&_o(o[0])?"object"==typeof o[0][0]&&_o(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=n,t[1]+=i}),e[r++]=t}):(o.forEach(function(t){t[0]+=n,t[1]+=i}),e[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}()):(Tn.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],r=t.rows,i=t.cols,n=[],o=0;o<r;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=So(t.cells[o][s]),u=null,l=s,c=o;null!==a&&n.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=xo(t.cells[c][l],a.x,a.y,a.o)))break;if(n.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=r||l<0||l>=i||void 0===t.cells[c][l]){var h=bo(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach(function(t){n.push(t)}),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(n),n=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof Tn.successCallback&&Tn.successCallback(u),u}var wn=64,In=16,Ln=[],Rn=[],Mn=[],An=[],jn=[],Nn=[],Fn=[],Dn=[],kn=[],Gn=[],Bn=[],Un=[],Vn=[],zn=[],Wn=[],Yn=[],Xn=[],Zn=[],Hn=[],qn=[],Kn=[],Jn=[],Qn=[],$n=[];Fn[85]=Gn[85]=-1,Dn[85]=Bn[85]=0,kn[85]=Un[85]=1,Hn[85]=Jn[85]=1,qn[85]=Qn[85]=0,Kn[85]=$n[85]=1,Ln[85]=An[85]=0,Rn[85]=jn[85]=-1,Mn[85]=Wn[85]=0,Yn[85]=Vn[85]=0,Xn[85]=zn[85]=1,Nn[85]=Zn[85]=1,Jn[1]=Jn[169]=0,Qn[1]=Qn[169]=-1,$n[1]=$n[169]=0,Vn[1]=Vn[169]=-1,zn[1]=zn[169]=0,Wn[1]=Wn[169]=0,Gn[4]=Gn[166]=0,Bn[4]=Bn[166]=-1,Un[4]=Un[166]=1,Yn[4]=Yn[166]=1,Xn[4]=Xn[166]=0,Zn[4]=Zn[166]=0,Fn[16]=Fn[154]=0,Dn[16]=Dn[154]=1,kn[16]=kn[154]=1,An[16]=An[154]=1,jn[16]=jn[154]=0,Nn[16]=Nn[154]=1,Hn[64]=Hn[106]=0,qn[64]=qn[106]=1,Kn[64]=Kn[106]=0,Ln[64]=Ln[106]=-1,Rn[64]=Rn[106]=0,Mn[64]=Mn[106]=1,Hn[2]=Hn[168]=0,qn[2]=qn[168]=-1,Kn[2]=Kn[168]=1,Jn[2]=Jn[168]=0,Qn[2]=Qn[168]=-1,$n[2]=$n[168]=0,Vn[2]=Vn[168]=-1,zn[2]=zn[168]=0,Wn[2]=Wn[168]=0,Yn[2]=Yn[168]=-1,Xn[2]=Xn[168]=0,Zn[2]=Zn[168]=1,Fn[8]=Fn[162]=0,Dn[8]=Dn[162]=-1,kn[8]=kn[162]=0,Gn[8]=Gn[162]=0,Bn[8]=Bn[162]=-1,Un[8]=Un[162]=1,Vn[8]=Vn[162]=1,zn[8]=zn[162]=0,Wn[8]=Wn[162]=1,Yn[8]=Yn[162]=1,Xn[8]=Xn[162]=0,Zn[8]=Zn[162]=0,Fn[32]=Fn[138]=0,Dn[32]=Dn[138]=1,kn[32]=kn[138]=1,Gn[32]=Gn[138]=0,Bn[32]=Bn[138]=1,Un[32]=Un[138]=0,Ln[32]=Ln[138]=1,Rn[32]=Rn[138]=0,Mn[32]=Mn[138]=0,An[32]=An[138]=1,jn[32]=jn[138]=0,Nn[32]=Nn[138]=1,Jn[128]=Jn[42]=0,Qn[128]=Qn[42]=1,$n[128]=$n[42]=1,Hn[128]=Hn[42]=0,qn[128]=qn[42]=1,Kn[128]=Kn[42]=0,Ln[128]=Ln[42]=-1,Rn[128]=Rn[42]=0,Mn[128]=Mn[42]=1,An[128]=An[42]=-1,jn[128]=jn[42]=0,Nn[128]=Nn[42]=0,Gn[5]=Gn[165]=-1,Bn[5]=Bn[165]=0,Un[5]=Un[165]=0,Jn[5]=Jn[165]=1,Qn[5]=Qn[165]=0,$n[5]=$n[165]=0,Yn[20]=Yn[150]=0,Xn[20]=Xn[150]=1,Zn[20]=Zn[150]=1,An[20]=An[150]=0,jn[20]=jn[150]=-1,Nn[20]=Nn[150]=1,Fn[80]=Fn[90]=-1,Dn[80]=Dn[90]=0,kn[80]=kn[90]=1,Hn[80]=Hn[90]=1,qn[80]=qn[90]=0,Kn[80]=Kn[90]=1,Vn[65]=Vn[105]=0,zn[65]=zn[105]=1,Wn[65]=Wn[105]=0,Ln[65]=Ln[105]=0,Rn[65]=Rn[105]=-1,Mn[65]=Mn[105]=0,Fn[160]=Fn[10]=-1,Dn[160]=Dn[10]=0,kn[160]=kn[10]=1,Gn[160]=Gn[10]=-1,Bn[160]=Bn[10]=0,Un[160]=Un[10]=0,Jn[160]=Jn[10]=1,Qn[160]=Qn[10]=0,$n[160]=$n[10]=0,Hn[160]=Hn[10]=1,qn[160]=qn[10]=0,Kn[160]=Kn[10]=1,Yn[130]=Yn[40]=0,Xn[130]=Xn[40]=1,Zn[130]=Zn[40]=1,Vn[130]=Vn[40]=0,zn[130]=zn[40]=1,Wn[130]=Wn[40]=0,Ln[130]=Ln[40]=0,Rn[130]=Rn[40]=-1,Mn[130]=Mn[40]=0,An[130]=An[40]=0,jn[130]=jn[40]=-1,Nn[130]=Nn[40]=1,Gn[37]=Gn[133]=0,Bn[37]=Bn[133]=1,Un[37]=Un[133]=1,Jn[37]=Jn[133]=0,Qn[37]=Qn[133]=1,$n[37]=$n[133]=0,Ln[37]=Ln[133]=-1,Rn[37]=Rn[133]=0,Mn[37]=Mn[133]=0,An[37]=An[133]=1,jn[37]=jn[133]=0,Nn[37]=Nn[133]=0,Yn[148]=Yn[22]=-1,Xn[148]=Xn[22]=0,Zn[148]=Zn[22]=0,Jn[148]=Jn[22]=0,Qn[148]=Qn[22]=-1,$n[148]=$n[22]=1,Hn[148]=Hn[22]=0,qn[148]=qn[22]=1,Kn[148]=Kn[22]=1,An[148]=An[22]=-1,jn[148]=jn[22]=0,Nn[148]=Nn[22]=1,Fn[82]=Fn[88]=0,Dn[82]=Dn[88]=-1,kn[82]=kn[88]=1,Yn[82]=Yn[88]=1,Xn[82]=Xn[88]=0,Zn[82]=Zn[88]=1,Vn[82]=Vn[88]=-1,zn[82]=zn[88]=0,Wn[82]=Wn[88]=1,Hn[82]=Hn[88]=0,qn[82]=qn[88]=-1,Kn[82]=Kn[88]=0,Fn[73]=Fn[97]=0,Dn[73]=Dn[97]=1,kn[73]=kn[97]=0,Gn[73]=Gn[97]=0,Bn[73]=Bn[97]=-1,Un[73]=Un[97]=0,Vn[73]=Vn[97]=1,zn[73]=zn[97]=0,Wn[73]=Wn[97]=0,Ln[73]=Ln[97]=1,Rn[73]=Rn[97]=0,Mn[73]=Mn[97]=1,Fn[145]=Fn[25]=0,Dn[145]=Dn[25]=-1,kn[145]=kn[25]=0,Vn[145]=Vn[25]=1,zn[145]=zn[25]=0,Wn[145]=Wn[25]=1,Jn[145]=Jn[25]=0,Qn[145]=Qn[25]=1,$n[145]=$n[25]=1,An[145]=An[25]=-1,jn[145]=jn[25]=0,Nn[145]=Nn[25]=0,Gn[70]=Gn[100]=0,Bn[70]=Bn[100]=1,Un[70]=Un[100]=0,Yn[70]=Yn[100]=-1,Xn[70]=Xn[100]=0,Zn[70]=Zn[100]=1,Hn[70]=Hn[100]=0,qn[70]=qn[100]=-1,Kn[70]=Kn[100]=1,Ln[70]=Ln[100]=1,Rn[70]=Rn[100]=0,Mn[70]=Mn[100]=0,Gn[101]=Gn[69]=0,Bn[101]=Bn[69]=1,Un[101]=Un[69]=0,Ln[101]=Ln[69]=1,Rn[101]=Rn[69]=0,Mn[101]=Mn[69]=0,Jn[149]=Jn[21]=0,Qn[149]=Qn[21]=1,$n[149]=$n[21]=1,An[149]=An[21]=-1,jn[149]=jn[21]=0,Nn[149]=Nn[21]=0,Yn[86]=Yn[84]=-1,Xn[86]=Xn[84]=0,Zn[86]=Zn[84]=1,Hn[86]=Hn[84]=0,qn[86]=qn[84]=-1,Kn[86]=Kn[84]=1,Fn[89]=Fn[81]=0,Dn[89]=Dn[81]=-1,kn[89]=kn[81]=0,Vn[89]=Vn[81]=1,zn[89]=zn[81]=0,Wn[89]=Wn[81]=1,Fn[96]=Fn[74]=0,Dn[96]=Dn[74]=1,kn[96]=kn[74]=0,Gn[96]=Gn[74]=-1,Bn[96]=Bn[74]=0,Un[96]=Un[74]=1,Hn[96]=Hn[74]=1,qn[96]=qn[74]=0,Kn[96]=Kn[74]=0,Ln[96]=Ln[74]=1,Rn[96]=Rn[74]=0,Mn[96]=Mn[74]=1,Fn[24]=Fn[146]=0,Dn[24]=Dn[146]=-1,kn[24]=kn[146]=1,Yn[24]=Yn[146]=1,Xn[24]=Xn[146]=0,Zn[24]=Zn[146]=1,Vn[24]=Vn[146]=0,zn[24]=zn[146]=1,Wn[24]=Wn[146]=1,An[24]=An[146]=0,jn[24]=jn[146]=-1,Nn[24]=Nn[146]=0,Gn[6]=Gn[164]=-1,Bn[6]=Bn[164]=0,Un[6]=Un[164]=1,Yn[6]=Yn[164]=-1,Xn[6]=Xn[164]=0,Zn[6]=Zn[164]=0,Jn[6]=Jn[164]=0,Qn[6]=Qn[164]=-1,$n[6]=$n[164]=1,Hn[6]=Hn[164]=1,qn[6]=qn[164]=0,Kn[6]=Kn[164]=0,Vn[129]=Vn[41]=0,zn[129]=zn[41]=1,Wn[129]=Wn[41]=1,Jn[129]=Jn[41]=0,Qn[129]=Qn[41]=1,$n[129]=$n[41]=0,Ln[129]=Ln[41]=-1,Rn[129]=Rn[41]=0,Mn[129]=Mn[41]=0,An[129]=An[41]=0,jn[129]=jn[41]=-1,Nn[129]=Nn[41]=0,Yn[66]=Yn[104]=0,Xn[66]=Xn[104]=1,Zn[66]=Zn[104]=0,Vn[66]=Vn[104]=-1,zn[66]=zn[104]=0,Wn[66]=Wn[104]=1,Hn[66]=Hn[104]=0,qn[66]=qn[104]=-1,Kn[66]=Kn[104]=0,Ln[66]=Ln[104]=0,Rn[66]=Rn[104]=-1,Mn[66]=Mn[104]=1,Fn[144]=Fn[26]=-1,Dn[144]=Dn[26]=0,kn[144]=kn[26]=0,Jn[144]=Jn[26]=1,Qn[144]=Qn[26]=0,$n[144]=$n[26]=1,Hn[144]=Hn[26]=0,qn[144]=qn[26]=1,Kn[144]=Kn[26]=1,An[144]=An[26]=-1,jn[144]=jn[26]=0,Nn[144]=Nn[26]=1,Gn[36]=Gn[134]=0,Bn[36]=Bn[134]=1,Un[36]=Un[134]=1,Yn[36]=Yn[134]=0,Xn[36]=Xn[134]=1,Zn[36]=Zn[134]=0,Ln[36]=Ln[134]=0,Rn[36]=Rn[134]=-1,Mn[36]=Mn[134]=1,An[36]=An[134]=1,jn[36]=jn[134]=0,Nn[36]=Nn[134]=0,Fn[9]=Fn[161]=-1,Dn[9]=Dn[161]=0,kn[9]=kn[161]=0,Gn[9]=Gn[161]=0,Bn[9]=Bn[161]=-1,Un[9]=Un[161]=0,Vn[9]=Vn[161]=1,zn[9]=zn[161]=0,Wn[9]=Wn[161]=0,Jn[9]=Jn[161]=1,Qn[9]=Qn[161]=0,$n[9]=$n[161]=1,Fn[136]=0,Dn[136]=1,kn[136]=1,Gn[136]=0,Bn[136]=1,Un[136]=0,Yn[136]=-1,Xn[136]=0,Zn[136]=1,Vn[136]=-1,zn[136]=0,Wn[136]=0,Jn[136]=0,Qn[136]=-1,$n[136]=0,Hn[136]=0,qn[136]=-1,Kn[136]=1,Ln[136]=1,Rn[136]=0,Mn[136]=0,An[136]=1,jn[136]=0,Nn[136]=1,Fn[34]=0,Dn[34]=-1,kn[34]=0,Gn[34]=0,Bn[34]=-1,Un[34]=1,Yn[34]=1,Xn[34]=0,Zn[34]=0,Vn[34]=1,zn[34]=0,Wn[34]=1,Jn[34]=0,Qn[34]=1,$n[34]=1,Hn[34]=0,qn[34]=1,Kn[34]=0,Ln[34]=-1,Rn[34]=0,Mn[34]=1,An[34]=-1,jn[34]=0,Nn[34]=0,Fn[35]=0,Dn[35]=1,kn[35]=1,Gn[35]=0,Bn[35]=-1,Un[35]=1,Yn[35]=1,Xn[35]=0,Zn[35]=0,Vn[35]=-1,zn[35]=0,Wn[35]=0,Jn[35]=0,Qn[35]=-1,$n[35]=0,Hn[35]=0,qn[35]=1,Kn[35]=0,Ln[35]=-1,Rn[35]=0,Mn[35]=1,An[35]=1,jn[35]=0,Nn[35]=1,Fn[153]=0,Dn[153]=1,kn[153]=1,Vn[153]=-1,zn[153]=0,Wn[153]=0,Jn[153]=0,Qn[153]=-1,$n[153]=0,An[153]=1,jn[153]=0,Nn[153]=1,Gn[102]=0,Bn[102]=-1,Un[102]=1,Yn[102]=1,Xn[102]=0,Zn[102]=0,Hn[102]=0,qn[102]=1,Kn[102]=0,Ln[102]=-1,Rn[102]=0,Mn[102]=1,Fn[155]=0,Dn[155]=-1,kn[155]=0,Vn[155]=1,zn[155]=0,Wn[155]=1,Jn[155]=0,Qn[155]=1,$n[155]=1,An[155]=-1,jn[155]=0,Nn[155]=0,Gn[103]=0,Bn[103]=1,Un[103]=0,Yn[103]=-1,Xn[103]=0,Zn[103]=1,Hn[103]=0,qn[103]=-1,Kn[103]=1,Ln[103]=1,Rn[103]=0,Mn[103]=0,Fn[152]=0,Dn[152]=1,kn[152]=1,Yn[152]=-1,Xn[152]=0,Zn[152]=1,Vn[152]=-1,zn[152]=0,Wn[152]=0,Jn[152]=0,Qn[152]=-1,$n[152]=0,Hn[152]=0,qn[152]=-1,Kn[152]=1,An[152]=1,jn[152]=0,Nn[152]=1,Fn[156]=0,Dn[156]=-1,kn[156]=1,Yn[156]=1,Xn[156]=0,Zn[156]=1,Vn[156]=-1,zn[156]=0,Wn[156]=0,Jn[156]=0,Qn[156]=-1,$n[156]=0,Hn[156]=0,qn[156]=1,Kn[156]=1,An[156]=-1,jn[156]=0,Nn[156]=1,Fn[137]=0,Dn[137]=1,kn[137]=1,Gn[137]=0,Bn[137]=1,Un[137]=0,Vn[137]=-1,zn[137]=0,Wn[137]=0,Jn[137]=0,Qn[137]=-1,$n[137]=0,Ln[137]=1,Rn[137]=0,Mn[137]=0,An[137]=1,jn[137]=0,Nn[137]=1,Fn[139]=0,Dn[139]=1,kn[139]=1,Gn[139]=0,Bn[139]=-1,Un[139]=0,Vn[139]=1,zn[139]=0,Wn[139]=0,Jn[139]=0,Qn[139]=1,$n[139]=0,Ln[139]=-1,Rn[139]=0,Mn[139]=0,An[139]=1,jn[139]=0,Nn[139]=1,Fn[98]=0,Dn[98]=-1,kn[98]=0,Gn[98]=0,Bn[98]=-1,Un[98]=1,Yn[98]=1,Xn[98]=0,Zn[98]=0,Vn[98]=1,zn[98]=0,Wn[98]=1,Hn[98]=0,qn[98]=1,Kn[98]=0,Ln[98]=-1,Rn[98]=0,Mn[98]=1,Fn[99]=0,Dn[99]=1,kn[99]=0,Gn[99]=0,Bn[99]=-1,Un[99]=1,Yn[99]=1,Xn[99]=0,Zn[99]=0,Vn[99]=-1,zn[99]=0,Wn[99]=1,Hn[99]=0,qn[99]=-1,Kn[99]=0,Ln[99]=1,Rn[99]=0,Mn[99]=1,Gn[38]=0,Bn[38]=-1,Un[38]=1,Yn[38]=1,Xn[38]=0,Zn[38]=0,Jn[38]=0,Qn[38]=1,$n[38]=1,Hn[38]=0,qn[38]=1,Kn[38]=0,Ln[38]=-1,Rn[38]=0,Mn[38]=1,An[38]=-1,jn[38]=0,Nn[38]=0,Gn[39]=0,Bn[39]=1,Un[39]=1,Yn[39]=-1,Xn[39]=0,Zn[39]=0,Jn[39]=0,Qn[39]=-1,$n[39]=1,Hn[39]=0,qn[39]=1,Kn[39]=0,Ln[39]=-1,Rn[39]=0,Mn[39]=1,An[39]=1,jn[39]=0,Nn[39]=0;var to=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},eo=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ro=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},io=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},no=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},so=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},ao=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},uo=[],lo=[],co=[],ho=[],po=[],fo=[],go=[],yo=[];ho[1]=po[1]=18,ho[169]=po[169]=18,co[4]=lo[4]=12,co[166]=lo[166]=12,uo[16]=yo[16]=4,uo[154]=yo[154]=4,fo[64]=go[64]=22,fo[106]=go[106]=22,co[2]=fo[2]=17,ho[2]=po[2]=18,co[168]=fo[168]=17,ho[168]=po[168]=18,uo[8]=ho[8]=9,lo[8]=co[8]=12,uo[162]=ho[162]=9,lo[162]=co[162]=12,uo[32]=yo[32]=4,lo[32]=go[32]=1,uo[138]=yo[138]=4,lo[138]=go[138]=1,po[128]=yo[128]=21,fo[128]=go[128]=22,po[42]=yo[42]=21,fo[42]=go[42]=22,lo[5]=po[5]=14,lo[165]=po[165]=14,co[20]=yo[20]=6,co[150]=yo[150]=6,uo[80]=fo[80]=11,uo[90]=fo[90]=11,ho[65]=go[65]=3,ho[105]=go[105]=3,uo[160]=fo[160]=11,lo[160]=po[160]=14,uo[10]=fo[10]=11,lo[10]=po[10]=14,co[130]=yo[130]=6,ho[130]=go[130]=3,co[40]=yo[40]=6,ho[40]=go[40]=3,lo[101]=go[101]=1,lo[69]=go[69]=1,po[149]=yo[149]=21,po[21]=yo[21]=21,co[86]=fo[86]=17,co[84]=fo[84]=17,uo[89]=ho[89]=9,uo[81]=ho[81]=9,uo[96]=go[96]=0,lo[96]=fo[96]=15,uo[74]=go[74]=0,lo[74]=fo[74]=15,uo[24]=co[24]=8,ho[24]=yo[24]=7,uo[146]=co[146]=8,ho[146]=yo[146]=7,lo[6]=fo[6]=15,co[6]=po[6]=16,lo[164]=fo[164]=15,co[164]=po[164]=16,ho[129]=yo[129]=7,po[129]=go[129]=20,ho[41]=yo[41]=7,po[41]=go[41]=20,co[66]=go[66]=2,ho[66]=fo[66]=19,co[104]=go[104]=2,ho[104]=fo[104]=19,uo[144]=po[144]=10,fo[144]=yo[144]=23,uo[26]=po[26]=10,fo[26]=yo[26]=23,lo[36]=yo[36]=5,co[36]=go[36]=2,lo[134]=yo[134]=5,co[134]=go[134]=2,uo[9]=po[9]=10,lo[9]=ho[9]=13,uo[161]=po[161]=10,lo[161]=ho[161]=13,lo[37]=yo[37]=5,po[37]=go[37]=20,lo[133]=yo[133]=5,po[133]=go[133]=20,co[148]=po[148]=16,fo[148]=yo[148]=23,co[22]=po[22]=16,fo[22]=yo[22]=23,uo[82]=co[82]=8,ho[82]=fo[82]=19,uo[88]=co[88]=8,ho[88]=fo[88]=19,uo[73]=go[73]=0,lo[73]=ho[73]=13,uo[97]=go[97]=0,lo[97]=ho[97]=13,uo[145]=ho[145]=9,po[145]=yo[145]=21,uo[25]=ho[25]=9,po[25]=yo[25]=21,lo[70]=go[70]=1,co[70]=fo[70]=17,lo[100]=go[100]=1,co[100]=fo[100]=17,uo[34]=ho[34]=9,lo[34]=co[34]=12,po[34]=yo[34]=21,fo[34]=go[34]=22,uo[136]=yo[136]=4,lo[136]=go[136]=1,co[136]=fo[136]=17,ho[136]=po[136]=18,uo[35]=yo[35]=4,lo[35]=co[35]=12,ho[35]=po[35]=18,fo[35]=go[35]=22,uo[153]=yo[153]=4,ho[153]=po[153]=18,lo[102]=co[102]=12,fo[102]=go[102]=22,uo[155]=ho[155]=9,po[155]=yo[155]=23,lo[103]=go[103]=1,co[103]=fo[103]=17,uo[152]=yo[152]=4,co[152]=fo[152]=17,ho[152]=po[152]=18,uo[156]=co[156]=8,ho[156]=po[156]=18,fo[156]=yo[156]=23,uo[137]=yo[137]=4,lo[137]=go[137]=1,ho[137]=po[137]=18,uo[139]=yo[139]=4,lo[139]=ho[139]=13,po[139]=go[139]=20,uo[98]=ho[98]=9,lo[98]=co[98]=12,fo[98]=go[98]=22,uo[99]=go[99]=0,lo[99]=co[99]=12,ho[99]=fo[99]=19,lo[38]=co[38]=12,po[38]=yo[38]=21,fo[38]=go[38]=22,lo[39]=yo[39]=5,co[39]=po[39]=16,fo[39]=go[39]=22;var vo=[];function mo(t,e,r){return(t-e)/(r-e)}function _o(t){return t.constructor.toString().indexOf("Array")>-1}function bo(t,e,r,i,n,o){for(var s=t.cells[r][e],a=s.cval_real,u=e+i,l=r+n,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=n,u-=i,a=(s=t.cells[l][u]).cval_real,-1===n)if(0===o)if(1&a)c.push([u,l]),i=-1,n=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),i=0,n=1,o=1,h=!0;break}c.push([u+1,l]),i=1,n=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),i=0,n=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),i=0,n=1,o=0,h=!0;break}c.push([u,l]),i=-1,n=0,o=0}else if(1===n)if(0===o){if(!(a&In)){if(a&wn){c.push([u+s.topleft,l+1]),i=0,n=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),i=0,n=-1,o=1,h=!0;break}c.push([u+1,l+1]),i=1,n=0,o=1}else c.push([u+1,l+1]),i=1,n=0,o=1;else if(-1===i)if(0===o){if(!(a&wn)){if(1&a){c.push([u,l+s.leftbottom]),i=1,n=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),i=1,n=0,o=1,h=!0;break}c.push([u,l+1]),i=0,n=1,o=0}else{if(!(a&wn)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),i=0,n=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),i=-1,n=0,o=0,h=!0;break}c.push([u+1,l]),i=0,n=-1,o=1}else{if(!(4&a)){if(a&In){c.push([u+1,l+s.righttop]),i=-1,n=0,o=1;break}c.push([u+1,l+s.rightbottom]),i=-1,n=0,o=0,h=!0;break}c.push([u+1,l]),i=0,n=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])i=0,n=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),i=0,n=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&wn)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])i=0,n=1,o=0;else{if(!(a&In)){c.push([u+s.topleft,l+1]),i=0,n=-1,o=0,h=!0;break}c.push([u+1,l+1]),i=1,n=0,o=1}}else if(-1===n){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])i=1,n=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),i=-1,n=0,o=1,h=!0;break}c.push([u+1,l]),i=0,n=-1,o=1}}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])i=-1,n=0,o=0;else{if(!(a&wn)){c.push([u,l+s.leftbottom]),i=1,n=0,o=0,h=!0;break}c.push([u,l+1]),i=0,n=1,o=0}}if(l+=n,(u+=i)===e&&l===r)break}return{path:c,i:u,j:l,x:i,y:n,o:o}}function So(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],r=t.cval_real;switch(e){case 0:return r&In?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&r?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return r&In?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&r?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return r&wn?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&r?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return r&wn?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&r?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return r&wn?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return r&wn?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return r&wn?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return r&In?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return r&wn?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return r&In?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function xo(t,e,r,i){var n,o,s,a,u,l=t.cval;switch(e){case-1:switch(i){case 0:n=lo[l],s=Gn[l],a=Bn[l],u=Un[l];break;default:n=uo[l],s=Fn[l],a=Dn[l],u=kn[l]}break;case 1:switch(i){case 0:n=po[l],s=Jn[l],a=Qn[l],u=$n[l];break;default:n=fo[l],s=Hn[l],a=qn[l],u=Kn[l]}break;default:switch(r){case-1:switch(i){case 0:n=go[l],s=Ln[l],a=Rn[l],u=Mn[l];break;default:n=yo[l],s=An[l],a=jn[l],u=Nn[l]}break;case 1:switch(i){case 0:n=ho[l],s=Vn[l],a=zn[l],u=Wn[l];break;default:n=co[l],s=Yn[l],a=Xn[l],u=Zn[l]}}}if(o=t.edges.indexOf(n),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var r=e+1;r<t.edges.length;r++)t.edges[r-1]=t.edges[r];t.edges.pop()}(t,o),l=t.cval_real,n){case 0:l&In?(e=t.topleft,r=1):(e=1,r=t.righttop);break;case 1:4&l?(e=1,r=t.rightbottom):(e=t.topleft,r=1);break;case 2:4&l?(e=t.topleft,r=1):(e=t.bottomright,r=0);break;case 3:1&l?(e=t.bottomleft,r=0):(e=t.topleft,r=1);break;case 4:l&In?(e=t.topright,r=1):(e=1,r=t.righttop);break;case 5:4&l?(e=1,r=t.rightbottom):(e=t.topright,r=1);break;case 6:4&l?(e=t.topright,r=1):(e=t.bottomright,r=0);break;case 7:1&l?(e=t.bottomleft,r=0):(e=t.topright,r=1);break;case 8:4&l?(e=1,r=t.righttop):(e=t.bottomright,r=0);break;case 9:1&l?(e=t.bottomleft,r=0):(e=1,r=t.righttop);break;case 10:1&l?(e=1,r=t.righttop):(e=0,r=t.leftbottom);break;case 11:l&wn?(e=0,r=t.lefttop):(e=1,r=t.righttop);break;case 12:4&l?(e=1,r=t.rightbottom):(e=t.bottomright,r=0);break;case 13:1&l?(e=t.bottomleft,r=0):(e=1,r=t.rightbottom);break;case 14:1&l?(e=1,r=t.rightbottom):(e=0,r=t.leftbottom);break;case 15:l&wn?(e=0,r=t.lefttop):(e=1,r=t.rightbottom);break;case 16:4&l?(e=0,r=t.leftbottom):(e=t.bottomright,r=0);break;case 17:l&wn?(e=0,r=t.lefttop):(e=t.bottomright,r=0);break;case 18:1&l?(e=t.bottomleft,r=0):(e=0,r=t.leftbottom);break;case 19:l&wn?(e=0,r=t.lefttop):(e=t.bottomleft,r=0);break;case 20:l&wn?(e=0,r=t.leftbottom):(e=t.topleft,r=1);break;case 21:l&In?(e=t.topright,r=1):(e=0,r=t.leftbottom);break;case 22:l&wn?(e=0,r=t.lefttop):(e=t.topleft,r=1);break;case 23:l&In?(e=t.topright,r=1):(e=0,r=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+r+" "+s+" "+a+" "+u)),{p:[e,r],x:s,y:a,o:u}}function Oo(t){var e=[],r=[];t.forEach(function(t){var i=mi(c([t]));r.push(i),e.push({ring:t,area:i})}),r.sort(function(t,e){return e-t});var i=[];return r.forEach(function(t){for(var r=0;r<e.length;r++)if(e[r].area===t){i.push(e[r].ring),e.splice(r,1);break}}),i}function Eo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),r=[];!To(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var n=[];n.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=c([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||Co(c([e[s].lrCoordinates]),o)&&(n.push(e[s].lrCoordinates),e[s].grouped=!0);r.push(n)}return r}function Co(t,e){for(var r=ur(t),i=0;i<r.features.length;i++)if(!de(r.features[i],e))return!1;return!0}function To(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Po(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.pivot,n=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=ar(t)),!1!==n&&void 0!==n||(t=xe(t)),A(t,function(t){var r=gn(i,t)+e,n=ci(i,t),o=$(vn(i,n,r));t[0]=o[0],t[1]=o[1]})),t}function wo(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.origin,n=r.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==n&&(t=xe(t)),"FeatureCollection"!==t.type||o?Io(t,e,i):(D(t,function(r,n){t.features[n]=Io(r,e,i)}),t)}function Io(t,e,r){var i="Point"===ot(t);return r=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return Q(e);var r=t.bbox?t.bbox:J(t),i=r[0],n=r[1],o=r[2],s=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([i,n]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,n]);case"nw":case"northwest":case"westnorth":case"topleft":return u([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return sr(t);case void 0:case null:case"centroid":return ar(t);default:throw new Error("invalid origin")}}(t,r),1===e||i||A(t,function(t){var i=ci(r,t),n=gn(r,t),o=$(vn(r,i*e,n));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function Lo(t){var e=t[0],r=t[1];return[r[0]-e[0],r[1]-e[1]]}function Ro(t,e){return t[0]*e[1]-e[0]*t[1]}function Mo(t,e,r){var i=[],n=x(e,r),o=$(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var r=(l=t,c=o[e+1],h=n,p=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),f=l[0]+h*(c[1]-l[1])/p,d=c[0]+h*(c[1]-l[1])/p,[[f,l[1]+h*(l[0]-c[0])/p],[d,c[1]+h*(l[0]-c[0])/p]]);if(i.push(r),e>0){var a=i[e-1],u=function(t,e){return!function(t,e){return 0===Ro(Lo(t),Lo(e))}(t,e)&&function(t,e){var r,i,n=t[0],o=Lo(t),s=e[0],a=Lo(e),u=Ro(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(Ro((i=n,[(r=s)[0]-i[0],r[1]-i[1]]),a)/u,o))}(t,e)}(r,a);!1!==u&&(a[1]=u,r[0]=u),s.push(a[0]),e===o.length-2&&(s.push(r[0]),s.push(r[1]))}2===o.length&&(s.push(r[0]),s.push(r[1]))}var l,c,h,p,f,d}),p(s,t.properties)}function Ao(t,e,r){var i=e[0]-t[0],n=e[1]-t[1],o=r[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(i*(r[1]-e[1])-o*n)}function jo(t,e){return e.geometry.coordinates[0].every(function(e){return de(u(e),t)})}vo[1]=vo[169]=to,vo[4]=vo[166]=eo,vo[16]=vo[154]=ro,vo[64]=vo[106]=io,vo[168]=vo[2]=no,vo[162]=vo[8]=oo,vo[138]=vo[32]=so,vo[42]=vo[128]=ao,vo[5]=vo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},vo[20]=vo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},vo[80]=vo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},vo[65]=vo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},vo[160]=vo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},vo[130]=vo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},vo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},vo[101]=vo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},vo[149]=vo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},vo[86]=vo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},vo[89]=vo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},vo[96]=vo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},vo[24]=vo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},vo[6]=vo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},vo[129]=vo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},vo[66]=vo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},vo[144]=vo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},vo[36]=vo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},vo[9]=vo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},vo[37]=vo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},vo[148]=vo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},vo[82]=vo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},vo[73]=vo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},vo[145]=vo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},vo[70]=vo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},vo[34]=function(t){return[ao(t),oo(t)]},vo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},vo[136]=function(t){return[so(t),no(t)]},vo[153]=function(t){return[ro(t),to(t)]},vo[102]=function(t){return[eo(t),io(t)]},vo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},vo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},vo[152]=function(t){return[ro(t),no(t)]},vo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},vo[137]=function(t){return[so(t),to(t)]},vo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},vo[98]=function(t){return[oo(t),io(t)]},vo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},vo[38]=function(t){return[eo(t),ao(t)]},vo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var No=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,r){var i=e.to,n=r.to;if(i.coordinates[0]-t.coordinates[0]>=0&&n.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&n.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&n.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||n.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-n.coordinates[1]:n.coordinates[1]-i.coordinates[1];var o=Ao(t.coordinates,i.coordinates,n.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Fo=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return p([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Ao(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Do=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,r,i){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e},0),r=(0===e?this.length:e)-1,i=(e+1)%this.length,n=Ao(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===n?this.edges[r].from.coordinates[0]>this.edges[i].from.coordinates[0]:n>0},t.prototype.toMultiPoint=function(){return y(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=c([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=er(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var r,i,n=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,c,h,p=e.getEnvelope();if(i&&(r=i.getEnvelope()),s=n,a=(o=p).geometry.coordinates[0].map(function(t){return t[0]}),l=o.geometry.coordinates[0].map(function(t){return t[1]}),c=s.geometry.coordinates[0].map(function(t){return t[0]}),h=s.geometry.coordinates[0].map(function(t){return t[1]}),(Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&jo(p,n)){for(var f=void 0,d=function(t){e.some(function(e){return r=t,i=e.from.coordinates,r[0]===i[0]&&r[1]===i[1];var r,i})||(f=t)},g=0,y=t.map(function(t){return t.from.coordinates});g<y.length;g++)d(y[g]);f&&e.inside(u(f))&&(i&&!jo(r,p)||(i=e))}}),i},t.prototype.inside=function(t){return de(t,this.toPolygon())},t}(),ko=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var r=new t;return V(e,function(t){rt(t,"LineString","Graph::fromGeoJson"),j(t,function(t,e){if(t){var i=r.getNode(t),n=r.getNode(e);r.addEdge(i,n)}return e})}),r},t.prototype.getNode=function(t){var e=No.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new No(t)),r},t.prototype.addEdge=function(t,e){var r=new Fo(t,e),i=r.getSymetric();this.edges.push(r),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),r.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var r,i,n=t.getOuterEdges(),o=n.length-1;o>=0;--o){var s=n[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(i=l),u&&(i&&(i.next=u,i=void 0),r||(r=u)))}i&&(i.next=r)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(r){if(!(r.label>=0)){t.push(r);var i=r;do{i.label=e,i=i.next}while(!r.isEqual(i));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(r){t._computeNextCCWEdges(r,e.label)})});var e=[];return this.edges.forEach(function(r){r.ring||e.push(t._findEdgeRing(r))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],r=t,i=function(){var i=0;r.from.getOuterEdges().forEach(function(e){e.label===t.label&&++i}),i>1&&e.push(r.from),r=r.next};do{i()}while(!t.isEqual(r));return e},t.prototype._findEdgeRing=function(t){var e=t,r=new Do;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function Go(t,e){var r=!0;return V(t,function(t){V(e,function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,i=e.coordinates,!(r[0]===i[0]&&r[1]===i[1]);case"LineString":return!Bo(e,t);case"Polygon":return!de(t,e)}break;case"LineString":switch(e.type){case"Point":return!Bo(t,e);case"LineString":return!function(t,e){return ai(t,e).features.length>0}(t,e);case"Polygon":return!Uo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!de(e,t);case"LineString":return!Uo(t,e);case"Polygon":return!function(t,e){for(var r=0,i=t.coordinates[0];r<i.length;r++)if(de(i[r],e))return!0;for(var n=0,o=e.coordinates[0];n<o.length;n++)if(de(o[n],t))return!0;return ai(Qi(t),Qi(e)).features.length>0}(e,t)}}var r,i;return!1}(t.geometry,e.geometry)})}),r}function Bo(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(Vo(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function Uo(t,e){for(var r=0,i=e.coordinates;r<i.length;r++)if(de(i[r],t))return!0;return ai(e,Qi(t)).features.length>0}function Vo(t,e,r){var i=r[0]-t[0],n=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-n*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}function zo(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Wo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Yo(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Xo(t,e){for(var r=!1,i=!1,n=t.coordinates.length,o=0;o<n&&!r&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),qo(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?r=!0:i=!0}o++}return r&&i}function Zo(t,e){return ai(t,$i(e)).features.length>0}function Ho(t,e){for(var r=!1,i=!1,n=t.coordinates.length,o=0;o<n&&(!r||!i);o++)de(u(t.coordinates[o]),e)?r=!0:i=!0;return i&&r}function qo(t,e,r,i){var n=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==n*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<r[0]&&r[0]<e[0]:e[0]<r[0]&&r[0]<t[0]:a>0?t[1]<r[1]&&r[1]<e[1]:e[1]<r[1]&&r[1]<t[1])}var Ko=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:$o};function Jo(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Qo(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function $o(t,e){return hn(t,e,{strict:!0})}Ko.prototype.compare=function(t,e){if(t.type!==e.type||!Qo(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,i=Jo(t),n=Jo(e);return i.every(function(t){return this.some(function(e){return r.compare(t,e)})},n)}}return!1},Ko.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},Ko.prototype.compareLine=function(t,e,r,i){if(!Qo(t,e))return!1;var n=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(n[0],o[0])||(o=this.fixStartIndex(o,n))){var s=this.compareCoord(n[r],o[r]);return this.direction||s?this.comparePath(n,o):!!this.compareCoord(n[r],o[o.length-(1+r)])&&this.comparePath(n.slice().reverse(),o)}},Ko.prototype.fixStartIndex=function(t,e){for(var r,i=-1,n=0;n<t.length;n++)if(this.compareCoord(t[n],e[0])){i=n;break}return i>=0&&(r=[].concat(t.slice(i,t.length),t.slice(1,i+1))),r},Ko.prototype.comparePath=function(t,e){var r=this;return t.every(function(t,e){return r.compareCoord(t,this[e])},e)},Ko.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),n=this;return r.every(function(t){return this.some(function(e){return n.compareLine(t,e,1,!0)})},i)}return!1},Ko.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Ko.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Ko.prototype.removePseudo=function(t){return t};var ts=Ko;function es(t,e){var r=!1;return V(t,function(t){V(e,function(e){if(!0===r)return!0;r=!Go(t.geometry,e.geometry)})}),r}var rs=kt(function(t){function e(t,e,r,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,i)}e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var n=0;n<this._datasetLength;n++)if(1!==this._visited[n]){this._visited[n]=1;var o=this._regionQuery(n);if(o.length<this.minPts)this.noise.push(n);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(n,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var i=e[r];if(1!==this._visited[i]){this._visited[i]=1;var n=this._regionQuery(i);n.length>=this.minPts&&(e=this._mergeArrays(e,n))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++)this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r);return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,i=0;i<r;i++){var n=e[i];t.indexOf(n)<0&&t.push(n)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,i=Math.min(t.length,e.length);i--;)r+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(r)},t.exports&&(t.exports=e)}),is=kt(function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var n=!0;n;){n=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<r;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),n=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,i=0;i<r;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var i,n=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=r(t,e[a]))<n&&(n=i,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,i=Math.min(t.length,e.length);i--;){var n=t[i]-e[i];r+=n*n}return Math.sqrt(r)},t.exports&&(t.exports=e)}),ns=kt(function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,i=r;i--;){var n=this._priorities[i];"desc"===this._sorting?e>n&&(r=i):e<n&&(r=i)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)}),os=kt(function(t){if(t.exports)var e=ns;function r(t,e,r,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,i)}r.prototype.run=function(t,r,i,n){this._init(t,r,i,n);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var i=this._orderedList[e],n=this._reachability[i];t.push([i,n])}return t},r.prototype._init=function(t,e,r,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,r){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===i._processed[e]){var n=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,n);void 0===i._reachability[e]?(i._reachability[e]=o,r.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,r.remove(e),r.insert(e,o))}})},r.prototype._expandCluster=function(t,e){for(var r=e.getElements(),i=0,n=r.length;i<n;i++){var o=r[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++)if(this._regionQuery(t,r).length>=this.minPts)return r},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],i=0,n=this.dataset.length;i<n;i++)this.distance(this.dataset[t],this.dataset[i])<e&&r.push(i);return r},r.prototype._euclideanDistance=function(t,e){for(var r=0,i=Math.min(t.length,e.length);i--;)r+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(r)},t.exports&&(t.exports=r)}),ss=kt(function(t){t.exports&&(t.exports={DBSCAN:rs,KMEANS:is,OPTICS:os,PriorityQueue:ns})}),as=function(t,e,r){for(var i=t.length,n=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);n+=s*s}return r?Math.sqrt(n):n},us=as,ls=function(t,e,r){var i=Math.abs(t-e);return r?i:i*i},cs=as;function hs(t,e,r){r=r||[];for(var i=0;i<t;i++)r[i]=e;return r}function ps(t,e){return O(gn(t[0],t[1]))===O(gn(e[0],e[1]))}function fs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function ds(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}var gs={search:function(t,e,r,i){t.cleanDirty();var n=(i=i||{}).heuristic||gs.heuristics.manhattan,o=i.closest||!1,s=new ms(function(t){return t.f}),a=e;for(e.h=n(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return ds(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var p=l[c];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),d=p.visited;(!d||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||n(p,r),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?ds(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return 1*(i+n)+(r-2)*Math.min(i,n)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function ys(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var i=0,n=t[r];i<n.length;i++){var o=new vs(r,i,n[i]);this.grid[r][i]=o,this.nodes.push(o)}}this.init()}function vs(t,e,r){this.x=t,this.y=e,this.weight=r}function ms(t){this.content=[],this.scoreFunction=t}function _s(t,e){for(var r=0;r<e.features.length;r++)if(de(t,e.features[r]))return!0;return!1}function bs(t){return function(){return t}}function Ss(t){return t[0]}function xs(t){return t[1]}function Os(){this._=null}function Es(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Cs(t,e){var r=e,i=e.R,n=r.U;n?n.L===r?n.L=i:n.R=i:t._=i,i.U=n,r.U=i,r.R=i.L,r.R&&(r.R.U=r),i.L=r}function Ts(t,e){var r=e,i=e.L,n=r.U;n?n.L===r?n.L=i:n.R=i:t._=i,i.U=n,r.U=i,r.L=i.R,r.L&&(r.L.U=r),i.R=r}function Ps(t){for(;t.L;)t=t.L;return t}function ws(t,e,r,i){var n=[null,null],o=Ks.push(n)-1;return n.left=t,n.right=e,r&&Ls(n,t,e,r),i&&Ls(n,e,t,i),Hs[t.index].halfedges.push(o),Hs[e.index].halfedges.push(o),n}function Is(t,e,r){var i=[e,r];return i.left=t,i}function Ls(t,e,r,i){t[0]||t[1]?t.left===r?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=r)}function Rs(t,e,r,i,n){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,p=a[0]-u,f=a[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=r-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=n-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*p,l+c*f]),h<1&&(t[1]=[u+h*p,l+h*f]),!0)}}}}}function Ms(t,e,r,i,n){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],p=l[1],f=c[0],d=c[1],g=(h+f)/2,y=(p+d)/2;if(d===p){if(g<e||g>=i)return;if(h>f){if(u){if(u[1]>=n)return}else u=[g,r];o=[g,n]}else{if(u){if(u[1]<r)return}else u=[g,n];o=[g,r]}}else if(a=y-(s=(h-f)/(d-p))*g,s<-1||s>1)if(h>f){if(u){if(u[1]>=n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}else{if(u){if(u[1]<r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else if(p<d){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function As(t,e){var r=t.site,i=e.left,n=e.right;return r===n&&(n=i,i=r),n?Math.atan2(n[1]-i[1],n[0]-i[0]):(r===i?(i=e[1],n=e[0]):(i=e[0],n=e[1]),Math.atan2(i[0]-n[0],n[1]-i[1]))}function js(t,e){return e[+(e.left!==t.site)]}function Ns(t,e){return e[+(e.left===t.site)]}ys.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)gs.cleanNode(this.nodes[t])},ys.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)gs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},ys.prototype.markDirty=function(t){this.dirtyNodes.push(t)},ys.prototype.neighbors=function(t){var e=[],r=t.x,i=t.y,n=this.grid;return n[r-1]&&n[r-1][i]&&e.push(n[r-1][i]),n[r+1]&&n[r+1][i]&&e.push(n[r+1][i]),n[r]&&n[r][i-1]&&e.push(n[r][i-1]),n[r]&&n[r][i+1]&&e.push(n[r][i+1]),this.diagonal&&(n[r-1]&&n[r-1][i-1]&&e.push(n[r-1][i-1]),n[r+1]&&n[r+1][i-1]&&e.push(n[r+1][i-1]),n[r-1]&&n[r-1][i+1]&&e.push(n[r-1][i+1]),n[r+1]&&n[r+1][i+1]&&e.push(n[r+1][i+1])),e},ys.prototype.toString=function(){for(var t,e,r,i,n=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,i=(e=o[s]).length;r<i;r++)t.push(e[r].weight);n.push(t.join(" "))}return n.join("\n")},vs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},vs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},vs.prototype.isWall=function(){return 0===this.weight},ms.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,i=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[r]=e,this.content[t]=i,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],i=this.scoreFunction(r);;){var n,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(n=this.scoreFunction(u))<i&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?i:n)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}},Os.prototype={constructor:Os,insert:function(t,e){var r,i,n;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Ps(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(i=r.U).L?(n=i.R)&&n.C?(r.C=n.C=!1,i.C=!0,t=i):(t===r.R&&(Cs(this,r),r=(t=r).U),r.C=!1,i.C=!0,Ts(this,i)):(n=i.L)&&n.C?(r.C=n.C=!1,i.C=!0,t=i):(t===r.L&&(Ts(this,r),r=(t=r).U),r.C=!1,i.C=!0,Cs(this,i)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,i,n=t.U,o=t.L,s=t.R;if(r=o?s?Ps(s):o:s,n?n.L===t?n.L=r:n.R=r:this._=r,o&&s?(i=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(n=r.U,r.U=t.U,t=r.R,n.L=t,r.R=s,s.U=r):(r.U=n,n=r,t=r.R)):(i=t.C,t=r),t&&(t.U=n),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===n.L){if((e=n.R).C&&(e.C=!1,n.C=!0,Cs(this,n),e=n.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ts(this,e),e=n.R),e.C=n.C,n.C=e.R.C=!1,Cs(this,n),t=this._;break}}else if((e=n.L).C&&(e.C=!1,n.C=!0,Ts(this,n),e=n.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Cs(this,e),e=n.L),e.C=n.C,n.C=e.L.C=!1,Ts(this,n),t=this._;break}e.C=!0,t=n,n=n.U}while(!t.C);t&&(t.C=!1)}}};var Fs,Ds=[];function ks(t){var e=t.P,r=t.N;if(e&&r){var i=e.site,n=t.site,o=r.site;if(i!==o){var s=n[0],a=n[1],u=i[0]-s,l=i[1]-a,c=o[0]-s,h=o[1]-a,p=2*(u*h-l*c);if(!(p>=-Qs)){var f=u*u+l*l,d=c*c+h*h,g=(h*f-l*d)/p,y=(u*d-c*f)/p,v=Ds.pop()||new function(){Es(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=n,v.x=g+s,v.y=(v.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=v;for(var m=null,_=qs._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}qs.insert(m,v),m||(Fs=v)}}}}function Gs(t){var e=t.circle;e&&(e.P||(Fs=e.N),qs.remove(e),Ds.push(e),Es(e),t.circle=null)}var Bs=[];function Us(t){var e=Bs.pop()||new function(){Es(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Vs(t){Gs(t),Zs.remove(t),Bs.push(t),Es(t)}function zs(t){var e=t.circle,r=e.x,i=e.cy,n=[r,i],o=t.P,s=t.N,a=[t];Vs(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Js&&Math.abs(i-u.circle.cy)<Js;)o=u.P,a.unshift(u),Vs(u),u=o;a.unshift(u),Gs(u);for(var l=s;l.circle&&Math.abs(r-l.circle.x)<Js&&Math.abs(i-l.circle.cy)<Js;)s=l.N,a.push(l),Vs(l),l=s;a.push(l),Gs(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],Ls(l.edge,u.site,l.site,n);u=a[0],(l=a[h-1]).edge=ws(u.site,l.site,null,n),ks(u),ks(l)}function Ws(t){for(var e,r,i,n,o=t[0],s=t[1],a=Zs._;a;)if((i=Ys(a,s)-o)>Js)a=a.L;else{if(!((n=o-Xs(a,s))>Js)){i>-Js?(e=a.P,r=a):n>-Js?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Hs[t.index]={site:t,halfedges:[]}}(t);var u=Us(t);if(Zs.insert(e,u),e||r){if(e===r)return Gs(e),r=Us(e.site),Zs.insert(u,r),u.edge=r.edge=ws(e.site,u.site),ks(e),void ks(r);if(r){Gs(e),Gs(r);var l=e.site,c=l[0],h=l[1],p=t[0]-c,f=t[1]-h,d=r.site,g=d[0]-c,y=d[1]-h,v=2*(p*y-f*g),m=p*p+f*f,_=g*g+y*y,b=[(y*m-f*_)/v+c,(p*_-g*m)/v+h];Ls(r.edge,l,d,b),u.edge=ws(l,t,null,b),r.edge=ws(t,d,null,b),ks(e),ks(r)}else u.edge=ws(e.site,u.site)}}function Ys(t,e){var r=t.site,i=r[0],n=r[1],o=n-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],l=u-e;if(!l)return a;var c=a-i,h=1/o-1/l,p=c/l;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*l)-u+l/2+n-o/2)))/h+i:(i+a)/2}function Xs(t,e){var r=t.N;if(r)return Ys(r,e);var i=t.site;return i[1]===e?i[0]:1/0}var Zs,Hs,qs,Ks,Js=1e-6,Qs=1e-12;function $s(t,e){return e[1]-t[1]||e[0]-t[0]}function ta(t,e){var r,i,n,o=t.sort($s).pop();for(Ks=[],Hs=new Array(t.length),Zs=new Os,qs=new Os;;)if(n=Fs,o&&(!n||o[1]<n.y||o[1]===n.y&&o[0]<n.x))o[0]===r&&o[1]===i||(Ws(o),r=o[0],i=o[1]),o=t.pop();else{if(!n)break;zs(n.arc)}if(function(){for(var t,e,r,i,n=0,o=Hs.length;n<o;++n)if((t=Hs[n])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(r=0;r<i;++r)s[r]=r,a[r]=As(t,Ks[e[r]]);for(s.sort(function(t,e){return a[e]-a[t]}),r=0;r<i;++r)a[r]=e[s[r]];for(r=0;r<i;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,r,i){for(var n,o=Ks.length;o--;)Ms(n=Ks[o],t,e,r,i)&&Rs(n,t,e,r,i)&&(Math.abs(n[0][0]-n[1][0])>Js||Math.abs(n[0][1]-n[1][1])>Js)||delete Ks[o]}(s,a,u,l),function(t,e,r,i){var n,o,s,a,u,l,c,h,p,f,d,g,y=Hs.length,v=!0;for(n=0;n<y;++n)if(o=Hs[n]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ks[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(f=Ns(o,Ks[u[a]]))[0],g=f[1],h=(c=js(o,Ks[u[++a%l]]))[0],p=c[1],(Math.abs(d-h)>Js||Math.abs(g-p)>Js)&&(u.splice(a,0,Ks.push(Is(s,f,Math.abs(d-t)<Js&&i-g>Js?[t,Math.abs(h-t)<Js?p:i]:Math.abs(g-i)<Js&&r-d>Js?[Math.abs(p-i)<Js?h:r,i]:Math.abs(d-r)<Js&&g-e>Js?[r,Math.abs(h-r)<Js?p:e]:Math.abs(g-e)<Js&&d-t>Js?[Math.abs(p-e)<Js?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var m,_,b,S=1/0;for(n=0,v=null;n<y;++n)(o=Hs[n])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<S&&(S=b,v=o);if(v){var x=[t,e],O=[t,i],E=[r,i],C=[r,e];v.halfedges.push(Ks.push(Is(s=v.site,x,O))-1,Ks.push(Is(s,O,E))-1,Ks.push(Is(s,E,C))-1,Ks.push(Is(s,C,x))-1)}}for(n=0;n<y;++n)(o=Hs[n])&&(o.halfedges.length||delete Hs[n])}(s,a,u,l)}this.edges=Ks,this.cells=Hs,Zs=qs=Ks=Hs=null}function ea(t){return(t=t.slice()).push(t[0]),c([t])}function ra(t,e,r,i){var n=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,u=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!I(i))throw new Error("options must be an object");if(!w(n))throw new Error("steps must be a number");if(!w(s))throw new Error("angle must be a number");var l=Q(t);if("degrees"===o)var h=C(s);else e=vn(t,e,90,{units:o}),r=vn(t,r,0,{units:o}),e=Q(e)[0]-l[0],r=Q(r)[1]-l[1];for(var p=[],f=0;f<n;f+=1){var d=-360*f/n,g=e*r/Math.sqrt(Math.pow(r,2)+Math.pow(e,2)*Math.pow(ia(d),2)),y=e*r/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)/Math.pow(ia(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===o){var v=g*Math.cos(h)+y*Math.sin(h),m=y*Math.cos(h)-g*Math.sin(h);g=v,y=m}p.push([g+l[0],y+l[1]])}return p.push(p[0]),"degrees"===o?c([p],u):Po(c([p],u),s,{pivot:a})}function ia(t){var e=t*Math.PI/180;return Math.tan(e)}function na(t,e){void 0===e&&(e={});var r=0,i=0,n=0;return B(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!w(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&A(t,function(t){r+=t[0]*a,i+=t[1]*a,n+=a})}),u([r/n,i/n],e.properties,e)}function oa(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function sa(t,e){var r=0,i=0;A(t,function(n,o,s,a,u){u>r&&(r=u,i=o,e.push([]));var l=o-i,c=t.coordinates[u][l+1],h=n[0],p=n[1],f=c[0],d=c[1];e[u].push([.75*h+.25*f,.75*p+.25*d]),e[u].push([.25*h+.75*f,.25*p+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function aa(t,e){var r=0,i=0,n=0;A(t,function(o,s,a,u,l){u>n&&(n=u,i=s,e.push([[]])),l>r&&(r=l,i=s,e[u].push([]));var c=s-i,h=t.coordinates[u][l][c+1],p=o[0],f=o[1],d=h[0],g=h[1];e[u][l].push([.75*p+.25*d,.75*f+.25*g]),e[u][l].push([.25*p+.75*d,.25*f+.75*g])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function ua(t,e,r){void 0===r&&(r=2);var i=Q(t),n=Q(e),o=i[0]-n[0],s=i[1]-n[1];return 1===r?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,r)+Math.pow(s,r),1/r)}function la(t,e){var r=(e=e||{}).threshold||1e4,i=e.p||2,n=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];D(t,function(t){a.push(ar(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=ua(a[l],a[c],i);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++)0!==(h=u[l][c])&&(u[l][c]=n?h<=r?1:0:h<=r?Math.pow(h,o):0);if(s)for(l=0;l<a.length;l++){var p=u[l].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/p}return u}function ca(t){for(var e=0,r=0,i=t;r<i.length;r++)e+=i[r];return e/t.length}function ha(t,e){return void 0===e&&(e={}),fa(t,"mercator",e)}function pa(t,e){return void 0===e&&(e={}),fa(t,"wgs84",e)}function fa(t,e,r){void 0===r&&(r={});var i=(r=r||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&w(t[0])?t="mercator"===e?da(t):ga(t):(!0!==i&&(t=xe(t)),A(t,function(t){var r="mercator"===e?da(t):ga(t);t[0]=r[0],t[1]=r[1]})),t}function da(t){var e=Math.PI/180,r=6378137,i=20037508.342789244,n=[r*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,r*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return n[0]>i&&(n[0]=i),n[0]<-i&&(n[0]=-i),n[1]>i&&(n[1]=i),n[1]<-i&&(n[1]=-i),n}function ga(t){var e=180/Math.PI,r=6378137;return[t[0]*e/r,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/r)))*e]}ta.prototype={constructor:ta,polygons:function(){var t=this.edges;return this.cells.map(function(e){var r=e.halfedges.map(function(r){return js(e,t[r])});return r.data=e.site.data,r})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(r,i){if(o=(n=r.halfedges).length)for(var n,o,s,a,u,l,c=r.site,h=-1,p=e[n[o-1]],f=p.left===c?p.right:p.left;++h<o;)s=f,f=(p=e[n[h]]).left===c?p.right:p.left,s&&f&&i<s.index&&i<f.index&&(u=s,l=f,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,f.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,r){for(var i,n,o=this,s=o._found||0,a=o.cells.length;!(n=o.cells[s]);)if(++s>=a)return null;var u=t-n.site[0],l=e-n.site[1],c=u*u+l*l;do{n=o.cells[i=s],s=null,n.halfedges.forEach(function(r){var i=o.edges[r],a=i.left;if(a!==n.site&&a||(a=i.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=i,null==r||c<=r*r?n.site:null}};var ya=Object.freeze({__proto__:null,toMercator:ha,toWgs84:pa}),va=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};function ma(t){return Array.isArray(t)?Oa(t):t&&t.bbox?Oa(t.bbox):[360*xa(),180*xa()]}function _a(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var r=[],i=0;i<t;i++)r.push(u(ma(e.bbox)));return d(r)}function ba(t,e){void 0===e&&(e={}),null==t&&(t=1),w(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),w(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var r=[],i=function(t){var i,n=[],o=va(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,r){r[e]=e>0?t+r[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var r=Math.random();n.push([r*(e.max_radial_length||10)*Math.sin(t),r*(e.max_radial_length||10)*Math.cos(t)])}),n[n.length-1]=n[0],n=n.map((i=ma(e.bbox),function(t){return[t[0]+i[0],t[1]+i[1]]})),r.push(c([n]))},n=0;n<t;n++)i();return d(r)}function Sa(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var r=e.bbox,i=e.num_vertices,n=e.max_length,o=e.max_rotation;null==t&&(t=1),(!w(i)||void 0===i||i<2)&&(i=10),w(n)&&void 0!==n||(n=1e-4),w(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[ma(r)],l=0;l<i-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*n;u.push([u[l][0]+h*Math.cos(c),u[l][1]+h*Math.sin(c)])}s.push(p(u))}return d(s)}function xa(){return Math.random()-.5}function Oa(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Ea=Object.freeze({__proto__:null,randomPosition:ma,randomPoint:_a,randomPolygon:ba,randomLineString:Sa});function Ca(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var r=[];return D(t,function(t){Ia(t.properties,e)&&r.push(t)}),d(r)}function Ta(t,e,r){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=wa(t,e),n=Object.keys(i),o=0;o<n.length;o++){for(var s=n[o],a=i[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);r(d(u),s,o)}}function Pa(t,e,r,i){var n=i;return Ta(t,e,function(t,e,o){n=0===o&&void 0===i?t:r(n,t,e,o)}),n}function wa(t,e){var r={};return D(t,function(t,i){var n=t.properties||{};if(Object.prototype.hasOwnProperty.call(n,String(e))){var o=n[e];Object.prototype.hasOwnProperty.call(r,o)?r[o].push(i):r[o]=[i]}}),r}function Ia(t,e){if(void 0===t)return!1;var r=typeof e;if("number"===r||"string"===r)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!Ia(t,e[i]))return!1;return!0}return La(t,e)}function La(t,e){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(t[n]!==e[n])return!1}return!0}function Ra(t,e){if(!e)return{};if(!e.length)return{};for(var r={},i=0;i<e.length;i++){var n=e[i];Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}var Ma=Object.freeze({__proto__:null,getCluster:Ca,clusterEach:Ta,clusterReduce:Pa,createBins:wa,applyFilter:Ia,propertiesContainsFilter:La,filterProperties:Ra}),Aa=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function ja(t,e){return t>e?1:t<e?-1:0}function Na(t,e,r){for(var i=new Aa(null,null),n=i,o=i;;){var s=r(t,e.key);if(s<0){if(null===e.left)break;if(r(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(r(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;n.right=e,n=e,e=e.right}}return n.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function Fa(t,e,r,i){var n=new Aa(t,e);if(null===r)return n.left=n.right=null,n;var o=i(t,(r=Na(t,r,i)).key);return o<0?(n.left=r.left,n.right=r,r.left=null):o>=0&&(n.right=r.right,n.left=r,r.right=null),n}function Da(t,e,r){var i=null,n=null;if(e){var o=r((e=Na(t,e,r)).key,t);0===o?(i=e.left,n=e.right):o<0?(n=e.right,e.right=null,i=e):(i=e.left,e.left=null,n=e)}return{left:i,right:n}}var ka=function(){function t(t){void 0===t&&(t=ja),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Fa(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var r=new Aa(t,e);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,n=Na(t,this._root,i),o=i(t,n.key);return 0===o?this._root=n:(o<0?(r.left=n.left,r.right=n,n.left=null):o>0&&(r.right=n.right,r.left=n,n.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,r){var i;return null===e?null:0===r(t,(e=Na(t,e,r)).key)?(null===e.left?i=e.right:(i=Na(t,e.left,r)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Na(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var i=r(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Na(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var r=this._root,i=[],n=!1;!n;)null!==r?(i.push(r),r=r.left):0!==i.length?(r=i.pop(),t.call(e,r),r=r.right):n=!0;return this},t.prototype.range=function(t,e,r,i){for(var n=[],o=this._comparator,s=this._root;0!==n.length||s;)if(s)n.push(s),s=s.left;else{if(o((s=n.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var r=e.key;return t.push(r)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var r=e.data;return t.push(r)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,r=!1,i=0,n=[];!r;)if(e)n.push(e),e=e.left;else if(n.length>0){if(e=n.pop(),i===t)return e;i++,e=e.right}else r=!0;return null},t.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;e;){var n=i(t.key,e.key);if(0===n)break;n<0?(r=e,e=e.left):e=e.right}return r},t.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;e;){var n=i(t.key,e.key);if(0===n)break;n<0?e=e.left:(r=e,e=e.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,r=[],i=!1,n=new Aa(null,null),o=n;!i;)e?(r.push(e),e=e.left):r.length>0?e=(e=o=o.next=r.pop()).right:i=!0;return o.next=null,n.next}(this._root)},t.prototype.load=function(t,e,r){void 0===e&&(e=[]),void 0===r&&(r=!1);var i=t.length,n=this._comparator;if(r&&function t(e,r,i,n,o){if(!(i>=n)){for(var s=e[i+n>>1],a=i-1,u=n+1;;){do{a++}while(o(e[a],s)<0);do{u--}while(o(e[u],s)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=r[a],r[a]=r[u],r[u]=l}t(e,r,i,u,o),t(e,r,u+1,n,o)}}(t,e,0,i-1,n),null===this._root)this._root=function t(e,r,i,n){var o=n-i;if(o>0){var s=i+Math.floor(o/2),a=e[s],u=r[s],l=new Aa(a,u);return l.left=t(e,r,i,s),l.right=t(e,r,s+1,n),l}return null}(t,e,0,i),this._size=i;else{var o=function(t,e,r){for(var i=new Aa(null,null),n=i,o=t,s=e;null!==o&&null!==s;)r(o.key,s.key)<0?(n.next=o,o=o.next):(n.next=s,s=s.next),n=n.next;return null!==o?n.next=o:null!==s&&(n.next=s),i.next}(this.toList(),function(t,e){for(var r=new Aa(null,null),i=r,n=0;n<t.length;n++)i=i.next=new Aa(t[n],e[n]);return i.next=null,r.next}(t,e),n);i=this._size+i,this._root=function t(e,r,i){var n=i-r;if(n>0){var o=r+Math.floor(n/2),s=t(e,r,o),a=e.head;return a.left=s,e.head=e.head.next,a.right=t(e,o+1,i),a}return null}({head:o},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,r,i,n,o){if(e){n(r+(i?"└── ":"├── ")+o(e)+"\n");var s=r+(i?"    ":"│   ");e.left&&t(e.left,s,!1,n,o),e.right&&t(e.right,s,!0,n,o)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,r){var i=this._comparator,n=Da(t,this._root,i),o=n.left,s=n.right;i(t,e)<0?s=Fa(e,r,s,i):o=Fa(e,r,o,i),this._root=function(t,e,r){return null===e?t:(null===t||((e=Na(t.key,e,r)).left=t),e)}(o,s,i)},t.prototype.split=function(t){return Da(t,this._root,this._comparator)},t}();function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ba(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ua(t,e,r){return e&&Ba(t.prototype,e),r&&Ba(t,r),t}var Va=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},za=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Wa=Number.EPSILON;void 0===Wa&&(Wa=Math.pow(2,-52));var Ya=Wa*Wa,Xa=function(t,e){if(-Wa<t&&t<Wa&&-Wa<e&&e<Wa)return 0;var r=t-e;return r*r<Ya*t*e?0:t<e?-1:1},Za=function(){function t(){Ga(this,t),this.reset()}return Ua(t,[{key:"reset",value:function(){this.xRounder=new Ha,this.yRounder=new Ha}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ha=function(){function t(){Ga(this,t),this.tree=new ka,this.round(0)}return Ua(t,[{key:"round",value:function(t){var e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===Xa(e.key,r.key))return this.tree.remove(t),r.key;var i=this.tree.next(e);return null!==i&&0===Xa(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),t}(),qa=new Za,Ka=function(t,e){return t.x*e.y-t.y*e.x},Ja=function(t,e){return t.x*e.x+t.y*e.y},Qa=function(t,e,r){var i={x:e.x-t.x,y:e.y-t.y},n={x:r.x-t.x,y:r.y-t.y},o=Ka(i,n);return Xa(o,0)},$a=function(t){return Math.sqrt(Ja(t,t))},tu=function(t,e,r){return 0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r}},eu=function(t,e,r){return 0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)}},ru=function(){function t(e,r){Ga(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return Ua(t,null,[{key:"compare",value:function(e,r){var i=t.comparePoints(e.point,r.point);return 0!==i?i:(e.point!==r.point&&e.link(r),e.isLeft!==r.isLeft?e.isLeft?1:-1:nu.compare(e.segment,r.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Ua(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,r=0,i=e.length;r<i;r++){var n=e[r];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var r=this.point.events[e];if(void 0===r.segment.consumedBy)for(var i=e+1;i<t;i++){var n=this.point.events[i];void 0===n.consumedBy&&r.otherSE.point.events===n.otherSE.point.events&&r.segment.consume(n.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,r=this.point.events.length;e<r;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,r=new Map,i=function(i){var n,o,s,a,u,l=i.otherSE;r.set(i,{sine:(n=e.point,o=t.point,s=l.point,a={x:o.x-n.x,y:o.y-n.y},u={x:s.x-n.x,y:s.y-n.y},Ka(u,a)/$a(u)/$a(a)),cosine:function(t,e,r){var i={x:e.x-t.x,y:e.y-t.y},n={x:r.x-t.x,y:r.y-t.y};return Ja(n,i)/$a(n)/$a(i)}(e.point,t.point,l.point)})};return function(t,e){r.has(t)||i(t),r.has(e)||i(e);var n=r.get(t),o=n.sine,s=n.cosine,a=r.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),iu=0,nu=function(){function t(e,r,i,n){Ga(this,t),this.id=++iu,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=i,this.windings=n}return Ua(t,null,[{key:"compare",value:function(t,e){var r=t.leftSE.point.x,i=e.leftSE.point.x,n=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(n<i)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(r<i){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(r>i){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var f=t.comparePoint(e.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(n<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(n>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(n!==o){var y=u-s,v=n-r,m=l-a,_=o-i;if(y>v&&m<_)return 1;if(y<v&&m>_)return-1}return n>o?1:n<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Ua(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;var n=(t.y-e.y)/i.y,o=e.x+n*i.x;if(t.x===o)return 0;var s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),r=t.bbox(),i=za(e,r);if(null===i)return null;var n=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Va(e,s)&&0===this.comparePoint(s),l=Va(r,n)&&0===t.comparePoint(n),c=Va(e,a)&&0===this.comparePoint(a),h=Va(r,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&n.x===a.x&&n.y===a.y?null:n;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var p=function(t,e,r,i){if(0===e.x)return eu(r,i,t.x);if(0===i.x)return eu(t,e,r.x);if(0===e.y)return tu(r,i,t.y);if(0===i.y)return tu(t,e,r.y);var n=Ka(e,i);if(0==n)return null;var o={x:r.x-t.x,y:r.y-t.y},s=Ka(o,e)/n,a=Ka(o,i)/n;return{x:(t.x+a*e.x+(r.x+s*i.x))/2,y:(t.y+a*e.y+(r.y+s*i.y))/2}}(n,this.vector(),s,t.vector());return null===p?null:Va(i,p)?qa.round(p.x,p.y):null}},{key:"split",value:function(e){var r=[],i=void 0!==e.events,n=new ru(e,!0),o=new ru(e,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(n);var a=new t(n,s,this.rings.slice(),this.windings.slice());return ru.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),ru.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(n.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,r=this.windings.length;e<r;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var r=this,i=e;r.consumedBy;)r=r.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var n=t.compare(r,i);if(0!==n){if(n>0){var o=r;r=i,i=o}if(r.prev===i){var s=r;r=i,i=s}for(var a=0,u=i.rings.length;a<u;a++){var l=i.rings[a],c=i.windings[a],h=r.rings.indexOf(l);-1===h?(r.rings.push(l),r.windings.push(c)):r.windings[h]+=c}i.rings=null,i.windings=null,i.consumedBy=r,i.leftSE.consumedBy=r.leftSE,i.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,n=0,o=this.rings.length;n<o;n++){var s=this.rings[n],a=this.windings[n],u=e.indexOf(s);-1===u?(e.push(s),r.push(a)):r[u]+=a}for(var l=[],c=[],h=0,p=e.length;h<p;h++)if(0!==r[h]){var f=e[h],d=f.poly;if(-1===c.indexOf(d))if(f.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var g=l.indexOf(f.poly);-1!==g&&l.splice(g,1)}}for(var y=0,v=l.length;y<v;y++){var m=l[y].multiPoly;-1===i.indexOf(m)&&i.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(du.type){case"union":var r=0===t.length,i=0===e.length;this._isInResult=r!==i;break;case"intersection":var n,o;t.length<e.length?(n=t.length,o=e.length):(n=e.length,o=t.length),this._isInResult=o===du.numMultiPolys&&n<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(du.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,r,i){var n,o,s,a=ru.comparePoints(e,r);if(a<0)n=e,o=r,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));n=r,o=e,s=-1}return new t(new ru(n,!0),new ru(o,!1),[i],[s])}}]),t}(),ou=function(){function t(e,r,i){if(Ga(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var n=qa.round(e[0][0],e[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};for(var o=n,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=qa.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(nu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}n.x===o.x&&n.y===o.y||this.segments.push(nu.fromRing(o,n,this))}return Ua(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.segments.length;e<r;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),t}(),su=function(){function t(e,r){if(Ga(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ou(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,n=e.length;i<n;i++){var o=new ou(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=r}return Ua(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,r=this.interiorRings.length;e<r;e++)for(var i=this.interiorRings[e].getSweepEvents(),n=0,o=i.length;n<o;n++)t.push(i[n]);return t}}]),t}(),au=function(){function t(e,r){if(Ga(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,n=e.length;i<n;i++){var o=new su(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=r}return Ua(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++)for(var i=this.polys[e].getSweepEvents(),n=0,o=i.length;n<o;n++)t.push(i[n]);return t}}]),t}(),uu=function(){function t(e){Ga(this,t),this.events=e;for(var r=0,i=e.length;r<i;r++)e[r].segment.ringOut=this;this.poly=null}return Ua(t,null,[{key:"factory",value:function(e){for(var r=[],i=0,n=e.length;i<n;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var f=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,",")+" ".concat(f.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var g=null,y=0,v=h.length;y<v;y++)if(h[y].point===a.point){g=y;break}if(null===g){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=p.sort(m)[0].otherSE;break}var _=h.splice(g)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),r.push(new t(b.reverse()))}r.push(new t(l))}}return r}}]),Ua(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],r=1,i=this.events.length-1;r<i;r++){var n=this.events[r].point,o=this.events[r+1].point;0!==Qa(n,t,o)&&(e.push(n),t=n)}if(1===e.length)return null;var s=e[0],a=e[1];0===Qa(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],p=l;p!=c;p+=u)h.push([e[p].x,e[p].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,r=this.events.length;e<r;e++){var i=this.events[e];ru.compare(t,i)>0&&(t=i)}for(var n=t.segment.prevInResult(),o=n?n.prevInResult():null;;){if(!n)return null;if(!o)return n.ringOut;if(o.ringOut!==n.ringOut)return o.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();o=(n=o.prevInResult())?n.prevInResult():null}}}]),t}(),lu=function(){function t(e){Ga(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Ua(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,r=this.interiorRings.length;e<r;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),t}(),cu=function(){function t(e){Ga(this,t),this.rings=e,this.polys=this._composePolys(e)}return Ua(t,[{key:"getGeom",value:function(){for(var t=[],e=0,r=this.polys.length;e<r;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];if(!n.poly)if(n.isExteriorRing())e.push(new lu(n));else{var o=n.enclosingRing();o.poly||e.push(new lu(o)),o.poly.addInterior(n)}}return e}}]),t}(),hu=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nu.compare;Ga(this,t),this.queue=e,this.tree=new ka(r),this.segments=[]}return Ua(t,[{key:"process",value:function(t){var e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var n=i,o=i,s=void 0,a=void 0;void 0===s;)null===(n=this.tree.prev(n))?s=null:void 0===n.key.consumedBy&&(s=n.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,p=c.length;h<p;h++)r.push(c[h])}var f=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(f=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,v=g.length;y<v;y++)r.push(g[y])}if(null!==u||null!==f){var m;m=null===u?f:null===f?u:ru.comparePoints(u,f)<=0?u:f,this.queue.remove(e.rightSE),r.push(e.rightSE);for(var _=e.split(m),b=0,S=_.length;b<S;b++)r.push(_[b])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var x=s.getIntersection(a);if(null!==x){if(!s.isAnEndpoint(x))for(var O=this._splitSafely(s,x),E=0,C=O.length;E<C;E++)r.push(O[E]);if(!a.isAnEndpoint(x))for(var T=this._splitSafely(a,x),P=0,w=T.length;P<w;P++)r.push(T[P])}}this.tree.remove(e)}return r}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var i=t.split(e);return i.push(r),void 0===t.consumedBy&&this.tree.insert(t),i}}]),t}(),pu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,fu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,du=new(function(){function t(){Ga(this,t)}return Ua(t,[{key:"run",value:function(t,e,r){du.type=t,qa.reset();for(var i=[new au(e,!0)],n=0,o=r.length;n<o;n++)i.push(new au(r[n],!1));if(du.numMultiPolys=i.length,"difference"===du.type)for(var s=i[0],a=1;a<i.length;)null!==za(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===du.type)for(var u=0,l=i.length;u<l;u++)for(var c=i[u],h=u+1,p=i.length;h<p;h++)if(null===za(c.bbox,i[h].bbox))return[];for(var f=new ka(ru.compare),d=0,g=i.length;d<g;d++)for(var y=i[d].getSweepEvents(),v=0,m=y.length;v<m;v++)if(f.insert(y[v]),f.size>pu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new hu(f),b=f.size,S=f.pop();S;){var x=S.key;if(f.size===b){var O=x.segment;throw new Error("Unable to pop() ".concat(x.isLeft?"left":"right"," SweepEvent ")+"[".concat(x.point.x,", ").concat(x.point.y,"] from segment #").concat(O.id," ")+"[".concat(O.leftSE.point.x,", ").concat(O.leftSE.point.y,"] -> ")+"[".concat(O.rightSE.point.x,", ").concat(O.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>pu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>fu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var E=_.process(x),C=0,T=E.length;C<T;C++){var P=E[C];void 0===P.consumedBy&&f.insert(P)}b=f.size,S=f.pop()}qa.reset();var w=uu.factory(_.segments);return new cu(w).getGeom()}}]),t}()),gu={union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return du.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return du.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return du.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return du.run("difference",t,r)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(r+i,0):Math.min(i,r);var n=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(n=n<0?Math.max(r+arguments[2],0):Math.min(n,r);i<n;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var vu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),mu=function(){},_u={MAX_VALUE:{configurable:!0}};mu.isNaN=function(t){return Number.isNaN(t)},mu.doubleToLongBits=function(t){return t},mu.longBitsToDouble=function(t){return t},mu.isInfinite=function(t){return!Number.isFinite(t)},_u.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(mu,_u);var bu=function(){},Su=function(){},xu=function(){};function Ou(){}var Eu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Cu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Eu.prototype.setOrdinate=function(t,e){switch(t){case Eu.X:this.x=e;break;case Eu.Y:this.y=e;break;case Eu.Z:this.z=e;break;default:throw new vu("Invalid ordinate index: "+t)}},Eu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!yu.equalsWithTolerance(this.x,e.x,r)&&!!yu.equalsWithTolerance(this.y,e.y,r)}},Eu.prototype.getOrdinate=function(t){switch(t){case Eu.X:return this.x;case Eu.Y:return this.y;case Eu.Z:return this.z}throw new vu("Invalid ordinate index: "+t)},Eu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||mu.isNaN(this.z))&&mu.isNaN(t.z)},Eu.prototype.equals=function(t){return t instanceof Eu&&this.equals2D(t)},Eu.prototype.equalInZ=function(t,e){return yu.equalsWithTolerance(this.z,t.z,e)},Eu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Eu.prototype.clone=function(){},Eu.prototype.copy=function(){return new Eu(this)},Eu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Eu.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+r*r+i*i)},Eu.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},Eu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Eu.hashCode(this.x))+Eu.hashCode(this.y)},Eu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Eu.prototype.interfaces_=function(){return[bu,Su,Ou]},Eu.prototype.getClass=function(){return Eu},Eu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=mu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Cu.DimensionalComparator.get=function(){return Tu},Cu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Cu.NULL_ORDINATE.get=function(){return mu.NaN},Cu.X.get=function(){return 0},Cu.Y.get=function(){return 1},Cu.Z.get=function(){return 2},Object.defineProperties(Eu,Cu);var Tu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new vu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Tu.prototype.compare=function(t,e){var r=t,i=e,n=Tu.compare(r.x,i.x);if(0!==n)return n;var o=Tu.compare(r.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:Tu.compare(r.z,i.z)},Tu.prototype.interfaces_=function(){return[xu]},Tu.prototype.getClass=function(){return Tu},Tu.compare=function(t,e){return t<e?-1:t>e?1:mu.isNaN(t)?mu.isNaN(e)?0:-1:mu.isNaN(e)?1:0};var Pu=function(){};Pu.prototype.create=function(){},Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu};var wu=function(){},Iu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};wu.prototype.interfaces_=function(){return[]},wu.prototype.getClass=function(){return wu},wu.toLocationSymbol=function(t){switch(t){case wu.EXTERIOR:return"e";case wu.BOUNDARY:return"b";case wu.INTERIOR:return"i";case wu.NONE:return"-"}throw new vu("Unknown location value: "+t)},Iu.INTERIOR.get=function(){return 0},Iu.BOUNDARY.get=function(){return 1},Iu.EXTERIOR.get=function(){return 2},Iu.NONE.get=function(){return-1},Object.defineProperties(wu,Iu);var Lu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Ru=function(){},Mu={LOG_10:{configurable:!0}};Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru},Ru.log10=function(t){var e=Math.log(t);return mu.isInfinite(e)||mu.isNaN(e)?e:e/Ru.LOG_10},Ru.min=function(t,e,r,i){var n=t;return e<n&&(n=e),r<n&&(n=r),i<n&&(n=i),n},Ru.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],n=arguments[1],o=arguments[2];return i<n?n:i>o?o:i}},Ru.wrap=function(t,e){return t<0?e- -t%e:t%e},Ru.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],i=t;return e>i&&(i=e),r>i&&(i=r),i}if(4===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=n;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},Ru.average=function(t,e){return(t+e)/2},Mu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ru,Mu);var Au=function(t){this.str=t};Au.prototype.append=function(t){this.str+=t},Au.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Au.prototype.toString=function(t){return this.str};var ju=function(t){this.value=t};ju.prototype.intValue=function(){return this.value},ju.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ju.isNaN=function(t){return Number.isNaN(t)};var Nu=function(){};Nu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Nu.toUpperCase=function(t){return t.toUpperCase()};var Fu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var n=arguments[0],o=arguments[1];this.init(n,o)}},Du={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Fu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Fu.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),i=Fu.magnitude(r._hi),n=Fu.TEN.pow(i);(r=r.divide(n)).gt(Fu.TEN)?(r=r.divide(Fu.TEN),i+=1):r.lt(Fu.ONE)&&(r=r.multiply(Fu.TEN),i-=1);for(var o=i+1,s=new Au,a=Fu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(r._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),r=r.subtract(Fu.valueOf(l)).multiply(Fu.TEN),c&&r.selfAdd(Fu.TEN);var p=!0,f=Fu.magnitude(r._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=i,s.toString()},Fu.prototype.sqr=function(){return this.multiply(this)},Fu.prototype.doubleValue=function(){return this._hi+this._lo},Fu.prototype.subtract=function(){if(arguments[0]instanceof Fu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Fu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Fu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Fu.prototype.selfSubtract=function(){if(arguments[0]instanceof Fu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Fu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Fu.prototype.min=function(t){return this.le(t)?this:t},Fu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Fu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r,i,n,o,s=arguments[0],a=arguments[1],u=null,l=null,c=null,h=null;return n=this._hi/s,h=(u=(c=Fu.SPLIT*n)-(u=c-n))*(l=(h=Fu.SPLIT*s)-(l=h-s))-(o=n*s)+u*(i=s-l)+(r=n-u)*l+r*i,h=n+(c=(this._hi-o-h+this._lo-n*a)/s),this._hi=h,this._lo=n-h+c,this}},Fu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Fu.prototype.divide=function(){if(arguments[0]instanceof Fu){var t,e,r,i,n=arguments[0],o=null,s=null,a=null,u=null;t=(r=this._hi/n._hi)-(o=(a=Fu.SPLIT*r)-(o=a-r)),u=o*(s=(u=Fu.SPLIT*n._hi)-(s=u-n._hi))-(i=r*n._hi)+o*(e=n._hi-s)+t*s+t*e;var l=u=r+(a=(this._hi-i-u+this._lo-r*n._lo)/n._hi);return new Fu(l,r-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return mu.isNaN(c)?Fu.createNaN():Fu.copy(this).selfDivide(c,0)}},Fu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Fu.prototype.pow=function(t){if(0===t)return Fu.valueOf(1);var e=new Fu(this),r=Fu.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&r.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},Fu.prototype.ceil=function(){if(this.isNaN())return Fu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Fu(t,e)},Fu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Fu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Fu.prototype.setValue=function(){if(arguments[0]instanceof Fu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Fu.prototype.max=function(t){return this.ge(t)?this:t},Fu.prototype.sqrt=function(){if(this.isZero())return Fu.valueOf(0);if(this.isNegative())return Fu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=Fu.valueOf(e),i=this.subtract(r.sqr())._hi*(.5*t);return r.add(i)},Fu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Fu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,r,i,n,o,s=arguments[0],a=null;return a=(i=this._hi+s)-(n=i-this._hi),r=(o=(a=s-n+(this._hi-a))+this._lo)+(i-(e=i+o)),this._hi=e+r,this._lo=r+(e-this._hi),this}}else if(2===arguments.length){var u,l,c,h,p=arguments[0],f=arguments[1],d=null,g=null,y=null;c=this._hi+p,l=this._lo+f,g=c-(y=c-this._hi),d=l-(h=l-this._lo);var v=(u=c+(y=(g=p-y+(this._hi-g))+l))+(y=(d=f-h+(this._lo-d))+(y+(c-u))),m=y+(u-v);return this._hi=v,this._lo=m,this}},Fu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Fu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r,i,n=arguments[0],o=arguments[1],s=null,a=null,u=null,l=null;s=(u=Fu.SPLIT*this._hi)-this._hi,l=Fu.SPLIT*n,s=u-s,r=this._hi-s,a=l-n;var c=(u=this._hi*n)+(l=s*(a=l-a)-u+s*(i=n-a)+r*a+r*i+(this._hi*o+this._lo*n)),h=l+(s=u-c);return this._hi=c,this._lo=h,this}},Fu.prototype.selfSqr=function(){return this.selfMultiply(this)},Fu.prototype.floor=function(){if(this.isNaN())return Fu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Fu(t,e)},Fu.prototype.negate=function(){return this.isNaN()?this:new Fu(-this._hi,-this._lo)},Fu.prototype.clone=function(){},Fu.prototype.multiply=function(){if(arguments[0]instanceof Fu){var t=arguments[0];return t.isNaN()?Fu.createNaN():Fu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return mu.isNaN(e)?Fu.createNaN():Fu.copy(this).selfMultiply(e,0)}},Fu.prototype.isNaN=function(){return mu.isNaN(this._hi)},Fu.prototype.intValue=function(){return Math.trunc(this._hi)},Fu.prototype.toString=function(){var t=Fu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Fu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),i=e[0]+1,n=r;if("."===r.charAt(0))n="0"+r;else if(i<0)n="0."+Fu.stringOfChar("0",-i)+r;else if(-1===r.indexOf(".")){var o=i-r.length;n=r+Fu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+n:n},Fu.prototype.reciprocal=function(){var t,e,r,i,n=null,o=null,s=null,a=null;t=(r=1/this._hi)-(n=(s=Fu.SPLIT*r)-(n=s-r)),o=(a=Fu.SPLIT*this._hi)-this._hi;var u=r+(s=(1-(i=r*this._hi)-(a=n*(o=a-o)-i+n*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new Fu(u,r-u+s)},Fu.prototype.toSciNotation=function(){if(this.isZero())return Fu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),i=Fu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var n="";r.length>1&&(n=r.substring(1));var o=r.charAt(0)+"."+n;return this.isNegative()?"-"+o+i:o+i},Fu.prototype.abs=function(){return this.isNaN()?Fu.NaN:this.isNegative()?this.negate():new Fu(this)},Fu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Fu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Fu.prototype.add=function(){if(arguments[0]instanceof Fu){var t=arguments[0];return Fu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Fu.copy(this).selfAdd(e)}},Fu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Fu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}},Fu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Fu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Fu.prototype.trunc=function(){return this.isNaN()?Fu.NaN:this.isPositive()?this.floor():this.ceil()},Fu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Fu.prototype.interfaces_=function(){return[Ou,bu,Su]},Fu.prototype.getClass=function(){return Fu},Fu.sqr=function(t){return Fu.valueOf(t).selfMultiply(t)},Fu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Fu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Fu(e)}},Fu.sqrt=function(t){return Fu.valueOf(t).sqrt()},Fu.parse=function(t){for(var e=0,r=t.length;Nu.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<r){var n=t.charAt(e);"-"!==n&&"+"!==n||(e++,"-"===n&&(i=!0))}for(var o=new Fu,s=0,a=0,u=0;!(e>=r);){var l=t.charAt(e);if(e++,Nu.isDigit(l)){var c=l-"0";o.selfMultiply(Fu.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=ju.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,f=s-a-u;if(0===f)p=o;else if(f>0){var d=Fu.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=Fu.TEN.pow(-f);p=o.multiply(g)}return i?p.negate():p},Fu.createNaN=function(){return new Fu(mu.NaN,mu.NaN)},Fu.copy=function(t){return new Fu(t)},Fu.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(r));return 10*Math.pow(10,i)<=e&&(i+=1),i},Fu.stringOfChar=function(t,e){for(var r=new Au,i=0;i<e;i++)r.append(t);return r.toString()},Du.PI.get=function(){return new Fu(3.141592653589793,1.2246467991473532e-16)},Du.TWO_PI.get=function(){return new Fu(6.283185307179586,2.4492935982947064e-16)},Du.PI_2.get=function(){return new Fu(1.5707963267948966,6.123233995736766e-17)},Du.E.get=function(){return new Fu(2.718281828459045,1.4456468917292502e-16)},Du.NaN.get=function(){return new Fu(mu.NaN,mu.NaN)},Du.EPS.get=function(){return 1.23259516440783e-32},Du.SPLIT.get=function(){return 134217729},Du.MAX_PRINT_DIGITS.get=function(){return 32},Du.TEN.get=function(){return Fu.valueOf(10)},Du.ONE.get=function(){return Fu.valueOf(1)},Du.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Du.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Fu,Du);var ku=function(){},Gu={DP_SAFE_EPSILON:{configurable:!0}};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.orientationIndex=function(t,e,r){var i=ku.orientationIndexFilter(t,e,r);if(i<=1)return i;var n=Fu.valueOf(e.x).selfAdd(-t.x),o=Fu.valueOf(e.y).selfAdd(-t.y),s=Fu.valueOf(r.x).selfAdd(-e.x),a=Fu.valueOf(r.y).selfAdd(-e.y);return n.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},ku.signOfDet2x2=function(t,e,r,i){return t.multiply(i).selfSubtract(e.multiply(r)).signum()},ku.intersection=function(t,e,r,i){var n=Fu.valueOf(i.y).selfSubtract(r.y).selfMultiply(Fu.valueOf(e.x).selfSubtract(t.x)),o=Fu.valueOf(i.x).selfSubtract(r.x).selfMultiply(Fu.valueOf(e.y).selfSubtract(t.y)),s=n.subtract(o),a=Fu.valueOf(i.x).selfSubtract(r.x).selfMultiply(Fu.valueOf(t.y).selfSubtract(r.y)),u=Fu.valueOf(i.y).selfSubtract(r.y).selfMultiply(Fu.valueOf(t.x).selfSubtract(r.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=Fu.valueOf(t.x).selfAdd(Fu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=Fu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Fu.valueOf(t.y).selfSubtract(r.y)),p=Fu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Fu.valueOf(t.x).selfSubtract(r.x)),f=h.subtract(p).selfDivide(s).doubleValue(),d=Fu.valueOf(r.y).selfAdd(Fu.valueOf(i.y).selfSubtract(r.y).selfMultiply(f)).doubleValue();return new Eu(c,d)},ku.orientationIndexFilter=function(t,e,r){var i=null,n=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=n-o;if(n>0){if(o<=0)return ku.signum(s);i=n+o}else{if(!(n<0))return ku.signum(s);if(o>=0)return ku.signum(s);i=-n-o}var a=ku.DP_SAFE_EPSILON*i;return s>=a||-s>=a?ku.signum(s):2},ku.signum=function(t){return t>0?1:t<0?-1:0},Gu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ku,Gu);var Bu=function(){},Uu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Uu.X.get=function(){return 0},Uu.Y.get=function(){return 1},Uu.Z.get=function(){return 2},Uu.M.get=function(){return 3},Bu.prototype.setOrdinate=function(t,e,r){},Bu.prototype.size=function(){},Bu.prototype.getOrdinate=function(t,e){},Bu.prototype.getCoordinate=function(){},Bu.prototype.getCoordinateCopy=function(t){},Bu.prototype.getDimension=function(){},Bu.prototype.getX=function(t){},Bu.prototype.clone=function(){},Bu.prototype.expandEnvelope=function(t){},Bu.prototype.copy=function(){},Bu.prototype.getY=function(t){},Bu.prototype.toCoordinateArray=function(){},Bu.prototype.interfaces_=function(){return[Su]},Bu.prototype.getClass=function(){return Bu},Object.defineProperties(Bu,Uu);var Vu=function(){},zu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vu),Wu=function(){};Wu.arraycopy=function(t,e,r,i,n){for(var o=0,s=e;s<e+n;s++)r[i+o]=t[s],o++},Wu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Yu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this.x=r,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var n=arguments[0],o=arguments[1];this.x=n.y*o.w-o.y*n.w,this.y=o.x*n.w-n.x*o.w,this.w=n.x*o.y-o.x*n.y}else if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,y=p.x-h.x,v=h.x*p.y-p.x*h.y,m=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=y*b-_*v,this.y=m*v-g*b,this.w=g*_-m*y}};Yu.prototype.getY=function(){var t=this.y/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new zu;return t},Yu.prototype.getX=function(){var t=this.x/this.w;if(mu.isNaN(t)||mu.isInfinite(t))throw new zu;return t},Yu.prototype.getCoordinate=function(){var t=new Eu;return t.x=this.getX(),t.y=this.getY(),t},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu},Yu.intersection=function(t,e,r,i){var n=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-i.y,u=i.x-r.x,l=r.x*i.y-i.x*r.y,c=n*u-a*o,h=(o*l-u*s)/c,p=(a*s-n*l)/c;if(mu.isNaN(h)||mu.isInfinite(h)||mu.isNaN(p)||mu.isInfinite(p))throw new zu;return new Eu(h,p)};var Xu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Eu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Zu={serialVersionUID:{configurable:!0}};Xu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Xu.prototype.equals=function(t){if(!(t instanceof Xu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Xu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Xu;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,n=this._maxy<t._maxy?this._maxy:t._maxy;return new Xu(e,i,r,n)},Xu.prototype.isNull=function(){return this._maxx<this._minx},Xu.prototype.getMaxX=function(){return this._maxx},Xu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Xu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}},Xu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Xu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}},Xu.prototype.getMinY=function(){return this._miny},Xu.prototype.getMinX=function(){return this._minx},Xu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Xu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Xu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Xu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Xu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Xu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Xu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Xu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Xu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Xu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Xu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Xu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Xu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return this.covers(r,i)}},Xu.prototype.centre=function(){return this.isNull()?null:new Eu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Xu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Xu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];n<o?(this._minx=n,this._maxx=o):(this._minx=o,this._maxx=n),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Xu.prototype.getMaxY=function(){return this._maxy},Xu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},Xu.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Eu.hashCode(this._minx))+Eu.hashCode(this._maxx))+Eu.hashCode(this._miny))+Eu.hashCode(this._maxy)},Xu.prototype.interfaces_=function(){return[bu,Ou]},Xu.prototype.getClass=function(){return Xu},Xu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,n.x),c=Math.max(i.x,n.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y),l>u||c<a))}},Zu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Xu,Zu);var Hu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},qu=function(t){this.geometryFactory=t||new Ic};qu.prototype.read=function(t){var e,r,i;t=t.replace(/[\n\r]/g," ");var n=Hu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((n=Hu.emptyTypeStr.exec(t))[2]=void 0),n&&(r=n[1].toLowerCase(),i=n[2],Ju[r]&&(e=Ju[r].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},qu.prototype.write=function(t){return this.extractGeometry(t)},qu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ku[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Ku[e].apply(this,[t])+")"};var Ku={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ku.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,i=t._geometries.length;r<i;++r)e.push("("+Ku.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,i=t._points._coordinates.length;r<i;++r)e.push(Ku.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,i=t._points._coordinates.length;r<i;++r)e.push(Ku.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,i=t._geometries.length;r<i;++r)e.push("("+Ku.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ku.linestring.apply(this,[t._shell])+")");for(var r=0,i=t._holes.length;r<i;++r)e.push("("+Ku.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,i=t._geometries.length;r<i;++r)e.push("("+Ku.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,i=t._geometries.length;r<i;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},Ju={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Hu.spaces);return this.geometryFactory.createPoint(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var r=t.trim().split(","),i=[],n=0,o=r.length;n<o;++n)e=r[n].replace(Hu.trimParens,"$1"),i.push(Ju.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),i=[],n=0,o=r.length;n<o;++n)e=r[n].trim().split(Hu.spaces),i.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),i=[],n=0,o=r.length;n<o;++n)e=r[n].trim().split(Hu.spaces),i.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var r=t.trim().split(Hu.parenComma),i=[],n=0,o=r.length;n<o;++n)e=r[n].replace(Hu.trimParens,"$1"),i.push(Ju.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e,r,i;if(void 0===t)return this.geometryFactory.createPolygon();for(var n,o=t.trim().split(Hu.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Hu.trimParens,"$1"),r=Ju.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(r._points),0===a?n=i:s.push(i);return this.geometryFactory.createPolygon(n,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var r=t.trim().split(Hu.doubleParenComma),i=[],n=0,o=r.length;n<o;++n)e=r[n].replace(Hu.trimParens,"$1"),i.push(Ju.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],i=0,n=e.length;i<n;++i)r.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(r)}},Qu=function(t){this.parser=new qu(t)};Qu.prototype.write=function(t){return this.parser.write(t)},Qu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $u=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($u),el=function(){};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.shouldNeverReachHere=function(){if(0===arguments.length)el.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tl("Should never reach here"+(null!==t?": "+t:""))}},el.isTrue=function(){var t;if(1===arguments.length)el.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tl:new tl(t)},el.equals=function(){var t,e,r;if(2===arguments.length)el.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],r=arguments[2],!(e=arguments[1]).equals(t)))throw new tl("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var rl=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Eu,this._intPt[1]=new Eu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},il={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};rl.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},rl.prototype.getTopologySummary=function(){var t=new Au;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},rl.prototype.computeIntersection=function(t,e,r,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,r,i)},rl.prototype.getIntersectionNum=function(){return this._result},rl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},rl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},rl.prototype.setPrecisionModel=function(t){this._precisionModel=t},rl.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],r=0;r<this._result;r++)if(!t._intPt[r].equals2D(t._inputLines[e][0])&&!t._intPt[r].equals2D(t._inputLines[e][1]))return!0;return!1}},rl.prototype.getIntersection=function(t){return this._intPt[t]},rl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},rl.prototype.hasIntersection=function(){return this._result!==rl.NO_INTERSECTION},rl.prototype.getEdgeDistance=function(t,e){return rl.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},rl.prototype.isCollinear=function(){return this._result===rl.COLLINEAR_INTERSECTION},rl.prototype.toString=function(){return Qu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Qu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},rl.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},rl.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},rl.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},rl.prototype.interfaces_=function(){return[]},rl.prototype.getClass=function(){return rl},rl.computeEdgeDistance=function(t,e,r){var i=Math.abs(r.x-e.x),n=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=i>n?i:n;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>n?s:a)||t.equals(e)||(o=Math.max(s,a))}return el.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},rl.nonRobustComputeEdgeDistance=function(t,e,r){var i=t.x-e.x,n=t.y-e.y,o=Math.sqrt(i*i+n*n);return el.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},il.DONT_INTERSECT.get=function(){return 0},il.DO_INTERSECT.get=function(){return 1},il.COLLINEAR.get=function(){return 2},il.NO_INTERSECTION.get=function(){return 0},il.POINT_INTERSECTION.get=function(){return 1},il.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(rl,il);var nl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Xu(this._inputLines[0][0],this._inputLines[0][1]),r=new Xu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,Xu.intersects(r,i,e)&&0===al.orientationIndex(r,i,e)&&0===al.orientationIndex(i,r,e))return this._isProper=!0,(e.equals(r)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,i,n){n.x=this.smallestInAbsValue(t.x,e.x,r.x,i.x),n.y=this.smallestInAbsValue(t.y,e.y,r.y,i.y),t.x-=n.x,t.y-=n.y,e.x-=n.x,e.y-=n.y,r.x-=n.x,r.y-=n.y,i.x-=n.x,i.y-=n.y},e.prototype.safeHCoordinateIntersection=function(t,r,i,n){var o=null;try{o=Yu.intersection(t,r,i,n)}catch(s){if(!(s instanceof zu))throw s;o=e.nearestEndpoint(t,r,i,n)}return o},e.prototype.intersection=function(t,r,i,n){var o=this.intersectionWithNormalization(t,r,i,n);return this.isInSegmentEnvelopes(o)||(o=new Eu(e.nearestEndpoint(t,r,i,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,i){var n=t,o=Math.abs(n);return Math.abs(e)<o&&(n=e,o=Math.abs(e)),Math.abs(r)<o&&(n=r,o=Math.abs(r)),Math.abs(i)<o&&(n=i),n},e.prototype.checkDD=function(t,e,r,i,n){var o=ku.intersection(t,e,r,i),s=this.isInSegmentEnvelopes(o);Wu.out.println("DD in env = "+s+"  --------------------- "+o),n.distance(o)>1e-4&&Wu.out.println("Distance = "+n.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,i){var n=new Eu(t),o=new Eu(e),s=new Eu(r),a=new Eu(i),u=new Eu;this.normalizeToEnvCentre(n,o,s,a,u);var l=this.safeHCoordinateIntersection(n,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,r,i,n){var o=Xu.intersects(e,r,i),s=Xu.intersects(e,r,n),a=Xu.intersects(i,n,e),u=Xu.intersects(i,n,r);return o&&s?(this._intPt[0]=i,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,i,n){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=r.x<i.x?r.x:i.x,c=r.y<i.y?r.y:i.y,h=r.x>i.x?r.x:i.x,p=r.y>i.y?r.y:i.y,f=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<p?u:p))/2;n.x=f,n.y=d,t.x-=n.x,t.y-=n.y,e.x-=n.x,e.y-=n.y,r.x-=n.x,r.y-=n.y,i.x-=n.x,i.y-=n.y},e.prototype.computeIntersect=function(e,r,i,n){if(this._isProper=!1,!Xu.intersects(e,r,i,n))return t.NO_INTERSECTION;var o=al.orientationIndex(e,r,i),s=al.orientationIndex(e,r,n);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=al.orientationIndex(i,n,e),u=al.orientationIndex(i,n,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,i,n):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(n)?this._intPt[0]=e:r.equals2D(i)||r.equals2D(n)?this._intPt[0]=r:0===o?this._intPt[0]=new Eu(i):0===s?this._intPt[0]=new Eu(n):0===a?this._intPt[0]=new Eu(e):0===u&&(this._intPt[0]=new Eu(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,i,n)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,i){var n=t,o=al.distancePointLine(t,r,i),s=al.distancePointLine(e,r,i);return s<o&&(o=s,n=e),(s=al.distancePointLine(r,t,e))<o&&(o=s,n=r),(s=al.distancePointLine(i,t,e))<o&&(o=s,n=i),n},e}(rl),ol=function(){};ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.orientationIndex=function(t,e,r){var i=e.x-t.x,n=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return ol.signOfDet2x2(i,n,o,s)},ol.signOfDet2x2=function(t,e,r,i){var n=null,o=null,s=null;if(n=1,0===t||0===i)return 0===e||0===r?0:e>0?r>0?-n:n:r>0?n:-n;if(0===e||0===r)return i>0?t>0?n:-n:t>0?-n:n;if(e>0?i>0?e<=i||(n=-n,o=t,t=r,r=o,o=e,e=i,i=o):e<=-i?(n=-n,r=-r,i=-i):(o=t,t=-r,r=o,o=e,e=-i,i=o):i>0?-e<=i?(n=-n,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,r=-r,i=-i):(n=-n,o=-t,t=-r,r=o,o=-e,e=-i,i=o),t>0){if(!(r>0))return n;if(!(t<=r))return n}else{if(r>0)return-n;if(!(t>=r))return-n;n=-n,t=-t,r=-r}for(;;){if((i-=(s=Math.floor(r/t))*e)<0)return-n;if(i>e)return n;if(t>(r-=s*t)+r){if(e<i+i)return n}else{if(e>i+i)return-n;r=t-r,i=e-i,n=-n}if(0===i)return 0===r?0:-n;if(0===r)return n;if((e-=(s=Math.floor(t/r))*i)<0)return n;if(e>i)return-n;if(r>(t-=s*r)+t){if(i<e+e)return-n}else{if(i>e+e)return n;t=r-t,e=i-e,n=-n}if(0===e)return 0===t?0:n;if(0===t)return-n}};var sl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};sl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,i=e.x;return r>i&&(r=e.x,i=t.x),this._p.x>=r&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var n=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ol.signOfDet2x2(n,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},sl.prototype.isPointInPolygon=function(){return this.getLocation()!==wu.EXTERIOR},sl.prototype.getLocation=function(){return this._isPointOnSegment?wu.BOUNDARY:this._crossingCount%2==1?wu.INTERIOR:wu.EXTERIOR},sl.prototype.isOnSegment=function(){return this._isPointOnSegment},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.locatePointInRing=function(){if(arguments[0]instanceof Eu&&Lu(arguments[1],Bu)){for(var t=arguments[0],e=arguments[1],r=new sl(t),i=new Eu,n=new Eu,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,n),r.countSegment(i,n),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof Eu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new sl(s),l=1;l<a.length;l++){var c=a[l],h=a[l-1];if(u.countSegment(c,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var al=function(){},ul={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al},al.orientationIndex=function(t,e,r){return ku.orientationIndex(t,e,r)},al.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,i=1;i<t.length-1;i++){var n=t[i].x-r,o=t[i+1].y;e+=n*(t[i-1].y-o)}return e/2}if(Lu(arguments[0],Bu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new Eu,l=new Eu,c=new Eu;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var p=0,f=1;f<a-1;f++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(f+1,c),c.x-=h,p+=l.x*(u.y-c.y);return p/2}},al.distanceLineLine=function(t,e,r,i){if(t.equals(e))return al.distancePointLine(t,r,i);if(r.equals(i))return al.distancePointLine(i,t,e);var n=!1;if(Xu.intersects(t,e,r,i)){var o=(e.x-t.x)*(i.y-r.y)-(e.y-t.y)*(i.x-r.x);if(0===o)n=!0;else{var s=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(n=!0)}}else n=!0;return n?Ru.min(al.distancePointLine(t,r,i),al.distancePointLine(e,r,i),al.distancePointLine(r,t,e),al.distancePointLine(i,t,e)):0},al.isPointInRing=function(t,e){return al.locatePointInRing(t,e)!==wu.EXTERIOR},al.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,i=new Eu;t.getCoordinate(0,i);for(var n=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-n,c=u-o;r+=Math.sqrt(l*l+c*c),n=a,o=u}return r},al.isCCW=function(t){var e=t.length-1;if(e<3)throw new vu("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],i=0,n=1;n<=e;n++){var o=t[n];o.y>r.y&&(r=o,i=n)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==i);var u=t[s],l=t[a];if(u.equals2D(r)||l.equals2D(r)||u.equals2D(l))return!1;var c=al.computeOrientation(u,r,l);return 0===c?u.x>l.x:c>0},al.locatePointInRing=function(t,e){return sl.locatePointInRing(t,e)},al.distancePointLinePerpendicular=function(t,e,r){var i=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),n=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/i;return Math.abs(n)*Math.sqrt(i)},al.computeOrientation=function(t,e,r){return al.orientationIndex(t,e,r)},al.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new vu("Line array must contain at least one vertex");for(var r=t.distance(e[0]),i=0;i<e.length-1;i++){var n=al.distancePointLine(t,e[i],e[i+1]);n<r&&(r=n)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},al.isOnLine=function(t,e){for(var r=new nl,i=1;i<e.length;i++){var n=e[i-1],o=e[i];if(r.computeIntersection(t,n,o),r.hasIntersection())return!0}return!1},ul.CLOCKWISE.get=function(){return-1},ul.RIGHT.get=function(){return al.CLOCKWISE},ul.COUNTERCLOCKWISE.get=function(){return 1},ul.LEFT.get=function(){return al.COUNTERCLOCKWISE},ul.COLLINEAR.get=function(){return 0},ul.STRAIGHT.get=function(){return al.COLLINEAR},Object.defineProperties(al,ul);var ll=function(){};ll.prototype.filter=function(t){},ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll};var cl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},hl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};cl.prototype.isGeometryCollection=function(){return this.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION},cl.prototype.getFactory=function(){return this._factory},cl.prototype.getGeometryN=function(t){return this},cl.prototype.getArea=function(){return 0},cl.prototype.isRectangle=function(){return!1},cl.prototype.equals=function(){if(arguments[0]instanceof cl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof cl))return!1;var r=e;return this.equalsExact(r)}},cl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},cl.prototype.geometryChanged=function(){this.apply(cl.geometryChangedFilter)},cl.prototype.geometryChangedAction=function(){this._envelope=null},cl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},cl.prototype.getLength=function(){return 0},cl.prototype.getNumGeometries=function(){return 1},cl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,i)}},cl.prototype.getUserData=function(){return this._userData},cl.prototype.getSRID=function(){return this._SRID},cl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},cl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION)throw new vu("This method does not support GeometryCollection arguments")},cl.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},cl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},cl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},cl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Xu(this._envelope)},cl.prototype.setSRID=function(t){this._SRID=t},cl.prototype.setUserData=function(t){this._userData=t},cl.prototype.compare=function(t,e){for(var r=t.iterator(),i=e.iterator();r.hasNext()&&i.hasNext();){var n=r.next(),o=i.next(),s=n.compareTo(o);if(0!==s)return s}return r.hasNext()?1:i.hasNext()?-1:0},cl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},cl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===cl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===cl.SORTINDEX_MULTIPOINT||this.getSortIndex()===cl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===cl.SORTINDEX_MULTIPOLYGON},cl.prototype.interfaces_=function(){return[Su,bu,Ou]},cl.prototype.getClass=function(){return cl},cl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},cl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},hl.serialVersionUID.get=function(){return 0x799ea46522854c00},hl.SORTINDEX_POINT.get=function(){return 0},hl.SORTINDEX_MULTIPOINT.get=function(){return 1},hl.SORTINDEX_LINESTRING.get=function(){return 2},hl.SORTINDEX_LINEARRING.get=function(){return 3},hl.SORTINDEX_MULTILINESTRING.get=function(){return 4},hl.SORTINDEX_POLYGON.get=function(){return 5},hl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},hl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},hl.geometryChangedFilter.get=function(){return pl},Object.defineProperties(cl,hl);var pl=function(){};pl.interfaces_=function(){return[ll]},pl.filter=function(t){t.geometryChangedAction()};var fl=function(){};fl.prototype.filter=function(t){},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl};var dl=function(){},gl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dl.prototype.isInBoundary=function(t){},dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},gl.Mod2BoundaryNodeRule.get=function(){return yl},gl.EndPointBoundaryNodeRule.get=function(){return vl},gl.MultiValentEndPointBoundaryNodeRule.get=function(){return ml},gl.MonoValentEndPointBoundaryNodeRule.get=function(){return _l},gl.MOD2_BOUNDARY_RULE.get=function(){return new yl},gl.ENDPOINT_BOUNDARY_RULE.get=function(){return new vl},gl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ml},gl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _l},gl.OGC_SFS_BOUNDARY_RULE.get=function(){return dl.MOD2_BOUNDARY_RULE},Object.defineProperties(dl,gl);var yl=function(){};yl.prototype.isInBoundary=function(t){return t%2==1},yl.prototype.interfaces_=function(){return[dl]},yl.prototype.getClass=function(){return yl};var vl=function(){};vl.prototype.isInBoundary=function(t){return t>0},vl.prototype.interfaces_=function(){return[dl]},vl.prototype.getClass=function(){return vl};var ml=function(){};ml.prototype.isInBoundary=function(t){return t>1},ml.prototype.interfaces_=function(){return[dl]},ml.prototype.getClass=function(){return ml};var _l=function(){};_l.prototype.isInBoundary=function(t){return 1===t},_l.prototype.interfaces_=function(){return[dl]},_l.prototype.getClass=function(){return _l};var bl=function(){};function Sl(t){this.message=t||""}bl.prototype.add=function(){},bl.prototype.addAll=function(){},bl.prototype.isEmpty=function(){},bl.prototype.iterator=function(){},bl.prototype.size=function(){},bl.prototype.toArray=function(){},bl.prototype.remove=function(){},Sl.prototype=new Error,Sl.prototype.name="IndexOutOfBoundsException";var xl=function(){};xl.prototype.hasNext=function(){},xl.prototype.next=function(){},xl.prototype.remove=function(){};var Ol=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bl);function El(t){this.message=t||""}El.prototype=new Error,El.prototype.name="NoSuchElementException";var Cl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new Tl(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Sl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,i=this.array_.length;r<i;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(Ol),Tl=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new El;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xl),Pl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.ensureCapacity(r.length),this.add(r,i)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],r=arguments[1],i=!1,n=e.iterator();n.hasNext();)this.add(n.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var r=arguments[0];t.prototype.add.call(this,r)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],n=arguments[1];return this.add(i,n,!0),!0}if(arguments[0]instanceof Eu&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1)if(this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<u.length;c++)e.add(u[c],l);else for(var h=u.length-1;h>=0;h--)e.add(u[h],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Eu){var p=arguments[0],f=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(p>0)if(this.get(p-1).equals2D(f))return null;if(p<d)if(this.get(p).equals2D(f))return null}}t.prototype.add.call(this,p,f)}}else if(4===arguments.length){var g=arguments[0],y=arguments[1],v=arguments[2],m=arguments[3],_=1;v>m&&(_=-1);for(var b=v;b!==m;b+=_)e.add(g[b],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Eu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(Cl),wl=function(){},Il={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Il.ForwardComparator.get=function(){return Ll},Il.BidirectionalComparator.get=function(){return Rl},Il.coordArrayType.get=function(){return new Array(0).fill(null)},wl.prototype.interfaces_=function(){return[]},wl.prototype.getClass=function(){return wl},wl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},wl.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(wl.indexOf(i,e)<0)return i}return null},wl.scroll=function(t,e){var r=wl.indexOf(e,t);if(r<0)return null;var i=new Array(t.length).fill(null);Wu.arraycopy(t,r,i,0,t.length-r),Wu.arraycopy(t,0,i,t.length-r,r),Wu.arraycopy(i,0,t,0,t.length)},wl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2];if(i===n)return!0;if(null===i||null===n)return!1;if(i.length!==n.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],n[s]))return!1;return!0}},wl.intersection=function(t,e){for(var r=new Pl,i=0;i<t.length;i++)e.intersects(t[i])&&r.add(t[i],!0);return r.toCoordinateArray()},wl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},wl.removeRepeatedPoints=function(t){return wl.hasRepeatedPoints(t)?new Pl(t,!1).toCoordinateArray():t},wl.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),i=0;i<=r;i++){var n=t[i];t[i]=t[e-i],t[e-i]=n}},wl.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var n=0,o=0;o<t.length;o++)null!==t[o]&&(i[n++]=t[o]);return i},wl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new Eu(t[r]);return e}if(5===arguments.length)for(var i=arguments[0],n=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new Eu(i[n+u])},wl.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],n=e[t.length-r-1];if(0!==i.compareTo(n))return!1}return!0},wl.envelope=function(t){for(var e=new Xu,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},wl.toCoordinateArray=function(t){return t.toArray(wl.coordArrayType)},wl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},wl.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},wl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,i=t[e].compareTo(t[r]);if(0!==i)return i}return 1},wl.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var i=t[r].compareTo(e[r]);if(0!==i)return i;r++}return r<e.length?-1:r<t.length?1:0},wl.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},wl.extract=function(t,e,r){e=Ru.clamp(e,0,t.length);var i=(r=Ru.clamp(r,-1,t.length))-e+1;r<0&&(i=0),e>=t.length&&(i=0),r<e&&(i=0);var n=new Array(i).fill(null);if(0===i)return n;for(var o=0,s=e;s<=r;s++)n[o++]=t[s];return n},Object.defineProperties(wl,Il);var Ll=function(){};Ll.prototype.compare=function(t,e){return wl.compare(t,e)},Ll.prototype.interfaces_=function(){return[xu]},Ll.prototype.getClass=function(){return Ll};var Rl=function(){};Rl.prototype.compare=function(t,e){var r=t,i=e;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;var n=wl.compare(r,i);return wl.isEqualReversed(r,i)?0:n},Rl.prototype.OLDcompare=function(t,e){var r=t,i=e;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(0===r.length)return 0;for(var n=wl.increasingDirection(r),o=wl.increasingDirection(i),s=n>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var l=r[s].compareTo(i[a]);if(0!==l)return l;s+=n,a+=o}return 0},Rl.prototype.interfaces_=function(){return[xu]},Rl.prototype.getClass=function(){return Rl};var Ml=function(){};Ml.prototype.get=function(){},Ml.prototype.put=function(){},Ml.prototype.size=function(){},Ml.prototype.values=function(){},Ml.prototype.entrySet=function(){};var Al=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ml);function jl(t){this.message=t||""}function Nl(){}jl.prototype=new Error,jl.prototype.name="OperationNotSupported",Nl.prototype=new bl,Nl.prototype.contains=function(){};var Fl=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dl(this)},e}(Nl),Dl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new El;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new jl},e}(xl);function kl(t){return null===t?0:t.color}function Gl(t){return null===t?null:t.parent}function Bl(t,e){null!==t&&(t.color=e)}function Ul(t){return null===t?null:t.left}function Vl(t){return null===t?null:t.right}function zl(){this.root_=null,this.size_=0}zl.prototype=new Al,zl.prototype.get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},zl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,i,n=this.root_;do{if(r=n,(i=t.compareTo(n.key))<0)n=n.left;else{if(!(i>0)){var o=n.value;return n.value=e,o}n=n.right}}while(null!==n);var s={key:t,left:null,right:null,value:e,parent:r,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},zl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Gl(t)===Ul(Gl(Gl(t)))){var r=Vl(Gl(Gl(t)));1===kl(r)?(Bl(Gl(t),0),Bl(r,0),Bl(Gl(Gl(t)),1),t=Gl(Gl(t))):(t===Vl(Gl(t))&&(t=Gl(t),e.rotateLeft(t)),Bl(Gl(t),0),Bl(Gl(Gl(t)),1),e.rotateRight(Gl(Gl(t))))}else{var i=Ul(Gl(Gl(t)));1===kl(i)?(Bl(Gl(t),0),Bl(i,0),Bl(Gl(Gl(t)),1),t=Gl(Gl(t))):(t===Ul(Gl(t))&&(t=Gl(t),e.rotateRight(t)),Bl(Gl(t),0),Bl(Gl(Gl(t)),1),e.rotateLeft(Gl(Gl(t))))}this.root_.color=0},zl.prototype.values=function(){var t=new Cl,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=zl.successor(e));)t.add(e.value);return t},zl.prototype.entrySet=function(){var t=new Fl,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=zl.successor(e));)t.add(e);return t},zl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},zl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},zl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},zl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,i=t;null!==r&&i===r.right;)i=r,r=r.parent;return r},zl.prototype.size=function(){return this.size_};var Wl=function(){};function Yl(){}function Xl(){this.array_=[],arguments[0]instanceof bl&&this.addAll(arguments[0])}Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Yl.prototype=new Nl,Xl.prototype=new Yl,Xl.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Xl.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Xl.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Xl.prototype.remove=function(t){throw new jl},Xl.prototype.size=function(){return this.array_.length},Xl.prototype.isEmpty=function(){return 0===this.array_.length},Xl.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},Xl.prototype.iterator=function(){return new Zl(this)};var Zl=function(t){this.treeSet_=t,this.position_=0};Zl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new El;return this.treeSet_.array_[this.position_++]},Zl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Zl.prototype.remove=function(){throw new jl};var Hl=function(){};Hl.sort=function(){var t,e,r,i,n=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},n.sort(i);else if(2===arguments.length)r=arguments[1],i=function(t,e){return r.compare(t,e)},n.sort(i);else if(3===arguments.length){(e=n.slice(arguments[1],arguments[2])).sort();var o=n.slice(0,arguments[1]).concat(e,n.slice(arguments[2],n.length));for(n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t])}else if(4===arguments.length)for(e=n.slice(arguments[1],arguments[2]),r=arguments[3],i=function(t,e){return r.compare(t,e)},e.sort(i),o=n.slice(0,arguments[1]).concat(e,n.slice(arguments[2],n.length)),n.splice(0,n.length),t=0;t<o.length;t++)n.push(o[t])},Hl.asList=function(t){for(var e=new Cl,r=0,i=t.length;r<i;r++)e.add(t[r]);return e};var ql=function(){},Kl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Kl.P.get=function(){return 0},Kl.L.get=function(){return 1},Kl.A.get=function(){return 2},Kl.FALSE.get=function(){return-1},Kl.TRUE.get=function(){return-2},Kl.DONTCARE.get=function(){return-3},Kl.SYM_FALSE.get=function(){return"F"},Kl.SYM_TRUE.get=function(){return"T"},Kl.SYM_DONTCARE.get=function(){return"*"},Kl.SYM_P.get=function(){return"0"},Kl.SYM_L.get=function(){return"1"},Kl.SYM_A.get=function(){return"2"},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.toDimensionSymbol=function(t){switch(t){case ql.FALSE:return ql.SYM_FALSE;case ql.TRUE:return ql.SYM_TRUE;case ql.DONTCARE:return ql.SYM_DONTCARE;case ql.P:return ql.SYM_P;case ql.L:return ql.SYM_L;case ql.A:return ql.SYM_A}throw new vu("Unknown dimension value: "+t)},ql.toDimensionValue=function(t){switch(Nu.toUpperCase(t)){case ql.SYM_FALSE:return ql.FALSE;case ql.SYM_TRUE:return ql.TRUE;case ql.SYM_DONTCARE:return ql.DONTCARE;case ql.SYM_P:return ql.P;case ql.SYM_L:return ql.L;case ql.SYM_A:return ql.A}throw new vu("Unknown dimension symbol: "+t)},Object.defineProperties(ql,Kl);var Jl=function(){};Jl.prototype.filter=function(t){},Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl};var Ql=function(){};Ql.prototype.filter=function(t,e){},Ql.prototype.isDone=function(){},Ql.prototype.isGeometryChanged=function(){},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new vu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Xu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var i=this._geometries[r].getCoordinates(),n=0;n<i.length;n++)t[++e]=i[n];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].equalsExact(i._geometries[n],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Hl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=ql.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=ql.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Xl(Hl.asList(this._geometries)),r=new Xl(Hl.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){for(var i=arguments[0],n=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,n);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){var t=this;if(Lu(arguments[0],fl))for(var e=arguments[0],r=0;r<this._geometries.length;r++)t._geometries[r].apply(e);else if(Lu(arguments[0],Ql)){var i=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(t._geometries[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],Jl)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(Lu(arguments[0],ll)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),el.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(cl),tc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ql.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new ec(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Wl]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}($l),ec=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dl.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=i}};ec.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},ec.prototype.getBoundary=function(){return this._geom instanceof ac?this.boundaryLineString(this._geom):this._geom instanceof tc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},ec.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},ec.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},ec.prototype.computeBoundaryCoordinates=function(t){var e=this,r=new Cl;this._endpointMap=new zl;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);0!==n.getNumPoints()&&(e.addEndpoint(n.getCoordinateN(0)),e.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&r.add(s.getKey())}return wl.toCoordinateArray(r)},ec.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new rc,this._endpointMap.put(t,e)),e.count++},ec.prototype.interfaces_=function(){return[]},ec.prototype.getClass=function(){return ec},ec.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new ec(t).getBoundary()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new ec(e,r).getBoundary()}};var rc=function(){this.count=null};function ic(){}rc.prototype.interfaces_=function(){return[]},rc.prototype.getClass=function(){return rc};var nc=function(){},oc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc},nc.chars=function(t,e){for(var r=new Array(e).fill(null),i=0;i<e;i++)r[i]=t;return String(r)},nc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},r=new function(){}(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var i=arguments[0],n=arguments[1],o="",s=new function(){}(new function(){}(nc.getStackTrace(i))),a=0;a<n;a++)try{o+=s.readLine()+nc.NEWLINE}catch(t){if(!(t instanceof ic))throw t;el.shouldNeverReachHere()}return o}},nc.split=function(t,e){for(var r=e.length,i=new Cl,n=""+t,o=n.indexOf(e);o>=0;){var s=n.substring(0,o);i.add(s),o=(n=n.substring(o+r)).indexOf(e)}n.length>0&&i.add(n);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},nc.toString=function(){if(1===arguments.length){var t=arguments[0];return nc.SIMPLE_ORDINATE_FORMAT.format(t)}},nc.spaces=function(t){return nc.chars(" ",t)},oc.NEWLINE.get=function(){return Wu.getProperty("line.separator")},oc.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(nc,oc);var sc=function(){};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.copyCoord=function(t,e,r,i){for(var n=Math.min(t.getDimension(),r.getDimension()),o=0;o<n;o++)r.setOrdinate(i,o,t.getOrdinate(e,o))},sc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Bu.X)===t.getOrdinate(e-1,Bu.X)&&t.getOrdinate(0,Bu.Y)===t.getOrdinate(e-1,Bu.Y)},sc.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),n=0;n<r;n++)for(var o=0;o<i;o++){var s=t.getOrdinate(n,o),a=e.getOrdinate(n,o);if(!(t.getOrdinate(n,o)===e.getOrdinate(n,o)||mu.isNaN(s)&&mu.isNaN(a)))return!1}return!0},sc.extend=function(t,e,r){var i=t.create(r,e.getDimension()),n=e.size();if(sc.copy(e,0,i,0,n),n>0)for(var o=n;o<r;o++)sc.copy(e,n-1,i,o,1);return i},sc.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),i=0;i<=r;i++)sc.swap(t,i,e-i)},sc.swap=function(t,e,r){if(e===r)return null;for(var i=0;i<t.getDimension();i++){var n=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(r,i)),t.setOrdinate(r,i,n)}},sc.copy=function(t,e,r,i,n){for(var o=0;o<n;o++)sc.copyCoord(t,e+o,r,i+o)},sc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),i=new Au;i.append("(");for(var n=0;n<e;n++){n>0&&i.append(" ");for(var o=0;o<r;o++)o>0&&i.append(","),i.append(nc.toString(t.getOrdinate(n,o)))}return i.append(")"),i.toString()}},sc.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?sc.createClosedRing(t,e,4):e.getOrdinate(0,Bu.X)===e.getOrdinate(r-1,Bu.X)&&e.getOrdinate(0,Bu.Y)===e.getOrdinate(r-1,Bu.Y)?e:sc.createClosedRing(t,e,r+1)},sc.createClosedRing=function(t,e,r){var i=t.create(r,e.getDimension()),n=e.size();sc.copy(e,0,i,0,n);for(var o=n;o<r;o++)sc.copy(e,0,i,o,1);return i};var ac=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Xu:this._points.expandEnvelope(new Xu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var n=0;n<this._points.size();n++)if(!this.equal(this._points.getCoordinate(n),i._points.getCoordinate(n),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var r=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(r)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(r))>0&&sc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ql.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return al.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return sc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==i)return i;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){var n=arguments[0];return arguments[1].compare(this._points,n._points)}},e.prototype.apply=function(){if(Lu(arguments[0],fl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Lu(arguments[0],Ql)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(this._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],Jl)){arguments[0].filter(this)}else if(Lu(arguments[0],ll)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return new ec(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new vu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Wl]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(cl),uc=function(){};uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc};var lc=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Xu;var t=new Xu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return ql.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Lu(arguments[0],fl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Lu(arguments[0],Ql)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Lu(arguments[0],Jl)){arguments[0].filter(this)}else if(Lu(arguments[0],ll)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),el.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[uc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(cl),cc=function(){};cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(t){function e(e,r,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new vu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new vu("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];for(var n=0;n<this._holes.length;n++)for(var o=this._holes[n].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(al.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(al.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var i=t.getX(r);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var n=t.getY(r);if(n!==e.getMinY()&&n!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,n=this._shell,o=i._shell;if(!n.equalsExact(o,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Hl.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);Wu.arraycopy(e.getCoordinates(),0,i,0,i.length);var n=wl.minCoordinate(e.getCoordinates());wl.scroll(i,n),Wu.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],al.isCCW(e.getCoordinates())===r&&wl.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],n=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,n);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var p=this.getInteriorRingN(h),f=o.getInteriorRingN(h),d=p.compareToSameClass(f,n);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){var e=this;if(Lu(t,fl)){this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}else if(Lu(t,Ql)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(e._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(Lu(t,Jl))t.filter(this);else if(Lu(t,ll)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),i=0;i<r.length;i++)r[i]=this._holes[i].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[cc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(cl),pc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return ql.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[uc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}($l),fc=function(t){function e(e,r){e instanceof Eu&&r instanceof Ic&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return ql.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return sc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new vu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new vu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(ac),dc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return cl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Cl,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),i=0;i<r.getNumGeometries();i++)t.add(r.getGeometryN(i));var n=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(n))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[cc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}($l),gc=function(t){this._factory=t||null,this._isUserDataCopied=!1},yc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};gc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},gc.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},gc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof $l?this.editGeometryCollection(t,e):t instanceof hc?this.editPolygon(t,e):t instanceof lc||t instanceof ac?e.edit(t,this._factory):(el.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},gc.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),i=new Cl,n=0;n<r.getNumGeometries();n++){var o=this.edit(r.getGeometryN(n),e);null===o||o.isEmpty()||i.add(o)}return r.getClass()===pc?this._factory.createMultiPoint(i.toArray([])):r.getClass()===tc?this._factory.createMultiLineString(i.toArray([])):r.getClass()===dc?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},gc.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var n=new Cl,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||n.add(s)}return this._factory.createPolygon(i,n.toArray([]))},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.GeometryEditorOperation=function(){},yc.NoOpGeometryOperation.get=function(){return vc},yc.CoordinateOperation.get=function(){return mc},yc.CoordinateSequenceOperation.get=function(){return _c},Object.defineProperties(gc,yc);var vc=function(){};vc.prototype.edit=function(t,e){return t},vc.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},vc.prototype.getClass=function(){return vc};var mc=function(){};mc.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof fc?e.createLinearRing(r):t instanceof ac?e.createLineString(r):t instanceof lc?r.length>0?e.createPoint(r[0]):e.createPoint():t},mc.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},mc.prototype.getClass=function(){return mc};var _c=function(){};_c.prototype.edit=function(t,e){return t instanceof fc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ac?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof lc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},_c.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},_c.prototype.getClass=function(){return _c};var bc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var r=0;r<e;r++)t._coordinates[r]=new Eu}else if(Lu(arguments[0],Bu)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)t._coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new Eu}},Sc={serialVersionUID:{configurable:!0}};bc.prototype.setOrdinate=function(t,e,r){switch(e){case Bu.X:this._coordinates[t].x=r;break;case Bu.Y:this._coordinates[t].y=r;break;case Bu.Z:this._coordinates[t].z=r;break;default:throw new vu("invalid ordinateIndex")}},bc.prototype.size=function(){return this._coordinates.length},bc.prototype.getOrdinate=function(t,e){switch(e){case Bu.X:return this._coordinates[t].x;case Bu.Y:return this._coordinates[t].y;case Bu.Z:return this._coordinates[t].z}return mu.NaN},bc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},bc.prototype.getCoordinateCopy=function(t){return new Eu(this._coordinates[t])},bc.prototype.getDimension=function(){return this._dimension},bc.prototype.getX=function(t){return this._coordinates[t].x},bc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new bc(t,this._dimension)},bc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},bc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new bc(t,this._dimension)},bc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Au(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},bc.prototype.getY=function(t){return this._coordinates[t].y},bc.prototype.toCoordinateArray=function(){return this._coordinates},bc.prototype.interfaces_=function(){return[Bu,Ou]},bc.prototype.getClass=function(){return bc},Sc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(bc,Sc);var xc=function(){},Oc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};xc.prototype.readResolve=function(){return xc.instance()},xc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new bc(t)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new bc(e)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new bc(r):new bc(r,i)}},xc.prototype.interfaces_=function(){return[Pu,Ou]},xc.prototype.getClass=function(){return xc},xc.instance=function(){return xc.instanceObject},Oc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Oc.instanceObject.get=function(){return new xc},Object.defineProperties(xc,Oc);var Ec=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Cl,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new Fl;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Ml),Cc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Pc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Tc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Cc.prototype.equals=function(t){if(!(t instanceof Cc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Cc.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new ju(r).compareTo(new ju(i))},Cc.prototype.getScale=function(){return this._scale},Cc.prototype.isFloating=function(){return this._modelType===Cc.FLOATING||this._modelType===Cc.FLOATING_SINGLE},Cc.prototype.getType=function(){return this._modelType},Cc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Cc.FLOATING?t="Floating":this._modelType===Cc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Cc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Cc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return mu.isNaN(t)?t:this._modelType===Cc.FLOATING_SINGLE?t:this._modelType===Cc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Eu){var e=arguments[0];if(this._modelType===Cc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Cc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Cc.FLOATING?t=16:this._modelType===Cc.FLOATING_SINGLE?t=6:this._modelType===Cc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Cc.prototype.setScale=function(t){this._scale=Math.abs(t)},Cc.prototype.interfaces_=function(){return[Ou,bu]},Cc.prototype.getClass=function(){return Cc},Cc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Tc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Tc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Cc,Tc);var Pc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},wc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Pc.prototype.readResolve=function(){return Pc.nameToTypeMap.get(this._name)},Pc.prototype.toString=function(){return this._name},Pc.prototype.interfaces_=function(){return[Ou]},Pc.prototype.getClass=function(){return Pc},wc.serialVersionUID.get=function(){return-552860263173159e4},wc.nameToTypeMap.get=function(){return new Ec},Object.defineProperties(Pc,wc),Cc.Type=Pc,Cc.FIXED=new Pc("FIXED"),Cc.FLOATING=new Pc("FLOATING"),Cc.FLOATING_SINGLE=new Pc("FLOATING SINGLE");var Ic=function t(){this._precisionModel=new Cc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Lu(arguments[0],Pu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Cc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Lc={serialVersionUID:{configurable:!0}};Ic.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Eu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMinX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMinY()),new Eu(t.getMinX(),t.getMinY())]),null)},Ic.prototype.createLineString=function(t){return t?t instanceof Array?new ac(this.getCoordinateSequenceFactory().create(t),this):Lu(t,Bu)?new ac(t,this):void 0:new ac(this.getCoordinateSequenceFactory().create([]),this)},Ic.prototype.createMultiLineString=function(){if(0===arguments.length)return new tc(null,this);if(1===arguments.length){var t=arguments[0];return new tc(t,this)}},Ic.prototype.buildGeometry=function(t){for(var e=null,r=!1,i=!1,n=t.iterator();n.hasNext();){var o=n.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(Ic.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof hc)return this.createMultiPolygon(Ic.toPolygonArray(t));if(a instanceof ac)return this.createMultiLineString(Ic.toLineStringArray(t));if(a instanceof lc)return this.createMultiPoint(Ic.toPointArray(t));el.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Ic.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Ic.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new lc(e,this)}}},Ic.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Ic.prototype.createPolygon=function(){if(0===arguments.length)return new hc(null,null,this);if(1===arguments.length){if(Lu(arguments[0],Bu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof fc){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return new hc(i,n,this)}},Ic.prototype.getSRID=function(){return this._SRID},Ic.prototype.createGeometryCollection=function(){if(0===arguments.length)return new $l(null,this);if(1===arguments.length){var t=arguments[0];return new $l(t,this)}},Ic.prototype.createGeometry=function(t){return new gc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Ic.prototype.getPrecisionModel=function(){return this._precisionModel},Ic.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Lu(arguments[0],Bu)){var e=arguments[0];return new fc(e,this)}}},Ic.prototype.createMultiPolygon=function(){if(0===arguments.length)return new dc(null,this);if(1===arguments.length){var t=arguments[0];return new dc(t,this)}},Ic.prototype.createMultiPoint=function(){if(0===arguments.length)return new pc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new pc(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Lu(arguments[0],Bu)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),n=0;n<r.size();n++){var o=this.getCoordinateSequenceFactory().create(1,r.getDimension());sc.copy(r,n,o,0,1),i[n]=this.createPoint(o)}return this.createMultiPoint(i)}}},Ic.prototype.interfaces_=function(){return[Ou]},Ic.prototype.getClass=function(){return Ic},Ic.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.getDefaultCoordinateSequenceFactory=function(){return xc.instance()},Ic.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ic.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Lc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Ic,Lc);var Rc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Mc=function(t){this.geometryFactory=t||new Ic};Mc.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ac[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Rc.indexOf(r)?Ac[r].apply(this,[e.coordinates]):"GeometryCollection"===r?Ac[r].apply(this,[e.geometries]):Ac[r].apply(this,[e])},Mc.prototype.write=function(t){var e=t.getGeometryType();if(!jc[e])throw new Error("Geometry is not supported");return jc[e].apply(this,[t])};var Ac={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var i=t.geometry.type;if(!Ac[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ac.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var i=t[r];e.push(new Eu(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Eu(t[0],t[1]),new Eu(t[2],t[1]),new Eu(t[2],t[3]),new Eu(t[0],t[3]),new Eu(t[0],t[1])])},Point:function(t){var e=new Eu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ac.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ac.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ac.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ac.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),i=[],n=1;n<t.length;++n){var o=t[n],s=Ac.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var i=t[r];e.push(Ac.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var i=t[r];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},jc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:jc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],n=jc.Point.apply(this,[i]);e.push(n.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),i=0;i<r.length;++i){var n=r[i];e.push(jc.coordinate.apply(this,[n]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],n=jc.LineString.apply(this,[i]);e.push(n.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=jc.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var i=0;i<t._holes.length;++i){var n=t._holes[i],o=jc.LineString.apply(this,[n]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],n=jc.Polygon.apply(this,[i]);e.push(n.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],n=i.getGeometryType();e.push(jc[n].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Nc=function(t){this.geometryFactory=t||new Ic,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Mc(this.geometryFactory)};Nc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Cc.FIXED&&this.reducePrecision(e),e},Nc.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var Fc=function(){this.parser=new Mc(this.geometryFactory)};Fc.prototype.write=function(t){return this.parser.write(t)};var Dc=function(){},kc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Gc(t){this.message=t||""}function Bc(){this.array_=[]}Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Dc.opposite=function(t){return t===Dc.LEFT?Dc.RIGHT:t===Dc.RIGHT?Dc.LEFT:t},kc.ON.get=function(){return 0},kc.LEFT.get=function(){return 1},kc.RIGHT.get=function(){return 2},Object.defineProperties(Dc,kc),Gc.prototype=new Error,Gc.prototype.name="EmptyStackException",Bc.prototype=new Ol,Bc.prototype.add=function(t){return this.array_.push(t),!0},Bc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Bc.prototype.push=function(t){return this.array_.push(t),t},Bc.prototype.pop=function(t){if(0===this.array_.length)throw new Gc;return this.array_.pop()},Bc.prototype.peek=function(){if(0===this.array_.length)throw new Gc;return this.array_[this.array_.length-1]},Bc.prototype.empty=function(){return 0===this.array_.length},Bc.prototype.isEmpty=function(){return this.empty()},Bc.prototype.search=function(t){return this.array_.indexOf(t)},Bc.prototype.size=function(){return this.array_.length},Bc.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var Uc=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Uc.prototype.getCoordinate=function(){return this._minCoord},Uc.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},Uc.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();el.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],i=al.computeOrientation(this._minCoord,r,e),n=!1;(e.y<this._minCoord.y&&r.y<this._minCoord.y&&i===al.COUNTERCLOCKWISE||e.y>this._minCoord.y&&r.y>this._minCoord.y&&i===al.CLOCKWISE)&&(n=!0),n&&(this._minIndex=this._minIndex-1)},Uc.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var i=Dc.LEFT;return r[e].y<r[e+1].y&&(i=Dc.RIGHT),i},Uc.prototype.getEdge=function(){return this._orientedDe},Uc.prototype.checkForRightmostCoordinate=function(t){for(var e=this,r=t.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(null===e._minCoord||r[i].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=i,e._minCoord=r[i])},Uc.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Uc.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}el.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Dc.LEFT&&(this._orientedDe=this._minDe.getSym())},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc};var Vc=function(t){function e(r,i){t.call(this,e.msgWithCoord(r,i)),this.pt=i?new Eu(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($u),zc=function(){this.array_=[]};zc.prototype.addLast=function(t){this.array_.push(t)},zc.prototype.removeFirst=function(){return this.array_.shift()},zc.prototype.isEmpty=function(){return 0===this.array_.length};var Wc=function(){this._finder=null,this._dirEdgeList=new Cl,this._nodes=new Cl,this._rightMostCoord=null,this._env=null,this._finder=new Uc};Wc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Wc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Wc.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Vc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var o=n.next();o.setVisited(!0),this.copySymDepths(o)}},Wc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Dc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Wc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Wc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Dc.RIGHT)>=1&&e.getDepth(Dc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Wc.prototype.computeDepths=function(t){var e=new Fl,r=new zc,i=t.getNode();for(r.addLast(i),e.add(i),t.setVisited(!0);!r.isEmpty();){var n=r.removeFirst();e.add(n),this.computeNodeDepth(n);for(var o=n.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},Wc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Wc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Xu,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),i=0;i<r.length-1;i++)t.expandToInclude(r[i]);this._env=t}return this._env},Wc.prototype.addReachable=function(t){var e=new Bc;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},Wc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Dc.LEFT,t.getDepth(Dc.RIGHT)),e.setDepth(Dc.RIGHT,t.getDepth(Dc.LEFT))},Wc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var i=r.next();this._dirEdgeList.add(i);var n=i.getSym().getNode();n.isVisited()||e.push(n)}},Wc.prototype.getNodes=function(){return this._nodes},Wc.prototype.getDirectedEdges=function(){return this._dirEdgeList},Wc.prototype.interfaces_=function(){return[bu]},Wc.prototype.getClass=function(){return Wc};var Yc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Dc.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var n=0;n<this.location.length;n++)this.location[n]=i.location[n]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Dc.ON]=o,this.location[Dc.LEFT]=s,this.location[Dc.RIGHT]=a}};Yc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Yc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==wu.NONE)return!1;return!0},Yc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===wu.NONE&&(this.location[e]=t)},Yc.prototype.isLine=function(){return 1===this.location.length},Yc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Dc.ON]=this.location[Dc.ON],e[Dc.LEFT]=wu.NONE,e[Dc.RIGHT]=wu.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===wu.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},Yc.prototype.getLocations=function(){return this.location},Yc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Dc.LEFT];this.location[Dc.LEFT]=this.location[Dc.RIGHT],this.location[Dc.RIGHT]=t},Yc.prototype.toString=function(){var t=new Au;return this.location.length>1&&t.append(wu.toLocationSymbol(this.location[Dc.LEFT])),t.append(wu.toLocationSymbol(this.location[Dc.ON])),this.location.length>1&&t.append(wu.toLocationSymbol(this.location[Dc.RIGHT])),t.toString()},Yc.prototype.setLocations=function(t,e,r){this.location[Dc.ON]=t,this.location[Dc.LEFT]=e,this.location[Dc.RIGHT]=r},Yc.prototype.get=function(t){return t<this.location.length?this.location[t]:wu.NONE},Yc.prototype.isArea=function(){return this.location.length>1},Yc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===wu.NONE)return!0;return!1},Yc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Dc.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},Yc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(wu.NONE)},Yc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Yc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc};var Xc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Yc(e),this.elt[1]=new Yc(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new Yc(r.elt[0]),this.elt[1]=new Yc(r.elt[1])}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.elt[0]=new Yc(wu.NONE),this.elt[1]=new Yc(wu.NONE),this.elt[i].setLocation(n)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Yc(o,s,a),this.elt[1]=new Yc(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Yc(wu.NONE,wu.NONE,wu.NONE),this.elt[1]=new Yc(wu.NONE,wu.NONE,wu.NONE),this.elt[u].setLocations(l,c,h)}};Xc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Xc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Xc.prototype.isNull=function(t){return this.elt[t].isNull()},Xc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},Xc.prototype.isLine=function(t){return this.elt[t].isLine()},Xc.prototype.merge=function(t){for(var e=this,r=0;r<2;r++)null===e.elt[r]&&null!==t.elt[r]?e.elt[r]=new Yc(t.elt[r]):e.elt[r].merge(t.elt[r])},Xc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Xc.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Dc.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},Xc.prototype.toString=function(){var t=new Au;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Xc.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Xc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Xc.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Dc.ON,e)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2];this.elt[r].setLocation(i,n)}},Xc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Xc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Xc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Yc(this.elt[t].location[0]))},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc},Xc.toLineLabel=function(t){for(var e=new Xc(wu.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var Zc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Cl,this._pts=new Cl,this._label=new Xc(wu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Cl,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Zc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=al.isCCW(this._ring.getCoordinates())},Zc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Zc.prototype.computePoints=function(t){var e=this;this._startDe=t;var r=t,i=!0;do{if(null===r)throw new Vc("Found null DirectedEdge");if(r.getEdgeRing()===e)throw new Vc("Directed Edge visited twice during ring-building at "+r.getCoordinate());e._edges.add(r);var n=r.getLabel();el.isTrue(n.isArea()),e.mergeLabel(n),e.addPoints(r.getEdge(),r.isForward(),i),i=!1,e.setEdgeRing(r,e),r=e.getNext(r)}while(r!==this._startDe)},Zc.prototype.getLinearRing=function(){return this._ring},Zc.prototype.getCoordinate=function(t){return this._pts.get(t)},Zc.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var r=e.getNode().getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Zc.prototype.addPoints=function(t,e,r){var i=t.getCoordinates();if(e){var n=1;r&&(n=0);for(var o=n;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;r&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Zc.prototype.isHole=function(){return this._isHole},Zc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Zc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!al.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(t))return!1;return!0},Zc.prototype.addHole=function(t){this._holes.add(t)},Zc.prototype.isShell=function(){return null===this._shell},Zc.prototype.getLabel=function(){return this._label},Zc.prototype.getEdges=function(){return this._edges},Zc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Zc.prototype.getShell=function(){return this._shell},Zc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],i=e.getLocation(r,Dc.RIGHT);if(i===wu.NONE)return null;if(this._label.getLocation(r)===wu.NONE)return this._label.setLocation(r,i),null}},Zc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Zc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Hc=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zc),qc=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Cl,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new Hc(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zc),Kc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Kc.prototype.setVisited=function(t){this._isVisited=t},Kc.prototype.setInResult=function(t){this._isInResult=t},Kc.prototype.isCovered=function(){return this._isCovered},Kc.prototype.isCoveredSet=function(){return this._isCoveredSet},Kc.prototype.setLabel=function(t){this._label=t},Kc.prototype.getLabel=function(){return this._label},Kc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Kc.prototype.updateIM=function(t){el.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Kc.prototype.isInResult=function(){return this._isInResult},Kc.prototype.isVisited=function(){return this._isVisited},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Jc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new Xc(0,wu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=wu.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);r!==wu.BOUNDARY&&(r=i)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new Xc(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var r=arguments[0];this.mergeLabel(r._label)}else if(arguments[0]instanceof Xc)for(var i=arguments[0],n=0;n<2;n++){var o=t.computeMergedLocation(i,n);t._label.getLocation(n)===wu.NONE&&t._label.setLocation(n,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=wu.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case wu.BOUNDARY:r=wu.INTERIOR;break;case wu.INTERIOR:default:r=wu.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kc),Qc=function(){this.nodeMap=new zl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Qc.prototype.find=function(t){return this.nodeMap.get(t)},Qc.prototype.addNode=function(){if(arguments[0]instanceof Eu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Jc){var r=arguments[0],i=this.nodeMap.get(r.getCoordinate());return null===i?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}},Qc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qc.prototype.iterator=function(){return this.nodeMap.values().iterator()},Qc.prototype.values=function(){return this.nodeMap.values()},Qc.prototype.getBoundaryNodes=function(t){for(var e=new Cl,r=this.iterator();r.hasNext();){var i=r.next();i.getLabel().getLocation(t)===wu.BOUNDARY&&e.add(i)}return e},Qc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc};var $c=function(){},th={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},$c.isNorthern=function(t){return t===$c.NE||t===$c.NW},$c.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},$c.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},$c.isInHalfPlane=function(t,e){return e===$c.SE?t===$c.SE||t===$c.SW:t===e||t===e+1},$c.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?$c.NE:$c.SE:e>=0?$c.NW:$c.SW}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new vu("Cannot compute the quadrant for two identical points "+r);return i.x>=r.x?i.y>=r.y?$c.NE:$c.SE:i.y>=r.y?$c.NW:$c.SW}},th.NE.get=function(){return 0},th.NW.get=function(){return 1},th.SW.get=function(){return 2},th.SE.get=function(){return 3},Object.defineProperties($c,th);var eh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],i=arguments[2];this._edge=e,this.init(r,i),this._label=null}else if(4===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=n,this.init(o,s),this._label=a}};eh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:al.computeOrientation(t._p0,t._p1,this._p1)},eh.prototype.getDy=function(){return this._dy},eh.prototype.getCoordinate=function(){return this._p0},eh.prototype.setNode=function(t){this._node=t},eh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),i=r.lastIndexOf("."),n=r.substring(i+1);t.print("  "+n+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},eh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},eh.prototype.getDirectedCoordinate=function(){return this._p1},eh.prototype.getDx=function(){return this._dx},eh.prototype.getLabel=function(){return this._label},eh.prototype.getEdge=function(){return this._edge},eh.prototype.getQuadrant=function(){return this._quadrant},eh.prototype.getNode=function(){return this._node},eh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},eh.prototype.computeLabel=function(t){},eh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=$c.quadrant(this._dx,this._dy),el.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},eh.prototype.interfaces_=function(){return[bu]},eh.prototype.getClass=function(){return eh};var rh=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Xc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Vc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,r=0;r<2;r++)t._label.isArea(r)&&t._label.getLocation(r,Dc.LEFT)===wu.INTERIOR&&t._label.getLocation(r,Dc.RIGHT)===wu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Dc.LEFT]+"/"+this._depth[Dc.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,wu.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,wu.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var i=1;t===Dc.LEFT&&(i=-1);var n=Dc.opposite(t),o=e+r*i;this.setDepth(t,e),this.setDepth(n,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===wu.EXTERIOR&&e===wu.INTERIOR?1:t===wu.INTERIOR&&e===wu.EXTERIOR?-1:0},e}(eh),ih=function(){};ih.prototype.createNode=function(t){return new Jc(t,null)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih};var nh=function(){if(this._edges=new Cl,this._nodes=null,this._edgeEndList=new Cl,0===arguments.length)this._nodes=new Qc(new ih);else if(1===arguments.length){var t=arguments[0];this._nodes=new Qc(t)}};nh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},nh.prototype.find=function(t){return this._nodes.find(t)},nh.prototype.addNode=function(){if(arguments[0]instanceof Jc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this._nodes.addNode(e)}},nh.prototype.getNodeIterator=function(){return this._nodes.iterator()},nh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},nh.prototype.debugPrintln=function(t){Wu.out.println(t)},nh.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var i=r.getLabel();return null!==i&&i.getLocation(t)===wu.BOUNDARY},nh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},nh.prototype.matchInSameDirection=function(t,e,r,i){return!!t.equals(r)&&al.computeOrientation(t,e,i)===al.COLLINEAR&&$c.quadrant(t,e)===$c.quadrant(r,i)},nh.prototype.getEdgeEnds=function(){return this._edgeEndList},nh.prototype.debugPrint=function(t){Wu.out.print(t)},nh.prototype.getEdgeIterator=function(){return this._edges.iterator()},nh.prototype.findEdgeInSameDirection=function(t,e){for(var r=this,i=0;i<this._edges.size();i++){var n=r._edges.get(i),o=n.getCoordinates();if(r.matchInSameDirection(t,e,o[0],o[1]))return n;if(r.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return n}return null},nh.prototype.insertEdge=function(t){this._edges.add(t)},nh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},nh.prototype.addEdges=function(t){for(var e=this,r=t.iterator();r.hasNext();){var i=r.next();e._edges.add(i);var n=new rh(i,!0),o=new rh(i,!1);n.setSym(o),o.setSym(n),e.add(n),e.add(o)}},nh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},nh.prototype.getNodes=function(){return this._nodes.values()},nh.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var i=this._edges.get(r),n=i.getCoordinates();if(t.equals(n[0])&&e.equals(n[1]))return i}return null},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh},nh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var oh=function(){this._geometryFactory=null,this._shellList=new Cl;var t=arguments[0];this._geometryFactory=t};oh.prototype.sortShellsAndHoles=function(t,e,r){for(var i=t.iterator();i.hasNext();){var n=i.next();n.isHole()?r.add(n):e.add(n)}},oh.prototype.computePolygons=function(t){for(var e=new Cl,r=t.iterator();r.hasNext();){var i=r.next().toPolygon(this._geometryFactory);e.add(i)}return e},oh.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var i=r.next();if(null===i.getShell()){var n=this.findEdgeRingContaining(i,t);if(null===n)throw new Vc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(n)}}},oh.prototype.buildMinimalEdgeRings=function(t,e,r){for(var i=new Cl,n=t.iterator();n.hasNext();){var o=n.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else i.add(o)}return i},oh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},oh.prototype.buildMaximalEdgeRings=function(t){for(var e=new Cl,r=t.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var n=new qc(i,this._geometryFactory);e.add(n),n.setInResult()}}return e},oh.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()&&i.setShell(t)}},oh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},oh.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),i=r.getEnvelopeInternal(),n=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&al.isPointInRing(n,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},oh.prototype.findShell=function(t){for(var e=0,r=null,i=t.iterator();i.hasNext();){var n=i.next();n.isHole()||(r=n,e++)}return el.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},oh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];nh.linkResultDirectedEdges(r);var i=this.buildMaximalEdgeRings(e),n=new Cl,o=this.buildMinimalEdgeRings(i,this._shellList,n);this.sortShellsAndHoles(o,this._shellList,n),this.placeFreeHoles(this._shellList,n)}},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var sh=function(){};sh.prototype.getBounds=function(){},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var ah=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};ah.prototype.getItem=function(){return this._item},ah.prototype.getBounds=function(){return this._bounds},ah.prototype.interfaces_=function(){return[sh,Ou]},ah.prototype.getClass=function(){return ah};var uh=function(){this._size=null,this._items=null,this._size=0,this._items=new Cl,this._items.add(null)};uh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},uh.prototype.size=function(){return this._size},uh.prototype.reorder=function(t){for(var e=this,r=null,i=this._items.get(t);2*t<=this._size&&((r=2*t)!==e._size&&e._items.get(r+1).compareTo(e._items.get(r))<0&&r++,e._items.get(r).compareTo(i)<0);t=r)e._items.set(t,e._items.get(r));this._items.set(t,i)},uh.prototype.clear=function(){this._size=0,this._items.clear()},uh.prototype.isEmpty=function(){return 0===this._size},uh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var lh=function(){};lh.prototype.visitItem=function(t){},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var ch=function(){};ch.prototype.insert=function(t,e){},ch.prototype.remove=function(t,e){},ch.prototype.query=function(){},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){if(this._childBoundables=new Cl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ph={serialVersionUID:{configurable:!0}};hh.prototype.getLevel=function(){return this._level},hh.prototype.size=function(){return this._childBoundables.size()},hh.prototype.getChildBoundables=function(){return this._childBoundables},hh.prototype.addChildBoundable=function(t){el.isTrue(null===this._bounds),this._childBoundables.add(t)},hh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},hh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},hh.prototype.interfaces_=function(){return[sh,Ou]},hh.prototype.getClass=function(){return hh},ph.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(hh,ph);var fh=function(){};fh.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},fh.min=function(t){return fh.sort(t),t.get(0)},fh.sort=function(t,e){var r=t.toArray();e?Hl.sort(r,e):Hl.sort(r);for(var i=t.iterator(),n=0,o=r.length;n<o;n++)i.next(),i.set(r[n])},fh.singletonList=function(t){var e=new Cl;return e.add(t),e};var dh=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};dh.prototype.expandToQueue=function(t,e){var r=dh.isComposite(this._boundable1),i=dh.isComposite(this._boundable2);if(r&&i)return dh.area(this._boundable1)>dh.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new vu("neither boundable is composite")},dh.prototype.isLeaves=function(){return!(dh.isComposite(this._boundable1)||dh.isComposite(this._boundable2))},dh.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},dh.prototype.expand=function(t,e,r,i){for(var n=t.getChildBoundables().iterator();n.hasNext();){var o=n.next(),s=new dh(o,e,this._itemDistance);s.getDistance()<i&&r.add(s)}},dh.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},dh.prototype.getDistance=function(){return this._distance},dh.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},dh.prototype.interfaces_=function(){return[bu]},dh.prototype.getClass=function(){return dh},dh.area=function(t){return t.getBounds().getArea()},dh.isComposite=function(t){return t instanceof hh};var gh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Cl,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];el.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},yh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};gh.prototype.getNodeCapacity=function(){return this._nodeCapacity},gh.prototype.lastNode=function(t){return t.get(t.size()-1)},gh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof hh?t+=this.size(r):r instanceof ah&&(t+=1)}return t}},gh.prototype.removeItem=function(t,e){for(var r=null,i=t.getChildBoundables().iterator();i.hasNext();){var n=i.next();n instanceof ah&&n.getItem()===e&&(r=n)}return null!==r&&(t.getChildBoundables().remove(r),!0)},gh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Cl:t}if(1===arguments.length){for(var e=arguments[0],r=new Cl,i=e.getChildBoundables().iterator();i.hasNext();){var n=i.next();if(n instanceof hh){var o=this.itemsTree(n);null!==o&&r.add(o)}else n instanceof ah?r.add(n.getItem()):el.shouldNeverReachHere()}return r.size()<=0?null:r}},gh.prototype.insert=function(t,e){el.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ah(t,e))},gh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Cl;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2];if(el.isTrue(r>-2),i.getLevel()===r)return n.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof hh?this.boundablesAtLevel(r,s,n):(el.isTrue(s instanceof ah),-1===r&&n.add(s))}return null}},gh.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var r=new Cl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,r),r}if(2===arguments.length){var i=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,n)}else if(3===arguments.length)if(Lu(arguments[2],lh)&&arguments[0]instanceof Object&&arguments[1]instanceof hh)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),o)&&(c instanceof hh?t.query(o,c,a):c instanceof ah?a.visitItem(c.getItem()):el.shouldNeverReachHere())}else if(Lu(arguments[2],Ol)&&arguments[0]instanceof Object&&arguments[1]instanceof hh)for(var h=arguments[0],p=arguments[1],f=arguments[2],d=p.getChildBoundables(),g=0;g<d.size();g++){var y=d.get(g);t.getIntersectsOp().intersects(y.getBounds(),h)&&(y instanceof hh?t.query(h,y,f):y instanceof ah?f.add(y.getItem()):el.shouldNeverReachHere())}},gh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},gh.prototype.getRoot=function(){return this.build(),this._root},gh.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2],o=this.removeItem(i,n);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof hh&&(o=this.remove(r,u,n))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},gh.prototype.createHigherLevels=function(t,e){el.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},gh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof hh){var i=this.depth(r);i>t&&(t=i)}}return t+1}},gh.prototype.createParentBoundables=function(t,e){var r=this;el.isTrue(!t.isEmpty());var i=new Cl;i.add(this.createNode(e));var n=new Cl(t);fh.sort(n,this.getComparator());for(var o=n.iterator();o.hasNext();){var s=o.next();r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(e)),r.lastNode(i).addChildBoundable(s)}return i},gh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},gh.prototype.interfaces_=function(){return[Ou]},gh.prototype.getClass=function(){return gh},gh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},yh.IntersectsOp.get=function(){return vh},yh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},yh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(gh,yh);var vh=function(){},mh=function(){};mh.prototype.distance=function(t,e){},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var _h=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){el.isTrue(t.length>0);for(var r=new Cl,i=0;i<t.length;i++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return r},e.prototype.createNode=function(t){return new bh(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),n=t.iterator(),o=0;o<e;o++){i[o]=new Cl;for(var s=0;n.hasNext()&&s<r;){var a=n.next();i[o].add(a),s++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],i=arguments[1];t.prototype.query.call(this,r,i)}else if(3===arguments.length)if(Lu(arguments[2],lh)&&arguments[0]instanceof Object&&arguments[1]instanceof hh){var n=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,n,o,s)}else if(Lu(arguments[2],Ol)&&arguments[0]instanceof Object&&arguments[1]instanceof hh){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,r){el.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new Cl(t);fh.sort(n,e.xComparator);var o=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Lu(arguments[0],mh)){var t=arguments[0],r=new dh(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(r)}if(arguments[0]instanceof dh){var i=arguments[0];return this.nearestNeighbour(i,mu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Lu(arguments[1],mh)){var n=arguments[0],o=arguments[1],s=new dh(this.getRoot(),n.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof dh&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new uh;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],y=new ah(f,d),v=new dh(this.getRoot(),y,g);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[ch,Ou]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return bh},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[xu]},compare:function(r,i){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(i.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[xu]},compare:function(r,i){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(i.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,r),e}(gh),bh=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new Xu(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hh),Sh=function(){};Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Sh.compare=function(t,e,r){if(e.equals2D(r))return 0;var i=Sh.relativeSign(e.x,r.x),n=Sh.relativeSign(e.y,r.y);switch(t){case 0:return Sh.compareValue(i,n);case 1:return Sh.compareValue(n,i);case 2:return Sh.compareValue(n,-i);case 3:return Sh.compareValue(-i,n);case 4:return Sh.compareValue(-i,-n);case 5:return Sh.compareValue(-n,-i);case 6:return Sh.compareValue(-n,i);case 7:return Sh.compareValue(i,-n)}return el.shouldNeverReachHere("invalid octant value"),0},Sh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var xh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3];this._segString=t,this.coord=new Eu(e),this.segmentIndex=r,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(r))};xh.prototype.getCoordinate=function(){return this.coord},xh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},xh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Sh.compare(this._segmentOctant,this.coord,e.coord)},xh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},xh.prototype.isInterior=function(){return this._isInterior},xh.prototype.interfaces_=function(){return[bu]},xh.prototype.getClass=function(){return xh};var Oh=function(){this._nodeMap=new zl,this._edge=null;var t=arguments[0];this._edge=t};Oh.prototype.getSplitCoordinates=function(){var t=new Pl;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(r,i,t),r=i}return t.toCoordinateArray()},Oh.prototype.addCollapsedNodes=function(){var t=new Cl;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},Oh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Oh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);r.equals2D(i)&&t.add(new ju(e+1))}},Oh.prototype.addEdgeCoordinates=function(t,e,r){var i=this._edge.getCoordinate(e.segmentIndex),n=e.isInterior()||!e.coord.equals2D(i);r.add(new Eu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));n&&r.add(new Eu(e.coord))},Oh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Oh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var i=e.next(),n=this.createSplitEdge(r,i);t.add(n),r=i}},Oh.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(r[0]=t.segmentIndex+1,!0)},Oh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var n=r.next();this.findCollapseIndex(i,n,e)&&t.add(new ju(e[0])),i=n}},Oh.prototype.getEdge=function(){return this._edge},Oh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Oh.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),n=e.isInterior()||!e.coord.equals2D(i);n||r--;var o=new Array(r).fill(null),s=0;o[s++]=new Eu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return n&&(o[s]=new Eu(e.coord)),new Ph(o,this._edge.getData())},Oh.prototype.add=function(t,e){var r=new xh(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(r);return null!==i?(el.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(r,r),r)},Oh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new $u("bad split edge start point at "+r);var i=t.get(t.size()-1).getCoordinates(),n=i[i.length-1];if(!n.equals2D(e[e.length-1]))throw new $u("bad split edge end point at "+n)},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh};var Eh=function(){};Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vu("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?r>=i?0:1:r>=i?7:6:e>=0?r>=i?3:2:r>=i?4:5}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var n=arguments[0],o=arguments[1],s=o.x-n.x,a=o.y-n.y;if(0===s&&0===a)throw new vu("Cannot compute the octant for two identical points "+n);return Eh.octant(s,a)}};var Ch=function(){};Ch.prototype.getCoordinates=function(){},Ch.prototype.size=function(){},Ch.prototype.getCoordinate=function(t){},Ch.prototype.isClosed=function(){},Ch.prototype.setData=function(t){},Ch.prototype.getData=function(){},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Th=function(){};Th.prototype.addIntersection=function(t,e){},Th.prototype.interfaces_=function(){return[Ch]},Th.prototype.getClass=function(){return Th};var Ph=function(){this._nodeList=new Oh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ph.prototype.getCoordinates=function(){return this._pts},Ph.prototype.size=function(){return this._pts.length},Ph.prototype.getCoordinate=function(t){return this._pts[t]},Ph.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ph.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Ph.prototype.setData=function(t){this._data=t},Ph.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Eh.octant(t,e)},Ph.prototype.getData=function(){return this._data},Ph.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[3],o=new Eu(r.getIntersection(n));this.addIntersection(o,i)}},Ph.prototype.toString=function(){return Qu.toLineString(new bc(this._pts))},Ph.prototype.getNodeList=function(){return this._nodeList},Ph.prototype.addIntersectionNode=function(t,e){var r=e,i=r+1;if(i<this._pts.length){var n=this._pts[i];t.equals2D(n)&&(r=i)}return this._nodeList.add(t,r)},Ph.prototype.addIntersections=function(t,e,r){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,r,i)},Ph.prototype.interfaces_=function(){return[Th]},Ph.prototype.getClass=function(){return Ph},Ph.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Cl;return Ph.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],i=arguments[1],n=r.iterator();n.hasNext();){n.next().getNodeList().addSplitEdges(i)}};var wh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Eu,this.p1=new Eu;else if(1===arguments.length){var t=arguments[0];this.p0=new Eu(t.p0),this.p1=new Eu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3];this.p0=new Eu(e,r),this.p1=new Eu(i,n)}},Ih={serialVersionUID:{configurable:!0}};wh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},wh.prototype.orientationIndex=function(){if(arguments[0]instanceof wh){var t=arguments[0],e=al.orientationIndex(this.p0,this.p1,t.p0),r=al.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0||e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof Eu){var i=arguments[0];return al.orientationIndex(this.p0,this.p1,i)}},wh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},wh.prototype.isVertical=function(){return this.p0.x===this.p1.x},wh.prototype.equals=function(t){if(!(t instanceof wh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},wh.prototype.intersection=function(t){var e=new nl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},wh.prototype.project=function(){if(arguments[0]instanceof Eu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Eu(t);var e=this.projectionFactor(t),r=new Eu;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof wh){var i=arguments[0],n=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(n>=1&&o>=1)return null;if(n<=0&&o<=0)return null;var s=this.project(i.p0);n<0&&(s=this.p0),n>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new wh(s,a)}},wh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},wh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},wh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},wh.prototype.distancePerpendicular=function(t){return al.distancePointLinePerpendicular(t,this.p0,this.p1)},wh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},wh.prototype.midPoint=function(){return wh.midPoint(this.p0,this.p1)},wh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,i=e*e+r*r;return i<=0?mu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/i},wh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),i=mu.MAX_VALUE,n=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(n=s.distance(t.p1))<i&&(i=n,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(n=a.distance(this.p0))<i&&(i=n,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(n=u.distance(this.p1))<i&&(i=n,r[0]=this.p1,r[1]=u),r},wh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},wh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},wh.prototype.getLength=function(){return this.p0.distance(this.p1)},wh.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},wh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},wh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},wh.prototype.lineIntersection=function(t){try{return Yu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof zu))throw t}return null},wh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},wh.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),n=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(n*n+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*n/s,u=e*o/s}return new Eu(r-u,i+a)},wh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},wh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||mu.isNaN(e))&&(e=1),e},wh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},wh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},wh.prototype.distance=function(){if(arguments[0]instanceof wh){var t=arguments[0];return al.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Eu){var e=arguments[0];return al.distancePointLine(e,this.p0,this.p1)}},wh.prototype.pointAlong=function(t){var e=new Eu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},wh.prototype.hashCode=function(){var t=mu.doubleToLongBits(this.p0.x);t^=31*mu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=mu.doubleToLongBits(this.p1.x);return r^=31*mu.doubleToLongBits(this.p1.y),e^Math.trunc(r)^Math.trunc(r>>32)},wh.prototype.interfaces_=function(){return[bu,Ou]},wh.prototype.getClass=function(){return wh},wh.midPoint=function(t,e){return new Eu((t.x+e.x)/2,(t.y+e.y)/2)},Ih.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(wh,Ih);var Lh=function(){this.tempEnv1=new Xu,this.tempEnv2=new Xu,this._overlapSeg1=new wh,this._overlapSeg2=new wh};Lh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Rh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=i};Rh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Rh.prototype.computeSelect=function(t,e,r,i){var n=this._pts[e],o=this._pts[r];if(i.tempEnv1.init(n,o),r-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,i),s<r&&this.computeSelect(t,s,r,i)},Rh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},Rh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Rh.prototype.setId=function(t){this._id=t},Rh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Rh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Xu(t,e)}return this._env},Rh.prototype.getEndIndex=function(){return this._end},Rh.prototype.getStartIndex=function(){return this._start},Rh.prototype.getContext=function(){return this._context},Rh.prototype.getId=function(){return this._id},Rh.prototype.computeOverlapsInternal=function(t,e,r,i,n,o){var s=this._pts[t],a=this._pts[e],u=r._pts[i],l=r._pts[n];if(e-t==1&&n-i==1)return o.overlap(this,t,r,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+n)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,r,i,h,o),h<n&&this.computeOverlapsInternal(t,c,r,h,n,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,r,i,h,o),h<n&&this.computeOverlapsInternal(c,e,r,h,n,o))},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh};var Mh=function(){};Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.getChainStartIndices=function(t){var e=0,r=new Cl;r.add(new ju(e));do{var i=Mh.findChainEnd(t,e);r.add(new ju(i)),e=i}while(e<t.length-1);return Mh.toIntArray(r)},Mh.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var i=$c.quadrant(t[r],t[r+1]),n=e+1;n<t.length&&(t[n-1].equals2D(t[n])||$c.quadrant(t[n-1],t[n])===i);)n++;return n-1},Mh.getChains=function(){if(1===arguments.length){var t=arguments[0];return Mh.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],i=new Cl,n=Mh.getChainStartIndices(e),o=0;o<n.length-1;o++){var s=new Rh(e,n[o],n[o+1],r);i.add(s)}return i}},Mh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Ah=function(){};Ah.prototype.computeNodes=function(t){},Ah.prototype.getNodedSubstrings=function(){},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah};var jh=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};jh.prototype.setSegmentIntersector=function(t){this._segInt=t},jh.prototype.interfaces_=function(){return[Ah]},jh.prototype.getClass=function(){return jh};var Nh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Cl,this._index=new _h,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Ph.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,r=Mh.getChains(t.getCoordinates(),t).iterator();r.hasNext();){var i=r.next();i.setId(e._idCounter++),e._index.insert(i.getEnvelope(),i),e._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Fh(this._segInt),r=this._monoChains.iterator();r.hasNext();)for(var i=r.next(),n=t._index.query(i.getEnvelope()).iterator();n.hasNext();){var o=n.next();if(o.getId()>i.getId()&&(i.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return Fh},Object.defineProperties(e,r),e}(jh),Fh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],i=arguments[2],n=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,r,s,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Lh),Dh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(i)}else if(4===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(n),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},kh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Dh.prototype.getEndCapStyle=function(){return this._endCapStyle},Dh.prototype.isSingleSided=function(){return this._isSingleSided},Dh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Dh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Dh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Dh.JOIN_ROUND&&(this._quadrantSegments=Dh.DEFAULT_QUADRANT_SEGMENTS)},Dh.prototype.getJoinStyle=function(){return this._joinStyle},Dh.prototype.setJoinStyle=function(t){this._joinStyle=t},Dh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Dh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Dh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Dh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Dh.prototype.getMitreLimit=function(){return this._mitreLimit},Dh.prototype.setMitreLimit=function(t){this._mitreLimit=t},Dh.prototype.setSingleSided=function(t){this._isSingleSided=t},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Dh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},kh.CAP_ROUND.get=function(){return 1},kh.CAP_FLAT.get=function(){return 2},kh.CAP_SQUARE.get=function(){return 3},kh.JOIN_ROUND.get=function(){return 1},kh.JOIN_MITRE.get=function(){return 2},kh.JOIN_BEVEL.get=function(){return 3},kh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},kh.DEFAULT_MITRE_LIMIT.get=function(){return 5},kh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Dh,kh);var Gh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=al.COUNTERCLOCKWISE,this._inputLine=t||null},Bh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Gh.prototype.isDeletable=function(t,e,r,i){var n=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(n,o,s)&&!!this.isShallow(n,o,s,i)&&this.isShallowSampled(n,o,t,r,i)},Gh.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,r=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(r),n=!1;i<this._inputLine.length;){var o=!1;t.isDeletable(e,r,i,t._distanceTol)&&(t._isDeleted[r]=Gh.DELETE,o=!0,n=!0),e=o?i:r,r=t.findNextNonDeletedIndex(e),i=t.findNextNonDeletedIndex(r)}return n},Gh.prototype.isShallowConcavity=function(t,e,r,i){return al.computeOrientation(t,e,r)===this._angleOrientation&&al.distancePointLine(e,t,r)<i},Gh.prototype.isShallowSampled=function(t,e,r,i,n){var o=Math.trunc((i-r)/Gh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],n))return!1;return!0},Gh.prototype.isConcave=function(t,e,r){return al.computeOrientation(t,e,r)===this._angleOrientation},Gh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=al.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Gh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Gh.DELETE;)e++;return e},Gh.prototype.isShallow=function(t,e,r,i){return al.distancePointLine(e,t,r)<i},Gh.prototype.collapseLine=function(){for(var t=new Pl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Gh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.simplify=function(t,e){return new Gh(t).simplify(e)},Bh.INIT.get=function(){return 0},Bh.DELETE.get=function(){return 1},Bh.KEEP.get=function(){return 1},Bh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Gh,Bh);var Uh=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Cl},Vh={COORDINATE_ARRAY_TYPE:{configurable:!0}};Uh.prototype.getCoordinates=function(){return this._ptList.toArray(Uh.COORDINATE_ARRAY_TYPE)},Uh.prototype.setPrecisionModel=function(t){this._precisionModel=t},Uh.prototype.addPt=function(t){var e=new Eu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Uh.prototype.revere=function(){},Uh.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Uh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Uh.prototype.toString=function(){return(new Ic).createLineString(this.getCoordinates()).toString()},Uh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Eu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Uh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Vh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Uh,Vh);var zh=function(){},Wh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.toDegrees=function(t){return 180*t/Math.PI},zh.normalize=function(t){for(;t>Math.PI;)t-=zh.PI_TIMES_2;for(;t<=-Math.PI;)t+=zh.PI_TIMES_2;return t},zh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],i=r.x-e.x,n=r.y-e.y;return Math.atan2(n,i)}},zh.isAcute=function(t,e,r){var i=t.x-e.x,n=t.y-e.y;return i*(r.x-e.x)+n*(r.y-e.y)>0},zh.isObtuse=function(t,e,r){var i=t.x-e.x,n=t.y-e.y;return i*(r.x-e.x)+n*(r.y-e.y)<0},zh.interiorAngle=function(t,e,r){var i=zh.angle(e,t),n=zh.angle(e,r);return Math.abs(n-i)},zh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=zh.PI_TIMES_2;t>=zh.PI_TIMES_2&&(t=0)}else{for(;t>=zh.PI_TIMES_2;)t-=zh.PI_TIMES_2;t<0&&(t=0)}return t},zh.angleBetween=function(t,e,r){var i=zh.angle(e,t),n=zh.angle(e,r);return zh.diff(i,n)},zh.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},zh.toRadians=function(t){return t*Math.PI/180},zh.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?zh.COUNTERCLOCKWISE:r<0?zh.CLOCKWISE:zh.NONE},zh.angleBetweenOriented=function(t,e,r){var i=zh.angle(e,t),n=zh.angle(e,r)-i;return n<=-Math.PI?n+zh.PI_TIMES_2:n>Math.PI?n-zh.PI_TIMES_2:n},Wh.PI_TIMES_2.get=function(){return 2*Math.PI},Wh.PI_OVER_2.get=function(){return Math.PI/2},Wh.PI_OVER_4.get=function(){return Math.PI/4},Wh.COUNTERCLOCKWISE.get=function(){return al.COUNTERCLOCKWISE},Wh.CLOCKWISE.get=function(){return al.CLOCKWISE},Wh.NONE.get=function(){return al.COLLINEAR},Object.defineProperties(zh,Wh);var Yh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new wh,this._seg1=new wh,this._offset0=new wh,this._offset1=new wh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new nl,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===Dh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Xh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Yh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=al.computeOrientation(this._s0,this._s1,this._s2),i=r===al.CLOCKWISE&&this._side===Dc.LEFT||r===al.COUNTERCLOCKWISE&&this._side===Dc.RIGHT;0===r?this.addCollinear(e):i?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},Yh.prototype.addLineEndCap=function(t,e){var r=new wh(t,e),i=new wh;this.computeOffsetSegment(r,Dc.LEFT,this._distance,i);var n=new wh;this.computeOffsetSegment(r,Dc.RIGHT,this._distance,n);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Dh.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,al.CLOCKWISE,this._distance),this._segList.addPt(n.p1);break;case Dh.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(n.p1);break;case Dh.CAP_SQUARE:var u=new Eu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new Eu(i.p1.x+u.x,i.p1.y+u.y),c=new Eu(n.p1.x+u.x,n.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Yh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Yh.prototype.addMitreJoin=function(t,e,r,i){var n=!0,o=null;try{o=Yu.intersection(e.p0,e.p1,r.p0,r.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(n=!1)}catch(t){if(!(t instanceof zu))throw t;o=new Eu(0,0),n=!1}n?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,i,this._bufParams.getMitreLimit())},Yh.prototype.addFilletCorner=function(t,e,r,i,n){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,l=r.y-t.y,c=Math.atan2(l,u);i===al.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,i,n),this._segList.addPt(r)},Yh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Yh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Dh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Dh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Yh.prototype.createSquare=function(t){this._segList.addPt(new Eu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Eu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Yh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Yh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Yh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Yh.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},Yh.prototype.addLimitedMitreJoin=function(t,e,r,i){var n=this._seg0.p1,o=zh.angle(n,this._seg0.p0),s=zh.angleBetweenOriented(this._seg0.p0,n,this._seg1.p1)/2,a=zh.normalize(o+s),u=zh.normalize(a+Math.PI),l=i*r,c=r-l*Math.abs(Math.sin(s)),h=n.x+l*Math.cos(u),p=n.y+l*Math.sin(u),f=new Eu(h,p),d=new wh(n,f),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Dc.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Yh.prototype.computeOffsetSegment=function(t,e,r,i){var n=e===Dc.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=n*r*o/a,l=n*r*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},Yh.prototype.addFilletArc=function(t,e,r,i,n){var o=i===al.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new Eu;l<s;){var h=e+o*l;c.x=t.x+n*Math.cos(h),c.y=t.y+n*Math.sin(h),this._segList.addPt(c),l+=u}},Yh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Yh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new Eu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new Eu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Yh.prototype.createCircle=function(t){var e=new Eu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Yh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Yh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Uh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Yh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Yh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Dh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Dh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,al.CLOCKWISE,this._distance))},Yh.prototype.closeRing=function(){this._segList.closeRing()},Yh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Xh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Xh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Xh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Xh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Yh,Xh);var Zh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Zh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,i=Math.abs(e),n=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],n):this.computeOffsetCurve(t,r,n);var o=n.getCoordinates();return r&&wl.reverse(o),o},Zh.prototype.computeSingleSidedBufferCurve=function(t,e,r){var i=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var n=Gh.simplify(t,-i),o=n.length-1;r.initSideSegments(n[o],n[o-1],Dc.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(n[s],!0)}else{r.addSegments(t,!1);var a=Gh.simplify(t,i),u=a.length-1;r.initSideSegments(a[0],a[1],Dc.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment(),r.closeRing()},Zh.prototype.computeRingBufferCurve=function(t,e,r){var i=this.simplifyTolerance(this._distance);e===Dc.RIGHT&&(i=-i);var n=Gh.simplify(t,i),o=n.length-1;r.initSideSegments(n[o-1],n[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(n[s],a)}r.closeRing()},Zh.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),i=Gh.simplify(t,r),n=i.length-1;e.initSideSegments(i[0],i[1],Dc.LEFT);for(var o=2;o<=n;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[n-1],i[n]);var s=Gh.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],Dc.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Zh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Dh.CAP_ROUND:e.createCircle(t);break;case Dh.CAP_SQUARE:e.createSquare(t)}},Zh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),i=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var n=e<0;this.computeSingleSidedBufferCurve(t,n,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Zh.prototype.getBufferParameters=function(){return this._bufParams},Zh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Zh.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return Zh.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Zh.prototype.computeOffsetCurve=function(t,e,r){var i=this.simplifyTolerance(this._distance);if(e){var n=Gh.simplify(t,-i),o=n.length-1;r.initSideSegments(n[o],n[o-1],Dc.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(n[s],!0)}else{var a=Gh.simplify(t,i),u=a.length-1;r.initSideSegments(a[0],a[1],Dc.LEFT),r.addFirstSegment();for(var l=2;l<=u;l++)r.addNextSegment(a[l],!0)}r.addLastSegment()},Zh.prototype.getSegGen=function(t){return new Yh(this._precisionModel,this._bufParams,t)},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Zh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new Eu(t[r]);return e};var Hh=function(){this._subgraphs=null,this._seg=new wh,this._cga=new al;var t=arguments[0];this._subgraphs=t},qh={DepthSegment:{configurable:!0}};Hh.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=new Cl,i=this._subgraphs.iterator();i.hasNext();){var n=i.next(),o=n.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,n.getDirectedEdges(),r)}return r}if(3===arguments.length)if(Lu(arguments[2],Ol)&&arguments[0]instanceof Eu&&arguments[1]instanceof rh)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){if(t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||al.computeOrientation(t._seg.p0,t._seg.p1,s)===al.RIGHT)){var h=a.getDepth(Dc.LEFT);t._seg.p0.equals(l[c])||(h=a.getDepth(Dc.RIGHT));var p=new Kh(t._seg,h);u.add(p)}}else if(Lu(arguments[2],Ol)&&arguments[0]instanceof Eu&&Lu(arguments[1],Ol))for(var f=arguments[0],d=arguments[1],g=arguments[2],y=d.iterator();y.hasNext();){var v=y.next();v.isForward()&&t.findStabbedSegments(f,v,g)}},Hh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:fh.min(e)._leftDepth},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},qh.DepthSegment.get=function(){return Kh},Object.defineProperties(Hh,qh);var Kh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new wh(t),this._leftDepth=e};Kh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r||0!=(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},Kh.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},Kh.prototype.toString=function(){return this._upwardSeg.toString()},Kh.prototype.interfaces_=function(){return[bu]},Kh.prototype.getClass=function(){return Kh};var Jh=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};Jh.prototype.area=function(){return Jh.area(this.p0,this.p1,this.p2)},Jh.prototype.signedArea=function(){return Jh.signedArea(this.p0,this.p1,this.p2)},Jh.prototype.interpolateZ=function(t){if(null===t)throw new vu("Supplied point is null.");return Jh.interpolateZ(t,this.p0,this.p1,this.p2)},Jh.prototype.longestSideLength=function(){return Jh.longestSideLength(this.p0,this.p1,this.p2)},Jh.prototype.isAcute=function(){return Jh.isAcute(this.p0,this.p1,this.p2)},Jh.prototype.circumcentre=function(){return Jh.circumcentre(this.p0,this.p1,this.p2)},Jh.prototype.area3D=function(){return Jh.area3D(this.p0,this.p1,this.p2)},Jh.prototype.centroid=function(){return Jh.centroid(this.p0,this.p1,this.p2)},Jh.prototype.inCentre=function(){return Jh.inCentre(this.p0,this.p1,this.p2)},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Jh.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},Jh.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},Jh.det=function(t,e,r,i){return t*i-e*r},Jh.interpolateZ=function(t,e,r,i){var n=e.x,o=e.y,s=r.x-n,a=i.x-n,u=r.y-o,l=i.y-o,c=s*l-a*u,h=t.x-n,p=t.y-o,f=(l*h-a*p)/c,d=(-u*h+s*p)/c;return e.z+f*(r.z-e.z)+d*(i.z-e.z)},Jh.longestSideLength=function(t,e,r){var i=t.distance(e),n=e.distance(r),o=r.distance(t),s=i;return n>s&&(s=n),o>s&&(s=o),s},Jh.isAcute=function(t,e,r){return!!zh.isAcute(t,e,r)&&!!zh.isAcute(e,r,t)&&!!zh.isAcute(r,t,e)},Jh.circumcentre=function(t,e,r){var i=r.x,n=r.y,o=t.x-i,s=t.y-n,a=e.x-i,u=e.y-n,l=2*Jh.det(o,s,a,u),c=Jh.det(s,o*o+s*s,u,a*a+u*u),h=Jh.det(o,o*o+s*s,a,a*a+u*u);return new Eu(i-c/l,n+h/l)},Jh.perpendicularBisector=function(t,e){var r=e.x-t.x,i=e.y-t.y,n=new Yu(t.x+r/2,t.y+i/2,1),o=new Yu(t.x-i+r/2,t.y+r+i/2,1);return new Yu(n,o)},Jh.angleBisector=function(t,e,r){var i=e.distance(t),n=i/(i+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new Eu(t.x+n*o,t.y+n*s)},Jh.area3D=function(t,e,r){var i=e.x-t.x,n=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,l=n*u-o*a,c=o*s-i*u,h=i*a-n*s,p=l*l+c*c+h*h;return Math.sqrt(p)/2},Jh.centroid=function(t,e,r){var i=(t.x+e.x+r.x)/3,n=(t.y+e.y+r.y)/3;return new Eu(i,n)},Jh.inCentre=function(t,e,r){var i=e.distance(r),n=t.distance(r),o=t.distance(e),s=i+n+o,a=(i*t.x+n*e.x+o*r.x)/s,u=(i*t.y+n*e.y+o*r.y)/s;return new Eu(a,u)};var Qh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Cl;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};Qh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,wu.EXTERIOR,wu.INTERIOR)},Qh.prototype.addPolygon=function(t){var e=this,r=this._distance,i=Dc.LEFT;this._distance<0&&(r=-this._distance,i=Dc.RIGHT);var n=t.getExteriorRing(),o=wl.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,r,i,wu.EXTERIOR,wu.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=wl.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,r,Dc.opposite(i),wu.INTERIOR,wu.EXTERIOR)}},Qh.prototype.isTriangleErodedCompletely=function(t,e){var r=new Jh(t[0],t[1],t[2]),i=r.inCentre();return al.distancePointLine(i,r.p0,r.p1)<Math.abs(e)},Qh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=wl.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,wu.EXTERIOR,wu.INTERIOR)},Qh.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var i=new Ph(t,new Xc(0,wu.BOUNDARY,e,r));this._curveList.add(i)},Qh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Qh.prototype.addPolygonRing=function(t,e,r,i,n){if(0===e&&t.length<fc.MINIMUM_VALID_SIZE)return null;var o=i,s=n;t.length>=fc.MINIMUM_VALID_SIZE&&al.isCCW(t)&&(o=n,s=i,r=Dc.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},Qh.prototype.add=function(t){if(t.isEmpty())return null;t instanceof hc?this.addPolygon(t):t instanceof ac?this.addLineString(t):t instanceof lc?this.addPoint(t):(t instanceof pc||t instanceof tc||t instanceof dc||t instanceof $l)&&this.addCollection(t)},Qh.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var i=t.getEnvelopeInternal(),n=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>n},Qh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var $h=function(){};$h.prototype.locate=function(t){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tp=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};tp.prototype.next=function(){if(this._atStart)return this._atStart=!1,tp.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new El;var t=this._parent.getGeometryN(this._index++);return t instanceof $l?(this._subcollectionIterator=new tp(t),this._subcollectionIterator.next()):t},tp.prototype.remove=function(){throw new Error(this.getClass().getName())},tp.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},tp.prototype.interfaces_=function(){return[xl]},tp.prototype.getClass=function(){return tp},tp.isAtomic=function(t){return!(t instanceof $l)};var ep=function(){this._geom=null;var t=arguments[0];this._geom=t};ep.prototype.locate=function(t){return ep.locate(t,this._geom)},ep.prototype.interfaces_=function(){return[$h]},ep.prototype.getClass=function(){return ep},ep.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&al.isPointInRing(t,e.getCoordinates())},ep.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!ep.isPointInRing(t,r))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var n=e.getInteriorRingN(i);if(ep.isPointInRing(t,n))return!1}return!0},ep.containsPoint=function(t,e){if(e instanceof hc)return ep.containsPointInPolygon(t,e);if(e instanceof $l)for(var r=new tp(e);r.hasNext();){var i=r.next();if(i!==e&&ep.containsPoint(t,i))return!0}return!1},ep.locate=function(t,e){return e.isEmpty()?wu.EXTERIOR:ep.containsPoint(t,e)?wu.INTERIOR:wu.EXTERIOR};var rp=function(){this._edgeMap=new zl,this._edgeList=null,this._ptInAreaLocation=[wu.NONE,wu.NONE]};rp.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},rp.prototype.propagateSideLabels=function(t){for(var e=wu.NONE,r=this.iterator();r.hasNext();){var i=r.next().getLabel();i.isArea(t)&&i.getLocation(t,Dc.LEFT)!==wu.NONE&&(e=i.getLocation(t,Dc.LEFT))}if(e===wu.NONE)return null;for(var n=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Dc.ON)===wu.NONE&&a.setLocation(t,Dc.ON,n),a.isArea(t)){var u=a.getLocation(t,Dc.LEFT),l=a.getLocation(t,Dc.RIGHT);if(l!==wu.NONE){if(l!==n)throw new Vc("side location conflict",s.getCoordinate());u===wu.NONE&&el.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),n=u}else el.isTrue(a.getLocation(t,Dc.LEFT)===wu.NONE,"found single null side"),a.setLocation(t,Dc.RIGHT,n),a.setLocation(t,Dc.LEFT,n)}}},rp.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},rp.prototype.print=function(t){Wu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},rp.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},rp.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,i=e.get(r).getLabel().getLocation(t,Dc.LEFT);el.isTrue(i!==wu.NONE,"Found unlabelled area edge");for(var n=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();el.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Dc.LEFT),u=s.getLocation(t,Dc.RIGHT);if(a===u)return!1;if(u!==n)return!1;n=a}return!0},rp.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},rp.prototype.iterator=function(){return this.getEdges().iterator()},rp.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Cl(this._edgeMap.values())),this._edgeList},rp.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===wu.NONE&&(this._ptInAreaLocation[t]=ep.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},rp.prototype.toString=function(){var t=new Au;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},rp.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},rp.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next().getLabel(),n=0;n<2;n++)i.isLine(n)&&i.getLocation(n)===wu.BOUNDARY&&(e[n]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=wu.NONE;if(e[u])l=wu.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},rp.prototype.getDegree=function(){return this._edgeMap.size()},rp.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp};var ip=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,r=null,i=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var o=t._resultAreaEdgeList.get(n),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),i){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;r=s,i=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;r.setNext(o),i=t._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===e)throw new Vc("no outgoing dirEdge found",this.getCoordinate());el.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),r.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var i=t.get(e-1),n=r.getQuadrant(),o=i.getQuadrant();return $c.isNorthern(n)&&$c.isNorthern(o)?r:$c.isNorthern(n)||$c.isNorthern(o)?0!==r.getDy()?r:0!==i.getDy()?i:(el.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){Wu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Cl;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var i=this._edgeList.get(r),n=i.getSym();null===e&&(e=n),null!==t&&n.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),r=t.getDepth(Dc.LEFT),i=t.getDepth(Dc.RIGHT),n=this.computeDepths(e+1,this._edgeList.size(),r);if(this.computeDepths(0,e,n)!==i)throw new Vc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var l=this._edgeList.get(u);l.setEdgeDepths(Dc.RIGHT,a),a=l.getDepth(Dc.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,r=null,i=null,n=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===r&&s.getEdgeRing()===t&&(r=s),n){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,n=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;i.setNextMin(s),n=e._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(el.isTrue(null!==r,"found null for first outgoing dirEdge"),el.isTrue(r.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(r))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,n=this.iterator();n.hasNext();){n.next().getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=wu.NONE,e=this.iterator();e.hasNext();){var r=e.next(),i=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=wu.INTERIOR;break}if(i.isInResult()){t=wu.EXTERIOR;break}}}if(t===wu.NONE)return null;for(var n=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(n===wu.INTERIOR):(s.isInResult()&&(n=wu.EXTERIOR),a.isInResult()&&(n=wu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Xc(wu.NONE);for(var r=this.iterator();r.hasNext();)for(var i=r.next().getEdge().getLabel(),n=0;n<2;n++){var o=i.getLocation(n);o!==wu.INTERIOR&&o!==wu.BOUNDARY||this._label.setLocation(n,wu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rp),np=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Jc(t,new ip)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ih),op=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};op.prototype.compareTo=function(t){var e=t;return op.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},op.prototype.interfaces_=function(){return[bu]},op.prototype.getClass=function(){return op},op.orientation=function(t){return 1===wl.increasingDirection(t)},op.compareOriented=function(t,e,r,i){for(var n=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?r.length:-1,u=e?0:t.length-1,l=i?0:r.length-1;;){var c=t[u].compareTo(r[l]);if(0!==c)return c;var h=(u+=n)===s,p=(l+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var sp=function(){this._edges=new Cl,this._ocaMap=new zl};sp.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=r.getCoordinates(),n=0;n<i.length;n++)n>0&&t.print(","),t.print(i[n].x+" "+i[n].y);t.println(")")}t.print(")  ")},sp.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},sp.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},sp.prototype.iterator=function(){return this._edges.iterator()},sp.prototype.getEdges=function(){return this._edges},sp.prototype.get=function(t){return this._edges.get(t)},sp.prototype.findEqualEdge=function(t){var e=new op(t.getCoordinates());return this._ocaMap.get(e)},sp.prototype.add=function(t){this._edges.add(t);var e=new op(t.getCoordinates());this._ocaMap.put(e,t)},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp};var ap=function(){};ap.prototype.processIntersections=function(t,e,r,i){},ap.prototype.isDone=function(){},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var up=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};up.prototype.isTrivialIntersection=function(t,e,r,i){if(t===r&&1===this._li.getIntersectionNum()){if(up.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var n=t.size()-1;if(0===e&&i===n||0===i&&e===n)return!0}}return!1},up.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},up.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},up.prototype.getLineIntersector=function(){return this._li},up.prototype.hasProperIntersection=function(){return this._hasProper},up.prototype.processIntersections=function(t,e,r,i){if(t===r&&e===i)return null;this.numTests++;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[i],a=r.getCoordinates()[i+1];this._li.computeIntersection(n,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},up.prototype.hasIntersection=function(){return this._hasIntersection},up.prototype.isDone=function(){return!1},up.prototype.hasInteriorIntersection=function(){return this._hasInterior},up.prototype.interfaces_=function(){return[ap]},up.prototype.getClass=function(){return up},up.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var lp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new Eu(t),this.segmentIndex=e,this.dist=r};lp.prototype.getSegmentIndex=function(){return this.segmentIndex},lp.prototype.getCoordinate=function(){return this.coord},lp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},lp.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},lp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},lp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},lp.prototype.getDistance=function(){return this.dist},lp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},lp.prototype.interfaces_=function(){return[bu]},lp.prototype.getClass=function(){return lp};var cp=function(){this._nodeMap=new zl,this.edge=null;var t=arguments[0];this.edge=t};cp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cp.prototype.iterator=function(){return this._nodeMap.values().iterator()},cp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var i=e.next(),n=this.createSplitEdge(r,i);t.add(n),r=i}},cp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},cp.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],n=e.dist>0||!e.coord.equals2D(i);n||r--;var o=new Array(r).fill(null),s=0;o[s++]=new Eu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return n&&(o[s]=e.coord),new gp(o,new Xc(this.edge._label))},cp.prototype.add=function(t,e,r){var i=new lp(t,e,r),n=this._nodeMap.get(i);return null!==n?n:(this._nodeMap.put(i,i),i)},cp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var hp=function(){};hp.prototype.getChainStartIndices=function(t){var e=0,r=new Cl;r.add(new ju(e));do{var i=this.findChainEnd(t,e);r.add(new ju(i)),e=i}while(e<t.length-1);return hp.toIntArray(r)},hp.prototype.findChainEnd=function(t,e){for(var r=$c.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&$c.quadrant(t[i-1],t[i])===r;)i++;return i-1},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var pp=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Xu,this.env2=new Xu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new hp;this.startIndex=e.getChainStartIndices(this.pts)};pp.prototype.getCoordinates=function(){return this.pts},pp.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},pp.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},pp.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],i)}else if(6===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[n],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-n==1&&u-a==1)return l.addIntersections(this.e,n,s.e,a),null;if(this.env1.init(c,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((n+o)/2),g=Math.trunc((a+u)/2);n<d&&(a<g&&this.computeIntersectsForChain(n,d,s,a,g,l),g<u&&this.computeIntersectsForChain(n,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},pp.prototype.getStartIndexes=function(){return this.startIndex},pp.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(r,t,i,e)},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var fp=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},dp={NULL_VALUE:{configurable:!0}};fp.prototype.getDepth=function(t,e){return this._depth[t][e]},fp.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},fp.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==fp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===fp.NULL_VALUE}if(2===arguments.length){var i=arguments[0],n=arguments[1];return this._depth[i][n]===fp.NULL_VALUE}},fp.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var r=t._depth[e][1];t._depth[e][2]<r&&(r=t._depth[e][2]),r<0&&(r=0);for(var i=1;i<3;i++){var n=0;t._depth[e][i]>r&&(n=1),t._depth[e][i]=n}}},fp.prototype.getDelta=function(t){return this._depth[t][Dc.RIGHT]-this._depth[t][Dc.LEFT]},fp.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?wu.EXTERIOR:wu.INTERIOR},fp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},fp.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var n=e.getLocation(r,i);n!==wu.EXTERIOR&&n!==wu.INTERIOR||(t.isNull(r,i)?t._depth[r][i]=fp.depthAtLocation(n):t._depth[r][i]+=fp.depthAtLocation(n))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===wu.INTERIOR&&this._depth[o][s]++}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.depthAtLocation=function(t){return t===wu.EXTERIOR?0:t===wu.INTERIOR?1:fp.NULL_VALUE},dp.NULL_VALUE.get=function(){return-1},Object.defineProperties(fp,dp);var gp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new cp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new fp,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.pts=i,this._label=n}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Xc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var i=!0,n=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(i=!1),this.pts[s].equals2D(r.pts[--o])||(n=!1),!i&&!n)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new pp(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Xu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,i){var n=new Eu(t.getIntersection(i)),o=e,s=t.getEdgeDistance(r,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];n.equals2D(u)&&(o=a,s=0)}this.eiList.add(n,o,s)},e.prototype.toString=function(){var t=new Au;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,r,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,Dc.ON),e.getLocation(1,Dc.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,Dc.LEFT),e.getLocation(1,Dc.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,Dc.RIGHT),e.getLocation(1,Dc.RIGHT),2))},e}(Kc),yp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new sp,this._bufParams=t||null};yp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},yp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Xc(t.getLabel())).flip(),r.merge(i);var n=yp.depthDelta(i),o=e.getDepthDelta()+n;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(yp.depthDelta(t.getLabel()))},yp.prototype.buildSubgraphs=function(t,e){for(var r=new Cl,i=t.iterator();i.hasNext();){var n=i.next(),o=n.getRightmostCoordinate(),s=new Hh(r).getDepth(o);n.computeDepth(s),n.findResultEdges(),r.add(n),e.add(n.getDirectedEdges(),n.getNodes())}},yp.prototype.createSubgraphs=function(t){for(var e=new Cl,r=t.getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isVisited()){var n=new Wc;n.create(i),e.add(n)}}return fh.sort(e,fh.reverseOrder()),e},yp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},yp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Nh,r=new nl;return r.setPrecisionModel(t),e.setSegmentIntersector(new up(r)),e},yp.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Zh(r,this._bufParams),n=new Qh(t,e,i).getCurves();if(n.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(n,r),this._graph=new nh(new np),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new oh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},yp.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var i=r.getNodedSubstrings().iterator();i.hasNext();){var n=i.next(),o=n.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=n.getData(),a=new gp(n.getCoordinates(),new Xc(s));this.insertUniqueEdge(a)}}},yp.prototype.setNoder=function(t){this._workingNoder=t},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.depthDelta=function(t){var e=t.getLocation(0,Dc.LEFT),r=t.getLocation(0,Dc.RIGHT);return e===wu.INTERIOR&&r===wu.EXTERIOR?1:e===wu.EXTERIOR&&r===wu.INTERIOR?-1:0},yp.convertSegStrings=function(t){for(var e=new Ic,r=new Cl;t.hasNext();){var i=t.next(),n=e.createLineString(i.getCoordinates());r.add(n)}return e.buildGeometry(r)};var vp=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=i,this._offsetX=n,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};vp.prototype.rescale=function(){var t=this;if(Lu(arguments[0],bl))for(var e=arguments[0].iterator();e.hasNext();){var r=e.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],n=0;n<i.length;n++)i[n].x=i[n].x/t._scaleFactor+t._offsetX,i[n].y=i[n].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Wu.out.println(i)}},vp.prototype.scale=function(){var t=this;if(Lu(arguments[0],bl)){for(var e=arguments[0],r=new Cl,i=e.iterator();i.hasNext();){var n=i.next();r.add(new Ph(t.scale(n.getCoordinates()),n.getData()))}return r}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new Eu(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return wl.removeRepeatedPoints(s)}},vp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},vp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},vp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},vp.prototype.interfaces_=function(){return[Ah]},vp.prototype.getClass=function(){return vp};var mp=function(){this._li=new nl,this._segStrings=null;var t=arguments[0];this._segStrings=t},_p={fact:{configurable:!0}};mp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next().getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var o=n.next().getCoordinates(),s=1;s<o.length-1;s++)if(o[s].equals(i))throw new $u("found endpt/interior pt intersection at index "+s+" :pt "+i)},mp.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var n=arguments[0],o=arguments[1],s=n.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(n,u,o,l);else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(c===p&&h===f)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],y=p.getCoordinates()[f],v=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,y,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,v)))throw new $u("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+v)}},mp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},mp.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),i=0;i<r.length-2;i++)this.checkCollapse(r[i],r[i+1],r[i+2])},mp.prototype.hasInteriorIntersection=function(t,e,r){for(var i=0;i<t.getIntersectionNum();i++){var n=t.getIntersection(i);if(!n.equals(e)&&!n.equals(r))return!0}return!1},mp.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new $u("found non-noded collapse at "+mp.fact.createLineString([t,e,r]))},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},_p.fact.get=function(){return new Ic},Object.defineProperties(mp,_p);var bp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new vu("Scale factor must be non-zero");1!==e&&(this._pt=new Eu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Eu,this._p1Scaled=new Eu),this.initCorners(this._pt)},Sp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};bp.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),i=Math.max(t.x,e.x),n=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>i||this._maxy<n||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return el.isTrue(!(s&&a),"Found bad envelope test"),a},bp.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Eu(this._maxx,this._maxy),this._corner[1]=new Eu(this._minx,this._maxy),this._corner[2]=new Eu(this._minx,this._miny),this._corner[3]=new Eu(this._maxx,this._miny)},bp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},bp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},bp.prototype.getCoordinate=function(){return this._originalPt},bp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},bp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=bp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Xu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},bp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},bp.prototype.intersectsToleranceSquare=function(t,e){var r=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||r&&i||t.equals(this._pt)||e.equals(this._pt)))))},bp.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(r,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},Sp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(bp,Sp);var xp=function(){this.tempEnv1=new Xu,this.selectedSegment=new wh};xp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var Op=function(){this._index=null;var t=arguments[0];this._index=t},Ep={HotPixelSnapAction:{configurable:!0}};Op.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],i=arguments[2],n=e.getSafeEnvelope(),o=new Cp(e,r,i);return this._index.query(n,{interfaces_:function(){return[lh]},visitItem:function(t){t.select(n,o)}}),o.isNodeAdded()}},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Ep.HotPixelSnapAction.get=function(){return Cp},Object.defineProperties(Op,Ep);var Cp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xp),Tp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Cl};Tp.prototype.processIntersections=function(t,e,r,i){if(t===r&&e===i)return null;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[i],a=r.getCoordinates()[i+1];if(this._li.computeIntersection(n,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,i,1)}},Tp.prototype.isDone=function(){return!1},Tp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Tp.prototype.interfaces_=function(){return[ap]},Tp.prototype.getClass=function(){return Tp};var Pp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new nl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Pp.prototype.checkCorrectness=function(t){var e=Ph.getNodedSubstrings(t),r=new mp(e);try{r.checkValid()}catch(t){if(!(t instanceof Vu))throw t;t.printStackTrace()}},Pp.prototype.getNodedSubstrings=function(){return Ph.getNodedSubstrings(this._nodedSegStrings)},Pp.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},Pp.prototype.findInteriorIntersections=function(t,e){var r=new Tp(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},Pp.prototype.computeVertexSnaps=function(){var t=this;if(Lu(arguments[0],bl))for(var e=arguments[0].iterator();e.hasNext();){var r=e.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof Ph)for(var i=arguments[0],n=i.getCoordinates(),o=0;o<n.length;o++){var s=new bp(n[o],t._scaleFactor,t._li);t._pointSnapper.snap(s,i,o)&&i.addIntersection(n[o],o)}},Pp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Nh,this._pointSnapper=new Op(this._noder.getIndex()),this.snapRound(t,this._li)},Pp.prototype.computeIntersectionSnaps=function(t){for(var e=this,r=t.iterator();r.hasNext();){var i=r.next(),n=new bp(i,e._scaleFactor,e._li);e._pointSnapper.snap(n)}},Pp.prototype.interfaces_=function(){return[Ah]},Pp.prototype.getClass=function(){return Pp};var wp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Dh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},Ip={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};wp.prototype.bufferFixedPrecision=function(t){var e=new vp(new Pp(new Cc(1)),t.getScale()),r=new yp(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},wp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=wp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Vc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],i=wp.precisionScaleFactor(this._argGeom,this._distance,r),n=new Cc(i);this.bufferFixedPrecision(n)}},wp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Cc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},wp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},wp.prototype.bufferOriginalPrecision=function(){try{var t=new yp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $u))throw t;this._saveException=t}},wp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},wp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new wp(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof cl&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1],n=arguments[2],o=new wp(r);return o.setQuadrantSegments(n),o.getResultGeometry(i)}if(arguments[2]instanceof Dh&&arguments[0]instanceof cl&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new wp(s,u).getResultGeometry(a)}}else if(4===arguments.length){var l=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],f=new wp(l);return f.setQuadrantSegments(h),f.setEndCapStyle(p),f.getResultGeometry(c)}},wp.precisionScaleFactor=function(t,e,r){var i=t.getEnvelopeInternal(),n=Ru.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(n)/Math.log(10)+1);return Math.pow(10,o)},Ip.CAP_ROUND.get=function(){return Dh.CAP_ROUND},Ip.CAP_BUTT.get=function(){return Dh.CAP_FLAT},Ip.CAP_FLAT.get=function(){return Dh.CAP_FLAT},Ip.CAP_SQUARE.get=function(){return Dh.CAP_SQUARE},Ip.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(wp,Ip);var Lp=function(){this._pt=[new Eu,new Eu],this._distance=mu.NaN,this._isNull=!0};Lp.prototype.getCoordinates=function(){return this._pt},Lp.prototype.getCoordinate=function(t){return this._pt[t]},Lp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var i=e.distance(r);i<this._distance&&this.initialize(e,r,i)}},Lp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=n,this._isNull=!1}},Lp.prototype.getDistance=function(){return this._distance},Lp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var i=e.distance(r);i>this._distance&&this.initialize(e,r,i)}},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var Rp=function(){};Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.computeDistance=function(){if(arguments[2]instanceof Lp&&arguments[0]instanceof ac&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],r=arguments[2],i=t.getCoordinates(),n=new wh,o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof hc&&arguments[1]instanceof Eu){var a=arguments[0],u=arguments[1],l=arguments[2];Rp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Rp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof cl&&arguments[1]instanceof Eu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof ac)Rp.computeDistance(h,p,f);else if(h instanceof hc)Rp.computeDistance(h,p,f);else if(h instanceof $l)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Rp.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Lp&&arguments[0]instanceof wh&&arguments[1]instanceof Eu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var Mp=function(t){this._maxPtDist=new Lp,this._inputGeom=t||null},Ap={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Mp.prototype.computeMaxMidpointDistance=function(t){var e=new Np(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Mp.prototype.computeMaxVertexDistance=function(t){var e=new jp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Mp.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Mp.prototype.getDistancePoints=function(){return this._maxPtDist},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Ap.MaxPointDistanceFilter.get=function(){return jp},Ap.MaxMidpointDistanceFilter.get=function(){return Np},Object.defineProperties(Mp,Ap);var jp=function(t){this._maxPtDist=new Lp,this._minPtDist=new Lp,this._geom=t||null};jp.prototype.filter=function(t){this._minPtDist.initialize(),Rp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},jp.prototype.getMaxPointDistance=function(){return this._maxPtDist},jp.prototype.interfaces_=function(){return[fl]},jp.prototype.getClass=function(){return jp};var Np=function(t){this._maxPtDist=new Lp,this._minPtDist=new Lp,this._geom=t||null};Np.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),i=t.getCoordinate(e),n=new Eu((r.x+i.x)/2,(r.y+i.y)/2);this._minPtDist.initialize(),Rp.computeDistance(this._geom,n,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Np.prototype.isDone=function(){return!1},Np.prototype.isGeometryChanged=function(){return!1},Np.prototype.getMaxPointDistance=function(){return this._maxPtDist},Np.prototype.interfaces_=function(){return[Ql]},Np.prototype.getClass=function(){return Np};var Fp=function(t){this._comps=t||null};Fp.prototype.filter=function(t){t instanceof hc&&this._comps.add(t)},Fp.prototype.interfaces_=function(){return[Jl]},Fp.prototype.getClass=function(){return Fp},Fp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Fp.getPolygons(t,new Cl)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof hc?r.add(e):e instanceof $l&&e.apply(new Fp(r)),r}};var Dp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};Dp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof fc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof ac&&this._lines.add(t)},Dp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Dp.prototype.interfaces_=function(){return[ll]},Dp.prototype.getClass=function(){return Dp},Dp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Dp.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(Dp.getLines(e,r))}},Dp.getLines=function(){if(1===arguments.length){var t=arguments[0];return Dp.getLines(t,!1)}if(2===arguments.length){if(Lu(arguments[0],bl)&&Lu(arguments[1],bl)){for(var e=arguments[0],r=arguments[1],i=e.iterator();i.hasNext();){var n=i.next();Dp.getLines(n,r)}return r}if(arguments[0]instanceof cl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new Cl;return o.apply(new Dp(a,s)),a}if(arguments[0]instanceof cl&&Lu(arguments[1],bl)){var u=arguments[0],l=arguments[1];return u instanceof ac?l.add(u):u.apply(new Dp(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Lu(arguments[0],bl)&&Lu(arguments[1],bl)){for(var c=arguments[0],h=arguments[1],p=arguments[2],f=c.iterator();f.hasNext();){var d=f.next();Dp.getLines(d,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof cl&&Lu(arguments[1],bl)){var g=arguments[0],y=arguments[1],v=arguments[2];return g.apply(new Dp(y,v)),y}}};var kp=function(){if(this._boundaryRule=dl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new vu("Rule must be non-null");this._boundaryRule=t}};kp.prototype.locateInternal=function(){if(arguments[0]instanceof Eu&&arguments[1]instanceof hc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return wu.EXTERIOR;var r=e.getExteriorRing(),i=this.locateInPolygonRing(t,r);if(i===wu.EXTERIOR)return wu.EXTERIOR;if(i===wu.BOUNDARY)return wu.BOUNDARY;for(var n=0;n<e.getNumInteriorRing();n++){var o=e.getInteriorRingN(n),s=this.locateInPolygonRing(t,o);if(s===wu.INTERIOR)return wu.EXTERIOR;if(s===wu.BOUNDARY)return wu.BOUNDARY}return wu.INTERIOR}if(arguments[0]instanceof Eu&&arguments[1]instanceof ac){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return wu.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?al.isOnLine(a,l)?wu.INTERIOR:wu.EXTERIOR:wu.BOUNDARY}if(arguments[0]instanceof Eu&&arguments[1]instanceof lc){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?wu.INTERIOR:wu.EXTERIOR}},kp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?al.locatePointInRing(t,e.getCoordinates()):wu.EXTERIOR},kp.prototype.intersects=function(t,e){return this.locate(t,e)!==wu.EXTERIOR},kp.prototype.updateLocationInfo=function(t){t===wu.INTERIOR&&(this._isIn=!0),t===wu.BOUNDARY&&this._numBoundaries++},kp.prototype.computeLocation=function(t,e){var r=this;if(e instanceof lc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof ac)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof hc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof tc)for(var i=e,n=0;n<i.getNumGeometries();n++){var o=i.getGeometryN(n);r.updateLocationInfo(r.locateInternal(t,o))}else if(e instanceof dc)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);r.updateLocationInfo(r.locateInternal(t,u))}else if(e instanceof $l)for(var l=new tp(e);l.hasNext();){var c=l.next();c!==e&&r.computeLocation(t,c)}},kp.prototype.locate=function(t,e){return e.isEmpty()?wu.EXTERIOR:e instanceof ac||e instanceof hc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?wu.BOUNDARY:this._numBoundaries>0||this._isIn?wu.INTERIOR:wu.EXTERIOR)},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Gp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2];this._component=i,this._segIndex=n,this._pt=o}},Bp={INSIDE_AREA:{configurable:!0}};Gp.prototype.isInsideArea=function(){return this._segIndex===Gp.INSIDE_AREA},Gp.prototype.getCoordinate=function(){return this._pt},Gp.prototype.getGeometryComponent=function(){return this._component},Gp.prototype.getSegmentIndex=function(){return this._segIndex},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Bp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Gp,Bp);var Up=function(t){this._pts=t||null};Up.prototype.filter=function(t){t instanceof lc&&this._pts.add(t)},Up.prototype.interfaces_=function(){return[Jl]},Up.prototype.getClass=function(){return Up},Up.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof lc?fh.singletonList(t):Up.getPoints(t,new Cl)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof lc?r.add(e):e instanceof $l&&e.apply(new Up(r)),r}};var Vp=function(){this._locations=null;var t=arguments[0];this._locations=t};Vp.prototype.filter=function(t){(t instanceof lc||t instanceof ac||t instanceof hc)&&this._locations.add(new Gp(t,0,t.getCoordinate()))},Vp.prototype.interfaces_=function(){return[Jl]},Vp.prototype.getClass=function(){return Vp},Vp.getLocations=function(t){var e=new Cl;return t.apply(new Vp(e)),e};var zp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new kp,this._minDistanceLocation=null,this._minDistance=mu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=n}};zp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var r=arguments[0],i=arguments[1],n=1-r,o=Fp.getPolygons(this._geom[r]);if(o.size()>0){var s=Vp.getLocations(this._geom[n]);if(this.computeContainmentDistance(s,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=i[0],this._minDistanceLocation[r]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Lu(arguments[0],Ol)&&Lu(arguments[1],Ol)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),p=0;p<u.size();p++)if(t.computeContainmentDistance(h,u.get(p),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Gp&&arguments[1]instanceof hc){var f=arguments[0],d=arguments[1],g=arguments[2],y=f.getCoordinate();if(wu.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=f,g[1]=new Gp(d,y),null}},zp.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var i=this,n=0;n<t.size();n++)for(var o=t.get(n),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,r),i._minDistance<=i._terminateDistance)return null}},zp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Dp.getLines(this._geom[0]),r=Dp.getLines(this._geom[1]),i=Up.getPoints(this._geom[0]),n=Up.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,n,t),void this.updateMinDistance(t,!1))))},zp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},zp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},zp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},zp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ac&&arguments[1]instanceof lc){var e=arguments[0],r=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var n=e.getCoordinates(),o=r.getCoordinate(),s=0;s<n.length-1;s++){var a=al.distancePointLine(o,n[s],n[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new wh(n[s],n[s+1]).closestPoint(o);i[0]=new Gp(e,s,u),i[1]=new Gp(r,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ac&&arguments[1]instanceof ac){var l=arguments[0],c=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=l.getCoordinates(),f=c.getCoordinates(),d=0;d<p.length-1;d++)for(var g=0;g<f.length-1;g++){var y=al.distanceLineLine(p[d],p[d+1],f[g],f[g+1]);if(y<t._minDistance){t._minDistance=y;var v=new wh(p[d],p[d+1]),m=new wh(f[g],f[g+1]),_=v.closestPoints(m);h[0]=new Gp(l,d,_[0]),h[1]=new Gp(c,g,_[1])}if(t._minDistance<=t._terminateDistance)return null}}},zp.prototype.computeMinDistancePoints=function(t,e,r){for(var i=this,n=0;n<t.size();n++)for(var o=t.get(n),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<i._minDistance&&(i._minDistance=u,r[0]=new Gp(o,0,o.getCoordinate()),r[1]=new Gp(a,0,a.getCoordinate())),i._minDistance<=i._terminateDistance)return null}},zp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new vu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},zp.prototype.computeMinDistanceLines=function(t,e,r){for(var i=this,n=0;n<t.size();n++)for(var o=t.get(n),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,r),i._minDistance<=i._terminateDistance)return null}},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp},zp.distance=function(t,e){return new zp(t,e).distance()},zp.isWithinDistance=function(t,e,r){return new zp(t,e,r).distance()<=r},zp.nearestPoints=function(t,e){return new zp(t,e).nearestPoints()};var Wp=function(){this._pt=[new Eu,new Eu],this._distance=mu.NaN,this._isNull=!0};Wp.prototype.getCoordinates=function(){return this._pt},Wp.prototype.getCoordinate=function(t){return this._pt[t]},Wp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var i=e.distance(r);i<this._distance&&this.initialize(e,r,i)}},Wp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=n,this._isNull=!1}},Wp.prototype.toString=function(){return Qu.toLineString(this._pt[0],this._pt[1])},Wp.prototype.getDistance=function(){return this._distance},Wp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var i=e.distance(r);i>this._distance&&this.initialize(e,r,i)}},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp};var Yp=function(){};Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.computeDistance=function(){if(arguments[2]instanceof Wp&&arguments[0]instanceof ac&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],r=arguments[2],i=new wh,n=t.getCoordinates(),o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var s=i.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Wp&&arguments[0]instanceof hc&&arguments[1]instanceof Eu){var a=arguments[0],u=arguments[1],l=arguments[2];Yp.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Yp.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Wp&&arguments[0]instanceof cl&&arguments[1]instanceof Eu){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof ac)Yp.computeDistance(h,p,f);else if(h instanceof hc)Yp.computeDistance(h,p,f);else if(h instanceof $l)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Yp.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Wp&&arguments[0]instanceof wh&&arguments[1]instanceof Eu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var Xp=function(){this._g0=null,this._g1=null,this._ptDist=new Wp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Zp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Xp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Xp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new vu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Xp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Xp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Xp.prototype.computeOrientedDistance=function(t,e,r){var i=new Hp(e);if(t.apply(i),r.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var n=new qp(e,this._densifyFrac);t.apply(n),r.setMaximum(n.getMaxPointDistance())}},Xp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Xp(t,e).distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2],o=new Xp(r,i);return o.setDensifyFraction(n),o.distance()}},Zp.MaxPointDistanceFilter.get=function(){return Hp},Zp.MaxDensifiedByFractionDistanceFilter.get=function(){return qp},Object.defineProperties(Xp,Zp);var Hp=function(){this._maxPtDist=new Wp,this._minPtDist=new Wp,this._euclideanDist=new Yp,this._geom=null;var t=arguments[0];this._geom=t};Hp.prototype.filter=function(t){this._minPtDist.initialize(),Yp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Hp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Hp.prototype.interfaces_=function(){return[fl]},Hp.prototype.getClass=function(){return Hp};var qp=function(){this._maxPtDist=new Wp,this._minPtDist=new Wp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};qp.prototype.filter=function(t,e){var r=this;if(0===e)return null;for(var i=t.getCoordinate(e-1),n=t.getCoordinate(e),o=(n.x-i.x)/this._numSubSegs,s=(n.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=i.x+a*o,l=i.y+a*s,c=new Eu(u,l);r._minPtDist.initialize(),Yp.computeDistance(r._geom,c,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}},qp.prototype.isDone=function(){return!1},qp.prototype.isGeometryChanged=function(){return!1},qp.prototype.getMaxPointDistance=function(){return this._maxPtDist},qp.prototype.interfaces_=function(){return[Ql]},qp.prototype.getClass=function(){return qp};var Kp=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},Jp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Kp.prototype.checkMaximumDistance=function(t,e,r){var i=new Xp(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var n=i.getCoordinates();this._errorLocation=n[1],this._errorIndicator=t.getFactory().createLineString(n),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Qu.toLineString(n[0],n[1])+")"}},Kp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Kp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Kp.VERBOSE&&Wu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Kp.prototype.checkNegativeValid=function(){if(!(this._input instanceof hc||this._input instanceof dc||this._input instanceof $l))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Kp.prototype.getErrorIndicator=function(){return this._errorIndicator},Kp.prototype.checkMinimumDistance=function(t,e,r){var i=new zp(t,e,r);if(this._minDistanceFound=i.distance(),this._minDistanceFound<r){this._isValid=!1;var n=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(n),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Qu.toLineString(n[0],n[1])+" )"}},Kp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Kp.prototype.getErrorLocation=function(){return this._errorLocation},Kp.prototype.getPolygonLines=function(t){for(var e=new Cl,r=new Dp(e),i=Fp.getPolygons(t).iterator();i.hasNext();)i.next().apply(r);return t.getFactory().buildGeometry(e)},Kp.prototype.getErrorMessage=function(){return this._errMsg},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp},Jp.VERBOSE.get=function(){return!1},Jp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Kp,Jp);var Qp=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},$p={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Qp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Qp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Qp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Xu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new Xu(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},Qp.prototype.checkDistance=function(){var t=new Kp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Qp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Qp.prototype.checkPolygonal=function(){this._result instanceof hc||this._result instanceof dc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Qp.prototype.getErrorIndicator=function(){return this._errorIndicator},Qp.prototype.getErrorLocation=function(){return this._errorLocation},Qp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Qp.prototype.report=function(t){if(!Qp.VERBOSE)return null;Wu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Qp.prototype.getErrorMessage=function(){return this._errorMsg},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.isValidMsg=function(t,e,r){var i=new Qp(t,e,r);return i.isValid()?null:i.getErrorMessage()},Qp.isValid=function(t,e,r){return!!new Qp(t,e,r).isValid()},$p.VERBOSE.get=function(){return!1},$p.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Qp,$p);var tf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};tf.prototype.getCoordinates=function(){return this._pts},tf.prototype.size=function(){return this._pts.length},tf.prototype.getCoordinate=function(t){return this._pts[t]},tf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},tf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Eh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},tf.prototype.setData=function(t){this._data=t},tf.prototype.getData=function(){return this._data},tf.prototype.toString=function(){return Qu.toLineString(new bc(this._pts))},tf.prototype.interfaces_=function(){return[Ch]},tf.prototype.getClass=function(){return tf};var ef=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Cl,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};ef.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ef.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},ef.prototype.getIntersectionSegments=function(){return this._intSegments},ef.prototype.count=function(){return this._intersectionCount},ef.prototype.getIntersections=function(){return this._intersections},ef.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ef.prototype.setKeepIntersections=function(t){this._keepIntersections=t},ef.prototype.processIntersections=function(t,e,r,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(r,i))return null;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[i],a=r.getCoordinates()[i+1];this._li.computeIntersection(n,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=n,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ef.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},ef.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ef.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ef.prototype.interfaces_=function(){return[ap]},ef.prototype.getClass=function(){return ef},ef.createAllIntersectionsFinder=function(t){var e=new ef(t);return e.setFindAllIntersections(!0),e},ef.createAnyIntersectionFinder=function(t){return new ef(t)},ef.createIntersectionCounter=function(t){var e=new ef(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var rf=function(){this._li=new nl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};rf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},rf.prototype.getIntersections=function(){return this._segInt.getIntersections()},rf.prototype.isValid=function(){return this.execute(),this._isValid},rf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},rf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ef(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Nh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},rf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Vc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},rf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Qu.toLineString(t[0],t[1])+" and "+Qu.toLineString(t[2],t[3])},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.computeIntersections=function(t){var e=new rf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var nf=function t(){this._nv=null;var e=arguments[0];this._nv=new rf(t.toSegmentStrings(e))};nf.prototype.checkValid=function(){this._nv.checkValid()},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.toSegmentStrings=function(t){for(var e=new Cl,r=t.iterator();r.hasNext();){var i=r.next();e.add(new tf(i.getCoordinates(),i))}return e},nf.checkValid=function(t){new nf(t).checkValid()};var of=function(t){this._mapOp=t};of.prototype.map=function(t){for(var e=new Cl,r=0;r<t.getNumGeometries();r++){var i=this._mapOp.map(t.getGeometryN(r));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Ic.toGeometryArray(e))},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},of.map=function(t,e){return new of(e).map(t)};var sf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Cl,this._resultLineList=new Cl;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};sf.prototype.collectLines=function(t){for(var e=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next();e.collectLineEdge(i,t,e._lineEdgesList),e.collectBoundaryTouchEdge(i,t,e._lineEdgesList)}},sf.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},sf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},sf.prototype.collectLineEdge=function(t,e,r){var i=t.getLabel(),n=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Bf.isResultOfOp(i,e)||n.isCovered()||(r.add(n),t.setVisitedEdge(!0)))},sf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),i=r.getEdge();if(r.isLineEdge()&&!i.isCoveredSet()){var n=this._op.isCoveredByA(r.getCoordinate());i.setCovered(n)}}},sf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},sf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),i=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(i),r.setInResult(!0)}},sf.prototype.collectBoundaryTouchEdge=function(t,e,r){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(el.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Bf.isResultOfOp(i,e)&&e===Bf.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf};var af=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Cl;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};af.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},af.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==Bf.INTERSECTION)){var i=r.getLabel();Bf.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(r)}}},af.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af};var uf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};uf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},uf.prototype.transformPolygon=function(t,e){var r=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof fc&&!i.isEmpty()||(r=!1);for(var n=new Cl,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof fc||(r=!1),n.add(s))}if(r)return this._factory.createPolygon(i,n.toArray([]));var a=new Cl;return null!==i&&a.add(i),a.addAll(n),this._factory.buildGeometry(a)},uf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},uf.prototype.getInputGeometry=function(){return this._inputGeom},uf.prototype.transformMultiLineString=function(t,e){for(var r=new Cl,i=0;i<t.getNumGeometries();i++){var n=this.transformLineString(t.getGeometryN(i),t);null!==n&&(n.isEmpty()||r.add(n))}return this._factory.buildGeometry(r)},uf.prototype.transformCoordinates=function(t,e){return this.copy(t)},uf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},uf.prototype.transformMultiPoint=function(t,e){for(var r=new Cl,i=0;i<t.getNumGeometries();i++){var n=this.transformPoint(t.getGeometryN(i),t);null!==n&&(n.isEmpty()||r.add(n))}return this._factory.buildGeometry(r)},uf.prototype.transformMultiPolygon=function(t,e){for(var r=new Cl,i=0;i<t.getNumGeometries();i++){var n=this.transformPolygon(t.getGeometryN(i),t);null!==n&&(n.isEmpty()||r.add(n))}return this._factory.buildGeometry(r)},uf.prototype.copy=function(t){return t.copy()},uf.prototype.transformGeometryCollection=function(t,e){for(var r=new Cl,i=0;i<t.getNumGeometries();i++){var n=this.transform(t.getGeometryN(i));null!==n&&(this._pruneEmptyGeometry&&n.isEmpty()||r.add(n))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Ic.toGeometryArray(r)):this._factory.buildGeometry(r)},uf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof lc)return this.transformPoint(t,null);if(t instanceof pc)return this.transformMultiPoint(t,null);if(t instanceof fc)return this.transformLinearRing(t,null);if(t instanceof ac)return this.transformLineString(t,null);if(t instanceof tc)return this.transformMultiLineString(t,null);if(t instanceof hc)return this.transformPolygon(t,null);if(t instanceof dc)return this.transformMultiPolygon(t,null);if(t instanceof $l)return this.transformGeometryCollection(t,null);throw new vu("Unknown Geometry subtype: "+t.getClass().getName())},uf.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var i=r.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var lf=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new wh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ac&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=n}};lf.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),i=0;i<r;i++){var n=t.get(i),o=this.findSnapForVertex(n,e);null!==o&&(t.set(i,new Eu(o)),0===i&&this._isClosed&&t.set(t.size()-1,new Eu(o)))}},lf.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},lf.prototype.snapTo=function(t){var e=new Pl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},lf.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var i=0;i<r;i++){var n=e[i],o=this.findSegmentIndexToSnap(n,t);o>=0&&t.add(o+1,new Eu(n),!1)}},lf.prototype.findSegmentIndexToSnap=function(t,e){for(var r=this,i=mu.MAX_VALUE,n=-1,o=0;o<e.size()-1;o++){if(r._seg.p0=e.get(o),r._seg.p1=e.get(o+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var s=r._seg.distance(t);s<r._snapTolerance&&s<i&&(i=s,n=o)}return n},lf.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},lf.prototype.interfaces_=function(){return[]},lf.prototype.getClass=function(){return lf},lf.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var cf=function(t){this._srcGeom=t||null},hf={SNAP_PRECISION_FACTOR:{configurable:!0}};cf.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new pf(e,r).transform(this._srcGeom)},cf.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),i=new pf(t,r,!0).transform(this._srcGeom),n=i;return e&&Lu(n,cc)&&(n=i.buffer(0)),n},cf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},cf.prototype.extractTargetCoordinates=function(t){for(var e=new Xl,r=t.getCoordinates(),i=0;i<r.length;i++)e.add(r[i]);return e.toArray(new Array(0).fill(null))},cf.prototype.computeMinimumSegmentLength=function(t){for(var e=mu.MAX_VALUE,r=0;r<t.length-1;r++){var i=t[r].distance(t[r+1]);i<e&&(e=i)}return e},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.snap=function(t,e,r){var i=new Array(2).fill(null),n=new cf(t);i[0]=n.snapTo(e,r);var o=new cf(e);return i[1]=o.snapTo(i[0],r),i},cf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=cf.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===Cc.FIXED){var i=1/r.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var n=arguments[0],o=arguments[1];return Math.min(cf.computeOverlaySnapTolerance(n),cf.computeOverlaySnapTolerance(o))}},cf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*cf.SNAP_PRECISION_FACTOR},cf.snapToSelf=function(t,e,r){return new cf(t).snapToSelf(e,r)},hf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(cf,hf);var pf=function(t){function e(e,r,i){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new lf(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),i=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uf),ff=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ff.prototype.getCommon=function(){return mu.longBitsToDouble(this._commonBits)},ff.prototype.add=function(t){var e=mu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=ff.signExpBits(this._commonBits),this._isFirst=!1,null):ff.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ff.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=ff.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ff.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=mu.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+mu.toBinaryString(t),i=r.substring(r.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.getBit=function(t,e){return 0!=(t&1<<e)?1:0},ff.signExpBits=function(t){return t>>52},ff.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},ff.numCommonMostSigMantissaBits=function(t,e){for(var r=0,i=52;i>=0;i--){if(ff.getBit(t,i)!==ff.getBit(e,i))return r;r++}return 52};var df=function(){this._commonCoord=null,this._ccFilter=new yf},gf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};df.prototype.addCommonBits=function(t){var e=new vf(this._commonCoord);t.apply(e),t.geometryChanged()},df.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Eu(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new vf(e);return t.apply(r),t.geometryChanged(),t},df.prototype.getCommonCoordinate=function(){return this._commonCoord},df.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},gf.CommonCoordinateFilter.get=function(){return yf},gf.Translater.get=function(){return vf},Object.defineProperties(df,gf);var yf=function(){this._commonBitsX=new ff,this._commonBitsY=new ff};yf.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},yf.prototype.getCommonCoordinate=function(){return new Eu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},yf.prototype.interfaces_=function(){return[fl]},yf.prototype.getClass=function(){return yf};var vf=function(){this.trans=null;var t=arguments[0];this.trans=t};vf.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,i)},vf.prototype.isDone=function(){return!1},vf.prototype.isGeometryChanged=function(){return!0},vf.prototype.interfaces_=function(){return[Ql]},vf.prototype.getClass=function(){return vf};var mf=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};mf.prototype.selfSnap=function(t){return new cf(t).snapTo(t,this._snapTolerance)},mf.prototype.removeCommonBits=function(t){this._cbr=new df,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},mf.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},mf.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=Bf.overlayOp(e[0],e[1],t);return this.prepareResult(r)},mf.prototype.checkValid=function(t){t.isValid()||Wu.out.println("Snapped geometry is invalid")},mf.prototype.computeSnapTolerance=function(){this._snapTolerance=cf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},mf.prototype.snap=function(t){var e=this.removeCommonBits(t);return cf.snap(e[0],e[1],this._snapTolerance)},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},mf.overlayOp=function(t,e,r){return new mf(t,e).getResultGeometry(r)},mf.union=function(t,e){return mf.overlayOp(t,e,Bf.UNION)},mf.intersection=function(t,e){return mf.overlayOp(t,e,Bf.INTERSECTION)},mf.symDifference=function(t,e){return mf.overlayOp(t,e,Bf.SYMDIFFERENCE)},mf.difference=function(t,e){return mf.overlayOp(t,e,Bf.DIFFERENCE)};var _f=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};_f.prototype.getResultGeometry=function(t){var e=null,r=!1,i=null;try{e=Bf.overlayOp(this._geom[0],this._geom[1],t),r=!0}catch(t){if(!(t instanceof $u))throw t;i=t}if(!r)try{e=mf.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $u?i:t}return e},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.overlayOp=function(t,e,r){return new _f(t,e).getResultGeometry(r)},_f.union=function(t,e){return _f.overlayOp(t,e,Bf.UNION)},_f.intersection=function(t,e){return _f.overlayOp(t,e,Bf.INTERSECTION)},_f.symDifference=function(t,e){return _f.overlayOp(t,e,Bf.SYMDIFFERENCE)},_f.difference=function(t,e){return _f.overlayOp(t,e,Bf.DIFFERENCE)};var bf=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};bf.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var Sf=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=n,this._obj=o}},xf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Sf.prototype.isDelete=function(){return this._eventType===Sf.DELETE},Sf.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Sf.prototype.getObject=function(){return this._obj},Sf.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Sf.prototype.getInsertEvent=function(){return this._insertEvent},Sf.prototype.isInsert=function(){return this._eventType===Sf.INSERT},Sf.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Sf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Sf.prototype.interfaces_=function(){return[bu]},Sf.prototype.getClass=function(){return Sf},xf.INSERT.get=function(){return 1},xf.DELETE.get=function(){return 2},Object.defineProperties(Sf,xf);var Of=function(){};Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of};var Ef=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};Ef.prototype.isTrivialIntersection=function(t,e,r,i){if(t===r&&1===this._li.getIntersectionNum()){if(Ef.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var n=t.getNumPoints()-1;if(0===e&&i===n||0===i&&e===n)return!0}}return!1},Ef.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ef.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Ef.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ef.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var i=r.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},Ef.prototype.hasProperIntersection=function(){return this._hasProper},Ef.prototype.hasIntersection=function(){return this._hasIntersection},Ef.prototype.isDone=function(){return this._isDone},Ef.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Ef.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Ef.prototype.addIntersections=function(t,e,r,i){if(t===r&&e===i)return null;this.numTests++;var n=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[i],a=r.getCoordinates()[i+1];this._li.computeIntersection(n,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Cf=function(t){function e(){t.call(this),this.events=new Cl,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){fh.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Ef&&Lu(arguments[0],Ol)&&Lu(arguments[1],Ol)){var i=arguments[0],n=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(n,n),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Lu(arguments[0],Ol)&&arguments[1]instanceof Ef){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),i=r.getStartIndexes(),n=0;n<i.length-1;n++){var o=new bf(r,n),s=new Sf(e,r.getMinX(n),o);this.events.add(s),this.events.add(new Sf(r.getMaxX(n),s))}},e.prototype.processOverlaps=function(t,e,r,i){for(var n=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(n.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1],n=r.iterator();n.hasNext();){var o=n.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Of),Tf=function(){this._min=mu.POSITIVE_INFINITY,this._max=mu.NEGATIVE_INFINITY},Pf={NodeComparator:{configurable:!0}};Tf.prototype.getMin=function(){return this._min},Tf.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Tf.prototype.getMax=function(){return this._max},Tf.prototype.toString=function(){return Qu.toLineString(new Eu(this._min,0),new Eu(this._max,0))},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Pf.NodeComparator.get=function(){return wf},Object.defineProperties(Tf,Pf);var wf=function(){};wf.prototype.compare=function(t,e){var r=t,i=e,n=(r._min+r._max)/2,o=(i._min+i._max)/2;return n<o?-1:n>o?1:0},wf.prototype.interfaces_=function(){return[xu]},wf.prototype.getClass=function(){return wf};var If=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],i=arguments[2];this._min=e,this._max=r,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tf),Lf=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tf),Rf=function(){this._leaves=new Cl,this._root=null,this._level=0};Rf.prototype.buildTree=function(){fh.sort(this._leaves,new Tf.NodeComparator);for(var t=this._leaves,e=null,r=new Cl;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},Rf.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new If(t,e,r))},Rf.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},Rf.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Rf.prototype.printNode=function(t){Wu.out.println(Qu.toLineString(new Eu(t._min,this._level),new Eu(t._max,this._level)))},Rf.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Rf.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var i=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(i);else{var n=new Lf(t.get(r),t.get(r+1));e.add(n)}}},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf};var Mf=function(){this._items=new Cl};Mf.prototype.visitItem=function(t){this._items.add(t)},Mf.prototype.getItems=function(){return this._items},Mf.prototype.interfaces_=function(){return[lh]},Mf.prototype.getClass=function(){return Mf};var Af=function(){this._index=null;var t=arguments[0];if(!Lu(t,cc))throw new vu("Argument must be Polygonal");this._index=new Ff(t)},jf={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Af.prototype.locate=function(t){var e=new sl(t),r=new Nf(e);return this._index.query(t.y,t.y,r),e.getLocation()},Af.prototype.interfaces_=function(){return[$h]},Af.prototype.getClass=function(){return Af},jf.SegmentVisitor.get=function(){return Nf},jf.IntervalIndexedGeometry.get=function(){return Ff},Object.defineProperties(Af,jf);var Nf=function(){this._counter=null;var t=arguments[0];this._counter=t};Nf.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Nf.prototype.interfaces_=function(){return[lh]},Nf.prototype.getClass=function(){return Nf};var Ff=function(){this._index=new Rf;var t=arguments[0];this.init(t)};Ff.prototype.init=function(t){for(var e=Dp.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},Ff.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new wh(t[e-1],t[e]),i=Math.min(r.p0.y,r.p1.y),n=Math.max(r.p0.y,r.p1.y);this._index.insert(i,n,r)}},Ff.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Mf;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2];this._index.query(i,n,o)}},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff};var Df=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Ec,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new kp,2===arguments.length){var e=arguments[0],r=arguments[1],i=dl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=i,null!==r&&this.add(r)}else if(3===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=n,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var i=this._nodes.addNode(r).getLabel(),n=1;i.getLocation(t,Dc.ON)===wu.BOUNDARY&&n++;var o=e.determineBoundary(this._boundaryNodeRule,n);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],i=arguments[1],n=arguments[2],o=new Ef(r,!0,!1);o.setIsDoneIfProperInt(n);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof fc||this._parentGeom instanceof hc||this._parentGeom instanceof dc,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,r){var i=new Ef(e,r,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof lc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,wu.INTERIOR)}else if(arguments[0]instanceof Eu){var e=arguments[0];this.insertPoint(this._argIndex,e,wu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),wu.EXTERIOR,wu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,wu.INTERIOR,wu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],wu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],wu.BOUNDARY)},e.prototype.addLineString=function(t){var e=wl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new gp(e,new Xc(this._argIndex,wu.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),el.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,i=t.iterator();i.hasNext();){var n=i.next();e[r++]=n.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===wu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var i=wl.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var n=e,o=r;al.isCCW(i)&&(n=r,o=e);var s=new gp(i,new Xc(this._argIndex,wu.BOUNDARY,n,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],wu.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var i=this._nodes.addNode(e),n=i.getLabel();null===n?i._label=new Xc(t,r):n.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new Cf},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),i=r.getLabel().getLocation(t),n=r.eiList.iterator();n.hasNext();){var o=n.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof dc&&(this._useBoundaryDeterminationRule=!1),e instanceof hc)this.addPolygon(e);else if(e instanceof ac)this.addLineString(e);else if(e instanceof lc)this.addPoint(e);else if(e instanceof pc)this.addCollection(e);else if(e instanceof tc)this.addCollection(e);else if(e instanceof dc)this.addCollection(e);else{if(!(e instanceof $l))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return Lu(this._parentGeom,cc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Af(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?wu.BOUNDARY:wu.INTERIOR},e}(nh),kf=function(){if(this._li=new nl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Df(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],i=dl.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Df(0,e,i),this._arg[1]=new Df(1,r,i)}else if(3===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2];n.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Df(0,n,s),this._arg[1]=new Df(1,o,s)}};kf.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},kf.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf};var Gf=function(){};Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Gf.map=function(){if(arguments[0]instanceof cl&&Lu(arguments[1],Gf.MapOp)){for(var t=arguments[0],e=arguments[1],r=new Cl,i=0;i<t.getNumGeometries();i++){var n=e.map(t.getGeometryN(i));null!==n&&r.add(n)}return t.getFactory().buildGeometry(r)}if(Lu(arguments[0],bl)&&Lu(arguments[1],Gf.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Cl,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Gf.MapOp=function(){};var Bf=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new kp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new sp,this._resultPolyList=new Cl,this._resultLineList=new Cl,this._resultPointList=new Cl,this._graph=new nh(new np),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Xc(t.getLabel())).flip();var n=e.getDepth();n.isNull()&&n.add(r),n.add(i),r.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,i,n){var o=new Cl;return o.addAll(t),o.addAll(r),o.addAll(i),o.isEmpty()?e.createEmptyResult(n,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var i=r.next();if(this._ptLocator.locate(t,i)!==wu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Cl,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Cl;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),nf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new oh(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var i=new sf(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var n=new af(this,this._geomFact,this._ptLocator);this._resultPointList=n.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),n=i.getLabel();n.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(n.getLocation(0,Dc.RIGHT),n.getLocation(1,Dc.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var n=0;n<2;n++)r.isNull(n)||!r.isArea()||i.isNull(n)||(0===i.getDelta(n)?r.toLine(n):(el.isTrue(!i.isNull(n,Dc.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(n,Dc.LEFT,i.getLocation(n,Dc.LEFT)),el.isTrue(!i.isNull(n,Dc.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(n,Dc.RIGHT,i.getLocation(n,Dc.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kf);Bf.overlayOp=function(t,e,r){return new Bf(t,e).getResultGeometry(r)},Bf.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Bf.createEmptyResult(Bf.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return of.map(t,{interfaces_:function(){return[Gf.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),_f.overlayOp(t,e,Bf.INTERSECTION)},Bf.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bf.createEmptyResult(Bf.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),_f.overlayOp(t,e,Bf.SYMDIFFERENCE)},Bf.resultDimension=function(t,e,r){var i=e.getDimension(),n=r.getDimension(),o=-1;switch(t){case Bf.INTERSECTION:o=Math.min(i,n);break;case Bf.UNION:o=Math.max(i,n);break;case Bf.DIFFERENCE:o=i;break;case Bf.SYMDIFFERENCE:o=Math.max(i,n)}return o},Bf.createEmptyResult=function(t,e,r,i){var n=null;switch(Bf.resultDimension(t,e,r)){case-1:n=i.createGeometryCollection(new Array(0).fill(null));break;case 0:n=i.createPoint();break;case 1:n=i.createLineString();break;case 2:n=i.createPolygon()}return n},Bf.difference=function(t,e){return t.isEmpty()?Bf.createEmptyResult(Bf.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),_f.overlayOp(t,e,Bf.DIFFERENCE))},Bf.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),i=t.getLocation(1);return Bf.isResultOfOp(r,i,e)}if(3===arguments.length){var n=arguments[0],o=arguments[1],s=arguments[2];switch(n===wu.BOUNDARY&&(n=wu.INTERIOR),o===wu.BOUNDARY&&(o=wu.INTERIOR),s){case Bf.INTERSECTION:return n===wu.INTERIOR&&o===wu.INTERIOR;case Bf.UNION:return n===wu.INTERIOR||o===wu.INTERIOR;case Bf.DIFFERENCE:return n===wu.INTERIOR&&o!==wu.INTERIOR;case Bf.SYMDIFFERENCE:return n===wu.INTERIOR&&o!==wu.INTERIOR||n!==wu.INTERIOR&&o===wu.INTERIOR}return!1}},Bf.INTERSECTION=1,Bf.UNION=2,Bf.DIFFERENCE=3,Bf.SYMDIFFERENCE=4;var Uf=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new kp,this._seg=new wh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Uf.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,r=0;r<this._linework.getNumGeometries();r++)for(var i=e._linework.getGeometryN(r).getCoordinateSequence(),n=0;n<i.size()-1;n++)if(i.getCoordinate(n,e._seg.p0),i.getCoordinate(n+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Uf.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?wu.BOUNDARY:this._ptLocator.locate(t,this._g)},Uf.prototype.extractLinework=function(t){var e=new Vf;t.apply(e);var r=e.getLinework(),i=Ic.toLineStringArray(r);return t.getFactory().createMultiLineString(i)},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var Vf=function(){this._linework=null,this._linework=new Cl};Vf.prototype.getLinework=function(){return this._linework},Vf.prototype.filter=function(t){if(t instanceof hc){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},Vf.prototype.interfaces_=function(){return[Jl]},Vf.prototype.getClass=function(){return Vf};var zf=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};zf.prototype.extractPoints=function(t,e,r){for(var i=t.getCoordinates(),n=0;n<i.length-1;n++)this.computeOffsetPoints(i[n],i[n+1],e,r)},zf.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},zf.prototype.getPoints=function(t){for(var e=new Cl,r=Dp.getLines(this._g).iterator();r.hasNext();){var i=r.next();this.extractPoints(i,t,e)}return e},zf.prototype.computeOffsetPoints=function(t,e,r,i){var n=e.x-t.x,o=e.y-t.y,s=Math.sqrt(n*n+o*o),a=r*n/s,u=r*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Eu(l-u,c+a);i.add(h)}if(this._doRight){var p=new Eu(l+u,c-a);i.add(p)}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf};var Wf=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Cl;var e=arguments[0],r=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,i],this._locFinder=[new Uf(this._geom[0],this._boundaryDistanceTolerance),new Uf(this._geom[1],this._boundaryDistanceTolerance),new Uf(this._geom[2],this._boundaryDistanceTolerance)]},Yf={TOLERANCE:{configurable:!0}};Wf.prototype.reportResult=function(t,e,r){Wu.out.println("Overlay result invalid - A:"+wu.toLocationSymbol(e[0])+" B:"+wu.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+wu.toLocationSymbol(e[2]))},Wf.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Wf.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],r=0;r<this._testCoords.size();r++){var i=t._testCoords.get(r);if(!t.checkValid(e,i))return t._invalidLocation=i,!1}return!0}if(2===arguments.length){var n=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Wf.hasLocation(this._location,wu.BOUNDARY)||this.isValidResult(n,this._location)}},Wf.prototype.addTestPts=function(t){var e=new zf(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Wf.prototype.isValidResult=function(t,e){var r=Bf.isResultOfOp(e[0],e[1],t),i=!(r^e[2]===wu.INTERIOR);return i||this.reportResult(t,e,r),i},Wf.prototype.getInvalidLocation=function(){return this._invalidLocation},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},Wf.computeBoundaryDistanceTolerance=function(t,e){return Math.min(cf.computeSizeBasedSnapTolerance(t),cf.computeSizeBasedSnapTolerance(e))},Wf.isValid=function(t,e,r,i){return new Wf(t,e,i).isValid(r)},Yf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Wf,Yf);var Xf=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Xf.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);this._skipEmpty&&i.isEmpty()||e.add(i)}},Xf.prototype.combine=function(){for(var t=new Cl,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Xf.combine=function(){if(1===arguments.length){var t=arguments[0];return new Xf(t).combine()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new Xf(Xf.createList(e,r)).combine()}if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2];return new Xf(Xf.createList(i,n,o)).combine()}},Xf.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Xf.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Cl;return r.add(t),r.add(e),r}if(3===arguments.length){var i=arguments[0],n=arguments[1],o=arguments[2],s=new Cl;return s.add(i),s.add(n),s.add(o),s}};var Zf=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Cl)},Hf={STRTREE_NODE_CAPACITY:{configurable:!0}};Zf.prototype.reduceToGeometries=function(t){for(var e=new Cl,r=t.iterator();r.hasNext();){var i=r.next(),n=null;Lu(i,Ol)?n=this.unionTree(i):i instanceof cl&&(n=i),e.add(n)}return e},Zf.prototype.extractByEnvelope=function(t,e,r){for(var i=new Cl,n=0;n<e.getNumGeometries();n++){var o=e.getGeometryN(n);o.getEnvelopeInternal().intersects(t)?i.add(o):r.add(o)}return this._geomFactory.buildGeometry(i)},Zf.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!r.intersects(i))return Xf.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var n=r.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,n)},Zf.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new _h(Zf.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Zf.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],i=arguments[2];if(i-r<=1){var n=Zf.getGeometry(e,r);return this.unionSafe(n,null)}if(i-r==2)return this.unionSafe(Zf.getGeometry(e,r),Zf.getGeometry(e,r+1));var o=Math.trunc((i+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Zf.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var i=r.next();e=null===e?i.copy():e.union(i)}return e},Zf.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Zf.prototype.unionActual=function(t,e){return Zf.restrictToPolygons(t.union(e))},Zf.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Zf.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var i=new Cl,n=this.extractByEnvelope(r,t,i),o=this.extractByEnvelope(r,e,i),s=this.unionActual(n,o);return i.add(s),Xf.combine(i)},Zf.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().createGeometryCollection([e,r]).buffer(0)}},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.restrictToPolygons=function(t){if(Lu(t,cc))return t;var e=Fp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Ic.toPolygonArray(e))},Zf.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Zf.union=function(t){return new Zf(t).union()},Hf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Zf,Hf);var qf=function(){};function Kf(){return new Jf}function Jf(){this.reset()}qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},qf.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bf.createEmptyResult(Bf.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),_f.overlayOp(t,e,Bf.UNION)},Jf.prototype={constructor:Jf,reset:function(){this.s=this.t=0},add:function(t){$f(Qf,t,this.t),$f(this,Qf.s,this.s),this.s?this.t+=Qf.t:this.s=Qf.t},valueOf:function(){return this.s}};var Qf=new Jf;function $f(t,e,r){var i=t.s=e+r,n=i-e,o=i-n;t.t=e-o+(r-n)}var td=1e-6,ed=Math.PI,rd=ed/2,id=ed/4,nd=2*ed,od=180/ed,sd=ed/180,ad=Math.abs,ud=Math.atan,ld=Math.atan2,cd=Math.cos,hd=Math.sin,pd=Math.sqrt;function fd(t){return t>1?0:t<-1?ed:Math.acos(t)}function dd(t){return t>1?rd:t<-1?-rd:Math.asin(t)}function gd(){}function yd(t,e){t&&bd.hasOwnProperty(t.type)&&bd[t.type](t,e)}var vd,md,_d={Feature:function(t,e){yd(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,i=-1,n=r.length;++i<n;)yd(r[i].geometry,e)}},bd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,i=-1,n=r.length;++i<n;)t=r[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Sd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,i=-1,n=r.length;++i<n;)Sd(r[i],e,0)},Polygon:function(t,e){xd(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,i=-1,n=r.length;++i<n;)xd(r[i],e)},GeometryCollection:function(t,e){for(var r=t.geometries,i=-1,n=r.length;++i<n;)yd(r[i],e)}};function Sd(t,e,r){var i,n=-1,o=t.length-r;for(e.lineStart();++n<o;)i=t[n],e.point(i[0],i[1],i[2]);e.lineEnd()}function xd(t,e){var r=-1,i=t.length;for(e.polygonStart();++r<i;)Sd(t[r],e,1);e.polygonEnd()}function Od(t){return[ld(t[1],t[0]),dd(t[2])]}function Ed(t){var e=t[0],r=t[1],i=cd(r);return[i*cd(e),i*hd(e),hd(r)]}function Cd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Td(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function wd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Id(t){var e=pd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ld(t,e){function r(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,i){return(r=e.invert(r,i))&&t.invert(r[0],r[1])}),r}function Rd(t,e){return[t>ed?t-nd:t<-ed?t+nd:t,e]}function Md(t){return function(e,r){return[(e+=t)>ed?e-nd:e<-ed?e+nd:e,r]}}function Ad(t){var e=Md(t);return e.invert=Md(-t),e}function jd(t,e){var r=cd(t),i=hd(t),n=cd(e),o=hd(e);function s(t,e){var s=cd(e),a=cd(t)*s,u=hd(t)*s,l=hd(e),c=l*r+a*i;return[ld(u*n-c*o,a*r-l*i),dd(c*n+u*o)]}return s.invert=function(t,e){var s=cd(e),a=cd(t)*s,u=hd(t)*s,l=hd(e),c=l*n-u*o;return[ld(u*n+l*o,a*r+c*i),dd(c*r-a*i)]},s}function Nd(t,e){(e=Ed(e))[0]-=t,Id(e);var r=fd(-e[1]);return((-e[2]<0?-r:r)+nd-td)%nd}function Fd(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:gd,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Dd(t,e){return ad(t[0]-e[0])<td&&ad(t[1]-e[1])<td}function kd(t,e,r,i){this.x=t,this.z=e,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function Gd(t,e,r,i,n){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r,i=t[0],s=t[e];if(Dd(i,s)){for(n.lineStart(),o=0;o<e;++o)n.point((i=t[o])[0],i[1]);n.lineEnd()}else a.push(r=new kd(i,t,null,!0)),u.push(r.o=new kd(i,null,r,!1)),a.push(r=new kd(s,t,null,!1)),u.push(r.o=new kd(s,null,r,!0))}}),a.length){for(u.sort(e),Bd(a),Bd(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var l,c,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;l=p.z,n.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=l.length;o<s;++o)n.point((c=l[o])[0],c[1]);else i(p.x,p.n.x,1,n);p=p.n}else{if(f)for(l=p.p.z,o=l.length-1;o>=0;--o)n.point((c=l[o])[0],c[1]);else i(p.x,p.p.x,-1,n);p=p.p}l=(p=p.o).z,f=!f}while(!p.v);n.lineEnd()}}}function Bd(t){if(e=t.length){for(var e,r,i=0,n=t[0];++i<e;)n.n=r=t[i],r.p=n,n=r;n.n=r=t[0],r.p=n}}function Ud(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Vd(t){for(var e,r,i,n=t.length,o=-1,s=0;++o<n;)s+=t[o].length;for(r=new Array(s);--n>=0;)for(e=(i=t[n]).length;--e>=0;)r[--s]=i[e];return r}Kf(),Kf(),Kf(),Rd.invert=Rd,1===(vd=Ud).length&&(md=vd,vd=function(t,e){return Ud(md(t),e)});var zd=1e9,Wd=-zd,Yd=Kf();function Xd(t){return t}Kf(),Kf(),Kf();var Zd=1/0,Hd=Zd,qd=-Zd,Kd=qd,Jd={point:function(t,e){t<Zd&&(Zd=t),t>qd&&(qd=t),e<Hd&&(Hd=e),e>Kd&&(Kd=e)},lineStart:gd,lineEnd:gd,polygonStart:gd,polygonEnd:gd,result:function(){var t=[[Zd,Hd],[qd,Kd]];return qd=Kd=-(Hd=Zd=1/0),t}};function Qd(t,e,r,i){return function(n,o){var s,a,u,l=e(o),c=n.invert(i[0],i[1]),h=Fd(),p=e(h),f=!1,d={point:g,lineStart:v,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=S,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=v,d.lineEnd=m,a=Vd(a);var t=function(t,e){var r=e[0],i=e[1],n=[hd(r),-cd(r),0],o=0,s=0;Yd.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],p=h[0],f=h[1]/2+id,d=hd(f),g=cd(f),y=0;y<c;++y,p=m,d=b,g=S,h=v){var v=l[y],m=v[0],_=v[1]/2+id,b=hd(_),S=cd(_),x=m-p,O=x>=0?1:-1,E=O*x,C=E>ed,T=d*b;if(Yd.add(ld(T*O*hd(E),g*S+T*cd(E))),o+=C?x+O*nd:x,C^p>=r^m>=r){var P=Td(Ed(h),Ed(v));Id(P);var w=Td(n,P);Id(w);var I=(C^x>=0?-1:1)*dd(w[2]);(i>I||i===I&&(P[0]||P[1]))&&(s+=C^x>=0?1:-1)}}return(o<-1e-6||o<td&&Yd<-1e-6)^1&s}(s,c);a.length?(f||(o.polygonStart(),f=!0),Gd(a,tg,t,r,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,r){var i=n(e,r);t(e=i[0],r=i[1])&&o.point(e,r)}function y(t,e){var r=n(t,e);l.point(r[0],r[1])}function v(){d.point=y,l.lineStart()}function m(){d.point=g,l.lineEnd()}function _(t,e){u.push([t,e]);var r=n(t,e);p.point(r[0],r[1])}function b(){p.lineStart(),u=[]}function S(){_(u[0][0],u[0][1]),p.lineEnd();var t,e,r,i,n=p.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&n){if((e=(r=l[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((i=r[t])[0],i[1]);o.lineEnd()}}else c>1&&2&n&&l.push(l.pop().concat(l.shift())),a.push(l.filter($d))}return d}}function $d(t){return t.length>1}function tg(t,e){return((t=t.x)[0]<0?t[1]-rd-td:rd-t[1])-((e=e.x)[0]<0?e[1]-rd-td:rd-e[1])}Kf();var eg=Qd(function(){return!0},function(t){var e,r=NaN,i=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?ed:-ed,u=ad(o-r);ad(u-ed)<td?(t.point(r,i=(i+s)/2>0?rd:-rd),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):n!==a&&u>=ed&&(ad(r-n)<td&&(r-=n*td),ad(o-a)<td&&(o-=a*td),i=function(t,e,r,i){var n,o,s=hd(t-r);return ad(s)>td?ud((hd(e)*(o=cd(i))*hd(r)-hd(i)*(n=cd(e))*hd(t))/(n*o*s)):(e+i)/2}(r,i,o,s),t.point(n,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(r=o,i=s),n=a},lineEnd:function(){t.lineEnd(),r=i=NaN},clean:function(){return 2-e}}},function(t,e,r,i){var n;if(null==t)n=r*rd,i.point(-ed,n),i.point(0,n),i.point(ed,n),i.point(ed,0),i.point(ed,-n),i.point(0,-n),i.point(-ed,-n),i.point(-ed,0),i.point(-ed,n);else if(ad(t[0]-e[0])>td){var o=t[0]<e[0]?ed:-ed;n=r*o/2,i.point(-o,n),i.point(0,n),i.point(o,n)}else i.point(e[0],e[1])},[-ed,-rd]);function rg(t){return function(e){var r=new ig;for(var i in t)r[i]=t[i];return r.stream=e,r}}function ig(){}function ng(t,e,r){var i=e[1][0]-e[0][0],n=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&_d.hasOwnProperty(t.type)?_d[t.type](t,e):yd(t,e)}(r,t.stream(Jd));var s=Jd.result(),a=Math.min(i/(s[1][0]-s[0][0]),n/(s[1][1]-s[0][1])),u=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(n-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}ig.prototype={constructor:ig,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var og=cd(30*sd);function sg(t,e){return+e?function(t,e){function r(i,n,o,s,a,u,l,c,h,p,f,d,g,y){var v=l-i,m=c-n,_=v*v+m*m;if(_>4*e&&g--){var b=s+p,S=a+f,x=u+d,O=pd(b*b+S*S+x*x),E=dd(x/=O),C=ad(ad(x)-1)<td||ad(o-h)<td?(o+h)/2:ld(S,b),T=t(C,E),P=T[0],w=T[1],I=P-i,L=w-n,R=m*I-v*L;(R*R/_>e||ad((v*I+m*L)/_-.5)>.3||s*p+a*f+u*d<og)&&(r(i,n,o,s,a,u,P,w,C,b/=O,S/=O,x,g,y),y.point(P,w),r(P,w,C,b,S,x,l,c,h,p,f,d,g,y))}}return function(e){var i,n,o,s,a,u,l,c,h,p,f,d,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function y(r,i){r=t(r,i),e.point(r[0],r[1])}function v(){c=NaN,g.point=m,e.lineStart()}function m(i,n){var o=Ed([i,n]),s=t(i,n);r(c,h,l,p,f,d,c=s[0],h=s[1],l=i,p=o[0],f=o[1],d=o[2],16,e),e.point(c,h)}function _(){g.point=y,e.lineEnd()}function b(){v(),g.point=S,g.lineEnd=x}function S(t,e){m(i=t,e),n=c,o=h,s=p,a=f,u=d,g.point=m}function x(){r(c,h,l,p,f,d,n,o,i,s,a,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return rg({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)}var ag=rg({point:function(t,e){this.stream.point(t*sd,e*sd)}});var ug=function(t,e){var r=cd(t),i=cd(e),n=function(t){return(t=fd(t))&&t/hd(t)}(r*i);return[n*i*hd(t),n*hd(e)]};function lg(t,e,i,n){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return B(t,function(t){var r=lg(t,e,i,n);r&&u.push(r)}),d(u)}var l=function(t){var e=sr(a).geometry.coordinates,i=[-e[0],-e[1]];return function(t){return function(t){var e,r,i,n,o,s,a,u,l,c,h=150,p=480,f=250,d=0,g=0,y=0,v=0,m=0,_=null,b=eg,S=null,x=Xd,O=.5,E=sg(P,O);function C(t){return[(t=o(t[0]*sd,t[1]*sd))[0]*h+r,i-t[1]*h]}function T(t){return(t=o.invert((t[0]-r)/h,(i-t[1])/h))&&[t[0]*od,t[1]*od]}function P(t,n){return[(t=e(t,n))[0]*h+r,i-t[1]*h]}function w(){o=Ld(n=function(t,e,r){return(t%=nd)?e||r?Ld(Ad(t),jd(e,r)):Ad(t):e||r?jd(e,r):Rd}(y,v,m),e);var t=e(d,g);return r=p-t[0]*h,i=f+t[1]*h,I()}function I(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=ag(b(n,E(x(c=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?function(t,e){var r=cd(t),i=r>0,n=ad(r)>td;function o(t,e){return cd(t)*cd(e)>r}function s(t,e,i){var n=[1,0,0],o=Td(Ed(t),Ed(e)),s=Cd(o,o),a=o[0],u=s-a*a;if(!u)return!i&&t;var l=r*s/u,c=-r*a/u,h=Td(n,o),p=wd(n,l);Pd(p,wd(o,c));var f=h,d=Cd(p,f),g=Cd(f,f),y=d*d-g*(Cd(p,p)-1);if(!(y<0)){var v=pd(y),m=wd(f,(-d-v)/g);if(Pd(m,p),m=Od(m),!i)return m;var _,b=t[0],S=e[0],x=t[1],O=e[1];S<b&&(_=b,b=S,S=_);var E=S-b,C=ad(E-ed)<td;if(!C&&O<x&&(_=x,x=O,O=_),C||E<td?C?x+O>0^m[1]<(ad(m[0]-b)<td?x:O):x<=m[1]&&m[1]<=O:E>ed^(b<=m[0]&&m[0]<=S)){var T=wd(f,(-d+v)/g);return Pd(T,p),[m,Od(T)]}}}function a(e,r){var n=i?t:ed-t,o=0;return e<-n?o|=1:e>n&&(o|=2),r<-n?o|=4:r>n&&(o|=8),o}return Qd(o,function(t){var e,r,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,p){var f,d=[h,p],g=o(h,p),y=i?g?0:a(h,p):g?a(h+(h<0?ed:-ed),p):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(f=s(e,d))||Dd(e,f)||Dd(d,f))&&(d[0]+=td,d[1]+=td,g=o(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),f=s(d,e),t.point(f[0],f[1])):(f=s(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(n&&e&&i^g){var v;y&r||!(v=s(d,e,!0))||(c=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Dd(e,d)||t.point(d[0],d[1]),e=d,u=g,r=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},function(r,i,n,o){!function(t,e,r,i,n,o){if(r){var s=cd(e),a=hd(e),u=i*r;null==n?(n=e+i*nd,o=e-u/2):(n=Nd(s,n),o=Nd(s,o),(i>0?n<o:n>o)&&(n+=i*nd));for(var l,c=n;i>0?c>o:c<o;c-=u)l=Od([s,-a*cd(c),-a*hd(c)]),t.point(l[0],l[1])}}(o,t,e,n,r,i)},i?[0,-t]:[-ed,t-ed])}(_=t*sd,6*sd):(_=null,eg),I()):_*od},C.clipExtent=function(t){return arguments.length?(x=null==t?(S=s=a=u=null,Xd):function(t,e,r,i){function n(n,o){return t<=n&&n<=r&&e<=o&&o<=i}function o(n,o,a,l){var c=0,h=0;if(null==n||(c=s(n,a))!==(h=s(o,a))||u(n,o)<0^a>0)do{l.point(0===c||3===c?t:r,c>1?i:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(i,n){return ad(i[0]-t)<td?n>0?0:3:ad(i[0]-r)<td?n>0?2:1:ad(i[1]-e)<td?n>0?1:0:n>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),i=s(e,1);return r!==i?r-i:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,p,f,d,g,y,v,m,_=s,b=Fd(),S={point:x,lineStart:function(){S.point=O,l&&l.push(c=[]),v=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(O(h,p),f&&y&&b.rejoin(),u.push(b.result())),S.point=x,y&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,n=l.length;r<n;++r)for(var o,s,a=l[r],u=1,c=a.length,h=a[0],p=h[0],f=h[1];u<c;++u)o=p,s=f,p=(h=a[u])[0],f=h[1],s<=i?f>i&&(p-o)*(i-s)>(f-s)*(t-o)&&++e:f<=i&&(p-o)*(i-s)<(f-s)*(t-o)&&--e;return e}(),r=m&&e,n=(u=Vd(u)).length;(r||n)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),n&&Gd(u,a,e,o,s),s.polygonEnd()),_=s,u=l=c=null}};function x(t,e){n(t,e)&&_.point(t,e)}function O(o,s){var a=n(o,s);if(l&&c.push([o,s]),v)h=o,p=s,f=a,v=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&y)_.point(o,s);else{var u=[d=Math.max(Wd,Math.min(zd,d)),g=Math.max(Wd,Math.min(zd,g))],b=[o=Math.max(Wd,Math.min(zd,o)),s=Math.max(Wd,Math.min(zd,s))];!function(t,e,r,i,n,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,p=e[1]-u;if(s=r-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=n-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=i-u,p||!(s>0)){if(s/=p,p<0){if(s<l)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>l&&(l=s)}else if(p>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*p),c<1&&(e[0]=a+c*h,e[1]=u+c*p),!0}}}}}(u,b,t,e,r,i)?a&&(_.lineStart(),_.point(o,s),m=!1):(y||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,g=s,y=a}return S}}(S=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),I()):null==S?null:[[S,s],[a,u]]},C.scale=function(t){return arguments.length?(h=+t,w()):h},C.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],w()):[p,f]},C.center=function(t){return arguments.length?(d=t[0]%360*sd,g=t[1]%360*sd,w()):[d*od,g*od]},C.rotate=function(t){return arguments.length?(y=t[0]%360*sd,v=t[1]%360*sd,m=t.length>2?t[2]%360*sd:0,w()):[y*od,v*od,m*od]},C.precision=function(t){return arguments.length?(E=sg(P,O=t*t),I()):pd(O)},C.fitExtent=function(t,e){return ng(C,t,e)},C.fitSize=function(t,e){return function(t,e,r){return ng(C,[[0,0],e],r)}(0,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&T,w()}}(function(){return t})()}(ug).scale(79.4188).clipAngle(179.999).rotate(i).scale(r)}(),c={type:a.type,coordinates:function t(e,r){return"object"!=typeof e[0]?r(e):e.map(function(e){return t(e,r)})}(a.coordinates,l)},h=(new Nc).read(c),p=b(S(e,i),"meters"),f=wp.bufferOp(h,p,n);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((f=(new Fc).write(f)).coordinates))return s({type:f.type,coordinates:function t(e,r){return"object"!=typeof e[0]?r.invert(e):e.map(function(e){return t(e,r)})}(f.coordinates,l)},o)}function cg(t,e,r){void 0===r&&(r={});var i=nt(t),n=nt(e),o=gu.intersection(i.coordinates,n.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):v(o,r.properties)}function hg(t,e,r){void 0===r&&(r={});var i=JSON.stringify(r.properties||{}),n=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(n+s)/2,c=2*e/ve([n,u],[s,u],r)*(s-n),h=2*e/ve([l,o],[l,a],r)*(a-o),p=c/2,f=2*p,g=Math.sqrt(3)/2*h,y=s-n,v=a-o,m=.75*f,_=g,b=(y-f)/(f-p/2),S=Math.floor(b),x=(S*m-p/2-y)/2-p/2+m/2,O=Math.floor((v-g)/g),E=(v-O*g)/2,C=O*g-v>g/2;C&&(E-=g/4);for(var T=[],P=[],w=0;w<6;w++){var I=2*Math.PI/6*w;T.push(Math.cos(I)),P.push(Math.sin(I))}for(var L=[],R=0;R<=S;R++)for(var M=0;M<=O;M++){var A=R%2==1;if(!(0===M&&A||0===M&&C)){var j=R*m+n-x,N=M*_+o+E;if(A&&(N-=g/2),!0===r.triangles)fg([j,N],c/2,h/2,JSON.parse(i),T,P).forEach(function(t){r.mask?cg(r.mask,t)&&L.push(t):L.push(t)});else{var F=pg([j,N],c/2,h/2,JSON.parse(i),T,P);r.mask?cg(r.mask,F)&&L.push(F):L.push(F)}}}return d(L)}function pg(t,e,r,i,n,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*n[a],l=t[1]+r*o[a];s.push([u,l])}return s.push(s[0].slice()),c([s],i)}function fg(t,e,r,i,n,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*n[a],t[1]+r*o[a]]),u.push([t[0]+e*n[(a+1)%6],t[1]+r*o[(a+1)%6]]),u.push(t),s.push(c([u],i))}return s}function dg(t){return v(t)}function gg(t,e,r){return void 0===r&&(r={}),function(t,e,r,i){void 0===i&&(i={});for(var n=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/ve([o,s],[a,s],i)*(a-o),h=r/ve([o,s],[o,u],i)*(u-s),p=a-o,f=u-s,g=Math.floor(p/l),y=Math.floor(f/h),v=(f-y*h)/2,m=o+(p-g*l)/2,_=0;_<g;_++){for(var b=s+v,S=0;S<y;S++){var x=c([[[m,b],[m,b+h],[m+l,b+h],[m+l,b],[m,b]]],i.properties);i.mask?es(i.mask,x)&&n.push(x):n.push(x),b+=h}m+=l}return d(n)}(t,e,e,r)}function yg(t,e,r){void 0===r&&(r={});for(var i=[],n=e/ve([t[0],t[1]],[t[2],t[1]],r)*(t[2]-t[0]),o=e/ve([t[0],t[1]],[t[0],t[3]],r)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,p=null;s%2==0&&u%2==0?(h=c([[[a,l],[a,l+o],[a+n,l],[a,l]]],r.properties),p=c([[[a,l+o],[a+n,l+o],[a+n,l],[a,l+o]]],r.properties)):s%2==0&&u%2==1?(h=c([[[a,l],[a+n,l+o],[a+n,l],[a,l]]],r.properties),p=c([[[a,l],[a,l+o],[a+n,l+o],[a,l]]],r.properties)):u%2==0&&s%2==1?(h=c([[[a,l],[a,l+o],[a+n,l+o],[a,l]]],r.properties),p=c([[[a,l],[a+n,l+o],[a+n,l],[a,l]]],r.properties)):u%2==1&&s%2==1&&(h=c([[[a,l],[a,l+o],[a+n,l],[a,l]]],r.properties),p=c([[[a,l+o],[a+n,l+o],[a+n,l],[a,l+o]]],r.properties)),r.mask?(cg(r.mask,h)&&i.push(h),cg(r.mask,p)&&i.push(p)):(i.push(h),i.push(p)),l+=o,u++}s++,a+=n}return d(i)}ug.invert=function(t,e){var r=pd(t*t+e*e),i=r,n=hd(i),o=cd(i);return[ld(t*n,r*o),dd(r&&e*n/r)]},e.along=function(t,e,r){void 0===r&&(r={});for(var i=nt(t).coordinates,n=0,o=0;o<i.length&&!(e>=n&&o===i.length-1);o++){if(n>=e){var s=e-n;if(s){var a=or(i[o],i[o-1])-180;return ir(i[o],s,a,r)}return u(i[o])}n+=ve(i[o],i[o+1],r)}return u(i[i.length-1])},e.angle=function(t,e,r,i){if(void 0===i&&(i={}),!I(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!r)throw new Error("endPoint is required");var n=t,o=e,s=r,a=O(!0!==i.mercator?or(n,o):gn(n,o)),u=O(!0!==i.mercator?or(s,o):gn(s,o)),l=Math.abs(a-u);return!0===i.explementary?360-l:l},e.applyFilter=Ia,e.area=mi,e.areaFactors=o,e.bbox=J,e.bboxClip=function(t,e){var r=nt(t),i=r.type,n="Feature"===t.type?t.properties:{},o=r.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(o=[o]),o.forEach(function(t){!function(t,e,r){var i,n,o,s,a,u=t.length,l=an(t[0],e),c=[];for(r||(r=[]),i=1;i<u;i++){for(s=t[i-1],n=o=an(a=t[i],e);;){if(!(l|n)){c.push(s),n!==o?(c.push(a),i<u-1&&(r.push(c),c=[])):i===u-1&&c.push(a);break}if(l&n)break;l?l=an(s=sn(s,a,l,e),e):n=an(a=sn(s,a,n,e),e)}l=o}c.length&&r.push(c)}(t,e,s)}),1===s.length?p(s[0],n):g(s,n);case"Polygon":return c(un(o,e),n);case"MultiPolygon":return v(o.map(function(t){return un(t,e)}),n);default:throw new Error("geometry "+i+" not supported")}},e.bboxPolygon=tr,e.bearing=or,e.bearingToAngle=O,e.bearingToAzimuth=O,e.bezier=$e,e.bezierSpline=$e,e.booleanClockwise=Sn,e.booleanContains=function(t,e){var r=nt(t),i=nt(e),n=r.type,o=i.type,s=r.coordinates,a=i.coordinates;switch(n){case"Point":switch(o){case"Point":return Wo(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var r,i=!1;for(r=0;r<t.coordinates.length;r++)if(Wo(t.coordinates[r],e.coordinates)){i=!0;break}return i}(r,i);case"MultiPoint":return function(t,e){for(var r=0,i=e.coordinates;r<i.length;r++){for(var n=i[r],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(Wo(n,a[s])){o=!0;break}if(!o)return!1}return!0}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Ei(i,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,i=0,n=e.coordinates;i<n.length;i++){var o=n[i];if(Ei({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Ei({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return r}(r,i);case"MultiPoint":return function(t,e){for(var r=!1,i=0,n=e.coordinates;i<n.length;i++){var o=n[i];if(Ei(o,t,{ignoreEndVertices:!0})&&(r=!0),!Ei(o,t))return!1}return!!r}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return de(i,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,i=0;if(!zo(J(t),J(e)))return!1;for(;i<e.coordinates.length-1;i++)if(de({type:"Point",coordinates:Yo(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){r=!0;break}return r}(r,i);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!zo(J(t),J(e)))return!1;for(var r=0,i=nt(e).coordinates;r<i.length;r++)for(var n=0,o=i[r];n<o.length;n++)if(!de(o[n],t))return!1;return!0}(r,i);case"MultiPoint":return function(t,e){for(var r=0,i=e.coordinates;r<i.length;r++)if(!de(i[r],t,{ignoreBoundary:!0}))return!1;return!0}(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},e.booleanCrosses=function(t,e){var r=nt(t),i=nt(e),n=r.type,o=i.type;switch(n){case"MultiPoint":switch(o){case"LineString":return Xo(r,i);case"Polygon":return Ho(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Xo(i,r);case"LineString":return function(t,e){if(ai(t,e).features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var i=0;i<e.coordinates.length-1;i++){var n=!0;if(0!==i&&i!==e.coordinates.length-2||(n=!1),qo(t.coordinates[r],t.coordinates[r+1],e.coordinates[i],n))return!0}return!1}(r,i);case"Polygon":return Zo(r,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ho(i,r);case"LineString":return Zo(i,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},e.booleanDisjoint=Go,e.booleanEqual=function(t,e){return nt(t).type===nt(e).type&&new ts({precision:6}).compare(ze(t),ze(e))},e.booleanIntersects=es,e.booleanOverlap=function(t,e){var r=nt(t),i=nt(e),n=r.type,o=i.type;if("MultiPoint"===n&&"MultiPoint"!==o||("LineString"===n||"MultiLineString"===n)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===n||"MultiPolygon"===n)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new ts({precision:6}).compare(t,e))return!1;var s=0;switch(n){case"MultiPoint":for(var a=0;a<r.coordinates.length;a++)for(var u=0;u<i.coordinates.length;u++){var l=r.coordinates[a],c=i.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":W(t,function(t){W(e,function(e){pn(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":W(t,function(t){W(e,function(e){ai(t,e).features.length&&s++})})}return s>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==fs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==fs(e,"line2"))throw new Error("line2 must be a LineString");for(var r=Fr(ze(t)).features,i=Fr(ze(e)).features,n=0;n<r.length;n++){var o=r[n].geometry.coordinates;if(!i[n])break;if(!ps(o,i[n].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=de,e.booleanPointOnLine=Ei,e.booleanWithin=Ti,e.buffer=function(t,e,r){var i=(r=r||{}).units||"kilometers",n=r.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof n)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(n<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return B(t,function(t){var r=lg(t,e,i,n);r&&o.push(r)}),d(o);case"FeatureCollection":return D(t,function(t){var r=lg(t,e,i,n);r&&D(r,function(t){t&&o.push(t)})}),d(o)}return lg(t,e,i,n)},e.center=sr,e.centerMean=na,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var r=e.counter||10;if(!w(r))throw new Error("counter must be a number");var i=e.weight,n=na(t,{weight:e.weight}),o=d([]);D(t,function(t){var e;o.features.push(ar(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[i]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return function t(e,r,i,n,o){var s=n.tolerance||.001,a=0,l=0,c=0,h=0;if(D(i,function(t){var r,i=null===(r=t.properties)||void 0===r?void 0:r.weight,n=null==i?1:i;if(!w(n=Number(n)))throw new Error("weight value must be a number");if(n>0){h+=1;var o=n*ve(t,e);0===o&&(o=1);var s=n/o;a+=t.geometry.coordinates[0]*s,l+=t.geometry.coordinates[1]*s,c+=s}}),h<1)throw new Error("no features to measure");var p=a/c,f=l/c;return 1===h||0===o||Math.abs(p-r[0])<s&&Math.abs(f-r[1])<s?u([p,f],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([p,f]),t([p,f],e,i,n,o-1))}(n.geometry.coordinates,[0,0],o,s,r)},e.centerOfMass=function t(e,r){switch(void 0===r&&(r={}),ot(e)){case"Point":return u(Q(e),r.properties);case"Polygon":var i=[];A(e,function(t){i.push(t)});var n,o,s,a,l,c,h,p,f=ar(e,{properties:r.properties}),d=f.geometry.coordinates,g=0,y=0,v=0,m=i.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(n=0;n<i.length-1;n++)a=(o=m[n])[0],c=o[1],l=(s=m[n+1])[0],v+=p=a*(h=s[1])-l*c,g+=(a+l)*p,y+=(c+h)*p;if(0===v)return f;var _=1/(.5*v*6);return u([d[0]+_*g,d[1]+_*y],r.properties);default:var b=fe(e);return b?t(b,{properties:r.properties}):ar(e,{properties:r.properties})}},e.centroid=ar,e.circle=nr,e.cleanCoords=ze,e.clone=xe,e.clusterEach=Ta,e.clusterReduce=Pa,e.clusters=Ma,e.clustersDbscan=function(t,e,r){void 0===r&&(r={}),!0!==r.mutate&&(t=xe(t)),r.minPoints=r.minPoints||3;var i=new ss.DBSCAN,n=-1;return i.run(G(t),T(e,r.units),r.minPoints,ve).forEach(function(e){n++,e.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=n,r.properties.dbscan="core"})}),i.noise.forEach(function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var r=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(r/2)),e.numberOfClusters>r&&(e.numberOfClusters=r),!0!==e.mutate&&(t=xe(t));var i=G(t),n=i.slice(0,e.numberOfClusters),o=function(t,e,r,i){var n=[],o=[],s=[],a=[],u=!1,l=i||1e4,c=t.length,h=t[0].length,p=h>0,f=[];if(r)n="kmrand"==r?function(t,e){for(var r={},i=[],n=e<<2,o=t.length,s=t[0].length>0;i.length<e&&n-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==r?function(t,e){var r=t[0].length?us:ls,i=[],n=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*n)];for(o&&s.join("_"),i.push(s);i.length<e;){for(var a=[],u=i.length,l=0,c=[],h=0;h<n;h++){for(var p=1/0,f=0;f<u;f++){var d=r(t[h],i[f]);d<=p&&(p=d)}a[h]=p}for(var g=0;g<n;g++)l+=a[g];for(var y=0;y<n;y++)c[y]={i:y,v:t[y],pr:a[y]/l,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var v=1;v<n;v++)c[v].cs=c[v-1].cs+c[v].pr;for(var m=Math.random(),_=0;_<n-1&&c[_++].cs<m;);i.push(c[_-1].v)}return i}(t,e):r;else for(var d={};n.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,n.push(t[g]))}do{hs(e,0,f);for(var y=0;y<c;y++){for(var v=1/0,m=0,_=0;_<e;_++)(a=p?cs(t[y],n[_]):Math.abs(t[y]-n[_]))<=v&&(v=a,m=_);s[y]=m,f[m]++}for(var b=[],S=(o=[],0);S<e;S++)b[S]=p?hs(h,0,b[S]):0,o[S]=n[S];if(p){for(var x=0;x<e;x++)n[x]=[];for(var O=0;O<c;O++)for(var E=b[s[O]],C=t[O],T=0;T<h;T++)E[T]+=C[T];u=!0;for(var P=0;P<e;P++){for(var w=n[P],I=b[P],L=o[P],R=f[P],M=0;M<h;M++)w[M]=I[M]/R||0;if(u)for(var A=0;A<h;A++)if(L[A]!=w[A]){u=!1;break}}}else{for(var j=0;j<c;j++)b[s[j]]+=t[j];for(var N=0;N<e;N++)n[N]=b[N]/f[N]||0;u=!0;for(var F=0;F<e;F++)if(o[F]!=n[F]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:n}}(i,e.numberOfClusters,n),s={};return o.centroids.forEach(function(t,e){s[e]=t}),D(t,function(t,e){var r=o.idxs[e];t.properties.cluster=r,t.properties.centroid=s[r]}),t},e.collect=function(t,e,r,i){var n=Ot(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[r]}});return n.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=J(t),r=[];n.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){de([e.minX,e.minY],t)&&r.push(e.property)}),t.properties[i]=r}),t},e.collectionOf=it,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,function(t){var r,i,n,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(n=e.MultiPolygon.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var r=e.maxEdge||1/0,i=me(function(t){var e=[],r={};return D(t,function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,i)||(e.push(t),r[i]=!0)}}),d(e)}(t));if(i.features=i.features.filter(function(t){var i=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(i,n,e),a=ve(n,o,e),u=ve(i,o,e);return s<=r&&a<=r&&u<=r}),i.features.length<1)return null;var n=function(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=xe(t));var i=function(t){var e={};V(t,function(t){e[t.geometry.type]=!0});var r=Object.keys(e);return 1===r.length?r[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var n=t;switch(i){case"LineString":return function(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=xe(t));var i=[],n=Z(t,function(t,e){return function(t,e){var r,i=t.geometry.coordinates,n=e.geometry.coordinates,o=Ce(i[0]),s=Ce(i[i.length-1]),a=Ce(n[0]),u=Ce(n[n.length-1]);if(o===u)r=n.concat(i.slice(1));else if(a===s)r=i.concat(n.slice(1));else if(o===a)r=i.slice(1).reverse().concat(n);else{if(s!==u)return null;r=i.concat(n.reverse().slice(1))}return p(r)}(t,e)||(i.push(t),e)});return n&&i.push(n),i.length?1===i.length?i[0]:g(i.map(function(t){return t.coordinates})):null}(n,e);case"Polygon":return Ve(n,e);default:throw new Error(i+" is not supported")}}(i);return 1===n.coordinates.length&&(n.coordinates=n.coordinates[0],n.type="Polygon"),s(n)},e.containsNumber=tt,e.convertArea=P,e.convertDistance=T,e.convertLength=T,e.convex=fe,e.coordAll=G,e.coordEach=A,e.coordReduce=j,e.createBins=wa,e.degrees2radians=C,e.degreesToRadians=C,e.destination=ir,e.difference=function(t,e){var r=nt(t),i=nt(e),n=t.properties||{},o=gu.difference(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?c(o[0],n):v(o,n)},e.dissolve=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.propertyName;it(t,"Polygon","dissolve");var i=[];if(!e.propertyName)return Mi(v(gu.union.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var n={};D(t,function(t){Object.prototype.hasOwnProperty.call(n,t.properties[r])||(n[t.properties[r]]=[]),n[t.properties[r]].push(t)});for(var o=Object.keys(n),s=0;s<o.length;s++){var a=v(gu.union.apply(null,n[o[s]].map(function(t){return t.geometry.coordinates})));a.properties[r]=o[s],i.push(a)}return Mi(d(i))},e.distance=ve,e.distanceToDegrees=x,e.distanceToRadians=S,e.distanceWeight=la,e.earthRadius=r,e.ellipse=ra,e.envelope=er,e.explode=ur,e.factors=i,e.feature=s,e.featureCollection=d,e.featureEach=D,e.featureOf=rt,e.featureReduce=k,e.filterProperties=Ra,e.findPoint=q,e.findSegment=H,e.flatten=Mi,e.flattenEach=V,e.flattenReduce=z,e.flip=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=xe(t)),A(t,function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e}),t},e.geojsonType=et,e.geomEach=B,e.geomReduce=U,e.geometry=a,e.geometryCollection=m,e.getCluster=Ca,e.getCoord=Q,e.getCoords=$,e.getGeom=nt,e.getType=ot,e.greatCircle=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var i=r.properties,n=r.npoints,o=r.offset;return t=Q(t),e=Q(e),i=i||{},n=n||100,o=o||10,new Yi({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(n,{offset:o}).json()},e.helpers=M,e.hexGrid=hg,e.inside=de,e.interpolate=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var i=r.gridType,n=r.property,o=r.weight;if(!t)throw new Error("points is required");if(it(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");n=n||"elevation",i=i||"square",o=o||1;var s,a=J(t);switch(i){case"point":case"points":s=Li(a,e,r);break;case"square":case"squares":s=gg(a,e,r);break;case"hex":case"hexes":s=hg(a,e,r);break;case"triangle":case"triangles":s=yg(a,e,r);break;default:throw new Error("invalid gridType")}var u=[];return D(s,function(e){var s=0,a=0;D(t,function(t){var u,l=ve("point"===i?e:ar(e),t,r);if(void 0!==n&&(u=t.properties[n]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u});var l=xe(e);l.properties[n]=s/a,u.push(l)}),d(u)},e.intersect=cg,e.invariant=st,e.isNumber=w,e.isObject=I,e.isobands=function(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.zProperty||"elevation",n=r.commonProperties||{},o=r.breaksProperties||[];if(it(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(n))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",i=e.flip,n=e.flags;it(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return D(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===n&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:i,flip:!0}),a=function(t,e,r){for(var i=[],n=1;n<e.length;n++){var o=+e[n-1],s=+e[n],a=Eo(Oo(Pn(t,o,s-o))),u={};u.groupedRings=a,u[r]=o+"-"+s,i.push(u)}return i}(s,e,i);return d((a=function(t,e,r){var i=J(r),n=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=n/(e[0].length-1),l=o/(e.length-1),c=function(t){t[0]=t[0]*u+s,t[1]=t[1]*l+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(c)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!I(o[e]))throw new Error("Each mappedProperty is required to be an Object");var r=ct({},n,o[e]);return r[i]=t[i],v(t.groupedRings,r)}))},e.isolines=function(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.zProperty||"elevation",n=r.commonProperties||{},o=r.breaksProperties||[];if(it(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(n))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",i=e.flip,n=e.flags;it(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return D(t,function(t){var e=$(t)[1];r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).map(function(t){return r[t].sort(function(t,e){return $(t)[0]-$(e)[0]})}).sort(function(t,r){return e?$(t[0])[1]-$(r[0])[1]:$(r[0])[1]-$(t[0])[1]})}(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[r]?l.push(h.properties[r]):l.push(0),!0===n&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:i,flip:!0});return d(function(t,e,r){var i=J(r),n=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=n/(e[0].length-1),l=o/(e.length-1),c=function(t){t[0]=t[0]*u+s,t[1]=t[1]*l+a};return t.forEach(function(t){A(t,c)}),t}(function(t,e,r,i,n){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ct({},i,n[s]);u[r]=a;var l=g(ft(t,a),u);o.push(l)}return o}(s,e,i,n,o),s,t))},e.kinks=function(t){var e,r,i={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)e=[r.coordinates];else if("MultiLineString"===r.type)e=r.coordinates;else if("MultiPolygon"===r.type)e=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var r=0;r<t.length-1;r++)for(var n=r;n<e.length-1;n++){if(t===e){if(1===Math.abs(r-n))continue;if(0===r&&n===t.length-2&&t[r][0]===t[t.length-1][0]&&t[r][1]===t[t.length-1][1])continue}var o=di(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[n][0],e[n][1],e[n+1][0],e[n+1][1]);o&&i.features.push(u([o[0],o[1]]))}})}),i},e.length=xi,e.lengthToDegrees=x,e.lengthToRadians=S,e.lineArc=Ki,e.lineChunk=function(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.units,n=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return V(t,function(t){n&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,i){var n=xi(t,{units:r});if(n<=e)return i(t);var o=n/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(Oi(t,e*s,e*(s+1),{units:r}))}(t,e,i,function(t){o.push(t)})}),d(o)},e.lineDistance=xi,e.lineEach=X,e.lineIntersect=ai,e.lineOffset=function(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var n=ot(t),o=t.properties;switch(n){case"LineString":return Mo(t,e,i);case"MultiLineString":var s=[];return V(t,function(t){s.push(Mo(t,e,i).geometry.coordinates)}),g(s,o);default:throw new Error("geometry "+n+" is not supported")}},e.lineOverlap=pn,e.lineReduce=Z,e.lineSegment=Fr,e.lineSlice=function(t,e,r){var i=$(r);if("LineString"!==ot(r))throw new Error("line must be a LineString");for(var n,o=li(r,t),s=li(r,e),a=[(n=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=n[0].properties.index+1;u<n[1].properties.index+1;u++)a.push(i[u]);return a.push(n[1].geometry.coordinates),p(a,r.properties)},e.lineSliceAlong=Oi,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=ot(t),i=ot(e);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var n=Ri(e,{precision:7});switch(i){case"Point":return Zi(t,n);case"MultiPoint":return Xi(t,n);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Xi(t,ai(t,n))}},e.lineString=p,e.lineStringToPolygon=en,e.lineStrings=f,e.lineToPolygon=en,e.mask=function(t,e){var r,i=c(e&&e.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]);return("FeatureCollection"===t.type?dg(2===(r=t).features.length?gu.union(r.features[0].geometry.coordinates,r.features[1].geometry.coordinates):gu.union.apply(gu,r.features.map(function(t){return t.geometry.coordinates}))):dg(gu.union(t.geometry.coordinates))).geometry.coordinates.forEach(function(t){i.geometry.coordinates.push(t[0])}),i},e.meta=K,e.midpoint=function(t,e){return ir(t,ve(t,e)/2,or(t,e))},e.moranIndex=function(t,e){var r=e.inputField,i=e.threshold||1e5,n=e.p||2,o=e.binary||!1,s=la(t,{alpha:e.alpha||-1,binary:o,p:n,standardization:e.standardization||!0,threshold:i}),a=[];D(t,function(t){var e=t.properties||{};a.push(e[r])});for(var u=ca(a),l=function(t){for(var e=ca(t),r=0,i=0,n=t;i<n.length;i++){var o=n[i];r+=Math.pow(o-e,2)}return r/t.length}(a),c=0,h=0,p=0,f=0,d=s.length,g=0;g<d;g++){for(var y=0,v=0;v<d;v++)c+=s[g][v]*(a[g]-u)*(a[v]-u),h+=s[g][v],p+=Math.pow(s[g][v]+s[v][g],2),y+=s[g][v]+s[v][g];f+=Math.pow(y,2)}var m=c/h/l,_=-1/(d-1),b=(d*d*(p*=.5)-d*f+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,S=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:S,zNorm:(m-_)/S}},e.multiLineString=g,e.multiPoint=y,e.multiPolygon=v,e.nearest=Nr,e.nearestPoint=Nr,e.nearestPointOnLine=li,e.nearestPointToLine=function(t,e,r){void 0===r&&(r={});var i=r.units,n=r.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return B(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var s=1/0,a=null;return D(o,function(t){var r=hi(t,e,{units:i});r<s&&(s=r,a=t)}),a&&(a.properties=ct({dist:s},a.properties,n)),a},e.planepoint=function(t,e){var r=Q(t),i=nt(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var n=e.properties||{},o=n.a,s=n.b,a=n.c,u=r[0],l=r[1],c=i[0][0],h=i[0][1],p=void 0!==o?o:i[0][2],f=i[1][0],d=i[1][1],g=void 0!==s?s:i[1][2],y=i[2][0],v=i[2][1],m=void 0!==a?a:i[2][2];return(m*(u-c)*(l-d)+p*(u-f)*(l-v)+g*(u-y)*(l-h)-g*(u-c)*(l-v)-m*(u-f)*(l-h)-p*(u-y)*(l-d))/((u-c)*(l-d)+(u-f)*(l-v)+(u-y)*(l-h)-(u-c)*(l-v)-(u-f)*(l-h)-(u-y)*(l-d))},e.point=u,e.pointGrid=Li,e.pointOnFeature=gi,e.pointOnLine=li,e.pointOnSurface=gi,e.pointToLineDistance=hi,e.points=l,e.pointsWithinPolygon=ye,e.polygon=c,e.polygonSmooth=function(t,e){var r=[],i=e.iterations||1;if(!t)throw new Error("inputPolys is required");return B(t,function(t,e,n){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<i;u++)a=[[]],s=t,u>0&&(s=c(o).geometry),sa(s,a),o=a.slice(0);r.push(c(o,n));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<i;l++)a=[[[]]],s=t,l>0&&(s=v(o).geometry),aa(s,a),o=a.slice(0);r.push(v(o,n));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(r)},e.polygonTangents=function(t,e){var r,i,n,o,s=$(t),a=$(e),l=J(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Nr(t,ur(e))).properties.featureIndex),ot(e)){case"Polygon":r=a[0][c],i=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(i=a[0][c]),o=bn(a[0][0],a[0][a[0].length-1],s);var p=mn(a[0],s,o,n,r,i);r=p[0],i=p[1];break;case"MultiPolygon":for(var f=0,g=0,y=0,v=0;v<a[0].length;v++){f=v;for(var m=!1,_=0;_<a[0][v].length;_++){if(g=_,y===c){m=!0;break}y++}if(m)break}r=a[0][f][g],i=a[0][f][g],o=bn(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=mn(t[0],s,o,n,r,i);r=e[0],i=e[1]})}return d([u(r),u(i)])},e.polygonToLine=Qi,e.polygonToLineString=Qi,e.polygonize=function(t){var e=ko.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var r=[],i=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?r.push(t):i.push(t)}),r.forEach(function(t){Do.findEdgeRingContaining(t,i)&&i.push(t)}),d(i.map(function(t){return t.toPolygon()}))},e.polygons=h,e.projection=ya,e.propEach=N,e.propReduce=F,e.propertiesContainsFilter=La,e.radians2degrees=E,e.radiansToDegrees=E,e.radiansToDistance=b,e.radiansToLength=b,e.random=Ea,e.randomLineString=Sa,e.randomPoint=_a,e.randomPolygon=ba,e.randomPosition=ma,e.rewind=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=xe(t));var n=[];switch(t.type){case"GeometryCollection":return B(t,function(t){xn(t,r)}),t;case"FeatureCollection":return D(t,function(t){D(xn(t,r),function(t){n.push(t)})}),d(n)}return xn(t,r)},e.rhumbBearing=gn,e.rhumbDestination=vn,e.rhumbDistance=ci,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var r,i,n=t.slice(0),o=t.length,s=o-e;o-- >s;)r=n[i=Math.floor((o+1)*Math.random())],n[i]=n[o],n[o]=r;return n.slice(s)}(t.features,e))},e.sector=function(t,e,r,i,n){if(!I(n=n||{}))throw new Error("options is invalid");var o=n.properties;if(!t)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if(dn(r)===dn(i))return nr(t,e,n);var s=$(t),a=[[s]];return A(Ki(t,e,r,i,n),function(t){a[0].push(t)}),a[0].push(s),c(a,o)},e.segmentEach=W,e.segmentReduce=Y,e.shortestPath=function(t,e,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.resolution,n=r.minDistance,o=r.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&!w(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");if(n)throw new Error("options.minDistance is not yet implemented");var a=Q(t),l=Q(e);switch(t=u(a),e=u(l),ot(o)){case"FeatureCollection":if(0===o.features.length)return p([a,l]);break;case"Polygon":o=d([s(nt(o))]);break;default:throw new Error("invalid obstacles")}var c=o;c.features.push(t),c.features.push(e);var h=J(wo(tr(J(c)),1.15));i||(i=ve([h[0],h[1]],[h[2],h[1]],r)/100),c.features.pop(),c.features.pop();for(var f=h[0],g=h[1],y=h[2],v=h[3],m=i/ve([f,g],[y,g],r)*(y-f),_=i/ve([f,g],[f,v],r)*(v-g),b=y-f,S=v-g,x=(b-Math.floor(b/m)*m)/2,O=[],E=[],C=[],T=[],P=1/0,L=1/0,R=v-(S-Math.floor(S/_)*_)/2,M=0;R>=g;){for(var A=[],j=[],N=f+x,F=0;N<=y;){var D=u([N,R]),k=_s(D,o);A.push(k?0:1),j.push(N+"|"+R);var G=ve(D,t);!k&&G<P&&(P=G,C={x:F,y:M});var B=ve(D,e);!k&&B<L&&(L=B,T={x:F,y:M}),N+=m,F++}E.push(A),O.push(j),R-=_,M++}var U=new ys(E,{diagonal:!0}),V=U.grid[C.y][C.x],z=U.grid[T.y][T.x],W=[a];return gs.search(U,V,z).forEach(function(t){var e=O[t.x][t.y].split("|");W.push([+e[0],+e[1]])}),W.push(l),ze(p(W))},e.simplify=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,n=e.mutate||!1;if(!t)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==n&&(t=xe(t)),B(t,function(t){!function(t,e,r){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;ze(t,!0);var n=t.coordinates;switch(i){case"LineString":t.coordinates=qe(n,e,r);break;case"MultiLineString":t.coordinates=n.map(function(t){return qe(t,e,r)});break;case"Polygon":t.coordinates=Ke(n,e,r);break;case"MultiPolygon":t.coordinates=n.map(function(t){return Ke(t,e,r)})}}(t,r,i)}),t},e.square=rr,e.squareGrid=gg,e.standardDeviationalEllipse=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,i=e.weight,n=e.properties||{};if(!w(r))throw new Error("steps must be a number");if(!I(n))throw new Error("properties must be a number");var o=G(t).length,s=na(t,{weight:i}),a=0,u=0,l=0;D(t,function(t){var e=t.properties[i]||1,r=oa($(t),$(s));a+=Math.pow(r.x,2)*e,u+=Math.pow(r.y,2)*e,l+=r.x*r.y*e});var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),p=2*l,f=Math.atan((c+h)/p),g=180*f/Math.PI,y=0,v=0,m=0;D(t,function(t){var e=t.properties[i]||1,r=oa($(t),$(s));y+=Math.pow(r.x*Math.cos(f)-r.y*Math.sin(f),2)*e,v+=Math.pow(r.x*Math.sin(f)+r.y*Math.cos(f),2)*e,m+=e});var _=Math.sqrt(2*y/m),b=Math.sqrt(2*v/m),S=ra(s,_,b,{units:"degrees",angle:g,steps:r,properties:n}),x=ye(t,d([S])),O={meanCenterCoordinates:$(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*G(x).length/o};return S.properties.standardDeviationalEllipse=O,S},e.tag=function(t,e,r,i){return t=xe(t),e=xe(e),D(t,function(t){t.properties||(t.properties={}),D(e,function(e){void 0===t.properties[i]&&de(t,e)&&(t.properties[i]=e.properties[r])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=jr(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(jr(t))}),e},e.tin=me,e.toMercator=ha,e.toWgs84=pa,e.transformRotate=Po,e.transformScale=wo,e.transformTranslate=function(t,e,r,i){if(!I(i=i||{}))throw new Error("options is invalid");var n=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return e<0&&(e=-e,r+=180),!1!==s&&void 0!==s||(t=xe(t)),A(t,function(t){var i=$(vn(t,e,r,{units:n}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=yg,e.truncate=Ri,e.union=function(t,e,r){void 0===r&&(r={});var i=nt(t),n=nt(e),o=gu.union(i.coordinates,n.coordinates);return 0===o.length?null:1===o.length?c(o[0],r.properties):v(o,r.properties)},e.unitsFactors=n,e.unkinkPolygon=function(t){var e=[];return V(t,function(t){"Polygon"===t.geometry.type&&D(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,r=[],i=0;i<e;i++){var n=t.geometry.coordinates[i];ki(n[0],n[n.length-1])||n.push(n[0]),r.push.apply(r,n.slice(0,n.length-1))}if(!function(t){for(var e={},r=1,i=0,n=t.length;i<n;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){r=0;break}e[t[i]]=1}return r}(r))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=r.length,s=function(t,e,r){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var i=t.geometry.coordinates,n=[],o={};if(r){for(var s=[],a=0;a<i.length;a++)for(var u=0;u<i[a].length-1;u++)s.push(g(a,u));var l=Ot();l.load(s)}for(var c=0;c<i.length;c++)for(var h=0;h<i[c].length-1;h++)if(r)l.search(g(c,h)).forEach(function(t){var e=t.ring,r=t.edge;d(c,h,e,r)});else for(var p=0;p<i.length;p++)for(var f=0;f<i[p].length-1;f++)d(c,h,p,f);return e||(n={type:"Feature",geometry:{type:"MultiPoint",coordinates:n}}),n;function d(t,r,s,a){var u,l,c=i[t][r],h=i[t][r+1],p=i[s][a],f=i[s][a+1],d=function(t,e,r,i){if(Ai(t,r)||Ai(t,i)||Ai(e,r)||Ai(i,r))return null;var n=t[0],o=t[1],s=e[0],a=e[1],u=r[0],l=r[1],c=i[0],h=i[1],p=(n-s)*(l-h)-(o-a)*(u-c);return 0===p?null:[((n*a-o*s)*(u-c)-(n-s)*(u*h-l*c))/p,((n*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/p]}(c,h,p,f);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=f[0]!==p[0]?(d[0]-p[0])/(f[0]-p[0]):(d[1]-p[1])/(f[1]-p[1]),!(u>=1||u<=0||l>=1||l<=0))){var g=d,y=!o[g];y&&(o[g]=!0),e?n.push(e(d,t,r,c,h,u,s,a,p,f,l,y)):n.push(d)}}function g(t,e){var r,n,o,s,a=i[t][e],u=i[t][e+1];return a[0]<u[0]?(r=a[0],n=u[0]):(r=u[0],n=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:r,minY:o,maxX:n,maxY:s,ring:t,edge:e}}}(t,function(t,e,r,i,n,o,s,a,u,l,c,h){return[t,e,r,i,n,o,s,a,u,l,c,h]}),a=s.length;if(0==a){var u=[];for(i=0;i<e;i++)u.push(c([t.geometry.coordinates[i]],{parent:-1,winding:Di(t.geometry.coordinates[i])}));var l=d(u);return k(),G(),l}var h=[],p=[];for(i=0;i<e;i++){h.push([]);for(var f=0;f<t.geometry.coordinates[i].length-1;f++)h[i].push([new ji(t.geometry.coordinates[i][Gi(f+1,t.geometry.coordinates[i].length-1)],1,[i,f],[i,Gi(f+1,t.geometry.coordinates[i].length-1)],void 0)]),p.push(new Ni(t.geometry.coordinates[i][f],[i,Gi(f-1,t.geometry.coordinates[i].length-1)],[i,f],void 0,void 0,!1,!0))}for(i=0;i<a;i++)h[s[i][1]][s[i][2]].push(new ji(s[i][0],s[i][5],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0)),s[i][11]&&p.push(new Ni(s[i][0],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0,void 0,!0,!0));var g=p.length;for(i=0;i<h.length;i++)for(f=0;f<h[i].length;f++)h[i][f].sort(function(t,e){return t.param<e.param?-1:1});var y=[];for(i=0;i<g;i++)y.push({minX:p[i].coord[0],minY:p[i].coord[1],maxX:p[i].coord[0],maxY:p[i].coord[1],index:i});var v=Ot();for(v.load(y),i=0;i<h.length;i++)for(f=0;f<h[i].length;f++)for(var m=0;m<h[i][f].length;m++){b=m==h[i][f].length-1?h[i][Gi(f+1,t.geometry.coordinates[i].length-1)][0].coord:h[i][f][m+1].coord;var _=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[i][f][m].nxtIsectAlongEdgeIn=_.index}for(i=0;i<h.length;i++)for(f=0;f<h[i].length;f++)for(m=0;m<h[i][f].length;m++){var b=h[i][f][m].coord,S=(_=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;S<o?p[S].nxtIsectAlongRingAndEdge2=h[i][f][m].nxtIsectAlongEdgeIn:ki(p[S].ringAndEdge1,h[i][f][m].ringAndEdgeIn)?p[S].nxtIsectAlongRingAndEdge1=h[i][f][m].nxtIsectAlongEdgeIn:p[S].nxtIsectAlongRingAndEdge2=h[i][f][m].nxtIsectAlongEdgeIn}var x=[];for(i=0,f=0;f<e;f++){var O=i;for(m=0;m<t.geometry.coordinates[f].length-1;m++)p[i].coord[0]<p[O].coord[0]&&(O=i),i++;var E=p[O].nxtIsectAlongRingAndEdge2;for(m=0;m<p.length;m++)if(p[m].nxtIsectAlongRingAndEdge1==O||p[m].nxtIsectAlongRingAndEdge2==O){var C=m;break}var T=Fi([p[C].coord,p[O].coord,p[E].coord],!0)?1:-1;x.push({isect:O,parent:-1,winding:T})}for(x.sort(function(t,e){return p[t.isect].coord>p[e.isect].coord?-1:1}),u=[];x.length>0;){var P=x.pop(),w=P.isect,I=P.parent,L=P.winding,R=u.length,M=[p[w].coord],A=w;if(p[w].ringAndEdge1Walkable)var j=p[w].ringAndEdge1,N=p[w].nxtIsectAlongRingAndEdge1;else j=p[w].ringAndEdge2,N=p[w].nxtIsectAlongRingAndEdge2;for(;!ki(p[w].coord,p[N].coord);){M.push(p[N].coord);var F=void 0;for(i=0;i<x.length;i++)if(x[i].isect==N){F=i;break}if(null!=F&&x.splice(F,1),ki(j,p[N].ringAndEdge1)){if(j=p[N].ringAndEdge2,p[N].ringAndEdge2Walkable=!1,p[N].ringAndEdge1Walkable){var D={isect:N};Fi([p[A].coord,p[N].coord,p[p[N].nxtIsectAlongRingAndEdge2].coord],1==L)?(D.parent=I,D.winding=-L):(D.parent=R,D.winding=L),x.push(D)}A=N,N=p[N].nxtIsectAlongRingAndEdge2}else j=p[N].ringAndEdge1,p[N].ringAndEdge1Walkable=!1,p[N].ringAndEdge2Walkable&&(D={isect:N},Fi([p[A].coord,p[N].coord,p[p[N].nxtIsectAlongRingAndEdge1].coord],1==L)?(D.parent=I,D.winding=-L):(D.parent=R,D.winding=L),x.push(D)),A=N,N=p[N].nxtIsectAlongRingAndEdge1}M.push(p[N].coord),u.push(c([M],{index:R,parent:I,winding:L,netWinding:void 0}))}function k(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var r=-1,i=0;i<l.features.length;i++)t[e]!=i&&de(l.features[t[e]].geometry.coordinates[0][0],l.features[i],{ignoreBoundary:!0})&&mi(l.features[i])<1/0&&(r=i);l.features[t[e]].properties.parent=r}}function G(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,B(t,e)}}function B(t,e){for(var r=0;r<l.features.length;r++)if(l.features[r].properties.parent==t){var i=e+l.features[r].properties.winding;l.features[r].properties.netWinding=i,B(r,i)}}return l=d(u),k(),G(),l}(t),function(r){e.push(c(r.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=L,e.validateId=R,e.voronoi=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return it(t,"Point","points"),d(function(){var t=Ss,e=xs,r=null;function i(i){return new ta(i.map(function(r,n){var o=[Math.round(t(r,n,i)/Js)*Js,Math.round(e(r,n,i)/Js)*Js];return o.index=n,o.data=r,o}),r)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:bs(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:bs(+t),i):e},i.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},i.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],i):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},i}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map(ea))},e.within=ye,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,r(617))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolyline=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(13)),s=f(r(16)),a=f(r(14)),u=r(319),l=r(124),c=p(r(320)),h=p(r(321));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.type="LineString",(0,l.extend)(r,t),r}return(0,a.default)(e,t),(0,s.default)(e,null,[{key:"getPolylinesCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var i=0;i<t[r].geometry.length;i++){for(var n=[],o=t[r].geometry[i].coordinates,s=0;s<o.length;s++)n.push([o[s].x,o[s].y]);e.push(n)}return e}},{key:"getPolylinesCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(c.lineString(t[r]));return h.center(h.featureCollection(e))}}]),e}(u.Geometry);e.VPolyline=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolygon=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(13)),s=f(r(16)),a=f(r(14)),u=r(319),l=r(124),c=p(r(320)),h=p(r(321));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));if(r.type="Polygon",r.exterior=[],r.interior=[],(0,l.extend)(r,t),r.exterior.length>0&&r.coordinates.push(r.exterior),r.interior.length>0)for(var s=0;s<r.interior.length;s++)r.coordinates.push(r.interior[s]);return r}return(0,a.default)(e,t),(0,s.default)(e,null,[{key:"getPolygonsCoordinates",value:function(t){for(var e=[],r=0;r<t.length;r++)for(var i=0;i<t[r].geometry.length;i++){for(var n=[],o=t[r].geometry[i].exterior,s=[],a=t[r].geometry[i].interior,u=[],l=0;l<o.length;l++)s.push([o[l].x,o[l].y]);for(var c=0;c<a.length;c++){for(var h=[],p=0;p<a[c].length;p++)h.push([a[c][p].x,a[c][p].y]);u.push(h)}n.push(s),n=n.concat(u),e.push(n)}return e}},{key:"getPolygonsCenter",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(c.polygon(t[r]));return h.center(h.featureCollection(e))}}]),e}(u.Geometry);e.VPolygon=d,Zondy.Service.VPolygon=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo=void 0!==r.srcInfo?r.srcInfo:null,s.desInfo=void 0!==r.desInfo?r.desInfo:null,s.idstr=void 0!==r.idstr?r.idstr:"",s.angleType=void 0!==r.angleType?r.angleType:0,s.isDissolve=void 0===r.isDissolve||r.isDissolve,s.isDynPrj=void 0!==r.isDynPrj&&r.isDynPrj,s}return(0,s.default)(e,t),e}(r(140).AnalysisBase);e.ClassBufferBase=l,a.Zondy.Service.ClassBufferBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.sfGeometryXML=void 0!==r.sfGeometryXML?r.sfGeometryXML:null,s.attStrctXML=void 0!==r.attStrctXML?r.attStrctXML:null,s.attRowsXML=void 0!==r.attRowsXML?r.attRowsXML:null,s.traceRadius=void 0!==r.traceRadius?r.traceRadius:1e-4,s.resultName=void 0!==r.resultName?r.resultName:null,s.inFormat=void 0!==r.inFormat?r.inFormat:"json",s}return(0,s.default)(e,t),e}(r(140).AnalysisBase);e.FeatureBuffBase=l,a.Zondy.Service.FeatureBuffBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo1=void 0!==r.srcInfo1?r.srcInfo1:null,s.desInfo=void 0!==r.desInfo?r.desInfo:null,s.attOptType=void 0!==r.attOptType?r.attOptType:1,s.infoOptType=void 0!==r.infoOptType?r.infoOptType:1,s.overType=void 0!==r.overType?r.overType:3,s.isCleanNode=void 0!==r.isCleanNode&&r.isCleanNode,s.isLabelPnt=void 0!==r.isLabelPnt&&r.isLabelPnt,s.isValidReg=void 0!==r.isValidReg&&r.isValidReg,s.isReCalculate=void 0===r.isReCalculate||r.isReCalculate,s.radius=void 0!==r.radius?r.radius:.001,s}return(0,s.default)(e,t),e}(r(140).AnalysisBase);e.OverlayBase=l,a.Zondy.Service.OverlayBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBase=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.clsName=void 0!==r.clsName?r.clsName:null,s.desClsName=void 0!==r.desClsName?r.desClsName:null,s.resultName=void 0!==r.resultName?r.resultName:null,s}return(0,s.default)(e,t),e}(r(140).AnalysisBase);e.ProjectBase=l,a.Zondy.Service.ProjectBase=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalServiceBase=void 0;var i=d(r(53)),n=d(r(12)),o=d(r(8)),s=d(r(16)),a=d(r(13)),u=d(r(14)),l=r(6),c=r(165),h=(r(114),r(55)),p=r(329),f=r(330);function d(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.dots=void 0!==r.dots?r.dots:null,i.projectInfo=void 0!==r.projectInfo?r.projectInfo:null,i.projectInfoBySRSID=void 0!==r.projectInfoBySRSID?r.projectInfoBySRSID:null,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e,r){t instanceof p.CProjectParam&&(this.projectInfo=t),t instanceof f.CProjectBySRSID&&(this.projectInfoBySrsID=t);var n={};n.Dots=this.dots,n.ProjectInfo=this.projectInfo,n.ProjectInfoBySrsID=this.projectInfoBySrsID;var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.CalServiceBase=g,l.Zondy.Service.CalServiceBase=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectParam=void 0;var i=r(6),n=r(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};e.CProjectParam=o,i.Zondy.Service.CProjectParam=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectBySRSID=void 0;var i=r(6),n=(r(384),function(t,e){this.DesSrsID=t,this.GdbInfo=e});e.CProjectBySRSID=n,i.Zondy.Service.CProjectBySRSID=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfoAttribute=void 0;var i=r(6),n=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};e.FolderInfoAttribute=n,i.Zondy.Object.Theme.FolderInfoAttribute=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(182);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,i.default)(this,t),this.util=new s.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}return(0,n.default)(t,[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,i,n,o,s){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var u=this._ctx.createRadialGradient(t,e,r,i,n,o),l=0,c=s.length;l<c;l++)u.addColorStop(s[l][0],s[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,r,i,n){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var s=this._ctx.createLinearGradient(t,e,r,i),a=0,u=n.length;a<u;a++)s.addColorStop(n[a][0],n[a][1]);return s.__nonRecursion=!0,s}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var i=[],n=((e=this.getData(e))[0]-t[0])/r,o=(e[1]-t[1])/r,s=(e[2]-t[2])/r,a=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],h=t[2],p=t[3];u<r;u++)i[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),p.toFixed(4)-0],"rgba"),l+=n,c+=o,h+=s,p+=a;return l=e[0],c=e[1],h=e[2],p=e[3],i[u]=this.toColor([l,c,h,p],"rgba"),i}},{key:"getGradientColors",value:function(t,e){var r=[],i=t.length;if(void 0===e&&(e=20),1===i)r=this.getStepColors(t[0],t[0],e);else if(i>1)for(var n=0,o=i-1;n<o;n++){var s=this.getStepColors(t[n],t[n+1],e);n<o-1&&s.pop(),r=r.concat(s)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),i=r[3];return void 0===i&&(i=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=i,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,i=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(i<<4)+i).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var i=this.getData(t),n=0;n<3;n++)i[n]=1===r?i[n]*(1-e)|0:(255-i[n])*e+i[n]|0;return"rgb("+i.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var i=2*(r=1-this.adjust(r,[0,1]))-1,n=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),s=n[3]-o[3],a=((i*s==-1?i:(i+s)/(1+i*s))+1)/2,u=1-a,l=[],c=0;c<3;c++)l[c]=n[c]*a+o[c]*u;var h=n[3]*r+o[3]*(1-r);return h=Math.max(0,Math.min(1,h)),1===n[3]&&1===o[3]?this.toColor(l,"rgb"):(l[3]=h,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,i,n=(e=this.normalize(e)).match(this.colorRegExp);if(null===n)throw new Error("The color format error");var o,s=[];if(n[2])o=[(r=n[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],s=this.map(o,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(n[4]){var a=n[4].split(",");i=a[3],o=a.slice(0,3),s=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==i&&s.push(this.adjust(parseFloat(i),[0,1]))}else if(n[5]||n[6]){var u=(n[5]||n[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],h=u[2];i=u[3],(s=this.map([c,h],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==i&&s.push(this.adjust(parseFloat(i),[0,1]))}return s}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,i=0;i<r;i++)t[i]=e(t[i]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,i,n=t[0],o=t[1],s=t[2];if(0===o)e=255*s,r=255*s,i=255*s;else{var a=6*n;6===a&&(a=0);var u=0|a,l=s*(1-o),c=s*(1-o*(a-u)),h=s*(1-o*(1-(a-u))),p=0,f=0,d=0;0===u?(p=s,f=h,d=l):1===u?(p=c,f=s,d=l):2===u?(p=l,f=s,d=h):3===u?(p=l,f=c,d=s):4===u?(p=h,f=l,d=s):(p=s,f=l,d=c),e=255*p,r=255*f,i=255*d}return[e,r,i]}},{key:"_HSL_2_RGB",value:function(t){var e,r,i,n=t[0],o=t[1],s=t[2];if(0===o)e=255*s,r=255*s,i=255*s;else{var a,u=2*s-(a=s<.5?s*(1+o):s+o-o*s);e=255*this._HUE_2_RGB(u,a,n+1/3),r=255*this._HUE_2_RGB(u,a,n),i=255*this._HUE_2_RGB(u,a,n-1/3)}return[e,r,i]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,i=t[0]/255,n=t[1]/255,o=t[2]/255,s=Math.min(i,n,o),a=Math.max(i,n,o),u=a-s,l=a;if(0===u)e=0,r=0;else{r=u/a;var c=((a-i)/6+u/2)/u,h=((a-n)/6+u/2)/u,p=((a-o)/6+u/2)/u;i===a?e=p-h:n===a?e=1/3+c-p:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,i=t[0]/255,n=t[1]/255,o=t[2]/255,s=Math.min(i,n,o),a=Math.max(i,n,o),u=a-s,l=(a+s)/2;if(0===u)e=0,r=0;else{r=l<.5?u/(a+s):u/(2-a-s);var c=((a-i)/6+u/2)/u,h=((a-n)/6+u/2)/u,p=((a-o)/6+u/2)/u;i===a?e=p-h:n===a?e=1/3+c-p:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}}]),t}();e.Color=u,o.Zondy.LevelRenderer.Tool.Color=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),n=r(6),o=function t(){(0,i.default)(this,t)};o.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},o.catchBrushException=!1,o.debugMode=0,e.Config=o,n.Zondy.LevelRenderer.Config=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicImage=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,r,i){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};r&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var s=o.image,a=this;if("string"==typeof s){var u=s;this._imageCache[u]?s=this._imageCache[u]:((s=new Image).onload=function(){s.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(a),e._refreshTimeout=setTimeout(function(){i&&i(e._needsRefresh),e._needsRefresh=[]},10)},s.src=u,this._imageCache[u]=s)}if(s){if("IMG"===s.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!==s.readyState)return}else if(!s.complete)return;var l=o.width||s.width,c=o.height||s.height,h=o.x+n[0],p=o.y+n[1];if(!s.width||!s.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var f=o.sx+n[0]||0,d=o.sy+n[1]||0;t.drawImage(s,f,d,o.sWidth,o.sHeight,h,p,l,c)}else if(o.sx&&o.sy){var g=o.sx+n[0],y=o.sy+n[1],v=l-g,m=c-y;t.drawImage(s,g,y,v,m,h,p,l,c)}else t.drawImage(s,h,p,l,c);o.width||(o.width=l),o.height||(o.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),e}(r(108).Shape);h._needsRefresh=[],h._refreshTimeout=null,e.SmicImage=h,l.Zondy.LevelRenderer.SmicImage=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.pointList=t,r.CLASS_NAME="Zondy.Feature.ShapeParameters.Line",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Line=h,l.Zondy.Feature.ShapeParameters.Line=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o));return a.x=isNaN(t)?0:t,a.y=isNaN(r)?0:r,a.r=isNaN(o)?0:o,a.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle",a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Circle=h,l.Zondy.Feature.ShapeParameters.Circle=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPoint=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}]),e}(r(108).Shape);e.SmicPoint=h,l.Zondy.LevelRenderer.SmicPoint=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicBrokenLine=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(108),h=r(258),p=r(115);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=e.pointList;if(!(i.length<2)){var n=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,s,a,u=p.SUtil.SUtil_smoothBezier(i,e.smooth,!1,e.smoothConstraint,r);t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var l=0;l<n-1;l++)o=u[2*l],s=u[2*l+1],a=[i[l+1][0]+r[0],i[l+1][1]+r[1]],t.bezierCurveTo(o[0],o[1],s[0],s[1],a[0],a[1])}else if("spline"===e.smooth&&(n=(i=p.SUtil.SUtil_smoothSpline(i,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,h=c,f=c;"dashed"===e.lineType&&(h*=5,f*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c),"dot"===e.lineType&&(f*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c)),"dash"===e.lineType&&(h*=4,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"longdash"===e.lineType&&(h*=8,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var d=1;d<n;d++)p.SUtil.SUtil_dashedLineTo(t,i[d-1][0]+r[0],i[d-1][1]+r[1],i[d][0]+r[0],i[d][1]+r[1],c,[h,f])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var g=e.lineWidth||1,y=g,v=g,m=g,_=g;"dashot"===e.lineType&&(y*=4,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,v+=g,m=1,_+=g)),"longdashdot"===e.lineType&&(y*=8,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,v+=g,m=1,_+=g)),g=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var b=1;b<n;b++)p.SUtil.SUtil_dashedLineTo(t,i[b-1][0]+r[0],i[b-1][1]+r[1],i[b][0]+r[0],i[b][1]+r[1],g,[y,v,m,_])}}else{t.moveTo(i[0][0]+r[0],i[0][1]+r[1]);for(var S=1;S<n;S++)t.lineTo(i[S][0]+r[0],i[S][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return h.SmicPolygon.prototype.getRect.apply(this,[t,e])}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}}]),e}(c.Shape);e.SmicBrokenLine=d,l.Zondy.LevelRenderer.SmicBrokenLine=d},function(t,e,r){"use strict";r.r(e);var i=r(26),n=r(3),o=r(1),s=r(20),a=r(39),u=r(38),l=r(19),c=r(9);function h(t,e,r){for(var i,n,o,s,a,u,c=[],h=t(0),p=t(1),f=e(h),d=e(p),g=[p,h],y=[d,f],v=[1,0],m={},_=1e5;--_>0&&v.length>0;)o=v.pop(),h=g.pop(),f=y.pop(),(u=o.toString())in m||(c.push(f[0],f[1]),m[u]=!0),s=v.pop(),p=g.pop(),d=y.pop(),n=e(i=t(a=(o+s)/2)),Object(l.h)(n[0],n[1],f[0],f[1],d[0],d[1])<r?(c.push(d[0],d[1]),m[u=s.toString()]=!0):(v.push(s,a,a,o),y.push(d,n,n,f),g.push(p,i,i,h));return c}var p=r(59),f=r(98),d=r(94),g=r(88),y=new d.default({color:"rgba(0,0,0,0.2)"}),v=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],m=function(t){var e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:y,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?i.degreesToStringHDMS.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?i.degreesToStringHDMS.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new g.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new f.default({color:"rgba(0,0,0,1)"}),stroke:new d.default({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new g.default({font:"12px Calibri,sans-serif",textAlign:"end",fill:new f.default({color:"rgba(0,0,0,1)"}),stroke:new d.default({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.intervals_=void 0!==e.intervals?e.intervals:v,this.setMap(void 0!==e.map?e.map:null)};m.prototype.addMeridian_=function(t,e,r,i,n,s){var a=this.getMeridian_(t,e,r,i,s);if(Object(o.intersects)(a.getExtent(),n)){if(this.meridiansLabels_){var u=this.getMeridianPoint_(a,n,s);this.meridiansLabels_[s]={geom:u,text:this.lonLabelFormatter_(t)}}this.meridians_[s++]=a}return s},m.prototype.getMeridianPoint_=function(t,e,r){var i,n=t.getFlatCoordinates(),o=Math.max(e[1],n[1]),s=Math.min(e[3],n[n.length-1]),a=Object(l.a)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,s),c=[n[0],a];return r in this.meridiansLabels_?(i=this.meridiansLabels_[r].geom).setCoordinates(c):i=new u.default(c),i},m.prototype.addParallel_=function(t,e,r,i,n,s){var a=this.getParallel_(t,e,r,i,s);if(Object(o.intersects)(a.getExtent(),n)){if(this.parallelsLabels_){var u=this.getParallelPoint_(a,n,s);this.parallelsLabels_[s]={geom:u,text:this.latLabelFormatter_(t)}}this.parallels_[s++]=a}return s},m.prototype.getParallelPoint_=function(t,e,r){var i,n=t.getFlatCoordinates(),o=Math.max(e[0],n[0]),s=Math.min(e[2],n[n.length-2]),a=[Object(l.a)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,s),n[1]];return r in this.parallelsLabels_?(i=this.parallelsLabels_[r].geom).setCoordinates(a):i=new u.default(a),i},m.prototype.createGraticule_=function(t,e,r,i){var n=this.getInterval_(r);if(-1==n)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o,s,a,u,h=this.toLonLatTransform_(e),p=h[0],f=h[1],d=this.maxLines_,g=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],y=(g=Object(c.transformExtent)(g,this.projection_,"EPSG:4326"))[3],v=g[2],m=g[1],_=g[0];for(p=Math.floor(p/n)*n,u=Object(l.a)(p,this.minLon_,this.maxLon_),s=this.addMeridian_(u,m,y,i,t,0),o=0;u!=this.minLon_&&o++<d;)u=Math.max(u-n,this.minLon_),s=this.addMeridian_(u,m,y,i,t,s);for(u=Object(l.a)(p,this.minLon_,this.maxLon_),o=0;u!=this.maxLon_&&o++<d;)u=Math.min(u+n,this.maxLon_),s=this.addMeridian_(u,m,y,i,t,s);for(this.meridians_.length=s,this.meridiansLabels_&&(this.meridiansLabels_.length=s),f=Math.floor(f/n)*n,a=Object(l.a)(f,this.minLat_,this.maxLat_),s=this.addParallel_(a,_,v,i,t,0),o=0;a!=this.minLat_&&o++<d;)a=Math.max(a-n,this.minLat_),s=this.addParallel_(a,_,v,i,t,s);for(a=Object(l.a)(f,this.minLat_,this.maxLat_),o=0;a!=this.maxLat_&&o++<d;)a=Math.min(a+n,this.maxLat_),s=this.addParallel_(a,_,v,i,t,s);this.parallels_.length=s,this.parallelsLabels_&&(this.parallelsLabels_.length=s)},m.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],i=-1,n=Math.pow(this.targetSize_*t,2),o=[],s=[],a=0,u=this.intervals_.length;a<u;++a){var l=this.intervals_[a]/2;if(o[0]=e-l,o[1]=r-l,s[0]=e+l,s[1]=r+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=n)break;i=this.intervals_[a]}return i},m.prototype.getMap=function(){return this.map_},m.prototype.getMeridian_=function(t,e,r,i,n){var o=function(t,e,r,i,n){var o=Object(c.get)("EPSG:4326");return h(function(i){return[t,e+(r-e)*i]},Object(c.getTransform)(o,i),n)}(t,e,r,this.projection_,i),u=this.meridians_[n];return u?(u.setFlatCoordinates(s.default.XY,o),u.changed()):u=this.meridians_[n]=new a.default(o,s.default.XY),u},m.prototype.getMeridians=function(){return this.meridians_},m.prototype.getParallel_=function(t,e,r,i,n){var o=function(t,e,r,i,n){var o=Object(c.get)("EPSG:4326");return h(function(i){return[e+(r-e)*i,t]},Object(c.getTransform)(o,i),n)}(t,e,r,this.projection_,i),u=this.parallels_[n];return u?(u.setFlatCoordinates(s.default.XY,o),u.changed()):u=new a.default(o,s.default.XY),u},m.prototype.getParallels=function(){return this.parallels_},m.prototype.handlePostCompose_=function(t){var e,r,i,n,o=t.vectorContext,s=t.frameState,a=s.extent,u=s.viewState,l=u.center,h=u.projection,p=u.resolution,f=s.pixelRatio,d=p*p/(4*f*f);for((!this.projection_||!Object(c.equivalent)(this.projection_,h))&&this.updateProjectionInfo_(h),this.createGraticule_(a,l,p,d),o.setFillStrokeStyle(null,this.strokeStyle_),e=0,r=this.meridians_.length;e<r;++e)i=this.meridians_[e],o.drawGeometry(i);for(e=0,r=this.parallels_.length;e<r;++e)i=this.parallels_[e],o.drawGeometry(i);if(this.meridiansLabels_)for(e=0,r=this.meridiansLabels_.length;e<r;++e)n=this.meridiansLabels_[e],this.lonLabelStyle_.setText(n.text),o.setTextStyle(this.lonLabelStyle_),o.drawGeometry(n.geom);if(this.parallelsLabels_)for(e=0,r=this.parallelsLabels_.length;e<r;++e)n=this.parallelsLabels_[e],this.latLabelStyle_.setText(n.text),o.setTextStyle(this.latLabelStyle_),o.drawGeometry(n.geom)},m.prototype.updateProjectionInfo_=function(t){var e=Object(c.get)("EPSG:4326"),r=t.getWorldExtent(),i=Object(c.transformExtent)(r,e,t);this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0],this.maxLatP_=i[3],this.maxLonP_=i[2],this.minLatP_=i[1],this.minLonP_=i[0],this.fromLonLatTransform_=Object(c.getTransform)(e,t),this.toLonLatTransform_=Object(c.getTransform)(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(o.getCenter)(t.getExtent())),this.projection_=t},m.prototype.setMap=function(t){this.map_&&(Object(n.unlistenByKey)(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=Object(n.listen)(t,p.a.POSTCOMPOSE,this.handlePostCompose_,this),t.render()),this.map_=t},e.default=m},function(t,e,r){"use strict";r.r(e);var i=r(57),n=r(78),o=r(24),s=r(42),a=r(27),u=r(21),l=function(t){function e(e){var r=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return a.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,r,i="",a="",l=0,c=null,h=0,p=0;this.stroke_&&(null===(r=this.stroke_.getColor())&&(r=u.defaultStrokeStyle),r=Object(n.asColorLike)(r),void 0===(p=this.stroke_.getWidth())&&(p=u.defaultLineWidth),c=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset(),s.CANVAS_LINE_DASH||(c=null,h=0),void 0===(a=this.stroke_.getLineJoin())&&(a=u.defaultLineJoin),void 0===(i=this.stroke_.getLineCap())&&(i=u.defaultLineCap),void 0===(l=this.stroke_.getMiterLimit())&&(l=u.defaultMiterLimit));var f=2*(this.radius_+p)+1,d={strokeStyle:r,strokeWidth:p,size:f,lineCap:i,lineDash:c,lineDashOffset:h,lineJoin:a,miterLimit:l};if(void 0===t){var g=Object(o.createCanvasContext2D)(f,f);this.canvas_=g.canvas,e=f=this.canvas_.width,this.draw_(d,g,0,0),this.createHitDetectionCanvas_(d)}else{f=Math.round(f);var y,v=!this.fill_;v&&(y=this.drawHitDetectionCanvas_.bind(this,d));var m=this.getChecksum(),_=t.add(m,f,f,this.draw_.bind(this,d),y);this.canvas_=_.image,this.origin_=[_.offsetX,_.offsetY],e=_.image.width,v?(this.hitDetectionCanvas_=_.hitImage,this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[f/2,f/2],this.size_=[f,f],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,r,i){var o,s,a;e.setTransform(1,0,0,1,0,0),e.translate(r,i),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(l*=2),o=0;o<=l;o++)s=2*o*Math.PI/l-Math.PI/2+this.angle_,a=o%2==0?this.radius_:c,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h=u.defaultFillStyle),e.fillStyle=Object(n.asColorLike)(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(o.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var s,a,l,c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(o*=2),s=0;s<=o;s++)l=2*s*Math.PI/o-Math.PI/2+this.angle_,a=s%2==0?this.radius_:c,e.lineTo(t.size/2+a*Math.cos(l),t.size/2+a*Math.sin(l))}e.fillStyle=Object(i.asString)(u.defaultFillStyle),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var r="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[r,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(r(229).default);e.default=l},function(t,e,r){"use strict";function i(t,e){return[[-1/0,-1/0,1/0,1/0]]}function n(t,e){return[t]}function o(t){return function(e,r){var i=t.getZForResolution(r),n=t.getTileRangeForExtentAndZ(e,i),o=[],s=[i,0,0];for(s[1]=n.minX;s[1]<=n.maxX;++s[1])for(s[2]=n.minY;s[2]<=n.maxY;++s[2])o.push(t.getTileCoordExtent(s));return o}}r.r(e),r.d(e,"all",function(){return i}),r.d(e,"bbox",function(){return n}),r.d(e,"tile",function(){return o})},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(50),o=r(17),s=r(28),a=r(24),u=r(3),l=r(10),c=r(189),h=r.n(c),p=r(1),f=r(84),d=r(9),g=r(49),y=r(30),v=r(21),m=r(234),_=r(64),b=r(158),S=r(91),x=r(18),O={image:[y.a.POLYGON,y.a.CIRCLE,y.a.LINE_STRING,y.a.IMAGE,y.a.TEXT],hybrid:[y.a.POLYGON,y.a.LINE_STRING]},E={image:[y.a.DEFAULT],hybrid:[y.a.IMAGE,y.a.TEXT,y.a.DEFAULT],vector:_.a},C=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?h()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(x.c)();var r=e.getRenderMode();this.zDirection=r===f.a.VECTOR?1:0,r!==f.a.VECTOR&&(this.context=Object(a.createCanvasContext2D)()),Object(u.listen)(v.labelCache,l.default.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(u.unlisten)(v.labelCache,l.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,r,i,n,s){var a=t.prototype.getTile.call(this,e,r,i,n,s);return a.getState()===o.default.LOADED&&(this.createReplayGroup_(a,n,s),this.context&&this.renderTileImage_(a,n,s)),a},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,r){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e,r)},e.prototype.createReplayGroup_=function(t,e,r){var i=this,n=this.getLayer(),s=n.getRevision(),a=n.getRenderOrder()||null,u=t.getReplayState(n);if(u.dirty||u.renderedRevision!=s||u.renderedRenderOrder!=a){for(var l=n.getSource(),c=l.getTileGrid(),h=l.getTileGridForProjection(r).getResolution(t.tileCoord[0]),f=t.extent,y=function(s,y){var v=t.getTile(t.tileKeys[s]);if(v.getState()==o.default.LOADED){var _=v.tileCoord,b=c.getTileCoordExtent(_),x=Object(p.getIntersection)(f,b),O=Object(p.equals)(b,x)?null:Object(p.buffer)(x,n.getRenderBuffer()*h,i.tmpExtent),E=v.getProjection(),C=!1;Object(d.equivalent)(r,E)||(C=!0,v.setProjection(r)),u.dirty=!1;var T=new m.a(0,x,h,e,l.getOverlaps(),i.declutterTree_,n.getRenderBuffer()),P=Object(S.b)(h,e),w=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,h)),e){var i=this.renderFeature(t,P,e,T);this.dirty_=this.dirty_||i,u.dirty=u.dirty||i}},I=v.getFeatures();a&&a!==u.renderedRenderOrder&&I.sort(a);for(var L=0,R=I.length;L<R;++L){var M=I[L];C&&(E.getUnits()==g.default.TILE_PIXELS&&(E.setWorldExtent(b),E.setExtent(v.getExtent())),M.getGeometry().transform(E,r)),O&&!Object(p.intersects)(O,M.getGeometry().getExtent())||w.call(i,M)}T.finish(),v.setReplayGroup(n,t.tileCoord.toString(),T)}},v=0,_=t.tileKeys.length;v<_;++v)y(v);u.renderedRevision=s,u.renderedRenderOrder=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,s){var a=e.viewState.resolution,u=e.viewState.rotation;r=void 0==r?0:r;var l,c,h,f,d=this.getLayer(),g={},y=this.renderedTiles;for(h=0,f=y.length;h<f;++h){var v=y[h];if(l=Object(p.buffer)(v.extent,r*a,l),Object(p.containsCoordinate)(l,t))for(var m=0,_=v.tileKeys.length;m<_;++m){var b=v.getTile(v.tileKeys[m]);if(b.getState()==o.default.LOADED){var S=b.getReplayGroup(d,v.tileCoord.toString());c=c||S.forEachFeatureAtCoordinate(t,a,u,r,{},function(t){var e=Object(i.getUid)(t);if(!(e in g))return g[e]=!0,n.call(s,t,d)},null)}}}return c},e.prototype.getReplayTransform_=function(t,e){var r=this.getLayer().getSource().getTileGrid(),i=t.tileCoord,n=r.getResolution(i[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,u=r.getTileCoordExtent(i,this.tmpExtent),l=o.center,c=Object(p.getTopLeft)(u),h=e.size,f=Math.round(s*h[0]/2),d=Math.round(s*h[1]/2);return Object(x.b)(this.tmpTransform_,f,d,n/a,n/a,o.rotation,(c[0]-l[0])/n,(l[1]-c[1])/n)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,r,i){var n=this.getLayer(),a=n.getRenderMode();if(a!=f.a.IMAGE){var u,l,c=n.getDeclutter()?{}:null,h=n.getSource(),p=E[a],d=r.pixelRatio,g=r.viewState.rotation,y=r.size;g&&(u=Math.round(d*y[0]/2),l=Math.round(d*y[1]/2),Object(v.rotateAtOffset)(e,-g,u,l)),c&&this.declutterTree_.clear();for(var _=r.viewHints,b=!(_[s.default.ANIMATING]||_[s.default.INTERACTING]),S=this.renderedTiles,x=h.getTileGridForProjection(r.viewState.projection),O=[],C=[],T=S.length-1;T>=0;--T){var P=S[T];if(P.getState()!=o.default.ABORT)for(var w=P.tileCoord,I=x.getTileCoordExtent(w,this.tmpExtent)[0]-P.extent[0],L=void 0,R=0,M=P.tileKeys.length;R<M;++R){var A=P.getTile(P.tileKeys[R]);if(A.getState()==o.default.LOADED){var j=A.getReplayGroup(n,w.toString());if(j&&j.hasReplays(p)){L||(L=this.getTransform(r,I));var N=A.tileCoord[0],F=j.getClipCoords(L);e.save(),e.globalAlpha=i.opacity;for(var D=0,k=O.length;D<k;++D){var G=O[D];N<C[D]&&(e.beginPath(),e.moveTo(F[0],F[1]),e.lineTo(F[2],F[3]),e.lineTo(F[4],F[5]),e.lineTo(F[6],F[7]),e.moveTo(G[6],G[7]),e.lineTo(G[4],G[5]),e.lineTo(G[2],G[3]),e.lineTo(G[0],G[1]),e.clip())}j.replay(e,L,g,{},b,p,c),e.restore(),O.push(F),C.push(N)}}}}c&&Object(m.b)(c,e,g,b),g&&Object(v.rotateAtOffset)(e,g,u,l)}t.prototype.postCompose.call(this,e,r,i)},e.prototype.renderFeature=function(t,e,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var o=0,s=r.length;o<s;++o)n=Object(S.d)(i,t,r[o],e,this.handleStyleImageChange_,this)||n;else n=Object(S.d)(i,t,r,e,this.handleStyleImageChange_,this);return n},e.prototype.renderTileImage_=function(t,e,r){var i=this.getLayer(),n=t.getReplayState(i),s=i.getRevision(),a=O[i.getRenderMode()];if(a&&n.renderedTileRevision!==s){n.renderedTileRevision=s;var u=t.wrappedTileCoord,l=u[0],c=i.getSource(),h=c.getTileGridForProjection(r),p=h.getResolution(l),f=t.getContext(i),d=c.getTilePixelSize(l,e,r);f.canvas.width=d[0],f.canvas.height=d[1];for(var g=h.getTileCoordExtent(u,this.tmpExtent),y=0,v=t.tileKeys.length;y<v;++y){var m=t.getTile(t.tileKeys[y]);if(m.getState()==o.default.LOADED){var _=e/p,b=Object(x.f)(this.tmpTransform_);Object(x.h)(b,_,-_),Object(x.j)(b,-g[0],-g[3]),m.getReplayGroup(i,t.tileCoord.toString()).replay(f,b,0,{},!0,a)}}}},e}(b.default);C.handles=function(t){return t.getType()===n.a.VECTOR_TILE},C.create=function(t,e){return new C(e)},e.default=C},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(48),o=r(51),s=r(25),a=r(119),u=r(23),l=r(3),c=r(10),h=r(1),p=r(227),f=r(11),d=r(43),g={LAYERS:"layers"},y=function(t){function e(e){var r=e||{},i=Object(f.assign)({},r);delete i.layers;var o=r.layers;t.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},Object(l.listen)(this,Object(s.getChangeEventType)(g.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new n.default(o.slice(),{unique:!0}):Object(u.a)("function"==typeof o.getArray,43):o=new n.default(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(l.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(l.listen)(t,o.default.ADD,this.handleLayersAdd_,this),Object(l.listen)(t,o.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(l.unlistenByKey);Object(f.clear)(this.listenerKeys_);for(var r=t.getArray(),n=0,s=r.length;n<s;n++){var u=r[n];this.listenerKeys_[Object(i.getUid)(u)]=[Object(l.listen)(u,a.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(l.listen)(u,c.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(i.getUid)(e)]=[Object(l.listen)(e,a.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(l.listen)(e,c.default.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,r=Object(i.getUid)(e);this.listenerKeys_[r].forEach(l.unlistenByKey),delete this.listenerKeys_[r],this.changed()},e.prototype.getLayers=function(){return this.get(g.LAYERS)},e.prototype.setLayers=function(t){this.set(g.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var i=this.getLayerState(),n=r,o=e.length;n<o;n++){var s=e[n];s.opacity*=i.opacity,s.visible=s.visible&&i.visible,s.maxResolution=Math.min(s.maxResolution,i.maxResolution),s.minResolution=Math.max(s.minResolution,i.minResolution),void 0!==i.extent&&(void 0!==s.extent?s.extent=Object(h.getIntersection)(s.extent,i.extent):s.extent=i.extent)}return e},e.prototype.getSourceState=function(){return d.a.READY},e}(p.default);e.default=y},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e){t.call(this,"Or",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(273).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e){t.call(this,"Not"),this.condition=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(132).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"BBOX"),this.geometryName=e,this.extent=r,this.srsName=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(132).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"Contains",e,r,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(195).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"Intersects",e,r,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(195).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"Within",e,r,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(195).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"PropertyIsEqualTo",e,r,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"PropertyIsNotEqualTo",e,r,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r){t.call(this,"PropertyIsLessThan",e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r){t.call(this,"PropertyIsLessThanOrEqualTo",e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r){t.call(this,"PropertyIsGreaterThan",e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r){t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(118).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e){t.call(this,"PropertyIsNull",e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(133).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"PropertyIsBetween",e),this.lowerBoundary=r,this.upperBoundary=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(133).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i,n,o,s){t.call(this,"PropertyIsLike",e),this.pattern=r,this.wildCard=void 0!==i?i:"*",this.singleChar=void 0!==n?n:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(133).a);e.default=i},function(t,e,r){"use strict";r.r(e);var i=function(t){function e(e,r,i){t.call(this,"During",e),this.begin=r,this.end=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(133).a);e.default=i},function(t,e,r){"use strict";r.r(e),r.d(e,"ATTRIBUTION",function(){return i});var i='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',n=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[i];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",s=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:o,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:s,wrapX:n.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r(171).default);e.default=n},function(t,e,r){"use strict";r.r(e),r.d(e,"createFromCapabilitiesMatrixSet",function(){return s});var i=r(15),n=r(9),o=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(r(101).default);function s(t,e,r){var s=[],a=[],u=[],l=[],c=[],h=void 0!==r?r:[],p=t.SupportedCRS,f=Object(n.get)(p.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(n.get)(p),d=f.getMetersPerUnit(),g="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(h.length>0)||Object(i.d)(h,function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix})){a.push(e.Identifier);var r=28e-5*e.ScaleDenominator/d,n=e.TileWidth,o=e.TileHeight;g?u.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):u.push(e.TopLeftCorner),s.push(r),l.push(n==o?n:[n,o]),c.push([e.MatrixWidth,-e.MatrixHeight])}}),new o({extent:e,origins:u,resolutions:s,matrixIds:a,tileSizes:l,sizes:c})}e.default=o},function(t,e,r){"use strict";r.r(e);var i=r(214);r.d(e,"Attribution",function(){return i.default});var n=r(62);r.d(e,"Control",function(){return n.default});var o=r(285);r.d(e,"FullScreen",function(){return o.default});var s=r(286);r.d(e,"MousePosition",function(){return s.default});var a=r(236);r.d(e,"OverviewMap",function(){return a.default});var u=r(213);r.d(e,"Rotate",function(){return u.default});var l=r(287);r.d(e,"ScaleLine",function(){return l.default});var c=r(212);r.d(e,"Zoom",function(){return c.default});var h=r(288);r.d(e,"ZoomSlider",function(){return h.default});var p=r(289);r.d(e,"ZoomToExtent",function(){return p.default});var f=r(90);r.d(e,"defaults",function(){return f.a})},function(t,e,r){var i=r(161),n=r(162),o=r(510)(!1),s=r(294)("IE_PROTO");t.exports=function(t,e){var r,a=n(t),u=0,l=[];for(r in a)r!=s&&i(a,r)&&l.push(r);for(;e.length>u;)i(a,r=e[u++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){var i=r(200);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,r){var i=r(293),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},function(t,e,r){t.exports=!r(138)&&!r(178)(function(){return 7!=Object.defineProperty(r(297)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var i=r(96),n=r(161),o=r(138),s=r(113),a=r(368),u=r(369).KEY,l=r(178),c=r(295),h=r(242),p=r(237),f=r(106),d=r(301),g=r(302),y=r(518),v=r(519),m=r(122),_=r(137),b=r(198),S=r(162),x=r(298),O=r(239),E=r(303),C=r(371),T=r(300),P=r(243),w=r(146),I=r(199),L=T.f,R=w.f,M=C.f,A=i.Symbol,j=i.JSON,N=j&&j.stringify,F=f("_hidden"),D=f("toPrimitive"),k={}.propertyIsEnumerable,G=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),V=Object.prototype,z="function"==typeof A&&!!P.f,W=i.QObject,Y=!W||!W.prototype||!W.prototype.findChild,X=o&&l(function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,r){var i=L(V,e);i&&delete V[e],R(t,e,r),i&&t!==V&&R(V,e,i)}:R,Z=function(t){var e=B[t]=E(A.prototype);return e._k=t,e},H=z&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},q=function(t,e,r){return t===V&&q(U,e,r),m(t),e=x(e,!0),m(r),n(B,e)?(r.enumerable?(n(t,F)&&t[F][e]&&(t[F][e]=!1),r=E(r,{enumerable:O(0,!1)})):(n(t,F)||R(t,F,O(1,{})),t[F][e]=!0),X(t,e,r)):R(t,e,r)},K=function(t,e){m(t);for(var r,i=y(e=S(e)),n=0,o=i.length;o>n;)q(t,r=i[n++],e[r]);return t},J=function(t){var e=k.call(this,t=x(t,!0));return!(this===V&&n(B,t)&&!n(U,t))&&(!(e||!n(this,t)||!n(B,t)||n(this,F)&&this[F][t])||e)},Q=function(t,e){if(t=S(t),e=x(e,!0),t!==V||!n(B,e)||n(U,e)){var r=L(t,e);return!r||!n(B,e)||n(t,F)&&t[F][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=M(S(t)),i=[],o=0;r.length>o;)n(B,e=r[o++])||e==F||e==u||i.push(e);return i},tt=function(t){for(var e,r=t===V,i=M(r?U:S(t)),o=[],s=0;i.length>s;)!n(B,e=i[s++])||r&&!n(V,e)||o.push(B[e]);return o};z||(a((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(r){this===V&&e.call(U,r),n(this,F)&&n(this[F],t)&&(this[F][t]=!1),X(this,t,O(1,r))};return o&&Y&&X(V,t,{configurable:!0,set:e}),Z(t)}).prototype,"toString",function(){return this._k}),T.f=Q,w.f=q,r(304).f=C.f=$,r(241).f=J,P.f=tt,o&&!r(201)&&a(V,"propertyIsEnumerable",J,!0),d.f=function(t){return Z(f(t))}),s(s.G+s.W+s.F*!z,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)f(et[rt++]);for(var it=I(f.store),nt=0;it.length>nt;)g(it[nt++]);s(s.S+s.F*!z,"Symbol",{for:function(t){return n(G,t+="")?G[t]:G[t]=A(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!z,"Object",{create:function(t,e){return void 0===e?E(t):K(E(t),e)},defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=l(function(){P.f(1)});s(s.S+s.F*ot,"Object",{getOwnPropertySymbols:function(t){return P.f(b(t))}}),j&&s(s.S+s.F*(!z||l(function(){var t=A();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){for(var e,r,i=[t],n=1;arguments.length>n;)i.push(arguments[n++]);if(r=e=i[1],(_(e)||void 0!==t)&&!H(t))return v(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!H(e))return e}),i[1]=e,N.apply(j,i)}}),A.prototype[D]||r(163)(A.prototype,D,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,r){t.exports=r(163)},function(t,e,r){var i=r(237)("meta"),n=r(137),o=r(161),s=r(146).f,a=0,u=Object.isExtensible||function(){return!0},l=!r(178)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!o(t,i)&&c(t),t}}},function(t,e,r){var i=r(96).document;t.exports=i&&i.documentElement},function(t,e,r){var i=r(162),n=r(304).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return n(t)}catch(t){return s.slice()}}(t):n(i(t))}},function(t,e,r){t.exports={default:r(521),__esModule:!0}},function(t,e,r){"use strict";var i=r(201),n=r(113),o=r(368),s=r(163),a=r(204),u=r(526),l=r(242),c=r(374),h=r(106)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,r,d,g,y,v){u(r,e,d);var m,_,b,S=function(t){if(!p&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},x=e+" Iterator",O="values"==g,E=!1,C=t.prototype,T=C[h]||C["@@iterator"]||g&&C[g],P=T||S(g),w=g?O?S("entries"):P:void 0,I="Array"==e&&C.entries||T;if(I&&(b=c(I.call(new t)))!==Object.prototype&&b.next&&(l(b,x,!0),i||"function"==typeof b[h]||s(b,h,f)),O&&T&&"values"!==T.name&&(E=!0,P=function(){return T.call(this)}),i&&!v||!p&&!E&&C[h]||s(C,h,P),a[e]=P,a[x]=f,g)if(m={values:O?P:S("values"),keys:y?P:S("keys"),entries:w},v)for(_ in m)_ in C||o(C,_,m[_]);else n(n.P+n.F*(p||E),e,m);return m}},function(t,e,r){var i=r(161),n=r(198),o=r(294)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e){},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CacheTileLayer=e.CacheTileLayerSource=void 0;var i=r(6),n=r(22),o=h(r(67)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),a=h(r(101)),u=r(4),l=r(11),c=h(r(149));function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){var e=t||{};o.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.token=e.token,this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var r=void 0!==e.projection?e.projection:null,i=[-180,-90,180,90];null!=r&&(i=r.getExtent()),this.extent=void 0!==e.extent?e.extent:i,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:s.getTopLeft(this.extent),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.guid=void 0!==e.guid?e.guid:(0,n.newGuid)(),this.cache=!0,this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,u.inherits)(p,o.default),p.prototype.getResolutions=function(){if(null==this.maxResolution){var t=s.getWidth(this.extent),e=s.getHeight(this.extent);this.maxResolution=(t>=e?t:e)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},p.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n;this.cache=!0,n=""===this.domain?this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name+"?f="+this.f+"&cache="+this.cache+"&guid="+this.guid+"&level={z}&col={x}&row={y}&w="+this.tileSize+"&h="+this.tileSize:this.domain+"/igs/rest/mrms/docs/"+this.name+"?f="+this.f+"&cache="+this.cache+"&guid="+this.guid+"&level={z}&col={x}&row={y}&w="+this.tileSize+"&h="+this.tileSize,this.token&&(n+="&token="+this.token);var o=t[0],s=t[1],a=-(t[2]+1);if(!(s>=Math.pow(2,o)||a>=Math.pow(2,o)))return n.replace("{x}",s.toString()).replace("{y}",a.toString()).replace("{z}",o.toString())},e.CacheTileLayerSource=p,i.Zondy.Source.CacheTileLayerSource=p;var f=function(t,e,r){var i=r||{};(0,l.assign)(i,{layerName:t}),(0,l.assign)(i,{name:e}),i.source=i.source?i.source:new p(i);var n=(0,l.assign)({},i);n.maxResolution=1/0,c.default.call(this,n),(0,l.assign)(this,i)};(0,u.inherits)(f,c.default),e.CacheTileLayer=f,i.Zondy.Map.CacheTileLayer=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynShowStyle=void 0;var i=r(6),n=r(22),o=(r(378),r(107),r(245),r(308),r(309),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0});e.DynShowStyle=o,i.Zondy.Object.DynShowStyle=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynNoteInfo=void 0;var i=r(6),n=r(22),o=r(107),s=(r(379),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:o.FontShape.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0});e.CDynNoteInfo=s,i.Zondy.Object.CDynNoteInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynNoteLableType=void 0;var i=r(6),n=r(22),o=(r(380),r(381),r(382),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.DynNoteLableType=o,i.Zondy.Object.DynNoteLableType=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LablePntInfo=void 0;var i=r(6),n=r(22),o=(r(107),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Ang=void 0!==e.Ang&&null!==e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!==e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!==e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!==e.PntType?e.PntType:0});e.LablePntInfo=o,i.Zondy.Object.LablePntInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelLinInfo=void 0;var i=r(6),n=r(22),o=(r(107),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!==e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!==e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!==e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!==e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!==e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!==e.SpreadType?e.SpreadType:null});e.LabelLinInfo=o,i.Zondy.Object.LabelLinInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelRegInfo=void 0;var i=r(6),n=r(22),o=(r(107),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!==e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!==e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!==e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!==e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!==e.RegType?e.RegType:0});e.LabelRegInfo=o,i.Zondy.Object.LabelRegInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyleExtend=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};e.CDisplayStyleExtend=o,i.Zondy.Object.CDisplayStyleExtend=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGDBInfo=void 0;var i=r(6),n=function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null};e.CGDBInfo=n,i.Zondy.Object.CGDBInfo=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var i=r(6),n=r(22),o=r(205),s=(r(386),r(107),r(387)),a=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AttValue=void 0!==e.AttValue&&null!==e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!==e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!==e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!==e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!==e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!==e.GraphicInfo?e.GraphicInfo:null};a.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},a.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new s.WebGraphicsInfo(this.GraphicInfo)},a.prototype.getAttValueArray=function(){return this.AttValue},a.prototype.getRectBound=function(){var t=this.bound;return null!==t?new o.Rectangle(t):t},a.prototype.getGeometry=function(){return this.fGeom},a.prototype.getFID=function(){return this.FID},a.prototype.setAttValues=function(t){this.AttValue=t},a.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new o.Rectangle(t)),t instanceof String&&(e=new o.Rectangle(t)),t instanceof o.Rectangle&&(e=t),t instanceof ol.extent&&(e=new o.Rectangle).setByOL(t),this.bound=e},a.prototype.setFID=function(t){this.FID=t},a.prototype.setFType=function(t){this.ftype=t},a.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},e.Feature=a,i.Zondy.Object.Feature=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGeometry=void 0;var i=r(6),n=r(22),o=(r(310),r(311),r(312),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.PntGeom=void 0!==e.PntGeom&&null!==e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!==e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!==e.RegGeom?e.RegGeom:null});o.prototype.setPntGeom=function(t){this.PntGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setLine=function(t){this.LinGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setRegGeom=function(t){this.RegGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},e.FeatureGeometry=o,i.Zondy.Object.FeatureGeometry=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGraphicsInfo=void 0;var i=r(6),n=r(22),o=(r(107),r(308),r(245),r(309),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.InfoType=void 0!==e.InfoType&&null!==e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.WebGraphicsInfo=o,i.Zondy.Object.WebGraphicsInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(164),l=r(114);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getLinearRing(0).getCoordinates(),r=e.length,i=0;i<r;i++)this.pointArr[i]=new l.Point2D(e[i][0],e[i][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),e}(u.Tangram);e.Polygon=h,Zondy.Object.Polygon=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourNoteParam=void 0;var i=r(6),n=function(t){var e=void 0!=t?t:{};this.IsClipLine=void 0==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=void 0!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=void 0!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=void 0!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=void 0!=e.MaxAngle?e.MaxAngle:90,this.MinDist=void 0!=e.MinDist?e.MinDist:10,this.IsAbs=void 0!=e.IsAbs&&e.IsAbs,this.IsComma=void 0!=e.IsComma&&e.IsComma,this.DigitNum=void 0!=e.DigitNum?e.DigitNum:0,this.FormatNo=void 0!=e.FormatNo?e.FormatNo:0,this.LogFlag=void 0!=e.LogFlag?e.LogFlag:0,this.Prefix=void 0!=e.Prefix?e.Prefix:"",this.Suffix=void 0!=e.Suffix?e.Suffix:"",this.ColorNo=void 0!=e.ColorNo?e.ColorNo:0,this.FixSize=void 0!=e.FixSize?e.FixSize:.01,this.FontNo=void 0!=e.FontNo?e.FontNo:0};e.ContourNoteParam=n,i.Zondy.Object.ContourAnalyse.ContourNoteParam=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourParam=void 0;var i=r(6),n=(r(389),r(391),r(392),function(t){var e=void 0!=t?t:{};this.IsSmoothLine=void 0!==e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!==e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!==e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!==e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!==e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!==e.MapWay?e.MapWay:1,this.FrameWidth=void 0!==e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!==e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!==e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!==e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!==e.NoteParam?e.NoteParam:new i.Zondy.Object.ContourAnalyse.ContourNoteParam,this.SlopLineParam=void 0!==e.SlopLineParam?e.SlopLineParam:new i.Zondy.Object.ContourAnalyse.SlopLineParam,this.ZValues=void 0!==e.ZValues?e.ZValues:new i.Zondy.Object.ContourAnalyse.ContourZValue});e.ContourParam=n,i.Zondy.Object.ContourAnalyse.ContourParam=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=void 0;var i=r(6),n=function(t){var e=void 0!==t?t:{};this.XScale=void 0!==e.XScale?e.XScale:2,this.YScale=void 0!==e.YScale?e.YScale:10,this.LineType=void 0!==e.LineType?e.LineType:0,this.SubLineType=void 0!==e.SubLineType?e.SubLineType:0};e.SlopLineParam=n,i.Zondy.Object.ContourAnalyse.SlopLineParam=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourZValue=void 0;var i=r(6),n=(r(245),r(393),function(t){var e=void 0!=t?t:{};this.ZValue=void 0!=e.ZValue?e.ZValue:1,this.LineInfo=void 0!=e.LineInfo?e.LineInfo:null,this.RegInfo=void 0!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=void 0!=e.IsOutputNote&&e.IsOutputNote});e.ContourZValue=n,i.Zondy.Object.ContourAnalyse.ContourZValue=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourRegionInfo=void 0;var i=r(6),n=function(t){var e=void 0!=t?t:{};this.PatID=void 0!=e.PatID?e.PatID:0,this.FillMode=void 0!=e.FillMode?e.FillMode:0,this.FillColor=void 0!=e.FillColor?e.FillColor:1,this.PatHeight=void 0!=e.PatHeight?e.PatHeight:1,this.PatWidth=void 0!=e.PatWidth?e.PatWidth:1,this.PatAngle=void 0!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!=e.PatColor?e.PatColor:1,this.OutPenWidth=void 0!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=void 0!=e.OverMethod?e.OverMethod:0};e.ContourRegionInfo=n,i.Zondy.Object.ContourAnalyse.ContourRegionInfo=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeshingParam=void 0;var i=r(6),n=function(t){var e=void 0!==t?t:{};this.SfClsURL=void 0!==e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.XCellNum=void 0!==e.XCellNum?e.XCellNum:200,this.Bound=void 0!==e.Bound?e.Bound:null,this.CalN=void 0!==e.CalN?e.CalN:null,this.CalM=void 0!==e.CalM?e.CalM:null,this.bIsCalInValidCtrlPnt=void 0!==e.bIsCalInValidCtrlPnt&&e.bIsCalInValidCtrlPnt,this.nYCtrlNum=void 0!==e.nYCtrlNum?e.nYCtrlNum:null,this.nXCtrlNum=void 0!==e.nXCtrlNum?e.nXCtrlNum:null,this.nLayerNum=void 0!==e.nLayerNum?e.nLayerNum:null};e.MeshingParam=n,i.Zondy.Object.ContourAnalyse.MeshingParam=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonServiceBase=void 0;var i=h(r(313)),n=h(r(8)),o=h(r(16)),s=r(6),a=r(22),u=r(401),l=r(402),c=r(403);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e,r){(0,n.default)(this,t);var i=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,(0,a.isArray)(e)?(i.urls=e,i.length=e.length,i.totalTimes=i.length,1===i.length?i.url=e[0]:(i.index=parseInt(Math.random()*i.length),i.url=e[i.index])):(i.totalTimes=1,i.url=e),(r=r||{})&&(0,a.extend)(this,r),i.isInTheSameDomain=(0,a.isInTheSameDomain)(i.url),i.events=new u.Events(i,null,i.EVENT_TYPES,!0),i.eventListeners instanceof Object&&i.events.on(i.eventListeners)}return(0,o.default)(t,[{key:"destroy",value:function(){var t=this;(0,a.isArray)(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(r,r.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=(0,a.isInTheSameDomain)(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=(0,a.transformResult)(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=t=(0,a.transformResult)(t);this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=(0,a.urlAppend)(t.url,(0,a.getParameterString)(t.params||{}))),t.params=t.data),c.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(e){var r=void 0;return r=e.text?function(){return e.text()}:function(){return e.json()},200==e.status?new i.default(function(i){r().then(function(e){if(e){var r=null;"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(r=(new l.JSONFormat).read(e)):(r={},"true"===e.toLowerCase()?r.succeed=!0:(r.succeed=!1,r.error=!0)),(!r&&isNaN(r)||r.error)&&(r=r&&r.error?{error:r.error}:{error:!0}),r.error?(t.scope?(0,a.bind)(t.failure,t.scope):t.failure)(r):(isNaN(r)||(r={value:r}),"string"==typeof r&&(r={value:r}),"[object Array]"!==Object.prototype.toString.call(r)?r.succeed=void 0===r.succeed||r.succeed:r={value:r,succeed:!0},(t.scope?(0,a.bind)(t.success,t.scope):t.success)(r))}}),i(e.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)}):new i.default(function(i){r().then(function(e){if(e){var r=null;"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(r=(new l.JSONFormat).read(e)):(r={}).succeed=!1,(!r&&isNaN(r)||!r.success)&&(r={succeed:!1}),(t.scope?(0,a.bind)(t.failure,t.scope):t.failure)(r)}}),i(e.status)},function(t){console.log("【服务】【基础服务】【抽象类Fetch返回异常】",t)})}).catch(function(e){(t.scope?(0,a.bind)(t.failure,t.scope):t.failure)({error:!0,value:{}})}).then(function(t,e){})}}]),t}();e.CommonServiceBase=p,s.Zondy.Service.CommonServiceBase=p},function(t,e,r){var i=r(200),n=r(106)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?r:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,r){var i=r(396),n=r(106)("iterator"),o=r(204);t.exports=r(54).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||o[i(t)]}},function(t,e,r){var i=r(122),n=r(238),o=r(106)("species");t.exports=function(t,e){var r,s=i(t).constructor;return void 0===s||void 0==(r=i(s)[o])?e:n(r)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){var i=r(122),n=r(137),o=r(315);t.exports=function(t,e){if(i(t),n(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(123)),n=r(22),o=function(t,e,r,i){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},(0,n.extend)(this,i),null!=r)for(var o=0,s=r.length;o<s;o++)this.addEventType(r[o])};o.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},o.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},o.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},o.prototype.register=function(t,e,r,s){if(t in o&&!this.extensions[t]&&(this.extensions[t]=new o[t](this)),null!=r&&-1!==(0,n.indexOf)(this.eventTypes,t)){null==e&&(e=this.object);var a=this.listeners[t];a||(a=[],this.listeners[t]=a,this.extensionCount[t]=0);var u={obj:e,func:r};s?(a.splice(this.extensionCount[t],0,u),"object"===(void 0===s?"undefined":(0,i.default)(s))&&s.extension&&this.extensionCount[t]++):a.push(u)}},o.prototype.registerPriority=function(t,e,r){this.register(t,e,r,!0)},o.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},o.prototype.unregister=function(t,e,r){null==e&&(e=this.object);var i=this.listeners[t];if(null!=i)for(var n=0,o=i.length;n<o;n++)if(i[n].obj===e&&i[n].func===r){i.splice(n,1);break}},o.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},o.prototype.triggerEvent=function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var i;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var n=0,o=(r=r.slice()).length;n<o;n++){var s=r[n];if(void 0!=(i=s.func.apply(s.obj,[e.result]))&&0==i)break}return i}},e.Events=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=void 0;var i=s(r(123)),n=s(r(53)),o=r(22);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof n.default),(0,o.extend)(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,i,n=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),i=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=i&&(o&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),i),o=!0));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"}"),n.join("")},array:function(t){var e,r=["["];this.level+=1;for(var i=0,n=t.length;i<n;++i)null!=(e=this.write.apply(this,[t[i],this.pretty]))&&(i>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var i=e[r];return i||(i=r.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};a.prototype.read=function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=r),r},a.prototype.write=function(t,e){this.pretty=!!e;var r=null,o=void 0===t?"undefined":(0,i.default)(t);if(this.serialize[o])try{r=!this.pretty&&this.nativeJSON?(0,n.default)(t):this.serialize[o].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return r},a.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},a.prototype.writeNewline=function(){return this.pretty?this.newline:""},a.prototype.writeSpace=function(){return this.pretty?this.space:""},e.JSONFormat=a,Zondy.Service.JSONFormat=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FetchRequest=e.RequestTimeout=e.CORS=void 0;var i=s(r(123)),n=s(r(313)),o=s(r(53));function s(t){return t&&t.__esModule?t:{default:t}}r(22),r(583),r(588);var a=window.fetch,u=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,l=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,c=Zondy.FetchRequest={commit:function(t,e,r,i){switch(t=t?t.toUpperCase():t){case"GET":return this._get(e,r,i);case"POST":return this._post(e,r,i);case"PUT":return this._put(e,r,i);case"DELETE":return this._delete(e,r,i);default:return this._get(e,r,i)}},_get:function(t,e,r){return r=r||{},t=this._processUrl(t,r),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,r):this._fetch(t,e,r,"GET")},_delete:function(t,e,r){return r=r||{},t=this._processUrl(t,r),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&u?this._fetch(t,e,r,"DELETE"):this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,r)},_post:function(t,e,r){return r=r||{},this._fetch(this._processUrl(t,r),e,r,"POST")},_put:function(t,e,r){return r=r||{},this._fetch(this._processUrl(t,r),e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,i=0,n=t.length;i<n;i++)(r=t.charCodeAt(i))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,i){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=(0,o.default)(r)),this._post(e,r,i)},_processUrl:function(t,e){return this._isMVTRequest(t)?t:(e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t)},_fetch:function(t,e,r,i){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,a(t,{method:i,headers:r.headers,body:"PUT"===i||"POST"===i?e:void 0,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:l}).then(function(t){return t})):a(t,{method:i,body:"PUT"===i||"POST"===i?e:void 0,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:l}).then(function(t){return t}).catch(function(t){return t})},_timeout:function(t,e){return new n.default(function(r,i){setTimeout(function(){i(new Error("timeout"))},t),e.then(r,i)})},_getParameterString:function(t){var e=[];for(var r in t){var n=t[r];if(null!=n&&"function"!=typeof n){var o;if("object"===(void 0===n?"undefined":(0,i.default)(n))&&n.constructor===Array){for(var s,a=[],u=0,l=n.length;u<l;u++)s=n[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o="["+a.join(",")+"]"}else o=encodeURIComponent(n);e.push(encodeURIComponent(r)+"="+o)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};e.CORS=u,e.RequestTimeout=l,e.FetchRequest=c,Zondy.Service.FetchRequest=c,Zondy.Service.CORS=u,Zondy.Service.RequestTimeout=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDBInfo=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(179),l=r(55);function c(t){return t&&t.__esModule?t:{default:t}}r(22);var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.serverName=void 0!==r.serverName?r.serverName:null,o.gdbName=void 0!==r.gdbName?r.gdbName:null,o.dsName=void 0!==r.dsName?r.dsName:null,o.rcsName=void 0!==r.rcsName?r.rcsName:null,o.User=void 0!==r.User?r.User:null,o.Password=void 0!==r.Password?r.Password:null,o.containAll=void 0===r.containAll||r.containAll,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getServerList",value:function(t,e){this.partUrl="datasource?f=json";var r=this.getFullUrl();new l.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"?f=json":r.partUrl="datasource/"+r.serverName+"?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rcs?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"?f=json";var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,r){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?f=json";var n=i.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}},{key:"AttachGDB",value:function(t,e,r){var i=this;if(null!==i.serverName&&null!==i.gdbName&&null!==t){i.partUrl="gdb/attach/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json",null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var n=i.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var r=this;if(null!==r.serverName&&null!==r.gdbName){r.partUrl="gdb/detach/"+r.gdbName+"?gdbSvrName="+r.serverName,null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,r){var i=this;if(null!==i.serverName&&null!==i.gdbName&&("mapgislocal"!==i.serverName.toLowerCase()||null!==t)){i.partUrl="gdb/creat/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json",null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var n=i.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var r=this;if(null!==r.serverName&&null!==r.gdbName){r.partUrl="gdb/delete/"+r.gdbName+"?gdbSvrName="+r.serverName,null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(u.CatalogService);e.GDBInfo=h,Zondy.Catalog.GDBInfo=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=e.VPolyline=e.VPolygon=e.VPoint=e.BaseParameter=e.ObjectIdsParameter=e.RectangleParameter=e.GeometryParameter=e.SQLParameter=e.FeatureService=e.QueryUnifyParameter=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=void 0;var i=r(597),n=r(598),o=r(316),s=r(599),a=r(408),u=r(600),l=r(409),c=r(410),h=r(411),p=r(407),f=r(317),d=r(601),g=r(248),y=r(406),v=r(206),m=r(602),_=r(611),b=r(615),S=r(616),x=r(618),O=r(619),E=r(180),C=r(318),T=r(323),P=r(322),w=r(620);e.EditDocFeature=i.EditDocFeature,e.EditLayerFeature=n.EditLayerFeature,e.EditServiceBase=o.EditServiceBase,e.MultiGeoQuery=s.MultiGeoQuery,e.MultiGeoQueryParameter=a.MultiGeoQueryParameter,e.ObjClsQuery=u.ObjClsQuery,e.ObjClsQueryParameter=l.ObjClsQueryParameter,e.QueryByLayerParameter=c.QueryByLayerParameter,e.QueryDocFeature=h.QueryDocFeature,e.QueryFeatureRule=p.QueryFeatureRule,e.QueryFeatureStruct=f.QueryFeatureStruct,e.QueryLayerFeature=d.QueryLayerFeature,e.QueryParameter=g.QueryParameter,e.QueryParameterBase=y.QueryParameterBase,e.QueryServiceBase=v.QueryServiceBase,e.QueryUnifyParameter=m.QueryUnifyParameter,e.FeatureService=_.FeatureService,e.SQLParameter=b.SQLParameter,e.GeometryParameter=S.GeometryParameter,e.RectangleParameter=x.RectangleParameter,e.ObjectIdsParameter=O.ObjectIdsParameter,e.BaseParameter=E.BaseParameter,e.VPoint=C.VPoint,e.VPolygon=T.VPolygon,e.VPolyline=P.VPolyline,e.VFeature=w.VFeature},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameterBase=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),n=r(6),o=r(22),s=r(317),a=r(407),u=function t(e){(0,i.default)(this,t);var r=e||{};(0,o.extend)(this,r),this.geometry=void 0!==r.geometry?r.geometry:null,this.where=void 0!==r.where?r.where:null,this.rule=void 0!==r.rule?r.rule:new a.QueryFeatureRule,this.objectIds=void 0!==r.objectIds?r.objectIds:null,this.pageIndex=void 0!==r.pageIndex?r.pageIndex:0,this.recordNumber=void 0!==r.recordNumber?r.recordNumber:20,this.resultFormat=void 0!==r.resultFormat?r.resultFormat:"json",this.struct=void 0!==r.struct?r.struct:new s.QueryFeatureStruct,this.orderField=void 0!==r.orderField?r.orderField:null,this.rtnLabel=void 0!==r.rtnLabel&&r.rtnLabel,this.fields=r.fields||"",this.coordPrecision=r.coordPrecision||0===r.coordPrecision?r.coordPrecision:2,this.isAsc=void 0!==r.isAsc&&r.isAsc,this.cursorType=void 0!==r.cursorType?r.cursorType:"forward",this.proj=r.proj||null,this.guid=r.guid||"__readonly_user__"};e.QueryParameterBase=u,n.Zondy.Service.QueryParameterBase=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureRule=void 0;var i=r(6),n=r(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};o.prototype.toJSON=function(){return(0,n.toJSON)(this)},e.QueryFeatureRule=o,i.Zondy.Service.QueryFeatureRule=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQueryParameter=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,(t+="&geometryType="+this.geometryType)+"&nearDis="+this.nearDis},e.MultiGeoQueryParameter=o,i.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQueryParameter=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!==this.objectIds?t+="&objectIds="+this.objectIds:null!==this.where&&(t+="&where="+this.where),t},e.ObjClsQueryParameter=o,i.Zondy.Service.ObjClsQueryParameter=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryByLayerParameter=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(40)),u=h(r(14)),l=r(6),c=r(248);function h(t){return t&&t.__esModule?t:{default:t}}r(317);var p=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.gdbp=void 0!==t?t:null,a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){return(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),e}(c.QueryParameter);e.QueryByLayerParameter=p,l.Zondy.Service.QueryByLayerParameter=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDocFeature=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,s,a){(0,n.default)(this,e);var u=a||{},l=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,u));return l.queryParam=t,l.docName=r,l.layerIndex=void 0==s?-1:s,l.mapIndex=0,l.partUrl="docs/"+l.docName+"/"+l.mapIndex.toString()+"/"+l.layerIndex.toString()+"/query",l}return(0,s.default)(e,t),e}(r(206).QueryServiceBase);e.QueryDocFeature=l,a.Zondy.Service.QueryDocFeature=l},function(t,e,r){t.exports={default:r(612),__esModule:!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(165),h=r(55);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.points=void 0!==r.points?r.points:"",i.dx=void 0!==r.dx?r.dx:"",i.dy=void 0!==r.dy?r.dy:"",i.dz=void 0!==r.dz?r.dz:"",i.m=void 0!==r.m?r.m:"",i.wx=void 0!==r.wx?r.wx:"",i.wy=void 0!==r.wy?r.wy:"",i.wz=void 0!==r.wz?r.wz:"",i.srcsrsname=void 0!==r.srcsrsname?r.srcsrsname:"",i.dessrsname=void 0!==r.dessrsname?r.dessrsname:"",i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"coordinateTrans",value:function(t,e,r){var n={};null!==r&&"POST"===r.toUpperCase()?(n.paraValues="",this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname):(n=this,this.partUrl="geomservice/transcoordinate");var o=this.getFullUrl(),s=new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:t,processFailed:e}});null!==r&&"POST"===r.toUpperCase()?s.processAsync({method:"POST",data:(0,i.default)(n)}):s.processAsync()}}]),e}(c.GeometryAnalysisBase);e.CoordinateElpTrans=f,l.Zondy.Service.CoordinateTransform=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAllOtherDataItemInfoSource=void 0;var i=r(6),n={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=n,i.Zondy.Object.Theme.CAllOtherDataItemInfoSource=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};e.CAnnInfo=o,i.Zondy.Object.Theme.CAnnInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartLabelFormat=void 0;var i=r(6),n={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=n,i.Zondy.Object.Theme.CChartLabelFormat=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartTheme=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(125),l=r(418);function c(t){return t&&t.__esModule?t:{default:t}}r(419),r(422);var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.ChartType=void 0!==r.ChartType?r.ChartType:l.CChartType.Bar,s.ChartThemeInfoArr=void 0!==r.ChartThemeInfoArr?r.ChartThemeInfoArr:null,s.RepresentInfo=void 0!==r.RepresentInfo?r.RepresentInfo:null,s.Type="CChartTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CChartTheme=h,a.Zondy.Object.Theme.CChartTheme=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartType=void 0;var i=r(6),n={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=n,i.Zondy.Object.Theme.CChartType=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeInfo=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{},a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.Expression=void 0!==t?t:"",a}return(0,s.default)(e,t),e}(r(147).CThemeInfo);e.CChartThemeInfo=l,a.Zondy.Object.Theme.CChartThemeInfo=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLinInfo=void 0;var i=r(6),n=r(22),o=r(107),s=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:o.CLinAdjustType.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:o.CLinHeadType.Round,this.JointType=void 0!==e.JointType?e.JointType:o.CLinJointType.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:o.CLinStyleMakeType.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CLinInfo=s,i.Zondy.Object.Theme.CLinInfo=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegInfo=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};e.CRegInfo=o,i.Zondy.Object.Theme.CRegInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeRepresentInfo=void 0;var i=r(6),n=r(22),o=r(415),s=r(416),a=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new o.CAnnInfo,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:s.CChartLabelFormat.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};e.CChartThemeRepresentInfo=a,i.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDotDensityTheme=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(6),u=r(125);function l(t){return t&&t.__esModule?t:{default:t}}r(250);var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.Expression=void 0!==r.Expression?r.Expression:"",s.Info=void 0!==r.Info?r.Info:null,s.Value=void 0!==r.Value?r.Value:null,s.Type="CDotDensityTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CDotDensityTheme=c,a.Zondy.Object.Theme.CDotDensityTheme=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFourColorTheme=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.ClrInfo=void 0!==r.ClrInfo?r.ClrInfo:[25,57,89,121],s.Type="CFourColorTheme",s}return(0,s.default)(e,t),e}(r(125).CTheme);e.CFourColorTheme=l,a.Zondy.Object.Theme.CFourColorTheme=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGraduatedSymbolTheme=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(6),u=r(125);function l(t){return t&&t.__esModule?t:{default:t}}r(250);var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.BaseValue=void 0!==r.BaseValue?r.BaseValue:141e-6,s.DispMinus=void 0!==r.DispMinus&&r.DispMinus,s.DispZero=void 0!==r.DispZero&&r.DispZero,s.Expression=void 0!==r.Expression?r.Expression:null,s.MinusPntInfo=void 0!==r.MinusPntInfo?r.MinusPntInfo:null,s.PlusPntInfo=void 0!==r.PlusPntInfo?r.PlusPntInfo:null,s.ZeroPntInfo=void 0!==r.ZeroPntInfo?r.ZeroPntInfo:null,s.Type="CGraduatedSymbolTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CGraduatedSymbolTheme=c,a.Zondy.Object.Theme.CGraduatedSymbolTheme=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMultiClassTheme=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(6),u=r(125);function l(t){return t&&t.__esModule?t:{default:t}}r(147),r(427);var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.DefaultInfo=void 0!==r.DefaultInfo?r.DefaultInfo:null,s.ExpInfoArr=void 0!==r.ExpInfoArr?r.ExpInfoArr:null,s.MultiClassThemeInfoArr=void 0!==r.MultiClassThemeInfoArr?r.MultiClassThemeInfoArr:null,s.GeoInfoType=void 0!==r.GeoInfoType?r.GeoInfoType:null,s.Type="CMultiClassTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CMultiClassTheme=c,a.Zondy.Object.Theme.CMultiClassTheme=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpInfo=void 0;var i=r(6),n=r(22),o=function(t,e,r){var i=void 0!==r?r:{};(0,n.extend)(this,i),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};e.ExpInfo=o,i.Zondy.Object.Theme.ExpInfo=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRandomTheme=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.Type="CRandomTheme",s}return(0,s.default)(e,t),e}(r(125).CTheme);e.CRandomTheme=l,a.Zondy.Object.Theme.CRandomTheme=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeTheme=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(125),l=r(414);function c(t){return t&&t.__esModule?t:{default:t}}r(147),r(430);var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.AllOtherDataItemInfoSource=void 0!==r.AllOtherDataItemInfoSource?r.AllOtherDataItemInfoSource:l.CAllOtherDataItemInfoSource.DefaultThemeInfo,s.Expression=void 0!==r.Expression?r.Expression:"",s.DefaultInfo=void 0!==r.DefaultInfo?r.DefaultInfo:null,s.RangeThemeInfoArr=void 0!==r.RangeThemeInfoArr?r.RangeThemeInfoArr:null,s.GeoInfoType=void 0!==r.GeoInfoType?r.GeoInfoType:null,s.Type="CRangeTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CRangeTheme=h,a.Zondy.Object.Theme.CRangeTheme=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeThemeInfo=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r,s){(0,n.default)(this,e);var a=s||{},u=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));return u.StartValue=void 0!==t?t:"",u.EndValue=void 0!==r?r:"",u}return(0,s.default)(e,t),e}(r(147).CThemeInfo);e.CRangeThemeInfo=l,a.Zondy.Object.Theme.CRangeThemeInfo=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSimpleTheme=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(125),l=r(147);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.ThemeInfo=void 0!==r.ThemeInfo?r.ThemeInfo:new l.CThemeInfo,s.Type="CSimpleTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CSimpleTheme=h,a.Zondy.Object.Theme.CSimpleTheme=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueTheme=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(6),u=r(125);function l(t){return t&&t.__esModule?t:{default:t}}r(147),r(433);var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.DefaultInfo=void 0!==r.DefaultInfo?r.DefaultInfo:null,s.Expression=void 0!==r.Expression?r.Expression:"",s.UniqueThemeInfoArr=void 0!==r.UniqueThemeInfoArr?r.UniqueThemeInfoArr:null,s.GeoInfoType=void 0!==r.GeoInfoType?r.GeoInfoType:null,s.Type="CUniqueTheme",s}return(0,s.default)(e,t),e}(u.CTheme);e.CUniqueTheme=c,a.Zondy.Object.Theme.CUniqueTheme=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueThemeInfo=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{},a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.Value=void 0!==t?t:"",a}return(0,s.default)(e,t),e}(r(147).CThemeInfo);e.CUniqueThemeInfo=l,a.Zondy.Object.Theme.CUniqueThemeInfo=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfo=void 0;var i=r(6),n=(r(331),function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null});e.FolderInfo=n,i.Zondy.Object.Theme.FolderInfo=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=void 0;var i=r(6),n=(r(125),function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null});e.ThemesInfo=n,i.Zondy.Object.Theme.ThemesInfo=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeSource=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(14)),u=r(6),l=p(r(290)),c=r(437),h=r(22);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r){(0,n.default)(this,e),r=r||{};var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,{canvasFunction:a,logo:r.logo,projection:r.projection,ratio:r.ratio,resolutions:r.resolutions,state:r.state}));function a(t,e,r,i,n){var o=i[0]*r,s=i[1]*r;if(this.context||(this.context=(0,h.createCanvasContext2D)(o,s)),!this.features)return this.context.canvas;this.pixelRatio=r;var a=this.map.getSize()[0]*r,u=this.map.getSize()[1]*r;this.offset=[(o-a)/2/r,(s-u)/2/r],this.notFirst||(this.redrawThematicFeatures(t),this.notFirst=!0),this.div.id=this.id,this.div.className="themeLayer",this.div.style.width=o+"px",this.div.style.height=s+"px",this.map.getViewport().appendChild(this.div),this.renderer.resize(),this.map.getViewport().removeChild(this.div),this.themeCanvas=this.renderer.painter.root.getElementsByTagName("canvas")[0],this.themeCanvas.width=o,this.themeCanvas.height=s,this.themeCanvas.style.width=o+"px",this.themeCanvas.style.height=s+"px",this.themeCanvas.getContext("2d").clearRect(0,0,o,s);var l=this.renderer.painter._layers.hover.ctx.canvas,c=(0,h.createCanvasContext2D)(o,s);c.drawImage(l,0,0,l.width,l.height,0,0,o,s),this.redrawThematicFeatures(t);var p=this.context.canvas;return this.context.clearRect(0,0,p.width,p.height),p.width=o,p.height=s,p.style.width=o+"px",p.style.height=s+"px",this.context.drawImage(this.themeCanvas,0,0,o,s,0,0,o,s),this.context.drawImage(c.canvas,0,0,o,s,0,0,o,s),this.context.canvas}o.id=r.id||"themeLayer_",o.canvasFunctionInternal_=a,o.EVENT_TYPES=["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed","tileloaded","beforefeaturesadded","featuresadded","featuresremoved"],o.features=[],o.TFEvents=r.TFEvents||[],o.map=r.map;var u=o.map.getSize();return o.div=document.createElement("div"),o.map.getViewport().appendChild(o.div),o.div.style.width=u[0]+"px",o.div.style.height=u[1]+"px",o.setOpacity(r.opacity),o.levelRenderer=new c.LevelRenderer,o.movingOffset=[0,0],o.renderer=o.levelRenderer.init(o.div),o.map.getViewport().removeChild(o.div),o.renderer.clear(),o.addTFEvents(),o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.EVENT_TYPES=null,this.isBaseLayer=null,this.TFEvents=null,this.destroyFeatures(),this.features=null,this.renderer&&this.renderer.dispose(),this.renderer=null,this.levelRenderer=null,this.movingOffset=null,this.currentMousePosition=null}},{key:"destroyFeatures",value:function(t){void 0===t&&(t=this.features),t&&(this.removeFeatures(t),t=null)}},{key:"setOpacity",value:function(t){if(t!==this.opacity){this.opacity=t;var e=this.div;(0,h.modifyDOMElement)(e,null,null,null,null,null,null,t),null!==this.map&&this.dispatchEvent({type:"changelayer",value:{layer:this,property:"opacity"}})}}},{key:"addFeatures",value:function(t){}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length){if(t===this.features)return this.removeAllFeatures();(0,h.isArray)(t)||(t=[t]);for(var e=[],r=t.length-1;r>=0;r--){var i=t[r],n=(0,h.indexOf)(this.features,i);-1!==n?this.features.splice(n,1):e.push(i)}for(var o=[],s=0,a=this.features.length;s<a;s++)i=this.features[s],o.push(i);this.features=[],this.addFeatures(o),this.renderer&&this.redrawThematicFeatures(this.map.getView().calculateExtent());var u=0===e.length;this.dispatchEvent({type:"featuresremoved",value:{features:e,succeed:u}})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],this.dispatchEvent({type:"featuresremoved",value:{features:[],succeed:!0}})}},{key:"getFeatures",value:function(){for(var t=this.features.length,e=new Array(t),r=0;r<t;++r)e[r]=this.features[r];return e}},{key:"getFeatureBy",value:function(t,e){var r=null;for(var i in this.features)if(this.features[i][t]===e){r=this.features[i];break}return r}},{key:"getFeatureById",value:function(t){return this.getFeatureBy("FID",t)}},{key:"getFeaturesByAttribute",value:function(t,e){var r,i=[];for(var n in this.features)(r=this.features[n])&&r.attributes&&r.attributes[t]===e&&i.push(r);return i}},{key:"redrawThematicFeatures",value:function(t){}},{key:"on",value:function(t,e){var r=e;if(this.renderer)this.renderer.on(t,r);else{var i=[];i.push(t),i.push(r),this.TFEvents.push(i)}}},{key:"fire",value:function(t,e){if(this.offset){e=e.originalEvent;var r=this.getX(e),i=this.getY(e),n=-this.map.getView().getRotation(),o=this.map.getPixelFromCoordinate(this.map.getView().getCenter()),s=this.scale([r,i],o,this.pixelRatio),a=this.rotate(s,n,o),u=[a[0]+this.offset[0],a[1]+this.offset[1]],l=document.createEvent("Event");l.initEvent("pointermove",!0,!0),l.offsetX=u[0],l.offsetY=u[1],l.layerX=u[0],l.layerY=u[1],l.clientX=u[0],l.clientY=u[1],l.x=r,l.y=i,"click"===t&&this.renderer.handler._clickHandler(l),"dblclick"===t&&this.renderer.handler._dblclickHandler(l),"onmousewheel"===t&&this.renderer.handler._mousewheelHandler(l),"mousemove"===t&&(this.renderer.handler._mousemoveHandler(l),this.changed()),"onmouseout"===t&&this.renderer.handler._mouseoutHandler(l),"onmousedown"===t&&this.renderer.handler._mousedownHandler(l),"onmouseup"===t&&this.renderer.handler._mouseupHandler(l)}}},{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"un",value:function(t,e){var r=e;if(this.renderer)this.renderer.un(t,r);else{for(var i=this.TFEvents,n=i.length,o=[],s=0;s<n;s++){var a=i[s];a[0]===t&&a[1]===r||o.push(a)}this.TFEvents=o}}},{key:"addTFEvents",value:function(){for(var t=this.TFEvents,e=t.length,r=0;r<e;r++)this.renderer.on(t[r][0],t[r][1])}},{key:"getLocalXY",value:function(t){var e,r=this.map;(0,h.isArray)(t)&&(e=r.getPixelFromCoordinate(t));var i=-r.getView().getRotation(),n=r.getPixelFromCoordinate(r.getView().getCenter()),o=e;return this.pixelRatio&&(o=this.scale(e,n,this.pixelRatio)),e&&n&&(o=this.rotate(o,i,n)),this.offset&&o?[o[0]+this.offset[0],o[1]+this.offset[1]]:o}},{key:"rotate",value:function(t,e,r){return[Math.cos(e)*(t[0]-r[0])-Math.sin(e)*(t[1]-r[1])+r[0],Math.sin(e)*(t[0]-r[0])+Math.cos(e)*(t[1]-r[1])+r[1]]}},{key:"scale",value:function(t,e,r){return[(t[0]-e[0])*r+e[0],(t[1]-e[1])*r+e[1]]}}]),e}(l.default);e.ThemeSource=f,u.Zondy.Source.ThemeSource=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRenderer=void 0;var i=u(r(8)),n=u(r(16)),o=r(6),s=r(22),a=r(438);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,i.default)(this,t),t._instances={},t.Tool={},this.CLASS_NAME="Zondy.LevelRenderer"}return(0,n.default)(t,[{key:"destroy",value:function(){this.dispose()}},{key:"init",value:function(e){var r=new a.Render((0,s.newGuid)(),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}]),t}();e.LevelRenderer=l,o.Zondy.LevelRenderer=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Render=void 0;var i=h(r(8)),n=h(r(16)),o=r(6),s=r(22),a=r(439),u=r(448),l=r(449),c=r(450);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e,r){(0,i.default)(this,t),this.id=e,this.storage=new a.Storage,this.painter=new u.Painter(r,this.storage),this.handler=new l.Handler(r,this.storage,this.painter),this.animatingElements=[],this.animation=new c.Animation({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="Zondy.LevelRenderer.Render"}return(0,n.default)(t,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var i;if(e){for(var n=e.split("."),o=t,a=0,u=n.length;a<u;a++)o&&(o=o[n[a]]);o&&(i=o)}else i=t;if(!i)return;var l=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(i,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(0,s.indexOf)(l,t);l.splice(e,1)}})}}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var i=(0,s.newGuid)();return this.painter.shapeToImage(i,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,i=e.length;r<i;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}]),t}();e.Render=p,o.Zondy.LevelRenderer.Render=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var i=u(r(8)),n=u(r(16)),o=r(6),s=r(22),a=r(440);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,i.default)(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="Zondy.LevelRenderer.Storage"}return(0,n.default)(t,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(e||(e={hover:!1,normal:"down",update:!1}),e.hover)for(var r=0,i=this._hoverElements.length;r<i;r++){var n=this._hoverElements[r];if(n.updateTransform(),t(n))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var s=0,a=this._shapeList.length;s<a;s++)if(t(this._shapeList[s]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],i=this._hoverElements.length,n=0;n<i;n++){r.push(this._hoverElements[n]);var o=this._hoverElements[n].hoverConnect;if(o)for(var s,a=0,u=(o=o instanceof Array?o:[o]).length;a<u;a++)(s=o[a].id?o[a]:this.get(o[a]))&&r.push(s)}if(r.sort(t.shapeCompareFunc),e)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var i=this._roots[r];this._updateAndAddShape(i)}this._shapeList.length=this._shapeListOffset;for(var n=this._shapeList.length,o=0;o<n;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"===t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var i=t._children[r];i.__dirty=t.__dirty||i.__dirty,this._updateAndAddShape(i,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var i={};for(var n in e)"parent"!==n&&"_storage"!==n&&"__startClip"!==n&&e.hasOwnProperty(n)&&(i[n]=e[n]);(0,s.merge)(r,i,!0)}else(0,s.merge)(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var i=this._elements[t];return i&&(i.needTransform=!0,"horizontal"===i.draggable?r=0:"vertical"===i.draggable&&(e=0),(!i.ondrift||i.ondrift&&!i.ondrift(e,r))&&i.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof a.Group&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof a.Group&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var i=t.length,n=0;n<i;n++)this.delRoot(t[n]);else{var o;o="string"==typeof t?this._elements[t]:t;var u=(0,s.indexOf)(this._roots,o);u>=0&&(this.delFromMap(o.id),this._roots.splice(u,1),o instanceof a.Group&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof a.Group&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof a.Group&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}]),t}();e.Storage=l,o.Zondy.LevelRenderer.Storage=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(22),h=r(207),p=r(252);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return t=t||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,(0,c.extend)(r,t),r.id=r.id||(0,c.newGuid)(),r.CLASS_NAME="Zondy.LevelRenderer.Group",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!==this&&t.parent!==this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var r=(0,c.indexOf)(this._children,t);this._children.splice(r,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,i=0;i<this._children.length;i++){var n=this._children[i];r?t.call(e,n):t(n)}}},{key:"traverse",value:function(t,e){for(var r=!!e,i=0;i<this._children.length;i++){var n=this._children[i];r?t.call(e,n):t(n),"group"===n.type&&n.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),e}((0,c.mixin)(h.Eventful,p.Transformable));e.Group=d,l.Zondy.LevelRenderer.Group=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var i=u(r(8)),n=u(r(16)),o=r(6),s=r(182),a=r(253);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,i.default)(this,t),this.util=new s.Util,this.curve=new a.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}return(0,n.default)(t,[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,i){if(!e||!t)return!1;var n=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,r,i);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,i);switch(n){case"ellipse":case"smicellipse":return!0;case"trochoid":var s="out"===e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,i,s);case"rose":return this.isInsideCircle(e,r,i,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,i){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,i):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,i);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,i);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,i);case"smicbroken-line":var n=r,o=i;return t.refOriginalPosition&&(n=r-t.refOriginalPosition[0],o=i-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,n,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,i);case"smicring":var s=e.x,a=e.y;return t.refOriginalPosition&&(s=e.x+t.refOriginalPosition[0],a=e.y+t.refOriginalPosition[1]),this.isInsideRing(s,a,e.r0,e.r,r,i);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,i);case"smicpoint":var u=r,l=i;return t.refOriginalPosition&&(u=r-t.refOriginalPosition[0],l=i-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,h=-h),this.isInsideSector(e.x,e.y,e.r0,e.r,c,h,!e.clockWise,r,i);case"smicsector":var p=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;e.clockWise||(p=-p,f=-f);var d=e.x,g=e.y;return t.refOriginalPosition&&(d=e.x+t.refOriginalPosition[0],g=e.y+t.refOriginalPosition[1]),this.isInsideSector(d,g,e.r0,e.r,p,f,!e.clockWise,r,i);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,i);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,i);case"smicpolygon":var y=r,v=i;if(t.refOriginalPosition&&(y=r-t.refOriginalPosition[0],v=i-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,y,v),_=t.holePolygonPointLists,b=!1,S=0,x=_.length;S<x;S++){var O=_[S];!0===this.isInsidePolygon(O,y,v)&&(b=!0)}return!0===m&&!1===b}return this.isInsidePolygon(e.pointList,y,v);case"text":var E=e.__rect||t.getRect(e);return this.isInsideRect(E.x,E.y,E.width,E.height,r,i);case"smictext":var C=t.getTextBackground(e);return this.isInsidePolygon(C,r,i);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,i);case"smicimage":var T=e.x,P=e.y;return t.refOriginalPosition&&(T=e.x+t.refOriginalPosition[0],P=e.y+t.refOriginalPosition[1]),this.isInsideRect(T,P,e.width,e.height,r,i)}}},{key:"_buildPathMethod",value:function(t,e,r,i,n){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(i,n)}},{key:"isOutside",value:function(t,e,r,i){return!this.isInside(t,e,r,i)}},{key:"isInsideLine",value:function(t,e,r,i,n,o,s){if(0===n)return!1;var a,u=Math.max(n,5);if(s>e+u&&s>i+u||s<e-u&&s<i-u||o>t+u&&o>r+u||o<t-u&&o<r-u)return!1;if(t===r)return Math.abs(o-t)<=u/2;var l=(a=(e-i)/(t-r))*o-s+(t*i-r*e)/(t-r);return l*l/(a*a+1)<=u/2*u/2}},{key:"isInsideCubicStroke",value:function(t,e,r,i,n,o,s,a,u,l,c){if(0===u)return!1;var h=Math.max(u,5);return!(c>e+h&&c>i+h&&c>o+h&&c>a+h||c<e-h&&c<i-h&&c<o-h&&c<a-h||l>t+h&&l>r+h&&l>n+h&&l>s+h||l<t-h&&l<r-h&&l<n-h&&l<s-h)&&this.curve.cubicProjectPoint(t,e,r,i,n,o,s,a,l,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,i,n,o,s,a,u){if(0===s)return!1;var l=Math.max(s,5);return!(u>e+l&&u>i+l&&u>o+l||u<e-l&&u<i-l&&u<o-l||a>t+l&&a>r+l&&a>n+l||a<t-l&&a<r-l&&a<n-l)&&this.curve.quadraticProjectPoint(t,e,r,i,n,o,a,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,r,i,n,o,s,a,u){var l=this.PI2;if(0===s)return!1;var c=Math.max(s,5);a-=t,u-=e;var h=Math.sqrt(a*a+u*u);if(h-c>r||h+c<r)return!1;if(Math.abs(i-n)>=l)return!0;if(o){var p=i;i=this.normalizeRadian(n),n=this.normalizeRadian(p)}else i=this.normalizeRadian(i),n=this.normalizeRadian(n);i>n&&(n+=l);var f=Math.atan2(u,a);return f<0&&(f+=l),f>=i&&f<=n||f+l>=i&&f+l<=n}},{key:"isInsideBrokenLine",value:function(t,e,r,i){for(var n=Math.max(e,10),o=0,s=t.length-1;o<s;o++){var a=t[o][0],u=t[o][1],l=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(a,u,l,c,n,r,i))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,i,n,o){var s=(n-t)*(n-t)+(o-e)*(o-e);return s<i*i&&s>r*r}},{key:"isInsideRect",value:function(t,e,r,i,n,o){return n>=t&&n<=t+r&&o>=e&&o<=e+i}},{key:"isInsideCircle",value:function(t,e,r,i,n){return(i-t)*(i-t)+(n-e)*(n-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,i,n,o,s,a,u){return this.isInsideArcStroke(t,e,(r+i)/2,n,o,s,i-r,a,u)}},{key:"isInsidePolygon",value:function(t,e,r){for(var i=t.length,n=0,o=0,s=i-1;o<i;o++){var a=t[s][0],u=t[s][1],l=t[o][0],c=t[o][1];n+=this.windingLine(a,u,l,c,e,r),s=o}return 0!==n}},{key:"windingLine",value:function(t,e,r,i,n,o){return o>e&&o>i||o<e&&o<i?0:i==e?0:(o-e)/(i-e)*(r-t)+t>n?i<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,i,n,o,s,a,u,l){var c=this.curve,h=this.roots,p=this.extrema;if(l>e&&l>i&&l>o&&l>a||l<e&&l<i&&l<o&&l<a)return 0;var f=c.cubicRootAt(e,i,o,a,l,h);if(0===f)return 0;for(var d,g,y=0,v=-1,m=0;m<f;m++){var _=h[m];c.cubicAt(t,r,n,s,_)<u||(v<0&&(v=c.cubicExtrema(e,i,o,a,p),p[1]<p[0]&&v>1&&this.swapExtrema(),d=c.cubicAt(e,i,o,a,p[0]),v>1&&(g=c.cubicAt(e,i,o,a,p[1]))),2===v?_<p[0]?y+=d<e?1:-1:_<p[1]?y+=g<d?1:-1:y+=a<g?1:-1:_<p[0]?y+=d<e?1:-1:y+=a<d?1:-1)}return y}},{key:"windingQuadratic",value:function(t,e,r,i,n,o,s,a){var u=this.curve,l=this.roots;if(a>e&&a>i&&a>o||a<e&&a<i&&a<o)return 0;var c=u.quadraticRootAt(e,i,o,a,l);if(0===c)return 0;var h=u.quadraticExtremum(e,i,o);if(h>=0&&h<=1){for(var p=0,f=u.quadraticAt(e,i,o,h),d=0;d<c;d++)u.quadraticAt(t,r,n,l[d])>s||(l[d]<h?p+=f<e?1:-1:p+=o<f?1:-1);return p}return u.quadraticAt(t,r,n,l[0])>s?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,r,i,n,o,s,a){var u=this.roots,l=this.PI2;if((a-=e)>r||a<-r)return 0;var c=Math.sqrt(r*r-a*a);if(u[0]=-c,u[1]=c,Math.abs(i-n)>=l){i=0,n=l;var h=o?1:-1;return s>=u[0]+t&&s<=u[1]+t?h:0}if(o){var p=i;i=this.normalizeRadian(n),n=this.normalizeRadian(p)}else i=this.normalizeRadian(i),n=this.normalizeRadian(n);i>n&&(n+=l);for(var f=0,d=0;d<2;d++){var g=u[d];if(g+t>s){var y=Math.atan2(a,g),v=o?1:-1;y<0&&(y=l+y),(y>=i&&y<=n||y+l>=i&&y+l<=n)&&(y>Math.PI/2&&y<1.5*Math.PI&&(v=-v),f+=v)}}return f}},{key:"isInsidePath",value:function(t,e,r,i,n){for(var o=0,s=0,a=0,u=0,l=0,c=!0,h=!0,p="stroke"===(r=r||"fill")||"both"===r,f="fill"===r||"both"===r,d=0;d<t.length;d++){var g=t[d],y=g.points;if(c||"M"===g.command){if(d>0&&(f&&(o+=this.windingLine(s,a,u,l,i,n)),0!==o))return!0;u=y[y.length-2],l=y[y.length-1],c=!1,h&&"A"!==g.command&&(h=!1,s=u,a=l)}switch(g.command){case"M":s=y[0],a=y[1];break;case"L":if(p&&this.isInsideLine(s,a,y[0],y[1],e,i,n))return!0;f&&(o+=this.windingLine(s,a,y[0],y[1],i,n)),s=y[0],a=y[1];break;case"C":if(p&&this.isInsideCubicStroke(s,a,y[0],y[1],y[2],y[3],y[4],y[5],e,i,n))return!0;f&&(o+=this.windingCubic(s,a,y[0],y[1],y[2],y[3],y[4],y[5],i,n)),s=y[4],a=y[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(s,a,y[0],y[1],y[2],y[3],e,i,n))return!0;f&&(o+=this.windingQuadratic(s,a,y[0],y[1],y[2],y[3],i,n)),s=y[2],a=y[3];break;case"A":var v=y[0],m=y[1],_=y[2],b=y[3],S=y[4],x=y[5],O=Math.cos(S)*_+v,E=Math.sin(S)*b+m;h?(h=!1,u=O,l=E):o+=this.windingLine(s,a,O,E);var C=(i-v)*b/_+v;if(p&&this.isInsideArcStroke(v,m,b,S,S+x,1-y[7],e,C,n))return!0;f&&(o+=this.windingArc(v,m,b,S,S+x,1-y[7],C,n)),s=Math.cos(S+x)*_+v,a=Math.sin(S+x)*b+m;break;case"z":if(p&&this.isInsideLine(s,a,u,l,e,i,n))return!0;c=!0}}return f&&(o+=this.windingLine(s,a,u,l,i,n)),0!==o}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var i=0,n=0,o=(t=(t+"").split("\n")).length;n<o;n++)i=Math.max(this._ctx.measureText(t[n]).width,i);return this._ctx.restore(),this._textWidthCache[r]=i,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),i}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var i=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=i,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),i}}]),t}();e.Area=l,o.Zondy.LevelRenderer.Tool.Area=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeBoundingBox=void 0;var i=u(r(8)),n=u(r(16)),o=r(6),s=r(253),a=r(254);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,i.default)(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}return(0,n.default)(t,[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var i=t[0][0],n=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var u=t[a];u[0]<i&&(i=u[0]),u[0]>n&&(n=u[0]),u[1]<o&&(o=u[1]),u[1]>s&&(s=u[1])}e[0]=i,e[1]=o,r[0]=n,r[1]=s}}},{key:"cubeBezier",value:function(t,e,r,i,n,o){var a=new s.Curve,u=[];a.cubicExtrema(t[0],e[0],r[0],i[0],u);for(var l=0;l<u.length;l++)u[l]=a.cubicAt(t[0],e[0],r[0],i[0],u[l]);var c=[];a.cubicExtrema(t[1],e[1],r[1],i[1],c);for(var h=0;h<c.length;h++)c[h]=a.cubicAt(t[1],e[1],r[1],i[1],c[h]);u.push(t[0],i[0]),c.push(t[1],i[1]);var p=Math.min.apply(null,u),f=Math.max.apply(null,u),d=Math.min.apply(null,c),g=Math.max.apply(null,c);n[0]=p,n[1]=d,o[0]=f,o[1]=g}},{key:"quadraticBezier",value:function(t,e,r,i,n){var o=new s.Curve,a=o.quadraticExtremum(t[0],e[0],r[0]),u=o.quadraticExtremum(t[1],e[1],r[1]),l=1-(a=Math.max(Math.min(a,1),0)),c=1-(u=Math.max(Math.min(u,1),0)),h=l*l*t[0]+2*l*a*e[0]+a*a*r[0],p=l*l*t[1]+2*l*a*e[1]+a*a*r[1],f=c*c*t[0]+2*c*u*e[0]+u*u*r[0],d=c*c*t[1]+2*c*u*e[1]+u*u*r[1];i[0]=Math.min(t[0],r[0],h,f),i[1]=Math.min(t[1],r[1],p,d),n[0]=Math.max(t[0],r[0],h,f),n[1]=Math.max(t[1],r[1],p,d)}},{key:"arc",value:function(t,e,r,i,n,o,s,u){var l=new a.Vector,c=l.create(),h=l.create(),p=l.create();if(c[0]=Math.cos(i)*r+t,c[1]=Math.sin(i)*r+e,h[0]=Math.cos(n)*r+t,h[1]=Math.sin(n)*r+e,l.min(s,c,h),l.max(u,c,h),(i%=2*Math.PI)<0&&(i+=2*Math.PI),(n%=2*Math.PI)<0&&(n+=2*Math.PI),i>n&&!o?n+=2*Math.PI:i<n&&o&&(i+=2*Math.PI),o){var f=n;n=i,i=f}for(var d=0;d<n;d+=Math.PI/2)d>i&&(p[0]=Math.cos(d)*r+t,p[1]=Math.sin(d)*r+e,l.min(s,p,s),l.max(u,p,u))}}]),t}();e.ComputeBoundingBox=l,o.Zondy.LevelRenderer.Tool.ComputeBoundingBox=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Env=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;return function(t){var r=e.os={},i=e.browser={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=t.match(/(iPad).*OS\s([\d_]+)/),a=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&t.match(/TouchPad/),h=t.match(/Kindle\/([\d.]+)/),p=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),g=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),_=t.match(/MSIE ([\d.]+)/),b=n&&t.match(/Mobile\//)&&!v,S=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v;return(i.webkit=!!n)&&(i.version=n[1]),o&&(r.android=!0,r.version=o[2]),u&&!a&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),s&&(r.ios=r.ipad=!0,r.version=s[2].replace(/_/g,".")),a&&(r.ios=r.ipod=!0,r.version=a[3]?a[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),f&&(r.blackberry=!0,r.version=f[2]),d&&(r.bb10=!0,r.version=d[2]),g&&(r.rimtabletos=!0,r.version=g[2]),y&&(i.playbook=!0),h&&(r.kindle=!0,r.version=h[1]),p&&(i.silk=!0,i.version=p[1]),!p&&r.android&&t.match(/Kindle Fire/)&&(i.silk=!0),v&&(i.chrome=!0,i.version=v[1]),m&&(i.firefox=!0,i.version=m[1]),_&&(i.ie=!0,i.version=_[1]),b&&(t.match(/Safari/)||r.ios)&&(i.safari=!0),S&&(i.webview=!0),_&&(i.ie=!0,i.version=_[1]),r.tablet=!!(s||y||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(o||u||l||f||d||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:i,os:r,canvasSupported:!!document.createElement("canvas").getContext}}(navigator.userAgent)}return(0,n.default)(t,[{key:"destory",value:function(){return!0}}]),t}();e.Env=a,o.Zondy.LevelRenderer.Tool.Env=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}return(0,n.default)(t,[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}]),t}();e.Event=a,o.Zondy.LevelRenderer.Tool.Event=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Http=void 0;var i=a(r(123)),n=a(r(8)),o=a(r(16)),s=r(6);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}return(0,o.default)(t,[{key:"get",value:function(t,e,r){if("object"===(void 0===t?"undefined":(0,i.default)(t))){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),t}();e.Http=u,s.Zondy.LevelRenderer.Tool.Http=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}return(0,n.default)(t,[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}]),t}();e.Math=a,o.Zondy.LevelRenderer.Tool.Math=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}return(0,n.default)(t,[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var i=e[0],n=e[2],o=e[4],s=e[1],a=e[3],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=i*c+s*l,t[1]=-i*l+s*c,t[2]=n*c+a*l,t[3]=-n*l+c*a,t[4]=c*o+l*u,t[5]=c*u-l*o,t}},{key:"scale",value:function(t,e,r){var i=r[0],n=r[1];return t[0]=e[0]*i,t[1]=e[1]*n,t[2]=e[2]*i,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*n,t}},{key:"invert",value:function(t,e){var r=e[0],i=e[2],n=e[4],o=e[1],s=e[3],a=e[5],u=r*s-o*i;return u?(u=1/u,t[0]=s*u,t[1]=-o*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*a-s*n)*u,t[5]=(o*n-r*a)*u,t):null}},{key:"mulVector",value:function(t,e,r){var i=e[0],n=e[2],o=e[4],s=e[1],a=e[3],u=e[5];return t[0]=r[0]*i+r[1]*n+o,t[1]=r[0]*s+r[1]*a+u,t}}]),t}();e.Matrix=a,o.Zondy.LevelRenderer.Tool.Matrix=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaintLayer=e.Painter=void 0;var i=g(r(12)),n=g(r(13)),o=g(r(14)),s=g(r(8)),a=g(r(16)),u=r(6),l=r(22),c=r(182),h=r(252),p=r(333),f=r(115),d=r(334);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e,r){(0,s.default)(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="Zondy.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var i=document.createElement("div");this._domRoot=i,i.style.position="relative",i.style.overflow="hidden",i.style.width=this._width+"px",i.style.height=this._height+"px",this.root.appendChild(i),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom((0,l.newGuid)(),"div",this),i.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var n=new v((0,l.newGuid)(),this);this._layers.hover=n,i.appendChild(n.dom),n.initContext(),n.dom.onselectstart=a,n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none";var o=this;function a(){return!1}this.updatePainter=function(t,e){o.refreshShapes(t,e)}}return(0,a.default)(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,i,n;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var s=[],a=0,u=t.length;a<u;a++){var l=t[a];if(i!==l.zlevel&&(r&&r.needTransform&&n.restore(),n=(r=this.getLayer(l.zlevel)).ctx,i=l.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(n.save(),r.setTransform(n))),n&&l.__startClip){var c=l.__startClip;if(n.save(),c.needTransform){var h=c.transform;f.SUtil.Util_matrix.invert(s,h),n.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(n.beginPath(),c.buildPath(n,c.style),n.clip(),c.needTransform){var d=s;n.transform(d[0],d[1],d[2],d[3],d[4],d[5])}}if((r&&r.dirty||e)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(n,!1)))if(p.Config.catchBrushException)try{l.brush(n,!1,this.updatePainter)}catch(t){}else l.brush(n,!1,this.updatePainter);n&&l.__stopClip&&n.restore(),l.__dirty=!1}for(var g in n&&r&&r.needTransform&&n.restore(),this._layers)if("hover"!==g){var y=this._layers[g];y.dirty=!1,1===y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,i=null,n=-1;if(r>0&&t>this._zlevelList[0]){for(n=0;n<r-1&&!(this._zlevelList[n]<t&&this._zlevelList[n+1]>t);n++);i=this._layers[this._zlevelList[n]]}this._zlevelList.splice(n+1,0,t),e=new v((0,l.newGuid)(),this);var o=i?i.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(e.dom,o.nextSibling):o.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new c.Util).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var i in e)"hover"!==i&&(r[i]=e[i].elCount,e[i].elCount=0);for(var n=0;n<t.length;n++){var o=t[n],s=e[o.zlevel];if(s){if(s.elCount++,s.dirty)continue;s.dirty=o.__dirty}}for(var a in e)"hover"!==a&&r[a]!==e[a].elCount&&(e[a].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,i=t.length;r<i;r++){var n=t[r];this.storage.mod(n.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!==t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new c.Util).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new c.Util).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new c.Util).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!==e||r!==this._height){for(var i in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[i].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,i){var n=t.createDom((0,l.newGuid)(),"canvas",this);this._bgDom.appendChild(n);var o=n.getContext("2d");1!==t.devicePixelRatio&&o.scale(t.devicePixelRatio,t.devicePixelRatio),o.fillStyle=r||"#fff",o.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),o.fill();var s=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(o,!1)))if(p.Config.catchBrushException)try{t.brush(o,!1,s.updatePainter)}catch(t){}else t.brush(o,!1,s.updatePainter)},{normal:"up",update:!0});var a=n.toDataURL(e,i);return o=null,this._bgDom.removeChild(n),a}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),p.Config.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(t){}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,i,n){var o=document.createElement("canvas"),s=o.getContext("2d"),a=n||window.devicePixelRatio||1;o.style.width=r+"px",o.style.height=i+"px",o.setAttribute("width",r*a),o.setAttribute("height",i*a),s.clearRect(0,0,r*a,i*a);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s,!1);var l=new d.SmicImage({id:t,style:{x:0,y:0,image:o}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,i,n,o){return e._shapeToImage(r,i,n,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,i){var n=document.createElement(r),o=i._width,s=i._height;return n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=o+"px",n.style.height=s+"px",n.setAttribute("width",o*t.devicePixelRatio),n.setAttribute("height",s*t.devicePixelRatio),n.setAttribute("id",e),n}}]),t}(),v=function(t){function e(t,r){(0,s.default)(this,e);var o=(0,n.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.dom=null,o.domBack=null,o.ctxBack=null,o.painter=r,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=y.createDom((0,l.newGuid)(),"canvas",r),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer",o}return(0,o.default)(e,t),(0,a.default)(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,h.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!==y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=y.createDom((0,l.newGuid)(),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!==y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*y.devicePixelRatio),this.dom.setAttribute("height",e*y.devicePixelRatio),1!==y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*y.devicePixelRatio),this.domBack.setAttribute("height",e*y.devicePixelRatio),1!==y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,i=t.height,n=this.clearColor,o=this.motionBlur,s=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/y.devicePixelRatio,i/y.devicePixelRatio)),n?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/y.devicePixelRatio,i/y.devicePixelRatio),e.restore()):e.clearRect(0,0,r/y.devicePixelRatio,i/y.devicePixelRatio),o){var a=this.domBack;e.save(),e.globalAlpha=s,e.drawImage(a,0,0,r/y.devicePixelRatio,i/y.devicePixelRatio),e.restore()}}}]),e}(h.Transformable);e.Painter=y,u.Zondy.LevelRenderer.Painter=y,e.PaintLayer=v,u.Zondy.LevelRenderer.PaintLayer=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Handler=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(14)),u=r(6),l=r(207),c=r(333),h=r(115);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o));a.root=t,a.storage=r,a.painter=o,a._lastX=0,a._lastY=0,a._mouseX=0,a._mouseY=0,a._findHover=null,a._domHover=null,a._findHover=function(t,e){return function(t,r,i){return function(t,e,r){var i=this;if(i._draggingTarget&&i._draggingTarget.id===t.id||t.isSilent())return!1;var n=i._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,s=null;t.refDataHoverGroup&&(s=t.refDataHoverGroup);for(var a=i.storage._shapeList,u=0,l=a.length;u<l;u++){var c=a[u];c.refDataID&&o===c.refDataID&&(s?c.refDataHoverGroup&&s===c.refDataHoverGroup&&i.storage.addHover(c):i.storage.addHover(c))}}}else i.storage.addHover(t);for(var h=t.parent;h;){if(h.clipShape&&!h.clipShape.isCover(i._mouseX,i._mouseY))return!1;h=h.parent}return i._lastHover!==t&&(i._processOutShape(n),i._processDragLeave(n),i._lastHover=t,i._processDragEnter(n)),i._processOverShape(n),i._processDragOver(n),i._hasfound=1,!0}return!1}.call(e,t,r,i)}}(0,a),a._domHover=o.getDomHover(),a.CLASS_NAME="Zondy.LevelRenderer.Handler";var u={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(c.Config.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,c.Config.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,c.Config.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),i=!1;for(var n in r)if("hover"!==n){var o=r[n],s=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var a=o.__zoom;a*=e,e=(a=Math.max(Math.min(o.maxZoom,a),o.minZoom))/o.__zoom,o.__zoom=a,s[0]-=(this._mouseX-s[0])*(e-1),s[1]-=(this._mouseY-s[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,o.dirty=!0,i=!0}}i&&this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=h.SUtil.Util_event.getX(t),this._mouseY=h.SUtil.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var i="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var n=this.painter.getLayers(),o=!1;for(var s in n)if("hover"!==s){var a=n[s];a.panable&&(i="move",a.position[0]+=e,a.position[1]+=r,o=!0,a.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?i="move":this._hasfound&&this._lastHover.clickable&&(i="pointer"),this.root.style.cursor=i,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!==this.root)for(;e&&9!==e.nodeType;){if(e===this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(c.Config.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2===this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&h.SUtil.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<c.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<c.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&h.SUtil.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function l(t,e){return function(r){return t.call(e,r)}}return function(t){for(var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;r--;){var i=e[r];t["_"+i+"Handler"]=l(u[i],t)}}(a),window.addEventListener?(window.addEventListener("resize",a._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.addEventListener("touchstart",a._touchstartHandler),t.addEventListener("touchmove",a._touchmoveHandler),t.addEventListener("touchend",a._touchendHandler)):(t.addEventListener("click",a._clickHandler),t.addEventListener("dblclick",a._dblclickHandler),t.addEventListener("mousewheel",a._mousewheelHandler),t.addEventListener("mousemove",a._mousemoveHandler),t.addEventListener("mousedown",a._mousedownHandler),t.addEventListener("mouseup",a._mouseupHandler)),t.addEventListener("DOMMouseScroll",a._mousewheelHandler),t.addEventListener("mouseout",a._mouseoutHandler)):(window.attachEvent("onresize",a._resizeHandler),t.attachEvent("onclick",a._clickHandler),t.ondblclick=a._dblclickHandler,t.attachEvent("onmousewheel",a._mousewheelHandler),t.attachEvent("onmousemove",a._mousemoveHandler),t.attachEvent("onmouseout",a._mouseoutHandler),t.attachEvent("onmousedown",a._mousedownHandler),t.attachEvent("onmouseup",a._mouseupHandler)),a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,l.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=c.Config.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget===e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,c.Config.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,c.Config.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,i){var n="on"+e,o={type:e,event:r,target:t,cancelBubble:!1},s=t;for(i&&(o.dragged=i);s&&(s[n]&&(o.cancelBubble=s[n](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):i||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=h.SUtil.Util_matrix.create(),r=this.storage.getShapeList(),i=[0,0],n=r.length-1;n>=0;n--){var o=r[n];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),i[0]=this._mouseX,i[1]=this._mouseY,t.needTransform&&(h.SUtil.Util_matrix.invert(e,t.transform),h.SUtil.Util_vector.applyTransform(i,i,e))),this._findHover(o,i[0],i[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var i=e[r];i.x&&(this._mouseX+=i.x),i.y&&(this._mouseX+=i.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!==t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var i=this.root.getBoundingClientRect();t.zrenderX=r.clientX-i.left,t.zrenderY=r.clientY-i.top}}else{var n=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;n&&n!==this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+n.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+n.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),e}(l.Eventful);e.Handler=f,u.Zondy.LevelRenderer.Handler=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.Animation=void 0;var i=g(r(123)),n=g(r(12)),o=g(r(8)),s=g(r(16)),a=g(r(13)),u=g(r(14)),l=r(6),c=r(22),h=r(182),p=r(207),f=r(451),d=r(115);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var r=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return t=t||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,(0,c.extend)(r,t),r.CLASS_NAME="Zondy.LevelRenderer.Animation",r}return(0,u.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new h.Util).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,i=r.length,n=[],o=[],s=0;s<i;s++){var a=r[s],u=a.step(t);u&&(n.push(u),o.push(a))}this.stage.update&&this.stage.update();for(var l=0;l<i;)r[l]._needsRemove?(r[l]=r[i-1],r.pop(),i--):l++;i=n.length;for(var c=0;c<i;c++)o[c].fire(n[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new v(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,r,i,n,o){var s=t.length;if(1===o)for(var a=0;a<s;a++)n[a]=e._interpolateNumber(t[a],r[a],i);else for(var u=t[0].length,l=0;l<s;l++)for(var c=0;c<u;c++)n[l][c]=e._interpolateNumber(t[l][c],r[l][c],i)}},{key:"_isArrayLike",value:function(t){switch(void 0===t?"undefined":(0,i.default)(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,r,i,n,o,s,a,u,l){var c=t.length;if(1===l)for(var h=0;h<c;h++)u[h]=e._catmullRomInterpolate(t[h],r[h],i[h],n[h],o,s,a);else for(var p=t[0].length,f=0;f<c;f++)for(var d=0;d<p;d++)u[f][d]=e._catmullRomInterpolate(t[f][d],r[f][d],i[f][d],n[f][d],o,s,a)}},{key:"_catmullRomInterpolate",value:function(t,e,r,i,n,o,s){var a=.5*(r-t),u=.5*(i-e);return(2*(e-r)+a+u)*s+(-3*(e-r)-2*a-u)*o+a*n+e}},{key:"_cloneValue",value:function(t){var r=Array.prototype.slice;if(e._isArrayLike(t)){var i=t.length;if(e._isArrayLike(t[0])){for(var n=[],o=0;o<i;o++)n.push(r.call(t[o]));return n}return r.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(p.Eventful),v=function(){function t(e,r,i,n){(0,o.default)(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=i||function(t,e){return t[e]},this._setter=n||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator"}return(0,s.default)(t,[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:y._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,i=this._getter,n=e._onframeList.length,o="spline"===t,s=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},a=function(a,u){var l=a.length;if(l){var c=a[0].value,h=y._isArrayLike(c),p=!1,g=h&&y._isArrayLike(c[0])?2:1;a.sort(function(t,e){return t.time-e.time});for(var v=a[l-1].time,m=[],_=[],b=0;b<l;b++){m.push(a[b].time/v);var S=a[b].value;"string"==typeof S&&(0===(S=d.SUtil.Util_color.toArray(S)).length&&(S[0]=S[1]=S[2]=0,S[3]=1),p=!0),_.push(S)}var x,O,E,C,T,P,w,I=0,L=0;if(p)var R=[0,0,0,0];var M=new f.Clip({target:e._target,life:v,loop:e._loop,delay:e._delay,onframe:function(t,s){if(s<L){for(x=Math.min(I+1,l-1),O=x;O>=0&&!(m[O]<=s);O--);O=Math.min(O,l-2)}else{for(O=I;O<l&&!(m[O]>s);O++);O=Math.min(O-1,l-2)}I=O,L=s;var a=m[O+1]-m[O];if(0!==a){if(E=(s-m[O])/a,o)if(T=_[O],C=_[0===O?O:O-1],P=_[O>l-2?l-1:O+1],w=_[O>l-3?l-1:O+2],h)y._catmullRomInterpolateArray(C,T,P,w,E,E*E,E*E*E,i(t,u),g);else{var c;c=p?y.rgba2String(R):y._catmullRomInterpolate(C,T,P,w,E,E*E,E*E*E),r(t,u,c)}else if(h)y._interpolateArray(_[O],_[O+1],E,i(t,u),g);else{var f=void 0;p?(y._interpolateArray(_[O],_[O+1],E,R,1),f=y.rgba2String(R)):f=y._interpolateNumber(_[O],_[O+1],E),r(t,u,f)}for(O=0;O<n;O++)e._onframeList[O](t,s)}},ondestroy:s});t&&"spline"!==t&&(M.easing=t),e._clipList.push(M),e._clipCount++,e.animation.add(M)}};for(var u in this._tracks)a(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();e.Animation=y,l.Zondy.LevelRenderer.Animation=y,e.Animator=v,l.Zondy.LevelRenderer.Animation.Animator=v},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var i=a(r(8)),n=a(r(16)),o=r(6),s=r(452);function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){(0,i.default)(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}return(0,n.default)(t,[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new s.Easing,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var i="string"==typeof this.easing?e[this.easing]:this.easing,n="function"==typeof i?i(r):r;return this.fire("frame",n),1===r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,i=this._targetPool.length;r<i;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}]),t}();e.Clip=u,o.Zondy.LevelRenderer.Animation.Clip=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var i=s(r(8)),n=s(r(16)),o=r(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,i.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}return(0,n.default)(t,[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}]),t}();e.Easing=a,o.Zondy.LevelRenderer.Animation.Easing=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o,a){(0,n.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a));return u.x=isNaN(t)?0:t,u.y=isNaN(t)?0:r,u.width=isNaN(o)?0:o,u.height=isNaN(a)?0:a,u.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle",u}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Rectangle=h,l.Zondy.Feature.ShapeParameters.Rectangle=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o));return a.x=t,a.y=r,a.text=o,a.CLASS_NAME="Zondy.Feature.ShapeParameters.Label",a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Label=h,l.Zondy.Feature.ShapeParameters.Label=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o,a,u,l,c,h,p){(0,n.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l,c,h,p));return f.x=t,f.y=r,f.image=o,f.width=a,f.height=u,f.sx=l,f.sy=c,f.sWidth=h,f.sHeight=p,f.CLASS_NAME="Zondy.Feature.ShapeParameters.Image",f}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}}]),e}(r(141).ShapeParameters);e.Image=h,l.Zondy.Feature.ShapeParameters.Image=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicText=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(108),h=r(115);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.SmicText",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=this.style;if(e&&(i=this.getHighlightStyle(i,this.highlightStyle||{})),void 0!==i.text&&!1!==i.text){t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.textFont&&(t.font=i.textFont),t.textAlign=i.textAlign||"start",t.textBaseline=i.textBaseline||"middle";var n,o=(i.text+"").split("\n"),s=h.SUtil.Util_area.getTextHeight("ZH",i.textFont),a=this.getRectNoRotation(i),u=i.x+r[0];n="top"===i.textBaseline?a.y:"bottom"===i.textBaseline?a.y+s:a.y+s/2;for(var l=i.x+r[0],c=i.y+r[1],p=0,f=o.length;p<f;p++){switch(i.labelRect&&(t.fillRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=i.strokeColor,t.strokeRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=i.textColor),i.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",i),i.textRotation&&0!==i.textRotation?(t.save(),t.translate(l,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?t.strokeText(o[p],0,s*p,i.maxWidth):t.strokeText(o[p],0,s*p):"bottom"===i.textBaseline?i.maxWidth?t.strokeText(o[p],0,s*(p+1)-a.height,i.maxWidth):t.strokeText(o[p],0,s*(p+1)-a.height):i.maxWidth?t.strokeText(o[p],0,s*(p+1)-a.height/2-s/2,i.maxWidth):t.strokeText(o[p],0,s*(p+1)-a.height/2-s/2),t.restore()):i.maxWidth?t.strokeText(o[p],u,n,i.maxWidth):t.strokeText(o[p],u,n),this.setCtxGlobalAlpha(t,"reset",i);break;case"both":i.textRotation&&0!==i.textRotation?(t.save(),t.translate(l,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*p,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*p,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*p),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*p),this.setCtxGlobalAlpha(t,"reset",i)):"bottom"===i.textBaseline?i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*(p+1)-a.height,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*(p+1)-a.height,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*(p+1)-a.height),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*(p+1)-a.height),this.setCtxGlobalAlpha(t,"reset",i)):i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*(p+1)-a.height/2-s/2,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*(p+1)-a.height/2-s/2,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],0,s*(p+1)-a.height/2-s/2),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],0,s*(p+1)-a.height/2-s/2),this.setCtxGlobalAlpha(t,"reset",i)),t.restore()):i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],u,n,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],u,n,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[p],u,n),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[p],u,n),this.setCtxGlobalAlpha(t,"reset",i));break;default:this.setCtxGlobalAlpha(t,"fill",i),i.textRotation&&0!==i.textRotation?(t.save(),t.translate(l,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?t.fillText(o[p],0,s*p,i.maxWidth):t.fillText(o[p],0,s*p):"bottom"===i.textBaseline?i.maxWidth?t.fillText(o[p],0,s*(p+1)-a.height,i.maxWidth):t.fillText(o[p],0,s*(p+1)-a.height):i.maxWidth?t.fillText(o[p],0,s*(p+1)-a.height/2-s/2,i.maxWidth):t.fillText(o[p],0,s*(p+1)-a.height/2-s/2),t.restore()):i.maxWidth?t.fillText(o[p],u,n,i.maxWidth):t.fillText(o[p],u,n),this.setCtxGlobalAlpha(t,"reset",i)}n+=s}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,i,n,o=this.getTextBackground(t,!0),s=0,a=o.length;s<a;s++){var u=o[s];0===s?(e=u[0],i=u[0],r=u[1],n=u[1]):(u[0]<e&&(e=u[0]),u[0]>i&&(i=u[0]),u[1]<r&&(r=u[1]),u[1]>n&&(n=u[1]))}return t.__rect={x:e,y:r,width:i-e,height:n-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,i=h.SUtil.Util_area.getTextHeight("ZH",t.textFont),n=h.SUtil.Util_area.getTextWidth(t.text,t.textFont),o=h.SUtil.Util_area.getTextHeight(t.text,t.textFont),s=t.x+r[0];"end"===t.textAlign||"right"===t.textAlign?s-=n:"center"===t.textAlign&&(s-=n/2),e="top"===t.textBaseline?t.y+r[1]:"bottom"===t.textBaseline?t.y+r[1]-o:t.y+r[1]-o/2;var a,u=!1;if(t.maxWidth){var l=parseInt(t.maxWidth);l<n&&(a=n,u=!0,n=l),s=t.x+r[0],"end"===t.textAlign||"right"===t.textAlign?s-=n:"center"===t.textAlign&&(s-=n/2)}return t.textFont&&t.textFont.toLowerCase().indexOf("italic")>-1&&(n+=a&&!0===u?i/3*(n/a):i/3),{x:s,y:e,width:n,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if((!e||!1===e)&&t.__textBackground)return t.__textBackground;var i=this.getRectNoRotation(t),n=t.x+r[0],o=t.y+r[1],s=[];if(t.textRotation&&0!==t.textRotation){var a=t.textRotation,u=this.getRotatedLocation(i.x,i.y,n,o,a),l=this.getRotatedLocation(i.x+i.width,i.y,n,o,a),c=this.getRotatedLocation(i.x+i.width,i.y+i.height,n,o,a),h=this.getRotatedLocation(i.x,i.y+i.height,n,o,a);s.push(u),s.push(l),s.push(c),s.push(h)}else{var p=[i.x,i.y],f=[i.x+i.width,i.y],d=[i.x+i.width,i.y+i.height],g=[i.x,i.y+i.height];s.push(p),s.push(f),s.push(d),s.push(g)}return t.__textBackground=s,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,i,n){var o,s,a=new Array;return e=-e,i=-i,n=-n,o=(t-r)*Math.cos(n/180*Math.PI)-(e-i)*Math.sin(n/180*Math.PI)+r,s=(t-r)*Math.sin(n/180*Math.PI)+(e-i)*Math.cos(n/180*Math.PI)+i,a[0]=o,a[1]=-s,a}}]),e}(c.Shape);e.SmicText=f,l.Zondy.LevelRenderer.SmicText=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicCircle=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.SmicCircle",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=e.x+r[0],n=e.y+r[1];return t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,i=t.x+r[0],n=t.y+r[1],o=t.r;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(i-o-e/2),y:Math.round(n-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}]),e}(r(108).Shape);e.SmicCircle=h,l.Zondy.LevelRenderer.SmicCircle=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRectangle=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,i,n,o,s,a=this.refOriginalPosition,u=e.x+a[0],l=e.y+a[1],c=e.width,h=e.height,p=e.radius;"number"==typeof p?r=i=n=o=p:p instanceof Array?1===p.length?r=i=n=o=p[0]:2===p.length?(r=n=p[0],i=o=p[1]):3===p.length?(r=p[0],i=o=p[1],n=p[2]):(r=p[0],i=p[1],n=p[2],o=p[3]):r=i=n=o=0,r+i>c&&(r*=c/(s=r+i),i*=c/s),n+o>c&&(n*=c/(s=n+o),o*=c/s),i+n>h&&(i*=h/(s=i+n),n*=h/s),r+o>h&&(r*=h/(s=r+o),o*=h/s),t.moveTo(u+r,l),t.lineTo(u+c-i,l),0!==i&&t.quadraticCurveTo(u+c,l,u+c,l+i),t.lineTo(u+c,l+h-n),0!==n&&t.quadraticCurveTo(u+c,l+h,u+c-n,l+h),t.lineTo(u+o,l+h),0!==o&&t.quadraticCurveTo(u,l+h,u,l+h-o),t.lineTo(u,l+r),0!==r&&t.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}]),e}(r(108).Shape);e.SmicRectangle=h,l.Zondy.LevelRenderer.SmicRectangle=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicSector=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(108),h=r(115);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=e.x+r[0],n=e.y+r[1],o=e.r0||0,s=e.r,a=e.startAngle,u=e.endAngle,l=e.clockWise||!1;a=h.SUtil.Util_math.degreeToRadian(a),u=h.SUtil.Util_math.degreeToRadian(u),l||(a=-a,u=-u);var c=h.SUtil.Util_math.cos(a),p=h.SUtil.Util_math.sin(a);t.moveTo(c*o+i,p*o+n),t.lineTo(c*s+i,p*s+n),t.arc(i,n,s,a,u,!l),t.lineTo(h.SUtil.Util_math.cos(u)*o+i,h.SUtil.Util_math.sin(u)*o+n),0!==o&&t.arc(i,n,o,u,a,l),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=h.SUtil.Util_vector.create(),i=h.SUtil.Util_vector.create(),n=h.SUtil.Util_vector.create(),o=h.SUtil.Util_vector.create(),s=t.x+e[0],a=t.y+e[1],u=t.r0||0,l=t.r,c=h.SUtil.Util_math.degreeToRadian(t.startAngle),p=h.SUtil.Util_math.degreeToRadian(t.endAngle),f=t.clockWise;return f||(c=-c,p=-p),u>1?h.SUtil.Util_computeBoundingBox.arc(s,a,u,c,p,!f,r,n):(r[0]=n[0]=s,r[1]=n[1]=a),h.SUtil.Util_computeBoundingBox.arc(s,a,l,c,p,!f,i,o),h.SUtil.Util_vector.min(r,r,i),h.SUtil.Util_vector.max(n,n,o),t.__rect={x:r[0],y:r[1],width:n[0]-r[0],height:n[1]-r[1]},t.__rect}}]),e}(c.Shape);e.SmicSector=f,l.Zondy.LevelRenderer.SmicSector=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbol=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.setting=null,a&&a.codomain&&(c.setting=a,c.DVBCodomain=c.setting.codomain),c.CLASS_NAME="Zondy.Theme.RankSymbol",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.setting=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,i=this.location;this.origonPoint=[i[0]-e/2,i[1]-r/2];var n=this.origonPoint;this.chartBox=[n[0],n[1]+r,n[0]+e,n[1]];var o=this.chartBox,s=this.DVBParameter;this.dataViewBox=[o[0]+s[0],o[1]-s[1],o[2]-s[2],o[3]+s[3]];var a=this.dataViewBox;return!(a[0]>=a[2]||a[1]<=a[3]||(this.DVBOrigonPoint=[a[0],a[3]],this.DVBWidth=Math.abs(a[2]-a[0]),this.DVBHeight=Math.abs(a[1]-a[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-n[0],this.DVBOrigonPoint[1]-n[1]],0))}}]),e}(r(148).Graph);e.RankSymbol=h,l.Zondy.Theme.RankSymbol=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=void 0;var i=r(100),n=r(141),o=r(336),s=r(455),a=r(454),u=r(335),l=r(255),c=r(256),h=r(453),p=r(257),f=r(209);e.ShapeFactory=i.ShapeFactory,e.ShapeParameters=n.ShapeParameters,e.FeatureCircle=o.Circle,e.Image=s.Image,e.Label=a.Label,e.FeatureLine=u.Line,e.Point=l.Point,e.FeaturePolygon=c.Polygon,e.FeatureRectangle=h.Rectangle,e.Sector=p.Sector,e.FeatureTheme=f.Theme},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphThemeSource=void 0;var i=g(r(12)),n=g(r(8)),o=g(r(16)),s=g(r(13)),a=g(r(40)),u=g(r(14)),l=r(6),c=r(436),h=r(209),p=r(114),f=r(247),d=r(205);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,o));return a.chartsSetting=o.chartsSetting||{},a.themeFields=o.themeFields||null,a.overlayWeightField=o.overlayWeightField||null,a.isOverLay=o.isOverLay||!0,a.charts=o.charts||[],a.cache=o.cache||{},a.chartsType=r,a.options={calGravity:o.calGravity||!0},a}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){c.ThemeSource.prototype.destroy.apply(this,arguments),this.chartsType=null,this.chartsSetting=null,this.themeFields=null,this.overlayWeightField=null,this.isOverLay=null,this.options={fitZoom:-1},this.charts=null,this.cache=null}},{key:"setChartsType",value:function(t){this.chartsType=t,this.redraw()}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof f.FeatureSet){var e=null,r=t.AttStruct,i=t.SFEleArray;if(null!=i&&i.length>0)for(var n=0;n<i.length;n++){var o=i[n];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var s=0;s<o.AttValue.length;s++)e[r.FldName[s]]=o.AttValue[s];e.FID=o.FID}o.attributes=e,this.features.push(o)}}this.renderer&&this.changed()}},{key:"redrawThematicFeatures",value:function(t){this.renderer.clearAll();for(var e=this.features,r=new d.Rectangle(t[0],t[1],t[2],t[3]),i=0,n=e.length;i<n;i++){var o=e[i],s=o.bound;if(!r||r.intersectsBounds(s)){var a=this.cache,u=o.id;if(!a[u]){a[u]=u;var l=this.createThematicFeature(o);l&&this.overlayWeightField&&o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])&&(l.__overlayWeight=o.attributes[this.overlayWeightField]),l&&this.charts.push(l)}}}this.drawCharts()}},{key:"createThematicFeature",value:function(t){var e;return h.Theme[this.chartsType]&&this.themeFields&&this.chartsSetting&&(e=new h.Theme[this.chartsType](t,this,this.themeFields,this.chartsSetting,null,this.options)),!!e&&(e.assembleShapes(),e)}},{key:"drawCharts",value:function(){if(this.renderer){var t=this.charts;if(this.overlayWeightField&&t.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0}),this.isOverLay){var e=[],r=this.map.getView().calculateExtent(),i=this.getLocalXY([r[0],r[3]]),n=this.getLocalXY([r[2],r[1]]),o=new d.Rectangle;o.xmin=Math.min(parseFloat(i[0]),parseFloat(n[0])),o.xmax=Math.max(parseFloat(i[0]),parseFloat(n[0])),o.ymin=Math.min(parseFloat(i[1]),parseFloat(n[1])),o.ymax=Math.max(parseFloat(i[1]),parseFloat(n[1]));for(var s=0,a=t.length;s<a;s++){var u=t[s],l=u.resetLocation(),c=u.chartBounds,h=[{x:c.xmin,y:c.ymin},{x:c.xmin,y:c.ymax},{x:c.xmax,y:c.ymax},{x:c.xmax,y:c.ymin},{x:c.xmin,y:c.ymin}];if(!o||this.isChartInMap(o,h)){var p=!1;if(0!==s)for(var f=0;f<e.length;f++)if(this.isQuadrilateralOverLap(h,e[f])){p=!0;break}if(!p){e.push(h);for(var g=u.shapes,y=0,v=g.length;y<v;y++)g[y].refOriginalPosition=l,this.renderer.addShape(g[y])}}}}else for(var m=0,_=t.length;m<_;m++)for(var b=t[m],S=b.resetLocation(),x=b.shapes,O=0,E=x.length;O<E;O++)x[O].refOriginalPosition=S,this.renderer.addShape(x[O]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var i=0,n=r.length;i<n;i++){var o=r[i];o.refDataID&&t===o.refDataID&&e.push(o)}return e}},{key:"isQuadrilateralOverLap",value:function(t,e){var r=t.length,i=e.length;if(5!==r||5!==i)return null;for(var n=!1,o=0;o<r;o++)if(this.isPointInPoly(t[o],e)){n=!0;break}for(var s=0;s<i;s++)if(this.isPointInPoly(e[s],t)){n=!0;break}for(var a=0;a<r-1&&!n;a++)for(var u=0;u<i-1;u++)if("Zondy.Object.Point2D"===this.lineIntersection(t[a],t[a+1],e[u],e[u+1]).CLASS_NAME){n=!0;break}return n}},{key:"lineIntersection",value:function(t,e,r,i){var n,o,s=null,a=(i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x),u=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),l=(i.y-r.y)*(e.x-t.x)-(i.x-r.x)*(e.y-t.y);if(0!==l)o=u/l,s=(n=a/l)>=0&&o<=1&&n<=1&&o>=0?new p.Point2D(t.x+n*(e.x-t.x),t.y+n*(e.y-t.y)):"No Intersection";else if(0===a&&0===u){var c=Math.max(t.y,e.y),h=Math.min(t.y,e.y),f=Math.max(t.x,e.x),d=Math.min(t.x,e.x);s=(r.y>=h&&r.y<=c||i.y>=h&&i.y<=c)&&r.x>=d&&r.x<=f||i.x>=d&&i.x<=f?"Coincident":"Parallel"}else s="Parallel";return s}},{key:"isPointInPoly",value:function(t,e){for(var r=!1,i=-1,n=e.length,o=n-1;++i<n;o=i)(e[i].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[i].y)&&t.x<(e[o].x-e[i].x)*(t.y-e[i].y)/(e[o].y-e[i].y)+e[i].x&&(r=!r);return r}},{key:"isChartInMap",value:function(t,e){for(var r=t,i=!1,n=0,o=e.length;n<o;n++){var s=e[n];if(s.x>=r.xmin&&s.x<=r.xmax&&s.y>=r.ymin&&s.y<=r.ymax){i=!0;break}}return i}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(t){this.clearCache(),(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getView().calculateExtent()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}},{key:"canvasFunctionInternal_",value:function(t,e,r,i,n){return c.ThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(c.ThemeSource);e.GraphThemeSource=y,l.Zondy.Source.GraphThemeSource=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(464));i.zondy=i.zondy||{},i.zondy.control=i.zondy.control||{},e.default=i},function(t,e,r){"use strict";r.r(e);var i=r(185),n=r(48),o=r(131),s=r(36),a=r(276),u=r(339),l=r(109),c=r(151),h=r(152),p=r(142),f=r(210),d=r(211),g=r(166),y=r(260),v=r(111),m=r(156),_=r(25),b=r(150),S=r(222),x=r(167),O=r(95),E=r(187),C=r(186),T=r(128),P=r(231),w=r(223),I=r(184),L=r(90),R=r(228),M=r(11),A=r(71),j=r(50),N=r(28),F=r(24),D=r(1),k=r(4),G=r(157),B=r(59),U=r(5),V=r(30),z=r(143),W=r(15),Y=r(64),X=r(271),Z=r(57),H=r(52),q=r(7),K=function(t){this.source_=t};K.prototype.isAnimated=function(){return!1},K.prototype.getType=function(){return Object(k.abstract)()},K.prototype.getSource=function(){return this.source_};var J=K,Q=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return q.FRAGMENT_SHADER},e}(J),$=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return q.VERTEX_SHADER},e}(J),tt=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),et=new $(q.DEBUG?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"),rt=r(18);function it(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var nt=function(t){function e(e,r){t.call(this),this.tolerance=e,this.maxExtent=r,this.origin=Object(D.getCenter)(r),this.projectionMatrix_=Object(rt.c)(),this.offsetRotateMatrix_=Object(rt.c)(),this.offsetScaleMatrix_=Object(rt.c)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){return Object(k.abstract)()},e.prototype.finish=function(t){Object(k.abstract)()},e.prototype.setUpProgram=function(t,e,r,i){return Object(k.abstract)()},e.prototype.shutDownProgram=function(t,e){Object(k.abstract)()},e.prototype.drawReplay=function(t,e,r,i){Object(k.abstract)()},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,n){return Object(k.abstract)()},e.prototype.drawHitDetectionReplay=function(t,e,r,i,n,o){return n?this.drawHitDetectionReplayOneByOne(t,e,r,i,o):this.drawHitDetectionReplayAll(t,e,r,i)},e.prototype.drawHitDetectionReplayAll=function(t,e,r,i){return t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,r,!0),i(null)||void 0},e.prototype.replay=function(t,e,r,i,n,o,s,a,u,l,c){var h,p,f,d,g,y,v,m,_=t.getGL();this.lineStringReplay&&(h=_.isEnabled(_.STENCIL_TEST),p=_.getParameter(_.STENCIL_FUNC),f=_.getParameter(_.STENCIL_VALUE_MASK),d=_.getParameter(_.STENCIL_REF),g=_.getParameter(_.STENCIL_WRITEMASK),y=_.getParameter(_.STENCIL_FAIL),v=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),m=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.lineStringReplay.replay(t,e,r,i,n,o,s,a,u,l,c),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),t.bindBuffer(q.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var b=this.setUpProgram(_,t,n,o),S=Object(rt.f)(this.projectionMatrix_);Object(rt.h)(S,2/(r*n[0]),2/(r*n[1])),Object(rt.g)(S,-i),Object(rt.j)(S,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var x=Object(rt.f)(this.offsetScaleMatrix_);Object(rt.h)(x,2/n[0],2/n[1]);var O,E=Object(rt.f)(this.offsetRotateMatrix_);return 0!==i&&Object(rt.g)(E,-i),_.uniformMatrix4fv(b.u_projectionMatrix,!1,it(this.tmpMat4_,S)),_.uniformMatrix4fv(b.u_offsetScaleMatrix,!1,it(this.tmpMat4_,x)),_.uniformMatrix4fv(b.u_offsetRotateMatrix,!1,it(this.tmpMat4_,E)),_.uniform1f(b.u_opacity,s),void 0===u?this.drawReplay(_,t,a,!1):O=this.drawHitDetectionReplay(_,t,a,u,l,c),this.shutDownProgram(_,b),this.lineStringReplay&&(h||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(p,d,f),_.stencilMask(g),_.stencilOp(y,m,v)),O},e.prototype.drawElements=function(t,e,r,i){var n=e.hasOESElementIndexUint?q.UNSIGNED_INT:q.UNSIGNED_SHORT,o=i-r,s=r*(e.hasOESElementIndexUint?4:2);t.drawElements(q.TRIANGLES,o,n,s)},e}(z.default),ot=[0,0,0,1],st=[],at=[0,0,0,1],ut=Number.EPSILON||2.220446049250313e-16,lt=function(t,e,r,i,n,o){var s=(r-t)*(o-e)-(n-t)*(i-e);return s<=ut&&s>=-ut?void 0:s>0},ct={STATIC_DRAW:q.STATIC_DRAW,STREAM_DRAW:q.STREAM_DRAW,DYNAMIC_DRAW:q.DYNAMIC_DRAW},ht=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:ct.STATIC_DRAW};ht.prototype.getArray=function(){return this.arr_},ht.prototype.getUsage=function(){return this.usage_};var pt=ht,ft=function(t){function e(e,r){t.call(this,e,r),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,r,i){var n,o,s=this.vertices.length,a=this.indices.length,u=s/4;for(n=e,o=r;n<o;n+=i)this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[n],this.vertices[s++]=t[n+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=u,this.indices[a++]=u+1,this.indices[a++]=u+2,this.indices[a++]=u+2,this.indices[a++]=u+3,this.indices[a++]=u,u+=4},e.prototype.drawCircle=function(t,e){var r=t.getRadius(),i=t.getStride();if(r){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=r;var n=t.getFlatCoordinates();n=Object(H.d)(n,0,2,i,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,i)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},e.prototype.finish=function(t){this.verticesBuffer=new pt(this.vertices),this.indicesBuffer=new pt(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,r=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(r)}},e.prototype.setUpProgram=function(t,e,r,i){var n,o=e.getProgram(tt,et);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,q.DEBUG?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,q.DEBUG?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,q.DEBUG?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,q.DEBUG?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,q.DEBUG?"u_size":"p"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,q.DEBUG?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,q.DEBUG?"a_radius":"g")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,16,0),t.enableVertexAttribArray(n.a_instruction),t.vertexAttribPointer(n.a_instruction,1,q.FLOAT,!1,16,8),t.enableVertexAttribArray(n.a_radius),t.vertexAttribPointer(n.a_radius,1,q.FLOAT,!1,16,12),t.uniform2fv(n.u_size,r),t.uniform1f(n.u_pixelRatio,i),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},e.prototype.drawReplay=function(t,e,r,i){var n,o,s,a;if(Object(M.isEmpty)(r))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,r)},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,n){var o,s,a,u,l,c,h;for(h=this.startIndices.length-2,a=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(u=this.styles_[o],this.setFillStyle_(t,u[0]),this.setStrokeStyle_(t,u[1],u[2]),l=this.styleIndices_[o];h>=0&&this.startIndices[h]>=l;){if(s=this.startIndices[h],c=this.startIndicesFeature[h],void 0===r[Object(k.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(D.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var p=i(c);if(p)return p}h--,a=s}},e.prototype.drawReplaySkipping_=function(t,e,r){var i,n,o,s,a,u,l,c;for(l=this.startIndices.length-2,o=n=this.startIndices[l+1],i=this.styleIndices_.length-1;i>=0;--i){for(s=this.styles_[i],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),a=this.styleIndices_[i];l>=0&&this.startIndices[l]>=a;)c=this.startIndices[l],u=this.startIndicesFeature[l],r[Object(k.getUid)(u)]&&(n!==o&&this.drawElements(t,e,n,o),o=c),l--,n=c;n!==o&&this.drawElements(t,e,n,o),n=o=a}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},e.prototype.setStrokeStyle_=function(t,e,r){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,r)},e.prototype.setFillStrokeStyle=function(t,e){var r,i;if(e){var n=e.getLineDash();this.state_.lineDash=n||st;var o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,r=(r=e.getColor())instanceof CanvasGradient||r instanceof CanvasPattern?at:Object(Z.asArray)(r).map(function(t,e){return 3!=e?t/255:t})||at,i=void 0!==(i=e.getWidth())?i:1}else r=[0,0,0,0],i=0;var s=t?t.getColor():[0,0,0,0];s=s instanceof CanvasGradient||s instanceof CanvasPattern?ot:Object(Z.asArray)(s).map(function(t,e){return 3!=e?t/255:t})||ot,this.state_.strokeColor&&Object(W.b)(this.state_.strokeColor,r)&&this.state_.fillColor&&Object(W.b)(this.state_.fillColor,s)&&this.state_.lineWidth===i||(this.state_.changed=!0,this.state_.fillColor=s,this.state_.strokeColor=r,this.state_.lineWidth=i,this.styles_.push([s,r,i]))},e}(nt),dt=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),gt=new $(q.DEBUG?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"),yt=r(3),vt={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};function mt(t,e,r){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,e),void 0!==r&&t.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,r),i}function _t(t,e,r,i,n){var o=mt(t,i,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function bt(t,e,r,i){var n=mt(t,r,i);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var St=function(t){function e(e,r){t.call(this),this.canvas_=e,this.gl_=r,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Object(W.f)(q.EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&r.getExtension("OES_element_index_uint"),Object(yt.listen)(this.canvas_,vt.LOST,this.handleWebGLContextLost,this),Object(yt.listen)(this.canvas_,vt.RESTORED,this.handleWebGLContextRestored,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindBuffer=function(t,e){var r=this.getGL(),i=e.getArray(),n=Object(k.getUid)(e);if(n in this.bufferCache_){var o=this.bufferCache_[n];r.bindBuffer(t,o.buffer)}else{var s,a=r.createBuffer();r.bindBuffer(t,a),t==q.ARRAY_BUFFER?s=new Float32Array(i):t==q.ELEMENT_ARRAY_BUFFER&&(s=this.hasOESElementIndexUint?new Uint32Array(i):new Uint16Array(i)),r.bufferData(t,s,e.getUsage()),this.bufferCache_[n]={buf:e,buffer:a}}},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Object(k.getUid)(t),i=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(i.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){Object(yt.unlistenAll)(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(var r in this.programCache_)t.deleteProgram(this.programCache_[r]);for(var i in this.shaderCache_)t.deleteShader(this.shaderCache_[i]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},e.prototype.getShader=function(t){var e=Object(k.getUid)(t);if(e in this.shaderCache_)return this.shaderCache_[e];var r=this.getGL(),i=r.createShader(t.getType());return r.shaderSource(i,t.getSource()),r.compileShader(i),this.shaderCache_[e]=i,i},e.prototype.getProgram=function(t,e){var r=Object(k.getUid)(t)+"/"+Object(k.getUid)(e);if(r in this.programCache_)return this.programCache_[r];var i=this.getGL(),n=i.createProgram();return i.attachShader(n,this.getShader(t)),i.attachShader(n,this.getShader(e)),i.linkProgram(n),this.programCache_[r]=n,n},e.prototype.handleWebGLContextLost=function(){Object(M.clear)(this.bufferCache_),Object(M.clear)(this.shaderCache_),Object(M.clear)(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=_t(t,1,1),i=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=r,this.hitDetectionRenderbuffer_=i},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},e}(o.a),xt=function(t){function e(e,r){t.call(this,e,r),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,r=this.indicesBuffer,i=this.getTextures(!0),n=t.getGL();return function(){var o,s;if(!n.isContextLost())for(o=0,s=i.length;o<s;++o)n.deleteTexture(i[o]);t.deleteBuffer(e),t.deleteBuffer(r)}},e.prototype.drawCoordinates=function(t,e,r,i){var n,o,s,a,u,l,c=this.anchorX,h=this.anchorY,p=this.height,f=this.imageHeight,d=this.imageWidth,g=this.opacity,y=this.originX,v=this.originY,m=this.rotateWithView?1:0,_=-this.rotation,b=this.scale,S=this.width,x=Math.cos(_),O=Math.sin(_),E=this.indices.length,C=this.vertices.length;for(n=e;n<r;n+=i)u=t[n]-this.origin[0],l=t[n+1]-this.origin[1],o=C/8,s=-b*c,a=-b*(p-h),this.vertices[C++]=u,this.vertices[C++]=l,this.vertices[C++]=s*x-a*O,this.vertices[C++]=s*O+a*x,this.vertices[C++]=y/d,this.vertices[C++]=(v+p)/f,this.vertices[C++]=g,this.vertices[C++]=m,s=b*(S-c),a=-b*(p-h),this.vertices[C++]=u,this.vertices[C++]=l,this.vertices[C++]=s*x-a*O,this.vertices[C++]=s*O+a*x,this.vertices[C++]=(y+S)/d,this.vertices[C++]=(v+p)/f,this.vertices[C++]=g,this.vertices[C++]=m,s=b*(S-c),a=b*h,this.vertices[C++]=u,this.vertices[C++]=l,this.vertices[C++]=s*x-a*O,this.vertices[C++]=s*O+a*x,this.vertices[C++]=(y+S)/d,this.vertices[C++]=v/f,this.vertices[C++]=g,this.vertices[C++]=m,s=-b*c,a=b*h,this.vertices[C++]=u,this.vertices[C++]=l,this.vertices[C++]=s*x-a*O,this.vertices[C++]=s*O+a*x,this.vertices[C++]=y/d,this.vertices[C++]=v/f,this.vertices[C++]=g,this.vertices[C++]=m,this.indices[E++]=o,this.indices[E++]=o+1,this.indices[E++]=o+2,this.indices[E++]=o,this.indices[E++]=o+2,this.indices[E++]=o+3;return C},e.prototype.createTextures=function(t,e,r,i){var n,o,s,a,u=e.length;for(a=0;a<u;++a)o=e[a],(s=Object(k.getUid)(o))in r?n=r[s]:(n=bt(i,o,q.CLAMP_TO_EDGE,q.CLAMP_TO_EDGE),r[s]=n),t[a]=n},e.prototype.setUpProgram=function(t,e,r,i){var n,o=e.getProgram(dt,gt);return this.defaultLocations?n=this.defaultLocations:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,q.DEBUG?"u_image":"l"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,q.DEBUG?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,q.DEBUG?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,q.DEBUG?"a_rotateWithView":"g")}(t,o),this.defaultLocations=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,32,0),t.enableVertexAttribArray(n.a_offsets),t.vertexAttribPointer(n.a_offsets,2,q.FLOAT,!1,32,8),t.enableVertexAttribArray(n.a_texCoord),t.vertexAttribPointer(n.a_texCoord,2,q.FLOAT,!1,32,16),t.enableVertexAttribArray(n.a_opacity),t.vertexAttribPointer(n.a_opacity,1,q.FLOAT,!1,32,24),t.enableVertexAttribArray(n.a_rotateWithView),t.vertexAttribPointer(n.a_rotateWithView,1,q.FLOAT,!1,32,28),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},e.prototype.drawReplay=function(t,e,r,i){var n,o,s,a=i?this.getHitDetectionTextures():this.getTextures(),u=i?this.hitDetectionGroupIndices:this.groupIndices;if(Object(M.isEmpty)(r))for(n=0,o=a.length,s=0;n<o;++n){t.bindTexture(q.TEXTURE_2D,a[n]);var l=u[n];this.drawElements(t,e,s,l),s=l}else this.drawReplaySkipping(t,e,r,a,u)},e.prototype.drawReplaySkipping=function(t,e,r,i,n){var o,s,a=0;for(o=0,s=i.length;o<s;++o){t.bindTexture(q.TEXTURE_2D,i[o]);for(var u=o>0?n[o-1]:0,l=n[o],c=u,h=u;a<this.startIndices.length&&this.startIndices[a]<=l;){var p=this.startIndicesFeature[a];void 0!==r[Object(k.getUid)(p)]?(c!==h&&this.drawElements(t,e,c,h),h=c=a===this.startIndices.length-1?l:this.startIndices[a+1]):h=a===this.startIndices.length-1?l:this.startIndices[a+1],a++}c!==h&&this.drawElements(t,e,c,h)}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,n){var o,s,a,u,l,c=this.startIndices.length-1,h=this.getHitDetectionTextures();for(o=h.length-1;o>=0;--o)for(t.bindTexture(q.TEXTURE_2D,h[o]),s=o>0?this.hitDetectionGroupIndices[o-1]:0,u=this.hitDetectionGroupIndices[o];c>=0&&this.startIndices[c]>=s;){if(a=this.startIndices[c],l=this.startIndicesFeature[c],void 0===r[Object(k.getUid)(l)]&&l.getGeometry()&&(void 0===n||Object(D.intersects)(n,l.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,u);var p=i(l);if(p)return p}u=a,c--}},e.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},e.prototype.getTextures=function(t){return Object(k.abstract)()},e.prototype.getHitDetectionTextures=function(){return Object(k.abstract)()},e}(nt),Ot=function(t){function e(e,r){t.call(this,e,r),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var r=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(r,0,r.length,i)},e.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var r=t.getFlatCoordinates(),i=t.getStride();this.drawCoordinates(r,0,r.length,i)},e.prototype.finish=function(e){var r=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new pt(this.vertices);var i=this.indices;this.indicesBuffer=new pt(i);var n={};this.createTextures(this.textures_,this.images_,n,r),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,r),this.images_=null,this.hitDetectionImages_=null,t.prototype.finish.call(this,e)},e.prototype.setImageStyle=function(t){var e,r=t.getAnchor(),i=t.getImage(1),n=t.getImageSize(),o=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),u=t.getRotateWithView(),l=t.getRotation(),c=t.getSize(),h=t.getScale();0===this.images_.length?this.images_.push(i):(e=this.images_[this.images_.length-1],Object(k.getUid)(e)!=Object(k.getUid)(i)&&(this.groupIndices.push(this.indices.length),this.images_.push(i))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],Object(k.getUid)(e)!=Object(k.getUid)(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o))),this.anchorX=r[0],this.anchorY=r[1],this.height=c[1],this.imageHeight=n[1],this.imageWidth=n[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=l,this.rotateWithView=u,this.scale=h,this.width=c[0]},e.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},e.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},e}(xt),Et=r(79),Ct=r(153);function Tt(t,e,r,i){var n=r-i;return t[e]===t[n]&&t[e+1]===t[n+1]&&(r-e)/i>3&&!!Object(Ct.a)(t,e,r,i)}var Pt=new Q(q.DEBUG?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),wt=new $(q.DEBUG?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"),It=function(t){function e(e,r){t.call(this,e,r),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,r,i){var n,o,s,a,u,l,c,h,p=this.vertices.length,f=this.indices.length,d="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,g="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,y=Tt(t,e,r,i),v=f,m=1;for(n=e,o=r;n<o;n+=i){if(u=p/7,l=c,c=h||[t[n],t[n+1]],n===e){if(h=[t[n+i],t[n+i+1]],r-e==2*i&&Object(W.b)(c,h))break;if(!y){g&&(p=this.addVertices_([0,0],c,h,7*m*g,p),p=this.addVertices_([0,0],c,h,7*-m*g,p),this.indices[f++]=u+2,this.indices[f++]=u,this.indices[f++]=u+1,this.indices[f++]=u+1,this.indices[f++]=u+3,this.indices[f++]=u+2),p=this.addVertices_([0,0],c,h,3*m*(g||1),p),v=(p=this.addVertices_([0,0],c,h,3*-m*(g||1),p))/7-1;continue}l=[t[r-2*i],t[r-2*i+1]],s=h}else{if(n===r-i){if(y){h=s;break}l=l||[0,0],p=this.addVertices_(l,c,[0,0],5*m*(g||1),p),p=this.addVertices_(l,c,[0,0],5*-m*(g||1),p),this.indices[f++]=u,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=v,this.indices[f++]=u+1,this.indices[f++]=u,g&&(p=this.addVertices_(l,c,[0,0],11*m*g,p),p=this.addVertices_(l,c,[0,0],11*-m*g,p),this.indices[f++]=u+2,this.indices[f++]=u,this.indices[f++]=u+1,this.indices[f++]=u+1,this.indices[f++]=u+3,this.indices[f++]=u+2);break}h=[t[n+i],t[n+i+1]]}a=lt(l[0],l[1],c[0],c[1],h[0],h[1])?-1:1,p=this.addVertices_(l,c,h,13*a*(d||1),p),p=this.addVertices_(l,c,h,17*a*(d||1),p),p=this.addVertices_(l,c,h,19*-a*(d||1),p),n>e&&(this.indices[f++]=u,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=u+2,this.indices[f++]=u,this.indices[f++]=m*a>0?v:v-1),this.indices[f++]=u,this.indices[f++]=u+2,this.indices[f++]=u+1,v=u+2,m=a,d&&(p=this.addVertices_(l,c,h,23*a*d,p),this.indices[f++]=u+1,this.indices[f++]=u+3,this.indices[f++]=u)}y&&(u=u||p/7,a=Object(Et.a)([l[0],l[1],c[0],c[1],h[0],h[1]],0,6,2)?1:-1,p=this.addVertices_(l,c,h,13*a*(d||1),p),p=this.addVertices_(l,c,h,19*-a*(d||1),p),this.indices[f++]=u,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=u+1,this.indices[f++]=u,this.indices[f++]=m*a>0?v:v-1)},e.prototype.addVertices_=function(t,e,r,i,n){return this.vertices[n++]=t[0],this.vertices[n++]=t[1],this.vertices[n++]=e[0],this.vertices[n++]=e[1],this.vertices[n++]=r[0],this.vertices[n++]=r[1],this.vertices[n++]=i,n},e.prototype.isValid_=function(t,e,r,i){var n=r-e;if(n<2*i)return!1;if(n===2*i){var o=[t[e],t[e+1]],s=[t[e+i],t[e+i+1]];return!Object(W.b)(o,s)}return!0},e.prototype.drawLineString=function(t,e){var r=t.getFlatCoordinates(),i=t.getStride();this.isValid_(r,0,r.length,i)&&(r=Object(H.d)(r,0,r.length,i,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(r,0,r.length,i))},e.prototype.drawMultiLineString=function(t,e){var r=this.indices.length,i=t.getEnds();i.unshift(0);var n,o,s=t.getFlatCoordinates(),a=t.getStride();if(i.length>1)for(n=1,o=i.length;n<o;++n)if(this.isValid_(s,i[n-1],i[n],a)){var u=Object(H.d)(s,i[n-1],i[n],a,-this.origin[0],-this.origin[1]);this.drawCoordinates_(u,0,u.length,a)}this.indices.length>r&&(this.startIndices.push(r),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(r),this.state_.changed=!1))},e.prototype.drawPolygonCoordinates=function(t,e,r){var i,n;if(Tt(t,0,t.length,r)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,r),e.length)for(i=0,n=e.length;i<n;++i)Tt(e[i],0,e[i].length,r)||(e[i].push(e[i][0]),e[i].push(e[i][1])),this.drawCoordinates_(e[i],0,e[i].length,r)},e.prototype.setPolygonStyle=function(t,e){var r=void 0===e?this.indices.length:e;this.startIndices.push(r),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(r),this.state_.changed=!1)},e.prototype.getCurrentIndex=function(){return this.indices.length},e.prototype.finish=function(t){this.verticesBuffer=new pt(this.vertices),this.indicesBuffer=new pt(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,r=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(r)}},e.prototype.setUpProgram=function(t,e,r,i){var n,o=e.getProgram(Pt,wt);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,q.DEBUG?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,q.DEBUG?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,q.DEBUG?"u_color":"n"),this.u_size=t.getUniformLocation(e,q.DEBUG?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,q.DEBUG?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,q.DEBUG?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,q.DEBUG?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,q.DEBUG?"a_direction":"g")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_lastPos),t.vertexAttribPointer(n.a_lastPos,2,q.FLOAT,!1,28,0),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,28,8),t.enableVertexAttribArray(n.a_nextPos),t.vertexAttribPointer(n.a_nextPos,2,q.FLOAT,!1,28,16),t.enableVertexAttribArray(n.a_direction),t.vertexAttribPointer(n.a_direction,1,q.FLOAT,!1,28,24),t.uniform2fv(n.u_size,r),t.uniform1f(n.u_pixelRatio,i),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},e.prototype.drawReplay=function(t,e,r,i){var n,o,s,a,u=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(M.isEmpty)(r))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setStrokeStyle_(t,a[0],a[1],a[2]),this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT),s=o;else this.drawReplaySkipping_(t,e,r);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(u))},e.prototype.drawReplaySkipping_=function(t,e,r){var i,n,o,s,a,u,l,c;for(l=this.startIndices.length-2,o=n=this.startIndices[l+1],i=this.styleIndices_.length-1;i>=0;--i){for(s=this.styles_[i],this.setStrokeStyle_(t,s[0],s[1],s[2]),a=this.styleIndices_[i];l>=0&&this.startIndices[l]>=a;)c=this.startIndices[l],u=this.startIndicesFeature[l],r[Object(k.getUid)(u)]&&(n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),o=c),l--,n=c;n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),n=o=a}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,n){var o,s,a,u,l,c,h;for(h=this.startIndices.length-2,a=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(u=this.styles_[o],this.setStrokeStyle_(t,u[0],u[1],u[2]),l=this.styleIndices_[o];h>=0&&this.startIndices[h]>=l;){if(s=this.startIndices[h],c=this.startIndicesFeature[h],void 0===r[Object(k.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(D.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var p=i(c);if(p)return p}h--,a=s}},e.prototype.setStrokeStyle_=function(t,e,r,i){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,r),t.uniform1f(this.defaultLocations_.u_miterLimit,i)},e.prototype.setFillStrokeStyle=function(t,e){var r=e.getLineCap();this.state_.lineCap=void 0!==r?r:"round";var i=e.getLineDash();this.state_.lineDash=i||st;var n=e.getLineDashOffset();this.state_.lineDashOffset=n||0;var o=e.getLineJoin();this.state_.lineJoin=void 0!==o?o:"round";var s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?at:Object(Z.asArray)(s).map(function(t,e){return 3!=e?t/255:t})||at;var a=e.getWidth();a=void 0!==a?a:1;var u=e.getMiterLimit();u=void 0!==u?u:10,this.state_.strokeColor&&Object(W.b)(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===u||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=u,this.styles_.push([s,a,u]))},e}(nt),Lt=r(103),Rt=new Q(q.DEBUG?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Mt=new $(q.DEBUG?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"),At=r(94),jt=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};jt.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},r=this.head_;if(r){var i=r.next;e.prev=r,e.next=i,r.next=e,i&&(i.prev=e),r===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},jt.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),this.head_=e||r,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=r?this.head_.prev:this.head_),this.length_--}},jt.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},jt.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},jt.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},jt.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},jt.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},jt.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},jt.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},jt.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},jt.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},jt.prototype.getLength=function(){return this.length_};var Nt=jt,Ft=r(120),Dt=function(t){function e(e,r){t.call(this,e,r),this.lineStringReplay=new It(e,r),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,r){var i=new Nt,n=new Ft.default;this.processFlatCoordinates_(t,r,i,n,!0);var o=this.getMaxCoords_(i);if(e.length){var s,a,u=[];for(s=0,a=e.length;s<a;++s){var l={list:new Nt,maxCoords:void 0,rtree:new Ft.default};u.push(l),this.processFlatCoordinates_(e[s],r,l.list,l.rtree,!1),this.classifyPoints_(l.list,l.rtree,!0),l.maxCoords=this.getMaxCoords_(l.list)}for(u.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),s=0;s<u.length;++s){var c=u[s].list,h=c.firstItem(),p=h,f=void 0;do{if(this.getIntersections_(p,n).length){f=!0;break}p=c.nextItem()}while(h!==p);f||this.bridgeHole_(c,u[s].maxCoords[0],i,o[0],n)&&(n.concat(u[s].rtree),this.classifyPoints_(i,n,!1))}}else this.classifyPoints_(i,n,!1);this.triangulate_(i,n)},e.prototype.processFlatCoordinates_=function(t,e,r,i,n){var o,s,a,u,l,c=Object(Et.a)(t,0,t.length,e),h=this.vertices.length/2,p=[],f=[];if(n===c){for(u=a=this.createPoint_(t[0],t[1],h++),o=e,s=t.length;o<s;o+=e)l=this.createPoint_(t[o],t[o+1],h++),f.push(this.insertItem_(u,l,r)),p.push([Math.min(u.x,l.x),Math.min(u.y,l.y),Math.max(u.x,l.x),Math.max(u.y,l.y)]),u=l;f.push(this.insertItem_(l,a,r)),p.push([Math.min(u.x,l.x),Math.min(u.y,l.y),Math.max(u.x,l.x),Math.max(u.y,l.y)])}else{var d=t.length-e;for(u=a=this.createPoint_(t[d],t[d+1],h++),o=d-e,s=0;o>=s;o-=e)l=this.createPoint_(t[o],t[o+1],h++),f.push(this.insertItem_(u,l,r)),p.push([Math.min(u.x,l.x),Math.min(u.y,l.y),Math.max(u.x,l.x),Math.max(u.y,l.y)]),u=l;f.push(this.insertItem_(l,a,r)),p.push([Math.min(u.x,l.x),Math.min(u.y,l.y),Math.max(u.x,l.x),Math.max(u.y,l.y)])}i.load(p,f)},e.prototype.getMaxCoords_=function(t){var e=t.firstItem(),r=e,i=[r.p0.x,r.p0.y];do{(r=t.nextItem()).p0.x>i[0]&&(i=[r.p0.x,r.p0.y])}while(r!==e);return i},e.prototype.classifyPoints_=function(t,e,r){var i=t.firstItem(),n=i,o=t.nextItem(),s=!1;do{var a=r?lt(o.p1.x,o.p1.y,n.p1.x,n.p1.y,n.p0.x,n.p0.y):lt(n.p0.x,n.p0.y,n.p1.x,n.p1.y,o.p1.x,o.p1.y);void 0===a?(this.removeItem_(n,o,t,e),s=!0,o===i&&(i=t.getNextItem()),o=n,t.prevItem()):n.p1.reflex!==a&&(n.p1.reflex=a,s=!0),n=o,o=t.nextItem()}while(n!==i);return s},e.prototype.bridgeHole_=function(t,e,r,i,n){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var s,a,u,l,c=o.p1,h={x:i,y:c.y,i:-1},p=1/0,f=this.getIntersections_({p0:c,p1:h},n,!0);for(s=0,a=f.length;s<a;++s){var d=f[s],g=this.calculateIntersection_(c,h,d.p0,d.p1,!0),y=Math.abs(c.x-g[0]);y<p&&void 0!==lt(c.x,c.y,d.p0.x,d.p0.y,d.p1.x,d.p1.y)&&(p=y,l={x:g[0],y:g[1],i:-1},o=d)}if(p===1/0)return!1;if(u=o.p1,p>0){var v=this.getPointsInTriangle_(c,l,o.p1,n);if(v.length){var m=1/0;for(s=0,a=v.length;s<a;++s){var _=v[s],b=Math.atan2(c.y-_.y,h.x-_.x);(b<m||b===m&&_.x<u.x)&&(m=b,u=_)}}}for(o=r.firstItem();o.p1.x!==u.x||o.p1.y!==u.y;)o=r.nextItem();var S={x:c.x,y:c.y,i:c.i,reflex:void 0},x={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=S,this.insertItem_(c,o.p1,t,n),this.insertItem_(x,S,t,n),o.p1=x,t.setFirstItem(),r.concat(t),!0},e.prototype.triangulate_=function(t,e){for(var r=!1,i=this.isSimple_(t,e);t.getLength()>3;)if(i){if(!this.clipEars_(t,e,i,r)&&!this.classifyPoints_(t,e,r)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,i,r)&&!this.classifyPoints_(t,e,r)&&!this.resolveSelfIntersections_(t,e)){if(!(i=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}r=!this.isClockwise_(t),this.classifyPoints_(t,e,r)}if(3===t.getLength()){var n=this.indices.length;this.indices[n++]=t.getPrevItem().p0.i,this.indices[n++]=t.getCurrItem().p0.i,this.indices[n++]=t.getNextItem().p0.i}},e.prototype.clipEars_=function(t,e,r,i){var n,o,s,a=this.indices.length,u=t.firstItem(),l=t.getPrevItem(),c=u,h=t.nextItem(),p=t.getNextItem(),f=!1;do{if(n=c.p0,o=c.p1,s=h.p1,!1===o.reflex){var d;d=r?0===this.getPointsInTriangle_(n,o,s,e,!0).length:i?this.diagonalIsInside_(p.p1,s,o,n,l.p0):this.diagonalIsInside_(l.p0,n,o,s,p.p1),(r||0===this.getIntersections_({p0:n,p1:s},e).length)&&d&&(r||!1===n.reflex||!1===s.reflex||Object(Et.a)([l.p0.x,l.p0.y,n.x,n.y,o.x,o.y,s.x,s.y,p.p1.x,p.p1.y],0,10,2)===!i)&&(this.indices[a++]=n.i,this.indices[a++]=o.i,this.indices[a++]=s.i,this.removeItem_(c,h,t,e),h===u&&(u=p),f=!0)}l=t.getPrevItem(),c=t.getCurrItem(),h=t.nextItem(),p=t.getNextItem()}while(c!==u&&t.getLength()>3);return f},e.prototype.resolveSelfIntersections_=function(t,e,r){var i=t.firstItem();t.nextItem();var n=i,o=t.nextItem(),s=!1;do{var a=this.calculateIntersection_(n.p0,n.p1,o.p0,o.p1,r);if(a){var u=!1,l=this.vertices.length,c=this.indices.length,h=l/2,p=t.prevItem();t.removeItem(),e.remove(p),u=p===i;var f=void 0;if(r?(a[0]===n.p0.x&&a[1]===n.p0.y?(t.prevItem(),f=n.p0,o.p0=f,e.remove(n),u=u||n===i):(f=o.p1,n.p1=f,e.remove(o),u=u||o===i),t.removeItem()):(f=this.createPoint_(a[0],a[1],h),n.p1=f,o.p0=f,e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[c++]=p.p0.i,this.indices[c++]=p.p1.i,this.indices[c++]=f.i,s=!0,u)break}n=t.getPrevItem(),o=t.nextItem()}while(n!==i);return s},e.prototype.isSimple_=function(t,e){var r=t.firstItem(),i=r;do{if(this.getIntersections_(i,e).length)return!1;i=t.nextItem()}while(i!==r);return!0},e.prototype.isClockwise_=function(t){var e=2*t.getLength(),r=new Array(e),i=t.firstItem(),n=i,o=0;do{r[o++]=n.p0.x,r[o++]=n.p0.y,n=t.nextItem()}while(n!==i);return Object(Et.a)(r,0,e,2)},e.prototype.splitPolygon_=function(t,e){var r=t.firstItem(),i=r;do{var n=this.getIntersections_(i,e);if(n.length){var o=n[0],s=this.vertices.length/2,a=this.calculateIntersection_(i.p0,i.p1,o.p0,o.p1),u=this.createPoint_(a[0],a[1],s),l=new Nt,c=new Ft.default;this.insertItem_(u,i.p1,l,c),i.p1=u,e.update([Math.min(i.p0.x,u.x),Math.min(i.p0.y,u.y),Math.max(i.p0.x,u.x),Math.max(i.p0.y,u.y)],i);for(var h=t.nextItem();h!==o;)this.insertItem_(h.p0,h.p1,l,c),e.remove(h),t.removeItem(),h=t.getCurrItem();this.insertItem_(o.p0,u,l,c),o.p0=u,e.update([Math.min(o.p1.x,u.x),Math.min(o.p1.y,u.y),Math.max(o.p1.x,u.x),Math.max(o.p1.y,u.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,c,!1),this.triangulate_(l,c);break}i=t.nextItem()}while(i!==r)},e.prototype.createPoint_=function(t,e,r){var i=this.vertices.length;return this.vertices[i++]=t,this.vertices[i++]=e,{x:t,y:e,i:r,reflex:void 0}},e.prototype.insertItem_=function(t,e,r,i){var n={p0:t,p1:e};return r.insertItem(n),i&&i.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n},e.prototype.removeItem_=function(t,e,r,i){r.getCurrItem()===e&&(r.removeItem(),t.p1=e.p1,i.remove(e),i.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},e.prototype.getPointsInTriangle_=function(t,e,r,i,n){for(var o=[],s=i.getInExtent([Math.min(t.x,e.x,r.x),Math.min(t.y,e.y,r.y),Math.max(t.x,e.x,r.x),Math.max(t.y,e.y,r.y)]),a=0,u=s.length;a<u;++a)for(var l in s[a]){var c=s[a][l];"object"!=typeof c||n&&!c.reflex||c.x===t.x&&c.y===t.y||c.x===e.x&&c.y===e.y||c.x===r.x&&c.y===r.y||-1!==o.indexOf(c)||!Object(Lt.b)([t.x,t.y,e.x,e.y,r.x,r.y],0,6,2,c.x,c.y)||o.push(c)}return o},e.prototype.getIntersections_=function(t,e,r){for(var i=t.p0,n=t.p1,o=e.getInExtent([Math.min(i.x,n.x),Math.min(i.y,n.y),Math.max(i.x,n.x),Math.max(i.y,n.y)]),s=[],a=0,u=o.length;a<u;++a){var l=o[a];t!==l&&(r||l.p0!==n||l.p1!==i)&&this.calculateIntersection_(i,n,l.p0,l.p1,r)&&s.push(l)}return s},e.prototype.calculateIntersection_=function(t,e,r,i,n){var o=(i.y-r.y)*(e.x-t.x)-(i.x-r.x)*(e.y-t.y);if(0!==o){var s=((i.x-r.x)*(t.y-r.y)-(i.y-r.y)*(t.x-r.x))/o,a=((e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x))/o;if(!n&&s>ut&&s<1-ut&&a>ut&&a<1-ut||n&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},e.prototype.diagonalIsInside_=function(t,e,r,i,n){if(void 0===e.reflex||void 0===i.reflex)return!1;var o=(r.x-i.x)*(e.y-i.y)>(r.y-i.y)*(e.x-i.x),s=(n.x-i.x)*(e.y-i.y)<(n.y-i.y)*(e.x-i.x),a=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),u=(r.x-e.x)*(i.y-e.y)<(r.y-e.y)*(i.x-e.x),l=i.reflex?s||o:s&&o,c=e.reflex?u||a:u&&a;return l&&c},e.prototype.drawMultiPolygon=function(t,e){var r,i,n,o,s=t.getEndss(),a=t.getStride(),u=this.indices.length,l=this.lineStringReplay.getCurrentIndex(),c=t.getFlatCoordinates(),h=0;for(r=0,i=s.length;r<i;++r){var p=s[r];if(p.length>0){var f=Object(H.d)(c,h,p[0],a,-this.origin[0],-this.origin[1]);if(f.length){var d=[],g=void 0;for(n=1,o=p.length;n<o;++n)p[n]!==p[n-1]&&(g=Object(H.d)(c,p[n-1],p[n],a,-this.origin[0],-this.origin[1]),d.push(g));this.lineStringReplay.drawPolygonCoordinates(f,d,a),this.drawCoordinates_(f,d,a)}}h=p[p.length-1]}this.indices.length>u&&(this.startIndices.push(u),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(u),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>l&&this.lineStringReplay.setPolygonStyle(e,l)},e.prototype.drawPolygon=function(t,e){var r=t.getEnds(),i=t.getStride();if(r.length>0){var n=t.getFlatCoordinates().map(Number),o=Object(H.d)(n,0,r[0],i,-this.origin[0],-this.origin[1]);if(o.length){var s,a,u,l=[];for(s=1,a=r.length;s<a;++s)r[s]!==r[s-1]&&(u=Object(H.d)(n,r[s-1],r[s],i,-this.origin[0],-this.origin[1]),l.push(u));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,l,i),this.drawCoordinates_(o,l,i)}}},e.prototype.finish=function(t){this.verticesBuffer=new pt(this.vertices),this.indicesBuffer=new pt(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,r=this.indicesBuffer,i=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(r),i()}},e.prototype.setUpProgram=function(t,e,r,i){var n,o=e.getProgram(Rt,Mt);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,q.DEBUG?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"a")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,8,0),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},e.prototype.drawReplay=function(t,e,r,i){var n,o,s,a,u=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(M.isEmpty)(r))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,r);i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(u))},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,r,i,n){var o,s,a,u,l,c,h;for(h=this.startIndices.length-2,a=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(u=this.styles_[o],this.setFillStyle_(t,u),l=this.styleIndices_[o];h>=0&&this.startIndices[h]>=l;){if(s=this.startIndices[h],c=this.startIndicesFeature[h],void 0===r[Object(k.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(D.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var p=i(c);if(p)return p}h--,a=s}},e.prototype.drawReplaySkipping_=function(t,e,r){var i,n,o,s,a,u,l,c;for(l=this.startIndices.length-2,o=n=this.startIndices[l+1],i=this.styleIndices_.length-1;i>=0;--i){for(s=this.styles_[i],this.setFillStyle_(t,s),a=this.styleIndices_[i];l>=0&&this.startIndices[l]>=a;)c=this.startIndices[l],u=this.startIndicesFeature[l],r[Object(k.getUid)(u)]&&(n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),o=c),l--,n=c;n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),n=o=a}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},e.prototype.setFillStrokeStyle=function(t,e){var r=t?t.getColor():[0,0,0,0];if(r=r instanceof CanvasGradient||r instanceof CanvasPattern?ot:Object(Z.asArray)(r).map(function(t,e){return 3!=e?t/255:t})||ot,this.state_.fillColor&&Object(W.b)(r,this.state_.fillColor)||(this.state_.fillColor=r,this.state_.changed=!0,this.styles_.push(r)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var i=new At.default({color:[0,0,0,0],width:0});this.lineStringReplay.setFillStrokeStyle(null,i)}},e}(nt),kt=r(78),Gt=r(42),Bt=r(29),Ut=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Object(F.createCanvasContext2D)(t,t),this.canvas_=this.context_.canvas};Ut.prototype.get=function(t){return this.entries_[t]||null},Ut.prototype.add=function(t,e,r,i,n){for(var o=0,s=this.emptyBlocks_.length;o<s;++o){var a=this.emptyBlocks_[o];if(a.width>=e+this.space_&&a.height>=r+this.space_){var u={offsetX:a.x+this.space_,offsetY:a.y+this.space_,image:this.canvas_};return this.entries_[t]=u,i.call(n,this.context_,a.x+this.space_,a.y+this.space_),this.split_(o,a,e+this.space_,r+this.space_),u}}return null},Ut.prototype.split_=function(t,e,r,i){var n,o;e.width-r>e.height-i?(n={x:e.x+r,y:e.y,width:e.width-r,height:e.height},o={x:e.x,y:e.y+i,width:r,height:e.height-i},this.updateBlocks_(t,n,o)):(n={x:e.x+r,y:e.y,width:e.width-r,height:i},o={x:e.x,y:e.y+i,width:e.width,height:e.height-i},this.updateBlocks_(t,n,o))},Ut.prototype.updateBlocks_=function(t,e,r){var i=[t,1];e.width>0&&e.height>0&&i.push(e),r.width>0&&r.height>0&&i.push(r),this.emptyBlocks_.splice.apply(this.emptyBlocks_,i)};var Vt=Ut,zt=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==q.MAX_TEXTURE_SIZE?q.MAX_TEXTURE_SIZE:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new Vt(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new Vt(this.currentHitSize_,this.space_)]};zt.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var r=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,r)},zt.prototype.getInfo_=function(t,e){for(var r=0,i=t.length;r<i;++r){var n=t[r].get(e);if(n)return n}return null},zt.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},zt.prototype.add=function(t,e,r,i,n,o){if(e+this.space_>this.maxSize_||r+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,r,i,o);if(!s)return null;var a=void 0!==n?n:Bt.c,u=this.add_(!0,t,e,r,a,o);return this.mergeInfos_(s,u)},zt.prototype.add_=function(t,e,r,i,n,o){var s,a,u,l,c=t?this.hitAtlases_:this.atlases_;for(u=0,l=c.length;u<l;++u){if(a=(s=c[u]).add(e,r,i,n,o))return a;if(!a&&u===l-1){var h=void 0;t?(h=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=h):(h=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=h),s=new Vt(h,this.space_),c.push(s),++l}}return null};var Wt=zt,Yt=[1,1],Xt={Circle:ft,Image:Ot,LineString:It,Polygon:Dt,Text:function(t){function e(e,r){t.call(this,e,r),this.images_=[],this.textures_=[],this.measureCanvas_=Object(F.createCanvasContext2D)(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){if(this.text_){var r=null,i=2,n=2;switch(t.getType()){case U.default.POINT:case U.default.MULTI_POINT:i=(r=t.getFlatCoordinates()).length,n=t.getStride();break;case U.default.CIRCLE:r=t.getCenter();break;case U.default.LINE_STRING:r=t.getFlatMidpoint();break;case U.default.MULTI_LINE_STRING:i=(r=t.getFlatMidpoints()).length;break;case U.default.POLYGON:r=t.getFlatInteriorPoint();break;case U.default.MULTI_POLYGON:i=(r=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var o,s,a,u,l,c,h,p,f=this.currAtlas_,d=this.text_.split("\n"),g=this.getTextSize_(d),y=Math.round(g[0]*this.textAlign_-this.offsetX_),v=Math.round(g[1]*this.textBaseline_-this.offsetY_),m=this.state_.lineWidth/2*this.state_.scale;for(o=0,s=d.length;o<s;++o)for(l=0,c=f.height*o,a=0,u=(h=d[o].split("")).length;a<u;++a){if(p=f.atlas.getInfo(h[a])){var _=p.image;if(this.anchorX=y-l,this.anchorY=v-c,this.originX=0===a?p.offsetX-m:p.offsetX,this.originY=p.offsetY,this.height=f.height,this.width=0===a||a===h.length-1?f.width[h[a]]+m:f.width[h[a]],this.imageHeight=_.height,this.imageWidth=_.width,0===this.images_.length)this.images_.push(_);else{var b=this.images_[this.images_.length-1];Object(k.getUid)(b)!=Object(k.getUid)(_)&&(this.groupIndices.push(this.indices.length),this.images_.push(_))}this.drawText_(r,0,i,n)}l+=this.width}}},e.prototype.getTextSize_=function(t){var e=this,r=this.currAtlas_,i=t.length*r.height;return[t.map(function(t){for(var i=0,n=0,o=t.length;n<o;++n){var s=t[n];r.width[s]||e.addCharToAtlas_(s),i+=r.width[s]?r.width[s]:0}return i}).reduce(function(t,e){return Math.max(t,e)}),i]},e.prototype.drawText_=function(t,e,r,i){for(var n=e,o=r;n<o;n+=i)this.drawCoordinates(t,e,r,i)},e.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,r=this.state_,i=this.measureCanvas_.getContext("2d");i.font=r.font;var n=Math.ceil(i.measureText(t).width*r.scale);e.atlas.add(t,n,e.height,function(e,i,n){e.font=r.font,e.fillStyle=r.fillColor,e.strokeStyle=r.strokeColor,e.lineWidth=r.lineWidth,e.lineCap=r.lineCap,e.lineJoin=r.lineJoin,e.miterLimit=r.miterLimit,e.textAlign="left",e.textBaseline="top",Gt.CANVAS_LINE_DASH&&r.lineDash&&(e.setLineDash(r.lineDash),e.lineDashOffset=r.lineDashOffset),1!==r.scale&&e.setTransform(r.scale,0,0,r.scale,0,0),r.strokeColor&&e.strokeText(t,i,n),r.fillColor&&e.fillText(t,i,n)})&&(e.width[t]=n)}},e.prototype.finish=function(e){var r=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new pt(this.vertices),this.indicesBuffer=new pt(this.indices),this.createTextures(this.textures_,this.images_,{},r),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,t.prototype.finish.call(this,e)},e.prototype.setTextStyle=function(t){var e=this.state_,r=t.getFill(),i=t.getStroke();if(t&&t.getText()&&(r||i)){if(r){var n=r.getColor();e.fillColor=Object(kt.asColorLike)(n||ot)}else e.fillColor=null;if(i){var o=i.getColor();e.strokeColor=Object(kt.asColorLike)(o||at),e.lineWidth=i.getWidth()||1,e.lineCap=i.getLineCap()||"round",e.lineDashOffset=i.getLineDashOffset()||0,e.lineJoin=i.getLineJoin()||"round",e.miterLimit=i.getMiterLimit()||10;var s=i.getLineDash();e.lineDash=s?s.slice():st}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();var a=Y.b[t.getTextAlign()],u=Y.b[t.getTextBaseline()];this.textAlign_=void 0===a?.5:a,this.textBaseline_=void 0===u?.5:u,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},e.prototype.getAtlas_=function(t){var e=[];for(var r in t)(t[r]||0===t[r])&&(Array.isArray(t[r])?e=e.concat(t[r]):e.push(t[r]));var i=this.calculateHash_(e);if(!this.atlases_[i]){var n=this.measureCanvas_.getContext("2d");n.font=t.font;var o=Math.ceil((1.5*n.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[i]={atlas:new Wt({space:t.lineWidth+1}),width:{},height:o}}return this.atlases_[i]},e.prototype.calculateHash_=function(t){for(var e="",r=0,i=t.length;r<i;++r)e+=t[r];return e},e.prototype.getTextures=function(t){return this.textures_},e.prototype.getHitDetectionTextures=function(){return this.textures_},e}(xt)},Zt=function(t){function e(e,r,i){t.call(this),this.maxExtent_=r,this.tolerance_=e,this.renderBuffer_=i,this.replaysByZIndex_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){return[]},e.prototype.getDeleteResourcesFunction=function(t){var e,r=[];for(e in this.replaysByZIndex_){var i=this.replaysByZIndex_[e];for(var n in i)r.push(i[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=arguments,i=r.length,n=0;n<i;n++)t=r[n].apply(this,e);return t}},e.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var r=this.replaysByZIndex_[e];for(var i in r)r[i].finish(t)}},e.prototype.getReplay=function(t,e){var r=void 0!==t?t.toString():"0",i=this.replaysByZIndex_[r];void 0===i&&(i={},this.replaysByZIndex_[r]=i);var n=i[e];return void 0===n&&(n=new(0,Xt[e])(this.tolerance_,this.maxExtent_),i[e]=n),n},e.prototype.isEmpty=function(){return Object(M.isEmpty)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,r,i,n,o,s,a){var u,l,c,h,p,f,d=Object.keys(this.replaysByZIndex_).map(Number);for(d.sort(W.i),u=0,l=d.length;u<l;++u)for(p=this.replaysByZIndex_[d[u].toString()],c=0,h=Y.a.length;c<h;++c)void 0!==(f=p[Y.a[c]])&&f.replay(t,e,r,i,n,o,s,a,void 0,!1)},e.prototype.replayHitDetection_=function(t,e,r,i,n,o,s,a,u,l,c){var h,p,f,d,g,y,v=Object.keys(this.replaysByZIndex_).map(Number);for(v.sort(function(t,e){return e-t}),h=0,p=v.length;h<p;++h)for(d=this.replaysByZIndex_[v[h].toString()],f=Y.a.length-1;f>=0;--f)if(void 0!==(g=d[Y.a[f]])&&(y=g.replay(t,e,r,i,n,o,s,a,u,l,c)))return y},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,n,o,s,a,u,l){var c,h=e.getGL();return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(c=Object(D.buffer)(Object(D.createOrUpdateFromCoordinate)(t),i*this.renderBuffer_)),this.replayHitDetection_(e,t,i,n,Yt,s,a,u,function(t){var e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),e[3]>0){var r=l(t);if(r)return r}},!0,c)},e.prototype.hasFeatureAtCoordinate=function(t,e,r,i,n,o,s,a,u){var l=e.getGL();return l.bindFramebuffer(l.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,i,n,Yt,s,a,u,function(t){var e=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,e),e[3]>0},!1)},e}(X.a),Ht=function(t){function e(e,r,i,n,o,s,a){t.call(this),this.context_=e,this.center_=r,this.extent_=s,this.pixelRatio_=a,this.size_=o,this.rotation_=n,this.resolution_=i,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText_=function(t,e){var r=this.context_,i=t.getReplay(0,V.a.TEXT);i.setTextStyle(this.textStyle_),i.drawText(e,null),i.finish(r),i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),i.getDeleteResourcesFunction(r)()},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case U.default.POINT:this.drawPoint(t,null);break;case U.default.LINE_STRING:this.drawLineString(t,null);break;case U.default.POLYGON:this.drawPolygon(t,null);break;case U.default.MULTI_POINT:this.drawMultiPoint(t,null);break;case U.default.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case U.default.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case U.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case U.default.CIRCLE:this.drawCircle(t,null)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&Object(D.intersects)(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t,e){var r,i,n=t.getGeometriesArray();for(r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])},e.prototype.drawPoint=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawPoint(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawMultiPoint=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawMultiPoint(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawLineString=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawLineString(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawMultiLineString=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawMultiLineString(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawPolygon=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawPolygon(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawMultiPolygon=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawMultiPolygon(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.drawCircle=function(t,e){var r=this.context_,i=new Zt(1,this.extent_),n=i.getReplay(0,V.a.CIRCLE);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawCircle(t,e),n.finish(r),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(r)(),this.textStyle_&&this.drawText_(i,t)},e.prototype.setImageStyle=function(t){this.imageStyle_=t},e.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},e.prototype.setTextStyle=function(t){this.textStyle_=t},e}(z.default),qt=r(270),Kt=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),Jt=new $(q.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"),Qt=function(t){function e(e,r){t.call(this,r),this.mapRenderer=e,this.arrayBuffer_=new pt([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=Object(rt.c)(),this.projectionMatrix=Object(rt.c)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindFramebuffer=function(t,e){var r=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var i=function(t,e,r){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(r))}.bind(null,r,this.framebuffer,this.texture);t.postRenderFunctions.push(i);var n=_t(r,e,e),o=r.createFramebuffer();r.bindFramebuffer(q.FRAMEBUFFER,o),r.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,n,0),this.texture=n,this.framebuffer=o,this.framebufferDimension=e}else r.bindFramebuffer(q.FRAMEBUFFER,this.framebuffer)},e.prototype.composeFrame=function(t,e,r){this.dispatchComposeEvent_(B.a.PRECOMPOSE,r,t),r.bindBuffer(q.ARRAY_BUFFER,this.arrayBuffer_);var i,n=r.getGL(),o=r.getProgram(Kt,Jt);this.defaultLocations_?i=this.defaultLocations_:(i=new function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,q.DEBUG?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,q.DEBUG?"u_texture":"g"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"c")}(n,o),this.defaultLocations_=i),r.useProgram(o)&&(n.enableVertexAttribArray(i.a_position),n.vertexAttribPointer(i.a_position,2,q.FLOAT,!1,16,0),n.enableVertexAttribArray(i.a_texCoord),n.vertexAttribPointer(i.a_texCoord,2,q.FLOAT,!1,16,8),n.uniform1i(i.u_texture,0)),n.uniformMatrix4fv(i.u_texCoordMatrix,!1,it(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(i.u_projectionMatrix,!1,it(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(i.u_opacity,e.opacity),n.bindTexture(q.TEXTURE_2D,this.getTexture()),n.drawArrays(q.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(B.a.POSTCOMPOSE,r,t)},e.prototype.dispatchComposeEvent_=function(t,e,r){var i=this.getLayer();if(i.hasListener(t)){var n=r.viewState,o=n.resolution,s=r.pixelRatio,a=r.extent,u=n.center,l=n.rotation,c=r.size,h=new Ht(e,u,o,l,c,a,s),p=new G.a(t,h,r,null,e);i.dispatchEvent(p)}},e.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},e.prototype.getTexture=function(){return this.texture},e.prototype.getProjectionMatrix=function(){return this.projectionMatrix},e.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},e.prototype.prepareFrame=function(t,e,r){return Object(k.abstract)()},e.prototype.forEachLayerAtPixel=function(t,e,r,i){return Object(k.abstract)()},e}(qt.a),$t=function(t){function e(e,r){t.call(this,e,r),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTexture_=function(t){var e=t.getImage();return bt(this.mapRenderer.getGL(),e,q.CLAMP_TO_EDGE,q.CLAMP_TO_EDGE)},e.prototype.prepareFrame=function(t,e,r){var i=this.mapRenderer.getGL(),n=t.pixelRatio,o=t.viewState,s=o.center,a=o.resolution,u=o.rotation,l=this.image_,c=this.texture,h=this.getLayer().getSource(),p=t.viewHints,f=t.extent;if(void 0!==e.extent&&(f=Object(D.getIntersection)(f,e.extent)),!p[N.default.ANIMATING]&&!p[N.default.INTERACTING]&&!Object(D.isEmpty)(f)){var d=o.projection;if(!A.a){var g=h.getProjection();g&&(d=g)}var y=h.getImage(f,a,n,d);if(y&&this.loadImage(y)&&(l=y,c=this.createTexture_(y),this.texture)){var v=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,i,this.texture);t.postRenderFunctions.push(v)}}if(l){var m=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(m.width,m.height,n,s,a,u,l.getExtent()),this.hitTransformationMatrix_=null;var _=this.texCoordMatrix;Object(rt.f)(_),Object(rt.h)(_,1,-1),Object(rt.j)(_,0,-1),this.image_=l,this.texture=c}return!!l},e.prototype.updateProjectionMatrix_=function(t,e,r,i,n,o,s){var a=t*n,u=e*n,l=this.projectionMatrix;Object(rt.f)(l),Object(rt.h)(l,2*r/a,2*r/u),Object(rt.g)(l,-o),Object(rt.j)(l,s[0]-i[0],s[1]-i[1]),Object(rt.h)(l,(s[2]-s[0])/2,(s[3]-s[1])/2),Object(rt.j)(l,1,1)},e.prototype.forEachLayerAtPixel=function(t,e,r,i){if(this.image_&&this.image_.getImage()){var n=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,n));var o=Object(rt.a)(this.hitTransformationMatrix_,t.slice());if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){this.hitCanvasContext_||(this.hitCanvasContext_=Object(F.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?r.call(i,this.getLayer(),s):void 0}}},e.prototype.getHitTransformationMatrix_=function(t,e){var r=Object(rt.c)();Object(rt.j)(r,-1,-1),Object(rt.h)(r,2/t[0],2/t[1]),Object(rt.j)(r,0,t[1]),Object(rt.h)(r,1,-1);var i=Object(rt.d)(this.projectionMatrix.slice()),n=Object(rt.c)();return Object(rt.j)(n,0,e[1]),Object(rt.h)(n,1,-1),Object(rt.h)(n,e[0]/2,e[1]/2),Object(rt.j)(n,1,1),Object(rt.e)(n,i),Object(rt.e)(n,r),n},e}(Qt);$t.handles=function(t){return t.getType()===j.a.IMAGE},$t.create=function(t,e){return new $t(t,e)};var te=$t,ee=r(37),re=r(69),ie=r(174),ne=r(43),oe=r(168),se=r(175),ae=function(t){function e(e){t.call(this,e);var r=e.getViewport();this.canvas_=document.createElement("canvas"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=ee.e,r.insertBefore(this.canvas_,r.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Object(F.createCanvasContext2D)(),this.renderedVisible_=!0,this.gl_=Object(q.getContext)(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new St(this.canvas_,this.gl_),Object(yt.listen)(this.canvas_,vt.LOST,this.handleWebGLContextLost,this),Object(yt.listen)(this.canvas_,vt.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new oe.default,this.focus_=null,this.tileTextureQueue_=new se.b(function(t){var e=t[1],r=t[2],i=e[0]-this.focus_[0],n=e[1]-this.focus_[1];return 65536*Math.log(r)+Math.sqrt(i*i+n*n)/r}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var r=this.tileTextureQueue_.dequeue(),i=r[0],n=r[3],o=r[4];this.bindTileTexture(i,n,o,q.LINEAR,q.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindTileTexture=function(t,e,r,i,n){var o=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){var a=this.textureCache_.get(s);o.bindTexture(q.TEXTURE_2D,a.texture),a.magFilter!=i&&(o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,i),a.magFilter=i),a.minFilter!=n&&(o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,n),a.minFilter=n)}else{var u=o.createTexture(),l=t;if(o.bindTexture(q.TEXTURE_2D,u),r>0){var c=this.clipTileContext_.canvas,h=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(c.width=e[0],c.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):h.clearRect(0,0,e[0],e[1]),h.drawImage(l.getImage(),r,r,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,c)}else o.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,l.getImage());o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,i),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,n),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),this.textureCache_.set(s,{texture:u,magFilter:i,minFilter:n})}},e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var i=this.context_,n=e.extent,o=e.size,s=e.viewState,a=e.pixelRatio,u=s.resolution,l=s.center,c=s.rotation,h=new Ht(i,l,u,c,o,n,a),p=new G.a(t,h,e,null,i);r.dispatchEvent(p)}},e.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.expireCache_=function(t,e){for(var r,i=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(r=this.textureCache_.peekLast())i.deleteTexture(r.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},e.prototype.getContext=function(){return this.context_},e.prototype.getGL=function(){return this.gl_},e.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},e.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var r in e)e[r].handleWebGLContextLost()},e.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},e.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(q.TEXTURE0),t.blendFuncSeparate(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA,q.ONE,q.ONE_MINUS_SRC_ALPHA),t.disable(q.CULL_FACE),t.disable(q.DEPTH_TEST),t.disable(q.SCISSOR_TEST),t.disable(q.STENCIL_TEST)},e.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},e.prototype.renderFrame=function(t){var e=this.getContext(),r=this.getGL();if(r.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchRenderEvent(B.a.PRECOMPOSE,t);var i=[],n=t.layerStatesArray;Object(W.l)(n,ie.sortByZIndex);var o,s,a=t.viewState.resolution;for(o=0,s=n.length;o<s;++o){var u=n[o];Object(re.visibleAtResolution)(u,a)&&u.sourceState==ne.a.READY&&this.getLayerRenderer(u.layer).prepareFrame(t,u,e)&&i.push(u)}var l=t.size[0]*t.pixelRatio,c=t.size[1]*t.pixelRatio;for(this.canvas_.width==l&&this.canvas_.height==c||(this.canvas_.width=l,this.canvas_.height=c),r.bindFramebuffer(q.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(q.COLOR_BUFFER_BIT),r.enable(q.BLEND),r.viewport(0,0,this.canvas_.width,this.canvas_.height),o=0,s=i.length;o<s;++o){var h=i[o];this.getLayerRenderer(h.layer).composeFrame(t,h,e)}this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchRenderEvent(B.a.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,n,o,s){var a;if(this.getGL().isContextLost())return!1;var u,l=e.viewState,c=e.layerStatesArray;for(u=c.length-1;u>=0;--u){var h=c[u],p=h.layer;if(Object(re.visibleAtResolution)(h,l.resolution)&&o.call(s,p)&&(a=this.getLayerRenderer(p).forEachFeatureAtCoordinate(t,e,r,i)))return a}},e.prototype.hasFeatureAtCoordinate=function(t,e,r,i,n){var o=!1;if(this.getGL().isContextLost())return!1;var s,a=e.viewState,u=e.layerStatesArray;for(s=u.length-1;s>=0;--s){var l=u[s],c=l.layer;if(Object(re.visibleAtResolution)(l,a.resolution)&&i.call(n,c)&&(o=this.getLayerRenderer(c).hasFeatureAtCoordinate(t,e)))return!0}return o},e.prototype.forEachLayerAtPixel=function(t,e,r,i,n,o,s){if(this.getGL().isContextLost())return!1;var a,u,l=e.viewState,c=e.layerStatesArray;for(u=c.length-1;u>=0;--u){var h=c[u],p=h.layer;if(Object(re.visibleAtResolution)(h,l.resolution)&&o.call(n,p)&&(a=this.getLayerRenderer(p).forEachLayerAtPixel(t,e,i,n)))return a}},e}(ie.default),ue=r(17),le=r(127),ce=r(19),he=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),pe=new $(q.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"),fe=r(45),de=function(t){function e(e,r){t.call(this,e,r),this.fragmentShader_=he,this.vertexShader_=pe,this.locations_=null,this.renderArrayBuffer_=new pt([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),t.prototype.disposeInternal.call(this)},e.prototype.createLoadedTileFinder=function(t,e,r){var i=this.mapRenderer;return function(n,o){return t.forEachLoadedTile(e,n,o,function(t){var e=i.isTileTextureLoaded(t);return e&&(r[n]||(r[n]={}),r[n][t.tileCoord.toString()]=t),e})}},e.prototype.handleWebGLContextLost=function(){t.prototype.handleWebGLContextLost.call(this),this.locations_=null},e.prototype.prepareFrame=function(t,e,r){var i=this.mapRenderer,n=r.getGL(),o=t.viewState,s=o.projection,a=this.getLayer(),u=a.getSource();if(!(u instanceof le.default))return!0;var l,c=u.getTileGridForProjection(s),h=c.getZForResolution(o.resolution),f=c.getResolution(h),d=u.getTilePixelSize(h,t.pixelRatio,s),g=d[0]/Object(fe.toSize)(c.getTileSize(h),this.tmpSize_)[0],y=f/g,v=u.getTilePixelRatio(g)*u.getGutterForProjection(s),m=o.center,_=t.extent,b=c.getTileRangeForExtentAndZ(_,h);if(this.renderedTileRange_&&this.renderedTileRange_.equals(b)&&this.renderedRevision_==u.getRevision())l=this.renderedFramebufferExtent_;else{var S=b.getSize(),x=Math.max(S[0]*d[0],S[1]*d[1]),O=Object(ce.e)(x),E=y*O,C=c.getOrigin(h),P=C[0]+b.minX*d[0]*y,w=C[1]+b.minY*d[1]*y;l=[P,w,P+E,w+E],this.bindFramebuffer(t,O),n.viewport(0,0,O,O),n.clearColor(0,0,0,0),n.clear(q.COLOR_BUFFER_BIT),n.disable(q.BLEND);var I=r.getProgram(this.fragmentShader_,this.vertexShader_);r.useProgram(I),this.locations_||(this.locations_=new function(t,e){this.u_tileOffset=t.getUniformLocation(e,q.DEBUG?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,q.DEBUG?"u_texture":"e"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"c")}(n,I)),r.bindBuffer(q.ARRAY_BUFFER,this.renderArrayBuffer_),n.enableVertexAttribArray(this.locations_.a_position),n.vertexAttribPointer(this.locations_.a_position,2,q.FLOAT,!1,16,0),n.enableVertexAttribArray(this.locations_.a_texCoord),n.vertexAttribPointer(this.locations_.a_texCoord,2,q.FLOAT,!1,16,8),n.uniform1i(this.locations_.u_texture,0);var L={};L[h]={};var R,M,A,j,N,F,k=this.createLoadedTileFinder(u,s,L),G=a.getUseInterimTilesOnError(),B=!0,U=Object(D.createEmpty)(),V=new T.b(0,0,0,0);for(j=b.minX;j<=b.maxX;++j)for(N=b.minY;N<=b.maxY;++N)if(M=u.getTile(h,j,N,g,s),void 0===e.extent||(F=c.getTileCoordExtent(M.tileCoord,U),Object(D.intersects)(F,e.extent))){if((A=M.getState())==ue.default.LOADED||A==ue.default.EMPTY||A==ue.default.ERROR&&!G||(M=M.getInterimTile()),(A=M.getState())==ue.default.LOADED){if(i.isTileTextureLoaded(M)){L[h][M.tileCoord.toString()]=M;continue}}else if(A==ue.default.EMPTY||A==ue.default.ERROR&&!G)continue;B=!1,c.forEachTileCoordParentTileRange(M.tileCoord,k,null,V,U)||(R=c.getTileCoordChildTileRange(M.tileCoord,V,U))&&k(h+1,R)}var z=Object.keys(L).map(Number);z.sort(W.i);for(var Y=new Float32Array(4),X=0,Z=z.length;X<Z;++X){var H=L[z[X]];for(var K in H)(M=H[K])instanceof p.default&&(F=c.getTileCoordExtent(M.tileCoord,U),Y[0]=2*(F[2]-F[0])/E,Y[1]=2*(F[3]-F[1])/E,Y[2]=2*(F[0]-l[0])/E-1,Y[3]=2*(F[1]-l[1])/E-1,n.uniform4fv(this.locations_.u_tileOffset,Y),i.bindTileTexture(M,d,v*g,q.LINEAR,q.LINEAR),n.drawArrays(q.TRIANGLE_STRIP,0,4))}B?(this.renderedTileRange_=b,this.renderedFramebufferExtent_=l,this.renderedRevision_=u.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,u,h,b);var J=i.getTileTextureQueue();this.manageTilePyramid(t,u,c,g,s,_,h,a.getPreload(),function(t){t.getState()!=ue.default.LOADED||i.isTileTextureLoaded(t)||J.isKeyQueued(t.getKey())||J.enqueue([t,c.getTileCoordCenter(t.tileCoord),c.getResolution(t.tileCoord[0]),d,v*g])},this),this.scheduleExpireCache(t,u);var Q=this.texCoordMatrix;return Object(rt.f)(Q),Object(rt.j)(Q,(Math.round(m[0]/f)*f-l[0])/(l[2]-l[0]),(Math.round(m[1]/f)*f-l[1])/(l[3]-l[1])),0!==o.rotation&&Object(rt.g)(Q,o.rotation),Object(rt.h)(Q,t.size[0]*o.resolution/(l[2]-l[0]),t.size[1]*o.resolution/(l[3]-l[1])),Object(rt.j)(Q,-.5,-.5),!0},e.prototype.forEachLayerAtPixel=function(t,e,r,i){if(this.framebuffer){var n=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=Object(rt.a)(this.texCoordMatrix,n.slice()),s=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var u=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,u),u[3]>0?r.call(i,this.getLayer(),u):void 0}},e}(Qt);de.handles=function(t){return t.getType()===j.a.TILE},de.create=function(t,e){return new de(t,e)};var ge=de,ye=r(91),ve=function(t){function e(e,r){t.call(this,e,r),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(D.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,r){this.layerState_=e;var i=t.viewState,n=this.replayGroup_,o=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();n&&!n.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,o[0]*s,o[1]*s),n.replay(r,i.center,i.resolution,i.rotation,o,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},e.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var r=this.mapRenderer.getContext();e.getDeleteResourcesFunction(r)(),this.replayGroup_=null}t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,n){if(this.replayGroup_&&this.layerState_){var o=this.mapRenderer.getContext(),s=e.viewState,a=this.getLayer(),u=this.layerState_,l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,u.opacity,{},function(t){var e=Object(k.getUid)(t);if(!(e in l))return l[e]=!0,i.call(n,t,a)})}},e.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var r=this.mapRenderer.getContext(),i=e.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,r,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,n.opacity,e.skippedFeatureUids)}return!1},e.prototype.forEachLayerAtPixel=function(t,e,r,i){var n=Object(rt.a)(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(n,e)?r.call(i,this.getLayer(),null):void 0},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e,r){var i=this.getLayer(),n=i.getSource(),o=t.viewHints[N.default.ANIMATING],s=t.viewHints[N.default.INTERACTING],a=i.getUpdateWhileAnimating(),u=i.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!u&&s)return!0;var l=t.extent,c=t.viewState,h=c.projection,p=c.resolution,f=t.pixelRatio,d=i.getRevision(),g=i.getRenderBuffer(),y=i.getRenderOrder();void 0===y&&(y=ye.a);var v=Object(D.buffer)(l,g*p);if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==d&&this.renderedRenderOrder_==y&&Object(D.containsExtent)(this.renderedExtent_,v))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(r)),this.dirty_=!1;var m=new Zt(Object(ye.c)(p,f),v,i.getRenderBuffer());n.loadFeatures(v,p,h);var _=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,p)),e){var n=this.renderFeature(t,p,f,e,m);this.dirty_=this.dirty_||n}}.bind(this);if(y){var b=[];n.forEachFeatureInExtent(v,function(t){b.push(t)}),b.sort(y),b.forEach(_.bind(this))}else n.forEachFeatureInExtent(v,_);return m.finish(r),this.renderedResolution_=p,this.renderedRevision_=d,this.renderedRenderOrder_=y,this.renderedExtent_=v,this.replayGroup_=m,!0},e.prototype.renderFeature=function(t,e,r,i,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=i.length-1;s>=0;--s)o=Object(ye.d)(n,t,i[s],Object(ye.b)(e,r),this.handleStyleImageChange_,this)||o;else o=Object(ye.d)(n,t,i,Object(ye.b)(e,r),this.handleStyleImageChange_,this)||o;return o},e}(Qt);ve.handles=function(t){return t.getType()===j.a.VECTOR},ve.create=function(t,e){return new ve(t,e)};var me=ve,_e=function(t){function e(e){(e=Object(M.assign)({},e)).controls||(e.controls=Object(L.a)()),e.interactions||(e.interactions=Object(R.defaults)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new ae(this);return t.registerLayerRenderers([te,ge,me]),t},e}(x.default);r.d(e,"AssertionError",function(){return i.a}),r.d(e,"Collection",function(){return n.default}),r.d(e,"Disposable",function(){return o.a}),r.d(e,"Feature",function(){return s.default}),r.d(e,"Geolocation",function(){return a.default}),r.d(e,"Graticule",function(){return u.default}),r.d(e,"Image",function(){return l.default}),r.d(e,"ImageBase",function(){return c.a}),r.d(e,"ImageCanvas",function(){return h.a}),r.d(e,"ImageTile",function(){return p.default}),r.d(e,"Kinetic",function(){return f.default}),r.d(e,"Map",function(){return d.default}),r.d(e,"MapBrowserEvent",function(){return g.default}),r.d(e,"MapBrowserEventHandler",function(){return y.a}),r.d(e,"MapBrowserPointerEvent",function(){return v.default}),r.d(e,"MapEvent",function(){return m.a}),r.d(e,"Object",function(){return _.default}),r.d(e,"Observable",function(){return b.default}),r.d(e,"Overlay",function(){return S.default}),r.d(e,"PluggableMap",function(){return x.default}),r.d(e,"Tile",function(){return O.default}),r.d(e,"TileCache",function(){return E.a}),r.d(e,"TileQueue",function(){return C.a}),r.d(e,"TileRange",function(){return T.b}),r.d(e,"VectorImageTile",function(){return P.a}),r.d(e,"VectorTile",function(){return w.default}),r.d(e,"View",function(){return I.default}),r.d(e,"WebGLMap",function(){return _e}),r.d(e,"getUid",function(){return k.getUid}),r.d(e,"inherits",function(){return k.inherits}),r.d(e,"VERSION",function(){return k.VERSION})},function(t,e,r){"use strict";t.exports=n;var i=r(476);function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=t;n--)r.buf[n+i]=r.buf[n]}function u(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5,n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,t(n,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*_(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(t,e,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return s(t,i,e);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return s(t,i,e);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return s(t,i,e);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return s(t,i,e);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return s(t,i,e);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return s(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){for(var i="",n=e;n<r;){var o,s,a,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[n+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&((l=(15&u)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),n+=c}return i}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,i;if(t>=0?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var i,n,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):n=i;continue}if(i<56320){t[r++]=239,t[r++]=191,t[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(t[r++]=239,t[r++]=191,t[r++]=189,n=null);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(i<65536?t[r++]=i>>12|224:(t[r++]=i>>18|240,t[r++]=i>>12&63|128),t[r++]=i>>6&63|128),t[r++]=63&i|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&a(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&a(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,n.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,u,e)},writePackedSVarint:function(t,e){this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){this.writeMessage(t,p,e)},writePackedFloat:function(t,e){this.writeMessage(t,c,e)},writePackedDouble:function(t,e){this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,r){var i=r(493);e.Processor=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=void 0,e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=void 0,e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.goog=e.ZDOverviewMap=e.PolygonJSON=e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.Layer=e.MapLayerSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.Doc=e.MapDocSource=e.MapDocTileLayer=e.MapDocTileSource=e.ZDTileDebug=void 0;var i=br(r(48)),n=br(r(36)),o=br(r(276)),s=br(r(339)),a=(br(r(109)),br(r(142)),br(r(210))),u=br(r(211)),l=(br(r(166)),br(r(25))),c=_r(r(150)),h=br(r(222)),p=br(r(167)),f=(br(r(95)),br(r(223)),br(r(184))),d=_r(r(7)),g=_r(r(214)),y=br(r(62)),v=br(r(285)),m=_r(r(286)),_=_r(r(236)),b=_r(r(213)),S=_r(r(287)),x=br(r(212)),O=_r(r(288)),E=br(r(289)),C=(br(r(35)),br(r(469))),T=br(r(33)),P=br(r(470)),w=br(r(193)),I=br(r(130)),L=(br(r(44)),br(r(471))),R=br(r(472)),M=br(r(473)),A=br(r(474)),j=br(r(475)),N=br(r(477)),F=_r(r(677)),D=br(r(478)),k=_r(r(479)),G=br(r(480)),B=br(r(481)),U=br(r(482)),V=br(r(678)),z=br(r(346)),W=br(r(347)),Y=br(r(359)),X=br(r(350)),Z=br(r(354)),H=br(r(355)),q=br(r(348)),K=br(r(357)),J=br(r(358)),Q=br(r(356)),$=br(r(352)),tt=br(r(353)),et=br(r(345)),rt=br(r(351)),it=br(r(344)),nt=br(r(349)),ot=br(r(264)),st=br(r(89)),at=br(r(129)),ut=br(r(39)),lt=br(r(144)),ct=br(r(56)),ht=br(r(68)),pt=br(r(74)),ft=br(r(38)),dt=_r(r(34)),gt=br(r(20)),yt=r(73),vt=br(r(63)),mt=br(r(183)),_t=br(r(277)),bt=br(r(225)),St=br(r(215)),xt=br(r(216)),Ot=br(r(278)),Et=br(r(217)),Ct=_r(r(279)),Tt=br(r(280)),Pt=br(r(41)),wt=br(r(226)),It=br(r(218)),Lt=br(r(281)),Rt=br(r(219)),Mt=br(r(220)),At=br(r(221)),jt=_r(r(47)),Nt=br(r(282)),Ft=br(r(283)),Dt=br(r(284)),kt=br(r(227)),Gt=br(r(343)),Bt=br(r(483)),Ut=br(r(224)),Vt=br(r(69)),zt=br(r(149)),Wt=br(r(97)),Yt=br(r(484)),Xt=br(r(126)),Zt=(br(r(272)),br(r(143))),Ht=(br(r(170)),br(r(191))),qt=br(r(174)),Kt=br(r(158)),Jt=br(r(259)),Qt=br(r(342)),$t=br(r(485)),te=br(r(486)),ee=br(r(487)),re=br(r(75)),ie=br(r(488)),ne=br(r(290)),oe=br(r(489)),se=br(r(490)),ae=br(r(491)),ue=_r(r(360)),le=br(r(492)),ce=br(r(169)),he=br(r(495)),pe=br(r(127)),fe=br(r(496)),de=br(r(497)),ge=br(r(67)),ye=br(r(498)),ve=br(r(499)),me=br(r(500)),_e=(br(r(232)),br(r(110))),be=br(r(501)),Se=_r(r(679)),xe=br(r(171)),Oe=br(r(502)),Ee=(br(r(168)),br(r(266))),Ce=br(r(98)),Te=br(r(197)),Pe=_r(r(190)),we=br(r(229)),Ie=br(r(340)),Le=br(r(94)),Re=br(r(70)),Me=br(r(88)),Ae=br(r(101)),je=_r(r(361)),Ne=_r(r(464)),Fe=_r(r(57)),De=_r(r(78)),ke=_r(r(362)),Ge=_r(r(26)),Be=_r(r(58)),Ue=_r(r(32)),Ve=_r(r(1)),ze=_r(r(230)),We=_r(r(275)),Ye=r(42),Xe=_r(Ye),Ze=(_r(Ye),_r(r(228))),He=_r(r(341)),qe=_r(r(9)),Ke=_r(r(49)),Je=_r(r(503)),Qe=_r(r(504)),$e=_r(r(21)),tr=_r(r(45)),er=_r(r(188)),rr=_r(r(60)),ir=_r(r(0)),nr=r(505),or=r(549),sr=r(139),ar=r(124),ur=r(566),lr=r(590),cr=r(591),hr=r(405),pr=r(621),fr=r(636),dr=r(643),gr=r(649),yr=r(413),vr=r(652),mr=r(672);function _r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function br(t){return t&&t.__esModule?t:{default:t}}var Sr=window.ol={};Sr.color={},Sr.colorlike={},Sr.control={},Sr.coordinate={},Sr.easing={},Sr.events={},Sr.events.condition={},Sr.extent={},Sr.featureloader={},Sr.format={},Sr.format.filter={},Sr.geom={},Sr.has={},Sr.interaction={},Sr.layer={},Sr.loadingstrategy={},Sr.proj={},Sr.proj.Units={},Sr.proj.proj4={},Sr.render={},Sr.render.canvas={},Sr.renderer={},Sr.renderer.canvas={},Sr.renderer.webgl={},Sr.size={},Sr.source={},Sr.zondy={},Sr.sphere=Sr.Sphere=function(t){this.radius=t},Sr.style={},Sr.style.IconImageCache={},Sr.tilegrid={},Sr.xml={},Sr.Collection=i.default,Sr.Feature=n.default,Sr.Geolocation=o.default,Sr.Graticule=s.default,Sr.Kinetic=a.default,Sr.Map=u.default,Sr.Object=l.default,Sr.Observable=c.default,Sr.Observable.unByKey=c.unByKey,Sr.Overlay=h.default,Sr.PluggableMap=p.default,Sr.View=f.default,Sr.WebGLMap=d,Sr.color.asArray=Fe.asArray,Sr.color.asString=Fe.asString,Sr.colorlike.asColorLike=De.asColorLike,Sr.control.Attribution=g.default,Sr.control.Attribution.render=g.render,Sr.control.Control=y.default,Sr.control.FullScreen=v.default,Sr.control.MousePosition=m.default,Sr.control.MousePosition.render=m.render,Sr.control.OverviewMap=_.default,Sr.control.OverviewMap.render=_.render,Sr.control.Rotate=b.default,Sr.control.Rotate.render=b.render,Sr.control.ScaleLine=S.default,Sr.control.ScaleLine.render=S.render,Sr.control.Zoom=x.default,Sr.control.ZoomSlider=O.default,Sr.control.ZoomSlider.render=O.render,Sr.control.ZoomToExtent=E.default,Sr.control.defaults=ke.defaults,Sr.coordinate.add=Ge.add,Sr.coordinate.createStringXY=Ge.createStringXY,Sr.coordinate.format=Ge.format,Sr.coordinate.rotate=Ge.rotate,Sr.coordinate.toStringHDMS=Ge.toStringHDMS,Sr.coordinate.toStringXY=Ge.toStringXY,Sr.easing.easeIn=Be.easeIn,Sr.easing.easeOut=Be.easeOut,Sr.easing.inAndOut=Be.inAndOut,Sr.easing.linear=Be.linear,Sr.easing.upAndDown=Be.upAndDown,Sr.events.condition.altKeyOnly=Ue.altKeyOnly,Sr.events.condition.altShiftKeysOnly=Ue.altShiftKeysOnly,Sr.events.condition.always=Ue.always,Sr.events.condition.click=Ue.click,Sr.events.condition.doubleClick=Ue.doubleClick,Sr.events.condition.focus=Ue.focus,Sr.events.condition.mouseOnly=Ue.mouseOnly,Sr.events.condition.never=Ue.never,Sr.events.condition.noModifierKeys=Ue.noModifierKeys,Sr.events.condition.platformModifierKeyOnly=Ue.platformModifierKeyOnly,Sr.events.condition.pointerMove=Ue.pointerMove,Sr.events.condition.primaryAction=Ue.primaryAction,Sr.events.condition.shiftKeyOnly=Ue.shiftKeyOnly,Sr.events.condition.singleClick=Ue.singleClick,Sr.events.condition.targetNotEditable=Ue.targetNotEditable,Sr.extent.applyTransform=Ve.applyTransform,Sr.extent.boundingExtent=Ve.boundingExtent,Sr.extent.buffer=Ve.buffer,Sr.extent.containsCoordinate=Ve.containsCoordinate,Sr.extent.containsExtent=Ve.containsExtent,Sr.extent.containsXY=Ve.containsXY,Sr.extent.createEmpty=Ve.createEmpty,Sr.extent.equals=Ve.equals,Sr.extent.extend=Ve.extend,Sr.extent.getArea=Ve.getArea,Sr.extent.getBottomLeft=Ve.getBottomLeft,Sr.extent.getBottomRight=Ve.getBottomRight,Sr.extent.getCenter=Ve.getCenter,Sr.extent.getHeight=Ve.getHeight,Sr.extent.getIntersection=Ve.getIntersection,Sr.extent.getSize=Ve.getSize,Sr.extent.getTopLeft=Ve.getTopLeft,Sr.extent.getTopRight=Ve.getTopRight,Sr.extent.getWidth=Ve.getWidth,Sr.extent.intersects=Ve.intersects,Sr.extent.isEmpty=Ve.isEmpty,Sr.featureloader.xhr=ze.xhr,Sr.format.EsriJSON=C.default,Sr.format.Feature=T.default,Sr.format.GML=P.default,Sr.format.GML2=w.default,Sr.format.GML3=I.default,Sr.format.GPX=L.default,Sr.format.GeoJSON=R.default,Sr.format.IGC=M.default,Sr.format.KML=A.default,Sr.format.MVT=j.default,Sr.format.OSMXML=N.default,Sr.format.Polyline=F.default,Sr.format.Polyline.decodeDeltas=F.decodeDeltas,Sr.format.Polyline.decodeFloats=F.decodeFloats,Sr.format.Polyline.encodeDeltas=F.encodeDeltas,Sr.format.Polyline.encodeFloats=F.encodeFloats,Sr.format.TopoJSON=D.default,Sr.format.WFS=k.default,Sr.format.WFS.writeFilter=k.writeFilter,Sr.format.WKT=G.default,Sr.format.WMSCapabilities=B.default,Sr.format.WMSGetFeatureInfo=U.default,Sr.format.WMTSCapabilities=V.default,Sr.format.filter.Bbox=z.default,Sr.format.filter.Contains=W.default,Sr.format.filter.During=Y.default,Sr.format.filter.EqualTo=X.default,Sr.format.filter.GreaterThan=Z.default,Sr.format.filter.GreaterThanOrEqualTo=H.default,Sr.format.filter.Intersects=q.default,Sr.format.filter.IsBetween=K.default,Sr.format.filter.IsLike=J.default,Sr.format.filter.IsNull=Q.default,Sr.format.filter.LessThan=$.default,Sr.format.filter.LessThanOrEqualTo=tt.default,Sr.format.filter.Not=et.default,Sr.format.filter.NotEqualTo=rt.default,Sr.format.filter.Or=it.default,Sr.format.filter.Within=nt.default,Sr.format.filter.and=We.and,Sr.format.filter.bbox=We.bbox,Sr.format.filter.between=We.between,Sr.format.filter.contains=We.contains,Sr.format.filter.during=We.during,Sr.format.filter.equalTo=We.equalTo,Sr.format.filter.greaterThan=We.greaterThan,Sr.format.filter.greaterThanOrEqualTo=We.greaterThanOrEqualTo,Sr.format.filter.intersects=We.intersects,Sr.format.filter.isNull=We.isNull,Sr.format.filter.lessThan=We.lessThan,Sr.format.filter.lessThanOrEqualTo=We.lessThanOrEqualTo,Sr.format.filter.like=We.like,Sr.format.filter.not=We.not,Sr.format.filter.notEqualTo=We.notEqualTo,Sr.format.filter.or=We.or,Sr.format.filter.within=We.within,Sr.geom.Circle=ot.default,Sr.geom.Geometry=st.default,Sr.geom.GeometryLayout=gt.default,Sr.geom.GeometryCollection=at.default,Sr.geom.LineString=ut.default,Sr.geom.LinearRing=lt.default,Sr.geom.MultiLineString=ct.default,Sr.geom.MultiPoint=ht.default,Sr.geom.MultiPolygon=pt.default,Sr.geom.Point=ft.default,Sr.geom.Polygon=dt.default,Sr.geom.Polygon.circular=dt.circular,Sr.geom.Polygon.fromCircle=dt.fromCircle,Sr.geom.Polygon.fromExtent=dt.fromExtent,Sr.geom.Polygon.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,yt.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}else this.setFlatCoordinates(Sr.geom.GeometryLayout.XY,null,this.ends_)},Sr.geom.SimpleGeometry=vt.default,Sr.has.DEVICE_PIXEL_RATIO=Xe.DEVICE_PIXEL_RATIO,Sr.has.GEOLOCATION=Xe.GEOLOCATION,Sr.has.TOUCH=Xe.TOUCH,Sr.has.WEBGL=Xe.WEBGL,Sr.inherits=Ne.inherits,Sr.interaction.DoubleClickZoom=mt.default,Sr.interaction.DragAndDrop=_t.default,Sr.interaction.DragBox=bt.default,Sr.interaction.DragPan=St.default,Sr.interaction.DragRotate=xt.default,Sr.interaction.DragRotateAndZoom=Ot.default,Sr.interaction.DragZoom=Et.default,Sr.interaction.Draw=Ct.default,Sr.interaction.Draw.createBox=Ct.createBox,Sr.interaction.Draw.createRegularPolygon=Ct.createRegularPolygon,Sr.interaction.Draw.handleEvent=Ct.handleEvent,Sr.interaction.Extent=Tt.default,Sr.interaction.Interaction=Pt.default,Sr.interaction.KeyboardPan=wt.default,Sr.interaction.KeyboardZoom=It.default,Sr.interaction.Modify=Lt.default,Sr.interaction.MouseWheelZoom=Rt.default,Sr.interaction.PinchRotate=Mt.default,Sr.interaction.PinchZoom=At.default,Sr.interaction.Pointer=jt.default,Sr.interaction.Pointer.handleEvent=jt.handleEvent,Sr.interaction.Select=Nt.default,Sr.interaction.Snap=Ft.default,Sr.interaction.Translate=Dt.default,Sr.interaction.defaults=Ze.defaults,Sr.layer.Base=kt.default,Sr.layer.Group=Gt.default,Sr.layer.Heatmap=Bt.default,Sr.layer.Image=Ut.default,Sr.layer.Layer=Vt.default,Sr.layer.Tile=zt.default,Sr.layer.Vector=Wt.default,Sr.layer.VectorTile=Yt.default,Sr.loadingstrategy.all=He.all,Sr.loadingstrategy.bbox=He.bbox,Sr.loadingstrategy.tile=He.tile,Sr.proj.Projection=Xt.default,Sr.proj.Units.METERS_PER_UNIT=Ke.METERS_PER_UNIT,Sr.proj.addCoordinateTransforms=qe.addCoordinateTransforms,Sr.proj.addEquivalentProjections=qe.addEquivalentProjections,Sr.proj.addProjection=qe.addProjection,Sr.proj.equivalent=qe.equivalent,Sr.proj.fromLonLat=qe.fromLonLat,Sr.proj.get=qe.get,Sr.proj.getPointResolution=qe.getPointResolution,Sr.proj.getTransform=qe.getTransform,Sr.proj.proj4.register=Je.register,Sr.proj.toLonLat=qe.toLonLat,Sr.proj.transform=qe.transform,Sr.proj.transformExtent=qe.transformExtent,Sr.render.VectorContext=Zt.default,Sr.render.canvas.labelCache=$e.labelCache,Sr.render.toContext=Qe.toContext,Sr.renderer.canvas.ImageLayer=Ht.default,Sr.renderer.Map=qt.default,Sr.renderer.canvas.TileLayer=Kt.default,Sr.renderer.canvas.VectorLayer=Jt.default,Sr.renderer.canvas.VectorTileLayer=Qt.default,Sr.size.toSize=tr.toSize,Sr.source.BingMaps=$t.default,Sr.source.CartoDB=te.default,Sr.source.Cluster=ee.default,Sr.source.Image=re.default,Sr.source.ImageArcGISRest=ie.default,Sr.source.ImageCanvas=ne.default,Sr.source.ImageMapGuide=oe.default,Sr.source.ImageStatic=se.default,Sr.source.ImageWMS=ae.default,Sr.source.OSM=ue.default,Sr.source.OSM.ATTRIBUTION=ue.ATTRIBUTION,Sr.source.Raster=le.default,Sr.source.Source=ce.default,Sr.source.Stamen=he.default,Sr.source.Tile=pe.default,Sr.source.TileArcGISRest=fe.default,Sr.source.TileDebug=de.default,Sr.source.TileImage=ge.default,Sr.source.TileJSON=ye.default,Sr.source.TileWMS=ve.default,Sr.source.UTFGrid=me.default,Sr.source.Vector=_e.default,Sr.source.VectorTile=be.default,Sr.source.WMTS=Se.default,Sr.source.WMTS.optionsFromCapabilities=Se.optionsFromCapabilities,Sr.source.XYZ=xe.default,Sr.source.Zoomify=Oe.default,Sr.sphere.prototype.getArea=er.getArea,Sr.sphere.prototype.getDistance=er.getDistance,Sr.sphere.prototype.getLength=er.getLength,Sr.sphere.prototype.getAreaInternal=er.getAreaInternal,Sr.style.Circle=Ee.default,Sr.style.Fill=Ce.default,Sr.style.Icon=Te.default,Sr.style.IconImageCache.shared=Pe.shared,Sr.style.Image=we.default,Sr.style.RegularShape=Ie.default,Sr.style.Stroke=Le.default,Sr.style.Style=Re.default,Sr.style.Text=Me.default,Sr.tilegrid.TileGrid=Ae.default,Sr.tilegrid.WMTS=je.default,Sr.tilegrid.WMTS.createFromCapabilitiesMatrixSet=je.createFromCapabilitiesMatrixSet,Sr.tilegrid.createXYZ=rr.createXYZ,Sr.xml.getAllTextContent=ir.getAllTextContent,Sr.xml.parse=ir.parse,e.ZDTileDebug=nr.ZDTileDebug,e.MapDocTileSource=nr.MapDocTileSource,e.MapDocTileLayer=nr.MapDocTileLayer,e.MapDocSource=nr.MapDocSource,e.Doc=nr.Doc,e.CacheTileLayerSource=nr.CacheTileLayerSource,e.CacheTileLayer=nr.CacheTileLayer,e.TileLayerSource=nr.TileLayerSource,e.TileLayer_mapgis=nr.TileLayer_mapgis,e.MapLayerTileSource=nr.MapLayerTileSource,e.GdbpLayer=nr.GdbpLayer,e.MapLayerSource=nr.MapLayerSource,e.Layer=nr.Layer,e.BaiduMapSource=nr.BaiduMapSource,e.BaiDuLayer=nr.BaiDuLayer,e.GaodeMapSource=nr.GaodeMapSource,e.GaoDeLayer=nr.GaoDeLayer,e.TiandituMapSource=nr.TiandituMapSource,e.TianDiTu=nr.TianDiTu,e.GoogleMapSource=nr.GoogleMapSource,e.GoogleLayer=nr.GoogleLayer,e.ArcGISMapSource=nr.ArcGISMapSource,e.ArcGISLayer=nr.ArcGISLayer,e.OpenStreetMapSource=nr.OpenStreetMapSource,e.OpenStreetLayer=nr.OpenStreetLayer,e.TiandituType=nr.TiandituType,e.GoogleLayerType=nr.GoogleLayerType,e.ArcGISLayerType=nr.ArcGISLayerType,e.OpenStreetLayerType=nr.OpenStreetLayerType,e.Drag=or.Drag,e.MilStd=or.MilStd,e.MilStdDrawTool=or.MilStdDrawTool,e.MilStdModifyTool=or.MilStdModifyTool,e.MilStdDragPan=or.MilStdDragPan,e.EnumMilstdType=or.EnumMilstdType,e.MilstdParams=or.MilstdParams,e.PolygonJSON=or.PolygonJSON,e.ZDOverviewMap=or.ZDOverviewMap,e.goog=or.goog,e.ServiceBase=sr.ServiceBase,e.AnyLine=ar.AnyLine,e.Arc=ar.Arc,e.Zondy=ar.Zondy,e.CAttStruct=ar.CAttStruct,e.CAttDataRow=ar.CAttDataRow,e.CDisplayStyle=ar.CDisplayStyle,e.CDisplayStyleExtend=ar.CDisplayStyleExtend,e.CDynNoteInfo=ar.CDynNoteInfo,e.CGDBInfo=ar.CGDBInfo,e.Circle=ar.Circle,e.CLineInfo=ar.CLineInfo,e.CPointInfo=ar.CPointInfo,e.CRegionInfo=ar.CRegionInfo,e.DynNoteLableType=ar.DynNoteLableType,e.DynShowStyle=ar.DynShowStyle,e.XClsType=ar.XClsType,e.VectClsType=ar.VectClsType,e.FeatureType=ar.FeatureType,e.FontShape=ar.FontShape,e.LabelLinType=ar.LabelLinType,e.LabelRegType=ar.LabelRegType,e.LabelPntType=ar.LabelPntType,e.RepeatType=ar.RepeatType,e.LabelSpreadType=ar.LabelSpreadType,e.LineConstrain=ar.LineConstrain,e.EightDirType=ar.EightDirType,e.ISShowArc=ar.ISShowArc,e.NetAnalyType=ar.NetAnalyType,e.NetElemType=ar.NetElemType,e.CLinAdjustType=ar.CLinAdjustType,e.CLinHeadType=ar.CLinHeadType,e.CLinJointType=ar.CLinJointType,e.CLinStyleMakeType=ar.CLinStyleMakeType,e.CItemType=ar.CItemType,e.MapType=ar.MapType,e.LayerStatusType=ar.LayerStatusType,e.Feature=ar.Feature,e.FeatureGeometry=ar.FeatureGeometry,e.FeatureGraphicBase=ar.FeatureGraphicBase,e.FeatureSet=ar.FeatureSet,e.GLine=ar.GLine,e.GPoint=ar.GPoint,e.GRegion=ar.GRegion,e.LabelLinInfo=ar.LabelLinInfo,e.LabelRegInfo=ar.LabelRegInfo,e.LablePntInfo=ar.LablePntInfo,e.MultiPolygon=ar.MultiPolygon,e.Point2D=ar.Point2D,e.Polygon=ar.Polygon,e.PolyLine=ar.PolyLine,e.Rectangle=ar.Rectangle,e.Tangram=ar.Tangram,e.VectCls=ar.VectCls,e.WebGraphicsInfo=ar.WebGraphicsInfo,e.extend=ar.extend,e.isArray=ar.isArray,e.extendDeep=ar.extendDeep,e.copy=ar.copy,e.copyExcluce=ar.copyExcluce,e.reset=ar.reset,e.getElement=ar.getElement,e.isElement=ar.isElement,e.removeItem=ar.removeItem,e.indexOf=ar.indexOf,e.modifyDOMElement=ar.modifyDOMElement,e.applyDefaults=ar.applyDefaults,e.getParameterString=ar.getParameterString,e.getWFParameterString=ar.getWFParameterString,e.urlAppend=ar.urlAppend,e.getParameters=ar.getParameters,e.IS_GECKO=ar.IS_GECKO,e.Browser=ar.Browser,e.getBrowser=ar.getBrowser,e.isSupportCanvas=ar.isSupportCanvas,e.supportCanvas=ar.supportCanvas,e.isInTheSameDomain=ar.isInTheSameDomain,e.toJSON=ar.toJSON,e.transformResult=ar.transformResult,e.copyAttributes=ar.copyAttributes,e.copyAttributesWithClip=ar.copyAttributesWithClip,e.cloneObject=ar.cloneObject,e.newGuid=ar.newGuid,e.bind=ar.bind,e.bindAsEventListener=ar.bindAsEventListener,e.getTopAnalysisResult=ar.getTopAnalysisResult,e.ChineseToUtf8=ar.ChineseToUtf8,e.DeepMerge=ar.DeepMerge,e.merge=ar.merge,e.mixin=ar.mixin,e.createCanvasContext2D=ar.createCanvasContext2D,e.ContourNoteParam=ur.ContourNoteParam,e.ContourParam=ur.ContourParam,e.ContourZValue=ur.ContourZValue,e.ContourRegionInfo=ur.ContourRegionInfo,e.MeshingParam=ur.MeshingParam,e.NetAnalyse=ur.NetAnalyse,e.NetAnalysisExtent=ur.NetAnalysisExtent,e.SlopLineParam=ur.SlopLineParam,e.CommonServiceBase=lr.CommonServiceBase,e.Events=lr.Events,e.CORS=lr.CORS,e.RequestTimeout=lr.RequestTimeout,e.FetchRequest=lr.FetchRequest,e.IgsServiceBase=lr.IgsServiceBase,e.JSONFormat=lr.JSONFormat,e.ColorInfo=cr.ColorInfo,e.GDBInfo=cr.GDBInfo,e.MapDoc=cr.MapDoc,e.CatalogService=cr.CatalogService,e.TileLayer=cr.TileLayer,e.VectorLayer=cr.VectorLayer,e.EditDocFeature=hr.EditDocFeature,e.EditLayerFeature=hr.EditLayerFeature,e.EditServiceBase=hr.EditServiceBase,e.MultiGeoQuery=hr.MultiGeoQuery,e.MultiGeoQueryParameter=hr.MultiGeoQueryParameter,e.ObjClsQuery=hr.ObjClsQuery,e.ObjClsQueryParameter=hr.ObjClsQueryParameter,e.QueryByLayerParameter=hr.QueryByLayerParameter,e.QueryDocFeature=hr.QueryDocFeature,e.QueryFeatureRule=hr.QueryFeatureRule,e.QueryFeatureStruct=hr.QueryFeatureStruct,e.QueryLayerFeature=hr.QueryLayerFeature,e.QueryParameter=hr.QueryParameter,e.QueryParameterBase=hr.QueryParameterBase,e.QueryServiceBase=hr.QueryServiceBase,e.AnalysisBase=pr.AnalysisBase,e.ClassBufferBase=pr.ClassBufferBase,e.ClassBufferByMultiplyRing=pr.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=pr.ClassBufferBySingleRing,e.ClipBase=pr.ClipBase,e.ClipByCircle=pr.ClipByCircle,e.ClipByLayer=pr.ClipByLayer,e.ClipByPolygon=pr.ClipByPolygon,e.ContourAnalyse=pr.ContourAnalyse,e.FeatureBuffBase=pr.FeatureBuffBase,e.FeatureBuffByMultiplyRing=pr.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=pr.FeatureBuffBySingleRing,e.NetAnalysis=pr.NetAnalysis,e.OverlayBase=pr.OverlayBase,e.OverlayByLayer=pr.OverlayByLayer,e.OverlayByPolygon=pr.OverlayByPolygon,e.ProjectBase=pr.ProjectBase,e.ProjectByLayer=pr.ProjectByLayer,e.ProjectBySRID=pr.ProjectBySRID,e.FunctionWareService=pr.FunctionWareService,e.CalArea=fr.CalArea,e.CalPolyLineLength=fr.CalPolyLineLength,e.CalServiceBase=fr.CalServiceBase,e.CProjectBySRSID=fr.CProjectBySRSID,e.CProjectParam=fr.CProjectParam,e.GeometryAnalysisBase=fr.GeometryAnalysisBase,e.ProjectDots=fr.ProjectDots,e.ProjectRang=fr.ProjectRang,e.Smooth=fr.Smooth,e.TopAnalysis=fr.TopAnalysis,e.CoordinateElpTrans=yr.CoordinateElpTrans,e.GetDocImageService=dr.GetDocImageService,e.GetLayerImageService=dr.GetLayerImageService,e.GetMapImageService=dr.GetMapImageService,e.GetMapInfoService=dr.GetMapInfoService,e.GetTileImageService=dr.GetTileImageService,e.MapServiceBase=dr.MapServiceBase,e.CAllOtherDataItemInfoSource=gr.CAllOtherDataItemInfoSource,e.CAnnInfo=gr.CAnnInfo,e.CChartLabelFormat=gr.CChartLabelFormat,e.CChartTheme=gr.CChartTheme,e.CChartThemeInfo=gr.CChartThemeInfo,e.CChartThemeRepresentInfo=gr.CChartThemeRepresentInfo,e.CChartType=gr.CChartType,e.CDotDensityTheme=gr.CDotDensityTheme,e.CFourColorTheme=gr.CFourColorTheme,e.CGraduatedSymbolTheme=gr.CGraduatedSymbolTheme,e.CLinInfo=gr.CLinInfo,e.CMultiClassTheme=gr.CMultiClassTheme,e.CPntInfo=gr.CPntInfo,e.CRandomTheme=gr.CRandomTheme,e.CRangeTheme=gr.CRangeTheme,e.CRangeThemeInfo=gr.CRangeThemeInfo,e.CRegInfo=gr.CRegInfo,e.CSimpleTheme=gr.CSimpleTheme,e.CTheme=gr.CTheme,e.CThemeInfo=gr.CThemeInfo,e.CUniqueTheme=gr.CUniqueTheme,e.CUniqueThemeInfo=gr.CUniqueThemeInfo,e.ExpInfo=gr.ExpInfo,e.FolderInfo=gr.FolderInfo,e.FolderInfoAttribute=gr.FolderInfoAttribute,e.ItemValue=gr.ItemValue,e.ThemeOper=gr.ThemeOper,e.ThemesInfo=gr.ThemesInfo,e.GeoFeatureThemeLayer=vr.GeoFeatureThemeLayer,e.ThemeLayer=vr.ThemeLayer,e.RangeThemeLayer=vr.RangeThemeLayer,e.UniqueThemeLayer=vr.UniqueThemeLayer,e.GraphThemeLayer=vr.GraphThemeLayer,e.graphThemeLayer=vr.graphThemeLayer,e.RandomThemeLayer=vr.RandomThemeLayer,e.SimpleThemeLayer=vr.SimpleThemeLayer,e.RankSymbolThemeLayer=vr.RankSymbolThemeLayer,e.ThemeStyle=vr.ThemeStyle,e.MapvSource=mr.MapvSource,Sr.source.Mapv=mr.MapvSource},function(t,e,r){t.exports=function(){"use strict";function t(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function e(t,e){return t<e?-1:t>e?1:0}return function(r,i,n,o,s){!function e(r,i,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,u=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1);e(r,i,Math.max(n,Math.floor(i-u*c/a+h)),Math.min(o,Math.floor(i+(a-u)*c/a+h)),s)}var p=r[i],f=n,d=o;for(t(r,n,i),s(r[o],p)>0&&t(r,n,o);f<d;){for(t(r,f,d),f++,d--;s(r[f],p)<0;)f++;for(;s(r[d],p)>0;)d--}0===s(r[n],p)?t(r,n,d):t(r,++d,o),d<=i&&(n=d+1),i<=d&&(o=d-1)}}(r,i,n||0,o||r.length-1,s||e)}}()},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(23),o=r(1),s=r(33),a=r(192),u=r(20),l=r(5),c=r(39),h=r(144),p=r(56),f=r(68),d=r(74),g=r(38),y=r(34),v=r(73),m=r(79),_=r(11),b=r(9),S={};S[l.default.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new g.default([t.x,t.y,t.z,t.m],u.default.XYZM):void 0!==t.z?new g.default([t.x,t.y,t.z],u.default.XYZ):void 0!==t.m?new g.default([t.x,t.y,t.m],u.default.XYM):new g.default([t.x,t.y])},S[l.default.LINE_STRING]=function(t){var e=C(t);return new c.default(t.paths[0],e)},S[l.default.POLYGON]=function(t){var e=C(t);return new y.default(t.rings,e)},S[l.default.MULTI_POINT]=function(t){var e=C(t);return new f.default(t.points,e)},S[l.default.MULTI_LINE_STRING]=function(t){var e=C(t);return new p.default(t.paths,e)},S[l.default.MULTI_POLYGON]=function(t){var e=C(t);return new d.default(t.rings,e)};var x={};x[l.default.POINT]=function(t,e){var r,i=t.getCoordinates(),o=t.getLayout();return o===u.default.XYZ?r={x:i[0],y:i[1],z:i[2]}:o===u.default.XYM?r={x:i[0],y:i[1],m:i[2]}:o===u.default.XYZM?r={x:i[0],y:i[1],z:i[2],m:i[3]}:o===u.default.XY?r={x:i[0],y:i[1]}:Object(n.a)(!1,34),r},x[l.default.LINE_STRING]=function(t,e){var r=t,i=T(r);return{hasZ:i.hasZ,hasM:i.hasM,paths:[r.getCoordinates()]}},x[l.default.POLYGON]=function(t,e){var r=t,i=T(r);return{hasZ:i.hasZ,hasM:i.hasM,rings:r.getCoordinates(!1)}},x[l.default.MULTI_POINT]=function(t,e){var r=t,i=T(r);return{hasZ:i.hasZ,hasM:i.hasM,points:r.getCoordinates()}},x[l.default.MULTI_LINE_STRING]=function(t,e){var r=t,i=T(r);return{hasZ:i.hasZ,hasM:i.hasM,paths:r.getCoordinates()}},x[l.default.MULTI_POLYGON]=function(t,e){for(var r=T(t),i=t.getCoordinates(!1),n=[],o=0;o<i.length;o++)for(var s=i[o].length-1;s>=0;s--)n.push(i[o][s]);return{hasZ:r.hasZ,hasM:r.hasM,rings:n}};var O=function(t){function e(e){var r=e||{};t.call(this),this.geometryName_=r.geometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var r=t,n=E(r.geometry,e),o=new i.default;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(n),e&&e.idField&&r.attributes[e.idField]&&o.setId(r.attributes[e.idField]),r.attributes&&o.setProperties(r.attributes),o},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var i=[],n=t.features;r.idField=t.objectIdFieldName;for(var o=0,s=n.length;o<s;++o)i.push(this.readFeatureFromObject(n[o],r));return i}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return E(t,e)},e.prototype.readProjectionFromObject=function(t){if(t.spatialReference&&void 0!==t.spatialReference.wkid){var e=t.spatialReference.wkid;return Object(b.get)("EPSG:"+e)}return null},e.prototype.writeGeometryObject=function(t,e){return P(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},i=t.getGeometry();i&&(r.geometry=P(i,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number(Object(b.get)(e.featureProjection).getCode().split(":").pop())}));var n=t.getProperties();return delete n[t.getGeometryName()],Object(_.isEmpty)(n)?r.attributes={}:r.attributes=n,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],i=0,n=t.length;i<n;++i)r.push(this.writeFeatureObject(t[i],e));return{features:r}},e}(a.a);function E(t,e){if(!t)return null;var r;if("number"==typeof t.x&&"number"==typeof t.y)r=l.default.POINT;else if(t.points)r=l.default.MULTI_POINT;else if(t.paths)r=1===t.paths.length?l.default.LINE_STRING:l.default.MULTI_LINE_STRING;else if(t.rings){var i=t,n=C(i),a=function(t,e){var r,i,n=[],s=[],a=[];for(r=0,i=t.length;r<i;++r){n.length=0,Object(v.deflateCoordinates)(n,0,t[r],e.length),Object(m.a)(n,0,n.length,e.length)?s.push([t[r]]):a.push(t[r])}for(;a.length;){var u=a.shift(),l=!1;for(r=s.length-1;r>=0;r--){var c=s[r][0];if(Object(o.containsExtent)(new h.default(c).getExtent(),new h.default(u).getExtent())){s[r].push(u),l=!0;break}}l||s.push([u.reverse()])}return s}(i.rings,n);1===a.length?(r=l.default.POLYGON,t.rings=a[0]):(r=l.default.MULTI_POLYGON,t.rings=a)}var u=S[r];return Object(s.transformWithOptions)(u(t),!1,e)}function C(t){var e=u.default.XY;return!0===t.hasZ&&!0===t.hasM?e=u.default.XYZM:!0===t.hasZ?e=u.default.XYZ:!0===t.hasM&&(e=u.default.XYM),e}function T(t){var e=t.getLayout();return{hasZ:e===u.default.XYZ||e===u.default.XYZM,hasM:e===u.default.XYM||e===u.default.XYZM}}function P(t,e){return(0,x[t.getType()])(Object(s.transformWithOptions)(t,!0,e),e)}e.default=O},function(t,e,r){"use strict";r.r(e);var i=r(130).default;i.prototype.writeFeatures,i.prototype.writeFeaturesNode,e.default=i},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(15),o=r(33),s=r(117),a=r(2),u=r(20),l=r(5),c=r(39),h=r(56),p=r(38),f=r(9),d=r(0),g=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],y={rte:W,trk:Y,wpt:X},v=Object(d.makeStructureNS)(g,{rte:Object(d.makeArrayPusher)(W),trk:Object(d.makeArrayPusher)(Y),wpt:Object(d.makeArrayPusher)(X)}),m=Object(d.makeStructureNS)(g,{text:Object(d.makeObjectPropertySetter)(a.h,"linkText"),type:Object(d.makeObjectPropertySetter)(a.h,"linkType")}),_=Object(d.makeStructureNS)(g,{rte:Object(d.makeChildAppender)(function(t,e,r){var i=r[0],n=e.getProperties(),s={node:t};s.properties=n;var a=e.getGeometry();if(a.getType()==l.default.LINE_STRING){var u=Object(o.transformWithOptions)(a,!0,i);s.geometryLayout=u.getLayout(),n.rtept=u.getCoordinates()}var c=r[r.length-1].node,h=I[c.namespaceURI],p=Object(d.makeSequence)(n,h);Object(d.pushSerializeAndPop)(s,L,d.OBJECT_PROPERTY_NODE_FACTORY,p,r,h)}),trk:Object(d.makeChildAppender)(function(t,e,r){var i=r[0],n=e.getProperties(),s={node:t};s.properties=n;var a=e.getGeometry();if(a.getType()==l.default.MULTI_LINE_STRING){var u=Object(o.transformWithOptions)(a,!0,i);n.trkseg=u.getLineStrings()}var c=r[r.length-1].node,h=M[c.namespaceURI],p=Object(d.makeSequence)(n,h);Object(d.pushSerializeAndPop)(s,A,d.OBJECT_PROPERTY_NODE_FACTORY,p,r,h)}),wpt:Object(d.makeChildAppender)(function(t,e,r){var i=r[0],n=r[r.length-1];n.properties=e.getProperties();var s=e.getGeometry();if(s.getType()==l.default.POINT){var a=Object(o.transformWithOptions)(s,!0,i);n.geometryLayout=a.getLayout(),H(t,a.getCoordinates(),r)}})}),b=function(t){function e(e){t.call(this);var r=e||{};this.dataProjection=Object(f.get)("EPSG:4326"),this.readExtensions_=r.readExtensions}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var i=t[e];if(this.readExtensions_){var n=i.get("extensionsNode_")||null;this.readExtensions_(i,n)}i.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!Object(n.f)(g,t.namespaceURI))return null;var r=y[t.localName];if(!r)return null;var i=r(t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_([i]),i):null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(n.f)(g,t.namespaceURI))return[];if("gpx"==t.localName){var r=Object(d.pushParseAndPop)([],v,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Object(d.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",d.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(d.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Object(d.pushSerializeAndPop)({node:r},_,G,t,[e]),r},e}(s.a),S=Object(d.makeStructureNS)(g,{name:Object(d.makeObjectPropertySetter)(a.h),cmt:Object(d.makeObjectPropertySetter)(a.h),desc:Object(d.makeObjectPropertySetter)(a.h),src:Object(d.makeObjectPropertySetter)(a.h),link:V,number:Object(d.makeObjectPropertySetter)(a.f),extensions:z,type:Object(d.makeObjectPropertySetter)(a.h),rtept:function(t,e){var r=Object(d.pushParseAndPop)({},x,t,e);if(r){var i=e[e.length-1];B(i.flatCoordinates,i.layoutOptions,t,r)}}}),x=Object(d.makeStructureNS)(g,{ele:Object(d.makeObjectPropertySetter)(a.d),time:Object(d.makeObjectPropertySetter)(a.c)}),O=Object(d.makeStructureNS)(g,{name:Object(d.makeObjectPropertySetter)(a.h),cmt:Object(d.makeObjectPropertySetter)(a.h),desc:Object(d.makeObjectPropertySetter)(a.h),src:Object(d.makeObjectPropertySetter)(a.h),link:V,number:Object(d.makeObjectPropertySetter)(a.f),type:Object(d.makeObjectPropertySetter)(a.h),extensions:z,trkseg:function(t,e){var r=e[e.length-1];Object(d.parseNode)(E,t,e);var i=r.flatCoordinates;r.ends.push(i.length)}}),E=Object(d.makeStructureNS)(g,{trkpt:function(t,e){var r=Object(d.pushParseAndPop)({},C,t,e);if(r){var i=e[e.length-1];B(i.flatCoordinates,i.layoutOptions,t,r)}}}),C=Object(d.makeStructureNS)(g,{ele:Object(d.makeObjectPropertySetter)(a.d),time:Object(d.makeObjectPropertySetter)(a.c)}),T=Object(d.makeStructureNS)(g,{ele:Object(d.makeObjectPropertySetter)(a.d),time:Object(d.makeObjectPropertySetter)(a.c),magvar:Object(d.makeObjectPropertySetter)(a.d),geoidheight:Object(d.makeObjectPropertySetter)(a.d),name:Object(d.makeObjectPropertySetter)(a.h),cmt:Object(d.makeObjectPropertySetter)(a.h),desc:Object(d.makeObjectPropertySetter)(a.h),src:Object(d.makeObjectPropertySetter)(a.h),link:V,sym:Object(d.makeObjectPropertySetter)(a.h),type:Object(d.makeObjectPropertySetter)(a.h),fix:Object(d.makeObjectPropertySetter)(a.h),sat:Object(d.makeObjectPropertySetter)(a.f),hdop:Object(d.makeObjectPropertySetter)(a.d),vdop:Object(d.makeObjectPropertySetter)(a.d),pdop:Object(d.makeObjectPropertySetter)(a.d),ageofdgpsdata:Object(d.makeObjectPropertySetter)(a.d),dgpsid:Object(d.makeObjectPropertySetter)(a.f),extensions:z}),P=["text","type"],w=Object(d.makeStructureNS)(g,{text:Object(d.makeChildAppender)(a.n),type:Object(d.makeChildAppender)(a.n)}),I=Object(d.makeStructureNS)(g,["name","cmt","desc","src","link","number","type","rtept"]),L=Object(d.makeStructureNS)(g,{name:Object(d.makeChildAppender)(a.n),cmt:Object(d.makeChildAppender)(a.n),desc:Object(d.makeChildAppender)(a.n),src:Object(d.makeChildAppender)(a.n),link:Object(d.makeChildAppender)(Z),number:Object(d.makeChildAppender)(a.m),type:Object(d.makeChildAppender)(a.n),rtept:Object(d.makeArraySerializer)(Object(d.makeChildAppender)(H))}),R=Object(d.makeStructureNS)(g,["ele","time"]),M=Object(d.makeStructureNS)(g,["name","cmt","desc","src","link","number","type","trkseg"]),A=Object(d.makeStructureNS)(g,{name:Object(d.makeChildAppender)(a.n),cmt:Object(d.makeChildAppender)(a.n),desc:Object(d.makeChildAppender)(a.n),src:Object(d.makeChildAppender)(a.n),link:Object(d.makeChildAppender)(Z),number:Object(d.makeChildAppender)(a.m),type:Object(d.makeChildAppender)(a.n),trkseg:Object(d.makeArraySerializer)(Object(d.makeChildAppender)(function(t,e,r){var i={node:t};i.geometryLayout=e.getLayout(),i.properties={},Object(d.pushSerializeAndPop)(i,N,j,e.getCoordinates(),r)}))}),j=Object(d.makeSimpleNodeFactory)("trkpt"),N=Object(d.makeStructureNS)(g,{trkpt:Object(d.makeChildAppender)(H)}),F=Object(d.makeStructureNS)(g,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),D=Object(d.makeStructureNS)(g,{ele:Object(d.makeChildAppender)(a.l),time:Object(d.makeChildAppender)(a.k),magvar:Object(d.makeChildAppender)(a.l),geoidheight:Object(d.makeChildAppender)(a.l),name:Object(d.makeChildAppender)(a.n),cmt:Object(d.makeChildAppender)(a.n),desc:Object(d.makeChildAppender)(a.n),src:Object(d.makeChildAppender)(a.n),link:Object(d.makeChildAppender)(Z),sym:Object(d.makeChildAppender)(a.n),type:Object(d.makeChildAppender)(a.n),fix:Object(d.makeChildAppender)(a.n),sat:Object(d.makeChildAppender)(a.m),hdop:Object(d.makeChildAppender)(a.l),vdop:Object(d.makeChildAppender)(a.l),pdop:Object(d.makeChildAppender)(a.l),ageofdgpsdata:Object(d.makeChildAppender)(a.l),dgpsid:Object(d.makeChildAppender)(a.m)}),k={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function G(t,e,r){var i=t.getGeometry();if(i){var n=k[i.getType()];if(n){var o=e[e.length-1].node;return Object(d.createElementNS)(o.namespaceURI,n)}}}function B(t,e,r,i){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,e.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,e.hasM=!0):t.push(0),t}function U(t,e,r){var i=u.default.XY,n=2;if(t.hasZ&&t.hasM?(i=u.default.XYZM,n=4):t.hasZ?(i=u.default.XYZ,n=3):t.hasM&&(i=u.default.XYM,n=3),4!==n){for(var o=0,s=e.length/4;o<s;o++)e[o*n]=e[4*o],e[o*n+1]=e[4*o+1],t.hasZ&&(e[o*n+2]=e[4*o+2]),t.hasM&&(e[o*n+2]=e[4*o+3]);if(e.length=e.length/4*n,r)for(var a=0,l=r.length;a<l;a++)r[a]=r[a]/4*n}return i}function V(t,e){var r=e[e.length-1],i=t.getAttribute("href");null!==i&&(r.link=i),Object(d.parseNode)(m,t,e)}function z(t,e){e[e.length-1].extensionsNode_=t}function W(t,e){var r=e[0],n=Object(d.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},S,t,e);if(n){var s=n.flatCoordinates;delete n.flatCoordinates;var a=n.layoutOptions;delete n.layoutOptions;var u=U(a,s),l=new c.default(s,u);Object(o.transformWithOptions)(l,!1,r);var h=new i.default(l);return h.setProperties(n),h}}function Y(t,e){var r=e[0],n=Object(d.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},O,t,e);if(n){var s=n.flatCoordinates;delete n.flatCoordinates;var a=n.ends;delete n.ends;var u=n.layoutOptions;delete n.layoutOptions;var l=U(u,s,a),c=new h.default(s,l,a);Object(o.transformWithOptions)(c,!1,r);var p=new i.default(c);return p.setProperties(n),p}}function X(t,e){var r=e[0],n=Object(d.pushParseAndPop)({},T,t,e);if(n){var s={},a=B([],s,t,n),u=U(s,a),l=new p.default(a,u);Object(o.transformWithOptions)(l,!1,r);var c=new i.default(l);return c.setProperties(n),c}}function Z(t,e,r){t.setAttribute("href",e);var i=r[r.length-1].properties,n=[i.linkText,i.linkType];Object(d.pushSerializeAndPop)({node:t},w,d.OBJECT_PROPERTY_NODE_FACTORY,n,r,P)}function H(t,e,r){var i=r[r.length-1],n=i.node.namespaceURI,o=i.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case u.default.XYZM:0!==e[3]&&(o.time=e[3]);case u.default.XYZ:0!==e[2]&&(o.ele=e[2]);break;case u.default.XYM:0!==e[2]&&(o.time=e[2])}var s="rtept"==t.nodeName?R[n]:F[n],a=Object(d.makeSequence)(o,s);Object(d.pushSerializeAndPop)({node:t,properties:o},D,d.OBJECT_PROPERTY_NODE_FACTORY,a,r,s)}e.default=b},function(t,e,r){"use strict";r.r(e);var i=r(23),n=r(36),o=r(33),s=r(192),a=r(129),u=r(39),l=r(56),c=r(68),h=r(74),p=r(38),f=r(34),d=r(11),g=r(9),y=r(5),v=function(t){function e(e){var r=e||{};t.call(this),this.dataProjection=Object(g.get)(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(this.defaultFeatureProjection=Object(g.get)(r.featureProjection)),this.geometryName_=r.geometryName,this.extractGeometryName_=r.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var r,i=m((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new n.default;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(i),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties),o},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var i=t.features,n=0,o=i.length;n<o;++n)r.push(this.readFeatureFromObject(i[n],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return m(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=Object(g.get)(r.properties.name):Object(i.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},i=t.getId();void 0!==i&&(r.id=i);var n=t.getGeometry();n&&(r.geometry=_(n,e));var o=t.getProperties();return delete o[t.getGeometryName()],Object(d.isEmpty)(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],i=0,n=t.length;i<n;++i)r.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return _(t,this.adaptOptions(e))},e}(s.a);function m(t,e){if(!t)return null;var r;switch(t.type){case y.default.POINT:r=function(t){return new p.default(t.coordinates)}(t);break;case y.default.LINE_STRING:r=function(t){return new u.default(t.coordinates)}(t);break;case y.default.POLYGON:r=function(t){return new f.default(t.coordinates)}(t);break;case y.default.MULTI_POINT:r=function(t){return new c.default(t.coordinates)}(t);break;case y.default.MULTI_LINE_STRING:r=function(t){return new l.default(t.coordinates)}(t);break;case y.default.MULTI_POLYGON:r=function(t){return new h.default(t.coordinates)}(t);break;case y.default.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map(function(t){return m(t,void 0)});return new a.default(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Object(o.transformWithOptions)(r,!1,e)}function _(t,e){var r,i=(t=Object(o.transformWithOptions)(t,!0,e)).getType();switch(i){case y.default.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case y.default.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case y.default.POLYGON:r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case y.default.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case y.default.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case y.default.MULTI_POLYGON:r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case y.default.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var r=Object(d.assign)({},e);return delete r.featureProjection,_(t,r)})}}(t,e);break;case y.default.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return r}e.default=v},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(33),o=r(194),s=r(20),a=r(39),u=r(9),l={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},c=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,h=/^H.([A-Z]{3}).*?:(.*)/,p=/^HFDTE(\d{2})(\d{2})(\d{2})/,f=/\r\n|\r|\n/,d=function(t){function e(e){t.call(this);var r=e||{};this.dataProjection=Object(u.get)("EPSG:4326"),this.altitudeMode_=r.altitudeMode?r.altitudeMode:l.NONE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var r,o,u=this.altitudeMode_,d=t.split(f),g={},y=[],v=2e3,m=0,_=1,b=-1;for(r=0,o=d.length;r<o;++r){var S=d[r],x=void 0;if("B"==S.charAt(0)){if(x=c.exec(S)){var O=parseInt(x[1],10),E=parseInt(x[2],10),C=parseInt(x[3],10),T=parseInt(x[4],10)+parseInt(x[5],10)/6e4;"S"==x[6]&&(T=-T);var P=parseInt(x[7],10)+parseInt(x[8],10)/6e4;if("W"==x[9]&&(P=-P),y.push(P,T),u!=l.NONE){var w;w=u==l.GPS?parseInt(x[11],10):u==l.BAROMETRIC?parseInt(x[12],10):0,y.push(w)}var I=Date.UTC(v,m,_,O,E,C);I<b&&(I=Date.UTC(v,m,_+1,O,E,C)),y.push(I/1e3),b=I}}else"H"==S.charAt(0)&&((x=p.exec(S))?(_=parseInt(x[1],10),m=parseInt(x[2],10)-1,v=2e3+parseInt(x[3],10)):(x=h.exec(S))&&(g[x[1]]=x[2].trim()))}if(0===y.length)return null;var L=u==l.NONE?s.default.XYM:s.default.XYZM,R=new a.default(y,L),M=new i.default(Object(n.transformWithOptions)(R,!1,e));return M.setProperties(g),M},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(o.a);e.default=d},function(t,e,r){"use strict";r.r(e),r.d(e,"getDefaultFillStyle",function(){return X}),r.d(e,"getDefaultImageStyle",function(){return q}),r.d(e,"getDefaultStrokeStyle",function(){return Q}),r.d(e,"getDefaultTextStyle",function(){return tt}),r.d(e,"getDefaultStyle",function(){return rt}),r.d(e,"getDefaultStyleArray",function(){return nt}),r.d(e,"readFlatCoordinates",function(){return ut});var i,n,o,s,a,u,l,c=r(36),h=r(15),p=r(23),f=r(57),d=r(33),g=r(117),y=r(2),v=r(129),m=r(20),_=r(5),b=r(39),S=r(56),x=r(68),O=r(74),E=r(38),C=r(34),T=r(19),P=r(9),w=r(98),I=r(197),L=r(81),R=r(66),M=r(94),A=r(70),j=r(88),N=r(0),F=["http://www.google.com/kml/ext/2.2"],D=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],k={fraction:L.a.FRACTION,pixels:L.a.PIXELS,insetPixels:L.a.PIXELS},G=Object(N.makeStructureNS)(D,{ExtendedData:kt,Region:Gt,MultiGeometry:Object(N.makeObjectPropertySetter)(It,"geometry"),LineString:Object(N.makeObjectPropertySetter)(Tt,"geometry"),LinearRing:Object(N.makeObjectPropertySetter)(Pt,"geometry"),Point:Object(N.makeObjectPropertySetter)(Lt,"geometry"),Polygon:Object(N.makeObjectPropertySetter)(Mt,"geometry"),Style:Object(N.makeObjectPropertySetter)(jt),StyleMap:function(t,e){var r=pt(t,e);if(r){var i=e[e.length-1];Array.isArray(r)?i.Style=r:"string"==typeof r?i.styleUrl=r:Object(p.a)(!1,38)}},address:Object(N.makeObjectPropertySetter)(y.h),description:Object(N.makeObjectPropertySetter)(y.h),name:Object(N.makeObjectPropertySetter)(y.h),open:Object(N.makeObjectPropertySetter)(y.a),phoneNumber:Object(N.makeObjectPropertySetter)(y.h),styleUrl:Object(N.makeObjectPropertySetter)(lt),visibility:Object(N.makeObjectPropertySetter)(y.a)},Object(N.makeStructureNS)(F,{MultiTrack:Object(N.makeObjectPropertySetter)(function(t,e){var r=Object(N.pushParseAndPop)([],_t,t,e);if(r)return new S.default(r)},"geometry"),Track:Object(N.makeObjectPropertySetter)(St,"geometry")})),B=Object(N.makeStructureNS)(D,{ExtendedData:kt,Region:Gt,Link:function(t,e){Object(N.parseNode)(U,t,e)},address:Object(N.makeObjectPropertySetter)(y.h),description:Object(N.makeObjectPropertySetter)(y.h),name:Object(N.makeObjectPropertySetter)(y.h),open:Object(N.makeObjectPropertySetter)(y.a),phoneNumber:Object(N.makeObjectPropertySetter)(y.h),visibility:Object(N.makeObjectPropertySetter)(y.a)}),U=Object(N.makeStructureNS)(D,{href:Object(N.makeObjectPropertySetter)(lt)}),V=Object(N.makeStructureNS)(D,{LatLonAltBox:function(t,e){var r=Object(N.pushParseAndPop)({},Vt,t,e);if(r){var i=e[e.length-1],n=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];i.extent=n,i.altitudeMode=r.altitudeMode,i.minAltitude=parseFloat(r.minAltitude),i.maxAltitude=parseFloat(r.maxAltitude)}},Lod:function(t,e){var r=Object(N.pushParseAndPop)({},zt,t,e);if(r){var i=e[e.length-1];i.minLodPixels=parseFloat(r.minLodPixels),i.maxLodPixels=parseFloat(r.maxLodPixels),i.minFadeExtent=parseFloat(r.minFadeExtent),i.maxFadeExtent=parseFloat(r.maxFadeExtent)}}}),z=Object(N.makeStructureNS)(D,["Document","Placemark"]),W=Object(N.makeStructureNS)(D,{Document:Object(N.makeChildAppender)(function(t,e,r){var i={node:t};Object(N.pushSerializeAndPop)(i,Ht,qt,e,r,void 0,this)}),Placemark:Object(N.makeChildAppender)(_e)}),Y=null;function X(){return Y}var Z,H=null;function q(){return H}var K,J=null;function Q(){return J}var $=null;function tt(){return $}var et=null;function rt(){return et}var it=null;function nt(){return it}var ot=function(t){function e(e){t.call(this);var r=e||{};it||(i=[255,255,255,1],Y=new w.default({color:i}),n=[20,2],o=L.a.PIXELS,s=L.a.PIXELS,a=[64,64],u="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",l=.5,H=new I.default({anchor:n,anchorOrigin:R.a.BOTTOM_LEFT,anchorXUnits:o,anchorYUnits:s,crossOrigin:"anonymous",rotation:0,scale:l,size:a,src:u}),Z="NO_IMAGE",J=new M.default({color:i,width:1}),K=new M.default({color:[51,51,51,1],width:2}),$=new j.default({font:"bold 16px Helvetica",fill:Y,stroke:K,scale:.8}),et=new A.default({fill:Y,image:H,text:$,stroke:J,zIndex:0}),it=[et]),this.dataProjection=Object(P.get)("EPSG:4326"),this.defaultStyle_=r.defaultStyle?r.defaultStyle:it,this.extractStyles_=void 0===r.extractStyles||r.extractStyles,this.writeStyles_=void 0===r.writeStyles||r.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===r.showPointNames||r.showPointNames}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readDocumentOrFolder_=function(t,e){var r=Object(N.makeStructureNS)(D,{Document:Object(N.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:Object(N.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:Object(N.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});return Object(N.pushParseAndPop)([],r,t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var r=Object(N.pushParseAndPop)({geometry:null},G,t,e);if(r){var i=new c.default,n=t.getAttribute("id");null!==n&&i.setId(n);var o=e[0],s=r.geometry;if(s&&Object(d.transformWithOptions)(s,!1,o),i.setGeometry(s),delete r.geometry,this.extractStyles_){var a=function(t,e,r,i,n){return function(o,s){var a,u=n,l="";if(u){var c=o.getGeometry();c&&(u=c.getType()===_.default.POINT)}if(u&&(l=o.get("name"),u=u&&!!l),t)return u?(a=st(t[0],l),t.concat(a)):t;if(e){var h=function t(e,r,i){return Array.isArray(e)?e:"string"==typeof e?(!(e in i)&&"#"+e in i&&(e="#"+e),t(i[e],r,i)):r}(e,r,i);return u?(a=st(h[0],l),h.concat(a)):h}return u?(a=st(r[0],l),r.concat(a)):r}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(a)}return delete r.Style,i.setProperties(r),i}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var i=jt(t,e);if(i){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[n]=i}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var i=pt(t,e);if(i){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[n]=i}}},e.prototype.readFeatureFromNode=function(t,e){return Object(h.f)(D,t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(h.f)(D,t.namespaceURI))return[];var r,i=t.localName;if("Document"==i||"Folder"==i)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==i){var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==i){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,e);s&&Object(h.c)(r,s)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Object(N.parse)(t);return this.readNameFromDocument(e)}return Object(N.isDocument)(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(Object(h.f)(D,e.namespaceURI)&&"name"==e.localName)return Object(y.h)(e);for(var r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;if(Object(h.f)(D,r.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var n=this.readNameFromNode(r);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=Object(N.parse)(t);Object(h.c)(e,this.readNetworkLinksFromDocument(r))}else Object(N.isDocument)(t)?Object(h.c)(e,this.readNetworkLinksFromDocument(t)):Object(h.c)(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(Object(h.f)(D,r.namespaceURI)&&"NetworkLink"==r.localName){var i=Object(N.pushParseAndPop)({},B,r,[]);e.push(i)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!Object(h.f)(D,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||Object(h.c)(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=Object(N.parse)(t);Object(h.c)(e,this.readRegionFromDocument(r))}else Object(N.isDocument)(t)?Object(h.c)(e,this.readRegionFromDocument(t)):Object(h.c)(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(Object(h.f)(D,r.namespaceURI)&&"Region"==r.localName){var i=Object(N.pushParseAndPop)({},V,r,[]);e.push(i)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!Object(h.f)(D,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||Object(h.c)(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=Object(N.createElementNS)(D[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",F[0]),r.setAttributeNS(i,"xmlns:xsi",N.XML_SCHEMA_INSTANCE_URI),r.setAttributeNS(N.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var n={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=z[r.namespaceURI],a=Object(N.makeSequence)(o,s);return Object(N.pushSerializeAndPop)(n,W,N.OBJECT_PROPERTY_NODE_FACTORY,a,[e],s,this),r},e}(g.a);function st(t,e){var r=null,i=[0,0],n="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=a),2==o.length){var s=t.getImage().getScale();i[0]=s*o[0]/2,i[1]=-s*o[1]/2,n="left"}}if(null!==t.getText()){var u=t.getText();(r=u.clone()).setFont(u.getFont()||$.getFont()),r.setScale(u.getScale()||$.getScale()),r.setFill(u.getFill()||$.getFill()),r.setStroke(u.getStroke()||K)}else r=$.clone();return r.setText(e),r.setOffsetX(i[0]),r.setOffsetY(i[1]),r.setTextAlign(n),new A.default({text:r})}function at(t){var e=Object(N.getAllTextContent)(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var i=r[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function ut(t){for(var e,r=Object(N.getAllTextContent)(t,!1),i=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(r);){var o=parseFloat(e[1]),s=parseFloat(e[2]),a=e[3]?parseFloat(e[3]):0;i.push(o,s,a),r=r.substr(e[0].length)}if(""===r)return i}function lt(t){var e=Object(N.getAllTextContent)(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function ct(t){return Object(y.d)(t)}var ht=Object(N.makeStructureNS)(D,{Pair:function(t,e){var r=Object(N.pushParseAndPop)({},Bt,t,e);if(r){var i=r.key;if(i&&"normal"==i){var n=r.styleUrl;n&&(e[e.length-1]=n);var o=r.Style;o&&(e[e.length-1]=o)}}}});function pt(t,e){return Object(N.pushParseAndPop)(void 0,ht,t,e)}var ft=Object(N.makeStructureNS)(D,{Icon:Object(N.makeObjectPropertySetter)(function(t,e){return Object(N.pushParseAndPop)({},xt,t,e)||null}),heading:Object(N.makeObjectPropertySetter)(y.d),hotSpot:Object(N.makeObjectPropertySetter)(function(t){var e,r=t.getAttribute("xunits"),i=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==i?R.a.BOTTOM_LEFT:R.a.TOP_LEFT:"insetPixels"!==i?R.a.BOTTOM_RIGHT:R.a.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:k[r],y:parseFloat(t.getAttribute("y")),yunits:k[i],origin:e}}),scale:Object(N.makeObjectPropertySetter)(ct)}),dt=Object(N.makeStructureNS)(D,{color:Object(N.makeObjectPropertySetter)(at),scale:Object(N.makeObjectPropertySetter)(ct)}),gt=Object(N.makeStructureNS)(D,{color:Object(N.makeObjectPropertySetter)(at),width:Object(N.makeObjectPropertySetter)(y.d)}),yt=Object(N.makeStructureNS)(D,{color:Object(N.makeObjectPropertySetter)(at),fill:Object(N.makeObjectPropertySetter)(y.a),outline:Object(N.makeObjectPropertySetter)(y.a)}),vt=Object(N.makeStructureNS)(D,{coordinates:Object(N.makeReplacer)(ut)});function mt(t,e){return Object(N.pushParseAndPop)(null,vt,t,e)}var _t=Object(N.makeStructureNS)(F,{Track:Object(N.makeArrayPusher)(St)}),bt=Object(N.makeStructureNS)(D,{when:function(t,e){var r=e[e.length-1].whens,i=Object(N.getAllTextContent)(t,!1),n=Date.parse(i);r.push(isNaN(n)?0:n)}},Object(N.makeStructureNS)(F,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,i=Object(N.getAllTextContent)(t,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(n){var o=parseFloat(n[1]),s=parseFloat(n[2]),a=parseFloat(n[3]);r.push(o,s,a,0)}else r.push(0,0,0,0)}}));function St(t,e){var r=Object(N.pushParseAndPop)({flatCoordinates:[],whens:[]},bt,t,e);if(r){for(var i=r.flatCoordinates,n=r.whens,o=0,s=Math.min(i.length,n.length);o<s;++o)i[4*o+3]=n[o];return new b.default(i,m.default.XYZM)}}var xt=Object(N.makeStructureNS)(D,{href:Object(N.makeObjectPropertySetter)(lt)},Object(N.makeStructureNS)(F,{x:Object(N.makeObjectPropertySetter)(y.d),y:Object(N.makeObjectPropertySetter)(y.d),w:Object(N.makeObjectPropertySetter)(y.d),h:Object(N.makeObjectPropertySetter)(y.d)})),Ot=Object(N.makeStructureNS)(D,{coordinates:Object(N.makeReplacer)(ut)});function Et(t,e){return Object(N.pushParseAndPop)(null,Ot,t,e)}var Ct=Object(N.makeStructureNS)(D,{extrude:Object(N.makeObjectPropertySetter)(y.a),tessellate:Object(N.makeObjectPropertySetter)(y.a),altitudeMode:Object(N.makeObjectPropertySetter)(y.h)});function Tt(t,e){var r=Object(N.pushParseAndPop)({},Ct,t,e),i=Et(t,e);if(i){var n=new b.default(i,m.default.XYZ);return n.setProperties(r),n}}function Pt(t,e){var r=Object(N.pushParseAndPop)({},Ct,t,e),i=Et(t,e);if(i){var n=new C.default(i,m.default.XYZ,[i.length]);return n.setProperties(r),n}}var wt=Object(N.makeStructureNS)(D,{LineString:Object(N.makeArrayPusher)(Tt),LinearRing:Object(N.makeArrayPusher)(Pt),MultiGeometry:Object(N.makeArrayPusher)(It),Point:Object(N.makeArrayPusher)(Lt),Polygon:Object(N.makeArrayPusher)(Mt)});function It(t,e){var r,i=Object(N.pushParseAndPop)([],wt,t,e);if(!i)return null;if(0===i.length)return new v.default(i);for(var n,o,s,a=!0,u=i[0].getType(),l=1,c=i.length;l<c;++l)if((n=i[l]).getType()!=u){a=!1;break}if(a)if(u==_.default.POINT){var f=i[0];o=f.getLayout(),s=f.getFlatCoordinates();for(var d=1,g=i.length;d<g;++d)n=i[d],Object(h.c)(s,n.getFlatCoordinates());Nt(r=new x.default(s,o),i)}else u==_.default.LINE_STRING?Nt(r=new S.default(i),i):u==_.default.POLYGON?Nt(r=new O.default(i),i):u==_.default.GEOMETRY_COLLECTION?r=new v.default(i):Object(p.a)(!1,37);else r=new v.default(i);return r}function Lt(t,e){var r=Object(N.pushParseAndPop)({},Ct,t,e),i=Et(t,e);if(i){var n=new E.default(i,m.default.XYZ);return n.setProperties(r),n}}var Rt=Object(N.makeStructureNS)(D,{innerBoundaryIs:function(t,e){var r=Object(N.pushParseAndPop)(void 0,Wt,t,e);r&&e[e.length-1].push(r)},outerBoundaryIs:function(t,e){var r=Object(N.pushParseAndPop)(void 0,Yt,t,e);r&&(e[e.length-1][0]=r)}});function Mt(t,e){var r=Object(N.pushParseAndPop)({},Ct,t,e),i=Object(N.pushParseAndPop)([null],Rt,t,e);if(i&&i[0]){for(var n=i[0],o=[n.length],s=1,a=i.length;s<a;++s)Object(h.c)(n,i[s]),o.push(n.length);var u=new C.default(n,m.default.XYZ,o);return u.setProperties(r),u}}var At=Object(N.makeStructureNS)(D,{IconStyle:function(t,e){var r=Object(N.pushParseAndPop)({},ft,t,e);if(r){var i,c,h,p,f=e[e.length-1],d="Icon"in r?r.Icon:{},g=!("Icon"in r)||Object.keys(d).length>0,y=d.href;y?i=y:g&&(i=u);var v,m=R.a.BOTTOM_LEFT,_=r.hotSpot;_?(c=[_.x,_.y],h=_.xunits,p=_.yunits,m=_.origin):i===u?(c=n,h=o,p=s):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(i)&&(c=[.5,0],h=L.a.FRACTION,p=L.a.FRACTION);var b,S=d.x,x=d.y;void 0!==S&&void 0!==x&&(v=[S,x]);var O,E=d.w,C=d.h;void 0!==E&&void 0!==C&&(b=[E,C]);var P=r.heading;void 0!==P&&(O=Object(T.j)(P));var w=r.scale;if(g){i==u&&(b=a,void 0===w&&(w=l));var M=new I.default({anchor:c,anchorOrigin:m,anchorXUnits:h,anchorYUnits:p,crossOrigin:"anonymous",offset:v,offsetOrigin:R.a.BOTTOM_LEFT,rotation:O,scale:w,size:b,src:i});f.imageStyle=M}else f.imageStyle=Z}},LabelStyle:function(t,e){var r=Object(N.pushParseAndPop)({},dt,t,e);if(r){var n=e[e.length-1],o=new j.default({fill:new w.default({color:"color"in r?r.color:i}),scale:r.scale});n.textStyle=o}},LineStyle:function(t,e){var r=Object(N.pushParseAndPop)({},gt,t,e);if(r){var n=e[e.length-1],o=new M.default({color:"color"in r?r.color:i,width:"width"in r?r.width:1});n.strokeStyle=o}},PolyStyle:function(t,e){var r=Object(N.pushParseAndPop)({},yt,t,e);if(r){var n=e[e.length-1],o=new w.default({color:"color"in r?r.color:i});n.fillStyle=o;var s=r.fill;void 0!==s&&(n.fill=s);var a=r.outline;void 0!==a&&(n.outline=a)}}});function jt(t,e){var r=Object(N.pushParseAndPop)({},At,t,e);if(!r)return null;var i,n="fillStyle"in r?r.fillStyle:Y,o=r.fill;void 0===o||o||(n=null),"imageStyle"in r?r.imageStyle!=Z&&(i=r.imageStyle):i=H;var s="textStyle"in r?r.textStyle:$,a="strokeStyle"in r?r.strokeStyle:J,u=r.outline;return void 0===u||u||(a=null),[new A.default({fill:n,image:i,stroke:a,text:s,zIndex:void 0})]}function Nt(t,e){var r,i,n,o=e.length,s=new Array(e.length),a=new Array(e.length),u=new Array(e.length);r=i=n=!1;for(var l=0;l<o;++l){var c=e[l];s[l]=c.get("extrude"),a[l]=c.get("tessellate"),u[l]=c.get("altitudeMode"),r=r||void 0!==s[l],i=i||void 0!==a[l],n=n||u[l]}r&&t.set("extrude",s),i&&t.set("tessellate",a),n&&t.set("altitudeMode",u)}var Ft=Object(N.makeStructureNS)(D,{displayName:Object(N.makeObjectPropertySetter)(y.h),value:Object(N.makeObjectPropertySetter)(y.h)}),Dt=Object(N.makeStructureNS)(D,{Data:function(t,e){var r=t.getAttribute("name");Object(N.parseNode)(Ft,t,e);var i=e[e.length-1];null!==r?i[r]=i.value:null!==i.displayName&&(i[i.displayName]=i.value),delete i.value},SchemaData:function(t,e){Object(N.parseNode)(Ut,t,e)}});function kt(t,e){Object(N.parseNode)(Dt,t,e)}function Gt(t,e){Object(N.parseNode)(V,t,e)}var Bt=Object(N.makeStructureNS)(D,{Style:Object(N.makeObjectPropertySetter)(jt),key:Object(N.makeObjectPropertySetter)(y.h),styleUrl:Object(N.makeObjectPropertySetter)(lt)}),Ut=Object(N.makeStructureNS)(D,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var i=Object(y.h)(t);e[e.length-1][r]=i}}}),Vt=Object(N.makeStructureNS)(D,{altitudeMode:Object(N.makeObjectPropertySetter)(y.h),minAltitude:Object(N.makeObjectPropertySetter)(y.d),maxAltitude:Object(N.makeObjectPropertySetter)(y.d),north:Object(N.makeObjectPropertySetter)(y.d),south:Object(N.makeObjectPropertySetter)(y.d),east:Object(N.makeObjectPropertySetter)(y.d),west:Object(N.makeObjectPropertySetter)(y.d)}),zt=Object(N.makeStructureNS)(D,{minLodPixels:Object(N.makeObjectPropertySetter)(y.d),maxLodPixels:Object(N.makeObjectPropertySetter)(y.d),minFadeExtent:Object(N.makeObjectPropertySetter)(y.d),maxFadeExtent:Object(N.makeObjectPropertySetter)(y.d)}),Wt=Object(N.makeStructureNS)(D,{LinearRing:Object(N.makeReplacer)(mt)}),Yt=Object(N.makeStructureNS)(D,{LinearRing:Object(N.makeReplacer)(mt)});function Xt(t,e){for(var r=Object(f.asArray)(e),i=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],n=0;n<4;++n){var o=Math.floor(i[n]).toString(16);i[n]=1==o.length?"0"+o:o}Object(y.n)(t,i.join(""))}var Zt=Object(N.makeStructureNS)(D,{Data:Object(N.makeChildAppender)(function(t,e,r){t.setAttribute("name",e.name);var i={node:t},n=e.value;"object"==typeof n?(null!==n&&n.displayName&&Object(N.pushSerializeAndPop)(i,Zt,N.OBJECT_PROPERTY_NODE_FACTORY,[n.displayName],r,["displayName"]),null!==n&&n.value&&Object(N.pushSerializeAndPop)(i,Zt,N.OBJECT_PROPERTY_NODE_FACTORY,[n.value],r,["value"])):Object(N.pushSerializeAndPop)(i,Zt,N.OBJECT_PROPERTY_NODE_FACTORY,[n],r,["value"])}),value:Object(N.makeChildAppender)(function(t,e){Object(y.n)(t,e)}),displayName:Object(N.makeChildAppender)(function(t,e){Object(y.j)(t,e)})}),Ht=Object(N.makeStructureNS)(D,{Placemark:Object(N.makeChildAppender)(_e)}),qt=function(t,e,r){var i=e[e.length-1].node;return Object(N.createElementNS)(i.namespaceURI,"Placemark")},Kt=Object(N.makeSimpleNodeFactory)("Data"),Jt=Object(N.makeStructureNS)(D,["href"],Object(N.makeStructureNS)(F,["x","y","w","h"])),Qt=Object(N.makeStructureNS)(D,{href:Object(N.makeChildAppender)(y.n)},Object(N.makeStructureNS)(F,{x:Object(N.makeChildAppender)(y.l),y:Object(N.makeChildAppender)(y.l),w:Object(N.makeChildAppender)(y.l),h:Object(N.makeChildAppender)(y.l)})),$t=function(t,e,r){return Object(N.createElementNS)(F[0],"gx:"+r)},te=Object(N.makeStructureNS)(D,["scale","heading","Icon","hotSpot"]),ee=Object(N.makeStructureNS)(D,{Icon:Object(N.makeChildAppender)(function(t,e,r){var i={node:t},n=r[r.length-1].node,o=Jt[n.namespaceURI],s=Object(N.makeSequence)(e,o);Object(N.pushSerializeAndPop)(i,Qt,N.OBJECT_PROPERTY_NODE_FACTORY,s,r,o),o=Jt[F[0]],s=Object(N.makeSequence)(e,o),Object(N.pushSerializeAndPop)(i,Qt,$t,s,r,o)}),heading:Object(N.makeChildAppender)(y.l),hotSpot:Object(N.makeChildAppender)(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:Object(N.makeChildAppender)(Ie)}),re=Object(N.makeStructureNS)(D,["color","scale"]),ie=Object(N.makeStructureNS)(D,{color:Object(N.makeChildAppender)(Xt),scale:Object(N.makeChildAppender)(Ie)}),ne=Object(N.makeStructureNS)(D,["color","width"]),oe=Object(N.makeStructureNS)(D,{color:Object(N.makeChildAppender)(Xt),width:Object(N.makeChildAppender)(y.l)}),se={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ae=function(t,e,r){if(t){var i=e[e.length-1].node;return Object(N.createElementNS)(i.namespaceURI,se[t.getType()])}},ue=Object(N.makeSimpleNodeFactory)("Point"),le=Object(N.makeSimpleNodeFactory)("LineString"),ce=Object(N.makeSimpleNodeFactory)("LinearRing"),he=Object(N.makeSimpleNodeFactory)("Polygon"),pe=Object(N.makeStructureNS)(D,{LineString:Object(N.makeChildAppender)(xe),Point:Object(N.makeChildAppender)(xe),Polygon:Object(N.makeChildAppender)(Te),GeometryCollection:Object(N.makeChildAppender)(fe)});function fe(t,e,r){var i,n,o={node:t},s=e.getType();s==_.default.GEOMETRY_COLLECTION?(i=e.getGeometries(),n=ae):s==_.default.MULTI_POINT?(i=e.getPoints(),n=ue):s==_.default.MULTI_LINE_STRING?(i=e.getLineStrings(),n=le):s==_.default.MULTI_POLYGON?(i=e.getPolygons(),n=he):Object(p.a)(!1,39),Object(N.pushSerializeAndPop)(o,pe,n,i,r)}var de=Object(N.makeStructureNS)(D,{LinearRing:Object(N.makeChildAppender)(xe)});function ge(t,e,r){var i={node:t};Object(N.pushSerializeAndPop)(i,de,ce,[e],r)}var ye=Object(N.makeStructureNS)(D,{ExtendedData:Object(N.makeChildAppender)(function(t,e,r){for(var i={node:t},n=e.names,o=e.values,s=n.length,a=0;a<s;a++)Object(N.pushSerializeAndPop)(i,Zt,Kt,[{name:n[a],value:o[a]}],r)}),MultiGeometry:Object(N.makeChildAppender)(fe),LineString:Object(N.makeChildAppender)(xe),LinearRing:Object(N.makeChildAppender)(xe),Point:Object(N.makeChildAppender)(xe),Polygon:Object(N.makeChildAppender)(Te),Style:Object(N.makeChildAppender)(function(t,e,r){var i={node:t},n={},o=e.getFill(),s=e.getStroke(),a=e.getImage(),u=e.getText();a&&"function"==typeof a.getSrc&&(n.IconStyle=a),u&&(n.LabelStyle=u),s&&(n.LineStyle=s),o&&(n.PolyStyle=o);var l=r[r.length-1].node,c=Le[l.namespaceURI],h=Object(N.makeSequence)(n,c);Object(N.pushSerializeAndPop)(i,Re,N.OBJECT_PROPERTY_NODE_FACTORY,h,r,c)}),address:Object(N.makeChildAppender)(y.n),description:Object(N.makeChildAppender)(y.n),name:Object(N.makeChildAppender)(y.n),open:Object(N.makeChildAppender)(y.i),phoneNumber:Object(N.makeChildAppender)(y.n),styleUrl:Object(N.makeChildAppender)(y.n),visibility:Object(N.makeChildAppender)(y.i)}),ve=Object(N.makeStructureNS)(D,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),me=Object(N.makeSimpleNodeFactory)("ExtendedData");function _e(t,e,r){var i={node:t};e.getId()&&t.setAttribute("id",e.getId());var n=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var s=Object.keys(n||{}).sort().filter(function(t){return!o[t]});if(s.length>0){var a={names:s,values:Object(N.makeSequence)(n,s)};Object(N.pushSerializeAndPop)(i,ye,me,[a],r)}var u=e.getStyleFunction();if(u){var l=u(e,0);if(l){var c=Array.isArray(l)?l[0]:l;this.writeStyles_&&(n.Style=c);var h=c.getText();h&&(n.name=h.getText())}}var p=r[r.length-1].node,f=ve[p.namespaceURI],g=Object(N.makeSequence)(n,f);Object(N.pushSerializeAndPop)(i,ye,N.OBJECT_PROPERTY_NODE_FACTORY,g,r,f);var y=r[0],v=e.getGeometry();v&&(v=Object(d.transformWithOptions)(v,!0,y)),Object(N.pushSerializeAndPop)(i,ye,ae,[v],r)}var be=Object(N.makeStructureNS)(D,["extrude","tessellate","altitudeMode","coordinates"]),Se=Object(N.makeStructureNS)(D,{extrude:Object(N.makeChildAppender)(y.i),tessellate:Object(N.makeChildAppender)(y.i),altitudeMode:Object(N.makeChildAppender)(y.n),coordinates:Object(N.makeChildAppender)(function(t,e,r){var i,n=r[r.length-1],o=n.layout,s=n.stride;o==m.default.XY||o==m.default.XYM?i=2:o==m.default.XYZ||o==m.default.XYZM?i=3:Object(p.a)(!1,34);var a=e.length,u="";if(a>0){u+=e[0];for(var l=1;l<i;++l)u+=","+e[l];for(var c=s;c<a;c+=s){u+=" "+e[c];for(var h=1;h<i;++h)u+=","+e[c+h]}}Object(y.n)(t,u)})});function xe(t,e,r){var i=e.getFlatCoordinates(),n={node:t};n.layout=e.getLayout(),n.stride=e.getStride();var o=e.getProperties();o.coordinates=i;var s=r[r.length-1].node,a=be[s.namespaceURI],u=Object(N.makeSequence)(o,a);Object(N.pushSerializeAndPop)(n,Se,N.OBJECT_PROPERTY_NODE_FACTORY,u,r,a)}var Oe=Object(N.makeStructureNS)(D,{outerBoundaryIs:Object(N.makeChildAppender)(ge),innerBoundaryIs:Object(N.makeChildAppender)(ge)}),Ee=Object(N.makeSimpleNodeFactory)("innerBoundaryIs"),Ce=Object(N.makeSimpleNodeFactory)("outerBoundaryIs");function Te(t,e,r){var i=e.getLinearRings(),n=i.shift(),o={node:t};Object(N.pushSerializeAndPop)(o,Oe,Ee,i,r),Object(N.pushSerializeAndPop)(o,Oe,Ce,[n],r)}var Pe=Object(N.makeStructureNS)(D,{color:Object(N.makeChildAppender)(Xt)}),we=Object(N.makeSimpleNodeFactory)("color");function Ie(t,e){Object(y.l)(t,Math.round(1e6*e)/1e6)}var Le=Object(N.makeStructureNS)(D,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Re=Object(N.makeStructureNS)(D,{IconStyle:Object(N.makeChildAppender)(function(t,e,r){var i={node:t},n={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),u={href:o};if(s){u.w=s[0],u.h=s[1];var l=e.getAnchor(),c=e.getOrigin();if(c&&a&&0!==c[0]&&c[1]!==s[1]&&(u.x=c[0],u.y=a[1]-(c[1]+s[1])),l&&(l[0]!==s[0]/2||l[1]!==s[1]/2)){var h={x:l[0],xunits:L.a.PIXELS,y:s[1]-l[1],yunits:L.a.PIXELS};n.hotSpot=h}}n.Icon=u;var p=e.getScale();1!==p&&(n.scale=p);var f=e.getRotation();0!==f&&(n.heading=f);var d=r[r.length-1].node,g=te[d.namespaceURI],y=Object(N.makeSequence)(n,g);Object(N.pushSerializeAndPop)(i,ee,N.OBJECT_PROPERTY_NODE_FACTORY,y,r,g)}),LabelStyle:Object(N.makeChildAppender)(function(t,e,r){var i={node:t},n={},o=e.getFill();o&&(n.color=o.getColor());var s=e.getScale();s&&1!==s&&(n.scale=s);var a=r[r.length-1].node,u=re[a.namespaceURI],l=Object(N.makeSequence)(n,u);Object(N.pushSerializeAndPop)(i,ie,N.OBJECT_PROPERTY_NODE_FACTORY,l,r,u)}),LineStyle:Object(N.makeChildAppender)(function(t,e,r){var i={node:t},n={color:e.getColor(),width:e.getWidth()},o=r[r.length-1].node,s=ne[o.namespaceURI],a=Object(N.makeSequence)(n,s);Object(N.pushSerializeAndPop)(i,oe,N.OBJECT_PROPERTY_NODE_FACTORY,a,r,s)}),PolyStyle:Object(N.makeChildAppender)(function(t,e,r){var i={node:t};Object(N.pushSerializeAndPop)(i,Pe,we,[e.getColor()],r)})});e.default=ot},function(t,e,r){"use strict";r.r(e);var i=r(23),n=r(465),o=r.n(n),s=r(33),a=r(104),u=r(20),l=r(5),c=r(39),h=r(56),p=r(68),f=r(74),d=r(38),g=r(34),y=r(79),v=r(126),m=r(49),_=r(272),b=function(t){function e(e){t.call(this);var r=e||{};this.dataProjection=new v.default({code:"",units:m.default.TILE_PIXELS}),this.featureClass_=r.featureClass?r.featureClass:_.default,this.geometryName_=r.geometryName,this.layerName_=r.layerName?r.layerName:"layer",this.layers_=r.layers?r.layers:null,this.extent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,s=1,a=0,u=0,l=0,c=0,h=0;t.pos<o;){if(!a){var p=t.readVarint();s=7&p,a=p>>3}a--,1===s||2===s?(u+=t.readSVarint(),l+=t.readSVarint(),1===s&&c>h&&(n.push(c),h=c),r.push(u,l),c+=2):7===s?c>h&&(r.push(r[h],r[h+1]),c+=2):Object(i.a)(!1,59)}c>h&&(n.push(c),h=c)},e.prototype.createFeature_=function(t,e,r){var i,n=e.type;if(0===n)return null;var o=e.id,a=e.properties;a[this.layerName_]=e.layer.name;var v=[],m=[];this.readRawGeometry_(t,e,v,m);var b=function(t,e){var r;return 1===t?r=1===e?l.default.POINT:l.default.MULTI_POINT:2===t?r=1===e?l.default.LINE_STRING:l.default.MULTI_LINE_STRING:3===t&&(r=l.default.POLYGON),r}(n,m.length);if(this.featureClass_===_.default)i=new this.featureClass_(b,v,m,a,o);else{var S;if(b==l.default.POLYGON){for(var x=[],O=0,E=0,C=0,T=m.length;C<T;++C){var P=m[C];Object(y.a)(v,O,P,2)||(x.push(m.slice(E,C)),E=C),O=P}S=x.length>1?new f.default(v,u.default.XY,x):new g.default(v,u.default.XY,m)}else S=b===l.default.POINT?new d.default(v,u.default.XY):b===l.default.LINE_STRING?new c.default(v,u.default.XY):b===l.default.POLYGON?new g.default(v,u.default.XY,m):b===l.default.MULTI_POINT?new p.default(v,u.default.XY):b===l.default.MULTI_LINE_STRING?new h.default(v,u.default.XY,m):null;i=new(0,this.featureClass_),this.geometryName_&&i.setGeometryName(this.geometryName_);var w=Object(s.transformWithOptions)(S,!1,this.adaptOptions(r));i.setGeometry(w),i.setId(o),i.setProperties(a)}return i},e.prototype.getLastExtent=function(){return this.extent_},e.prototype.getType=function(){return a.a.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var r=this.layers_,i=new o.a(t),n=i.readFields(S,{}),s=[];for(var a in n)if(!r||-1!=r.indexOf(a)){for(var u=n[a],l=0,c=u.length;l<c;++l){var h=E(i,u,l);s.push(this.createFeature_(i,h))}this.extent_=u?[0,0,u.extent,u.extent]:null}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(s.default);function S(t,e,r){if(3===t){var i={keys:[],values:[],features:[]},n=r.readVarint()+r.pos;r.readFields(x,i,n),i.length=i.features.length,i.length&&(e[i.name]=i)}}function x(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var i=null,n=r.readVarint()+r.pos;r.pos<n;)i=1==(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(i)}}function O(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var i=r.readVarint()+r.pos;r.pos<i;){var n=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[n]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function E(t,e,r){t.pos=e.features[r];var i=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(O,n,i),n}e.default=b},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,i,n){var o,s,a=8*n-i-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?n-1:0,p=r?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=l}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var s,a,u,l=8*o-n-1,c=(1<<l)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,n),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[r+f]=255&a,f+=d,a/=256,n-=8);for(s=s<<n|a,l+=n;l>0;t[r+f]=255&s,f+=d,s/=256,l-=8);t[r+f-d]|=128*g}},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(36),o=r(33),s=r(117),a=r(20),u=r(39),l=r(38),c=r(34),h=r(11),p=r(9),f=r(0),d=[null],g=Object(f.makeStructureNS)(d,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:_}),y=Object(f.makeStructureNS)(d,{node:function(t,e){var r=e[0],i=e[e.length-1],s=t.getAttribute("id"),a=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];i.nodes[s]=a;var u=Object(f.pushParseAndPop)({tags:{}},m,t,e);if(!Object(h.isEmpty)(u.tags)){var c=new l.default(a);Object(o.transformWithOptions)(c,!1,r);var p=new n.default(c);p.setId(s),p.setProperties(u.tags),i.features.push(p)}},way:function(t,e){var r=t.getAttribute("id"),i=Object(f.pushParseAndPop)({id:r,ndrefs:[],tags:{}},g,t,e);e[e.length-1].ways.push(i)}}),v=function(t){function e(){t.call(this),this.dataProjection=Object(p.get)("EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var s=Object(f.pushParseAndPop)({nodes:{},ways:[],features:[]},y,t,[r]),l=0;l<s.ways.length;l++){for(var h=s.ways[l],p=[],d=0,g=h.ndrefs.length;d<g;d++){var v=s.nodes[h.ndrefs[d]];Object(i.c)(p,v)}var m;m=h.ndrefs[0]==h.ndrefs[h.ndrefs.length-1]?new c.default(p,a.default.XY,[p.length]):new u.default(p,a.default.XY),Object(o.transformWithOptions)(m,!1,r);var _=new n.default(m);_.setId(h.id),_.setProperties(h.tags),s.features.push(_)}if(s.features)return s.features}return[]},e}(s.a),m=Object(f.makeStructureNS)(d,{tag:_});function _(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}e.default=v},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(33),o=r(192),s=r(39),a=r(56),u=r(68),l=r(74),c=r(38),h=r(34),p=r(9),f=function(t){function e(e){t.call(this);var r=e||{};this.layerName_=r.layerName,this.layers_=r.layers?r.layers:null,this.dataProjection=Object(p.get)(r.dataProjection?r.dataProjection:"EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r,i=t,n=null,o=null;i.transform&&(n=(r=i.transform).scale,o=r.translate);var s=i.arcs;r&&function(t,e,r){for(var i=0,n=t.length;i<n;++i)m(t[i],e,r)}(s,n,o);var a,u=[],l=i.objects,c=this.layerName_;for(var h in l)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===l[h].type?(a=l[h],u.push.apply(u,y(a,s,n,o,c,h,e))):(a=l[h],u.push(v(a,s,n,o,c,h,e))));return u}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(o.a),d={Point:function(t,e,r){var i=t.coordinates;return e&&r&&_(i,e,r),new c.default(i)},LineString:function(t,e){var r=g(t.arcs,e);return new s.default(r)},Polygon:function(t,e){for(var r=[],i=0,n=t.arcs.length;i<n;++i)r[i]=g(t.arcs[i],e);return new h.default(r)},MultiPoint:function(t,e,r){var i=t.coordinates;if(e&&r)for(var n=0,o=i.length;n<o;++n)_(i[n],e,r);return new u.default(i)},MultiLineString:function(t,e){for(var r=[],i=0,n=t.arcs.length;i<n;++i)r[i]=g(t.arcs[i],e);return new a.default(r)},MultiPolygon:function(t,e){for(var r=[],i=0,n=t.arcs.length;i<n;++i){for(var o=t.arcs[i],s=[],a=0,u=o.length;a<u;++a)s[a]=g(o[a],e);r[i]=s}return new l.default(r)}};function g(t,e){for(var r,i,n=[],o=0,s=t.length;o<s;++o)r=t[o],o>0&&n.pop(),i=r>=0?e[r]:e[~r].slice().reverse(),n.push.apply(n,i);for(var a=0,u=n.length;a<u;++a)n[a]=n[a].slice();return n}function y(t,e,r,i,n,o,s){for(var a=t.geometries,u=[],l=0,c=a.length;l<c;++l)u[l]=v(a[l],e,r,i,n,o,s);return u}function v(t,e,r,o,s,a,u){var l,c=t.type,h=d[c];l="Point"===c||"MultiPoint"===c?h(t,r,o):h(t,e);var p=new i.default;p.setGeometry(Object(n.transformWithOptions)(l,!1,u)),void 0!==t.id&&p.setId(t.id);var f=t.properties;return s&&(f||(f={}),f[s]=a),f&&p.setProperties(f),p}function m(t,e,r){for(var i=0,n=0,o=0,s=t.length;o<s;++o){var a=t[o];i+=a[0],n+=a[1],a[0]=i,a[1]=n,_(a,e,r)}}function _(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}e.default=f},function(t,e,r){"use strict";r.r(e),r.d(e,"writeFilter",function(){return D});var i=r(23),n=r(193),o=r(130),s=r(44),a=r(275),u=r(117),l=r(2),c=r(11),h=r(9),p=r(0),f={"http://www.opengis.net/gml":{boundedBy:Object(p.makeObjectPropertySetter)(s.default.prototype.readGeometryElement,"bounds")}},d={"http://www.opengis.net/wfs":{totalInserted:Object(p.makeObjectPropertySetter)(l.f),totalUpdated:Object(p.makeObjectPropertySetter)(l.f),totalDeleted:Object(p.makeObjectPropertySetter)(l.f)}},g={"http://www.opengis.net/wfs":{TransactionSummary:Object(p.makeObjectPropertySetter)(function(t,e){return Object(p.pushParseAndPop)({},d,t,e)},"transactionSummary"),InsertResults:Object(p.makeObjectPropertySetter)(function(t,e){return Object(p.pushParseAndPop)([],T,t,e)},"insertIds")}},y={"http://www.opengis.net/wfs":{PropertyName:Object(p.makeChildAppender)(l.n)}},v={"http://www.opengis.net/wfs":{Insert:Object(p.makeChildAppender)(function(t,e,r){var i=r[r.length-1],s=i.featureType,a=i.featureNS,u=i.gmlVersion,l=Object(p.createElementNS)(a,s);t.appendChild(l),2===u?n.default.prototype.writeFeatureElement(l,e,r):o.default.prototype.writeFeatureElement(l,e,r)}),Update:Object(p.makeChildAppender)(function(t,e,r){var n=r[r.length-1];Object(i.a)(void 0!==e.getId(),27);var o=n.featureType,s=n.featurePrefix,a=n.featureNS,u=w(s,o),l=e.getGeometryName();t.setAttribute("typeName",u),t.setAttributeNS(_,"xmlns:"+s,a);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),f=[],d=0,g=h.length;d<g;d++){var y=e.get(h[d]);if(void 0!==y){var m=h[d];y&&"function"==typeof y.getSimplifiedGeometry&&(m=l),f.push({name:m,value:y})}}Object(p.pushSerializeAndPop)({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},v,Object(p.makeSimpleNodeFactory)("Property"),f,r),P(t,c,r)}}),Delete:Object(p.makeChildAppender)(function(t,e,r){var n=r[r.length-1];Object(i.a)(void 0!==e.getId(),26);var o=n.featureType,s=n.featurePrefix,a=n.featureNS,u=w(s,o);t.setAttribute("typeName",u),t.setAttributeNS(_,"xmlns:"+s,a);var l=e.getId();void 0!==l&&P(t,l,r)}),Property:Object(p.makeChildAppender)(function(t,e,r){var i=Object(p.createElementNS)(S,"Name"),s=r[r.length-1].gmlVersion;if(t.appendChild(i),Object(l.n)(i,e.name),void 0!==e.value&&null!==e.value){var a=Object(p.createElementNS)(S,"Value");t.appendChild(a),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===s?n.default.prototype.writeGeometryElement(a,e.value,r):o.default.prototype.writeGeometryElement(a,e.value,r):Object(l.n)(a,e.value)}}),Native:Object(p.makeChildAppender)(function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Object(l.n)(t,e.value)})}},m="feature",_="http://www.w3.org/2000/xmlns/",b="http://www.opengis.net/ogc",S="http://www.opengis.net/wfs",x={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},O="1.1.0",E=function(t){function e(e){t.call(this);var r=e||{};this.featureType_=r.featureType,this.featureNS_=r.featureNS,this.gmlFormat_=r.gmlFormat?r.gmlFormat:new o.default,this.schemaLocation_=r.schemaLocation?r.schemaLocation:x[O]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};Object(c.assign)(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object(c.assign)(r,this.getReadOptions(t,e||{}));var i=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[s.GMLNS].featureMember=Object(p.makeArrayPusher)(s.default.prototype.readFeaturesInternal);var n=Object(p.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,i,this.gmlFormat_);return n||(n=[]),n},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Object(p.parse)(t);return this.readTransactionResponseFromDocument(e)}return Object(p.isDocument)(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Object(p.parse)(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Object(p.isDocument)(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=Object(l.g)(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,Object(p.pushParseAndPop)(e,f,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return Object(p.pushParseAndPop)({},g,t,[])},e.prototype.writeGetFeature=function(t){var e,r=Object(p.createElementNS)(S,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams ",t.viewParams),e=t.filter,t.bbox)){Object(i.a)(t.geometryName,12);var n=Object(a.bbox)(t.geometryName,t.bbox,t.srsName);e=e?Object(a.and)(e,n):n}r.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation_);var o={node:r};return Object(c.assign)(o,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Object(i.a)(Array.isArray(t.featureTypes),11),function(t,e,r){var i=r[r.length-1],n=Object(c.assign)({},i);n.node=t,Object(p.pushSerializeAndPop)(n,I,Object(p.makeSimpleNodeFactory)("Query"),e,r)}(r,t.featureTypes,[o]),r},e.prototype.writeTransaction=function(t,e,r,i){var n,o,s=[],a=Object(p.createElementNS)(S,"Transaction"),u=i.version?i.version:O,l="1.0.0"===u?2:3;a.setAttribute("service","WFS"),a.setAttribute("version",u),i&&(n=i.gmlOptions?i.gmlOptions:{},i.handle&&a.setAttribute("handle",i.handle));var h=x[u];a.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",h);var f=i.featurePrefix?i.featurePrefix:m;return t&&(o=Object(c.assign)({node:a},{featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:l,hasZ:i.hasZ,srsName:i.srsName}),Object(c.assign)(o,n),Object(p.pushSerializeAndPop)(o,v,Object(p.makeSimpleNodeFactory)("Insert"),t,s)),e&&(o=Object(c.assign)({node:a},{featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:l,hasZ:i.hasZ,srsName:i.srsName}),Object(c.assign)(o,n),Object(p.pushSerializeAndPop)(o,v,Object(p.makeSimpleNodeFactory)("Update"),e,s)),r&&Object(p.pushSerializeAndPop)({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:l,srsName:i.srsName},v,Object(p.makeSimpleNodeFactory)("Delete"),r,s),i.nativeElements&&Object(p.pushSerializeAndPop)({node:a,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:f,gmlVersion:l,srsName:i.srsName},v,Object(p.makeSimpleNodeFactory)("Native"),i.nativeElements,s),a},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),Object(h.get)(r.pop().srsName)}return null},e}(u.a),C={"http://www.opengis.net/ogc":{FeatureId:Object(p.makeArrayPusher)(function(t,e){return t.getAttribute("fid")})}},T={"http://www.opengis.net/wfs":{Feature:function(t,e){Object(p.parseNode)(C,t,e)}}};function P(t,e,r){var i=Object(p.createElementNS)(b,"Filter"),n=Object(p.createElementNS)(b,"FeatureId");i.appendChild(n),n.setAttribute("fid",e),t.appendChild(i)}function w(t,e){var r=(t=t||m)+":";return 0===e.indexOf(r)?e:r+e}var I={"http://www.opengis.net/wfs":{Query:Object(p.makeChildAppender)(function(t,e,r){var i,n=r[r.length-1],o=n.featurePrefix,s=n.featureNS,a=n.propertyNames,u=n.srsName;i=o?w(o,e):e,t.setAttribute("typeName",i),u&&t.setAttribute("srsName",u),s&&t.setAttributeNS(_,"xmlns:"+o,s);var l=Object(c.assign)({},n);l.node=t,Object(p.pushSerializeAndPop)(l,y,Object(p.makeSimpleNodeFactory)("PropertyName"),a,r);var h=n.filter;if(h){var f=Object(p.createElementNS)(b,"Filter");t.appendChild(f),L(f,h,r)}})},"http://www.opengis.net/ogc":{During:Object(p.makeChildAppender)(function(t,e,r){var i=Object(p.createElementNS)("http://www.opengis.net/fes","ValueReference");Object(l.n)(i,e.propertyName),t.appendChild(i);var n=Object(p.createElementNS)(s.GMLNS,"TimePeriod");t.appendChild(n);var o=Object(p.createElementNS)(s.GMLNS,"begin");n.appendChild(o),F(o,e.begin);var a=Object(p.createElementNS)(s.GMLNS,"end");n.appendChild(a),F(a,e.end)}),And:Object(p.makeChildAppender)(R),Or:Object(p.makeChildAppender)(R),Not:Object(p.makeChildAppender)(function(t,e,r){var i={node:t},n=e.condition;Object(p.pushSerializeAndPop)(i,I,Object(p.makeSimpleNodeFactory)(n.getTagName()),[n],r)}),BBOX:Object(p.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,j(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.extent,r)}),Contains:Object(p.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,j(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),Intersects:Object(p.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,j(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),Within:Object(p.makeChildAppender)(function(t,e,r){r[r.length-1].srsName=e.srsName,j(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,r)}),PropertyIsEqualTo:Object(p.makeChildAppender)(M),PropertyIsNotEqualTo:Object(p.makeChildAppender)(M),PropertyIsLessThan:Object(p.makeChildAppender)(M),PropertyIsLessThanOrEqualTo:Object(p.makeChildAppender)(M),PropertyIsGreaterThan:Object(p.makeChildAppender)(M),PropertyIsGreaterThanOrEqualTo:Object(p.makeChildAppender)(M),PropertyIsNull:Object(p.makeChildAppender)(function(t,e,r){j(t,e.propertyName)}),PropertyIsBetween:Object(p.makeChildAppender)(function(t,e,r){j(t,e.propertyName);var i=Object(p.createElementNS)(b,"LowerBoundary");t.appendChild(i),N(i,""+e.lowerBoundary);var n=Object(p.createElementNS)(b,"UpperBoundary");t.appendChild(n),N(n,""+e.upperBoundary)}),PropertyIsLike:Object(p.makeChildAppender)(function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),j(t,e.propertyName),N(t,""+e.pattern)})}};function L(t,e,r){var i={node:t};Object(p.pushSerializeAndPop)(i,I,Object(p.makeSimpleNodeFactory)(e.getTagName()),[e],r)}function R(t,e,r){for(var i={node:t},n=e.conditions,o=0,s=n.length;o<s;++o){var a=n[o];Object(p.pushSerializeAndPop)(i,I,Object(p.makeSimpleNodeFactory)(a.getTagName()),[a],r)}}function M(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),j(t,e.propertyName),N(t,""+e.expression)}function A(t,e,r){var i=Object(p.createElementNS)(b,t);Object(l.n)(i,r),e.appendChild(i)}function j(t,e){A("PropertyName",t,e)}function N(t,e){A("Literal",t,e)}function F(t,e){var r=Object(p.createElementNS)(s.GMLNS,"TimeInstant");t.appendChild(r);var i=Object(p.createElementNS)(s.GMLNS,"timePosition");r.appendChild(i),Object(l.n)(i,e)}function D(t){var e=Object(p.createElementNS)(b,"Filter");return L(e,t,[]),e}e.default=E},function(t,e,r){"use strict";r.r(e);var i=r(36),n=r(33),o=r(194),s=r(129),a=r(5),u=r(20),l=r(39),c=r(56),h=r(68),p=r(74),f=r(38),d=r(34),g={POINT:f.default,LINESTRING:l.default,POLYGON:d.default,MULTIPOINT:h.default,MULTILINESTRING:c.default,MULTIPOLYGON:p.default},y="EMPTY",v="Z",m="M",_={};for(var b in a.default)_[b]=a.default[b].toUpperCase();var S=function(t){this.wkt=t,this.index_=-1};S.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},S.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},S.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},S.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},S.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:r,value:i,type:t}},S.prototype.readNumber_=function(){var t,e=this.index_,r=!1,i=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},S.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()};var x=function(t){this.lexer_=t,this.token_,this.layout_=u.default.XY};x.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},x.prototype.isTokenType=function(t){return this.token_.type==t},x.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},x.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},x.prototype.parseGeometryLayout_=function(){var t=u.default.XY,e=this.token_;if(this.isTokenType(1)){var r=e.value;r===v?t=u.default.XYZ:r===m?t=u.default.XYM:"ZM"===r&&(t=u.default.XYZM),t!==u.default.XY&&this.consume_()}return t},x.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},x.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},x.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},x.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},x.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},x.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},x.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},x.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&this.token_.value==y;return t&&this.consume_(),t},x.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},x.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new s.default(r)}var i,n=g[e];if(!n)throw new Error("Invalid geometry type: "+e);switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===g.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())};var O=function(t){function e(e){t.call(this);var r=e||{};this.splitCollection_=void 0!==r.splitCollection&&r.splitCollection}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse_=function(t){var e=new S(t);return new x(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var n=new i.default;return n.setGeometry(r),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r,n=this.readGeometryFromText(t,e),o=[],s=0,u=(r=this.splitCollection_&&n.getType()==a.default.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;s<u;++s){var l=new i.default;l.setGeometry(r[s]),o.push(l)}return o},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?Object(n.transformWithOptions)(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],i=0,n=t.length;i<n;++i)r.push(t[i].getGeometry());var o=new s.default(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return w(Object(n.transformWithOptions)(t,!0,e))},e}(o.a);function E(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function C(t){for(var e=t.getCoordinates(),r=[],i=0,n=e.length;i<n;++i)r.push(e[i].join(" "));return r.join(",")}function T(t){for(var e=[],r=t.getLinearRings(),i=0,n=r.length;i<n;++i)e.push("("+C(r[i])+")");return e.join(",")}var P={Point:E,LineString:C,Polygon:T,MultiPoint:function(t){for(var e=[],r=t.getPoints(),i=0,n=r.length;i<n;++i)e.push("("+E(r[i])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),i=0,n=r.length;i<n;++i)e.push("("+C(r[i])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),i=0,n=r.length;i<n;++i)e.push("("+T(r[i])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),i=0,n=r.length;i<n;++i)e.push(w(r[i]));return e.join(",")}};function w(t){var e=t.getType(),r=(0,P[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var i=function(t){var e=t.getLayout(),r="";return e!==u.default.XYZ&&e!==u.default.XYZM||(r+=v),e!==u.default.XYM&&e!==u.default.XYZM||(r+=m),r}(t);i.length>0&&(e+=" "+i)}return 0===r.length?e+" "+y:e+"("+r+")"}e.default=O},function(t,e,r){"use strict";r.r(e);var i=r(145),n=r(196),o=r(2),s=r(0),a=[null,"http://www.opengis.net/wms"],u=Object(s.makeStructureNS)(a,{Service:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},h,t,e)}),Capability:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},l,t,e)})}),l=Object(s.makeStructureNS)(a,{Request:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},_,t,e)}),Exception:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)([],g,t,e)}),Layer:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},y,t,e)})}),c=function(t){function e(){t.call(this),this.version=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),Object(s.pushParseAndPop)({version:this.version},u,t,[])||null},e}(n.a),h=Object(s.makeStructureNS)(a,{Name:Object(s.makeObjectPropertySetter)(o.h),Title:Object(s.makeObjectPropertySetter)(o.h),Abstract:Object(s.makeObjectPropertySetter)(o.h),KeywordList:Object(s.makeObjectPropertySetter)(I),OnlineResource:Object(s.makeObjectPropertySetter)(i.a),ContactInformation:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},p,t,e)}),Fees:Object(s.makeObjectPropertySetter)(o.h),AccessConstraints:Object(s.makeObjectPropertySetter)(o.h),LayerLimit:Object(s.makeObjectPropertySetter)(o.f),MaxWidth:Object(s.makeObjectPropertySetter)(o.f),MaxHeight:Object(s.makeObjectPropertySetter)(o.f)}),p=Object(s.makeStructureNS)(a,{ContactPersonPrimary:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},f,t,e)}),ContactPosition:Object(s.makeObjectPropertySetter)(o.h),ContactAddress:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},d,t,e)}),ContactVoiceTelephone:Object(s.makeObjectPropertySetter)(o.h),ContactFacsimileTelephone:Object(s.makeObjectPropertySetter)(o.h),ContactElectronicMailAddress:Object(s.makeObjectPropertySetter)(o.h)}),f=Object(s.makeStructureNS)(a,{ContactPerson:Object(s.makeObjectPropertySetter)(o.h),ContactOrganization:Object(s.makeObjectPropertySetter)(o.h)}),d=Object(s.makeStructureNS)(a,{AddressType:Object(s.makeObjectPropertySetter)(o.h),Address:Object(s.makeObjectPropertySetter)(o.h),City:Object(s.makeObjectPropertySetter)(o.h),StateOrProvince:Object(s.makeObjectPropertySetter)(o.h),PostCode:Object(s.makeObjectPropertySetter)(o.h),Country:Object(s.makeObjectPropertySetter)(o.h)}),g=Object(s.makeStructureNS)(a,{Format:Object(s.makeArrayPusher)(o.h)}),y=Object(s.makeStructureNS)(a,{Name:Object(s.makeObjectPropertySetter)(o.h),Title:Object(s.makeObjectPropertySetter)(o.h),Abstract:Object(s.makeObjectPropertySetter)(o.h),KeywordList:Object(s.makeObjectPropertySetter)(I),CRS:Object(s.makeObjectPropertyPusher)(o.h),EX_GeographicBoundingBox:Object(s.makeObjectPropertySetter)(function(t,e){var r=Object(s.pushParseAndPop)({},m,t,e);if(r){var i=r.westBoundLongitude,n=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0!==i&&void 0!==n&&void 0!==o&&void 0!==a)return[i,n,o,a]}}),BoundingBox:Object(s.makeObjectPropertyPusher)(function(t,e){var r=[Object(o.e)(t.getAttribute("minx")),Object(o.e)(t.getAttribute("miny")),Object(o.e)(t.getAttribute("maxx")),Object(o.e)(t.getAttribute("maxy"))],i=[Object(o.e)(t.getAttribute("resx")),Object(o.e)(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:i}}),Dimension:Object(s.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Object(o.b)(t.getAttribute("multipleValues")),nearestValue:Object(o.b)(t.getAttribute("nearestValue")),current:Object(o.b)(t.getAttribute("current")),values:Object(o.h)(t)}}),Attribution:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},v,t,e)}),AuthorityURL:Object(s.makeObjectPropertyPusher)(function(t,e){var r=T(t,e);if(r)return r.name=t.getAttribute("name"),r}),Identifier:Object(s.makeObjectPropertyPusher)(o.h),MetadataURL:Object(s.makeObjectPropertyPusher)(function(t,e){var r=T(t,e);if(r)return r.type=t.getAttribute("type"),r}),DataURL:Object(s.makeObjectPropertyPusher)(T),FeatureListURL:Object(s.makeObjectPropertyPusher)(T),Style:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},O,t,e)}),MinScaleDenominator:Object(s.makeObjectPropertySetter)(o.d),MaxScaleDenominator:Object(s.makeObjectPropertySetter)(o.d),Layer:Object(s.makeObjectPropertyPusher)(function(t,e){var r=e[e.length-1],i=Object(s.pushParseAndPop)({},y,t,e);if(i){var n=Object(o.b)(t.getAttribute("queryable"));void 0===n&&(n=r.queryable),i.queryable=void 0!==n&&n;var a=Object(o.g)(t.getAttribute("cascaded"));void 0===a&&(a=r.cascaded),i.cascaded=a;var u=Object(o.b)(t.getAttribute("opaque"));void 0===u&&(u=r.opaque),i.opaque=void 0!==u&&u;var l=Object(o.b)(t.getAttribute("noSubsets"));void 0===l&&(l=r.noSubsets),i.noSubsets=void 0!==l&&l;var c=Object(o.e)(t.getAttribute("fixedWidth"));c||(c=r.fixedWidth),i.fixedWidth=c;var h=Object(o.e)(t.getAttribute("fixedHeight"));return h||(h=r.fixedHeight),i.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in r){var e=i[t]||[];i[t]=e.concat(r[t])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in i)){var e=r[t];i[t]=e}}),i}})}),v=Object(s.makeStructureNS)(a,{Title:Object(s.makeObjectPropertySetter)(o.h),OnlineResource:Object(s.makeObjectPropertySetter)(i.a),LogoURL:Object(s.makeObjectPropertySetter)(w)}),m=Object(s.makeStructureNS)(a,{westBoundLongitude:Object(s.makeObjectPropertySetter)(o.d),eastBoundLongitude:Object(s.makeObjectPropertySetter)(o.d),southBoundLatitude:Object(s.makeObjectPropertySetter)(o.d),northBoundLatitude:Object(s.makeObjectPropertySetter)(o.d)}),_=Object(s.makeStructureNS)(a,{GetCapabilities:Object(s.makeObjectPropertySetter)(P),GetMap:Object(s.makeObjectPropertySetter)(P),GetFeatureInfo:Object(s.makeObjectPropertySetter)(P)}),b=Object(s.makeStructureNS)(a,{Format:Object(s.makeObjectPropertyPusher)(o.h),DCPType:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},S,t,e)})}),S=Object(s.makeStructureNS)(a,{HTTP:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},x,t,e)})}),x=Object(s.makeStructureNS)(a,{Get:Object(s.makeObjectPropertySetter)(T),Post:Object(s.makeObjectPropertySetter)(T)}),O=Object(s.makeStructureNS)(a,{Name:Object(s.makeObjectPropertySetter)(o.h),Title:Object(s.makeObjectPropertySetter)(o.h),Abstract:Object(s.makeObjectPropertySetter)(o.h),LegendURL:Object(s.makeObjectPropertyPusher)(w),StyleSheetURL:Object(s.makeObjectPropertySetter)(T),StyleURL:Object(s.makeObjectPropertySetter)(T)}),E=Object(s.makeStructureNS)(a,{Format:Object(s.makeObjectPropertySetter)(o.h),OnlineResource:Object(s.makeObjectPropertySetter)(i.a)}),C=Object(s.makeStructureNS)(a,{Keyword:Object(s.makeArrayPusher)(o.h)});function T(t,e){return Object(s.pushParseAndPop)({},E,t,e)}function P(t,e){return Object(s.pushParseAndPop)({},b,t,e)}function w(t,e){var r=T(t,e);if(r){var i=[Object(o.g)(t.getAttribute("width")),Object(o.g)(t.getAttribute("height"))];return r.size=i,r}}function I(t,e){return Object(s.pushParseAndPop)([],C,t,e)}e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(15),n=r(193),o=r(117),s=r(11),a=r(0),u=function(t){function e(e){t.call(this);var r=e||{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new n.default,this.layers_=r.layers?r.layers:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var o=0,s=t.childNodes.length;o<s;o++){var u=t.childNodes[o];if(u.nodeType===Node.ELEMENT_NODE){var l=u,c=e[0],h=l.localName.replace("_layer","");if(!this.layers_||Object(i.f)(this.layers_,h)){var p=h+"_feature";c.featureType=p,c.featureNS=this.featureNS_;var f={};f[p]=Object(a.makeArrayPusher)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var d=Object(a.makeStructureNS)([c.featureNS,null],f);l.setAttribute("namespaceURI",this.featureNS_);var g=Object(a.pushParseAndPop)([],d,l,e,this.gmlFormat_);g&&Object(i.c)(n,g)}}}if("FeatureCollection"==r){var y=Object(a.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);y&&(n=y)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&Object(s.assign)(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(o.a);e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(3),n=r(25),o=r(24),s=r(97),a=r(19),u=r(11),l=r(59),c=r(197),h=r(70),p={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},f=["#00f","#0ff","#0f0","#ff0","#f00"],d=function(t){function e(e){var r=e||{},o=Object(u.assign)({},r);delete o.gradient,delete o.radius,delete o.blur,delete o.shadow,delete o.weight,t.call(this,o),this.gradient_=null,this.shadow_=void 0!==r.shadow?r.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(i.listen)(this,Object(n.getChangeEventType)(p.GRADIENT),this.handleGradientChanged_,this),this.setGradient(r.gradient?r.gradient:f),this.setBlur(void 0!==r.blur?r.blur:15),this.setRadius(void 0!==r.radius?r.radius:8),Object(i.listen)(this,Object(n.getChangeEventType)(p.BLUR),this.handleStyleChanged_,this),Object(i.listen)(this,Object(n.getChangeEventType)(p.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var s,d=r.weight?r.weight:"weight";s="string"==typeof d?function(t){return t.get(d)}:d,this.setStyle(function(t,e){var r=s(t),i=void 0!==r?Object(a.a)(r,0,1):1,n=255*i|0,o=this.styleCache_[n];return o||(o=[new h.default({image:new c.default({opacity:i,src:this.circleImage_})})],this.styleCache_[n]=o),o}.bind(this)),this.setRenderOrder(null),Object(i.listen)(this,l.a.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),r=t+e+1,i=2*r,n=Object(o.createCanvasContext2D)(i,i);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var s=r-this.shadow_;return n.arc(s,s,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(p.BLUR)},e.prototype.getGradient=function(){return this.get(p.GRADIENT)},e.prototype.getRadius=function(){return this.get(p.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(o.createCanvasContext2D)(1,256),r=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,s=t.length;n<s;++n)r.addColorStop(n*i,t[n]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,r=e.canvas,i=e.getImageData(0,0,r.width,r.height),n=i.data,o=0,s=n.length;o<s;o+=4){var a=4*n[o+3];a&&(n[o]=this.gradient_[a],n[o+1]=this.gradient_[a+1],n[o+2]=this.gradient_[a+2])}e.putImageData(i,0,0)},e.prototype.setBlur=function(t){this.set(p.BLUR,t)},e.prototype.setGradient=function(t){this.set(p.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(p.RADIUS,t)},e}(s.default);e.default=d},function(t,e,r){"use strict";r.r(e);var i=r(50),n=r(23),o=r(135),s=r(97),a=r(84),u=r(11),l=function(t){function e(e){var r=e||{},o=r.renderMode||a.a.HYBRID;Object(n.a)(void 0==o||o==a.a.IMAGE||o==a.a.HYBRID||o==a.a.VECTOR,28),r.declutter&&o==a.a.IMAGE&&(o=a.a.HYBRID),r.renderMode=o;var s=Object(u.assign)({},r);delete s.preload,delete s.useInterimTilesOnError,t.call(this,s),this.setPreload(r.preload?r.preload:0),this.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),this.type=i.a.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o.a.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(s.default);l.prototype.getSource,e.default=l},function(t,e,r){"use strict";r.r(e);var i=r(76),n=r(1),o=r(176),s=r(9),a=r(43),u=r(67),l=r(46),c=r(60),h=function(t){function e(e){var r=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Object(s.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:a.a.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=r,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet;var i="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;Object(o.a)(i,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,o=this.getProjection(),u=Object(c.extentFromProjection)(o),h=this.hidpi_?2:1,p=e.imageWidth==e.imageHeight?e.imageWidth/h:[e.imageWidth/h,e.imageHeight/h],f=Object(c.createXYZ)({extent:u,minZoom:e.zoomMin,maxZoom:r,tileSize:p});this.tileGrid=f;var d=this.culture_,g=this.hidpi_;if(this.tileUrlFunction=Object(i.b)(e.imageUrlSubdomains.map(function(t){var r=[0,0,0],i=e.imageUrl.replace("{subdomain}",t).replace("{culture}",d);return function(t,e,n){if(t){Object(l.createOrUpdate)(t[0],t[1],-t[2]-1,r);var o=i;return g&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",Object(l.quadKey)(r))}}})),e.imageryProviders){var y=Object(s.getTransformFromProjections)(Object(s.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],i=t.viewState,o=this.getTileGrid().getTileCoordForCoordAndResolution(i.center,i.resolution)[0];return e.imageryProviders.map(function(e){for(var i=!1,s=e.coverageAreas,a=0,u=s.length;a<u;++a){var l=s[a];if(o>=l.zoomMin&&o<=l.zoomMax){var c=l.bbox,h=[c[1],c[0],c[3],c[2]],p=Object(n.applyTransform)(h,y);if(Object(n.intersects)(p,t.extent)){i=!0;break}}}i&&r.push(e.attribution)}),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),r}.bind(this))}this.setState(a.a.READY)}else this.setState(a.a.ERROR)},e}(u.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(11),n=r(43),o=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){Object(i.assign)(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var i;try{i=JSON.parse(r.responseText)}catch(t){return void this.setState(n.a.ERROR)}this.applyTemplate_(i),this.templateCache_[t]=i,this.setState(n.a.READY)}else this.setState(n.a.ERROR)},e.prototype.handleInitError_=function(t){this.setState(n.a.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(r(171).default);e.default=o},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(23),o=r(36),s=r(5),a=r(26),u=r(3),l=r(10),c=r(1),h=r(38),p=function(t){function e(e){t.call(this,{attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Object(n.a)(e.getType()==s.default.POINT,10),e},this.source=e.source,Object(u.listen)(this.source,l.default.CHANGE,this.refresh,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),t.prototype.refresh.call(this)},e.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=Object(c.createEmpty)(),e=this.distance*this.resolution,r=this.source.getFeatures(),n={},o=0,s=r.length;o<s;o++){var a=r[o];if(!(Object(i.getUid)(a)in n)){var u=this.geometryFunction(a);if(u){var l=u.getCoordinates();Object(c.createOrUpdateFromCoordinate)(l,t),Object(c.buffer)(t,e,t);var h=this.source.getFeaturesInExtent(t);h=h.filter(function(t){var e=Object(i.getUid)(t);return!(e in n||(n[e]=!0,0))}),this.features.push(this.createCluster(h))}}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var i=this.geometryFunction(t[r]);i?Object(a.add)(e,i.getCoordinates()):t.splice(r,1)}Object(a.scale)(e,1/t.length);var n=new o.default(new h.default(e));return n.set("features",t),n},e}(r(110).default);e.default=p},function(t,e,r){"use strict";r.r(e);var i=r(109),n=r(23),o=r(3),s=r(10),a=r(1),u=r(11),l=r(75),c=r(93),h=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,projection:r.projection,resolutions:r.resolutions}),this.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,this.hidpi_=void 0===r.hidpi||r.hidpi,this.url_=r.url,this.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:l.defaultImageLoadFunction,this.params_=r.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==r.ratio?r.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==r&&Object(a.containsExtent)(l.getExtent(),t))return l;var c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(u.assign)(c,this.params_);var h=((t=t.slice())[0]+t[2])/2,p=(t[1]+t[3])/2;if(1!=this.ratio_){var f=this.ratio_*Object(a.getWidth)(t)/2,d=this.ratio_*Object(a.getHeight)(t)/2;t[0]=h-f,t[1]=p-d,t[2]=h+f,t[3]=p+d}var g=e/r,y=Math.ceil(Object(a.getWidth)(t)/g),v=Math.ceil(Object(a.getHeight)(t)/g);t[0]=h-g*y/2,t[2]=h+g*y/2,t[1]=p-g*v/2,t[3]=p+g*v/2,this.imageSize_[0]=y,this.imageSize_[1]=v;var m=this.getRequestUrl_(t,this.imageSize_,r,n,c);return this.image_=new i.default(t,e,r,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(o.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,i,o){var s=i.getCode().split(":").pop();o.SIZE=e[0]+","+e[1],o.BBOX=t.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(90*r);var a=this.url_,u=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return u==a&&Object(n.a)(!1,50),Object(c.appendParams)(u,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(u.assign)(this.params_,t),this.image_=null,this.changed()},e}(l.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(109),n=r(3),o=r(10),s=r(1),a=r(11),u=r(75),l=r(93),c=function(t){function e(e){t.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:u.defaultImageLoadFunction,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,a){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&Object(s.containsExtent)(u.getExtent(),t))return u;1!=this.ratio_&&(t=t.slice(),Object(s.scaleFromCenter)(t,this.ratio_));var l=[Object(s.getWidth)(t)/e*r,Object(s.getHeight)(t)/e*r];if(void 0!==this.url_){var c=this.getUrl(this.url_,this.params_,t,l,a);u=new i.default(t,e,r,c,this.crossOrigin_,this.imageLoadFunction_),Object(n.listen)(u,o.default.CHANGE,this.handleImageChange,this)}else u=null;return this.image_=u,this.renderedRevision_=this.getRevision(),u},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){Object(a.assign)(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,i,n){var o=function(t,e,r,i){var n=Object(s.getWidth)(t),o=Object(s.getHeight)(t),a=e[0],u=e[1],l=.0254/i;return u*n>a*o?n*r/(a*l):o*r/(u*l)}(r,i,this.metersPerUnit_,this.displayDpi_),u=Object(s.getCenter)(r),c={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(i[0]),SETDISPLAYHEIGHT:Math.round(i[1]),SETVIEWSCALE:o,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]};return Object(a.assign)(c,e),Object(l.appendParams)(t,c)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(u.default);e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(109),n=r(27),o=r(24),s=r(3),a=r(10),u=r(1),l=r(9),c=r(75),h=function(t){function e(e){var r=void 0!==e.crossOrigin?e.crossOrigin:null,n=void 0!==e.imageLoadFunction?e.imageLoadFunction:c.defaultImageLoadFunction;t.call(this,{attributions:e.attributions,projection:Object(l.get)(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new i.default(this.imageExtent_,void 0,1,this.url_,r,n),this.imageSize_=e.imageSize?e.imageSize:null,Object(s.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,i){return Object(u.intersects)(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==n.a.LOADED){var r,i,s=this.image_.getExtent(),a=this.image_.getImage();this.imageSize_?(r=this.imageSize_[0],i=this.imageSize_[1]):(r=a.width,i=a.height);var l=Object(u.getHeight)(s)/i,c=Math.ceil(Object(u.getWidth)(s)/l);if(c!=r){var h=Object(o.createCanvasContext2D)(c,i),p=h.canvas;h.drawImage(a,0,0,r,i,0,0,p.width,p.height),this.image_.setImage(p)}}t.prototype.handleImageChange.call(this,e)},e}(c.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(160),n=r(109),o=r(23),s=r(3),a=r(10),u=r(1),l=r(11),c=r(9),h=r(85),p=r(75),f=r(136),d=r(112),g=r(93),y=[101,101],v=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,projection:r.projection,resolutions:r.resolutions}),this.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null,this.url_=r.url,this.imageLoadFunction_=void 0!==r.imageLoadFunction?r.imageLoadFunction:p.defaultImageLoadFunction,this.params_=r.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=r.serverType,this.hidpi_=void 0===r.hidpi||r.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==r.ratio?r.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var o=Object(c.get)(r),s=this.getProjection();s&&s!==o&&(e=Object(h.a)(s,o,t,e),t=Object(c.transform)(t,o,s));var a=Object(u.getForViewAndSize)(t,e,0,y),p={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(l.assign)(p,this.params_,n);var f=Math.floor((t[0]-a[0])/e),d=Math.floor((a[3]-t[1])/e);return p[this.v13_?"I":"X"]=f,p[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,y,1,s||o,p)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var c=e/r,h=Object(u.getCenter)(t),p=Math.ceil(Object(u.getWidth)(t)/c),f=Math.ceil(Object(u.getHeight)(t)/c),d=Object(u.getForViewAndSize)(h,c,0,[p,f]),g=Math.ceil(this.ratio_*Object(u.getWidth)(t)/c),y=Math.ceil(this.ratio_*Object(u.getHeight)(t)/c),v=Object(u.getForViewAndSize)(h,c,0,[g,y]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==e&&m.getPixelRatio()==r&&Object(u.containsExtent)(m.getExtent(),d))return m;var _={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(l.assign)(_,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(v)/c),this.imageSize_[1]=Math.round(Object(u.getHeight)(v)/c);var b=this.getRequestUrl_(v,this.imageSize_,r,o,_);return this.image_=new n.default(v,e,r,b,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(s.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,i,n){if(Object(o.a)(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=r)switch(this.serverType_){case f.a.GEOSERVER:var s=90*r+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+s:n.FORMAT_OPTIONS="dpi:"+s;break;case f.a.MAPSERVER:n.MAP_RESOLUTION=90*r;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:n.DPI=90*r;break;default:Object(o.a)(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];var a,u=i.getAxisOrientation();return a=this.v13_&&"ne"==u.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=a.join(","),Object(g.appendParams)(this.url_,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(l.assign)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||i.a;this.v13_=Object(d.a)(t,"1.3")>=0},e}(p.default);e.default=v},function(t,e,r){"use strict";r.r(e);var i=r(4),n=r(152),o=r(186),s=r(24),a=r(3),u=r(35),l=r(10),c=r(466),h=r(1),p=r(50),f=r(224),d=r(149),g=r(11),y=r(191),v=r(158),m=r(75),_=r(43),b=r(18),S={PIXEL:"pixel",IMAGE:"image"},x=function(t){function e(e,r,i){t.call(this,e),this.extent=r.extent,this.resolution=r.viewState.resolution/r.pixelRatio,this.data=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u.default),O=function(t){function e(e){t.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==e.operationType?e.operationType:S.PIXEL,this.threads_=void 0!==e.threads?e.threads:1,this.renderers_=function(t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=T(t[i]);return r}(e.sources);for(var r=0,n=this.renderers_.length;r<n;++r)Object(a.listen)(this.renderers_[r],l.default.CHANGE,this.changed,this);this.tileQueue_=new o.a(function(){return 1},this.changed.bind(this));for(var s=function(t){return t.map(function(t){return t.getLayer().getLayerState()})}(this.renderers_),u={},c=0,h=s.length;c<h;++c)u[Object(i.getUid)(s[c].layer)]=s[c];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(b.c)(),extent:null,focus:null,index:0,layerStates:u,layerStatesArray:s,pixelRatio:1,pixelToCoordinateTransform:Object(b.c)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==e.operation&&this.setOperation(e.operation,e.lib)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setOperation=function(t,e){this.worker_=new c.Processor({operation:t,imageOps:this.operationType_===S.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var i=Object(g.assign)({},this.frameState_);i.viewState=Object(g.assign)({},i.viewState);var n=Object(h.getCenter)(t);i.extent=t.slice(),i.focus=n,i.size[0]=Math.round(Object(h.getWidth)(t)/e),i.size[1]=Math.round(Object(h.getHeight)(t)/e),i.time=Date.now(),i.animate=!1;var o=i.viewState;return o.center=n,o.projection=r,o.resolution=e,i},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.renderers_.length;e<r;++e)if(this.renderers_[e].getLayer().getSource().getState()!==_.a.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,r,i){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(t,e,i);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();e===o&&Object(h.equals)(t,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,r=new Array(e),i=0;i<e;++i){var n=C(this.renderers_[i],t,t.layerStatesArray[i]);if(!n)return;r[i]=n}var o={};this.dispatchEvent(new x("beforeoperations",t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,i){if(!e&&r){var o=t.extent,a=t.viewState.resolution;if(a===this.requestedFrameState_.viewState.resolution&&Object(h.equals)(o,this.requestedFrameState_.extent)){var u;if(this.renderedImageCanvas_)u=this.renderedImageCanvas_.getImage().getContext("2d");else{var l=Math.round(Object(h.getWidth)(o)/a),c=Math.round(Object(h.getHeight)(o)/a);u=Object(s.createCanvasContext2D)(l,c),this.renderedImageCanvas_=new n.a(o,a,1,u.canvas)}u.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new x("afteroperations",t,i))}}},e.prototype.getImageInternal=function(){return null},e}(m.default),E=null;function C(t,e,r){if(!t.prepareFrame(e,r))return null;var i=e.size[0],n=e.size[1];if(E){var o=E.canvas;o.width!==i||o.height!==n?E=Object(s.createCanvasContext2D)(i,n):E.clearRect(0,0,i,n)}else E=Object(s.createCanvasContext2D)(i,n);return t.composeFrame(e,r,E),E.getImageData(0,0,i,n)}function T(t){var e=t,r=t,i=t,n=null;return"function"==typeof e.getTile?n=function(t){var e=new d.default({source:t});return new v.default(e)}(e):"function"==typeof r.getImage?n=function(t){var e=new f.default({source:t});return new y.default(e)}(r):i.getType()===p.a.TILE?n=new v.default(i):i.getType()!=p.a.IMAGE&&i.getType()!=p.a.VECTOR||(n=new y.default(i)),n}e.default=O},function(t,e,r){var i=r(494).newImageData;function n(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,i){return e?new ImageData(t,r,i):{data:t,width:r,height:i}}return function(e){var i,n,o=e.buffers,s=e.meta,a=e.imageOps,u=e.width,l=e.height,c=o.length,h=o[0].byteLength;if(a){var p=new Array(c);for(n=0;n<c;++n)p[n]=r(new Uint8ClampedArray(o[n]),u,l);i=t(p,s).data}else{i=new Uint8ClampedArray(h);var f=new Array(c),d=new Array(c);for(n=0;n<c;++n)f[n]=new Uint8ClampedArray(o[n]),d[n]=[0,0,0,0];for(var g=0;g<h;g+=4){for(var y=0;y<c;++y){var v=f[y];d[y][0]=v[g],d[y][1]=v[g+1],d[y][2]=v[g+2],d[y][3]=v[g+3]}var m=t(d,s);i[g]=m[0],i[g+1]=m[1],i[g+2]=m[2],i[g+3]=m[3]}}return i.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+n.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(i),s=new Worker(o);return s.addEventListener("message",e),s}function s(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var i=0;i<e;++i)r[i]=o(t,this._onWorkerMessage.bind(this,i));else r[0]=function(t,e){var r=n(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:r(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}s.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},s.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},s.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},s.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,i=t.inputs.map(function(t){return t.data.buffer}),n=this._workers.length;if(this._running=n,1===n)this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:r},i);else for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/n),a=0;a<n;++a){for(var u=a*s,l=[],c=0,h=i.length;c<h;++c)l.push(i[a].slice(u,u+s));this._workers[a].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}}},s.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},s.prototype._resolveJob=function(){var t,e,r=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var s=4*Math.ceil(o/4/n),a=0;a<n;++a){var u=this._dataLookup[a].buffer,l=a*s;t.set(new Uint8ClampedArray(u),l),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},r.callback(null,i(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},t.exports=s},function(t,e){var r=!0;try{new ImageData(10,10)}catch(t){r=!1}var i=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,n){if(r)return new ImageData(t,e,n);var o=i.createImageData(e,n);return o.data.set(t),o}},function(t,e,r){"use strict";r.r(e);var i=r(360),n=r(171),o=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',i.ATTRIBUTION],s={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},a={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},u=function(t){function e(e){var r=e.layer.indexOf("-"),i=-1==r?e.layer:e.layer.slice(0,r),n=a[i],u=s[e.layer],l=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+u.extension;t.call(this,{attributions:o,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=e.maxZoom?e.maxZoom:n.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:n.minZoom,opaque:u.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:l,wrapX:e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default);e.default=u},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(19),o=r(11),s=r(45),a=r(67),u=r(46),l=r(93),c=function(t){function e(e){var r=e||{};t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:h,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.params_=r.params||{},this.tmpExtent_=Object(i.createEmpty)(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,i,o,s){var a=this.urls;if(a){var c=o.getCode().split(":").pop();s.SIZE=e[0]+","+e[1],s.BBOX=r.join(","),s.BBOXSR=c,s.IMAGESR=c,s.DPI=Math.round(s.DPI?s.DPI*i:90*i);var h=(1==a.length?a[0]:a[Object(n.d)(Object(u.hash)(t),a.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(l.appendParams)(h,s)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){Object(o.assign)(this.params_,t),this.setKey(this.getKeyForParams_())},e}(a.default);function h(t,e,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){var n=i.getTileCoordExtent(t,this.tmpExtent_),a=Object(s.toSize)(i.getTileSize(t[0]),this.tmpSize);1!=e&&(a=Object(s.scale)(a,e,this.tmpSize));var u={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(o.assign)(u,this.params_),this.getRequestUrl_(t,a,n,e,r,u)}}e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(95),n=r(17),o=r(24),s=r(45),a=r(127),u=r(46),l=function(t){function e(e,r,i){t.call(this,e,n.default.LOADED),this.tileSize_=r,this.text_=i,this.canvas_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Object(o.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(i.default),c=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,r){var i=Object(u.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var n=Object(s.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,r],a=this.getTileCoordForTileUrlFunction(o),c=a?this.getTileCoordForTileUrlFunction(a).toString():"",h=new l(o,n,c);return this.tileCache.set(i,h),h},e}(a.default);e.default=c},function(t,e,r){"use strict";r.r(e);var i=r(76),n=r(23),o=r(1),s=r(176),a=r(9),u=r(43),l=r(67),c=r(60),h=function(t){function e(e){if(t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Object(a.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:u.a.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.tileJSON_=null,e.url)if(e.jsonp)Object(s.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(n.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=Object(a.get)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var s=Object(a.getTransformFromProjections)(r,n);e=Object(o.applyTransform)(t.bounds,s)}var l=t.minzoom||0,h=t.maxzoom||22,p=Object(c.createXYZ)({extent:Object(c.extentFromProjection)(n),maxZoom:h,minZoom:l});if(this.tileGrid=p,this.tileUrlFunction=Object(i.a)(t.tiles,p),void 0!==t.attribution&&!this.getAttributions()){var f=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return Object(o.intersects)(f,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(u.a.READY)},e.prototype.handleTileJSONError=function(){this.setState(u.a.ERROR)},e}(l.default);e.default=h},function(t,e,r){"use strict";r.r(e);var i=r(160),n=r(23),o=r(1),s=r(11),a=r(19),u=r(9),l=r(85),c=r(45),h=r(67),p=r(136),f=r(46),d=r(112),g=r(93),y=function(t){function e(e){var r=e||{},i=r.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:!n,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:v,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.gutter_=void 0!==r.gutter?r.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=r.serverType,this.hidpi_=void 0===r.hidpi||r.hidpi,this.tmpExtent_=Object(o.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,r,n){var a=Object(u.get)(r),h=this.getProjection(),p=this.getTileGrid();p||(p=this.getTileGridForProjection(a));var f=p.getTileCoordForCoordAndResolution(t,e);if(!(p.getResolutions().length<=f[0])){var d=p.getResolution(f[0]),g=p.getTileCoordExtent(f,this.tmpExtent_),y=Object(c.toSize)(p.getTileSize(f[0]),this.tmpSize),v=this.gutter_;0!==v&&(y=Object(c.buffer)(y,v,this.tmpSize),g=Object(o.buffer)(g,d*v,g)),h&&h!==a&&(d=Object(l.a)(h,a,t,d),g=Object(u.transformExtent)(g,a,h),t=Object(u.transform)(t,a,h));var m={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(s.assign)(m,this.params_,n);var _=Math.floor((t[0]-g[0])/d),b=Math.floor((g[3]-t[1])/d);return m[this.v13_?"I":"X"]=_,m[this.v13_?"J":"Y"]=b,this.getRequestUrl_(f,y,g,1,h||a,m)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,i,o,s){var u=this.urls;if(u){if(s.WIDTH=e[0],s.HEIGHT=e[1],s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=i)switch(this.serverType_){case p.a.GEOSERVER:var l=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+l:s.FORMAT_OPTIONS="dpi:"+l;break;case p.a.MAPSERVER:s.MAP_RESOLUTION=90*i;break;case p.a.CARMENTA_SERVER:case p.a.QGIS:s.DPI=90*i;break;default:Object(n.a)(!1,52)}var c,h,d=o.getAxisOrientation(),y=r;return this.v13_&&"ne"==d.substr(0,2)&&(c=r[0],y[0]=r[1],y[1]=c,c=r[2],y[2]=r[3],y[3]=c),s.BBOX=y.join(","),h=1==u.length?u[0]:u[Object(a.d)(Object(f.hash)(t),u.length)],Object(g.appendParams)(h,s)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){Object(s.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||i.a;this.v13_=Object(d.a)(t,"1.3")>=0},e}(h.default);function v(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var a=n.getResolution(t[0]),u=n.getTileCoordExtent(t,this.tmpExtent_),l=Object(c.toSize)(n.getTileSize(t[0]),this.tmpSize),h=this.gutter_;0!==h&&(l=Object(c.buffer)(l,h,this.tmpSize),u=Object(o.buffer)(u,a*h,u)),1!=e&&(l=Object(c.scale)(l,e,this.tmpSize));var p={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(s.assign)(p,this.params_),this.getRequestUrl_(t,l,u,e,r,p)}}e.default=y},function(t,e,r){"use strict";r.r(e),r.d(e,"CustomTile",function(){return y});var i=r(95),n=r(17),o=r(76),s=r(23),a=r(3),u=r(10),l=r(1),c=r(176),h=r(9),p=r(43),f=r(127),d=r(46),g=r(60),y=function(t){function e(e,r,i,n,o,s){t.call(this,e,r),this.src_=i,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof i)return null;var n=i.charCodeAt(Math.floor(e*i.length));n>=93&&n--,n>=35&&n--;var o=null;if((n-=32)in this.keys_){var s=this.keys_[n];o=this.data_&&s in this.data_?this.data_[s]:s}return o},e.prototype.forDataAtCoordinate=function(t,e,r,i){this.state==n.default.IDLE&&!0===i?(Object(a.listenOnce)(this,u.default.CHANGE,function(i){e.call(r,this.getData(t))},this),this.loadInternal_()):!0===i?setTimeout(function(){e.call(r,this.getData(t))}.bind(this),0):e.call(r,this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=n.default.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=n.default.EMPTY,this.changed()},e.prototype.loadInternal_=function(){if(this.state==n.default.IDLE)if(this.state=n.default.LOADING,this.jsonp_)Object(c.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(i.default),v=function(t){function e(e){if(t.call(this,{projection:Object(h.get)("EPSG:3857"),state:p.a.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=o.d,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)Object(c.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",e.url),r.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(s.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,i){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,r,null,i)}else!0===i?setTimeout(function(){r(null)},0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(p.a.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,r=Object(h.get)("EPSG:4326"),i=this.getProjection();if(void 0!==t.bounds){var n=Object(h.getTransformFromProjections)(r,i);e=Object(l.applyTransform)(t.bounds,n)}var s=t.minzoom||0,a=t.maxzoom||22,u=Object(g.createXYZ)({extent:Object(g.extentFromProjection)(i),maxZoom:a,minZoom:s});this.tileGrid=u,this.template_=t.template;var c=t.grids;if(c){if(this.tileUrlFunction_=Object(o.a)(c,u),void 0!==t.attribution){var f=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return Object(l.intersects)(f,e.extent)?[t.attribution]:null})}this.setState(p.a.READY)}else this.setState(p.a.ERROR)},e.prototype.getTile=function(t,e,r,i,o){var s=Object(d.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var a=[t,e,r],u=this.getTileCoordForTileUrlFunction(a,o),l=this.tileUrlFunction_(u,i,o),c=new y(a,void 0!==l?n.default.IDLE:n.default.EMPTY,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(s,c),c},e.prototype.useTile=function(t,e,r){var i=Object(d.getKeyZXY)(t,e,r);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(f.default);e.default=v},function(t,e,r){"use strict";r.r(e);var i=r(17),n=r(231),o=r(223),s=r(45),a=r(232),u=r(46),l=r(60),c=function(t){function e(e){var r=e.projection||"EPSG:3857",i=e.extent||Object(l.extentFromProjection)(r),s=e.tileGrid||Object(l.createXYZ)({extent:i,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:r,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:n.b,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:o.default,this.tileGrids_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,r,o,s){var a=Object(u.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(a))return this.tileCache.get(a);var l=[t,e,r],c=this.getTileCoordForTileUrlFunction(l,s),h=new n.a(l,null!==c?i.default.IDLE:i.default.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,c,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(s),this.sourceTiles_,o,s,this.tileClass,this.handleTileChange.bind(this),l[0]);return this.tileCache.set(a,h),h},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var i=this.tileGrid;r=this.tileGrids_[e]=Object(l.createForProjection)(t,void 0,i?i.getTileSize(i.getMinZoom()):void 0)}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var i=this.getTileGridForProjection(r),n=Object(s.toSize)(i.getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(a.default);e.default=c},function(t,e,r){"use strict";r.r(e),r.d(e,"CustomTile",function(){return d});var i=r(86),n=r(142),o=r(17),s=r(76),a=r(23),u=r(24),l=r(1),c=r(45),h=r(67),p=r(101),f={DEFAULT:"default",TRUNCATED:"truncated"},d=function(t){function e(e,r,i,n,o,s,a){t.call(this,r,i,n,o,s,a),this.zoomifyImage_=null,this.tileSize_=Object(c.toSize)(e.getTileSize(r[0]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==o.default.LOADED){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var i=Object(u.createCanvasContext2D)(r[0],r[1]);return i.drawImage(e,0,0),this.zoomifyImage_=i.canvas,i.canvas}return e},e}(n.default),g=function(t){function e(e){var r=e||{},n=r.size,o=void 0!==r.tierSizeCalculation?r.tierSizeCalculation:f.DEFAULT,u=n[0],c=n[1],h=r.extent||[0,-n[1],n[0],0],g=[],y=r.tileSize||i.b,v=y;switch(o){case f.DEFAULT:for(;u>v||c>v;)g.push([Math.ceil(u/v),Math.ceil(c/v)]),v+=v;break;case f.TRUNCATED:for(var m=u,_=c;m>v||_>v;)g.push([Math.ceil(m/v),Math.ceil(_/v)]),m>>=1,_>>=1;break;default:Object(a.a)(!1,53)}g.push([1,1]),g.reverse();for(var b=[1],S=[0],x=1,O=g.length;x<O;x++)b.push(1<<x),S.push(g[x-1][0]*g[x-1][1]+S[x-1]);b.reverse();var E=new p.default({tileSize:y,extent:h,origin:Object(l.getTopLeft)(h),resolutions:b}),C=r.url;C&&-1==C.indexOf("{TileGroup}")&&-1==C.indexOf("{tileIndex}")&&(C+="{TileGroup}/{z}-{x}-{y}.jpg");var T=Object(s.c)(C),P=Object(s.b)(T.map(function(t){return function(e,r,i){if(e){var n=e[0],o=e[1],s=-e[2]-1,a=o+s*g[n][0],u=E.getTileSize(n),l=Array.isArray(u)?u[0]:u,c={z:n,x:o,y:s,tileIndex:a,TileGroup:"TileGroup"+((a+S[n])/l|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return c[e]})}}})),w=d.bind(null,E);t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:w,tileGrid:E,tileUrlFunction:P,transition:r.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default);e.default=g},function(t,e,r){"use strict";r.r(e),r.d(e,"register",function(){return s});var i=r(9),n=r(83),o=r(126);function s(t){var e,r,s=Object.keys(t.defs),a=s.length;for(e=0;e<a;++e){var u=s[e];if(!Object(i.get)(u)){var l=t.defs(u);Object(i.addProjection)(new o.default({code:u,axisOrientation:l.axis,metersPerUnit:l.to_meter,units:l.units}))}}for(e=0;e<a;++e){var c=s[e],h=Object(i.get)(c);for(r=0;r<a;++r){var p=s[r],f=Object(i.get)(p);if(!Object(n.c)(c,p))if(t.defs[c]===t.defs[p])Object(i.addEquivalentProjections)([h,f]);else{var d=t(c,p);Object(i.addCoordinateTransforms)(h,f,d.forward,d.inverse)}}}}},function(t,e,r){"use strict";r.r(e),r.d(e,"toContext",function(){return s});var i=r(42),n=r(18),o=r(170);function s(t,e){var r=t.canvas,s=e||{},a=s.pixelRatio||i.DEVICE_PIXEL_RATIO,u=s.size;u&&(r.width=u[0]*a,r.height=u[1]*a,r.style.width=u[0]+"px",r.style.height=u[1]+"px");var l=[0,0,r.width,r.height],c=Object(n.h)(Object(n.c)(),a,a);return new o.default(t,a,l,c,0)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.ZDTileDebug=e.Layer=e.MapLayerSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.Doc=e.MapDocSource=e.MapDocTileLayer=e.MapDocTileSource=void 0;var i=r(506),n=r(534),o=r(376),s=r(535),a=r(536),u=r(537),l=r(538),c=r(548);e.MapDocTileSource=i.MapDocTileSource,e.MapDocTileLayer=i.MapDocTileLayer,e.MapDocSource=n.MapDocSource,e.Doc=n.Doc,e.CacheTileLayerSource=o.CacheTileLayerSource,e.CacheTileLayer=o.CacheTileLayer,e.TileLayerSource=s.TileLayerSource,e.TileLayer_mapgis=s.TileLayer_mapgis,e.MapLayerTileSource=a.MapLayerTileSource,e.GdbpLayer=a.GdbpLayer,e.MapLayerSource=u.MapLayerSource,e.Layer=u.Layer,e.ZDTileDebug=l.ZDTileDebug,e.BaiduMapSource=c.BaiduMapSource,e.BaiDuLayer=c.BaiDuLayer,e.GaodeMapSource=c.GaodeMapSource,e.GaoDeLayer=c.GaoDeLayer,e.TiandituMapSource=c.TiandituMapSource,e.TianDiTu=c.TianDiTu,e.GoogleMapSource=c.GoogleMapSource,e.GoogleLayer=c.GoogleLayer,e.ArcGISMapSource=c.ArcGISMapSource,e.ArcGISLayer=c.ArcGISLayer,e.OpenStreetMapSource=c.OpenStreetMapSource,e.OpenStreetLayer=c.OpenStreetLayer,e.TiandituType=c.TiandituType,e.GoogleLayerType=c.GoogleLayerType,e.ArcGISLayerType=c.ArcGISLayerType,e.OpenStreetLayerType=c.OpenStreetLayerType},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDocTileLayer=e.MapDocTileSource=void 0;var i=f(r(53)),n=r(6),o=r(22),s=f(r(67)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),u=(f(r(101)),r(4)),l=r(11),c=r(93),h=f(r(149)),p=r(9);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=void 0!==t?t:{};s.default.call(this,{attributions:e.attributions,extent:this.extent,tileExtent:this.tileExtent,ip:this.ip,port:this.port,logo:e.logo,opaque:e.opaque,tileGrid:this.zondyTileGrid,projection:r,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.token=e.token,this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null,void 0!==e.projection&&e.projection;var r=(0,p.createProjection)(e.projection,"EPSG:4326"),i=[-180,-90,180,90];null!=r&&e.projection?i=r.getExtent():e.extent&&(e.extent[0]<200&&e.extent[2]<200&&e.extent[1]<120&&e.extent[3]<120?(e.projection="EPSG:4326",i=(0,p.createProjection)(e.projection,"EPSG:4326").getExtent()):(e.projection="EPSG:3857",i=(0,p.createProjection)(e.projection,"EPSG:3857").getExtent())),this.extent=void 0!==e.extent?e.extent:i,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:a.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.layers=void 0!=e.layers?e.layers:null,this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.proj=void 0!=e.proj?e.proj:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.cache=!1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:ol.tilegrid.createXYZ({extent:i,maxZoom:this.maxZoom,minZoom:this.minZoom,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name:this.url_=this.domain+"/igs/rest/mrms/docs/"+this.name};(0,u.inherits)(d,s.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=a.getWidth(this.extent),e=a.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},d.prototype.tileUrlFunctionExtend=function(t,e,r){var n=this.tileGrid;if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){if(null!=n){var o=n.getTileRangeForExtentAndZ(this.extent,t[0],o);if(!o.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var s={f:this.f,cache:!1,rlt:this.rlt,guid:this.guid};null!=this.style&&(s.style=(0,i.default)(this.style)),null!=this.proj&&(s.proj=(0,i.default)(this.proj)),null!=this.layers&&(s.layers=this.layers),null!=this.filters&&(s.filters=this.filters),this.token&&(s.token=this.token);var a={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},u=n.getTileRangeExtent(t[0],a,null);return s.w=this.tileSize,s.h=this.tileSize,s.bbox=u.join(","),(0,c.appendParams)(this.url_,s)}},e.MapDocTileSource=d,n.Zondy.Source.MapDocTileSource=d;var g=function(t,e,r){var i=void 0!==r?r:{};i.layerName=t,i.name=e,i.source=i.source?i.source:new d(i);var n=(0,l.assign)({},i);n.maxResolution=1/0,h.default.call(this,n),this.options={},(0,l.assign)(this.options,i),(0,l.assign)(this,i)};(0,u.inherits)(g,h.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,l.assign)(this.options,{guid:t}),this.options.source=new d(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(0,l.assign)(this.options,{style:t})},g.prototype.setLayerStatus=function(t,e){if(null!=t&&null!=e){var r=e+":"+t;(0,l.assign)(this.options,{layers:r}),this.refresh()}},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(0,l.assign)(this.options,{filters:t})},e.MapDocTileLayer=g,n.Zondy.Map.MapDocTileLayer=g},function(t,e,r){var i=r(54),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},function(t,e,r){r(509),t.exports=r(54).Object.keys},function(t,e,r){var i=r(198),n=r(199);r(202)("keys",function(){return function(t){return n(i(t))}})},function(t,e,r){var i=r(162),n=r(365),o=r(511);t.exports=function(t){return function(e,r,s){var a,u=i(e),l=n(u.length),c=o(s,l);if(t&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},function(t,e,r){var i=r(293),n=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?n(t+e,0):o(t,e)}},function(t,e,r){r(513);var i=r(54).Object;t.exports=function(t,e,r){return i.defineProperty(t,e,r)}},function(t,e,r){var i=r(113);i(i.S+i.F*!r(138),"Object",{defineProperty:r(146).f})},function(t,e,r){r(515);var i=r(54).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,r){var i=r(162),n=r(300).f;r(202)("getOwnPropertyDescriptor",function(){return function(t,e){return n(i(t),e)}})},function(t,e,r){t.exports={default:r(517),__esModule:!0}},function(t,e,r){r(367),t.exports=r(54).Object.getOwnPropertySymbols},function(t,e,r){var i=r(199),n=r(243),o=r(241);t.exports=function(t){var e=i(t),r=n.f;if(r)for(var s,a=r(t),u=o.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,r){var i=r(200);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,r){var i=r(146),n=r(122),o=r(199);t.exports=r(138)?Object.defineProperties:function(t,e){n(t);for(var r,s=o(e),a=s.length,u=0;a>u;)i.f(t,r=s[u++],e[r]);return t}},function(t,e,r){r(522);var i=r(54).Object;t.exports=function(t){return i.getOwnPropertyNames(t)}},function(t,e,r){r(202)("getOwnPropertyNames",function(){return r(371).f})},function(t,e,r){t.exports={default:r(524),__esModule:!0}},function(t,e,r){r(305),r(306),t.exports=r(301).f("iterator")},function(t,e,r){var i=r(293),n=r(292);t.exports=function(t){return function(e,r){var o,s,a=String(n(e)),u=i(r),l=a.length;return u<0||u>=l?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,r){"use strict";var i=r(303),n=r(239),o=r(242),s={};r(163)(s,r(106)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=i(s,{next:n(1,r)}),o(t,e+" Iterator")}},function(t,e,r){"use strict";var i=r(528),n=r(529),o=r(204),s=r(162);t.exports=r(373)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(531),__esModule:!0}},function(t,e,r){r(367),r(375),r(532),r(533),t.exports=r(54).Symbol},function(t,e,r){r(302)("asyncIterator")},function(t,e,r){r(302)("observable")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Doc=e.MapDocSource=void 0;var i=r(6),n=r(22),o=r(75),s=y(o),a=y(r(224)),u=y(r(109)),l=g(r(1)),c=g(r(3)),h=g(r(10)),p=r(4),f=r(11),d=r(93);function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){var e=t||{};s.default.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.token=e.token,this.mode=void 0!==e.mode?e.mode:"normal",this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.f=void 0!==e.f?e.f:"png",this.layers=void 0!==e.layers?e.layers:null,this.filters=void 0!==e.filters?e.filters:null,this.style=void 0!==e.style?e.style:null,this.proj=void 0!==e.proj?e.proj:null,this.guid=void 0!==e.guid?e.guid:(0,n.newGuid)(),this.rlt=Math.random(),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:o.defaultImageLoadFunction,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.2,this.isAntialiasing=void 0!==e.isAntialiasing?e.isAntialiasing:null,this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name:this.url_=this.domain+"/igs/rest/mrms/docs/"+this.name};(0,p.inherits)(v,s.default),v.prototype.getImage=function(t,e,r,i){if(void 0===this.url_)return null;e=this.findNearestResolution(e);var o=this.image_;if(o&&this.renderedRevision_===this.getRevision()&&o.getResolution()===e&&o.getPixelRatio()===r&&l.containsExtent(o.getExtent(),t))return o;null===this.guid&&(this.guid=(0,n.newGuid)());var s={f:this.f,cache:!1,rlt:this.rlt,guid:this.guid};null!==this.style&&(0,f.assign)(s,{style:$.toJSON(this.style)}),null!==this.proj&&(0,f.assign)(s,{proj:$.toJSON(this.proj)}),null!==this.layers&&(0,f.assign)(s,{layers:this.layers}),null!==this.filters&&(0,f.assign)(s,{filters:this.filters}),null!==this.mode&&(0,f.assign)(s,{mode:this.mode}),null!==this.isAntialiasing&&(0,f.assign)(s,{isAntialiasing:this.isAntialiasing});var a=((t=t.slice())[0]+t[2])/2,p=(t[1]+t[3])/2;if(1!==this.ratio_){var d=this.ratio_*l.getWidth(t)/2,g=this.ratio_*l.getHeight(t)/2;t[0]=a-d,t[1]=p-g,t[2]=a+d,t[3]=p+g}var y=e/r,v=Math.ceil(l.getWidth(t)/y),m=Math.ceil(l.getHeight(t)/y);t[0]=a-y*v/2,t[2]=a+y*v/2,t[1]=p-y*m/2,t[3]=p+y*m/2,this.imageSize_[0]=v,this.imageSize_[1]=m;var _=this.getRequestUrl_(t,this.imageSize_,r,i,s);return this.image_=new u.default(t,e,r,_,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),c.listen(this.image_,h.default.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getRequestUrl_=function(t,e,r,i,n){return(0,f.assign)(n,{w:e[0]}),(0,f.assign)(n,{h:e[1]}),null!==this.layers&&(0,f.assign)(n,{layers:this.layers}),i.getAxisOrientation(),(0,f.assign)(n,{bbox:t.join(",")}),this.token&&(0,f.assign)(n,{token:this.token}),(0,d.appendParams)(this.url_,n)},e.MapDocSource=v,i.Zondy.Source.MapDocSource=v;var m=function(t,e,r){this.options=r||{},(0,f.assign)(this.options,{layerName:t}),(0,f.assign)(this.options,{name:e}),a.default.call(this,this.options),this.style=void 0!==this.options.style?this.options.style:null,this.filters=void 0!==this.options.filters?this.options.filters:null,this.layers=void 0!==this.options.layers?this.options.layers:null,this.isAntialiasing=void 0!==this.options.isAntialiasing?this.options.isAntialiasing:null,this.source=void 0!==this.options.source?this.options.source:null,null===this.source&&(this.source=new i.Zondy.Source.MapDocSource(this.options)),this.setSource(this.source),(0,f.assign)(this,this.options)};(0,p.inherits)(m,a.default),m.prototype.refresh=function(){this.setSource(null);var t=this.source.guid;(0,f.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,f.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,f.assign)(this.options,{filters:this.filters}),void 0!==this.layers&&null!==this.layers&&(0,f.assign)(this.options,{layers:this.layers}),void 0!==this.isAntialiasing&&null!==this.isAntialiasing&&(0,f.assign)(this.options,{isAntialiasing:this.isAntialiasing}),this.source=new i.Zondy.Source.MapDocSource(this.options),this.setSource(this.source)},m.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},m.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t)},m.prototype.setLayerStatus=function(t,e){if(null!==t&&null!==e){var r=e+":"+t;this.layers=r,this.refresh()}},m.prototype.setFilters=function(t){null!==t&&""!==t.toString()&&(this.filters=t)},e.Doc=m,i.Zondy.Map.Doc=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer_mapgis=e.TileLayerSource=void 0;var i=r(6),n=(r(22),h(r(67))),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),s=h(r(101)),a=r(4),u=r(11),l=h(r(149)),c=r(376);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){var e=t||{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:void 0!==e.wrapX&&e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.token=e.token,this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var r=void 0!==e.projection?e.projection:null,i=[-180,-90,180,90];null!=r&&(i=r.getExtent()),this.extent=void 0!==e.extent?e.extent:i,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileOriginType=void 0!==e.tileOriginType?e.tileOriginType:"leftTop",this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!=e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(p,n.default),p.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.extent),e=o.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},p.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n;n=""===this.domain?this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/tile/"+this.name+"/{z}/{y}/{x}?size="+this.tileSize:this.domain+"/igs/rest/mrms/tile/"+this.name+"/{z}/{y}/{x}?size="+this.tileSize,this.token&&(n+="&token="+this.token);var o=(this.extent[3]-this.extent[1])/2+this.extent[1];if("lefttop"==this.tileOriginType.toLowerCase()||this.origin[1]>=o)var s=t[0],a=t[1],u=-(t[2]+1);else if(s=t[0],a=t[1],u=t[2],a>=Math.pow(2,s)||u>=Math.pow(2,s))return;return n.replace("{x}",a.toString()).replace("{y}",u.toString()).replace("{z}",s.toString())},e.TileLayerSource=p,i.Zondy.Source.TileLayerSource=p;var f=function(t,e,r){var n=r||{};(0,u.assign)(n,{layerName:t}),(0,u.assign)(n,{name:e});var o=(0,u.assign)({},n);if(o.maxResolution=1/0,l.default.call(this,o),this.isAutoConfig=void 0===n.isAutoConfig||null==n.isAutoConfig||n.isAutoConfig,this.cache=void 0!==n.cache&&n.cache,this.source=void 0!==n.source?n.source:null,null==this.source)if(this.isAutoConfig){var s={domain:n.domain,networkProtocol:n.networkProtocol,ip:n.ip,port:n.port,mapName:e,layerObj:this,paraObj:n};n.token&&(0,u.assign)(s,{token:n.token}),new i.Zondy.Service.GetMapInfoService(s).GetMapInfo(function(t){var e=(0,u.assign)({},this.paraObj);e.name=t.name,e.extent=[t.xMin,t.yMin,t.xMax,t.yMax],e.tileOriginType=t.originType,e.resolutions=t.resolutions,e.tileSize=t.tileWidth,e.origin=[t.originX,t.originY],e.maxZoom=t.endLevel,"dtile"==t.type.toLowerCase()&&(this.layerObj.cache=!0),t.xMax-t.xMin<=1e-6&&t.yMax-t.yMin<=1e-6?alert("获取数据范围失败！"):(this.layerObj.cache?this.layerObj.source=new c.CacheTileLayerSource(e):this.layerObj.source=new p(e),this.layerObj.setSource(this.layerObj.source))},function(){alert("请求失败！")},null)}else this.cache?this.source=new c.CacheTileLayerSource(n):this.source=new p(n),this.setSource(this.source);(0,u.assign)(this,n)};(0,a.inherits)(f,l.default),e.TileLayer_mapgis=f,i.Zondy.Map.TileLayer=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GdbpLayer=e.MapLayerTileSource=void 0;var i=f(r(53)),n=r(6),o=r(22),s=f(r(67)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),u=f(r(101)),l=r(4),c=r(11),h=r(93),p=f(r(149));function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=void 0!==t?t:{};if(s.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,projection:e.projection,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.gdbps=void 0!==e.gdbps?e.gdbps:null,null!=this.gdbps){this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var r=void 0!==e.projection?e.projection:null,i=[-180,-90,180,90];null!=r&&(i=r.getExtent()),this.extent=void 0!==e.extent?e.extent:i,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:a.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.tileGrid=new u.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,this.proj=e.proj,this.mapstyUri=e.mapstyUri,this.mapstyOption=e.mapstyOption,""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/layers":this.url_=this.domain+"/igs/rest/mrms/layers"}else alert("当前没有赋值要显示的矢量图层！")};(0,l.inherits)(d,s.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=a.getWidth(this.extent),e=a.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},d.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var o={f:this.f,rlt:this.rlt,guid:this.guid,mapstyUri:"",mapstyOption:{}};null!=this.gdbps&&""!=this.gdbps&&(0,c.assign)(o,{gdbps:this.gdbps.join(",")}),null!=this.style&&(0,c.assign)(o,{style:(0,i.default)(this.style)}),null!=this.filters&&(0,c.assign)(o,{filters:this.filters}),null!=this.proj&&(0,c.assign)(o,{proj:this.proj});var s={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},a=this.tileGrid.getTileRangeExtent(t[0],s,null);return o.w=this.tileSize,o.h=this.tileSize,o.bbox=a.join(","),o.mapstyUri=this.mapstyUri,o.mapstyOption=(0,i.default)(this.mapstyOption),(0,h.appendParams)(this.url_,o)},e.MapLayerTileSource=d,n.Zondy.Source.MapLayerTileSource=d;var g=function(t,e,r){var i=r||{};(0,c.assign)(i,{layerName:t}),(0,c.assign)(i,{gdbps:e}),(0,c.assign)(i,{source:i.source?i.source:new d(i)}),p.default.call(this,i),this.options={},(0,c.assign)(this.options,i),(0,c.assign)(this,i)};(0,l.inherits)(g,p.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,c.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,c.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,c.assign)(this.options,{filters:this.filters}),this.options.source=new d(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t,(0,c.assign)(this.options,{style:t}))},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(this.filters=t,(0,c.assign)(this.options,{filters:t}))},e.GdbpLayer=g,n.Zondy.Map.GdbpLayer=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=e.MapLayerSource=void 0;var i=r(6),n=r(22),o=f(r(75)),s=r(1),a=(f(s),p(r(101)),r(4)),u=p(r(109)),l=r(11),c=r(93),h=p(r(224));function p(t){return t&&t.__esModule?t:{default:t}}function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var d=function(t){var e=t||{};ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.gdbps=void 0!==e.gdbps?e.gdbps:null,null!=this.gdbps?(this.f=void 0!==e.f?e.f:"png",this.rlt=Math.random(),this.filters=void 0!==e.filters?e.filters:null,this.style=void 0!==e.style?e.style:null,this.guid=void 0!==e.guid?e.guid:i.Zondy.Util.newGuid(),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:o.defaultImageLoadFunction,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5,this.url_="http://"+this.ip+":"+this.port+"/igs/rest/mrms/layers"):alert("当前没有赋值要显示的矢量图层！")};(0,a.inherits)(d,o.default),d.prototype.getImage=function(t,e,r,i){if(void 0==this.url_)return null;e=this.findNearestResolution(e);var o=this.image_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==r&&(0,s.containsExtent)(o.getExtent(),t))return o;null==this.guid&&(this.guid=(0,n.newGuid)());var a={f:this.f,rlt:this.rlt,guid:this.guid};null!=this.gdbps&&""!=this.gdbps&&(0,l.assign)(a,{gdbps:this.gdbps.join(",")}),null!=this.style&&(0,l.assign)(a,{style:$.toJSON(this.style)}),null!=this.filters&&(0,l.assign)(a,{filters:this.filters});var c=((t=t.slice())[0]+t[2])/2,h=(t[1]+t[3])/2;if(1!=this.ratio_){var p=this.ratio_*(0,s.getWidth)(t)/2,f=this.ratio_*(0,s.getHeight)(t)/2;t[0]=c-p,t[1]=h-f,t[2]=c+p,t[3]=h+f}var d=e/r,g=Math.ceil((0,s.getWidth)(t)/d),y=Math.ceil((0,s.getHeight)(t)/d);t[0]=c-d*g/2,t[2]=c+d*g/2,t[1]=h-d*y/2,t[3]=h+d*y/2,this.imageSize_[0]=g,this.imageSize_[1]=y;var v=this.getRequestUrl_(t,this.imageSize_,r,i,a);return this.image_=new u.default(t,e,r,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_},d.prototype.getRequestUrl_=function(t,e,r,i,n){(0,l.assign)(n,{w:e[0]}),(0,l.assign)(n,{h:e[1]}),null!=this.layers&&(0,l.assign)(n,{layers:this.layers}),i.getAxisOrientation();var o=t;return(0,l.assign)(n,{bbox:o.join(",")}),(0,c.appendParams)(this.url_,n)},d.prototype.getUrl=function(){return this.url_},d.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.MapLayerSource=d,i.Zondy.Source.MapLayerSource=d;var g=function(t,e,r){this.options=r||{},ol.layer.Image.call(this,this.options),(0,l.assign)(this.options,{layerName:t}),(0,l.assign)(this.options,{gdbps:e}),this.style=void 0!==this.options.style?this.options.style:null,this.filters=void 0!==this.options.filters?this.options.filters:null,this.source=void 0!==this.options.source?this.options.source:null,null==this.source&&(this.source=new i.Zondy.Source.MapLayerSource(this.options)),this.setSource(this.source),(0,l.assign)(this,this.options)};(0,a.inherits)(g,h.default),g.prototype.refresh=function(){this.setSource(null);var t=this.source.guid;(0,l.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,l.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,l.assign)(this.options,{filters:this.filters}),this.source=new i.Zondy.Source.MapLayerSource(this.options),this.setSource(this.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t)},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(this.filters=t)},e.Layer=g,i.Zondy.Map.Layer=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZDTileDebug=void 0;var i=g(r(12)),n=g(r(8)),o=g(r(16)),s=g(r(13)),a=g(r(14)),u=r(6),l=g(r(95)),c=g(r(17)),h=r(24),p=r(45),f=g(r(127)),d=r(46);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,c.default.LOADED));return a.tileSize_=r,a.text_=o,a.canvas_=null,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getImage",value:function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,h.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas}},{key:"load",value:function(){}}]),e}(l.default),v=function(t){function e(t){return(0,n.default)(this,e),(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX}))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getTile",value:function(t,e,r){var i=(0,d.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(i))return this.tileCache.get(i);var n=(0,p.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,r],s=this.getTileCoordForTileUrlFunction(o),a=(s?this.getTileCoordForTileUrlFunction(s).toString():"").split(",");a[2]=-a[2]-1;var u=a.join(","),l=new y(o,n,u);return this.tileCache.set(i,l),l}}]),e}(f.default);e.ZDTileDebug=v,u.Zondy.Map.ZDTileDebug=v},function(t,e,r){r(540),t.exports=r(54).Object.getPrototypeOf},function(t,e,r){var i=r(198),n=r(374);r(202)("getPrototypeOf",function(){return function(t){return n(i(t))}})},function(t,e,r){t.exports={default:r(542),__esModule:!0}},function(t,e,r){r(543),t.exports=r(54).Object.setPrototypeOf},function(t,e,r){var i=r(113);i(i.S,"Object",{setPrototypeOf:r(544).set})},function(t,e,r){var i=r(137),n=r(122),o=function(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=r(203)(Function.call,r(300).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:i(t,r),t}}({},!1):void 0),check:o}},function(t,e,r){t.exports={default:r(546),__esModule:!0}},function(t,e,r){r(547);var i=r(54).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,r){var i=r(113);i(i.S,"Object",{create:r(303)})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=void 0;var i=r(6),n=(r(22),p(r(67))),o=h(r(1)),s=p(r(101)),a=r(4),u=p(r(149)),l=h(r(9)),c=r(9);function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var r=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=r?r.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:[0,0],this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(f,n.default),f.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},f.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n=t[0],o=t[1],s=t[2];return"http://online2.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20141219&scaler=1".replace("{z}",n.toString()).replace("{y}",s.toString()).replace("{x}",o.toString())},e.BaiduMapSource=f,i.Zondy.Source.BaiduMapSource=f;var d=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new f(e),this.setSource(this.source))};(0,a.inherits)(d,u.default),e.BaiDuLayer=d,i.Zondy.Map.BaiDuLayer=d;var g=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=null;var r=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=r?r.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=18?e.maxZoom:18,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(g,n.default),g.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},g.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n=["http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd03.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}"],o=t[0],s=t[1],a=-(t[2]+1);return n[Math.round(Math.random()*(n.length-1))].replace("{z}",o.toString()).replace("{y}",a.toString()).replace("{x}",s.toString())},e.GaodeMapSource=g,i.Zondy.Source.GaodeMapSource=g;var y=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new g(e),this.setSource(this.source))};(0,a.inherits)(y,u.default),e.GaoDeLayer=y,i.Zondy.Map.GaoDeLayer=y;var v=function(t){var e,r=void 0!==t?t:{};n.default.call(this,{attributions:r.attributions,logo:r.logo,opaque:r.opaque,projection:r.projection,state:void 0!==r.state?r.state:void 0,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,crossOrigin:void 0!==r.crossOrigin?r.crossOrigin:null}),this.layerType=void 0!==r.layerType?r.layerType:i.Zondy.Enum.Map.TiandituType.VEC,this.tileMatrixSet=void 0!==r.tileMatrixSet?r.tileMatrixSet:"c",this.ip=void 0!==r.ip?r.ip:"127.0.0.1",this.port=void 0!==r.port?r.port:"6163",this.networkProtocol=void 0!==r.networkProtocol?r.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=r&&r.domain?r.domain:"",""===this.domain?this.domainStr=this.networkProtocol+"://"+this.ip+":"+this.port:this.domainStr=this.domain,this.maxResolution=null,"w"===this.tileMatrixSet&&(e="EPSG:3857");var a=(0,c.createProjection)(e,"EPSG:4326");this.tileExtent=[-180,-90,180,90],null!=a&&(this.tileExtent=a.getExtent()),this.extent=void 0!==r.extent?r.extent:this.tileExtent,this.origin=void 0!==r.origin?r.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==r.maxZoom&&r.maxZoom<=18?r.maxZoom:18,this.tileSize=void 0!==r.tileSize?r.tileSize:256,this.resolutions=this.getResolutions(),this.custom=void 0!==r.custom?r.custom:null,this.token=r.token,this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==r.tileUrlFunction?r.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(v,n.default),v.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},v.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var o="";if(null!==this.custom&&void 0!==this.custom){if(void 0===this.custom.baseURL)return;this.custom.layer=this.custom.layer?this.custom.layer:i.Zondy.Enum.Map.TiandituType.VEC,this.custom.version=this.custom.version?this.custom.version:"1.0.0",o=this.custom.baseURL.indexOf("?")>0?this.custom.baseURL+"&SERVICE=WMTS&REQUEST=GetTile&VERSION="+this.custom.version+"&LAYER="+this.custom.layer+"&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":this.custom.baseURL+"?SERVICE=WMTS&REQUEST=GetTile&VERSION="+this.custom.version+"&LAYER="+this.custom.layer+"&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}"}else switch(this.layerType){case i.Zondy.Enum.Map.TiandituType.VEC:case i.Zondy.Enum.TiandituType.VEC:o="w"===this.tileMatrixSet?"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case i.Zondy.Enum.Map.TiandituType.IMG:case i.Zondy.Enum.TiandituType.IMG:o="w"===this.tileMatrixSet?"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/img_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case i.Zondy.Enum.Map.TiandituType.CVA:case i.Zondy.Enum.TiandituType.CVA:o="w"===this.tileMatrixSet?"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case i.Zondy.Enum.Map.TiandituType.CIA:case i.Zondy.Enum.TiandituType.CIA:o="w"===this.tileMatrixSet?"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":"http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cia_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case i.Zondy.Enum.Map.TiandituType.VEC_IGS:case i.Zondy.Enum.TiandituType.VEC_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/vector/{x}/{y}/{z}";break;case i.Zondy.Enum.Map.TiandituType.IMG_IGS:case i.Zondy.Enum.TiandituType.IMG_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/raster/{x}/{y}/{z}";break;case i.Zondy.Enum.Map.TiandituType.CVA_IGS:case i.Zondy.Enum.TiandituType.CVA_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/vectorAnno/{x}/{y}/{z}";break;case i.Zondy.Enum.Map.TiandituType.CIA_IGS:case i.Zondy.Enum.TiandituType.CIA_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/rasterAnno/{x}/{y}/{z}"}var s="";void 0!=this.token&&""!=this.token&&(s="tk="+this.token,o.indexOf("?")>0?o+="&"+s:o+="?"+s);var a=t[0],u=t[1],l=-(t[2]+1);return o.replace("{x}",u.toString()).replace("{y}",l.toString()).replace("{z}",a.toString())},e.TiandituMapSource=v,i.Zondy.Source.TiandituMapSource=v;var m=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new v(e),this.setSource(this.source))};(0,a.inherits)(m,u.default),e.TianDiTu=m,i.Zondy.Map.TianDiTu=m;var _=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,wrapX:e.wrapX,tilePixelRatio:e.tilePixelRatio,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:null,this.port=void 0!==e.port?e.port:null,this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",""===this.domain?this.domainStr=this.networkProtocol+"://"+this.ip+":"+this.port:this.domainStr=this.domain,this.layerType=void 0!==e.layerType?e.layerType:i.Zondy.Enum.Map.GoogleLayerType.VEC,this.maxResolution=null;var r=void 0!==e.projection?e.projection:null;this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=r&&(this.tileExtent=r.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=24?e.maxZoom:24,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.getBaseURL(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(_,n.default),_.prototype.getBaseURL=function(){var t="";switch(this.layerType){case i.Zondy.Enum.Map.GoogleLayerType.VEC:case i.Zondy.Enum.GoogleLayerType.VEC:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&s=Galile";break;case i.Zondy.Enum.Map.GoogleLayerType.RASTER:case i.Zondy.Enum.GoogleLayerType.RASTER:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=s@173&hl=zh-Hans-CN&gl=CN&token=63145";break;case i.Zondy.Enum.Map.GoogleLayerType.ROAD:case i.Zondy.Enum.GoogleLayerType.ROAD:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/imgtp=png32&lyrs=h@248000000,highlight:0x342eaef8dd85f26f:0x39c2c9ac6c582210@1%7Cstyle:maps&hl=zh-CN&gl=CN&src=app&s=Galileo";break;case i.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case i.Zondy.Enum.GoogleLayerType.TERRAIN:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=t&scale=1";break;case i.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case i.Zondy.Enum.GoogleLayerType.VEC_IGS:t=this.domain+"/igs/rest/cts/google/vector/";break;case i.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case i.Zondy.Enum.GoogleLayerType.RASTER_IGS:t=this.domain+"/igs/rest/cts/google/raster/";break;case i.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case i.Zondy.Enum.GoogleLayerType.ROAD_IGS:t=this.domain+"/igs/rest/cts/google/road/";break;case i.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case i.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:t=this.domain+"/igs/rest/cts/google/terrain/"}return t},_.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},_.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var o="";switch(this.layerType){case i.Zondy.Enum.Map.GoogleLayerType.VEC:case i.Zondy.Enum.GoogleLayerType.VEC:case i.Zondy.Enum.Map.GoogleLayerType.RASTER:case i.Zondy.Enum.GoogleLayerType.RASTER:case i.Zondy.Enum.Map.GoogleLayerType.ROAD:case i.Zondy.Enum.GoogleLayerType.ROAD:case i.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case i.Zondy.Enum.GoogleLayerType.TERRAIN:o=this.baseURL+"&x={x}&y={y}&z={z}";break;case i.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case i.Zondy.Enum.GoogleLayerType.VEC_IGS:case i.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case i.Zondy.Enum.GoogleLayerType.RASTER_IGS:case i.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case i.Zondy.Enum.GoogleLayerType.ROAD_IGS:case i.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case i.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:o=this.baseURL+"{x}/{y}/{z}"}var s=t[0],a=t[1],u=-(t[2]+1);return o.replace("{x}",a.toString()).replace("{y}",u.toString()).replace("{z}",s.toString())},e.GoogleMapSource=_,i.Zondy.Source.GoogleMapSource=_;var b=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new _(e),this.setSource(this.source))};(0,a.inherits)(b,u.default),e.GoogleLayer=b,i.Zondy.Map.GoogleLayer=b;var S=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:i.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase,this.maxResolution=null;var r=void 0!==e.projection?e.projection:this.initProjection();this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=r&&(this.tileExtent=r.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom?e.maxZoom<=20?e.maxZoom:20:this.initMaxZoom(),this.tileSize=void 0!==e.tileSize?e.tileSize:this.initTileSize(),this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:"http://services.arcgisonline.com/ArcGIS/rest/services/",this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(S,n.default),S.prototype.initTileSize=function(){var t=256;switch(this.layerType){case i.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case i.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=512;break;default:t=256}return t},S.prototype.initProjection=function(){var t=null;switch(this.layerType){case i.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case i.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=l.get("EPSG:4326");break;default:t=l.get("EPSG:3857")}return t},S.prototype.initMaxZoom=function(){var t=null;switch(this.layerType){case i.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case i.Zondy.Enum.Map.ArcGISLayerType.USATopoMaps:case i.Zondy.Enum.ArcGISLayerType.USATopoMaps:t=16;break;case i.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case i.Zondy.Enum.ArcGISLayerType.TopoUS2D:case i.Zondy.Enum.Map.ArcGISLayerType.WorldShadedRelief:case i.Zondy.Enum.ArcGISLayerType.WorldShadedRelief:case i.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase:case i.Zondy.Enum.ArcGISLayerType.WorldTerrainBase:t=14;break;case i.Zondy.Enum.Map.ArcGISLayerType.WorldPhysical:case i.Zondy.Enum.ArcGISLayerType.WorldPhysical:t=9;break;case i.Zondy.Enum.Map.ArcGISLayerType.WorldStreet:case i.Zondy.Enum.ArcGISLayerType.WorldStreet:case i.Zondy.Enum.Map.ArcGISLayerType.WorldTopo:case i.Zondy.Enum.ArcGISLayerType.WorldTopo:case i.Zondy.Enum.Map.ArcGISLayerType.WorldImagery:case i.Zondy.Enum.ArcGISLayerType.WorldImagery:t=20;break;case i.Zondy.Enum.Map.ArcGISLayerType.NatGeoWorldMap:case i.Zondy.Enum.ArcGISLayerType.NatGeoWorldMap:case i.Zondy.Enum.Map.ArcGISLayerType.OceanBasemap:case i.Zondy.Enum.ArcGISLayerType.OceanBasemap:t=17}return t},S.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},S.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n=this.baseURL+this.layerType+"/MapServer/tile/{z}/{y}/{x}.jpg",o=t[0],s=t[1],a=Math.pow(2,o)-1-t[2];return n.replace("{x}",s.toString()).replace("{y}",a.toString()).replace("{z}",o.toString())},e.ArcGISMapSource=S,i.Zondy.Source.ArcGISMapSource=S;var x=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new S(e),this.setSource(this.source))};(0,a.inherits)(x,u.default),e.ArcGISLayer=x,i.Zondy.Map.ArcGISLayer=x;var O=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:i.Zondy.Enum.Map.OpenStreetLayerType.OSM,this.maxResolution=null;var r=void 0!==e.projection?e.projxResolutionection:l.get("EPSG:3857");this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=r&&(this.tileExtent=r.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=20?e.maxZoom:20,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.GetUrlFormat(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(O,n.default),O.prototype.GetUrlFormat=function(){var t=null;switch(this.layerType){case i.Zondy.Enum.Map.OpenStreetLayerType.LandScape:case i.Zondy.Enum.OpenStreetLayerType.LandScape:t="http://"+"abc"[Math.round(2*Math.random())]+".tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.CYCLE:case i.Zondy.Enum.OpenStreetLayerType.CYCLE:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.opencyclemap.org/cycle/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.CycleTransport:case i.Zondy.Enum.OpenStreetLayerType.CycleTransport:t="http://"+"abc"[Math.round(2*Math.random())]+".tile2.opencyclemap.org/transport/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.OSM:case i.Zondy.Enum.OpenStreetLayerType.OSM:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.openstreetmap.org/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.OSM_HYB:case i.Zondy.Enum.OpenStreetLayerType.OSM_HYB:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/hyb/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.OSM_Quest:case i.Zondy.Enum.OpenStreetLayerType.OSM_Quest:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png";break;case i.Zondy.Enum.Map.OpenStreetLayerType.OSM_Q_SAT:case i.Zondy.Enum.OpenStreetLayerType.OSM_Q_SAT:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg"}return t},O.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var r=new Array(this.maxZoom),i=0;i<this.maxZoom;++i)r[i]=this.maxResolution/Math.pow(2,i);return r},O.prototype.tileUrlFunctionExtend=function(t,e,r){if(null!=this.tileGrid){var i=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],i);if(!i.contains(t))return}var n=t[0],o=t[1],s=Math.pow(2,n)-1-t[2];return this.baseURL.replace("{x}",o.toString()).replace("{y}",s.toString()).replace("{z}",n.toString())},e.OpenStreetMapSource=O,i.Zondy.Source.OpenStreetMapSource=O;var E=function(t){var e=void 0!==t?t:{};u.default.call(this,e),void 0==e.source&&(this.source=new O(e),this.setSource(this.source))};(0,a.inherits)(E,u.default),e.OpenStreetLayer=E,i.Zondy.Map.OpenStreetLayer=E;var C={VEC:"vec",IMG:"img",CVA:"cva",CIA:"cia",VEC_IGS:"vec_igs",IMG_IGS:"img_igs",CVA_IGS:"cva_igs",CIA_IGS:"cia_igs"};e.TiandituType=C,i.Zondy.Enum.Map.TiandituType=i.Zondy.Enum.TiandituType=C;var T={VEC:"vector",RASTER:"raster",ROAD:"road",TERRAIN:"terrain",VEC_IGS:"vector_igs",RASTER_IGS:"raster_igs",ROAD_IGS:"road_igs",TERRAIN_IGS:"terrain_igs"};e.GoogleLayerType=T,i.Zondy.Enum.Map.GoogleLayerType=i.Zondy.Enum.GoogleLayerType=T;var P={ImageryWorld2D:"ESRI_Imagery_World_2D",StreetMapWorld2D:"ESRI_StreetMap_World_2D",TopoUS2D:"NGS_Topo_US_2D",WorldImagery:"World_Imagery",WorldPhysical:"World_Physical_Map",WorldShadedRelief:"World_Shaded_Relief",WorldStreet:"World_Street_Map",WorldTerrainBase:"World_Terrain_Base",WorldTopo:"World_Topo_Map",NatGeoWorldMap:"NatGeo_World_Map",OceanBasemap:"Ocean_Basemap",USATopoMaps:"USA_Topo_Maps"};e.ArcGISLayerType=P,i.Zondy.Enum.Map.ArcGISLayerType=i.Zondy.Enum.ArcGISLayerType=P;var w={LandScape:"landscape",CYCLE:"cycle",CycleTransport:"transport",OSM:"openstreetmap",OSM_HYB:"hyb",OSM_Quest:"mapquest",OSM_Q_SAT:"OSM_sat"};e.OpenStreetLayerType=w,i.Zondy.Enum.Map.OpenStreetLayerType=i.Zondy.Enum.OpenStreetLayerType=w},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.goog=e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.ZDOverviewMap=e.PolygonJSON=void 0;var i=r(550),n=r(551),o=r(552),s=r(553),a=function(t){return t&&t.__esModule?t:{default:t}}(r(554));e.PolygonJSON=i.PolygonJSON,e.ZDOverviewMap=n.ZDOverviewMap,e.Drag=o.Drag,e.MilStd=s.MilStd,e.MilStdDrawTool=s.MilStdDrawTool,e.MilStdModifyTool=s.MilStdModifyTool,e.MilStdDragPan=s.MilStdDragPan,e.EnumMilstdType=s.EnumMilstdType,e.MilstdParams=s.MilstdParams,e.goog=a.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonJSON=void 0;var i=r(6),n=r(11),o=p(r(36)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),a=p(r(25)),u=p(r(34)),l=p(r(20)),c=p(r(56)),h=p(r(68));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){var e=void 0!==t?t:{};(0,n.assign)(this,e)};f.prototype.read=function(t,e){if(void 0===t)return null;var r;return null!==(r="string"==typeof t?JSON.parse(t):t)?this.parseVectors(r):void 0},f.prototype.parseVectors=function(t){if(void 0===t||void 0===t.SFEleArray)return null;if(!t.SFEleArray)return null;if(0==t.SFEleArray.length)return null;for(var e=new Array,r=0,i=t.SFEleArray.length;r<i;r++){var n=t.SFEleArray[r],s=this.parseAttribute(t.AttStruct,n.AttValue),a=this.parseGeometry(n.fGeom,n.ftype),u=new o.default;u.setGeometry(a),u.setId(n.FID.toString()),u.setProperties(s),e[r]=u}return e},f.prototype.parseBound=function(t){return void 0===t?null:s.createOrUpdate(t.xmin,t.ymin,t.xmax,t.ymax)},f.prototype.parseAttribute=function(t,e){if(void 0===t||void 0===e)return null;if(t.FldName.length!=e.length)return null;for(var r=new a.default,i=0,n=t.FldName.length;i<n;i++)r.set(t.FldName[i],e[i]);return r},f.prototype.parseGeometry=function(t,e){var r=null;switch("Unknow"==e&&(e=t.PntGeom.length>0?1:t.LinGeom.length>0?2:3),e){case 1:r=this.parseGPoint(t.PntGeom);break;case 2:r=this.parseGLine(t.LinGeom);break;case 3:r=this.parseGRegion(t.RegGeom)}return r},f.prototype.parseGRegion=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=0,r=new Array,i=0;i<t.length;i++){var n=t[i];if(void 0===n||void 0===n.Rings)return null;for(var o=0,s=n.Rings.length;o<s;o++){for(var a=n.Rings[o],c=new Array,h=a.Arcs[0].Dots,p=0,f=h.length;p<f;p++)c[p]=[h[p].x,h[p].y];r[e++]=c}}return new u.default(r,l.default.XY)},f.prototype.parseGLine=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;var e=[];if(!t)return null;if(0===t.length)return null;for(var r=0,i=t.length;r<i;r++){for(var n=new Array,o=t[r].Line.Arcs[0].Dots,s=0,a=o.length;s<a;s++)n[s]=[o[s].x,o[s].y];e[r]=n}return new c.default(e)},f.prototype.parseGPoint=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=[],r=null,i=0,n=t.length;i<n;i++)r=t[i].Dot,e[i]=[r.x,r.y];return new h.default(e,l.default.XY)},e.PolygonJSON=f,i.Zondy.Format.PolygonJSON=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZDOverviewMap=void 0;var i=r(6),n=r(4),o=l(r(236)),s=l(r(184)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(3)),u=l(r(10));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=void 0!==t?t:{};o.default.call(this,e),this.cursor_="move",this.previousCursor_=void 0,this.mouseDown=!1,this.positionBox=null,this.preMousePos=null,this.startPos=null,this.endPos=null,this.SetBoxStyle("#999999",.5),this.collapsed_||this.ConnectEventHandle()};(0,n.inherits)(c,o.default),c.prototype.InitView=function(t,e){this.ovmap_.setView(new s.default({center:t,projection:e}))},c.prototype.ConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(a.listen(t,u.default.MOUSEMOVE,this.handleMouseEnter,this),a.listen(t,u.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.SetBoxStyle=function(t,e){if(void 0!==this.boxOverlay_&&null!=this.boxOverlay_){var r=this.boxOverlay_.getElement();r.style.backgroundColor=t,r.style.opacity=e}},c.prototype.DisConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(a.unlisten(t,u.default.MOUSEMOVE,this.handleMouseEnter,this),a.unlisten(t,u.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.ConvertPixelToNumber=function(t){if(void 0!==t&&null!=t){var e=t.indexOf("px");if(e>0)return Number(t.slice(0,e))}return Number(t)},c.prototype.handleMouseDown=function(t){this.mouseDown=!0;var e=this.ConvertPixelToNumber(t.target.parentNode.style.bottom),r=this.ConvertPixelToNumber(t.target.parentNode.style.left);this.positionBox=[e,r],this.preMousePos=[t.clientX,t.clientY],this.startPos=[t.clientX,t.clientY]},c.prototype.handleMouseMove=function(t){if(void 0!==this.positionBox&&null!=this.positionBox&&1==this.mouseDown){var e=t.clientX-this.preMousePos[0],r=t.clientY-this.preMousePos[1];this.positionBox[0]-=r,this.positionBox[1]+=e,t.target.parentNode.style.bottom=this.positionBox[0]+"px",t.target.parentNode.style.left=this.positionBox[1]+"px",this.preMousePos=[t.clientX,t.clientY]}},c.prototype.handleMouseUp=function(t){if(null!=this.startPos){this.mouseDown=!1,this.endPos=[t.clientX,t.clientY];var e=this.getMap().getView(),r=this.ovmap_.getView(),i=(this.endPos[0]-this.startPos[0])*r.getResolution(),n=(this.endPos[1]-this.startPos[1])*r.getResolution(),o=e.getCenter(),s=[o[0]+i,o[1]-n];e.setCenter(s),this.startPos=null,this.endPos=null}},c.prototype.handleMouseEnter=function(t){t.target.style.cursor!=this.cursor_&&(this.previousCursor_=t.target.style.cursor,t.target.style.cursor=this.cursor_);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(a.listen(e,u.default.MOUSEDOWN,this.handleMouseDown,this),a.listen(e,u.default.MOUSEMOVE,this.handleMouseMove,this),a.listen(e,u.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleMouseLeave=function(t){this.handleMouseUp(t),void 0!==this.previousCursor_&&(t.target.style.cursor=this.previousCursor_,this.previousCursor_=void 0);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(a.unlisten(e,u.default.MOUSEDOWN,this.handleMouseDown,this),a.unlisten(e,u.default.MOUSEMOVE,this.handleMouseMove,this),a.unlisten(e,u.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleToggle_=function(){o.default.prototype.handleToggle_.apply(this),this.collapsed_?this.DisConnectEventHandle():this.ConnectEventHandle()},e.ZDOverviewMap=c,i.Zondy.Control.OverviewMap=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Drag=void 0;var i=r(6),n=r(4),o=function(t){return t&&t.__esModule?t:{default:t}}(r(47)),s=function t(e){o.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0};(0,n.inherits)(s,o.default),s.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},s.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],r=t.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(e,r),this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},s.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),r=t.map.getTargetElement();e?r.style.cursor!=this.cursor_&&(this.previousCursor_=r.style.cursor,r.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},s.prototype.handleUpEvent=function(t){return this.coordinate_=null,this.feature_=null,!1},e.Drag=s,i.Zondy.GeomInteraction.Drag=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilstdParams=e.EnumMilstdType=e.MilStd=void 0;var i=r(4),n=A(r(56)),o=A(r(34)),s=A(r(39)),a=A(r(129)),u=A(r(35)),l=A(r(94)),c=A(r(98)),h=r(70),p=A(h),f=A(r(97)),d=A(r(110)),g=A(r(150)),y=A(r(183)),v=A(r(10)),m=M(r(3)),_=r(47),b=A(_),S=A(r(120)),x=A(r(48)),O=A(r(51)),E=A(r(36)),C=A(r(38)),T=M(r(1)),P=A(r(111)),w=A(r(31)),I=A(r(28)),L=M(r(26)),R=A(r(5));function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function A(t){return t&&t.__esModule?t:{default:t}}var j=window.MilStd=window.MilStd||{};j.commonFun=j.commonFun||{},j.Arrow=j.Arrow||{},j.Flag=j.Flag||{},j.Compass=j.Compass||{},j.Bezier=j.Bezier||{},j.event=j.event||{},j.tool=j.tool||{},j.enum={ZERO_TOLERANCE:1e-4};var N={ArrowCross:"ArrowCross",CircleClosedangle:"CircleClosedangle",Closedangle:"Closedangle",DoubleClosedangle:"DoubleClosedangle",Fourstar:"Fourstar",Rhombus:"Rhombus",SameDirectionClosedangle:"SameDirectionClosedangle",Triangle:"Triangle",Vane:"Vane",SimpleArrow:"SimpleArrow",DoubleArrow:"DoubleArrow",StraightArrow:"StraightArrow",SingleLineArrow:"SingleLineArrow",TriangleFlag:"TriangleFlag",RectFlag:"RectFlag",CurveFlag:"CurveFlag",Bezier:"Bezier",BezierLine:"BezierLine",AssemblyArea:"AssemblyArea"},F=function(t){t&&(this.headHeightFactor=void 0!==t.headHeightFactor&&null!=t.headHeightFactor?t.headHeightFactor:.2,this.headWidthFactor=void 0!==t.headWidthFactor&&null!=t.headWidthFactor?t.headWidthFactor:.5,this.neckHeightFactor=void 0!==t.neckHeightFactor&&null!=t.neckHeightFactor?t.neckHeightFactor:.8,this.neckWidthFactor=void 0!==t.neckWidthFactor&&null!=t.neckWidthFactor?t.neckWidthFactor:.2,this.tailWidthFactor=void 0!==t.tailWidthFactor&&null!=t.tailWidthFactor?t.tailWidthFactor:.1,this.hasSwallowTail=void 0===t.hasSwallowTail||null==t.hasSwallowTail||t.hasSwallowTail,this.swallowTailFactor=void 0!==t.swallowTailFactor&&null!=t.swallowTailFactor?t.swallowTailFactor:.5,this.curveFitMethod=void 0!==t.curveFitMethod&&null!=t.curveFitMethod?t.curveFitMethod:"useBSplieFit",this.maxVertices=void 0!==t.maxVertices&&null!=t.maxVertices?t.maxVertices:20)};j.commonFun.CalLengthOfTwoPoints=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},j.commonFun.wholeDistance=function(t){var e=0;if(null!=t&&t.length>1)for(var r=0;r<t.length-1;r++)e+=j.commonFun.CalLengthOfTwoPoints(t[r],t[r+1]);return e},j.commonFun.getAzimuthAngle=function(t,e){var r=0,i=Math.asin(Math.abs(e[1]-t[1])/j.commonFun.CalLengthOfTwoPoints(t,e));return e[1]>=t[1]&&e[0]>=t[0]?i+Math.PI:e[1]>=t[1]&&e[0]<t[0]?2*Math.PI-i:e[1]<t[1]&&e[0]<t[0]?i:(e[1]<t[1]&&e[0]>=t[0]&&(r=Math.PI-i),r)},j.commonFun.getThirdPoint=function(t,e,r,i,n){var o,s=j.commonFun.getAzimuthAngle(t,e);o="left"==n.toLowerCase()?s+r:s-r;var a=i*Math.cos(o),u=i*Math.sin(o);return[e[0]+a,e[1]+u]},j.commonFun.getAngleOfThreePoints=function(t,e,r){var i=j.commonFun.getAzimuthAngle(e,t)-j.commonFun.getAzimuthAngle(e,r);return i<0&&(i+=2*Math.PI),i},j.commonFun.getFactorial=function(t){for(var e=1,r=1;r<=t;r++)e*=r;return e},j.commonFun.getBinomialFactor=function(t,e){return j.commonFun.getFactorial(t)/(j.commonFun.getFactorial(e)*j.commonFun.getFactorial(t-e))},j.commonFun.getQuadricBSplineFactor=function(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0},j.commonFun.getBSplineFFactor=function(t,e,r){if(2==e)return j.commonFun.getQuadricBSplineFactor(t,r);for(var i=0,n=j.commonFun.getFactorial(e),o=0;o<=e-t;o++)i+=(o%2==0?1:-1)*j.commonFun.getBinomialFactor(e+1,o)*Math.pow(r+e-t-o,e);return i/n},j.commonFun.getSide=function(t,e,r){var i=(e[1]-t[1])*(r[0]-t[0])-(r[1]-t[1])*(e[0]-t[0]);return i>0?"left":i<0?"right":null},j.commonFun.getMidPoint=function(t,e){var r=new Array,i=(t[0]+e[0])/2,n=(t[1]+e[1])/2;return r.push(i),r.push(n),r},j.commonFun.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=new Array,r=t.length-1,i=0;i<=1;i+=.01){for(var n=0,o=0,s=0;s<=r;s++){var a=j.commonFun.getBinomialFactor(r,s),u=Math.pow(i,s),l=Math.pow(1-i,r-s);n+=a*u*l*t[s][0],o+=a*u*l*t[s][1]}e.push([n,o])}return e.push(t[r]),e},j.commonFun.getBSplinePoints=function(t,e){if(t.length<=2||t.length<=e)return t;var r=new Array,i=t.length-e-1;r.push(t[0]);for(var n=0;n<=i;n++)for(var o=0;o<=1;o+=.05){for(var s=0,a=0,u=0;u<=e;u++){var l=j.commonFun.getBSplineFFactor(u,e,o);s+=l*t[n+u][0],a+=l*t[n+u][1]}r.push([s,a])}return r.push(t[t.length-1]),r},j.commonFun.geomEquals=function(t,e){var r=!1;return null!=t&&(r=e[0]==t[0]&&e[1]==t[1]||null==e[0]&&null==e[1]&&null==t[0]&&null==t[1]),r},j.commonFun.CreateNewVertices=function(t){if(null!=t&&t.length>=2){var e=Math.max(t[0][0],t[1][0]),r=[Math.min(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])],i=[e,Math.min(t[0][1],t[1][1])];t.splice(0,1,r),t.splice(1,1,i)}},j.Arrow.getArrowFromVert=function(t,e,r){var i=null;if(null!=t&&t.length>=2){var s=null;switch(e){case"SimpleArrow":case"StraightArrow":s=j.Arrow.getSimpleArrowPnts(t,r.hasSwallowTail,r.swallowTailFactor,r.curveFitMethod,r.headHeightFactor,r.headWidthFactor,r.neckHeightFactor,r.neckWidthFactor,r.tailWidthFactor),i=new o.default([s]);break;case"DoubleArrow":s=j.Arrow.getDoubleArrowPnts(t,r.headHeightFactor,r.headWidthFactor,r.neckHeightFactor,r.neckWidthFactor),i=new o.default([s]);break;case"SingleLineArrow":s=j.Arrow.getSLArrowPnts(t,r.headHeightFactor,r.headWidthFactor),i=new n.default(s)}}return i},j.Arrow.getSimpleArrowPnts=function(t,e,r,i,n,o,s,a,u){if(t.length<2)return t;var l=j.Arrow.getArrowHeadPoints(t,n,o,s,a),c=l[0],h=l[4],p=j.Arrow.getArrowBodyPoints(t,c,h,u,1,1),f=j.Arrow.getArrowTailPoints(t,u,e,r),d=f[0],g=(f.length,f[1]),y=3==f.length?f[2]:f[1],v=p.length,m=p.slice(0,Math.ceil(v/2)),_=p.slice(Math.ceil(v/2));m.push(c),_.push(h),m.reverse(),m.push(d),_.reverse(),_.push(y);var b=null,S=null;"useBezierFit"==i?(b=j.commonFun.getBezierPoints(m),S=j.commonFun.getBezierPoints(_)):(b=j.commonFun.getBSplinePoints(m,2),S=j.commonFun.getBSplinePoints(_,2)),null!=g&&(b.push(g),S.push(g)),b.reverse();for(var x=0;x<l.length;x++)b.push(l[x]);for(var O=0;O<S.length;O++)b.push(S[O]);return b},j.Arrow.getSLArrowPnts=function(t,e,r){if(t.length<2)return null;var i=j.Arrow.getArrowHeadPointsForSLine(t,e,r),n=j.commonFun.getBezierPoints(t),o=new Array;return o.push(i),o.push(n),o},j.Arrow.isCounterClockwise=function(t){if(t.length<3)return 0;var e=t[0],r=t[1],i=t[2];return(r[0]-e[0])*(i[1]-r[1])-(r[1]-e[1])*(i[0]-r[0])},j.Arrow.getDoubleArrowPnts=function(t,e,r,i,n){var o=null,s=t.length;if(s>=3&&!j.commonFun.geomEquals(t[s-1],t[s-2])){var a=t[0],u=t[1],l=t[2],c=null;3==s?(c=j.Arrow.getTempPnt4(a,u,l),t.push(c)):c=t[3],j.Arrow.isCounterClockwise(t)<0&&(a=t[1],u=t[0],l=t[3],c=t[2]);var h=j.commonFun.getMidPoint(a,u),p=j.Arrow.getArrowPoints(a,h,c,"left",e,r,i,n),f=j.Arrow.getArrowPoints(h,u,l,"right",e,r,i,n),d=p.length,g=Math.ceil((d-5)/2);o=p.slice(0,g);var y=p.slice(g,g+5),v=p.slice(g+5),m=f.slice(0,g),_=f.slice(g,g+5),b=f.slice(g+5);o=j.commonFun.getBezierPoints(o);for(var S=0;S<m.length;S++)v.push(m[S]);var x=j.commonFun.getBezierPoints(v);for(b=j.commonFun.getBezierPoints(b),S=0;S<y.length;S++)o.push(y[S]);for(S=0;S<x.length;S++)o.push(x[S]);for(S=0;S<_.length;S++)o.push(_[S]);for(S=0;S<b.length;S++)o.push(b[S]);o.length>0&&(j.commonFun.geomEquals(o[0],o[o.length-1])||o.push(o[0]))}return o},j.Arrow.getArrowHeadPoints=function(t,e,r,i,n){if(t.length<2)return t;var o=j.commonFun.wholeDistance(t)*e,s=o*r,a=o*n,u=t.length,l=[t[u-1][0],t[u-1][1]],c=j.commonFun.CalLengthOfTwoPoints(l,t[u-2]),h=(o=o>c?c:o)*i,p=j.commonFun.getThirdPoint(t[u-2],l,0,o,"left"),f=j.commonFun.getThirdPoint(t[u-2],l,0,h,"left"),d=j.commonFun.getThirdPoint(l,p,1.5*Math.PI,s,"right"),g=j.commonFun.getThirdPoint(l,f,1.5*Math.PI,a,"right"),y=j.commonFun.getThirdPoint(l,p,1.5*Math.PI,s,"left"),v=j.commonFun.getThirdPoint(l,f,1.5*Math.PI,a,"left"),m=new Array;return m.push(g),m.push(d),m.push(l),m.push(y),m.push(v),m},j.Arrow.getArrowHeadPointsForSLine=function(t,e,r){if(t.length<2)return t;var i=j.commonFun.CalLengthOfTwoPoints(t[0],t[1])*e,n=i*r,o=t.length,s=t[o-1],a=j.commonFun.CalLengthOfTwoPoints(s,t[o-2]);i=i>a?a:i;var u=j.commonFun.getThirdPoint(t[o-2],s,0,i,"left"),l=j.commonFun.getThirdPoint(s,u,1.5*Math.PI,n,"right"),c=j.commonFun.getThirdPoint(s,u,1.5*Math.PI,n,"left"),h=new Array;return h.push(l),h.push(s),h.push(c),h},j.Arrow.getArrowBodyPoints=function(t,e,r,i,n,o){if(t.length<2)return t;for(var s=j.commonFun.wholeDistance(t),a=j.commonFun.wholeDistance(t)*i,u=a-j.commonFun.CalLengthOfTwoPoints(e,r)/2,l=0,c=new Array,h=new Array,p=1;p<t.length-1;p++){var f=j.commonFun.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2,d=(a-(l+=j.commonFun.CalLengthOfTwoPoints(t[p-1],t[p]))/s*u)/Math.sin(f);c.push(j.commonFun.getThirdPoint(t[p-1],t[p],f,d*n,"right")),h.push(j.commonFun.getThirdPoint(t[p-1],t[p],Math.PI-f,d*o,"left"))}for(var g=0;g<h.length;g++)c.push(h[g]);return c},j.Arrow.getArrowTailPoints=function(t,e,r,i){if(t.length<2)return t;var n=j.commonFun.wholeDistance(t)*e,o=new Array,s=j.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,n,"right"),a=j.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,n,"left");if(r){var u=n*i,l=j.commonFun.getThirdPoint(t[1],t[0],0,u,"left");return o.push(s),o.push(l),o.push(a),o}return o.push(s),o.push(a),o},j.Arrow.getArrowPoints=function(t,e,r,i,n,o,s,a){var u=j.commonFun.getMidPoint(t,e),l=j.commonFun.CalLengthOfTwoPoints(u,r),c=j.commonFun.getThirdPoint(r,u,0,.3*l,"left"),h=j.commonFun.getThirdPoint(r,u,0,.5*l,"left"),p=j.commonFun.getThirdPoint(r,u,0,.7*l,"left");c=j.commonFun.getThirdPoint(u,c,1.5*Math.PI,l/4,i),h=j.commonFun.getThirdPoint(u,h,1.5*Math.PI,l/4,i),p=j.commonFun.getThirdPoint(u,p,1.5*Math.PI,l/4,i);var f=new Array;f.push(u),f.push(c),f.push(h),f.push(p),f.push(r);var d=j.Arrow.getArrowHeadPoints(f,n,o,s,a),g=d[0],y=d[4],v=j.commonFun.CalLengthOfTwoPoints(t,e)/j.commonFun.wholeDistance(f)/2,m="left"==i?1:.01,_="left"==i?.01:1,b=j.Arrow.getArrowBodyPoints(f,g,y,v,m,_),S=b.length,x=b.slice(0,Math.ceil(S/2)),O=b.slice(Math.ceil(S/2));x.push(g),O.push(y),x.reverse(),x.push(t),O.reverse(),O.push(e),x.reverse();for(var E=0;E<d.length;E++)x.push(d[E]);for(E=0;E<O.length;E++)x.push(O[E]);return x},j.Arrow.getTempPnt4=function(t,e,r){var i=null,n=j.commonFun.getMidPoint(t,e),o=j.commonFun.CalLengthOfTwoPoints(n,r),s=j.commonFun.getAngleOfThreePoints(t,n,r),a=0,u=0;return s<Math.PI/2?(a=o*Math.sin(s),u=o*Math.cos(s),i=j.commonFun.getThirdPoint(t,n,1.5*Math.PI,a,"left"),j.commonFun.getThirdPoint(n,i,1.5*Math.PI,u,"right")):s>=Math.PI/2&&s<Math.PI?(a=o*Math.sin(Math.PI-s),u=o*Math.cos(Math.PI-s),i=j.commonFun.getThirdPoint(t,n,1.5*Math.PI,a,"left"),j.commonFun.getThirdPoint(n,i,1.5*Math.PI,u,"left")):s>=Math.PI&&s<1.5*Math.PI?(a=o*Math.sin(s-Math.PI),u=o*Math.cos(s-Math.PI),i=j.commonFun.getThirdPoint(t,n,1.5*Math.PI,a,"right"),j.commonFun.getThirdPoint(n,i,1.5*Math.PI,u,"right")):(a=o*Math.sin(2*Math.PI-s),u=o*Math.cos(2*Math.PI-s),i=j.commonFun.getThirdPoint(t,n,1.5*Math.PI,a,"right"),j.commonFun.getThirdPoint(n,i,1.5*Math.PI,u,"left"))},j.Flag.getFlagFromVert=function(t,e){var r=new Array;j.commonFun.CreateNewVertices(t);var i=new Array;if(null!=t&&t.length>=2){i.push(t[0]),i.push(t[1]);var n=null;switch(e){case"TriangleFlag":n=this.GetTriangleFlagDots(i);break;case"RectFlag":n=this.GetRectFlagDots(i);break;case"CurveFlag":n=this.GetCurveFlagDots(i)}var a=new o.default([n[0]]),u=new s.default(n[1]);r.push(a),r.push(u)}return r},j.Flag.GetTriangleFlagDots=function(t){j.commonFun.CreateNewVertices(t);var e=new Array,r=t.length;if(r>=2&&!j.commonFun.geomEquals(t[r-1],t[r-2])){var i=t[0],n=t[1],o=[i[0],n[1]],s=j.commonFun.getMidPoint(i,o),a=[n[0],s[1]],u=new Array;u.push(s),u.push(i),u.push(a),u.push(s);var l=new Array;l.push(o),l.push(s),e.push(u),e.push(l)}return e},j.Flag.GetRectFlagDots=function(t){j.commonFun.CreateNewVertices(t);var e=new Array,r=t.length;if(r>=2&&!j.commonFun.geomEquals(t[r-1],t[r-2])){var i=t[0],n=t[1],o=[i[0],n[1]],s=j.commonFun.getMidPoint(i,o),a=[n[0],s[1]],u=[n[0],i[1]],l=new Array;l.push(s),l.push(i),l.push(u),l.push(a),l.push(s);var c=new Array;c.push(o),c.push(s),e.push(l),e.push(c)}return e},j.Flag.GetCurveFlagDots=function(t){j.commonFun.CreateNewVertices(t);var e=new Array,r=t.length;if(r>=2&&!j.commonFun.geomEquals(t[r-1],t[r-2])){var i=t[0],n=t[1],o=[i[0],n[1]],s=j.commonFun.getMidPoint(i,o),a=[n[0],s[1]],u=[n[0],i[1]],l=j.commonFun.CalLengthOfTwoPoints(i,s)/2,c=j.commonFun.CalLengthOfTwoPoints(i,u),h=j.commonFun.getThirdPoint(u,i,0,c/4,"left"),p=j.commonFun.getThirdPoint(i,h,1.5*Math.PI,l,"right");h=j.commonFun.getThirdPoint(u,i,0,c/4*3,"left");var f=j.commonFun.getThirdPoint(i,h,1.5*Math.PI,l,"left");h=j.commonFun.getThirdPoint(a,s,0,c/4,"left");var d=j.commonFun.getThirdPoint(s,h,1.5*Math.PI,l,"right");h=j.commonFun.getThirdPoint(a,s,0,c/4*3,"left");var g=j.commonFun.getThirdPoint(s,h,1.5*Math.PI,l,"left"),y=new Array;y.push(i),y.push(p),y.push(f),y.push(u);var v=j.commonFun.getBezierPoints(y),m=new Array;m.push(s),m.push(d),m.push(g),m.push(a);var _=j.commonFun.getBezierPoints(m),b=new Array;b.push(s);for(var S=0;S<v.length;S++)b.push(v[S]);for(_.reverse(),S=0;S<_.length;S++)b.push(_[S]);var x=new Array;x.push(o),x.push(s),e.push(b),e.push(x)}return e},j.Compass.getCompassFromVert=function(t,e){j.commonFun.CreateNewVertices(t);var r=new Array;if(null!=t&&t.length>=2){r.push(t[0]),r.push(t[1]);var i=null;switch(e){case"ArrowCross":i=this.GetArrowCrossDots(r);break;case"CircleClosedangle":i=this.GetCircleClosedangleDots(r);break;case"Closedangle":i=this.GetClosedangleDots(r);break;case"DoubleClosedangle":i=this.GetDoubleClosedangleDots(r);break;case"Fourstar":i=this.GetFourstarDots(r);break;case"Rhombus":i=this.GetRhombusDots(r);break;case"SameDirectionClosedangle":i=this.GetSameDirectionClosedangleDots(r);break;case"Triangle":i=this.GetTriangleDots(r);break;case"Vane":i=this.GetVaneDots(r)}var s=new Array,a=new Array;if(null!=i&&i.length>0){for(var u=0;u<i.length;u++)switch(e){case"ArrowCross":case"DoubleClosedangle":case"CircleClosedangle":case"Rhombus":case"SameDirectionClosedangle":u==i.length-1?a.push(i[u][0]):s.push(i[u][0]);break;case"Closedangle":case"Fourstar":u%2==0?s.push(i[u][0]):a.push(i[u][0]);break;case"Triangle":1==u||4==u?a.push(i[u][0]):s.push(i[u][0]);break;case"Vane":u==i.length-1?s.push(i[u][0]):a.push(i[u][0])}var l=new Array,c=new n.default(s);l.push(c);var h=new o.default(a);l.push(h)}return l}},j.Compass.GetArrowCrossDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),r=Math.abs(t[1][1]-t[0][1]),i=new Array,n=[t[0][0]+e/32*15,t[0][1]-r/16*1];i.push(n);var o=[t[0][0]+e/32*15,t[0][1]];i.push(o);var s=[t[0][0]+e/32*17,t[0][1]-r/16*1];i.push(s);var a=[t[0][0]+e/32*17,t[0][1]];i.push(a);var u=new Array,l=[t[0][0],t[0][1]-r/32*15];u.push(l);var c=[t[0][0]+e/128*3,t[0][1]-r/32*17];u.push(c);var h=[t[0][0]+e/128*6,t[0][1]-r/32*15];u.push(h);var p=[t[0][0]+e/128*9,t[0][1]-r/32*17];u.push(p);var f=[t[0][0]+e/128*12,t[0][1]-r/32*15];u.push(f);var d=new Array,g=[t[0][0]+e,t[0][1]-r/32*15],y=[t[0][0]+e/16*15,t[0][1]-r/32*15],v=[t[0][0]+e/16*15,t[0][1]-r/32*17],m=[t[0][0]+e,t[0][1]-r/32*17],_=[t[0][0]+e/16*15,t[0][1]-r/2],b=[t[0][0]+e/50*48,t[0][1]-r/2];d.push(g),d.push(y),d.push(_),d.push(b),d.push(_),d.push(v),d.push(m);var S=[t[0][0]+e/2,t[1][1]+r/32],x=[t[0][0]+e/2+e/32,t[1][1]+r/32+r/64],O=[t[0][0]+e/2+e/32-2*e/32,t[1][1]+r/32+r/64],E=[t[0][0]+e/2,t[1][1]+r/32+r/32],C=[t[0][0]+e/2,t[1][1]+r/32-r/32],T=[t[0][0]+e/2+e/32,t[1][1]+r/32+r/64-r/32],P=[t[0][0]+e/2+e/32-e/16,t[1][1]+r/32+r/64-r/32],w=new Array;w.push(x),w.push(E),w.push(O),w.push(S),w.push(T),w.push(C),w.push(P);var I=j.commonFun.getBSplinePoints(w,2),L=new Array,R=[t[0][0]+e/2,t[0][1]-r/16*2];L.push(R);var M=[t[0][0]+e/32*18,t[0][1]-r/16*4];L.push(M);var A=[t[0][0]+e/32*17,t[0][1]-r/16*4];L.push(A);var N=[t[0][0]+e/32*17,t[0][1]-r/32*15];L.push(N);var F=[t[0][0]+e/16*12,t[0][1]-r/32*15];L.push(F);var D=[t[0][0]+e/16*12,t[0][1]-r/32*14];L.push(D);var k=[t[0][0]+e/16*14,t[0][1]-r/2];L.push(k);var G=[t[0][0]+e/16*12,t[0][1]-r/32*18];L.push(G);var B=[t[0][0]+e/16*12,t[0][1]-r/32*17];L.push(B);var U=[t[0][0]+e/32*17,t[0][1]-r/32*17];L.push(U);var V=[t[0][0]+e/32*17,t[0][1]-r/16*12];L.push(V);var z=[t[0][0]+e/32*18,t[0][1]-r/16*12];L.push(z);var W=[t[0][0]+e/2,t[0][1]-r/16*14];L.push(W);var Y=[t[0][0]+e/32*14,t[0][1]-r/16*12];L.push(Y);var X=[t[0][0]+e/32*15,t[0][1]-r/16*12];L.push(X);var Z=[t[0][0]+e/32*15,t[0][1]-r/32*17];L.push(Z);var H=[t[0][0]+e/16*4,t[0][1]-r/32*17];L.push(H);var q=[t[0][0]+e/16*4,t[0][1]-r/32*18];L.push(q);var K=[t[0][0]+e/16*2,t[0][1]-r/2];L.push(K);var J=[t[0][0]+e/16*4,t[0][1]-r/32*14];L.push(J);var Q=[t[0][0]+e/16*4,t[0][1]-r/32*15];L.push(Q);var $=[t[0][0]+e/32*15,t[0][1]-r/32*15];L.push($);var tt=[t[0][0]+e/32*15,t[0][1]-r/16*4];L.push(tt);var et=[t[0][0]+e/32*14,t[0][1]-r/16*4];L.push(et),L.push(R);for(var rt=new Array,it=0;it<5;it++)rt[it]=new Array;return rt[0].push(i),rt[1].push(u),rt[2].push(d),rt[3].push(I),rt[4].push(L),rt},j.Compass.GetCircleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,r,i,n,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/32*15,t[0][1]-s/16],a.push(e),r=[t[0][0]+o/32*15,t[0][1]],a.push(r),i=[t[0][0]+o/32*17,t[0][1]-s/16],a.push(i),n=[t[0][0]+o/32*17,t[0][1]],a.push(n);var u,l,c,h,p,f=new Array;u=[t[0][0]+o/2,t[0][1]-s/16*2],f.push(u),l=[t[0][0]+o/64*15,t[0][1]-s],f.push(l),c=[t[0][0]+o/32*15,t[0][1]-s/32*28],f.push(c),h=[t[0][0]+o/32*17,t[0][1]-s/32*28],f.push(h),p=[t[0][0]+o/64*49,t[0][1]-s],f.push(p),f.push(u);var d,g,y=new Array,v=t[0][0]+o/2-s/20*9,m=t[0][0]+o/2+s/20*9;d=[v,t[0][1]-s/16*9],g=[m,t[0][1]-s/16*9],y.push(d),y.push(g);var _,b,S,x=0,O=0,E=0,C=0,T=new Array,P=0;for(_=[t[0][0]+o/2,t[0][1]-s/16*9],b=[t[0][0]+o/2,t[0][1]-s/5*1],S=j.commonFun.CalLengthOfTwoPoints(_,b);P<500;)x=Math.sin(2*Math.PI*P/500),O=Math.cos(2*Math.PI*P/500),E=_[0]+S*x,C=_[1]+S*O,T.push([E,C]),++P;T.push(T[0]);for(var w=new Array,I=0;I<4;I++)w[I]=new Array;return w[0].push(a),w[1].push(y),w[2].push(T),w[3].push(f),w},j.Compass.GetClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=new Array,r=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),n=[t[0][0]+r/2,t[0][1]];e.push(n);var o=[t[0][0]+r,t[0][1]-i];e.push(o);var s=[t[0][0]+r/2,t[0][1]-i/4*3];e.push(s);var a=new Array,u=[t[0][0]+r/2,t[0][1]];a.push(u);var l=[t[0][0],t[0][1]-i];a.push(l);var c=[t[0][0]+r/2,t[0][1]-i/4*3];a.push(c);for(var h=new Array,p=0;p<2;p++)h[p]=new Array;return h[0].push(e),h[1].push(a),h},j.Compass.GetDoubleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,r,i,n,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/32*15,t[0][1]-s/16],a.push(e),r=[t[0][0]+o/32*15,t[0][1]],a.push(r),i=[t[0][0]+o/32*17,t[0][1]-s/16],a.push(i),n=[t[0][0]+o/32*17,t[0][1]],a.push(n);var u,l,c,h,p,f=new Array;u=[t[0][0]+o/2,t[0][1]-s/16*2],f.push(u),l=[t[0][0],t[0][1]-s/10*7],f.push(l),c=[t[0][0]+o/32*13,t[0][1]-s/32*18],f.push(c),h=[t[0][0]+o/32*19,t[0][1]-s/32*18],f.push(h),p=[t[0][0]+o,t[0][1]-s/10*7],f.push(p),f.push(u);var d,g,y,v,m=new Array;d=[t[0][0],t[0][1]-s/10*3],m.push(d),g=[t[0][0]+o/2,t[0][1]-s/8*7],m.push(g),y=[t[0][0]+o,t[0][1]-s/10*3],m.push(y),v=[t[0][0]+o/2,t[0][1]-s/10*7],m.push(v),m.push(d);var _=[t[0][0]+o/2,t[1][1]+s/32],b=[t[0][0]+o/2+o/32,t[1][1]+s/32+s/64],S=[t[0][0]+o/2+o/32-2*o/32,t[1][1]+s/32+s/64],x=[t[0][0]+o/2,t[1][1]+s/32+s/32],O=[t[0][0]+o/2,t[1][1]+s/32-s/32],E=[t[0][0]+o/2+o/32,t[1][1]+s/32+s/64-s/32],C=[t[0][0]+o/2+o/32-o/16,t[1][1]+s/32+s/64-s/32],T=new Array;T.push(b),T.push(x),T.push(S),T.push(_),T.push(E),T.push(O),T.push(C);for(var P=j.commonFun.getBSplinePoints(T,2),w=new Array,I=0;I<4;I++)w[I]=new Array;return w[0].push(a),w[1].push(P),w[2].push(m),w[3].push(f),w},j.Compass.GetFourstarDots=function(t){if(null==t||t.length<2)return null;var e,r,i,n,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/2,t[0][1]],a.push(e),r=[t[0][0]+o/2,t[0][1]-s],a.push(r),i=[t[0][0]+o/8*3,t[0][1]-s/8*5],a.push(i),n=[t[0][0]+o/8*5,t[0][1]-s/8*3],a.push(n),a.push(e);var u,l,c=new Array;u=[t[0][0],t[0][1]-s/2],c.push(u),l=[t[0][0]+o,t[0][1]-s/2],c.push(l),c.push(n),c.push(i),c.push(u);var h,p,f=new Array;f.push(u),f.push(l),h=[t[0][0]+o/8*5,t[0][1]-s/8*5],f.push(h),p=[t[0][0]+o/8*3,t[0][1]-s/8*3],f.push(p),f.push(u);var d=new Array;d.push(e),d.push(r),d.push(h),d.push(p);for(var g=new Array,y=0;y<4;y++)g[y]=new Array;return g[0].push(a),g[1].push(c),g[2].push(f),g[3].push(d),g},j.Compass.GetRhombusDots=function(t){if(null==t||t.length<2)return null;var e,r,i,n,o,s,a,u,l=Math.abs(t[1][0]-t[0][0]),c=Math.abs(t[1][1]-t[0][1]),h=new Array,p=new Array,f=new Array;e=[t[0][0]+l/2,t[0][1]-c/16*2],h.push(e),r=[t[0][0],t[0][1]-c/16*9],h.push(r),i=[t[0][0]+l,t[0][1]-c/16*9],h.push(i),h.push(e),n=[t[0][0]+l/2,t[1][1]],p.push(i),p.push(n),p.push(r),p.push(i),o=[t[0][0]+l/32*13,t[0][1]-c/16*1],f.push(o),s=[t[0][0]+l/32*13,t[0][1]],f.push(s),a=[t[0][0]+l/32*19,t[0][1]-c/16*1],f.push(a),u=[t[0][0]+l/32*19,t[0][1]],f.push(u);for(var d=new Array,g=0;g<3;g++)d[g]=new Array;return d[0].push(h),d[1].push(f),d[2].push(p),d},j.Compass.GetSameDirectionClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),r=Math.abs(t[1][1]-t[0][1]),i=[t[0][0]+e/32*15,t[0][1]],n=[t[0][0],t[0][1]-r/16*13],o=[t[0][0]+e/32*15,t[0][1]-r/16*11],s=[t[0][0]+e/16*15,t[0][1]-r/16*13],a=new Array;a.push(i),a.push(n),a.push(o),a.push(s),a.push(i);var u=[t[0][0]+e/32*17,t[0][1]-r/32*1],l=[t[0][0]+e/16,t[0][1]-r/32*27],c=[t[0][0]+e/32*17,t[0][1]-r/16*12],h=[t[0][0]+e,t[0][1]-r/32*27],p=new Array;p.push(u),p.push(l),p.push(c),p.push(h);var f=[t[0][0]+e/32*14,t[0][1]-r],d=[t[0][0]+e/32*14,t[0][1]-r/16*15],g=[t[0][0]+e/32*18,t[0][1]-r],y=[t[0][0]+e/32*18,t[0][1]-r/16*15],v=new Array;v.push(f),v.push(d),v.push(g),v.push(y);for(var m=new Array,_=0;_<3;_++)m[_]=new Array;return m[0].push(a),m[1].push(v),m[2].push(p),m},j.Compass.GetTriangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),r=Math.abs(t[1][1]-t[0][1]),i=new Array,n=[t[0][0]+e/32*13,t[0][1]-r/16*1];i.push(n);var o=[t[0][0]+e/32*13,t[0][1]];i.push(o);var s=[t[0][0]+e/32*19,t[0][1]-r/16*1];i.push(s);var a=[t[0][0]+e/32*19,t[0][1]];i.push(a);var u=new Array,l=[t[0][0]+e/2,t[0][1]-r/16*2];u.push(l);var c=[t[0][0],t[0][1]-r/32*17];u.push(c);var h=[t[0][0]+e/2,t[0][1]-r/32*17];u.push(h);var p=new Array,f=[t[0][0]+e/2,t[0][1]-r/16*2];p.push(f);var d=[t[0][0]+e,t[0][1]-r/32*17];p.push(d);var g=[t[0][0]+e/2,t[0][1]-r/32*17];p.push(g);var y=new Array,v=[t[0][0],t[0][1]-r/32*18];y.push(v);var m=[t[0][0]+e,t[0][1]-r/32*18];y.push(m);var _=new Array,b=[t[0][0]+e/2,t[0][1]-r];_.push(b);var S=[t[0][0],t[0][1]-r/32*19];_.push(S);var x=[t[0][0]+e/2,t[0][1]-r/32*19];_.push(x);var O=[t[0][0]+e,t[0][1]-r/32*19],E=new Array;E.push(x),E.push(O),E.push(b);for(var C=new Array,T=0;T<6;T++)C[T]=new Array;return C[0].push(i),C[1].push(u),C[2].push(p),C[3].push(y),C[4].push(_),C[5].push(E),C},j.Compass.GetVaneDots=function(t){if(null==t||t.length<2)return null;var e,r,i,n,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array,u=new Array;e=[t[0][0]+o/2,t[0][1]],r=[t[0][0],t[0][1]-s/8],i=[t[0][0]+o/2,t[0][1]-s/8*2],n=[t[0][0]+o,t[0][1]-s/8],a.push(e),a.push(r),a.push(i),u.push(e),u.push(i),u.push(n),u.push(e);var l=[t[0][0]+o/14*6,t[0][1]-s/8*2],c=[t[0][0]+o/14*6,t[0][1]-s],h=[t[0][0]+o/28*13,t[0][1]-s/35*34],p=[t[0][0]+o/28*15,t[0][1]-s/35*34],f=[t[0][0]+o/14*8,t[0][1]-s],d=[t[0][0]+o/14*8,t[0][1]-s/8*2],g=new Array;g.push(l),g.push(c),g.push(h),g.push(p),g.push(f),g.push(d);var y=new Array,v=[t[0][0]+o/14*6,t[0][1]-s/36*21];y.push(v);var m=[t[0][0]+o/14*2,t[0][1]-s/36*22];y.push(m);var _=[t[0][0]+o/14*2,t[0][1]-s/36*23];y.push(_);var b=[t[0][0]+o/14*6,t[0][1]-s/36*22];y.push(b);var S=new Array,x=[t[0][0]+o/14*6,t[0][1]-s/36*23],O=[t[0][0]+o/14*2,t[0][1]-s/36*24],E=[t[0][0]+o/14*2,t[0][1]-s/36*25],C=[t[0][0]+o/14*6,t[0][1]-s/36*24];S.push(x),S.push(O),S.push(E),S.push(C);var T=new Array,P=[t[0][0]+o/14*6,t[0][1]-s/36*25],w=[t[0][0]+o/14*2,t[0][1]-s/36*26],I=[t[0][0]+o/14*2,t[0][1]-s/36*27],L=[t[0][0]+o/14*6,t[0][1]-s/36*26];T.push(P),T.push(w),T.push(I),T.push(L);var R=new Array,M=[t[0][0]+o/14*6,t[0][1]-s/36*27],A=[t[0][0]+o/14*2,t[0][1]-s/36*28],j=[t[0][0]+o/14*2,t[0][1]-s/36*29],N=[t[0][0]+o/14*6,t[0][1]-s/36*28];R.push(M),R.push(A),R.push(j),R.push(N);var F=new Array,D=[t[0][0]+o/14*8,t[0][1]-s/36*21],k=[t[0][0]+o/14*12,t[0][1]-s/36*22],G=[t[0][0]+o/14*12,t[0][1]-s/36*23],B=[t[0][0]+o/14*8,t[0][1]-s/36*22];F.push(D),F.push(k),F.push(G),F.push(B);var U=new Array,V=[t[0][0]+o/14*8,t[0][1]-s/36*23],z=[t[0][0]+o/14*12,t[0][1]-s/36*24],W=[t[0][0]+o/14*12,t[0][1]-s/36*25],Y=[t[0][0]+o/14*8,t[0][1]-s/36*24];U.push(V),U.push(z),U.push(W),U.push(Y);var X=new Array,Z=[t[0][0]+o/14*8,t[0][1]-s/36*25],H=[t[0][0]+o/14*12,t[0][1]-s/36*26],q=[t[0][0]+o/14*12,t[0][1]-s/36*27],K=[t[0][0]+o/14*8,t[0][1]-s/36*26];X.push(Z),X.push(H),X.push(q),X.push(K);var J=new Array,Q=[t[0][0]+o/14*8,t[0][1]-s/36*27],$=[t[0][0]+o/14*12,t[0][1]-s/36*28],tt=[t[0][0]+o/14*12,t[0][1]-s/36*29],et=[t[0][0]+o/14*8,t[0][1]-s/36*28];J.push(Q),J.push($),J.push(tt),J.push(et);for(var rt=new Array,it=0;it<11;it++)rt[it]=new Array;return rt[0].push(a),rt[1].push(g),rt[2].push(y),rt[3].push(S),rt[4].push(T),rt[5].push(R),rt[6].push(F),rt[7].push(U),rt[8].push(X),rt[9].push(J),rt[10].push(u),rt},j.Bezier.getBezierFromVert=function(t,e){var r=null;if("BezierLine"==e){var i=j.commonFun.getBSplinePoints(t,2);r=new s.default(i)}else"Bezier"==e?(t.push(t[0]),i=j.commonFun.getBSplinePoints(t,2),t.pop(t[t.length-1]),r=new o.default([i])):"AssemblyArea"==e&&(i=j.Bezier.GetAssemblyAreaDots(t),r=new o.default([i]));return r},j.Bezier.GetAssemblyAreaDots=function(t){var e=null,r=null,i=0,n=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null,p=null,f=null,d=t.length;return d>=2&&t[d-1]!=t[d-2]&&(e=t[0],r=t[1],i=j.commonFun.CalLengthOfTwoPoints(e,r),n=j.commonFun.getMidPoint(e,r),o=j.commonFun.getThirdPoint(e,n,1.5*Math.PI,i/4.5,"right"),s=j.commonFun.getThirdPoint(e,r,0,.8*i,"left"),a=j.commonFun.getThirdPoint(e,s,1.5*Math.PI,i/5,"left"),u=j.commonFun.getThirdPoint(e,r,0,.45*i,"left"),l=j.commonFun.getThirdPoint(e,u,1.5*Math.PI,i/10,"left"),c=j.commonFun.getThirdPoint(e,r,0,.15*i,"left"),h=j.commonFun.getThirdPoint(e,c,1.5*Math.PI,i/7,"left"),p=new Array,(f=new Array).push(e,o,r,h,l,a),p=j.Bezier.getAdvancedBezierPoints(f)),p},j.Bezier.getAdvancedBezierPoints=function(t){var e=0,r=0,i=0,n=0,o=0,s=(t=t.slice()).length;t.push(t[0]);for(var a=new Array,u=0;u<s;)a.push(j.commonFun.getMidPoint(t[u],t[u+1])),++u;a.push(a[0]),t.push(t[1]);var l=new Array;for(u=0;u<s;)e=j.commonFun.CalLengthOfTwoPoints(t[u],t[u+1]),r=j.commonFun.CalLengthOfTwoPoints(t[u+1],t[u+2]),i=j.commonFun.CalLengthOfTwoPoints(a[u],a[u+1])*e/(e+r),l.push(j.commonFun.getThirdPoint(a[u+1],a[u],0,i,"left")),++u;var c=new Array;for(u=0;u<s;)n=t[u+1][0]-l[u][0],o=t[u+1][1]-l[u][1],c.push([a[u][0]+n,a[u][1]+o]),c.push(t[u+1]),c.push([a[u+1][0]+n,a[u+1][1]+o]),++u;var h=new Array,p=c.slice();for(p.push(c[0],c[1]),u=1;u<p.length;)h=h.concat(j.commonFun.getBezierPoints(p.slice(u,u+4))),u+=3;return h},j.MilStdGeomtry=function(t,e,r,i){a.default.call(this,[]),void 0!==t&&null!=t&&(void 0!==i&&null==i&&a.default.call(this,i),this.vertices=t,this.milStdType=e,this.milStdParams=void 0!==r&&null!=r?r:new j.MilstdParams,this.milStdType!=j.EnumMilstdType.TriangleFlag&&this.milStdType!=j.EnumMilstdType.RectFlag&&this.milStdType!=j.EnumMilstdType.CurveFlag&&this.milStdType!=j.EnumMilstdType.ArrowCross&&this.milStdType!=j.EnumMilstdType.CircleClosedangle&&this.milStdType!=j.EnumMilstdType.Closedangle&&this.milStdType!=j.EnumMilstdType.DoubleClosedangle&&this.milStdType!=j.EnumMilstdType.Fourstar&&this.milStdType!=j.EnumMilstdType.Rhombus&&this.milStdType!=j.EnumMilstdType.SameDirectionClosedangle&&this.milStdType!=j.EnumMilstdType.Triangle&&this.milStdType!=j.EnumMilstdType.Vane&&this.milStdType!=j.EnumMilstdType.AssemblyArea||(this.milStdParams.maxVertices=2),this.milStdType==j.EnumMilstdType.DoubleArrow&&(void 0!=r.maxVertices&&r.maxVertices<=4&&r.maxVertices>=3?this.milStdParams.maxVertices=r.maxVertices:this.milStdParams.maxVertices=4))},(0,i.inherits)(j.MilStdGeomtry,a.default),j.MilStdGeomtry.prototype.Create=function(){if("DoubleArrow"==this.milStdType){if(this.vertices.length<3)return}else if(this.vertices.length<2)return;switch(this.milStdType){case j.EnumMilstdType.SimpleArrow:case j.EnumMilstdType.StraightArrow:case j.EnumMilstdType.DoubleArrow:case j.EnumMilstdType.SingleLineArrow:var t=j.Arrow.getArrowFromVert(this.vertices,this.milStdType,this.milStdParams);this.setGeometriesArray([t]);break;case j.EnumMilstdType.TriangleFlag:case j.EnumMilstdType.RectFlag:case j.EnumMilstdType.CurveFlag:var e=j.Flag.getFlagFromVert(this.vertices,this.milStdType);this.setGeometriesArray(e);break;case j.EnumMilstdType.ArrowCross:case j.EnumMilstdType.CircleClosedangle:case j.EnumMilstdType.Closedangle:case j.EnumMilstdType.DoubleClosedangle:case j.EnumMilstdType.Fourstar:case j.EnumMilstdType.Rhombus:case j.EnumMilstdType.SameDirectionClosedangle:case j.EnumMilstdType.Triangle:case j.EnumMilstdType.Vane:e=j.Compass.getCompassFromVert(this.vertices,this.milStdType),this.setGeometriesArray(e);break;case j.EnumMilstdType.Bezier:case j.EnumMilstdType.BezierLine:case j.EnumMilstdType.AssemblyArea:t=j.Compass.getBezierFromVert(this.vertices,this.milStdType),this.setGeometriesArray([t])}},j.MilStdGeomtry.prototype.Update=function(t,e){if("DoubleArrow"==this.milStdType){if(t.length<3)return}else if(t.length<2)return;switch(e||(this.vertices=t),this.milStdType){case j.EnumMilstdType.SimpleArrow:case j.EnumMilstdType.StraightArrow:case j.EnumMilstdType.DoubleArrow:case j.EnumMilstdType.SingleLineArrow:var r=j.Arrow.getArrowFromVert(t,this.milStdType,this.milStdParams);this.setGeometriesArray([r]);break;case j.EnumMilstdType.TriangleFlag:case j.EnumMilstdType.RectFlag:case j.EnumMilstdType.CurveFlag:var i=j.Flag.getFlagFromVert(t,this.milStdType);this.setGeometriesArray(i);break;case j.EnumMilstdType.ArrowCross:case j.EnumMilstdType.CircleClosedangle:case j.EnumMilstdType.Closedangle:case j.EnumMilstdType.DoubleClosedangle:case j.EnumMilstdType.Fourstar:case j.EnumMilstdType.Rhombus:case j.EnumMilstdType.SameDirectionClosedangle:case j.EnumMilstdType.Triangle:case j.EnumMilstdType.Vane:i=j.Compass.getCompassFromVert(t,this.milStdType),this.setGeometriesArray(i);break;case j.EnumMilstdType.Bezier:case j.EnumMilstdType.BezierLine:case j.EnumMilstdType.AssemblyArea:r=j.Bezier.getBezierFromVert(t,this.milStdType),this.setGeometriesArray([r])}},j.event.MilStdDrawEvent=function(t,e){u.default.call(this,t),this.feature=void 0!==e?e:null},(0,i.inherits)(j.event.MilStdDrawEvent,u.default),j.event.MilStdDrawEvent.DRAW_START="draw_start",j.event.MilStdDrawEvent.DRAW_END="draw_end",j.event.MilStdDrawEvent.MODIFY_FEATURE_END="modify_one_feature";var D=function(t){g.default.call(this,[]),this.vertices=null,this.milStdGeom=null,this.feature=null,this.milStdType=null,this.milStdParams=null,this.mapViewport=null,this.dbClickZoomEvent=null,this.map=void 0!==t?t:null,this.featureName=null;var e=new l.default({color:"#000000",width:1.25}),r=new c.default({color:"rgba(0,0,0,0.5)"});this.style=new p.default({fill:r,stroke:e});var i=new f.default({source:new d.default({useSpatialIndex:!1,wrapX:!1})});this.featureOverLay=i,this.featureOverLay.setStyle(this.style),this.setMap(t),this.featureOverLay.on("postcompose",function(t){t.context.shadowBlur=25,t.context.shadowColor="black"})};(0,i.inherits)(D,g.default),D.prototype.setMap=function(t){void 0!==t&&null!=t&&(this.map=t,this.mapViewport=this.map.getViewport())},D.prototype.ShieldDBClickZoomEvent=function(t){for(var e=t.getInteractions(),r=0,i=e.getLength();r<i;r++){var n=e.item(r);if(n instanceof y.default){this.dbClickZoomEvent=n,e.remove(n);break}}},D.prototype.UnShieldDBClickZoomEvent=function(t){null!=this.dbClickZoomEvent&&(t.getInteractions().push(this.dbClickZoomEvent),this.dbClickZoomEvent=null)},D.prototype.activate=function(t,e,r){this.deactivate(),this.ShieldDBClickZoomEvent(this.map),m.listen(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),this.milStdType=t,this.milStdParams=e,this.featureName=void 0!==r&&null!=r?r:"draw",this.featureOverLay.setMap(this.map)},D.prototype.deactivate=function(){this.disconnectEventHandlers(),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null,this.UnShieldDBClickZoomEvent(this.map)},D.prototype.drawStartHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);this.vertices.push(e),this.milStdGeom=new j.MilStdGeomtry(this.vertices,this.milStdType,this.milStdParams),this.featureOverLay.getSource().addFeature(new E.default(new C.default(e))),m.unlisten(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),m.listen(this.mapViewport,v.default.CLICK,this.drawContinueHandle,this),m.listen(this.mapViewport,v.default.DBLCLICK,this.drawEndHandle,this),m.listen(this.mapViewport,v.default.MOUSEMOVE,this.mouseMoveHandle,this)},D.prototype.drawContinueHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);j.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<j.enum.ZERO_TOLERANCE||(this.vertices.push(e),this.milStdGeom.Update(this.vertices.slice(0),!1),null==this.feature?(this.feature=new E.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom),this.vertices.length==this.milStdGeom.milStdParams.maxVertices&&this.drawEndHandle(t))},D.prototype.drawEndHandle=function(t){this.disconnectEventHandlers(),t.preventDefault(),this.clear()},D.prototype.mouseMoveHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(!(j.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<j.enum.ZERO_TOLERANCE)){var r=this.vertices.concat([e]);this.milStdGeom.Update(r,!0),null==this.feature?(this.feature=new E.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom)}},D.prototype.disconnectEventHandlers=function(){m.unlisten(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),m.unlisten(this.mapViewport,v.default.CLICK,this.drawContinueHandle,this),m.unlisten(this.mapViewport,v.default.MOUSEMOVE,this.mouseMoveHandle,this),m.unlisten(this.mapViewport,v.default.DBLCLICK,this.drawEndHandle,this)},D.prototype.clear=function(t){this.feature.name=this.featureName,this.dispatchEvent(new j.event.MilStdDrawEvent(j.event.MilStdDrawEvent.DRAW_END,this.feature)),this.featureOverLay.getSource().removeFeature(this.feature),this.UnShieldDBClickZoomEvent(this.map),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null};var k=function t(e,r){var i=void 0!==r?r:{};b.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleEvent:t.handleEvent,handleUpEvent:t.handleUpEvent_,handleMoveEvent:t.handleMoveEvent}),this.map_=e,this.vertexFeature_=null,this.lastPixel_=[0,0],this.rBush_=new S.default,this.pixelTolerance_=void 0!==i.pixelTolerance&&null!=i.pixelTolerance?i.pixelTolerance:10,this.snappedToVertex_=!1,this.dragSegments_=null,this.oldVerticesFeature=new x.default,this.overlay_=new f.default({source:new d.default({useSpatialIndex:!1,wrapX:!!i.wrapX}),updateWhileAnimating:!0,updateWhileInteracting:!0});var n=void 0!=i.style?i.style:t.getDefaultStyleFunction();this.overlay_.setStyle(n),this.setMap(this.map_),this.SEGMENT_WRITERS_={Polygon:this.writeVerticeGeometry,MultiLineString:this.writeVerticeGeometry,LineString:this.writeVerticeGeometry},this.selectTool=null,this.features_=void 0!==i.features?i.features:null,this.cursor_="pointer",this.previousCursor_=void 0};(0,i.inherits)(k,b.default),k.prototype.activate=function(){if(null==this.selectTool&&(this.selectTool=new ol.interaction.Select({wrapX:!1})),void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=0,r=t.getLength();e<r;e++){var i=t.item(e);(i instanceof ol.interaction.Select||i instanceof k)&&t.remove(i)}this.map_.addInteraction(this.selectTool),this.map_.addInteraction(this),m.listen(this.map_,"dblclick",this.modifyEndHandle,this),this.features_=this.selectTool.getFeatures(),this.features_.forEach(this.addFeature_,this),m.listen(this.features_,O.default.ADD,this.handleFeatureAdd_,this),m.listen(this.features_,O.default.REMOVE,this.handleFeatureRemove_,this),D.prototype.ShieldDBClickZoomEvent(this.map_)}},k.prototype.deactivate=function(){void 0!==this.map_&&null!=this.map_&&(D.prototype.UnShieldDBClickZoomEvent(this.map_),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this))},k.prototype.disconnectEventHandlers=function(){void 0!==this.map_&&null!=this.map_&&(m.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this)),m.unlisten(this.features_,O.default.ADD,this.handleFeatureAdd_,this),m.unlisten(this.features_,O.default.REMOVE,this.handleFeatureRemove_,this)},k.prototype.modifyEndHandle=function(t){this.disconnectEventHandlers(),void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature&&(this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear())},k.prototype.addFeature_=function(t){var e=t.getGeometry(),r=null;if(e instanceof C.default&&(r=e),r=e instanceof a.default?e.geometries_[0]:e,void 0!==this.SEGMENT_WRITERS_[r.getType()]&&(this.SEGMENT_WRITERS_[r.getType()].call(this,t),this.oldVerticesFeature.clear(),this.clearOverLayer(this.overlay_),void 0!==e.vertices&&null!=e.vertices))for(var i=0;i<e.vertices.length;i++){var n=new E.default(new C.default(e.vertices[i]));this.overlay_.getSource().addFeature(n),this.oldVerticesFeature.push(n)}var o=this.getMap();void 0!==o&&null!=o&&this.handlePointerAtPixel(this.lastPixel_,o)},k.prototype.clearOverLayer=function(t){void 0!==t&&null!=t&&t.getSource().clear()},k.prototype.setMap=function(t){this.overlay_.setMap(t),b.default.prototype.setMap.call(this,t)},k.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature_(e)},k.prototype.handleFeatureRemove_=function(t){var e=t.element;void 0!==e&&null!=e&&this.dispatchEvent(new j.event.MilStdDrawEvent(j.event.MilStdDrawEvent.MODIFY_FEATURE_END,e));var r,i=this.rBush_,n=[];for(i.forEachInExtent(e.getGeometry().getExtent(),function(t){e===t.feature&&n.push(t)}),r=n.length-1;r>=0;--r)i.remove(n[r]);this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear(),this.vertexFeature_=null},k.prototype.writeVerticeGeometry=function(t){var e,r,i,n,o=t.getGeometry().vertices;for(r=0,i=o.length;r<i;++r)n={feature:t,depth:[r],index:r,segment:[e=o[r],e]},this.rBush_.insert(T.boundingExtent(n.segment),n)},k.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(null==e)e=new E.default(new C.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);else{var r=e.getGeometry();r.setCoordinates(t),e.setGeometry(r)}return e},k.prototype.redrawVertices=function(t,e){if(void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature){var r=this.oldVerticesFeature.item(t);r.setGeometry(new C.default(e)),this.oldVerticesFeature.setAt(t,r)}},k.handleDownEvent_=function(t){this.handlePointerAtPixel(t.pixel,t.map),this.dragSegments_=[];var e=this.vertexFeature_;if(null!=e)for(var r=e.getGeometry().getCoordinates(),i=T.boundingExtent([r]),n=this.rBush_.getInExtent(i),o=0,s=n.length;o<s;++o){var a=n[o],u=a.segment;L.equals(u[0],r)?this.dragSegments_.push([a,0]):L.equals(u[1],r)&&this.dragSegments_.push([a,1])}return null!=this.vertexFeature_},k.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),r=t.map.getTargetElement();e?r.style.cursor!=this.cursor_&&(this.previousCursor_=r.style.cursor,r.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},k.handleDragEvent_=function(t){for(var e=t.coordinate,r=0,i=this.dragSegments_.length;r<i;++r){var n=this.dragSegments_[r],o=n[0],s=(n[1],o.index),a=o.feature,u=a.getGeometry();if(u.getType()==R.default.GEOMETRY_COLLECTION){for(;e.length<a.getGeometry().geometries_[0].getStride();)e.push(0);var l=u.vertices;if(u.milStdType==j.EnumMilstdType.TriangleFlag||u.milStdType==j.EnumMilstdType.RectFlag||u.milStdType==j.EnumMilstdType.CurveFlag||u.milStdType==j.EnumMilstdType.ArrowCross||u.milStdType==j.EnumMilstdType.CircleClosedangle||u.milStdType==j.EnumMilstdType.Closedangle||u.milStdType==j.EnumMilstdType.DoubleClosedangle||u.milStdType==j.EnumMilstdType.Fourstar||u.milStdType==j.EnumMilstdType.Rhombus||u.milStdType==j.EnumMilstdType.SameDirectionClosedangle||u.milStdType==j.EnumMilstdType.Triangle||u.milStdType==j.EnumMilstdType.Vane)if(0==s){if(e[0]-l[1][0]>=0||e[1]-l[1][1]<=0)return}else if(1==s&&(e[0]-l[0][0]<=0||e[1]-l[0][1]>=0))return;this.updateFeature(o,e,!0);break}this.createOrUpdateVertexFeature_(e)}},k.handleUpEvent_=function(t){for(var e,r=t.coordinate,i=this.dragSegments_.length-1;i>=0;--i){e=this.dragSegments_[i][0],this.rBush_.update(T.boundingExtent(e.segment),e);var n=e.feature.getGeometry(),o=n.vertices;if(n.milStdType==j.EnumMilstdType.TriangleFlag||n.milStdType==j.EnumMilstdType.RectFlag||n.milStdType==j.EnumMilstdType.CurveFlag||n.milStdType==j.EnumMilstdType.ArrowCross||n.milStdType==j.EnumMilstdType.CircleClosedangle||n.milStdType==j.EnumMilstdType.Closedangle||n.milStdType==j.EnumMilstdType.DoubleClosedangle||n.milStdType==j.EnumMilstdType.Fourstar||n.milStdType==j.EnumMilstdType.Rhombus||n.milStdType==j.EnumMilstdType.SameDirectionClosedangle||n.milStdType==j.EnumMilstdType.Triangle||n.milStdType==j.EnumMilstdType.Vane)if(0==e.index){if(r[0]-o[1][0]>=0||r[1]-o[1][1]<=0)return!1}else if(1==e.index&&(r[0]-o[0][0]<=0||r[1]-o[0][1]>=0))return!1;this.updateFeature(e,t.coordinate,!0)}return!1},k.prototype.updateFeature=function(t,e,r){var i=t.feature.getGeometry(),n=i.vertices;if(n[t.index]=e,i.Update(n,r),t.feature.setGeometry(i),null!=this.vertexFeature_){var o=this.vertexFeature_.getGeometry();o.setCoordinates(e),this.vertexFeature_.setGeometry(o)}this.redrawVertices(t.index,e),this.rBush_.remove(t);var s=t.segment;s[0]=s[1]=e,t.segment=s,this.rBush_.insert(T.boundingExtent(t.segment),t)},k.handleEvent=function(t){return!(t instanceof P.default)||(t.map.getView().getHints()[I.default.INTERACTING]||t.type!=w.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),_.handleEvent.call(this,t)&&!0)},k.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel(t.pixel,t.map)},k.prototype.handlePointerAtPixel=function(t,e){var r=e.getCoordinateFromPixel(t),i=e.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n=e.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=T.boundingExtent([i,n]),s=this.rBush_.getInExtent(o);if(s.length>0){s.sort(function(t,e){return L.squaredDistanceToSegment(r,t.segment)-L.squaredDistanceToSegment(r,e.segment)});var a=s[0].segment,u=e.getPixelFromCoordinate(a[0]),l=e.getPixelFromCoordinate(a[1]),c=L.squaredDistance(t,u),h=L.squaredDistance(t,l),p=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=p<=this.pixelTolerance_,void(this.snappedToVertex_&&this.createOrUpdateVertexFeature_(a[0]))}null!=this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},k.getDefaultStyleFunction=function(){var t=(0,h.createEditingStyle)();return function(e,r){return t[R.default.POINT]}};var G=function t(e){b.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.map_=void 0!==e&&null!=e?e:null,this.coordinate_=null,this.feature_=null,this.cursor_="move",this.previousCursor_=void 0};(0,i.inherits)(G,b.default),G.prototype.activate=function(){if(void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var r=t.item(e);r instanceof G&&t.remove(r)}this.map_.addInteraction(this),D.prototype.ShieldDBClickZoomEvent(this.map_),m.listen(this.map_,"dblclick",this.modifyEndHandle,this)}},G.prototype.deactivate=function(){if(void 0!==this.map_&&null!=this.map_){D.prototype.UnShieldDBClickZoomEvent(this.map_);for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var r=t.item(e);r instanceof G&&t.remove(r)}}},G.prototype.modifyEndHandle=function(t){void 0!==this.map_&&null!=this.map_&&(m.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.setActive(!1))},G.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},G.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],r=t.coordinate[1]-this.coordinate_[1],i=this.feature_.getGeometry();if(i.translate(e,r),void 0!==i.vertices&&null!=i.vertices)for(var n=i.vertices,o=0,s=n.length;o<s;o++)L.add(n[o],[e,r]);this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},G.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),r=t.map.getTargetElement();e?r.style.cursor!=this.cursor_&&(this.previousCursor_=r.style.cursor,r.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(r.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},G.prototype.handleUpEvent=function(t){return t.map.getTargetElement().style.cursor="default",void 0!==this.feature_&&null!=this.feature_&&this.dispatchEvent(new j.event.MilStdDrawEvent(j.event.MilStdDrawEvent.MODIFY_FEATURE_END,this.feature_)),this.coordinate_=null,this.feature_=null,!1},e.MilStd=j,e.EnumMilstdType=N,j.EnumMilstdType=N,e.MilstdParams=F,j.MilstdParams=F,e.MilStdDrawTool=D,j.tool.MilStdDrawTool=D,e.MilStdModifyTool=k,j.ModifyTool=k,e.MilStdDragPan=G,j.DragPan=G},function(module,exports,__webpack_require__){"use strict";var require;Object.defineProperty(exports,"__esModule",{value:!0});var _typeof2=__webpack_require__(123),_typeof3=_interopRequireDefault(_typeof2),_seal=__webpack_require__(555),_seal2=_interopRequireDefault(_seal);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var COMPILED=!1,goog=goog||{};goog.global=window||{},goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,r){var i,n=t.split("."),o=r||goog.global;n[0]in o||!o.execScript||o.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)!n.length&&goog.isDef(e)?o[i]=e:o=o[i]?o[i]:o[i]={}},goog.define=function(t,e){var r=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(r=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,r)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.define("goog.provide",function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)}),goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var r=t;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED)return goog.isProvided_(t)?t in goog.loadedModules_?goog.loadedModules_[t]:goog.getObjectByName(t):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},goog.forwardDeclare("Document"),goog.forwardDeclare("HTMLScriptElement"),goog.forwardDeclare("XMLHttpRequest"),COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var r,i=t.split("."),n=e||goog.global;r=i.shift();){if(!goog.isDefAndNotNull(n[r]))return null;n=n[r]}return n},goog.globalize=function(t,e){var r=e||goog.global;for(var i in t)r[i]=t[i]},goog.addDependency=function(t,e,r,i){if(goog.DEPENDENCIES_ENABLED){var n,o,s=t.replace(/\\/g,"/"),a=goog.dependencies_;i&&"boolean"!=typeof i||(i=i?{module:"goog"}:{});for(var u=0;n=e[u];u++)a.nameToPath[n]=s,a.loadFlags[s]=i;for(var l=0;o=r[l];l++)s in a.requires||(a.requires[s]={}),a.requires[s][o]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t))return goog.isInModuleLoader_()?goog.module.getInternal_(t):null;if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(e)return goog.writeScripts_(e),null}var r="goog.require could not find: "+t;throw goog.logToConsole_(r),Error(r)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.define("goog.TRANSPILE","detect"),goog.define("goog.TRANSPILER","transpile.js"),goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;e>=0;--e){var r=t[e].src,i=r.lastIndexOf("?"),n=-1==i?r.length:i;if("base.js"==r.substr(n-7,7))return void(goog.basePath=r.substr(0,n-7))}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importProcessedScript_=function(t,e,r){var i='goog.retrieveAndExec_("'+t+'", '+e+", "+r+");";goog.importScript_("",i)},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(t>0){var e=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<t;r++){var i=e[r];goog.maybeProcessDeferredPath_(i)}}},goog.maybeProcessDeferredDep_=function(t){if(goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)){var e=goog.getPathFromDeps_(t);goog.maybeProcessDeferredPath_(goog.basePath+e)}},goog.isDeferredModule_=function(t){var e=goog.getPathFromDeps_(t),r=e&&goog.dependencies_.loadFlags[e]||{};return!(!e||"goog"!=r.module&&!goog.needsTranspile_(r.lang))&&goog.basePath+e in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){var e=goog.getPathFromDeps_(t);if(e&&e in goog.dependencies_.requires)for(var r in goog.dependencies_.requires[e])if(!goog.isProvided_(r)&&!goog.isDeferredModule_(r))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,r=e.createElement("script");r.type="text/javascript",r.src=t,r.defer=!1,r.async=!1,e.head.appendChild(r)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){var i=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";r.write('<script type="text/javascript" src="'+t+'"'+i+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else r.write('<script type="text/javascript">'+e+"<\/script>");return!0}return!1},goog.needsTranspile_=function(lang){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!goog.transpiledLanguages_){goog.transpiledLanguages_={es5:!0,es6:!0,"es6-impl":!0};
/** @preserveTry */
try{goog.transpiledLanguages_.es5=eval("[1,].length!=1");var es6implTest="let a={};const X=class{constructor(){}x(z){return new Map([...arguments]).get(z[0])==3}};return new X().x([a,3])",es6fullTest="class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}";eval('(()=>{"use strict";'+es6implTest+"})()")&&(goog.transpiledLanguages_["es6-impl"]=!1),eval('(()=>{"use strict";'+es6fullTest+"})()")&&(goog.transpiledLanguages_.es6=!1)}catch(t){}}return!!goog.transpiledLanguages_[lang]},goog.transpiledLanguages_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],r={},i=goog.dependencies_;!function t(n){if(!(n in i.written||n in i.visited)){if(i.visited[n]=!0,n in i.requires)for(var o in i.requires[n])if(!goog.isProvided_(o)){if(!(o in i.nameToPath))throw Error("Undefined nameToPath for "+o);t(i.nameToPath[o])}n in r||(r[n]=!0,e.push(n))}}(t);for(var n=0;n<e.length;n++){var o=e[n];goog.dependencies_.written[o]=!0}var s=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,n=0;n<e.length;n++){if(!(o=e[n]))throw goog.moduleLoaderState_=s,Error("Undefined script input");var a=i.loadFlags[o]||{},u=goog.needsTranspile_(a.lang);"goog"==a.module||u?goog.importProcessedScript_(goog.basePath+o,"goog"==a.module,u):goog.importScript_(goog.basePath+o)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{var r;if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))r=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");r=goog.loadModuleFromSource_.call(void 0,t)}var i=goog.moduleLoaderState_.moduleName;if(!goog.isString(i)||!i)throw Error('Invalid module name "'+i+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(i,r):goog.SEAL_MODULE_EXPORTS&&_seal2.default&&(0,_seal2.default)(r),goog.loadedModules_[i]=r}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(){var exports={};return eval(arguments[0]),exports},goog.normalizePath_=function(t){for(var e=t.split("/"),r=0;r<e.length;)"."==e[r]?e.splice(r,1):r&&".."==e[r]&&e[r-1]&&".."!=e[r-1]?e.splice(--r,2):r++;return e.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,r){if(!COMPILED){var i=t;t=goog.normalizePath_(t);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(t);if(null==o)throw new Error('Load of "'+t+'" failed');r&&(o=goog.transpile_.call(goog.global,o,t)),e?o=goog.wrapModule_(t,o):o+="\n//# sourceURL="+t,goog.IS_OLD_IE_?(goog.dependencies_.deferred[i]=o,goog.queuedModules_.push(i)):n(t,o)}},goog.transpile_=function(code,path){var jscomp=goog.global.$jscomp;jscomp||(goog.global.$jscomp=jscomp={});var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER,transpilerCode=goog.loadFileSync_(transpilerPath);transpilerCode&&(eval(transpilerCode+"\n//# sourceURL="+transpilerPath),jscomp=goog.global.$jscomp,transpile=jscomp.transpile)}if(!transpile){var suffix=" requires transpilation but no transpiler was found.";transpile=jscomp.transpile=function(t,e){return goog.logToConsole_(e+suffix),t}}return transpile(code,path)},goog.typeOf=function(t){var e=void 0===t?"undefined":(0,_typeof3.default)(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=void 0===t?"undefined":(0,_typeof3.default)(t);return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_)
/** @preserveTry */;try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if("object"==e||"array"==e){if(t.clone)return t.clone();var r="array"==e?[]:{};for(var i in t)r[i]=goog.cloneObject(t[i]);return r}return t},goog.bindNative_=function(t,e,r){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,r){if(!t)throw new Error;if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var r in e)t[r]=e[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,r=e.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(e.createTextNode(t)),e.body.appendChild(r),e.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(t,e){var r,i=function(t){return goog.cssNameMapping_[t]||t};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?i:function(t){for(var e=t.split("-"),r=[],n=0;n<e.length;n++)r.push(i(e[n]));return r.join("-")}:function(t){return t},e?t+"-"+r(e):r(t)},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,r){goog.exportPath_(t,e,r)},goog.exportProperty=function(t,e,r){t[e]=r},goog.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,i){for(var n=new Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return e.prototype[r].apply(t,n)}},goog.base=function(t,e,r){var i=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!i)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(i.superClass_){for(var n=new Array(arguments.length-1),o=1;o<arguments.length;o++)n[o-1]=arguments[o];return i.superClass_.constructor.apply(t,n)}var s=new Array(arguments.length-2);for(o=2;o<arguments.length;o++)s[o-2]=arguments[o];for(var a=!1,u=t.constructor;u;u=u.superClass_&&u.superClass_.constructor)if(u.prototype[e]===i)a=!0;else if(a)return u.prototype[e].apply(t,s);if(t[e]===i)return t.constructor.prototype[e].apply(t,s);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var r=e.constructor,i=e.statics;r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var n=goog.defineClass.createSealingConstructor_(r,t);return t&&goog.inherits(n,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(n.prototype,e),null!=i&&(i instanceof Function?i(n):goog.defineClass.applyProperties_(n,i)),n},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var r=!goog.defineClass.isUnsealable_(e);return function e(){var i=t.apply(this,arguments)||this;return i[goog.UID_PROPERTY_]=i[goog.UID_PROPERTY_],this.constructor===e&&r&&_seal2.default instanceof Function&&(0,_seal2.default)(i),i}},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var i=0;i<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;i++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",exports.default=goog},function(t,e,r){t.exports={default:r(556),__esModule:!0}},function(t,e,r){r(557),t.exports=r(54).Object.seal},function(t,e,r){var i=r(137),n=r(369).onFreeze;r(202)("seal",function(t){return function(e){return t&&i(e)?t(n(e)):e}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var i=r(6),n=r(22),o=function(t,e){this.ArcID=0;var r=void 0!==e?e:{};(0,n.extend)(this,r),this.Dots=void 0!==t&&null!==t?t:null};e.Arc=o,i.Zondy.Object.Arc=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttDataRow=void 0;var i=r(6),n=r(22),o=function(t,e,r){var i=void 0!==r?r:{};(0,n.extend)(this,i),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};e.CAttDataRow=o,i.Zondy.Object.CAttDataRow=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyle=void 0;var i=r(6),n=r(22),o=(r(377),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow});e.CDisplayStyle=o,i.Zondy.Object.CDisplayStyle=o},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(240));e.default=function(t,e,r){return e in t?(0,i.default)(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(6),l=r(164);function c(t){return t&&t.__esModule?t:{default:t}}r(114);var h=function(t){function e(t,r,o){(0,n.default)(this,e);var a=o||{},u=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));return u.point=void 0!==t&&null!==t?t:null,u.radious=void 0!==r&&null!==r?r:null,u}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){var e=t.getCenter(),r=t.getRadius();this.point=new u.Zondy.Object.Point2D(e[0],e[1]),this.radious=r}}},{key:"toString",value:function(){return null===this.point||0===this.point.length||null===this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),e}(l.Tangram);e.Circle=h,u.Zondy.Object.Circle=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolygon=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(14)),u=r(164),l=r(114),c=r(388);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.polygonArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){this.polygonArr=[];for(var e=t.getLinearRingCount(),r=t.getLinearRings(),i=0;i<e;i++){for(var n=r[i].getCoordinates(),o=n.length,s=[],a=0;a<o;a++)s[a]=new l.Point2D(n[a][0],n[a][1]);this.polygonArr[i]=new c.Polygon(s)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null===this.polygonArr||0===this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),e}(u.Tangram);e.MultiPolygon=p,Zondy.Object.MultiPolygon=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyLine=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(164),l=r(114);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e);var o=r||{},a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,o));return a.nearDis=void 0!==o.nearDis&&null!==o.nearDis?parseFloat(o.nearDis):null,a.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getCoordinates(),r=e.length,i=0;i<r;i++)this.pointArr[i]=new l.Point2D(e[i][0],e[i][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!==this.nearDis&&(t+=";"+this.nearDis),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),e}(u.Tangram);e.PolyLine=h,Zondy.Object.PolyLine=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectCls=void 0;var i=r(6),n=r(22),o=r(107),s=(r(244),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.clsType=void 0!==e.clsType?e.clsType:o.VectClsType.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null});e.VectCls=s,i.Zondy.Object.VectCls=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleParse=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=void 0;var i=r(389),n=r(390),o=r(392),s=r(393),a=r(394),u=r(567),l=r(568),c=r(391),h=r(589);e.ContourNoteParam=i.ContourNoteParam,e.ContourParam=n.ContourParam,e.ContourZValue=o.ContourZValue,e.ContourRegionInfo=s.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=u.NetAnalyse,e.NetAnalysisExtent=l.NetAnalysisExtent,e.SlopLineParam=c.SlopLineParam,e.RuleParse=h.RuleParse},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalyse=void 0;var i=r(6),n=r(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};e.NetAnalyse=o,i.Zondy.Object.NetAnalyse=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysisExtent=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=(r(22),r(139)),h=r(55);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.netClsUrl=void 0!==r.netClsUrl?r.netClsUrl:null,i.flagPosStr=void 0!==r.flagPosStr?r.flagPosStr:null,i.analyTp=void 0!==r.analyTp?r.analyTp:"UserMode",i.weight=void 0!==r.weight?r.weight:",Weight1,Weight1",i.outFormat=void 0!==r.outFormat?r.outFormat:"JSON",i.elementType=void 0!==r.elementType?r.elementType:2,i.nearDis=void 0!==r.nearDis?r.nearDis:.001,i.barrierPosStr=void 0!==r.barrierPosStr?r.barrierPosStr:null,i.roadName=void 0!==r.roadName?r.roadName:"name",i.baseUrl="igs/rest/netAnaly",i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"getNetInfo",value:function(t,e,r,i){null!=t&&void 0!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"addNetFlag",value:function(t,e,r,n,o){var s={};null!=n&&"POST"==n.toUpperCase()?(s.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var a=this.getFullUrl(),u=new h.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:e,processFailed:r}});null!=n&&"POST"==n.toUpperCase()?u.processAsync({method:"POST",data:(0,i.default)(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):u.processAsync()}},{key:"netAnalyse",value:function(t,e,r,n){this.partUrl="netAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,r,n){this.partUrl="comNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,r,n){this.partUrl="pluNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.NetAnalysisExtent=f,l.Zondy.Service.NetAnalysisExtent=f},function(t,e,r){r(375),r(305),r(306),r(570),r(581),r(582),t.exports=r(54).Promise},function(t,e,r){"use strict";var i,n,o,s,a=r(201),u=r(96),l=r(203),c=r(396),h=r(113),p=r(137),f=r(238),d=r(571),g=r(572),y=r(398),v=r(314).set,m=r(576)(),_=r(315),b=r(399),S=r(577),x=r(400),O=u.TypeError,E=u.process,C=E&&E.versions,T=C&&C.v8||"",P=u.Promise,w="process"==c(E),I=function(){},L=n=_.f,R=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[r(106)("species")]=function(t){t(I,I)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e&&0!==T.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),M=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var r=t._c;m(function(){for(var i=t._v,n=1==t._s,o=0,s=function(e){var r,o,s,a=n?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{a?(n||(2==t._h&&F(t),t._h=1),!0===a?r=i:(c&&c.enter(),r=a(i),c&&(c.exit(),s=!0)),r===e.promise?l(O("Promise-chain cycle")):(o=M(r))?o.call(r,u,l):u(r)):l(i)}catch(t){c&&!s&&c.exit(),l(t)}};r.length>o;)s(r[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){v.call(u,function(){var e,r,i,n=t._v,o=N(t);if(o&&(e=b(function(){w?E.emit("unhandledRejection",n,t):(r=u.onunhandledrejection)?r({promise:t,reason:n}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",n)}),t._h=w||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){v.call(u,function(){var e;w?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},k=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw O("Promise can't be resolved itself");(e=M(t))?m(function(){var i={_w:r,_d:!1};try{e.call(t,l(k,i,1),l(D,i,1))}catch(t){D.call(i,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){D.call({_w:r,_d:!1},t)}}};R||(P=function(t){d(this,P,"Promise","_h"),f(t),i.call(this);try{t(l(k,this,1),l(D,this,1))}catch(t){D.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(578)(P.prototype,{then:function(t,e){var r=L(y(this,P));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=w?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=l(k,t,1),this.reject=l(D,t,1)},_.f=L=function(t){return t===P||t===s?new o(t):n(t)}),h(h.G+h.W+h.F*!R,{Promise:P}),r(242)(P,"Promise"),r(579)("Promise"),s=r(54).Promise,h(h.S+h.F*!R,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!R),"Promise",{resolve:function(t){return x(a&&this===s?P:this,t)}}),h(h.S+h.F*!(R&&r(580)(function(t){P.all(t).catch(I)})),"Promise",{all:function(t){var e=this,r=L(e),i=r.resolve,n=r.reject,o=b(function(){var r=[],o=0,s=1;g(t,!1,function(t){var a=o++,u=!1;r.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,r[a]=t,--s||i(r))},n)}),--s||i(r)});return o.e&&n(o.v),r.promise},race:function(t){var e=this,r=L(e),i=r.reject,n=b(function(){g(t,!1,function(t){e.resolve(t).then(r.resolve,i)})});return n.e&&i(n.v),r.promise}})},function(t,e){t.exports=function(t,e,r,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var i=r(203),n=r(573),o=r(574),s=r(122),a=r(365),u=r(397),l={},c={};(e=t.exports=function(t,e,r,h,p){var f,d,g,y,v=p?function(){return t}:u(t),m=i(r,h,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=a(t.length);f>_;_++)if((y=e?m(s(d=t[_])[0],d[1]):m(t[_]))===l||y===c)return y}else for(g=v.call(t);!(d=g.next()).done;)if((y=n(g,m,d.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,r){var i=r(122);t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,r){var i=r(204),n=r(106)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[n]===t)}},function(t,e){t.exports=function(t,e,r){var i=void 0===r;switch(e.length){case 0:return i?t():t.call(r);case 1:return i?t(e[0]):t.call(r,e[0]);case 2:return i?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var i=r(96),n=r(314).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==r(200)(s);t.exports=function(){var t,e,r,l=function(){var i,n;for(u&&(i=s.domain)&&i.exit();t;){n=t.fn,t=t.next;try{n()}catch(i){throw t?r():e=void 0,i}}e=void 0,i&&i.enter()};if(u)r=function(){s.nextTick(l)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);r=function(){c.then(l)}}else r=function(){n.call(i,l)};else{var h=!0,p=document.createTextNode("");new o(l).observe(p,{characterData:!0}),r=function(){p.data=h=!h}}return function(i){var n={fn:i,next:void 0};e&&(e.next=n),t||(t=n,r()),e=n}}},function(t,e,r){var i=r(96).navigator;t.exports=i&&i.userAgent||""},function(t,e,r){var i=r(163);t.exports=function(t,e,r){for(var n in e)r&&t[n]?t[n]=e[n]:i(t,n,e[n]);return t}},function(t,e,r){"use strict";var i=r(96),n=r(54),o=r(146),s=r(138),a=r(106)("species");t.exports=function(t){var e="function"==typeof n[t]?n[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,r){var i=r(106)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:r=!0}},o[i]=function(){return s},t(o)}catch(t){}return r}},function(t,e,r){"use strict";var i=r(113),n=r(54),o=r(96),s=r(398),a=r(400);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,n.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return a(e,t()).then(function(){return r})}:t,r?function(r){return a(e,t()).then(function(){throw r})}:t)}})},function(t,e,r){"use strict";var i=r(113),n=r(315),o=r(399);i(i.S,"Promise",{try:function(t){var e=n.f(this),r=o(t);return(r.e?e.reject:e.resolve)(r.v),e.promise}})},function(t,e,r){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(r(584));window.Promise=i.default},function(t,e,r){"use strict";var i,n,o=a(r(585)),s=a(r(123));function a(t){return t&&t.__esModule?t:{default:t}}!function(o,a){"object"===(0,s.default)(e)&&void 0!==t?t.exports=a():void 0===(n="function"==typeof(i=a)?i.call(e,r,e,t):i)||(t.exports=n)}(0,function(){var t=setTimeout;function e(){}function r(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var o;try{o=r(t._value)}catch(t){return void n(e.promise,t)}i(e.promise,o)}else(1===t._state?i:n)(e.promise,t._value)})):t._deferreds.push(e)}function i(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":(0,s.default)(e))||"function"==typeof e)){var r=e.then;if(e instanceof l)return t._state=3,t._value=e,void a(t);if("function"==typeof r)return void u(function(t,e){return function(){t.apply(e,arguments)}}(r,e),t)}t._state=1,t._value=e,a(t)}catch(e){n(t,e)}}function n(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&l._immediateFn(function(){t._handled||l._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)r(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var r=!1;try{t(function(t){r||(r=!0,i(e,t))},function(t){r||(r=!0,n(e,t))})}catch(t){if(r)return;r=!0,n(e,t)}}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}var c=l.prototype;return c.catch=function(t){return this.then(null,t)},c.then=function(t,i){var n=new this.constructor(e);return r(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,i,n)),n},l.all=function(t){return new l(function(e,r){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var n=i.length;function o(t,a){try{if(a&&("object"===(void 0===a?"undefined":(0,s.default)(a))||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){o(t,e)},r)}i[t]=a,0==--n&&e(i)}catch(t){r(t)}}for(var a=0;a<i.length;a++)o(a,i[a])})},l.resolve=function(t){return t&&"object"===(void 0===t?"undefined":(0,s.default)(t))&&t.constructor===l?t:new l(function(e){e(t)})},l.reject=function(t){return new l(function(e,r){r(t)})},l.race=function(t){return new l(function(e,r){for(var i=0,n=t.length;i<n;i++)t[i].then(e,r)})},l._immediateFn="function"==typeof o.default&&function(t){(0,o.default)(t)}||function(e){t(e,0)},l._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},l})},function(t,e,r){t.exports={default:r(586),__esModule:!0}},function(t,e,r){r(587),t.exports=r(54).setImmediate},function(t,e,r){var i=r(113),n=r(314);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},function(t,e,r){"use strict";var i=o(r(313)),n=o(r(372));function o(t){return t&&t.__esModule?t:{default:t}}!function(e){if(e.__disableNativeFetch||!e.fetch){l.prototype.append=function(t,e){t=a(t),e=u(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){var e=this.map[a(t)];return e?e[0]:null},l.prototype.getAll=function(t){return this.map[a(t)]||[]},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,e){this.map[a(t)]=[u(e)]},l.prototype.forEach=function(t,e){(0,n.default)(this.map).forEach(function(r){this.map[r].forEach(function(i){t.call(e,i,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},f.call(d.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];y.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=l,e.Request=d,e.Response=y,e.fetch=function(t,e){return new i.default(function(i,n){var o;o=d.prototype.isPrototypeOf(t)&&!e?t:new d(t,e);var s=new XMLHttpRequest,a=!1;function u(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599){if(a)return;return a=!0,void n(new TypeError("Network request failed"))}var e={status:t,statusText:s.statusText,headers:function(t){var e=new l;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),i=r.shift().trim(),n=r.join(":").trim();e.append(i,n)}),e}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},r="response"in s?s.response:s.responseText;a||(a=!0,i(new y(r,e)))}}s.onreadystatechange=u,s.onload=u,s.onerror=function(){a||(a=!0,n(new TypeError("Network request failed")))},s.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in s&&r.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,void 0!==t&&t.exports&&(t.exports=e.fetch)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){this.map={},t instanceof l?t.forEach(function(t,e){this.append(e,t)},this):t&&(0,n.default)(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return i.default.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new i.default(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function p(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return i.default.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return i.default.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(p)},this.text=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return function(t,e){var r=new FileReader,i=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",n=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(n)||i.match(n),s=[t];return o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,s),h(r)}(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return i.default.resolve(this._bodyText)}):this.text=function(){return c(this)||i.default.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t,e){var r=(e=e||{}).body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new l(e.headers)),this.method=function(t){var e=t.toUpperCase();return o.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r,e)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(n))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof l?e.headers:new l(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:void 0)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuleParse=e.IgserverRules=e.MapRules=void 0;var i=o(r(8)),n=o(r(16));function o(t){return t&&t.__esModule?t:{default:t}}var s=e.MapRules=[{type:"mapboxgl",rule:"{z}/{y}/{x}"},{type:"cesium",rule:"{z}/{y}/{x}"}],a=e.IgserverRules=[{type:"DynamicTile",id:2,title:"动态裁图",description:"动态裁图为IGSMap2D的额外特性，为服务的功能",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"IGSMap2D",id:3,title:"二维文档服务",description:"IGServer自定义的二维文档REST服务",url:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}&w={w}&h={h}&f={f}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"",GetMap:"http://{ip}:{port}/igs/rest/mrms/docs/{serverName}?bbox={bbox}",GetFeatureInfo:""}},{type:"IGSTile",id:5,title:"瓦片服务",description:"IGServer自定义的瓦片REST服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}/{level}/{row}/{col}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/mrcs/tiles/{serverName}?f=json&v=2.0",GetMap:"http://{ip}:{port}/igs/rest/mrms/tile/{serverName}",GetFeatureInfo:""}},{type:"WMS",id:8,title:"WMS",description:"OGC-WMS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/doc/{serverName}/WMSServer",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMSServer",GetFeatureInfo:""}},{type:"WMTS",id:10,title:"WMTS",description:"OGC-WMTS服务",url:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer?service=WMTS&request=GetTile&version=1.0.0&style=default&format=image/png&layer={serverName}&tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}",GetFeatureInfo:""},baseUrl:{GetCapabilities:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServer/1.0.0/WMTSCapabilities.xml",GetMap:"http://{ip}:{port}/igs/rest/ogc/{serverName}/WMTSServerr",GetFeatureInfo:""}}],u=e.RuleParse=function(){function t(){(0,i.default)(this,t)}return(0,n.default)(t,[{key:"get",value:function(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"GetMap",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"mapboxgl",l=void 0;if("number"==typeof t?l=a.find(function(e){return e.id===t}):"string"==typeof t&&(l=a.find(function(e){return e.title==t})),l){var c=l[n][o];for(c=(c=c.replace("{ip}",e)).replace("{port}",r);c.indexOf("{serverName}")>=0;)c=c.replace("{serverName}",i);var h=void 0;switch(u){case"mapboxgl":h=s.filter(function(t){return"mapboxgl"===t.type}),c=(c=(c=c.replace("{level}/{row}/{col}",h[0].rule)).replace("tilematrix={tilematrix}&tilerow={tilerow}&tilecol={tilecol}","tilematrix={z}&tilerow={y}&tilecol={x}")).replace("w={w}&h={h}&f={f}","w=512&h=512&f=png");case"cesium":h=s.filter(function(t){return"cesium"===t.type}),c=c.replace("{level}/{row}/{col}",h[0].rule)}return c}}},{key:"GetCapabilities",value:function(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,i,n,"GetCapabilities")}},{key:"GetMap",value:function(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"mapboxgl";return this.get(t,e,r,i,n,"GetMap",o)}},{key:"GetFeatureInfo",value:function(t,e,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"baseUrl";return this.get(t,e,r,i,n,"GetFeatureInfo")}}]),t}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=void 0;var i=r(395),n=r(401),o=r(403),s=r(55),a=r(402);e.CommonServiceBase=i.CommonServiceBase,e.Events=n.Events,e.CORS=o.CORS,e.RequestTimeout=o.RequestTimeout,e.FetchRequest=o.FetchRequest,e.IgsServiceBase=s.IgsServiceBase,e.JSONFormat=a.JSONFormat;var u={Events:n.Events,CommonServiceBase:i.CommonServiceBase,CORS:o.CORS,RequestTimeout:o.RequestTimeout,FetchRequest:o.FetchRequest,IgsServiceBase:s.IgsServiceBase,JSONFormat:a.JSONFormat};e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=void 0;var i=r(592),n=r(404),o=r(593),s=r(179),a=r(594),u=r(595),l=r(596);e.ColorInfo=i.ColorInfo,e.GDBInfo=n.GDBInfo,e.MapDoc=o.MapDoc,e.CatalogService=s.CatalogService,e.TileLayer=a.TileLayer,e.VectorLayer=u.VectorLayer,e.SystomInfo=l.SystomInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInfo=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(179),l=r(55);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.SystemLibID=void 0!==r.SystemLibID?r.SystemLibID:0,o.ColorNO=void 0!==r.ColorNO?r.ColorNO:6,o.Red=void 0!==r.Red?r.Red:0,o.Green=void 0!==r.Green?r.Green:0,o.Blue=void 0!==r.Blue?r.Blue:0,o.addNew=void 0!==r.addNew&&r.addNew,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getColorNO",value:function(t,e,r){var i=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(i.SystemLibID=t.SystemLibID),void 0!==t.Red&&(i.Red=t.Red),void 0!==t.Green&&(i.Green=t.Green),void 0!==t.Blue&&(i.Blue=t.Blue),void 0!==t.addNew&&(i.addNew=t.addNew)),i.partUrl="ColorLib/getColorNO?f=json&libID="+i.SystemLibID+"&r="+i.Red+"&g="+i.Green+"&b="+i.Blue+"&addNew="+i.addNew;var n=i.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getColorRGB",value:function(t,e,r){var i=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(i.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(i.ColorNO=t.ColorNO)),i.partUrl="ColorLib/getColorRGB?f=json&libID="+i.SystemLibID+"&colorNO="+i.ColorNO;var n=i.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}}]),e}(u.CatalogService);e.ColorInfo=h,Zondy.Catalog.ColorInfo=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDoc=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(6),c=r(22),h=r(179),p=r(55);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.docName=void 0!==r.docName?r.docName:null,i.mapIndex=void 0!==r.mapIndex?r.mapIndex:0,i.layerID=void 0!==r.layerID?r.layerID:0,i.version=void 0!==r.version?r.version:2,i.include=void 0!==r.include?r.include:"{includeDetails:true,includeSubs:false}",i.returnFullStyle=void 0!==r.returnFullStyle&&r.returnFullStyle,i.guid=void 0!==r.guid?r.guid:(0,c.newGuid)(),i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"getMapDocList",value:function(t,e){this.partUrl="docs?v="+this.version+"&f=json";var r=this.getFullUrl();new p.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,r,i,n){var o=this;if("boolean"==typeof n&&(o.returnFullStyle=n),"boolean"==typeof e||"boolean"==typeof r){var s={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof r&&r};o.include=(0,c.toJSON)(s)}o.partUrl="docs/"+o.docName+"?include="+o.include+"&returnFullStyle="+o.returnFullStyle+"&guid="+o.guid+"&f=json";var a=o.getFullUrl();new p.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:t,processFailed:i}}).processAsync()}},{key:"getMapInfo",value:function(t,e,r){var i=this;"boolean"==typeof e&&(i.returnFullStyle=e),i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var n=i.getFullUrl();new p.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:r}}).processAsync()}},{key:"getMapDocTree",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"?tree=true&guid="+r.guid+"&f=json";var i=r.getFullUrl();new p.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerID+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var i=r.getFullUrl();new p.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers?f=json";var i=r.getFullUrl();new p.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/delete?layerIDs="+r.layerID+"&guid="+r.guid+"&f=json";var i=r.getFullUrl();new p.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/add?guid="+n.guid+"&f=json";var o=n.getFullUrl();new p.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,r){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/index?guid="+n.guid+"&f=json";var o=n.getFullUrl();new p.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,r,i){this.partUrl="legendInfo/"+this.docName+"?f=json&layerIndexes="+t+"&fields="+e;var n=this.getFullUrl();new p.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:r,processFailed:i}}).processAsync()}}]),e}(h.CatalogService);e.MapDoc=d,l.Zondy.Catalog.MapDoc=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(179),l=r(55);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.tileName=void 0!==r.tileName?r.tileName:null,o.version=void 0!==r.version?r.version:"2.0",o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getTileList",value:function(t,e){var r=this;r.partUrl="tiles?f=json",this.version&&("2.0"===r.version?r.partUrl+="&v=2":r.partUrl+="&v="+r.version);var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var r=this;r.partUrl="tiles/"+r.tileName+"?f=json",r.version&&(r.partUrl+="&v="+r.version);var i=r.getFullUrl();new l.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}]),e}(u.CatalogService);e.TileLayer=h,Zondy.Catalog.TileLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(22),c=r(404),h=r(55),p=r(244);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var r=t||{};return(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r))}return(0,u.default)(e,t),(0,s.default)(e,[{key:"getSfclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/sfcls?user="+r.User+"&psw="+r.Password+"&containAll="+this.containAll+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/acls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ocls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/ncls?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/rds?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0||"mapgislocalplus"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/sfcls?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/acls?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ocls?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/ncls?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var r=this;r.serverName.toLowerCase().indexOf("mapgislocal")>=0?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.rcsName+"/rds?user="+r.User+"&psw="+r.Password+"&f=json";var i=r.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,r){var i=this;i.serverName.toLowerCase().indexOf("mapgislocal")>=0?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,r){var i=this;i.serverName.toLowerCase().indexOf("mapgislocal")>=0?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,r,i){this.partUrl="layerinfo?gdbpUrl="+t+"&f=json&encryptPassword="+i+"&proj="+this.proj;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,r){var n=this;if(null!==(t=null!==t?t:null)&&null!==n.serverName&&null!==n.gdbName){null!==n.User&&null!==n.Password?n.partUrl="datasource/"+n.User+":"+n.Password+"@":n.partUrl="datasource/",null===t.clsName&&(t.clsName=(0,l.newGuid)()),n.partUrl+=n.serverName+"/"+n.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null===t.attStruct&&(t.attStruct=new p.CAttStruct);var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,r,i){var n=this;if(null!==n.serverName&&null!==n.gdbName&&null!==t&&null!==e){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:r,processFailed:i}}).processAsync()}}}]),e}(c.GDBInfo);e.VectorLayer=d,Zondy.Catalog.VectorLayer=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(14)),u=r(179),l=r(55);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.f=r.f||"json",o.page=r.page||0,o.pageCount=r.pageCount||20,o.systemLib=r.systemLib||null,o.type=r.type||null,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetSystemLibrary",value:function(t,e){this.partUrl="systemlibraries?f="+this.f;var r=this.getFullUrl();new l.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetSymbol",value:function(t,e){var r=this,i="symbols?&systemLib="+r.systemLib+"&type="+r.type;r.f&&(i+="&f="+r.f),r.page&&(i+="&page="+r.page),r.size&&(i+="&size="+r.pageCount),r.partUrl=i;var n=r.getFullUrl();new l.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}]),e}(u.CatalogService);e.SystomInfo=h,Zondy.Catalog.SystomInfo=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditDocFeature=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(316),h=r(55);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,i){(0,o.default)(this,e);var s=i||{},u=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return u.docName=void 0!==t?t:null,u.mapIndex=0,u.layerIndex=void 0!==r?r:0,u}return(0,u.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/addFeatures?f="+n.f+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/updateFeatures?f="+n.f+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,r){var i=this;if(void 0!==t){i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/deleteFeatures?f="+i.f+"&objectIds="+t+"&guid="+i.guid;var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditDocFeature=f,l.Zondy.Service.EditDocFeature=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditLayerFeature=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(316),h=r(55);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r){(0,o.default)(this,e);var i=r||{},s=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.gdbp=void 0!==t?t:null,s}return(0,u.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="layer/addFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,r){var n=this;if(void 0!==t){n.partUrl="layer/updateFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,r){var i=this;if(void 0!==t){i.partUrl="layer/deleteFeatures?f="+i.f+"&objectIds="+t+"&gdbp="+i.gdbp+"&guid="+i.guid;var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:e,processFailed:r}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditLayerFeature=f,l.Zondy.Service.EditLayerFeature=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQuery=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(6),c=r(206),h=r(408),p=r(55);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r,i,s){(0,o.default)(this,e);var u=s||{},l=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,u));return l.queryParam=t,l.mapName=r,l.mapIndex=0,l.layerIndex=i,l.baseUrl="igs/rest/extend/MultiGeo",l.partUrl="docs/"+l.mapName+"/"+l.mapIndex.toString()+"/"+l.layerIndex+"/Geoquery",l.partUrl+=t.getParameterURL(),l}return(0,u.default)(e,t),(0,s.default)(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof h.MultiGeoQueryParameter){var r=null;"point"===this.queryParam.geometryType?r={pointArr:this.queryParam.geometry}:"line"===this.queryParam.geometryType?r={lineArr:this.queryParam.geometry}:"polygon"===this.queryParam.geometryType&&(r={PolygonObjs:this.queryParam.geometry});var n=this.getFullUrl();new p.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),e}(c.QueryServiceBase);e.MultiGeoQuery=d,l.Zondy.Service.MultiGeoQuery=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQuery=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(14)),u=r(6),l=r(206),c=r(409),h=r(55);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,o){(0,n.default)(this,e);var a=o||{},u=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,a));return u.queryParam=t,u.gdbp=r,u.baseUrl="igs/rest/extend/dxlcz",u.partUrl="objlayer/query?gdbp="+r,u.partUrl+=t.getParameterURL(),u}return(0,a.default)(e,t),(0,o.default)(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof c.ObjClsQueryParameter){var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(l.QueryServiceBase);e.ObjClsQuery=f,u.Zondy.Service.ObjClsQuery=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryLayerFeature=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{},a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.queryParam=t,a.partUrl="layer/query",a}return(0,s.default)(e,t),e}(r(206).QueryServiceBase);e.QueryLayerFeature=l,a.Zondy.Service.QueryLayerFeature=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryUnifyParameter=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(13)),s=h(r(14)),a=r(410),u=r(248),l=r(411),c=r(603);function h(t){return t&&t.__esModule?t:{default:t}}var p=e.QueryUnifyParameter=function(t){function e(){return(0,n.default)(this,e),(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this))}return(0,s.default)(e,t),e}((0,c.mix)(a.QueryByLayerParameter,u.QueryParameter,l.QueryDocFeature));e.default=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=u(r(240)),n=u(r(299)),o=u(r(604)),s=u(r(608)),a=u(r(8));function u(t){return t&&t.__esModule?t:{default:t}}function l(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=function t(){(0,a.default)(this,t);var r=!0,i=!1,n=void 0;try{for(var o,u=(0,s.default)(e);!(r=(o=u.next()).done);r=!0){var l=o.value;l&&c(this,new l)}}catch(t){i=!0,n=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw n}}},n=!0,o=!1,u=void 0;try{for(var l,h=(0,s.default)(e);!(n=(l=h.next()).done);n=!0){var p=l.value;p&&c(i,p),p&&c(i.prototype,p.prototype)}}catch(t){o=!0,u=t}finally{try{!n&&h.return&&h.return()}finally{if(o)throw u}}return i}function c(t,e){var r=!0,a=!1,u=void 0;try{for(var l,c=(0,s.default)((0,o.default)(e));!(r=(l=c.next()).done);r=!0){var h=l.value;if("constructor"!==h&&"prototype"!==h&&"name"!==h){var p=(0,n.default)(e,h);(0,i.default)(t,h,p)}}}catch(t){a=!0,u=t}finally{try{!r&&c.return&&c.return()}finally{if(a)throw u}}}e.mix=l,e.copyProperties=c,e.default=l},function(t,e,r){t.exports={default:r(605),__esModule:!0}},function(t,e,r){r(606),t.exports=r(54).Reflect.ownKeys},function(t,e,r){var i=r(113);i(i.S,"Reflect",{ownKeys:r(607)})},function(t,e,r){var i=r(304),n=r(243),o=r(122),s=r(96).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),r=n.f;return r?e.concat(r(t)):e}},function(t,e,r){t.exports={default:r(609),__esModule:!0}},function(t,e,r){r(306),r(305),t.exports=r(610)},function(t,e,r){var i=r(122),n=r(397);t.exports=r(54).getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureService=void 0;var i=c(r(291)),n=c(r(412)),o=c(r(8)),s=c(r(16)),a=r(180),u=r(405),l=r(124);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,o.default)(this,t),this.url=e.url;var r=this.url.split("http://");this._ip=r[1].split(":")[0];var i=r[1].split(":")[1].split("/");this._port=i[0],this.url.indexOf("igs/rest/mrfs/docs")>-1&&(this._mapId=i[i.length-1])}return(0,s.default)(t,null,[{key:"get",value:function(t,e,r){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status||304==i.status?e.call(this,i.responseText):4===i.readyState&&200!==i.status&&304!==i.status&&r.call(this,i.responseText)},i.send()}}]),t}();h.prototype.query=function(t,e,r){t=a.BaseParameter.formatParam(t);var o,s,c=(0,n.default)({},t),h=void 0,p=void 0,f=void 0,d=void 0,g=void 0;if("string"==typeof(d=c.layers)&&(d=d.split(",")),s=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"],(0,i.default)(c).forEach(function(t){switch(t){case"pagination":c.recordNumber=c.pagination;break;case"orderBy":c.orderField=c.orderBy;break;case"spatialRelationType":c.MustInside="MustInside"===c.spatialRelationType,c.Intersect="Intersect"===c.spatialRelationType;break;case"objectIds":c.objectIds=c.objectIds.join(",")}}),c.hasOwnProperty("geometry")&&c.geometry||c.hasOwnProperty("rectangle")&&c.rectangle.length>0)if(h=new u.QueryFeatureRule({EnableDisplayCondition:c.enableDisplayCondition,MustInside:c.MustInside,CompareRectOnly:c.compareRectOnly,Intersect:c.Intersect}),!c.hasOwnProperty("geometry")&&c.rectangle.length>0)f=new l.Rectangle(c.rectangle[0],c.rectangle[1],c.rectangle[2],c.rectangle[3]),delete c.rectangle;else if("Point"===c.geometry.type)f=new l.Point2D(c.geometry.coordinates[0],c.geometry.coordinates[1],{nearDis:"0.001"}),delete c.geometry;else if("LineString"===c.geometry.type||"Polygon"===c.geometry.type){for(var y=[],v=0;v<c.geometry.coordinates.length;v++)y.push(new l.Point2D(c.geometry.coordinates[v][0],c.geometry.coordinates[v][1]));switch(c.geometry.type){case"LineString":f=new l.PolyLine(y);break;case"Polygon":f=new l.Polygon(y)}delete c.geometry}else if("MultiPolygon"===c.geometry.type){for(var m=[],_=0;_<c.geometry.coordinates.length;_++){for(var b=[],S=c.geometry.coordinates[_],x=0;x<S.length;x++)b.push(new l.Point2D(S[x][0],S[x][1]));m.push(new l.Polygon(b))}f=new l.MultiPolygon(m),delete c.geometry}o=new u.QueryFeatureStruct({IncludeGeometry:c.IncludeGeometry,IncludeAttribute:c.IncludeAttribute,IncludeWebGraphic:c.IncludeWebGraphic});var O=new RegExp("^[0-9]+$");if(d.length<=0)throw new Error("请填写您要查询的图层");if(O.test(d[0]))p=new u.QueryParameter,g=new u.QueryDocFeature(p,this._mapId,d.join(","),{ip:this._ip,port:this._port});else{if(!("string"==typeof d[0]&&d[0].indexOf("gdbp")>-1))throw new Error("请填写正确的图层Id或gdbp地址");p=new u.QueryByLayerParameter(d),g=new u.QueryLayerFeature(p,{ip:this._ip,port:this._port})}f&&(p.geometry=f,p.rule=h),p.struct=o;for(var E=(0,n.default)({},c),C=0;C<s.length;C++)E.hasOwnProperty(s[C])&&delete E[s[C]];(0,l.extend)(p,E),g.query(function(t){e&&e(t)},function(t){r&&r(t)})},h.prototype.add=function(t,e,r,i){var n=this;this.getFieldAtt(e,function(o){var s=n.getFeatureSet(o,t);n.getFeatureService(e).add(s,r,i)})},h.prototype.update=function(t,e,r,i){var n=this;this.getFieldAtt(e,function(o){var s=n.getFeatureSet(o,t);n.getFeatureService(e).update(s,r,i)})},h.prototype.delete=function(t,e,r,i){t=t.join(","),this.getFeatureService(e).deletes(t,r,i)},h.prototype.getFeatureSet=function(t,e){for(var r=[],i=t.FieldAtt.FldType,n=0;n<i.length;n++)r.push(i[n].substr(3,i[n].length).toLowerCase());t.FieldAtt.FldType=r;for(var o=new l.FeatureSet({AttStruct:new l.CAttStruct(t.FieldAtt)}),s=0;s<e.length;s++){for(var a=e[s].hasOwnProperty("geometry")&&e[s].geometry,u=void 0,c=void 0,h=void 0,p=[],f=0;f<t.FieldAtt.FldName.length;f++)e[s].attributes.hasOwnProperty(t.FieldAtt.FldName[f])?p.push(e[s].attributes[t.FieldAtt.FldName[f]]):p.push(null);var d=new l.Feature({AttValue:p}),g=void 0;if(a){var y=e[s].geometryType,v=void 0,m=void 0,_=void 0,b=void 0,S=void 0,x=void 0,O=void 0,E=void 0;switch(u=e[s].geometry,y){case"Point":c=[];for(var C=0;C<u.length;C++)S=new l.GPoint(u[C].coordinates[0],u[C].coordinates[1]),c.push(S);v=new l.FeatureGeometry({PntGeom:c}),g=1,e[s].style&&(_=new l.CPointInfo(e[s].style),m=new l.WebGraphicsInfo({InfoType:1,PntInfo:_}));break;case"LineString":c=[];for(var T=0;T<u.length;T++){x=[];for(var P=0;P<u[T].coordinates.length;P++)x.push(new l.Point2D(u[T].coordinates[P].x,u[T].coordinates[P].y));O=new Arc(x),b=new l.AnyLine([O]),h=new l.GLine(b),c.push(h)}v=new l.FeatureGeometry({LinGeom:c}),g=2,e[s].style&&(_=new l.CLineInfo(e[s].style),m=new l.WebGraphicsInfo({InfoType:2,LinInfo:_}));break;case"Polygon":c=[];for(var w=0;w<u.length;w++){b=[];for(var I=[],L=0;L<u[w].exterior.length;L++)I.push(new l.Point2D(u[w].exterior[L].x,u[w].exterior[L].y));b.push(new l.AnyLine([new Arc(I)]));for(var R=0;R<u[w].interior.length;R++){for(var M=[],A=0;A<u[w].interior[R].length;A++)M.push(new l.Point2D(u[w].interior[R][A].x,u[w].interior[R][A].y));b.push(new l.AnyLine([new Arc(M)]))}E=new l.GRegion(b),c.push(E)}v=new l.FeatureGeometry({RegGeom:c}),g=3,e[s].style&&(_=new l.CRegionInfo(e[s].style),m=new l.WebGraphicsInfo({InfoType:3,RegInfo:_}))}d.fGeom=v,d.GraphicInfo=m,d.ftype=g}e[s].FID&&d.setFID(e[s].FID),o.addFeature(d)}return o},h.prototype.getFeatureService=function(t){return t.indexOf("gdbp")>=0?new u.EditLayerFeature(t):new u.EditDocFeature(this._mapId,t,{ip:this._ip,port:this._port})},h.prototype.getFieldAtt=function(t,e){var r=this;t.indexOf("gdbp")>=0?this.getGDBPInfo(t,e):this.getLayerInfo(t,function(t){r.getGDBPInfo(t,e)})},h.prototype.getGDBPInfo=function(t,e){h.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t),e(t)})},h.prototype.getLayerInfo=function(t,e){h.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){var r=(t=JSON.parse(t)).URL;e(r)})},e.FeatureService=h,l.Zondy.Service.FeatureService=h},function(t,e,r){r(613),t.exports=r(54).Object.assign},function(t,e,r){var i=r(113);i(i.S+i.F,"Object",{assign:r(614)})},function(t,e,r){"use strict";var i=r(138),n=r(199),o=r(243),s=r(241),a=r(198),u=r(364),l=Object.assign;t.exports=!l||r(178)(function(){var t={},e={},r=Symbol(),i="abcdefghijklmnopqrst";return t[r]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[r]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var r=a(t),l=arguments.length,c=1,h=o.f,p=s.f;l>c;)for(var f,d=u(arguments[c++]),g=h?n(d).concat(h(d)):n(d),y=g.length,v=0;y>v;)f=g[v++],i&&!p.call(d,f)||(r[f]=d[f]);return r}:l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SQLParameter=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(180),u=r(124);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.where=void 0,(0,u.extend)(r,t),r}return(0,s.default)(e,t),e}(a.BaseParameter);e.SQLParameter=c,u.Zondy.Service.SQLParameter=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryParameter=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(13)),s=p(r(14)),a=r(180),u=r(124),l=r(318),c=r(322),h=r(323);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.geometry=void 0,r.where=void 0,r.compareRectOnly=!1,r.enableDisplayCondition=!1,r.spatialRelationType="Intersect",(0,u.extend)(r,t),r}return(0,s.default)(e,t),e}(a.BaseParameter);f.prototype.fromGeoJSON=function(t){if(t)switch(t.geometry.type){case"Point":this.geometry=new l.VPoint({coordinates:t.geometry.coordinates});break;case"LineString":this.geometry=new c.VPolyline({coordinates:t.geometry.coordinates});break;case"Polygon":this.geometry=new h.VPolygon({coordinates:t.geometry.coordinates[0]})}},e.GeometryParameter=f,u.Zondy.Service.GeometryParameter=f},function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&f())}function f(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||c||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleParameter=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(180),u=r(124);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.where=void 0,r.rectangle=[],r.compareRectOnly=!1,r.enableDisplayCondition=!1,r.spatialRelationType="Intersects",(0,u.extend)(r,t),r}return(0,s.default)(e,t),e}(a.BaseParameter);e.RectangleParameter=c,u.Zondy.Service.RectangleParameter=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectIdsParameter=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(180),u=r(124);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,n.default)(this,e);var r=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this));return r.objectIds=[],(0,u.extend)(r,t),r}return(0,s.default)(e,t),e}(a.BaseParameter);e.ObjectIdsParameter=c,u.Zondy.Service.ObjectIdsParameter=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=void 0;var i=h(r(53)),n=h(r(412)),o=h(r(8)),s=h(r(16)),a=r(124),u=r(318),l=r(322),c=r(323);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(e){(0,o.default)(this,t),this.geometry=void 0,this.geometryType=void 0,this.attributes=void 0,this.style=void 0,this.FID=void 0,(0,a.extend)(this,e)}return(0,s.default)(t,null,[{key:"fromQueryResult",value:function(e){if(!e.hasOwnProperty("SFEleArray")||!e.hasOwnProperty("AttStruct")||e.hasOwnProperty("SFEleArray")&&!e.SFEleArray||e.hasOwnProperty("AttStruct")&&!e.AttStruct)return[];for(var r=e.SFEleArray,i=e.AttStruct,n=[],o=void 0,s=0;s<r.length;s++){for(var a={},h=[],p=void 0,f=0;f<r[s].AttValue.length;f++)""!==r[s].AttValue[f]&&(a[i.FldName[f]]=r[s].AttValue[f]);if(r[s].fGeom)switch(r[s].ftype){case 1:for(var d=r[s].fGeom.PntGeom,g=0;g<d.length;g++){var y=new u.VPoint({coordinates:[d[g].Dot.x,d[g].Dot.y]});h.push(y),p="Point"}break;case 2:for(var v=r[s].fGeom.LinGeom,m=0;m<v.length;m++){var _=new l.VPolyline({coordinates:v[m].Line.Arcs[0].Dots});h.push(_),p="LineString"}break;case 3:for(var b=r[s].fGeom.RegGeom,S=0;S<b.length;S++){var x=new c.VPolygon;x.exterior=b[S].Rings[0].Arcs[0].Dots;for(var O=1;O<b[S].Rings.length;O++)x.interior.push(b[S].Rings[O].Arcs[0].Dots);h.push(x),p="Polygon"}}var E=void 0;if(r[s].GraphicInfo){var C=r[s].GraphicInfo;switch(C.InfoType){case 1:E=C.PntInfo;break;case 2:E=C.LinInfo;break;case 3:E=C.RegInfo}}o=new t({attributes:a,FID:r[s].FID,geometry:h,geometryType:p,style:E}),n.push(o)}return n}},{key:"fromGeoJSON",value:function(e){var r=void 0,i=[];if(!e.hasOwnProperty("type"))throw new Error("请输入正确的geoJSON");if("Feature"===e.type)return new t({geometry:t.geometry,attributes:e.properties});if("FeatureCollection"===e.type){for(var n=e.features,o=void 0,s=void 0,a=void 0,u=0;u<n.length;u++){switch(o=[],a=n[u].geometry.coordinates,n[u].geometry.type){case"Point":o.push(n[u].geometry);break;case"LineString":s=[];for(var l=0;l<a.length;l++)s.push({x:Number(a[l][0]),y:Number(a[l][1])});n[u].geometry.coordinates=s,o.push(n[u].geometry);break;case"Polygon":for(var h=new c.VPolygon,p=0;p<a[0].length;p++)h.exterior.push({x:Number(a[0][p][0]),y:Number(a[0][p][1])});for(var f=1;f<a.length;f++){for(var d=[],g=0;g<a[f].length;g++)d.push({x:Number(a[f][g][0]),y:Number(a[f][g][1])});h.exterior.push(d)}o.push(h)}r=new t({geometry:o,attributes:n[u].properties,geometryType:n[u].geometry.type}),i.push(r)}return i}throw new Error("不支持的geoJSON类型")}},{key:"toAntTableData",value:function(e){for(var r=[],i=t.fromQueryResult(e),o=0;o<i.length;o++)r.push((0,n.default)(i[o].attributes,{key:i[o].FID?i[o].FID:o}));return r}},{key:"resultToGeojson",value:function(e){var r=t.fromQueryResult(e),n=[];r=JSON.parse((0,i.default)(r).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));for(var o=void 0,s=0;s<r.length;s++)o=t.polygonToGeojson(r[s]),n=n.concat(o);return{type:"feature",features:n}}},{key:"polygonToGeojson",value:function(t){for(var e=void 0,r=[],i=t.geometry,n=t.properties,o=0;o<i.length;o++)e={},"Polygon"===i[o].type&&(i[o].coordinates=i[o].coordinates.concat(i[o].exterior,i[o].interior)),e.geometry=i[o],e.properties=n,r.push(e);return r}}]),t}();e.VFeature=p,a.Zondy.Service.VFeature=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=void 0;var i=r(140),n=r(324),o=r(622),s=r(623),a=r(249),u=r(624),l=r(625),c=r(626),h=r(627),p=r(325),f=r(628),d=r(629),g=r(630),y=r(326),v=r(631),m=r(632),_=r(327),b=r(633),S=r(634),x=r(635);e.AnalysisBase=i.AnalysisBase,e.ClassBufferBase=n.ClassBufferBase,e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=s.ClassBufferBySingleRing,e.ClipBase=a.ClipBase,e.ClipByCircle=u.ClipByCircle,e.ClipByLayer=l.ClipByLayer,e.ClipByPolygon=c.ClipByPolygon,e.ContourAnalyse=h.ContourAnalyse,e.FeatureBuffBase=p.FeatureBuffBase,e.FeatureBuffByMultiplyRing=f.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing,e.NetAnalysis=g.NetAnalysis,e.OverlayBase=y.OverlayBase,e.OverlayByLayer=v.OverlayByLayer,e.OverlayByPolygon=m.OverlayByPolygon,e.ProjectBase=_.ProjectBase,e.ProjectByLayer=b.ProjectByLayer,e.ProjectBySRID=S.ProjectBySRID,e.FunctionWareService=x.FunctionWareService},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferByMultiplyRing=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.flowID="600232",s.radiusStr=void 0!==r.radiusStr?r.radiusStr:"2,4,8,10",s}return(0,s.default)(e,t),e}(r(324).ClassBufferBase);e.ClassBufferByMultiplyRing=l,a.Zondy.Service.ClassBufferByMultiplyRing=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBySingleRing=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.leftRad=void 0!==r.leftRad?r.leftRad:.001,s.rightRad=void 0!==r.rightRad?r.rightRad:.001,s.isByAtt=void 0===r.isByAtt||r.isByAtt,s.fldName=void 0!==r.fldName?r.fldName:null,s.dynPrjRad=void 0!==r.dynPrjRad?r.dynPrjRad:0,s.flowID="600231",s}return(0,s.default)(e,t),e}(r(324).ClassBufferBase);e.ClassBufferBySingleRing=l,a.Zondy.Service.ClassBufferBySingleRing=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByCircle=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo=void 0!==r.srcInfo?r.srcInfo:null,s.center=void 0!==r.center?r.center:null,s.radius=void 0!==r.radius?r.radius:null,s.step=void 0!==r.step?r.step:.001,s.flowID="600229",s}return(0,s.default)(e,t),e}(r(249).ClipBase);e.ClipByCircle=l,a.Zondy.Service.ClipByCircle=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByLayer=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo1=void 0!==r.srcInfo1?r.srcInfo1:null,s.srcInfo2=void 0!==r.srcInfo2?r.srcInfo2:null,s.flowID="600230",s}return(0,s.default)(e,t),e}(r(249).ClipBase);e.ClipByLayer=l,a.Zondy.Service.ClipByLayer=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByPolygon=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo=void 0!==r.srcInfo?r.srcInfo:null,s.strPos=void 0!==r.strPos?r.strPos:null,s.flowID="600228",s}return(0,s.default)(e,t),e}(r(249).ClipBase);e.ClipByPolygon=l,a.Zondy.Service.ClipByPolygon=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourAnalyse=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(13)),s=l(r(14)),a=r(6),u=(r(22),r(140));function l(t){return t&&t.__esModule?t:{default:t}}r(55),r(394),r(390);var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.flowID="600320",s.linSfclsURL=void 0!==r.linSfclsURL?r.linSfclsURL:null,s.regSfclsURL=void 0!==r.regSfclsURL?r.regSfclsURL:null,s.annoClsURL=void 0!==r.annoClsURL?r.annoClsURL:null,s.meshingParam=void 0!==r.meshingParam?r.meshingParam:null,s.contourParam=void 0!==r.contourParam?r.contourParam:null,s}return(0,s.default)(e,t),e}(u.AnalysisBase);e.ContourAnalyse=c,a.Zondy.Service.ContourAnalyse=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffByMultiplyRing=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.radiusStr=void 0!==r.radiusStr?r.radiusStr:"0.003,0.002,0.001",s.flowID="600239",s}return(0,s.default)(e,t),e}(r(325).FeatureBuffBase);e.FeatureBuffByMultiplyRing=l,a.Zondy.Service.FeatureBuffByMultiplyRing=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBySingleRing=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.leftRad=void 0!==r.leftRad?r.leftRad:.001,s.rightRad=void 0!==r.rightRad?r.rightRad:.001,s.flowID="600238",s}return(0,s.default)(e,t),e}(r(325).FeatureBuffBase);e.FeatureBuffBySingleRing=l,a.Zondy.Service.FeatureBuffBySingleRing=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysis=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(140),l=r(107);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.netClsUrl=void 0!==r.netClsUrl?r.netClsUrl:null,s.flagPosStr=void 0!==r.flagPosStr?r.flagPosStr:null,s.barrierPosStr=void 0!==r.barrierPosStr?r.barrierPosStr:null,s.analyType=void 0!==r.analyType?r.analyType:l.NetAnalyType.UserMode,s.weight=void 0!==r.weight?r.weight:",Weight1,Weight1",s.elementType=void 0!==r.elementType?r.elementType:l.NetElemType.Edge,s.nearDis=void 0!==r.nearDis?r.nearDis:.001,s.outFormat=void 0!==r.outFormat?r.outFormat:"json",s.flowID="600233",s}return(0,s.default)(e,t),e}(u.AnalysisBase);e.NetAnalysis=h,a.Zondy.Service.NetAnalysis=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByLayer=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.srcInfo2=void 0!==r.srcInfo2?r.srcInfo2:null,s.flowID="600227",s}return(0,s.default)(e,t),e}(r(326).OverlayBase);e.OverlayByLayer=l,a.Zondy.Service.OverlayByLayer=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByPolygon=void 0;var i=u(r(12)),n=u(r(8)),o=u(r(13)),s=u(r(14)),a=r(6);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t){(0,n.default)(this,e);var r=t||{},s=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return s.strGRegionXML=void 0!==r.strGRegionXML?r.strGRegionXML:null,s.inFormat=void 0!==r.inFormat?r.inFormat:"json",s.flowID="600237",s}return(0,s.default)(e,t),e}(r(326).OverlayBase);e.OverlayByPolygon=l,a.Zondy.Service.OverlayByPolygon=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectByLayer=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(327),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{};(0,l.extend)(s,t);var a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.flowID="600235",a}return(0,s.default)(e,t),e}(u.ProjectBase);e.ProjectByLayer=h,a.Zondy.Service.ProjectByLayer=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(327),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{};(0,l.extend)(s,t);var a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.flowID="600234",a.srID=void 0!==s.srID?s.srID:32,a}return(0,s.default)(e,t),e}(u.ProjectBase);e.ProjectBySRID=h,a.Zondy.Service.ProjectBySRID=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(6),c=r(140),h=r(55),p=r(22);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.guid=r.guid?r.guid:(0,p.newGuid)(),i.f=void 0!==r.f?r.f:"json",i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"executeWorkFlow",value:function(t,e,r,n,o,s){r||(r=!1);var a={};null!==s&&"POST"===s.toUpperCase()?(a.paraValues=e,this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+r+"&guid="+this.guid):this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+r+"&guid="+this.guid;var u=this.getFullUrl(),l=new h.IgsServiceBase(u,{eventListeners:{scope:this,processCompleted:n,processFailed:o}});null!==s&&"POST"===s.toUpperCase()?l.processAsync({method:"POST",data:(0,i.default)(a)}):l.processAsync()}},{key:"getInstanceMessage",value:function(t,e,r){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getInstanceOutPutValue",value:function(t,e,r,i){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:r,processFailed:i}}).processAsync()}},{key:"getInstanceResult",value:function(t,e,r){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getInstanceStatus",value:function(t,e,r){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getWorkFlowGroups",value:function(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfoByID",value:function(t,e,r){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getWorkFlowInfos",value:function(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfosByGroup",value:function(t,e,r){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}},{key:"getFolder1",value:function(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder2",value:function(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder3",value:function(t,e,r){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}}]),e}(c.AnalysisBase);e.FunctionWareService=d,l.Zondy.Service.FunctionWareService=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=void 0;var i=r(637),n=r(638),o=r(328),s=r(330),a=r(329),u=r(165),l=r(639),c=r(640),h=r(641),p=r(642),f=r(413);e.CalArea=i.CalArea,e.CalPolyLineLength=n.CalPolyLineLength,e.CalServiceBase=o.CalServiceBase,e.CProjectBySRSID=s.CProjectBySRSID,e.CProjectParam=a.CProjectParam,e.GeometryAnalysisBase=u.GeometryAnalysisBase,e.ProjectDots=l.ProjectDots,e.ProjectRang=c.ProjectRang,e.Smooth=h.Smooth,e.TopAnalysis=p.TopAnalysis,e.CoordinateElpTrans=f.CoordinateElpTrans},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalArea=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(328),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}r(114);var h=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{};(0,l.extend)(s,{dots:t});var a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.partUrl="geomservice/calArea?f=json",a}return(0,s.default)(e,t),e}(u.CalServiceBase);e.CalArea=h,a.Zondy.Service.CalArea=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalPolyLineLength=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(13)),s=c(r(14)),a=r(6),u=r(328),l=r(22);function c(t){return t&&t.__esModule?t:{default:t}}r(114);var h=function(t){function e(t,r){(0,n.default)(this,e);var s=r||{};(0,l.extend)(s,{dots:t});var a=(0,o.default)(this,(e.__proto__||(0,i.default)(e)).call(this,s));return a.partUrl="geomservice/calLength?f=json",a}return(0,s.default)(e,t),e}(u.CalServiceBase);e.CalPolyLineLength=h,a.Zondy.Service.CalPolyLineLength=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectDots=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(165),h=(r(114),r(329),r(55));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,i,s){(0,o.default)(this,e);var u=s||{},l=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,u));return l.InputDots=t,l.SrcProjParam=r,l.DesProjParm=i,l}return(0,u.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var r={};r.InputDots=this.InputDots,r.SrcProjParam=this.SrcProjParam,r.DesProjParm=this.DesProjParm;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.ProjectDots=f,l.Zondy.Service.ProjectDots=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectRang=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(14)),u=r(6),l=r(165),c=r(55);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.gdbsvrName=void 0!==r.gdbsvrName?r.gdbsvrName:"MapGISLocal",o.gdbName=void 0!==r.gdbName?r.gdbName:null,o.srefID=void 0!==r.srefID?r.srefID:0,o.desfID=void 0!==r.desfID?r.desfID:0,o.userName=void 0!==r.userName?r.userName:null,o.password=void 0!==r.password?r.password:null,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"execute",value:function(t,e,r){var i="";t&&(i=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null===this.userName||null===this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i+"&userName="+this.userName+"&password="+this.password;var n=this.getFullUrl();new c.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync()}}]),e}(l.GeometryAnalysisBase);e.ProjectRang=p,u.Zondy.Service.ProjectRang=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(165),h=(r(114),r(55));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.type=void 0!==r.type?r.type:0,i.step=void 0!==r.step?r.step:1,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,r){if(2==this.type){if(t.length<4)return void alert("当前选中的为三次Beizer样条，最少需四个点")}else if(t.length<3)return void alert("当前选中的类型最少需三个点");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:r}}).processAsync({method:"POST",data:(0,i.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.Smooth=f,l.Zondy.Service.Smooth=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=void 0;var i=f(r(53)),n=f(r(12)),o=f(r(8)),s=f(r(16)),a=f(r(13)),u=f(r(14)),l=r(6),c=r(165),h=r(55),p=(r(310),r(311),r(312),r(22));function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.pnt=void 0!==r.pnt?r.pnt:null,i.line=void 0!==r.line?r.line:null,i.reg=void 0!==r.reg?r.reg:null,i.nearDis=void 0!==r.nearDis?r.nearDis:.01,i.relativeObj=void 0!==r.relativeObj?r.relativeObj:null,i.p_onSuccess=void 0!==r.p_onSuccess?r.p_onSuccess:null,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=(0,p.getTopAnalysisResult)(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(o=this).p_onSuccess=t;var r={};r.NearDis=this.nearDis,r.Pnt=this.pnt,r.Line=this.line,r.Reg=this.reg,r.RelativeObj=this.relativeObj,o.partUrl="geomservice/topanalysis?f=json";var n=o.getFullUrl(),o=this;new h.IgsServiceBase(n,{eventListeners:{scope:o,processCompleted:o.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:(0,i.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.TopAnalysis=d,l.Zondy.Service.TopAnalysis=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=void 0;var i=r(644),n=r(645),o=r(646),s=r(647),a=r(648),u=r(181);e.GetDocImageService=i.GetDocImageService,e.GetLayerImageService=n.GetLayerImageService,e.GetMapImageService=o.GetMapImageService,e.GetMapInfoService=s.GetMapInfoService,e.GetTileImageService=a.GetTileImageService,e.MapServiceBase=u.MapServiceBase},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetDocImageService=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=r(6),c=r(181),h=(r(330),r(22));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.docName=void 0!==r.docName?r.docName:null,i.cache=void 0!==r.cache&&r.cache,i.cache?(i.level=void 0!==r.level?r.level:0,i.row=void 0!==r.row?r.row:0,i.col=void 0!==r.col?r.col:0,i.update=void 0!==r.update&&r.update):(i.layers=void 0!==r.layers?r.layers:null,i.style=void 0!==r.style?r.style:null,i.picType=void 0!==r.picType?r.picType:"gif",i.bbox=void 0!==r.bbox?r.bbox:null,i.filters=void 0!==r.filters?r.filters:null,i.picWidth=void 0!==r.picWidth?r.picWidth:512,i.picHeight=void 0!==r.picHeight?r.picHeight:512,i.proj=void 0!==r.proj?r.proj:null,i.guid=void 0!==r.guid?r.guid:(0,h.newGuid)()),i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"GetMapImage",value:function(){return this.docName?(!0===this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!==this.bbox&&(this.partUrl+="bbox="+this.bbox),null!==this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!==this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!==this.layers&&(this.partUrl+="&layers="+this.layers),null!==this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!==this.style&&(this.partUrl+="&style="+(0,i.default)(this.style)),null!==this.proj&&(this.partUrl+="&proj="+(0,i.default)(this.proj)),null!==this.picType&&(this.partUrl+="&f="+this.picType),null!==this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),e}(c.MapServiceBase);e.GetDocImageService=f,l.Zondy.Service.GetDocImageService=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetLayerImageService=void 0;var i=h(r(53)),n=h(r(12)),o=h(r(8)),s=h(r(16)),a=h(r(13)),u=h(r(14)),l=r(6),c=r(181);function h(t){return t&&t.__esModule?t:{default:t}}r(383);var p=function(t){function e(t){(0,o.default)(this,e);var r=t||{},i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.gdbps=void 0!==r.gdbps?r.gdbps:null,i.picType=void 0!==r.picType?r.picType:"gif",i.style=void 0!==r.style?r.style:null,i.bbox=void 0!==r.bbox?r.bbox:null,i.filters=void 0!==r.filters?r.filters:null,i.picWidth=void 0!==r.picWidth?r.picWidth:512,i.picHeight=void 0!==r.picHeight?r.picHeight:512,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"GetLayerImage",value:function(){if(null!==this.gdbps&&null!==this.picWidth&&null!==this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");for(var t=this.gdbps.split(","),e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!==this.style&&(this.partUrl+="&style="+(0,i.default)(this.style)),null!==this.filters&&(this.partUrl+="&filters="+this.filters),null!==this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),e}(c.MapServiceBase);e.GetLayerImageService=p,l.Zondy.Service.GetLayerImageService=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapImageService=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(14)),u=r(6),l=r(181),c=r(107);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.mapName=void 0!==r.mapName?r.mapName:null,o.mapType=void 0!==r.mapType?r.mapType:c.MapType.Doc,o.mapType===c.MapType.Tile?(o.level=void 0!==r.level?r.level:0,o.row=void 0!==r.row?r.row:0,o.col=void 0!==r.col?r.col:0):(o.picType=void 0!==r.picType?r.picType:"gif",o.picWidth=void 0!==r.picWidth?r.picWidth:512,o.picHeight=void 0!==r.picHeight?r.picHeight:512,o.xmin=void 0!==r.xmin?r.xmin:null,o.xmax=void 0!==r.xmax?r.xmax:null,o.ymin=void 0!==r.ymin?r.ymin:null,o.ymax=void 0!==r.ymax?r.ymax:null),o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetImage",value:function(){return this.mapName?(this.mapType===c.MapType.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!==this.xmin&&null!==this.xmax&&null!==this.ymin&&null!==this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),e}(l.MapServiceBase);e.GetMapImageService=p,u.Zondy.Service.GetMapImageService=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapInfoService=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(14)),u=r(6),l=r(181),c=r(55),h=r(22);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.mapName=void 0!==r.mapName?r.mapName:null,o.guid=void 0!==r.guid?r.guid:(0,h.newGuid)(),o.token=r.token,o.type=r.type,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetMapInfo",value:function(t,e){var r=this;if(r.mapName){r.partUrl="info/"+this.mapName;var i=[];r.guid&&i.push("guid="+r.guid),this.token&&i.push("token="+r.token),this.type&&i.push("type="+r.type),i.length>0&&(r.partUrl+="?"+i.join("&"));var n=r.getFullUrl();new c.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(l.MapServiceBase);e.GetMapInfoService=f,u.Zondy.Service.GetMapInfoService=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTileImageService=void 0;var i=l(r(12)),n=l(r(8)),o=l(r(16)),s=l(r(13)),a=l(r(14)),u=r(6);function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,n.default)(this,e);var r=t||{},o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,r));return o.hdfName=void 0!==r.hdfName?r.hdfName:null,o.level=void 0!==r.level?r.level:0,o.row=void 0!==r.row?r.row:0,o.col=void 0!==r.col?r.col:0,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),e}(r(181).MapServiceBase);e.GetTileImageService=c,u.Zondy.Service.GetTileImageService=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=void 0;var i=r(414),n=r(415),o=r(416),s=r(417),a=r(419),u=r(422),l=r(418),c=r(423),h=r(424),p=r(425),f=r(420),d=r(426),g=r(250),y=r(428),v=r(429),m=r(430),_=r(421),b=r(431),S=r(125),x=r(147),O=r(432),E=r(433),C=r(427),T=r(434),P=r(331),w=r(650),I=r(651),L=r(435);e.CAllOtherDataItemInfoSource=i.CAllOtherDataItemInfoSource,e.CAnnInfo=n.CAnnInfo,e.CChartLabelFormat=o.CChartLabelFormat,e.CChartTheme=s.CChartTheme,e.CChartThemeInfo=a.CChartThemeInfo,e.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo,e.CChartType=l.CChartType,e.CDotDensityTheme=c.CDotDensityTheme,e.CFourColorTheme=h.CFourColorTheme,e.CGraduatedSymbolTheme=p.CGraduatedSymbolTheme,e.CLinInfo=f.CLinInfo,e.CMultiClassTheme=d.CMultiClassTheme,e.CPntInfo=g.CPntInfo,e.CRandomTheme=y.CRandomTheme,e.CRangeTheme=v.CRangeTheme,e.CRangeThemeInfo=m.CRangeThemeInfo,e.CRegInfo=_.CRegInfo,e.CSimpleTheme=b.CSimpleTheme,e.CTheme=S.CTheme,e.CThemeInfo=x.CThemeInfo,e.CUniqueTheme=O.CUniqueTheme,e.CUniqueThemeInfo=E.CUniqueThemeInfo,e.ExpInfo=C.ExpInfo,e.FolderInfo=T.FolderInfo,e.FolderInfoAttribute=P.FolderInfoAttribute,e.ItemValue=w.ItemValue,e.ThemeOper=I.ThemeOper,e.ThemesInfo=L.ThemesInfo},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemValue=void 0;var i=r(6),n=r(22),o=r(107),s=function(t,e,r,i){var s=void 0!==i?i:{};(0,n.extend)(this,s),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==r?r:o.CItemType.RangeTheme};e.ItemValue=s,i.Zondy.Object.Theme.ItemValue=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeOper=void 0;var i=C(r(53)),n=C(r(12)),o=C(r(8)),s=C(r(16)),a=C(r(13)),u=C(r(14)),l=r(6),c=r(139),h=r(22),p=r(55),f=r(426),d=r(431),g=r(417),y=r(425),v=r(423),m=r(428),_=r(424),b=r(432),S=r(429),x=r(331),O=r(434),E=r(435);function C(t){return t&&t.__esModule?t:{default:t}}var T=function(t){function e(t,r){(0,o.default)(this,e),(r=r||{}).baseUrl="igs/rest/theme";var i=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return i.guid=null!==t?t:(0,h.newGuid)(),i.p_onSuccess=void 0!==r.p_onSuccess?r.p_onSuccess:null,i}return(0,u.default)(e,t),(0,s.default)(e,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new O.FolderInfo;if((0,h.extendDeep)(e,t.result||t),null!==e&&null!==e.attribute&&e.attribute.length>0){for(var r=[],i=null,n=0;n<e.attribute.length;n++)if(r[n]=new E.ThemesInfo,null!==e.attribute[n]&&(r[n].LayerName=e.attribute[n].name,null!==(i=JSON.parse(e.attribute[n].value))&&i.length>0)){r[n].ThemeArr=[];for(var o=0;o<i.length;o++){switch(i[o].name){case"CMultiClassTheme":r[n].ThemeArr[o]=new f.CMultiClassTheme;break;case"CSimpleTheme":r[n].ThemeArr[o]=new d.CSimpleTheme;break;case"CChartTheme":r[n].ThemeArr[o]=new g.CChartTheme;break;case"CGraduatedSymbolTheme":r[n].ThemeArr[o]=new y.CGraduatedSymbolTheme;break;case"CDotDensityTheme":r[n].ThemeArr[o]=new v.CDotDensityTheme;break;case"CRandomTheme":r[n].ThemeArr[o]=new m.CRandomTheme;break;case"CFourColorTheme":r[n].ThemeArr[o]=new _.CFourColorTheme;break;case"CUniqueTheme":r[n].ThemeArr[o]=new b.CUniqueTheme;break;case"CRangeTheme":r[n].ThemeArr[o]=new S.CRangeTheme}(0,h.extendDeep)(r[n].ThemeArr[o],JSON.parse(i[o].value))}}null!==this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(r)}}},{key:"getThemesInfo",value:function(t,e,r,i){var n=this;n.p_onSuccess=r;var o=Math.random();n.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+n.guid;var s=n.getFullUrl();new p.IgsServiceBase(s,{eventListeners:{scope:n,processCompleted:n.onGetThemesInfoSuccess,processFailed:i}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,r,i){var n=Math.random();this.partUrl=t+"/remove?idxArr="+e+"&r="+n+"&guid="+this.guid;var o=this.getFullUrl();new p.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:r,processFailed:i}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,r,n,o){Math.random(),this.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var s=this.getFullUrl(),a=new O.FolderInfo;if(null!==r&&r.length>0){a.name="ThemeInfo",a.attribute=[];for(var u=0;u<r.length;u++)if(a.attribute[u]=new x.FolderInfoAttribute,a.attribute[u].name=r[u].LayerName,null!==r[u].ThemeArr&&r[u].ThemeArr.length>0){for(var l=[],c=0;c<r[u].ThemeArr.length;c++)null!==r[u].ThemeArr[c]&&(l[c]=new x.FolderInfoAttribute(r[u].ThemeArr[c].Type,(0,i.default)(r[u].ThemeArr[c])));a.attribute[u].value=(0,i.default)(l)}}new p.IgsServiceBase(s,{eventListeners:{scope:this,processCompleted:n,processFailed:o}}).processAsync({method:"POST",data:(0,i.default)(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,r,n,o){Math.random(),this.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var s=this.getFullUrl(),a=new O.FolderInfo;if(null!==r&&r.length>0){a.name="ThemeInfo",a.attribute=[];for(var u=0;u<r.length;u++)if(a.attribute[u]=new x.FolderInfoAttribute,a.attribute[u].name=r[u].LayerName,null!==r[u].ThemeArr&&r[u].ThemeArr.length>0){for(var l=[],c=0;c<r[u].ThemeArr.length;c++)null!==r[u].ThemeArr[c]&&(l[c]=new x.FolderInfoAttribute(r[u].ThemeArr[c].Type,(0,i.default)(r[u].ThemeArr[c])));a.attribute[u].value=(0,i.default)(l)}}new p.IgsServiceBase(s,{eventListeners:{scope:this,processCompleted:n,processFailed:o}}).processAsync({method:"POST",data:(0,i.default)(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.ThemeOper=T,l.Zondy.Service.ThemeOper=T},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbolThemeSource=e.GraphThemeSource=e.RandomThemeSource=e.SimpleThemeSource=e.UniqueThemeSource=e.RangeThemeSource=e.ThemeStyle=void 0;var i=r(653),n=r(654),o=r(655),s=r(669),a=r(670),u=r(462),l=r(671);e.ThemeStyle=i.ThemeStyle,e.RangeThemeSource=n.RangeThemeSource,e.UniqueThemeSource=o.UniqueThemeSource,e.SimpleThemeSource=s.SimpleThemeSource,e.RandomThemeSource=a.RandomThemeSource,e.GraphThemeSource=u.GraphThemeSource,e.RankSymbolThemeSource=l.RankSymbolThemeSource},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),n=r(6),o=r(22),s=function t(e){(0,i.default)(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,(0,o.extend)(this,e)};e.ThemeStyle=s,n.Zondy.Map.ThemeStyle=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeThemeSource=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(14)),u=r(6),l=r(251),c=r(22),h=r(208),p=r(100);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.style=r.style,o.isHoverAble=r.isHoverAble,o.highlightStyle=r.highlightStyle,o.themeField=r.themeField,o.styleGroups=r.styleGroups,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,l.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=p.ShapeFactory.transformStyle(this.highlightStyle);for(var i=new h.ThemeVector(t,this,p.ShapeFactory.transformStyle(e),r),n=0;n<i.shapes.length;n++)this.renderer.addShape(i.shapes[n]);return i}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=(0,c.copyAttributesWithClip)(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var i=this.themeField,n=r.attributes,o=this.styleGroups,s=!1,a=null;for(var u in n)if(i===u){s=!0,a=n[u];break}if(s)for(var l=0,h=o.length;l<h;l++)if(a>=o[l].start&&a<o[l].end){var p=o[l].style;e=(0,c.copyAttributesWithClip)(e,p)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=(0,c.copyAttributesWithClip)(r.style)),e}},{key:"canvasFunctionInternal_",value:function(t,e,r,i,n){return l.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(l.GeoFeatureSource);e.RangeThemeSource=d,u.Zondy.Source.RangeThemeSource=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueThemeSource=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(14)),u=r(6),l=r(251),c=r(22),h=r(100),p=r(656);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.themeField=r.themeField,o.style=r.style,o.styleGroups=r.styleGroups,o.isHoverAble=r.isHoverAble,o.highlightStyle=r.highlightStyle,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,l.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=h.ShapeFactory.transformStyle(this.highlightStyle);for(var i=new p.ThemeVector(t,this,h.ShapeFactory.transformStyle(e),r),n=0;n<i.shapes.length;n++)this.renderer.addShape(i.shapes[n]);return i}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=(0,c.copyAttributesWithClip)(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var i=this.themeField,n=r.attributes,o=this.styleGroups,s=!1,a=null;for(var u in n)if(i===u){s=!0,a=n[u];break}if(s)for(var l=0,h=o.length;l<h;l++)if(a.toString()===o[l].value.toString()){var p=o[l].style;e=(0,c.copyAttributesWithClip)(e,p)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=(0,c.copyAttributesWithClip)(r.style)),e}}]),e}(l.GeoFeatureSource);e.UniqueThemeSource=d,u.Zondy.Source.UniqueThemeSource=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=void 0;var i=r(657),n=r(658),o=r(659),s=r(148),a=r(660),u=r(661),l=r(662),c=r(460),h=r(663),p=r(208),f=r(461),d=r(664);e.Bar=i.Bar,e.Bar3D=n.Bar3D,e.OverlayCircle=o.Circle,e.Graph=s.Graph,e.Line=a.Line,e.Pie=u.Pie,e.OverlayPoint=l.Point,e.RankSymbol=c.RankSymbol,e.Ring=h.Ring,e.ThemeVector=p.ThemeVector,e.ShapeFactory=f.ShapeFactory,e.ShapeParameters=f.ShapeParameters,e.FeatureCircle=f.FeatureCircle,e.Image=f.Image,e.Label=f.Label,e.FeatureLine=f.FeatureLine,e.Point=f.Point,e.FeaturePolygon=f.FeaturePolygon,e.FeatureRectangle=f.FeatureRectangle,e.Sector=f.Sector,e.FeatureTheme=f.FeatureTheme,e.LevelRenderer=d.LevelRenderer,e.Render=d.Render,e.Animation=d.Animation,e.Animator=d.Animator,e.Area=d.Area,e.Clip=d.Clip,e.Color=d.Color,e.ComputeBoundingBox=d.ComputeBoundingBox,e.Config=d.Config,e.LevelRendererCurve=d.LevelRendererCurve,e.Easing=d.Easing,e.Env=d.Env,e.LevelRendererEvent=d.LevelRendererEvent,e.Eventful=d.Eventful,e.Group=d.Group,e.Handler=d.Handler,e.Http=d.Http,e.Math=d.Math,e.Matrix=d.Matrix,e.Painter=d.Painter,e.PaintLayer=d.PaintLayer,e.Shape=d.Shape,e.SmicBrokenLine=d.SmicBrokenLine,e.SmicCircle=d.SmicCircle,e.SmicEllipse=d.SmicEllipse,e.SmicImage=d.SmicImage,e.SmicIsogon=d.SmicIsogon,e.SmicPoint=d.SmicPoint,e.SmicPolygon=d.SmicPolygon,e.SmicRectangle=d.SmicRectangle,e.SmicRing=d.SmicRing,e.SmicSector=d.SmicSector,e.SmicStar=d.SmicStar,e.SmicText=d.SmicText,e.Storage=d.Storage,e.Transformable=d.Transformable,e.Util=d.Util,e.LevelRendererVector=d.LevelRendererVector,e.SUtil=d.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var i=d(r(12)),n=d(r(8)),o=d(r(16)),s=d(r(13)),a=d(r(40)),u=d(r(14)),l=r(6),c=r(22),h=r(100),p=r(256),f=r(332);function d(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Bar",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var i=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,s=n.length;o<s;o++)if(n[o]<r[0]||n[o]>r[1])return;var a=this.calculateXShapeInfo();if(a){var u=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,i,e,a)));for(var f=0;f<n.length;f++){var d=i[1]-(n[f]-r[0])/this.DVBUnitValue,g=[[u[f]-l/2,i[1]-1],[u[f]+l/2,i[1]-1],[u[f]+l/2,d],[u[f]-l/2,d]],y=new p.Polygon(g);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var v=e.barShadowStyle;v.shadowBlur&&(t.shadowBlur=v.shadowBlur),v.shadowColor&&(t.shadowColor=v.shadowColor),v.shadowOffsetX&&(t.shadowOffsetX=v.shadowOffsetX),v.shadowOffsetY&&(t.shadowOffsetY=v.shadowOffsetY)}y.style={},(0,c.copyAttributesWithClip)(y.style,t)}y.refDataID=this.data.FID,y.dataInfo={field:this.fields[f],value:n[f]},void 0!==e.barHoverAble&&(y.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(y.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(y))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,i=this.dataValues.length;if(i<1)return null;var n=[],o=0,s=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3===r.xShapeBlank.length){var a=s-((t=r.xShapeBlank)[0]+t[2]+(i-1)*t[1]);if(a<=i)return null;o=a/i}else t=[o=s/(2*i+1),o,o];for(var u=0,l=0;l<i;l++)0===l?u=t[0]+o/2:u+=o+t[1],n.push(e[0]+u);return{xPositions:n,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,i=0;i<t;i++){var n=this.shapes[i];if("Zondy.LevelRenderer.Shape.SmicPolygon"===n.CLASS_NAME){var o=n.style,s=this.location[0]+o.pointList[0][0],a=this.location[0]+o.pointList[1][0];++r>=e.length&&(r%=e.length);var u=e[r][0],l=e[r][1],c=(new f.Color).getLinearGradient(s,0,a,0,[[0,u],[1,l]]);n.style.color=c}}}}]),e}(r(148).Graph);e.Bar=g,l.Zondy.Theme.Bar=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar3D=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(22),h=r(100),p=r(256);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Bar3D",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var n=0,o=i.length;n<o;n++)if(i[n]<e[0]||i[n]>e[1])return;var s=this.calculateXShapeInfo();if(s){var a=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,r,t,s)));for(var l=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,f=0;f<i.length;f++){var d=r[1]-(i[f]-e[0])/this.DVBUnitValue,g=a[f]-u/2,y=a[f]+u/2,v=[[g,d],[y,d],[y-l,d+l],[g-l,d+l]],m=[[y,d],[y-l,d+l],[y-l,r[1]+l],[y,r[1]]],_=[[g-l,r[1]+l],[y-l,r[1]+l],[y-l,d+l],[g-l,d+l]];l<=0&&(_=[[g,r[1]],[y,r[1]],[y,d],[g,d]]);var b=new p.Polygon(v),S=new p.Polygon(m),x=new p.Polygon(_);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,x.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,f,i[f]),S.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,f,i[f]),b.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,f,i[f]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,x.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),S.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),b.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),b.refDataID=S.refDataID=x.refDataID=this.data.FID,b.isHoverByRefDataID=S.isHoverByRefDataID=x.isHoverByRefDataID=!0,b.refDataHoverGroup=S.refDataHoverGroup=x.refDataHoverGroup=(0,c.newGuid)(),b.dataInfo=S.dataInfo=x.dataInfo={field:this.fields[f],value:i[f]},void 0!==t.barHoverAble&&(b.hoverable=S.hoverable=x.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(b.clickable=S.clickable=x.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(S)),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(x))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,i=this.dataValues.length;if(i<1)return null;var n=[],o=0,s=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3===r.xShapeBlank.length){var a=s-((t=r.xShapeBlank)[0]+t[2]+(i-1)*t[1]);if(a<=i)return null;o=a/i}else t=[o=s/(2*i+1),o,o];for(var u=0,l=0;l<i;l++)0===l?u=t[0]+o/2:u+=o+t[1],n.push(e[0]+u);return{xPositions:n,width:o}}}]),e}(r(148).Graph);e.Bar3D=d,l.Zondy.Theme.Bar3D=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(209),h=r(336),p=r(100);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Circle",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var i=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var n=this.DVBCodomain;n&&n[1]-n[0]>0?this.DVBUnitValue=t.maxR/(n[1]-n[0]):this.DVBUnitValue=t.maxR;var o=this.DVBUnitValue,s=i[0]*o+t.minR;if(this.width=2*s,this.height=2*s,this.initBaseParameter()&&(!n||!(i[0]<n[0]||i[0]>n[1]))){var a=this.DVBCenterPoint,u=new h.Circle(a[0],a[1],s);u.style=p.ShapeFactory.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?u.style.fillColor=t.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=p.ShapeFactory.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(u.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(u.clickable=t.circleClickAble),u.refDataID=this.data.FID,u.dataInfo={field:this.fields[0],r:s,value:i[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}]),e}(r(460).RankSymbol);e.Circle=d,l.Zondy.Theme.Circle=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(40)),u=f(r(14)),l=r(6),c=r(100),h=r(255),p=r(335);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Line",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var i=this.DVBUnitValue,n=this.dataValues;if(!(n.length<1)){var o=this.calculateXShapeInfo();if(o){var s,a,u=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var l=[],f=[],d=0,g=n.length;d<g;d++){if(n[d]<r[0]||n[d]>r[1])return null;s=u[d],a=e[1]-(n[d]-r[0])/i;var y=new h.Point(s,a);y.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,d,n[d]),y.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(y.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(y.clickable=t.pointClickAble),y.refDataID=this.data.FID,y.dataInfo={field:this.fields[d],value:n[d]},f.push(this.shapeFactory.createShape(y));var v=[s,a];l.push(v)}var m=new p.Line(l);m.style=c.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),m.clickable=!1,m.hoverable=!1;var _=this.shapeFactory.createShape(m);this.shapes.push(_),this.shapes=this.shapes.concat(f),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,i=this.dataValues.length;if(i<1)return null;var n=[],o=this.DVBWidth,s=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2===r.xShapeBlank.length){var a=o-((t=r.xShapeBlank)[0]+t[1]);if(a<=i)return null;s=a/(i-1)}else t=[s=o/(i+1),s,s];for(var u=0,l=0;l<i;l++)0===l?u=t[0]:u+=s,n.push(e[0]+u);return{xPositions:n,width:0}}}]),e}(r(148).Graph);e.Line=d,l.Zondy.Theme.Line=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(100),h=r(257);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Pie",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var i=this.DVBCodomain,n=0;n<r.length;n++)if(r[n]<i[0]||r[n]>i[1])return;for(var o=0,s=0;s<r.length;s++)o+=Math.abs(r[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,p=0,f=l,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=0;g<r.length;g++){var y=Math.abs(r[g]);(p=0===g?l+y*a:g===y.length-1?f:l+y*a)-l>=360&&(p=359.9999999);var v=new h.Sector(u[0],u[1],d,l,p);if(void 0===t.sectorStyleByFields){var m=g%e.length;v.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else v.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,g,r[g]);v.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.FID,v.dataInfo={field:this.fields[g],value:r[g]},this.shapes.push(this.shapeFactory.createShape(v)),l=p}this.shapesConvertToRelativeCoordinate()}}}}]),e}(r(148).Graph);e.Pie=f,l.Zondy.Theme.Pie=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(100),h=r(255);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Point",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var i=this.DVBUnitValue,n=this.dataValues,o=this.calculateXShapeInfo();if(o){var s,a,u=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var l=0,p=n.length;l<p;l++){if(n[l]<r[0]||n[l]>r[1])return null;s=u[l],a=e[1]-(n[l]-r[0])/i;var f=new h.Point(s,a);f.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,l,n[l]),f.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.FID,f.dataInfo={field:this.fields[l],value:n[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,i=this.dataValues.length;if(i<1)return null;var n=[],o=this.DVBWidth,s=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2===r.xShapeBlank.length){var a=o-((t=r.xShapeBlank)[0]+t[1]);if(a<=i)return null;s=a/(i-1)}else t=[s=o/(i+1),s,s];for(var u=0,l=0;l<i;l++)0===l?u=t[0]:u+=s,n.push(e[0]+u);return{xPositions:n,width:0}}}]),e}(r(148).Graph);e.Point=f,l.Zondy.Theme.Point=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(100),h=r(257);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o,a,u,l));return c.CLASS_NAME="Zondy.Theme.Ring",c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var i=this.DVBCodomain,n=0;n<r.length;n++)if(r[n]<i[0]||r[n]>i[1])return;for(var o=0,s=0;s<r.length;s++)o+=Math.abs(r[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,p=0,f=l,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=e.innerRingRadius>=0&&e.innerRingRadius<d,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&g?e.innerRingRadius:0,v=0;v<r.length;v++){var m=Math.abs(r[v]);p=0===v?l+m*a:v===m.length-1?f:l+m*a;var _=new h.Sector(u[0],u[1],d,l,p,y);if(void 0===e.sectorStyleByFields){var b=v%t.length;_.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else _.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,v,r[v]);_.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(_.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(_.clickable=e.sectorClickAble),_.refDataID=this.data.FID,_.dataInfo={field:this.fields[v],value:r[v]},this.shapes.push(this.shapeFactory.createShape(_)),l=p}this.shapesConvertToRelativeCoordinate()}}}}]),e}(r(148).Graph);e.Ring=f,l.Zondy.Theme.Ring=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=void 0;var i=r(437),n=r(438),o=r(450),s=r(441),a=r(451),u=r(332),l=r(442),c=r(333),h=r(253),p=r(452),f=r(443),d=r(444),g=r(207),y=r(440),v=r(449),m=r(445),_=r(446),b=r(447),S=r(448),x=r(108),O=r(338),E=r(457),C=r(665),T=r(334),P=r(666),w=r(337),I=r(258),L=r(458),R=r(667),M=r(459),A=r(668),j=r(456),N=r(439),F=r(252),D=r(182),k=r(254),G=r(115);e.LevelRenderer=i.LevelRenderer,e.Render=n.Render,e.Animation=o.Animation,e.Animator=o.Animator,e.Area=s.Area,e.Clip=a.Clip,e.Color=u.Color,e.ComputeBoundingBox=l.ComputeBoundingBox,e.Config=c.Config,e.LevelRendererCurve=h.Curve,e.Easing=p.Easing,e.Env=f.Env,e.LevelRendererEvent=d.Event,e.Eventful=g.Eventful,e.Group=y.Group,e.Handler=v.Handler,e.Http=m.Http,e.Math=_.Math,e.Matrix=b.Matrix,e.Painter=S.Painter,e.PaintLayer=S.PaintLayer,e.Shape=x.Shape,e.SmicBrokenLine=O.SmicBrokenLine,e.SmicCircle=E.SmicCircle,e.SmicEllipse=C.SmicEllipse,e.SmicImage=T.SmicImage,e.SmicIsogon=P.SmicIsogon,e.SmicPoint=w.SmicPoint,e.SmicPolygon=I.SmicPolygon,e.SmicRectangle=L.SmicRectangle,e.SmicRing=R.SmicRing,e.SmicSector=M.SmicSector,e.SmicStar=A.SmicStar,e.SmicText=j.SmicText,e.Storage=N.Storage,e.Transformable=F.Transformable,e.Util=D.Util,e.LevelRendererVector=k.Vector,e.SUtil=G.SUtil},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicEllipse=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicellipse",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=.5522848,n=e.x+r[0],o=e.y+r[1],s=e.a,a=e.b,u=s*i,l=a*i;t.moveTo(n-s,o),t.bezierCurveTo(n-s,o-l,n-u,o-a,n,o-a),t.bezierCurveTo(n+u,o-a,n+s,o-l,n+s,o),t.bezierCurveTo(n+s,o+l,n+u,o+a,n,o+a),t.bezierCurveTo(n-u,o+a,n-s,o+l,n-s,o),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.a-e/2),y:Math.round(t.x+r[1]-t.b-e/2),width:2*t.a+e,height:2*t.b+e},t.__rect}}]),e}(r(108).Shape);e.SmicEllipse=h,l.Zondy.LevelRenderer.SmicEllipse=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicIsogon=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(108),h=r(115);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicisogon",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=h.SUtil.Util_math.sin,n=h.SUtil.Util_math.cos,o=Math.PI,s=e.n;if(s&&!(s<2)){var a=e.x+r[0],u=e.y+r[1],l=e.r,c=2*o/s,p=-o/2,f=a+l*n(p),d=u+l*i(p);p+=c;var g=e.pointList=[];g.push([f,d]);for(var y=0,v=s-1;y<v;y++)g.push([a+l*n(p),u+l*i(p)]),p+=c;g.push([f,d]),t.moveTo(g[0][0],g[0][1]);for(var m=0;m<g.length;m++)t.lineTo(g[m][0],g[m][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicIsogon=f,l.Zondy.LevelRenderer.SmicIsogon=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRing=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicring",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!1),t.moveTo(e.x+r[0]+e.r0,e.y+r[1]),t.arc(e.x+r[0],e.y+r[1],e.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(r(108).Shape);e.SmicRing=h,l.Zondy.LevelRenderer.SmicRing=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicStar=void 0;var i=p(r(12)),n=p(r(8)),o=p(r(16)),s=p(r(13)),a=p(r(40)),u=p(r(14)),l=r(6),c=r(108),h=r(115);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var r=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t));return r.type="smicstar",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar",r}return(0,u.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,i=e.n;if(i&&!(i<2)){var n=h.SUtil.Util_math.sin,o=h.SUtil.Util_math.cos,s=Math.PI,a=e.x+r[0],u=e.y+r[1],l=e.r,c=e.r0;null==c&&(c=i>4?l*o(2*s/i)/o(s/i):l/3);var p=s/i,f=-s/2,d=a+l*o(f),g=u+l*n(f);f+=p;var y=e.pointList=[];y.push([d,g]);for(var v,m=0,_=2*i-1;m<_;m++)v=m%2==0?c:l,y.push([a+v*o(f),u+v*n(f)]),f+=p;y.push([d,g]),t.moveTo(y[0][0],y[0][1]);for(var b=0;b<y.length;b++)t.lineTo(y[b][0],y[b][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicStar=f,l.Zondy.LevelRenderer.SmicStar=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleThemeSource=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(14)),u=r(6),l=r(251),c=r(22),h=r(208),p=r(100);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.style=r.style,o.isHoverAble=r.isHoverAble,o.highlightStyle=r.highlightStyle,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,l.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=p.ShapeFactory.transformStyle(this.highlightStyle);for(var i=new h.ThemeVector(t,this,p.ShapeFactory.transformStyle(e),r),n=0;n<i.shapes.length;n++)this.renderer.addShape(i.shapes[n]);return i}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",r=0;r<6;r++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(){var t=(0,c.copyAttributesWithClip)({},this.style);return null==t.fillColor&&(t.fillColor=this.getColor()),this.style=t,t}},{key:"canvasFunctionInternal_",value:function(t,e,r,i,n){return l.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(l.GeoFeatureSource);e.SimpleThemeSource=d,u.Zondy.Source.SimpleThemeSource=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomThemeSource=void 0;var i=f(r(12)),n=f(r(8)),o=f(r(16)),s=f(r(13)),a=f(r(14)),u=r(6),l=r(251),c=r(22),h=r(208),p=r(100);function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,r){(0,n.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r));return o.style=r.style,o.isHoverAble=r.isHoverAble,o.highlightStyle=r.highlightStyle,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,l.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=p.ShapeFactory.transformStyle(this.highlightStyle);for(var i=new h.ThemeVector(t,this,p.ShapeFactory.transformStyle(e),r),n=0;n<i.shapes.length;n++)this.renderer.addShape(i.shapes[n]);return i}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",r=0;r<6;r++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(){var t=(0,c.copyAttributesWithClip)({},this.style);return t.fillColor=this.getColor(),this.style=t,t}},{key:"canvasFunctionInternal_",value:function(t,e,r,i,n){return l.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(l.GeoFeatureSource);e.RandomThemeSource=d,u.Zondy.Source.RandomThemeSource=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbolThemeSource=void 0;var i=h(r(12)),n=h(r(8)),o=h(r(16)),s=h(r(13)),a=h(r(14)),u=r(6),l=r(462),c=r(461);function h(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,r,o){(0,n.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o));return a.symbolType=r,a.symbolSetting=o.symbolSetting,a.themeField=o.themeField,a.options={calGravity:o.calGravity||!0},a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.symbolType=null,this.symbolSetting=null,this.themeField=null,l.GraphThemeSource.prototype.destroy.apply(this,arguments)}},{key:"setSymbolType",value:function(t){this.symbolType=t,this.redraw()}},{key:"createThematicFeature",value:function(t){var e;return c.FeatureTheme[this.symbolType]&&this.themeField&&this.symbolSetting&&(e=new c.FeatureTheme[this.symbolType](t,this,[this.themeField],this.symbolSetting,null,this.options)),!!e&&(e.assembleShapes(),e)}}]),e}(l.GraphThemeSource);e.RankSymbolThemeSource=p,u.Zondy.Source.RankSymbolThemeSource=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=void 0;var i=r(673);e.MapvSource=i.MapvSource},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=void 0;var i=p(r(53)),n=p(r(12)),o=p(r(8)),s=p(r(16)),a=p(r(13)),u=p(r(14)),l=p(r(290)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(463)),h=r(674);function p(t){return t&&t.__esModule?t:{default:t}}var f=e.MapvSource=function(t){function e(t){(0,o.default)(this,e);var r=(0,a.default)(this,(e.__proto__||(0,n.default)(e)).call(this,{canvasFunction:function(t,e,r,n,o){var a=n[0]/r,u=n[1]/r,l=[(a-this.map.getSize()[0])/2,(u-this.map.getSize()[1])/2];s.mapHeight=u,s.mapWidth=a,s.layer||(s.layer=new h.MapvLayer(s.map,s.dataSet,s.mapVOptions,s,a,u,l,r)),s.layer.pixelRatio=r,s.layer.setOffset(l),s.layer.resizeCanvas(a,u),s.rotate=s.map.getView().getRotation();var c=s.layer.getCanvas();s.context||((c=document.createElement("CANVAS")).width=a,c.height=u,s.context=c.getContext("2d")),s.layer.isEnabledTime()||(s.layer.resizeCanvas(a,u),s.layer.render());var p=s.context.canvas;return s.context.canvas.getContext("2d").scale(r,r),s.context.clearRect(0,0,p.width,p.height),s.context.canvas.width=n[0]/r,s.context.canvas.height=n[1]/r,s.context.drawImage(c,0,0),(s.resolution!==e||(0,i.default)(s.extent)!==(0,i.default)(t))&&(s.resolution=e,s.extent=t),s.context.canvas},projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:t.state}));r.map=t.map,r.dataSet=t.dataSet,r.mapVOptions=t.mapVOptions,r.layer=void 0;var s=r;return r.mapHeight=0,r.mapWidth=0,r.initDevicePixelRatio(),r.layer,s.refresh(),r}return(0,u.default)(e,t),(0,s.default)(e,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addData",value:function(t,e){this.layer.addData(t,e)}},{key:"updateData",value:function(t,e){this.layer.updateData(t,e)}},{key:"update",value:function(t){this.layer.update(t)}},{key:"removeData",value:function(t){this.layer.removeData(t)}},{key:"removeAllData",value:function(){this.layer.clearData()}},{key:"destroy",value:function(){this.layer.clearData(),this.layer.destroy()}}]),e}(l.default);c.source=c.source||{},c.source.Mapv=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvLayer=void 0;var i=a(r(8)),n=a(r(16)),o=(a(r(69)),a(r(259)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(463))),s=r(675);function a(t){return t&&t.__esModule?t:{default:t}}var u=e.MapvLayer=function(){function t(e,r,n,o,a,u,l,c){(0,i.default)(this,t),this.map=e,this.layerID=n.layerID,delete n.layerID,this.mapvBaseLayer=new s.MapvBaseLayer(e,r,n,this,l,c),this.mapVOptions=n,this.mapWidth=a,this.mapHeight=u,this.pixelRatio=c,this.offset=l,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),this.bindEvent(),this.resizeCanvas(this.mapWidth,this.mapHeight),this.render(),e.getView().setZoom(e.getView().getZoom()+1)}return(0,n.default)(t,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"bindEvent",value:function(){var t=this.map;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.innnerZoomStart=this.zoomStartEvent.bind(this),this.innnerZoomEnd=this.zoomEndEvent.bind(this),this.innnerRotateStart=this.rotateStartEvent.bind(this),this.innnerRotateEnd=this.rotateEndEvent.bind(this),this.innerResize=this.resizeEvent.bind(this),this.innerRemove=this.removeEvent.bind(this),t.on("movestart",this.innerMoveStart),t.on("moveend",this.innerMoveEnd),t.getView().on("change:center",this.innnerZoomEnd),t.getView().on("change:size",this.innerResize)}},{key:"unbindEvent",value:function(){var t=this.map;t.off("movestart",this.innerMoveStart),t.off("moveend",this.innerMoveEnd),t.getView().off("change:center",this.innnerZoomEnd),t.getView().off("change:size",this.innerResize)}},{key:"moveStartEvent",value:function(){var t=this.mapVOptions.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"moveEndEvent",value:function(){this.draw()}},{key:"zoomStartEvent",value:function(){this.mapvBaseLayer.clear()}},{key:"zoomEndEvent",value:function(){this.mapvBaseLayer.clear()}},{key:"rotateStartEvent",value:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()}},{key:"rotateEndEvent",value:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()}},{key:"resizeEvent",value:function(){this._reset(),this._visiable()}},{key:"removeEvent",value:function(){}},{key:"addData",value:function(t,e){this.mapvBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){this.mapvBaseLayer.updateData(t,e)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){this.mapvBaseLayer.clearData()}},{key:"isEnabledTime",value:function(){var t=this.mapVOptions.animation;return t&&!(!1===t.enabled)}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");t.id=this.layerID,t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.mapWidth),t.height=parseInt(this.mapHeight),t.style.width=this.mapWidth,t.style.height=this.mapHeight+"px";var e=this.devicePixelRatio;return t.getContext("2d").scale(e,e),t}},{key:"_reset",value:function(){null!=this.canvas&&(this.resizeCanvas(this.mapWidth,this.mapHeight),this.fixPosition(),this.onResize(),this.render())}},{key:"draw",value:function(){return this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"update",value:function(t){void 0!=t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(t,e){var r=this.canvas;r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.width=parseInt(t),r.height=parseInt(e),r.style.width=t+"px",r.style.height=e+"px"}},{key:"setOffset",value:function(t){this.offset=t,this.mapvBaseLayer&&this.mapvBaseLayer.setOffset(t)}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"originPosition",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}},{key:"clear",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer.clear()}},{key:"addTo",value:function(t){t.addLayer(this)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"moveTo",value:function(t,e){}},{key:"remove",value:function(){this.removeAllData(),this.unbindEvent(),this.disposeFlag=!0}},{key:"destroy",value:function(){this.removeAllData(),this.unbindEvent(),this.disposeFlag=!0}}]),t}();o.zondy=o.zondy||{},o.zondy.MapvLayer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvBaseLayer=void 0;var i=c(r(12)),n=c(r(8)),o=c(r(16)),s=c(r(13)),a=c(r(40)),u=c(r(14)),l=r(676);function c(t){return t&&t.__esModule?t:{default:t}}var h=l.baiduMapLayer?l.baiduMapLayer.__proto__:Function;e.MapvBaseLayer=function(t){function e(t,r,o,a,u,l){(0,n.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,i.default)(e)).call(this,t,r,o));if(!h)return(0,s.default)(c);c.map=t,c.dataSet=r,c.offset=u,c.pixelRatio=l;var p=c;return c.options=o||{},p.init(o),p.argCheck(o),c.initDevicePixelRatio(),c.canvasLayer=a,c.clickEvent=c.clickEvent.bind(c),c.mousemoveEvent=c.mousemoveEvent.bind(c),c.bindEvent(),c}return(0,u.default)(e,t),(0,o.default)(e,[{key:"isEnabledTime",value:function(){var t=this.options.animation;return t&&!(!1===t.enabled)}},{key:"clickEvent",value:function(t){this.map.getPixelFromCoordinate([0,0]);this.devicePixelRatio;var e=t.layerPoint;e[0],this.offset[0],e[1],this.offset[1]}},{key:"mousemoveEvent",value:function(t){if(t){var e=this.map.getPixelFromCoordinate([0,0]),r=(this.devicePixelRatio,t.layerPoint);r[0],e[0],r[1],e[1]}}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent.bind(this)),this.map.on("moveend",this.animatorMoveendEvent.bind(this))}},{key:"removeAnimatorEvent",value:function(){this.map.off("movestart",this.animatorMovestartEvent.bind(this)),this.map.off("moveend",this.animatorMoveendEvent.bind(this))}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}},{key:"bindEvent",value:function(t){var e=this.map;this.addAnimatorEvent(),this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.removeAnimatorEvent(),this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer&&!this.canvasLayer.disposeFlag){var e=this,r=this.map,i=e.options.animation,n=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void this.clear(n);"2d"==this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"==this.context)for(var o in e.options)n[o]=e.options[o];else n.clear(n.COLOR_BUFFER_BIT);var s=r.getView().calculateExtent(),a=r.getPixelFromCoordinate([s[0],s[3]]);e._mapCenter=r.getView().getCenter(),e._mapCenterPx=r.getPixelFromCoordinate(e._mapCenter),e._reselutions=r.getView().getResolution(),e._rotation=-r.getView().getRotation();var u=e.pixelRatio||1,c={transferCoordinate:function(t){var r=(t[0]-e._mapCenter[0])/e._reselutions,i=(e._mapCenter[1]-t[1])/e._reselutions,n=[r+e._mapCenterPx[0],i+e._mapCenterPx[1]];return[((n=function(t,e,r){return[1*(t[0]-e[0])+e[0],1*(t[1]-e[1])+e[1]]}(n,e._mapCenterPx))[0]+e.offset[0])*u,(n[1]+e.offset[1])*u]}};void 0!==t&&(c.filter=function(e){var r=i.trails||10;return!!(t&&e.time>t-r&&e.time<t)});var h=e.dataSet.get(c);this.processData(h),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var p=r.getPixelFromCoordinate([0,0]),f={x:p[0]-a[0],y:p[1]-a[1]};this.drawContext(n,new l.DataSet(h),e.options,f),e.options.updateCallback&&e.options.updateCallback(t)}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"setOffset",value:function(t){this.offset=t}},{key:"updateData",value:function(t,r){var n=t;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),(0,a.default)(e.prototype.__proto__||(0,i.default)(e.prototype),"update",this).call(this,{options:r})}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){(t=t||this.getContext())&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),e}(h)},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,r){"use strict";r.r(e);var i=r(23),n=r(36),o=r(33),s=r(194),a=r(20),u=r(39),l=r(63);function c(t,e,r,i,n,o){var s,a;void 0!==n?(s=n,a=void 0!==o?o:0):(s=[],a=0);for(var u=e;u<r;){var l=t[u++];s[a++]=t[u++],s[a++]=l;for(var c=2;c<i;++c)s[a++]=t[u++]}return s.length=a,s}var h=r(77),p=r(9);r.d(e,"encodeDeltas",function(){return d}),r.d(e,"decodeDeltas",function(){return g}),r.d(e,"encodeFloats",function(){return y}),r.d(e,"decodeFloats",function(){return v}),r.d(e,"encodeSignedIntegers",function(){return m}),r.d(e,"decodeSignedIntegers",function(){return _}),r.d(e,"encodeUnsignedIntegers",function(){return b}),r.d(e,"decodeUnsignedIntegers",function(){return S}),r.d(e,"encodeUnsignedInteger",function(){return x});var f=function(t){function e(e){t.call(this);var r=e||{};this.dataProjection=Object(p.get)("EPSG:4326"),this.factor_=r.factor?r.factor:1e5,this.geometryLayout_=r.geometryLayout?r.geometryLayout:a.default.XY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new n.default(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=Object(l.getStrideForLayout)(this.geometryLayout_),i=g(t,r,this.factor_);c(i,0,i.length,r,i);var n=Object(h.a)(i,0,i.length,r);return Object(o.transformWithOptions)(new u.default(n,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(Object(i.a)(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=Object(o.transformWithOptions)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),i=t.getStride();return c(r,0,r.length,i,r),d(r,i,this.factor_)},e}(s.a);function d(t,e,r){var i,n=r||1e5,o=new Array(e);for(i=0;i<e;++i)o[i]=0;for(var s=0,a=t.length;s<a;)for(i=0;i<e;++i,++s){var u=t[s],l=u-o[i];o[i]=u,t[s]=l}return y(t,n)}function g(t,e,r){var i,n=r||1e5,o=new Array(e);for(i=0;i<e;++i)o[i]=0;for(var s=v(t,n),a=0,u=s.length;a<u;)for(i=0;i<e;++i,++a)o[i]+=s[a],s[a]=o[i];return s}function y(t,e){for(var r=e||1e5,i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*r);return m(t)}function v(t,e){for(var r=e||1e5,i=_(t),n=0,o=i.length;n<o;++n)i[n]/=r;return i}function m(t){for(var e=0,r=t.length;e<r;++e){var i=t[e];t[e]=i<0?~(i<<1):i<<1}return b(t)}function _(t){for(var e=S(t),r=0,i=e.length;r<i;++r){var n=e[r];e[r]=1&n?~(n>>1):n>>1}return e}function b(t){for(var e="",r=0,i=t.length;r<i;++r)e+=x(t[r]);return e}function S(t){for(var e=[],r=0,i=0,n=0,o=t.length;n<o;++n){var s=t.charCodeAt(n)-63;r|=(31&s)<<i,s<32?(e.push(r),r=0,i=0):i+=5}return e}function x(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+String.fromCharCode(e)}e.default=f},function(t,e,r){"use strict";r.r(e);var i=r(1),n=r(145),o=r(196),s=r(2),a=r(0),u=[null,"http://www.opengis.net/ows/1.1"],l=Object(a.makeStructureNS)(u,{ServiceIdentification:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},x,t,e)}),ServiceProvider:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},O,t,e)}),OperationsMetadata:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},m,t,e)})}),c=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return Object(a.pushParseAndPop)({},l,t,[])||null},e}(o.a),h=Object(a.makeStructureNS)(u,{DeliveryPoint:Object(a.makeObjectPropertySetter)(s.h),City:Object(a.makeObjectPropertySetter)(s.h),AdministrativeArea:Object(a.makeObjectPropertySetter)(s.h),PostalCode:Object(a.makeObjectPropertySetter)(s.h),Country:Object(a.makeObjectPropertySetter)(s.h),ElectronicMailAddress:Object(a.makeObjectPropertySetter)(s.h)}),p=Object(a.makeStructureNS)(u,{Value:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(s.h)(t)})}),f=Object(a.makeStructureNS)(u,{AllowedValues:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},p,t,e)})}),d=Object(a.makeStructureNS)(u,{Phone:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},_,t,e)}),Address:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},h,t,e)})}),g=Object(a.makeStructureNS)(u,{HTTP:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},y,t,e)})}),y=Object(a.makeStructureNS)(u,{Get:Object(a.makeObjectPropertyPusher)(function(t,e){var r=Object(n.a)(t);if(r)return Object(a.pushParseAndPop)({href:r},b,t,e)}),Post:void 0}),v=Object(a.makeStructureNS)(u,{DCP:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},g,t,e)})}),m=Object(a.makeStructureNS)(u,{Operation:function(t,e){var r=t.getAttribute("name"),i=Object(a.pushParseAndPop)({},v,t,e);i&&(e[e.length-1][r]=i)}}),_=Object(a.makeStructureNS)(u,{Voice:Object(a.makeObjectPropertySetter)(s.h),Facsimile:Object(a.makeObjectPropertySetter)(s.h)}),b=Object(a.makeStructureNS)(u,{Constraint:Object(a.makeObjectPropertyPusher)(function(t,e){var r=t.getAttribute("name");if(r)return Object(a.pushParseAndPop)({name:r},f,t,e)})}),S=Object(a.makeStructureNS)(u,{IndividualName:Object(a.makeObjectPropertySetter)(s.h),PositionName:Object(a.makeObjectPropertySetter)(s.h),ContactInfo:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},d,t,e)})}),x=Object(a.makeStructureNS)(u,{Abstract:Object(a.makeObjectPropertySetter)(s.h),AccessConstraints:Object(a.makeObjectPropertySetter)(s.h),Fees:Object(a.makeObjectPropertySetter)(s.h),Title:Object(a.makeObjectPropertySetter)(s.h),ServiceTypeVersion:Object(a.makeObjectPropertySetter)(s.h),ServiceType:Object(a.makeObjectPropertySetter)(s.h)}),O=Object(a.makeStructureNS)(u,{ProviderName:Object(a.makeObjectPropertySetter)(s.h),ProviderSite:Object(a.makeObjectPropertySetter)(n.a),ServiceContact:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},S,t,e)})}),E=c,C=[null,"http://www.opengis.net/wmts/1.0"],T=[null,"http://www.opengis.net/ows/1.1"],P=Object(a.makeStructureNS)(C,{Contents:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},I,t,e)})}),w=function(t){function e(){t.call(this),this.owsParser_=new E}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=Object(a.pushParseAndPop)(r,P,t,[]))||null):null},e}(o.a),I=Object(a.makeStructureNS)(C,{Layer:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},L,t,e)}),TileMatrixSet:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},D,t,e)})}),L=Object(a.makeStructureNS)(C,{Style:Object(a.makeObjectPropertyPusher)(function(t,e){var r=Object(a.pushParseAndPop)({},R,t,e);if(r){var i="true"===t.getAttribute("isDefault");return r.isDefault=i,r}}),Format:Object(a.makeObjectPropertyPusher)(s.h),TileMatrixSetLink:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},M,t,e)}),Dimension:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},N,t,e)}),ResourceURL:Object(a.makeObjectPropertyPusher)(function(t,e){var r=t.getAttribute("format"),i=t.getAttribute("template"),n=t.getAttribute("resourceType"),o={};return r&&(o.format=r),i&&(o.template=i),n&&(o.resourceType=n),o})},Object(a.makeStructureNS)(T,{Title:Object(a.makeObjectPropertySetter)(s.h),Abstract:Object(a.makeObjectPropertySetter)(s.h),WGS84BoundingBox:Object(a.makeObjectPropertySetter)(function(t,e){var r=Object(a.pushParseAndPop)([],F,t,e);if(2==r.length)return Object(i.boundingExtent)(r)}),Identifier:Object(a.makeObjectPropertySetter)(s.h)})),R=Object(a.makeStructureNS)(C,{LegendURL:Object(a.makeObjectPropertyPusher)(function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=Object(n.a)(t),r})},Object(a.makeStructureNS)(T,{Title:Object(a.makeObjectPropertySetter)(s.h),Identifier:Object(a.makeObjectPropertySetter)(s.h)})),M=Object(a.makeStructureNS)(C,{TileMatrixSet:Object(a.makeObjectPropertySetter)(s.h),TileMatrixSetLimits:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)([],A,t,e)})}),A=Object(a.makeStructureNS)(C,{TileMatrixLimits:Object(a.makeArrayPusher)(function(t,e){return Object(a.pushParseAndPop)({},j,t,e)})}),j=Object(a.makeStructureNS)(C,{TileMatrix:Object(a.makeObjectPropertySetter)(s.h),MinTileRow:Object(a.makeObjectPropertySetter)(s.f),MaxTileRow:Object(a.makeObjectPropertySetter)(s.f),MinTileCol:Object(a.makeObjectPropertySetter)(s.f),MaxTileCol:Object(a.makeObjectPropertySetter)(s.f)}),N=Object(a.makeStructureNS)(C,{Default:Object(a.makeObjectPropertySetter)(s.h),Value:Object(a.makeObjectPropertyPusher)(s.h)},Object(a.makeStructureNS)(T,{Identifier:Object(a.makeObjectPropertySetter)(s.h)})),F=Object(a.makeStructureNS)(T,{LowerCorner:Object(a.makeArrayPusher)(G),UpperCorner:Object(a.makeArrayPusher)(G)}),D=Object(a.makeStructureNS)(C,{WellKnownScaleSet:Object(a.makeObjectPropertySetter)(s.h),TileMatrix:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},k,t,e)})},Object(a.makeStructureNS)(T,{SupportedCRS:Object(a.makeObjectPropertySetter)(s.h),Identifier:Object(a.makeObjectPropertySetter)(s.h)})),k=Object(a.makeStructureNS)(C,{TopLeftCorner:Object(a.makeObjectPropertySetter)(G),ScaleDenominator:Object(a.makeObjectPropertySetter)(s.d),TileWidth:Object(a.makeObjectPropertySetter)(s.f),TileHeight:Object(a.makeObjectPropertySetter)(s.f),MatrixWidth:Object(a.makeObjectPropertySetter)(s.f),MatrixHeight:Object(a.makeObjectPropertySetter)(s.f)},Object(a.makeStructureNS)(T,{Identifier:Object(a.makeObjectPropertySetter)(s.h)}));function G(t,e){var r=Object(s.h)(t).split(/\s+/);if(r&&2==r.length){var i=+r[0],n=+r[1];if(!isNaN(i)&&!isNaN(n))return[i,n]}}e.default=w},function(t,e,r){"use strict";r.r(e);var i=r(76),n=r(15),o=r(1),s=r(11),a=r(9),u=r(67),l={KVP:"KVP",REST:"REST"},c=r(361),h=r(93);r.d(e,"optionsFromCapabilities",function(){return f});var p=function(t){function e(e){var r=void 0!==e.requestEncoding?e.requestEncoding:l.KVP,n=e.tileGrid,o=e.urls;void 0===o&&void 0!==e.url&&(o=Object(i.c)(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:i.d,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=r,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=Object(i.b)(o.map(d.bind(this))))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Object(i.b)(t.map(d.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){Object(s.assign)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(u.default);function f(t,e){var r=t.Contents.Layer,i=Object(n.d)(r,function(t,r,i){return t.Identifier==e.layer});if(null===i)return null;var s,u=t.Contents.TileMatrixSet;(s=i.TileMatrixSetLink.length>1?"projection"in e?Object(n.e)(i.TileMatrixSetLink,function(t,r,i){var o=Object(n.d)(u,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,s=Object(a.get)(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(a.get)(o),l=Object(a.get)(e.projection);return s&&l?Object(a.equivalent)(s,l):o==e.projection}):Object(n.e)(i.TileMatrixSetLink,function(t,r,i){return t.TileMatrixSet==e.matrixSet}):0)<0&&(s=0);var h=i.TileMatrixSetLink[s].TileMatrixSet,p=i.TileMatrixSetLink[s].TileMatrixSetLimits,f=i.Format[0];"format"in e&&(f=e.format),(s=Object(n.e)(i.Style,function(t,r,i){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(s=0);var d=i.Style[s].Identifier,g={};"Dimension"in i&&i.Dimension.forEach(function(t,e,r){var i=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),g[i]=n});var y,v=t.Contents.TileMatrixSet,m=Object(n.d)(v,function(t,e,r){return t.Identifier==h}),_=m.SupportedCRS;if(_&&(y=Object(a.get)(_.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(a.get)(_)),"projection"in e){var b=Object(a.get)(e.projection);b&&(y&&!Object(a.equivalent)(b,y)||(y=b))}var S,x,O=i.WGS84BoundingBox;if(void 0!==O){var E=Object(a.get)("EPSG:4326").getExtent();x=O[0]==E[0]&&O[2]==E[2],S=Object(a.transformExtent)(O,"EPSG:4326",y);var C=y.getExtent();C&&(Object(o.containsExtent)(C,S)||(S=void 0))}var T=Object(c.createFromCapabilitiesMatrixSet)(m,S,p),P=[],w=e.requestEncoding;if(w=void 0!==w?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var I=t.OperationsMetadata.GetTile.DCP.HTTP.Get,L=0,R=I.length;L<R;++L)if(I[L].Constraint){var M=Object(n.d)(I[L].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===w&&(w=M[0]),w!==l.KVP)break;Object(n.f)(M,l.KVP)&&P.push(I[L].href)}else I[L].href&&(w=l.KVP,P.push(I[L].href));return 0===P.length&&(w=l.REST,i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(f=t.format,P.push(t.template))})),{urls:P,layer:e.layer,matrixSet:h,format:f,projection:y,requestEncoding:w,tileGrid:T,style:d,dimensions:g,wrapX:x,crossOrigin:e.crossOrigin}}function d(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==l.KVP&&Object(s.assign)(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==l.KVP?Object(h.appendParams)(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t});var i=this.tileGrid,n=this.dimensions_;return function(r,o,a){if(r){var u={TileMatrix:i.getMatrixId(r[0]),TileCol:r[1],TileRow:-r[2]-1};Object(s.assign)(u,n);var c=t;return e==l.KVP?Object(h.appendParams)(c,u):c.replace(/\{(\w+?)\}/g,function(t,e){return u[e]})}}}e.default=p}]);