!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=197)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.Zondy=window.Zondy||{};i.Event=i.Event||{},i.Object=i.Object||{},i.Object.ContourAnalyse=i.Object.ContourAnalyse||{},i.Object.Theme=i.Object.Theme||{},i.Theme=i.Theme||{},i.Service=i.Service||{},i.Socket=i.Socket||{},i.Enum=i.Enum||{},i.Enum.Net=i.Enum.Net||{},i.Enum.Theme=i.Enum.Theme||{},i.Enum.Map=i.Enum.Map||{},i.Catalog=i.Catalog||{},i.Util=i.Util||{},i.CRS=i.CRS||{},i.Map=i.Map||{},i.xsd=i.xsd||{},i.XLink=i.XLink||{},i.extent=i.extent||{},i.xml=i.xml||{},i.array=i.array||{},i.string=i.string||{},i.LevelRenderer=i.LevelRenderer||{},i.LevelRenderer.Tool=i.LevelRenderer.Tool||{},i.LevelRenderer.Animation=i.LevelRenderer.Animation||{},i.Feature=i.Feature||{},i.Feature.ShapeParameters=i.Feature.ShapeParameters||{},i.Geometry=i.Geometry||{},i.Client=i.Client||{},i.Source=i.Source||{},i.GeomInteraction=i.GeomInteraction||{},i.Format=i.Format||{},i.Control=i.Control||{},i.OGC=i.OGC||{},i.DataStore=i.DataStore||{},i.DataStore.ElasticSearch=i.DataStore.ElasticSearch||{},i.DataStore.PostGIS=i.DataStore.PostGIS||{},i.DataStore.Hbase=i.DataStore.Hbase||{},i.DataStore.MongoDB=i.DataStore.MongoDB||{},i.CloudDisk=i.CloudDisk||{},i.CloudDisk.GisCore=i.CloudDisk.GisCore||{},i.CloudDisk.Model=i.CloudDisk.Model||{},i.IGServerX=i.IGServerX||{},i.IGServerX.Vector=i.IGServerX.Vector||{},e.Zondy=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(0);var o=function(t,e){if(t=t||{},e){for(var n in e){var i=e[n];void 0!==i&&(t[n]=i)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},s=function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function t(e,n){var r,o=Object.prototype.toString;for(r in e=e||{},n)n.hasOwnProperty(r)&&("object"===i(n[r])?("[object Null]"!==o.call(e[r])&&"[object Undefined]"!==o.call(e[r])||(e[r]="[object Array]"===o.call(n[r])?[]:{}),t(e[r],n[r])):e[r]=n[r],""!==n[r]&&null!==n[r]||(e[r]=n[r]));return e},u=function(t,e){var n;if(t=t||{},e)for(var i in t)void 0!==(n=e[i])&&(t[i]=n)},l=function(t,e,n){var i;if(t=t||{},e)for(var r in e)void 0!==(i=e[r])&&"function"!=typeof i&&n.indexOf(r)<0&&(t[r]=i)},h=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===i(t[e])&&t[e]instanceof Array){for(var n in t[e])t[e][n].destroy&&t[e][n].destroy();t[e].length=0}else"object"===i(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},c=function(){for(var t=[],e=0,n=arguments.length;e<n;e++){var i=arguments[e];if("string"==typeof i&&(i=document.getElementById(i)),1===arguments.length)return i;t.push(i)}return t},f=function(t){return!(!t||1!==t.nodeType)},p=function(t,e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1);return t},d=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},y=function(t,e,n,i,r,o,s,a){e&&(t.id=e),n&&(t.style.left=n.x+"px",t.style.top=n.y+"px"),i&&(t.style.width=i.w+"px",t.style.height=i.h+"px"),r&&(t.style.position=r),o&&(t.style.border=o),s&&(t.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},g=function(t,e){t=t||{};var n="function"==typeof window.Event&&e instanceof window.Event;for(var i in e)(void 0===t[i]||!n&&e.hasOwnProperty&&e.hasOwnProperty(i)&&!t.hasOwnProperty(i))&&(t[i]=e[i]);return!n&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},v=function(t){var e=[];for(var n in t){var r=t[n];if(null!=r&&"function"!=typeof r){var o;if("object"===(void 0===r?"undefined":i(r))&&r.constructor===Array){for(var s,a=[],u=0,l=r.length;u<l;u++)s=r[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o=a.join(",")}else o=encodeURIComponent(r);e.push(encodeURIComponent(n)+"="+o)}}return e.join("&")},m=function(t){var e=[];for(var n in t){var r=t[n];if(null!=r&&"function"!=typeof r){var o;if("object"===(void 0===r?"undefined":i(r))&&r.constructor===Array){for(var s,a=[],u=0,l=r.length;u<l;u++)s=r[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o=a.join(",")}else o=encodeURIComponent(r);e.push(encodeURIComponent(n)+":"+o)}}return e.join(";")},_=function(t,e){var n=t;if(e){var i=(t+" ").split(/[?&]/);n+=" "===i.pop()?e:i.length?"&"+e:"?"+e}return n},b=function(t){var e="";if((t=null===t||void 0===t?window.location.href:t).indexOf("?")>-1){var n=t.indexOf("?")+1;t.indexOf("#");var i=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(n,i)}for(var r={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var u=o[s].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var h=(u[1]||"").replace(/\+/g," ");try{h=decodeURIComponent(h)}catch(t){h=unescape(h)}1==(h=h.split(",")).length&&(h=h[0]),r[l]=h}}return r},x=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),w=function(){var t,e="",n="",i="pc",r=navigator.userAgent.toLowerCase();return r.indexOf("msie")>-1||r.indexOf("trident")>-1&&r.indexOf("rv")>-1?(e="msie",t=r.match(/msie ([\d.]+)/)||r.match(/rv:([\d.]+)/)):r.indexOf("chrome")>-1?(e="chrome",t=r.match(/chrome\/([\d.]+)/)):r.indexOf("firefox")>-1?(e="firefox",t=r.match(/firefox\/([\d.]+)/)):r.indexOf("opera")>-1?(e="opera",t=r.match(/version\/([\d.]+)/)):r.indexOf("safari")>-1&&(e="safari",t=r.match(/version\/([\d.]+)/)),n=t?t[1]:"",r.indexOf("ipad")>-1||r.indexOf("ipod")>-1||r.indexOf("iphone")>-1?i="apple":r.indexOf("android")>-1&&(n=(t=r.match(/version\/([\d.]+)/))?t[1]:"",i="android"),{name:e,version:n,device:i}}(),S=function(){return w},P=function(){var t=!0,e=S();return document.createElement("canvas").getContext?("firefox"===e.name&&parseFloat(e.version)<5&&(t=!1),"safari"===e.name&&parseFloat(e.version)<4&&(t=!1),"opera"===e.name&&parseFloat(e.version)<10&&(t=!1),"msie"===e.name&&parseFloat(e.version)<9&&(t=!1)):t=!1,t}(),C=function(){return P},T=function(t){if(!t)return!0;var e=t.indexOf("//"),n=document.location.toString(),i=n.indexOf("//");if(-1===e)return!0;var r,o=r=t.substring(0,e),s=n.substring(i+2);i=s.indexOf("/");var a=s.indexOf(":"),u=s.substring(0,i),l=document.location.protocol;if(-1!==a||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==o.toLowerCase())return!1;var h=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var c,f=o.substring(0,e);return-1!==h?c=o.substring(0,h):(c=o.substring(0,e),f+=":"+("http:"===r.toLowerCase()?80:443)),c===document.domain&&f===u},O=function t(e){var n=e;if(null==n)return null;switch(n.constructor){case String:return n=(n=(n=(n=(n=(n=(n='"'+n.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r=[],o=0,s=n.length;o<s;o++)r.push(t(n[o]));return"["+r.join(",")+"]";case Number:return isFinite(n)?String(n):null;case Boolean:return String(n);case Date:return"{'__type':\"System.DateTime\",'Year':"+n.getFullYear()+",'Month':"+(n.getMonth()+1)+",'Day':"+n.getDate()+",'Hour':"+n.getHours()+",'Minute':"+n.getMinutes()+",'Second':"+n.getSeconds()+",'Millisecond':"+n.getMilliseconds()+",'TimezoneOffset':"+n.getTimezoneOffset()+"}";default:if("object"===(void 0===n?"undefined":i(n))){if(n.length){for(r=[],o=0,s=n.length;o<s;o++)r.push(t(n[o]));return"["+r.join(",")+"]"}var a=[];for(var u in n)"function"!=typeof n[u]&&"CLASS_NAME"!==u&&a.push("'"+u+"':"+t(n[u]));return a.length>0?"{"+a.join(",")+"}":"{}"}return n.toString()}},E=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},L=function(t,e){if(t=t||{},e)for(var n in e){var i=e[n];void 0!==i&&"CLASS_NAME"!==n&&"function"!=typeof i&&(t[n]=i)}return t},M=function(t,e,n){if(t=t||{},e)for(var i in e){var r=!1;if(n&&n.length)for(var o=0,s=n.length;o<s;o++)if(i===n[o]){r=!0;break}if(!0!==r){var a=e[i];void 0!==a&&"CLASS_NAME"!==i&&"function"!=typeof a&&(t[i]=a)}}return t},I=function t(e){if(null===e||"object"!==(void 0===e?"undefined":i(e)))return e;if(e instanceof Date)return(n=new Date).setTime(e.getTime()),n;if(e instanceof Array)return n=e.slice(0);if(e instanceof Object){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},N=function(){for(var t="",e=1;e<=32;e++){t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-")}return t},A=function(t,e){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var i=n.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,i)}},R=function(t,e){return function(n){return t.call(e,n||window.event)}},k=function(t){switch(t.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},D=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return j(t)})},j=function(t){var e=escape(t).split("%"),n="";""!=e[0]&&(n=e[0]);for(var i=1;i<e.length;i++)"u"==e[i].substring(0,1)?n+=B(F(e[i].substring(1,5))):n+="%"+e[i];return n},F=function(t){for(var e,n="",i="",r=0;r<t.length;r++)n=t.charAt(r),e="0123456789ABCDEF".indexOf(n),i+=G(e);return i},B=function(t){var e="",n="",i="";if(16==t.length){n="1110"+t.substring(0,4),n+="10"+t.substring(4,10),n+="10"+t.substring(10,16);for(var r="0123456789ABCDEF",o=0;o<3;o++)e+="%",i=n.substring(8*o,8*(o+1)),e+=r.charAt(U(i.substring(0,4))),e+=r.charAt(U(i.substring(4,8)));return e}return""},U=function(t){var e=0;if(4==t.length){for(var n=0;n<4;n++)e+=t.charAt(n)*Math.pow(2,3-n);return e}return-1},G=function(t){for(var e="",n=0,i=0;i<4;i++)t>=(n=Math.pow(2,3-i))?(e+="1",t-=n):e+="0";return e},z=function t(e,n){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(n))for(var i in n)e[i]?e[i]=t(e[i],n[i]):e[i]=n[i];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(n)?e.concat(n):n;return e},Z=function(t,e,n,r){e.hasOwnProperty(n)&&("object"!=i(t[n])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[n])]?!r&&n in t||(t[n]=e[n]):q(t[n],e[n],r))},q=function(t,e,n){for(var i in e)Z(t,e,i,n);return t},V=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=function t(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=0;i<e.length;i++)s(this,new e[i](n))},r=0;r<e.length;r++){var o=e[r];s(i,o),s(i.prototype,o.prototype),s(i.prototype,new o)}return i;function s(t,e){var n=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i++){var r=n[i];if("constructor"!==r&&"prototype"!==r&&"name"!==r&&"length"!==r){var o=Object.getOwnPropertyDescriptor(e,r);window.ActiveXObject?Object.defineProperty(t,r,o||{}):Object.defineProperty(t,r,o)}}}},W=function(t,e){var n=document.createElement("CANVAS");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")},H=function(t,e,n,i){return Object.keys(t).forEach(function(r){var o=t[r],s=r;if(J(o)&&"function"!=typeof o){if(n&&n.indexOf(r)>-1){var a={};"geometry"===r&&("polygon"===o.type&&(a.rings=t[r].rings),"multipoint"===o.type&&(a.points=t[r].points),"point"===o.type&&t[r].x&&t[r].y&&(a.y=t[r].y,a.x=t[r].x),"polyline"===o.type&&(a.paths=t[r].paths),a.spatialReference=t[r].spatialReference,o=a,e+="&geometryType=esriGeometry"+t[r].type.charAt(0).toUpperCase()+t[r].type.slice(1)),o=JSON.stringify(o)}i&&i.hasOwnProperty(r)&&(s=i[r]),e+="&"+s+"="+o}}),e},X=function(t,e,n){return Object.keys(e).forEach(function(i){if(n&&n.indexOf(i)>-1){var r=i;r=i.substring(0,r.length-"Features".length)+"s",t+=r+"="+encodeURIComponent(e[i]instanceof Object?JSON.stringify(e[i]):e[i])+"&"}else t+=i+"="+e[i]+"&"}),t},Y=function(t,e,n){return new t({longitude:n[0],latitude:n[1],z:n[2],spatialReference:I(e.spatialReference)})},Q=function t(e){for(var n=0;n<e.length;n++)e[n]instanceof Array?t(e[n]):e[n]instanceof Object&&(e[n]=e[n].toArray());return e},J=function(t){return""!==t&&null!==t&&void 0!==t};e.extend=o,e.isArray=s,e.extendDeep=a,e.copy=u,e.copyExcluce=l,e.reset=h,e.getElement=c,e.isElement=f,e.removeItem=p,e.indexOf=d,e.modifyDOMElement=y,e.applyDefaults=g,e.getParameterString=v,e.getWFParameterString=m,e.urlAppend=_,e.getParameters=b,e.IS_GECKO=x,e.Browser=w,e.getBrowser=S,e.isSupportCanvas=P,e.supportCanvas=C,e.isInTheSameDomain=T,e.toJSON=O,e.transformResult=E,e.copyAttributes=L,e.copyAttributesWithClip=M,e.cloneObject=I,e.newGuid=N,e.bind=A,e.bindAsEventListener=R,e.getTopAnalysisResult=k,e.ChineseToUtf8=D,e.DeepMerge=z,e.merge=q,e.mixin=V,e.createCanvasContext2D=W,e.formatQuery=H,e.formatEdits=X,e.returnPoint=Y,e.formatPoints=Q,e.notNULL=J,r.Zondy.Util.extend=o,r.Zondy.Util.isArray=s,r.Zondy.Util.extendDeep=a,r.Zondy.Util.copy=u,r.Zondy.Util.copyExcluce=l,r.Zondy.Util.reset=h,r.Zondy.Util.getElement=c,r.Zondy.Util.isElement=f,r.Zondy.Util.removeItem=p,r.Zondy.Util.indexOf=d,r.Zondy.Util.modifyDOMElement=y,r.Zondy.Util.applyDefaults=g,r.Zondy.Util.getParameterString=v,r.Zondy.Util.getWFParameterString=m,r.Zondy.Util.urlAppend=_,r.Zondy.Util.getParameters=b,r.Zondy.IS_GECKO=x,r.Zondy.Browser=w,r.Zondy.Util.getBrowser=S,r.Zondy.Util.isSupportCanvas=P,r.Zondy.Util.supportCanvas=C,r.Zondy.Util.isInTheSameDomain=T,r.Zondy.Util.toJSON=O,r.Zondy.Util.transformResult=E,r.Zondy.Util.copyAttributes=L,r.Zondy.Util.copyAttributesWithClip=M,r.Zondy.Util.cloneObject=I,r.Zondy.Util.newGuid=N,r.Zondy.Util.bind=A,r.Zondy.Util.bindAsEventListener=R,r.Zondy.Util.getTopAnalysisResult=k,r.Zondy.Util.ChineseToUtf8=D,r.Zondy.Util.DeepMerge=z,r.Zondy.Util.merge=q,r.Zondy.Util.mixin=V,r.Zondy.Util.createCanvasContext2D=W,r.Zondy.Util.formatQuery=H,r.Zondy.Util.formatEdits=X,r.Zondy.Util.returnPoint=Y,r.Zondy.Util.returnPoint=Q,r.Zondy.Util.returnPoint=J},function(t,e,n){
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0;function o(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function s(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function a(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function u(){return!1}function l(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function f(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function p(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var d=/\{ *([\w_-]+) *\}/g;function y(t,e){return t.replace(d,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var m="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var w=window.requestAnimationFrame||_("RequestAnimationFrame")||x,S=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function P(t,e,n){if(!n||w!==x)return w.call(window,i(t,e));t.call(e)}function C(t){t&&S.call(window,t)}var T={extend:e,create:n,bind:i,lastId:r,stamp:o,throttle:s,wrapNum:a,falseFn:u,formatNum:l,trim:h,splitWords:c,setOptions:f,getParamString:p,template:y,isArray:g,indexOf:v,emptyImageUrl:m,requestFn:w,cancelFn:S,requestAnimFrame:P,cancelAnimFrame:C};function O(){}O.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,o=n(r);for(var s in o.constructor=i,i.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},O.include=function(t){return e(this.prototype,t),this},O.mergeOptions=function(t){return e(this.prototype.options,t),this},O.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=c(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var s=i[r];if(s.ctx===n&&s.fn===e)return s.fn=u,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=u;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i(function(){this.off(t,e,n).off(t,o,n)},this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var M=O.extend(E);function I(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var N=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function A(t,e,n){return t instanceof I?t:g(t)?new I(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function k(t,e){return!t||t instanceof R?t:new R(t,e)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(t,e){return t instanceof D?t:new D(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function B(t,e,n){return t instanceof F?t:g(t)&&"object"!=typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=N(this.x),this.y=N(this.y),this},distanceTo:function(t){var e=(t=A(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=A(t)).x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+l(this.x)+", "+l(this.y)+")"}},R.prototype={extend:function(t){return t=A(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof I?A(t):k(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=k(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},D.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof D))return t?this.extend(B(t)||j(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new D(new F(e.lat-i,e.lng-r),new F(n.lat+i,n.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof F||"lat"in t?B(t):j(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof D?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=j(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=j(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){if(!t)return!1;t=B(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+l(this.lat,t)+", "+l(this.lng,t)+")"},distanceTo:function(t){return G.distance(this,B(t))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return j([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var U={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),r=this.transformation.transform(e.max,n);return new R(i,r)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return new F(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast(),a=new F(o.lat-i,o.lng-r),u=new F(s.lat-i,s.lng-r);return new D(a,u)}},G=e({},U,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),z={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new I(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new R([-t,-t],[t,t])}()};function Z(t,e,n,i){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function q(t,e,n,i){return new Z(t,e,n,i)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var V=e({},G,{code:"EPSG:3857",projection:z,transformation:function(){var t=.5/(Math.PI*z.R);return q(t,.5,-t,.5)}()}),W=e({},V,{code:"EPSG:900913"});function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(s=t[n],i=0,o=s.length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?Tt?"z":"x":""}return u||"M0 0"}var Y=document.documentElement.style,Q="ActiveXObject"in window,J=Q&&!document.addEventListener,K="msLaunchUri"in navigator&&!("documentMode"in document),$=Et("webkit"),tt=Et("android"),et=Et("android 2")||Et("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),it=tt&&Et("Google")&&nt<537&&!("AudioNode"in window),rt=!!window.opera,ot=!K&&Et("chrome"),st=Et("gecko")&&!$&&!rt&&!Q,at=!ot&&Et("safari"),ut=Et("phantom"),lt="OTransition"in Y,ht=0===navigator.platform.indexOf("Win"),ct=Q&&"transition"in Y,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,pt="MozPerspective"in Y,dt=!window.L_DISABLE_3D&&(ct||ft||pt)&&!lt&&!ut,yt="undefined"!=typeof orientation||Et("mobile"),gt=yt&&$,vt=yt&&ft,mt=!window.PointerEvent&&window.MSPointerEvent,_t=!(!window.PointerEvent&&!mt),bt=!window.L_NO_TOUCH&&(_t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),xt=yt&&rt,wt=yt&&st,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(t){}return t}(),Ct=!!document.createElement("canvas").getContext,Tt=!(!document.createElementNS||!H("svg").createSVGRect),Ot=!Tt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Et(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Lt={ie:Q,ielt9:J,edge:K,webkit:$,android:tt,android23:et,androidStock:it,opera:rt,chrome:ot,gecko:st,safari:at,phantom:ut,opera12:lt,win:ht,ie3d:ct,webkit3d:ft,gecko3d:pt,any3d:dt,mobile:yt,mobileWebkit:gt,mobileWebkit3d:vt,msPointer:mt,pointer:_t,touch:bt,mobileOpera:xt,mobileGecko:wt,retina:St,passiveEvents:Pt,canvas:Ct,svg:Tt,vml:Ot},Mt=mt?"MSPointerDown":"pointerdown",It=mt?"MSPointerMove":"pointermove",Nt=mt?"MSPointerUp":"pointerup",At=mt?"MSPointerCancel":"pointercancel",Rt={},kt=!1;function Dt(t,e,n,r){return"touchstart"===e?function(t,e,n){var r=i(function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ae(t),Ut(t,e)});t["_leaflet_touchstart"+n]=r,t.addEventListener(Mt,r,!1),kt||(document.addEventListener(Mt,jt,!0),document.addEventListener(It,Ft,!0),document.addEventListener(Nt,Bt,!0),document.addEventListener(At,Bt,!0),kt=!0)}(t,n,r):"touchmove"===e?function(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(It,i,!1)}(t,n,r):"touchend"===e&&function(t,e,n){var i=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Nt,i,!1),t.addEventListener(At,i,!1)}(t,n,r),this}function jt(t){Rt[t.pointerId]=t}function Ft(t){Rt[t.pointerId]&&(Rt[t.pointerId]=t)}function Bt(t){delete Rt[t.pointerId]}function Ut(t,e){for(var n in t.touches=[],Rt)t.touches.push(Rt[n]);t.changedTouches=[t],e(t)}var Gt,zt,Zt,qt,Vt,Wt=mt?"MSPointerDown":_t?"pointerdown":"touchstart",Ht=mt?"MSPointerUp":_t?"pointerup":"touchend",Xt="_leaflet_",Yt=ce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qt=ce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt="webkitTransition"===Qt||"OTransition"===Qt?Qt+"End":"transitionend";function Kt(t){return"string"==typeof t?document.getElementById(t):t}function $t(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function te(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ee(t){var e=t.parentNode;e&&e.removeChild(t)}function ne(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ie(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function re(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function oe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=le(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function se(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!oe(t,e)){var o=le(t);ue(t,(o?o+" ":"")+e)}}function ae(t,e){void 0!==t.classList?t.classList.remove(e):ue(t,h((" "+le(t)+" ").replace(" "+e+" "," ")))}function ue(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function le(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function he(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ce(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function fe(t,e,n){var i=e||new I(0,0);t.style[Yt]=(ct?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function pe(t,e){t._leaflet_pos=e,dt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function de(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)Gt=function(){Se(window,"selectstart",Ae)},zt=function(){Ce(window,"selectstart",Ae)};else{var ye=ce(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Gt=function(){if(ye){var t=document.documentElement.style;Zt=t[ye],t[ye]="none"}},zt=function(){ye&&(document.documentElement.style[ye]=Zt,Zt=void 0)}}function ge(){Se(window,"dragstart",Ae)}function ve(){Ce(window,"dragstart",Ae)}function me(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(_e(),qt=t,Vt=t.style.outline,t.style.outline="none",Se(window,"keydown",_e))}function _e(){qt&&(qt.style.outline=Vt,qt=void 0,Vt=void 0,Ce(window,"keydown",_e))}function be(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function xe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var we={TRANSFORM:Yt,TRANSITION:Qt,TRANSITION_END:Jt,get:Kt,getStyle:$t,create:te,remove:ee,empty:ne,toFront:ie,toBack:re,hasClass:oe,addClass:se,removeClass:ae,setClass:ue,getClass:le,setOpacity:he,testProp:ce,setTransform:fe,setPosition:pe,getPosition:de,disableTextSelection:Gt,enableTextSelection:zt,disableImageDrag:ge,enableImageDrag:ve,preventOutline:me,restoreOutline:_e,getSizedParentNode:be,getScale:xe};function Se(t,e,n,i){if("object"==typeof e)for(var r in e)Ee(t,r,e[r],n);else for(var o=0,s=(e=c(e)).length;o<s;o++)Ee(t,e[o],n,i);return this}var Pe="_leaflet_events";function Ce(t,e,n,i){if("object"==typeof e)for(var r in e)Le(t,r,e[r],n);else if(e)for(var o=0,s=(e=c(e)).length;o<s;o++)Le(t,e[o],n,i);else{for(var a in t[Pe])Le(t,a,t[Pe][a]);delete t[Pe]}return this}function Te(){if(_t)return!(K||at)}var Oe={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ee(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):"");if(t[Pe]&&t[Pe][r])return this;var s=function(e){return n.call(i||t,e||window.event)},a=s;_t&&0===e.indexOf("touch")?Dt(t,e,s,r):bt&&"dblclick"===e&&!Te()?function(t,e,n){var i,r,o=!1,s=250;function a(t){if(_t){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);r=t.touches?t.touches[0]:t,o=n>0&&n<=s,i=e}function u(t){if(o&&!r.cancelBubble){if(_t){if("mouse"===t.pointerType)return;var n,s,a={};for(s in r)n=r[s],a[s]=n&&n.bind?n.bind(r):n;r=a}r.type="dblclick",r.button=0,e(r),i=null}}t[Xt+Wt+n]=a,t[Xt+Ht+n]=u,t[Xt+"dblclick"+n]=e,t.addEventListener(Wt,a,!!Pt&&{passive:!1}),t.addEventListener(Ht,u,!!Pt&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,s,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Oe[e]||e,s,!!Pt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Ge(t,e)&&a(e)},t.addEventListener(Oe[e],s,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[Pe]=t[Pe]||{},t[Pe][r]=s}function Le(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):""),s=t[Pe]&&t[Pe][r];if(!s)return this;_t&&0===e.indexOf("touch")?function(t,e,n){var i=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Mt,i,!1):"touchmove"===e?t.removeEventListener(It,i,!1):"touchend"===e&&(t.removeEventListener(Nt,i,!1),t.removeEventListener(At,i,!1))}(t,e,r):bt&&"dblclick"===e&&!Te()?function(t,e){var n=t[Xt+Wt+e],i=t[Xt+Ht+e],r=t[Xt+"dblclick"+e];t.removeEventListener(Wt,n,!!Pt&&{passive:!1}),t.removeEventListener(Ht,i,!!Pt&&{passive:!1}),t.removeEventListener("dblclick",r,!1)}(t,r):"removeEventListener"in t?t.removeEventListener(Oe[e]||e,s,!1):"detachEvent"in t&&t.detachEvent("on"+e,s),t[Pe][r]=null}function Me(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ue(t),this}function Ie(t){return Ee(t,"wheel",Me),this}function Ne(t){return Se(t,"mousedown touchstart dblclick",Me),Ee(t,"click",Be),this}function Ae(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Re(t){return Ae(t),Me(t),this}function ke(t,e){if(!e)return new I(t.clientX,t.clientY);var n=xe(e),i=n.boundingClientRect;return new I((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var De=ht&&ot?2*window.devicePixelRatio:st?window.devicePixelRatio:1;function je(t){return K?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/De:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Fe={};function Be(t){Fe[t.type]=!0}function Ue(t){var e=Fe[t.type];return Fe[t.type]=!1,e}function Ge(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var ze={on:Se,off:Ce,stopPropagation:Me,disableScrollPropagation:Ie,disableClickPropagation:Ne,preventDefault:Ae,stop:Re,getMousePosition:ke,getWheelDelta:je,fakeStop:Be,skipped:Ue,isExternalTarget:Ge,addListener:Se,removeListener:Ce},Ze=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=de(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),pe(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),qe=M.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(B(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qt&&dt&&!xt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){if(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(B(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=t instanceof I?t:this.latLngToContainerPoint(t),s=o.subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(s));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():j(t);var n=A(e.paddingTopLeft||e.padding||[0,0]),i=A(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r),u=this.unproject(s.add(a).divideBy(2).add(o),r);return{center:u,zoom:r}},fitBounds:function(t,e){if(!(t=j(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=A(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ze,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){se(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!dt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom;t=B(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),u=a*this.getZoomScale(s,e),l=r.distanceTo(i)||1,h=1.42,c=h*h;function f(t){var e=t?-1:1,n=t?u:a,i=u*u-a*a+e*c*c*l*l,r=2*n*c*l,o=i/r,s=Math.sqrt(o*o+1)-o,h=s<1e-9?-18:Math.log(s);return h}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var y=f(0);function g(t){return a*(d(y)*function(t){return p(t)/d(t)}(y+h*t)-p(y))/c}var v=Date.now(),m=(f(1)-y)/h,_=n.duration?1e3*n.duration:1e3*m*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-v)/_,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*m;o<=1?(this._flyToFrame=P(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(g(u)/l)),s),this.getScaleZoom(a/function(t){return a*(d(y)/d(y+h*t))}(u),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=j(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,j(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=A((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=A(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),s=this.project(t),a=this.getPixelBounds(),u=a.getSize().divideBy(2),l=k([a.min.add(n),a.max.subtract(i)]);if(!l.contains(s)){this._enforcingBounds=!0;var h=o.subtract(s),c=A(s.x+h.x,s.y+h.y);(s.x<l.min.x||s.x>l.max.x)&&(c.x=o.x-h.x,h.x>0?c.x+=u.x-n.x:c.x-=u.x-i.x),(s.y<l.min.y||s.y>l.max.y)&&(c.y=o.y-h.y,h.y>0?c.y+=u.y-n.y:c.y-=u.y-i.y),this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=n.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new F(e,n),r=i.toBounds(2*t.coords.accuracy),o=this._locateOptions;if(o.setView){var s=this.getBoundsZoom(r);this.setView(i,o.maxZoom?Math.min(s,o.maxZoom):s)}var a={latlng:i,bounds:r,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(a[u]=t.coords[u]);this.fire("locationfound",a)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ee(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=te("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new D(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=j(t),n=A(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=k(this.project(a,i),this.project(s,i)).getSize(),h=dt?this.options.zoomSnap:1,c=u.x/l.x,f=u.y/l.y,p=e?Math.max(c,f):Math.min(c,f);return i=this.getScaleZoom(p,i),h&&(i=Math.round(i/(h/100))*(h/100),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(B(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(B(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(B(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(j(t))},distance:function(t,e){return this.options.crs.distance(B(t),B(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(t)))},mouseEventToContainerPoint:function(t){return ke(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Kt(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Se(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt,se(t,"leaflet-container"+(bt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(J?" leaflet-oldie":"")+(at?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=$t(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(t.markerPane,"leaflet-zoom-hide"),se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){pe(this._mapPane,new I(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){pe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Ce:Se;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),dt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=P(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!Ge(s,t))break;if(i.push(n),r)break}if(s===this._container)break;s=s.parentNode}return i.length||a||r||!Ge(s,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ue(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||me(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&Ae(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=o.getLatLng&&(!o._radius||o._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(n,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return de(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return k([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new R(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new R(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=k(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max),s=this._rebound(r.x,-o.x),a=this._rebound(r.y,-o.y);return new I(s,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=dt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ae(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=Yt,n=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ee(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(P(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ae(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),P(function(){this._moveEnd(!0)},this))}}),Ve=O.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return se(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ee(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new Ve(t)};qe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=te("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=te("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ee(this._controlCorners[t]);ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var He=Ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ve.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ae(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ae(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=te("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),Ie(e);var i=this._section=te("section",t+"-list");n&&(this._map.on("click",this.collapse,this),tt||Se(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=te("a",t+"-toggle",e);r.href="#",r.title="Layers",bt?(Se(r,"click",Re),Se(r,"click",this.expand,this)):Se(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=te("div",t+"-base",i),this._separator=te("div",t+"-separator",i),this._overlaysList=te("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ne(this._baseLayersList),ne(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(e),e.layerId=o(t.layer),Se(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var s=document.createElement("div");n.appendChild(s),s.appendChild(e),s.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xe=Ve.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=te("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=te("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ne(o),Se(o,"click",Re),Se(o,"click",r,this),Se(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ae(this._zoomInButton,e),ae(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&se(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&se(this._zoomInButton,e)}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xe,this.addControl(this.zoomControl))});var Ye=Ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=te("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=te("div",e,n)),t.imperial&&(this._iScale=te("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Qe=Ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=te("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&(new Qe).addTo(this)}),Ve.Layers=He,Ve.Zoom=Xe,Ve.Scale=Ye,Ve.Attribution=Qe,We.layers=function(t,e,n){return new He(t,e,n)},We.zoom=function(t){return new Xe(t)},We.scale=function(t){return new Ye(t)},We.attribution=function(t){return new Qe(t)};var Je=O.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(t,e){return t.addHandler(e,this),this};var Ke,$e={Events:E},tn=bt?"touchstart mousedown":"mousedown",en={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},nn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},rn=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Se(this._dragStartTarget,tn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rn._dragging===this&&this.finishDrag(),Ce(this._dragStartTarget,tn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!oe(this._element,"leaflet-zoom-anim")&&!(rn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(rn._dragging=this,this._preventOutline&&me(this._element),ge(),Gt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=be(this._element);this._startPoint=new I(e.clientX,e.clientY),this._parentScale=xe(n),Se(document,nn[t.type],this._onMove,this),Se(document,en[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new I(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ae(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=de(this._element).subtract(n),se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,C(this._animRequest),this._lastEvent=t,this._animRequest=P(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),pe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ae(document.body,"leaflet-dragging"),this._lastTarget&&(ae(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nn)Ce(document,nn[t],this._onMove,this),Ce(document,en[t],this._onUp,this);ve(),zt(),this._moved&&this._moving&&(C(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,rn._dragging=!1}});function on(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var s,a,u,l=0;for(a=r+1;a<=o-1;a++)(u=cn(e[a],e[r],e[o],!0))>l&&(s=a,l=u);l>i&&(n[s]=1,t(e,n,i,r,s),t(e,n,i,s,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)hn(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function sn(t,e,n){return Math.sqrt(cn(t,e,n,!0))}function an(t,e,n,i,r){var o,s,a,u=i?Ke:ln(t,n),l=ln(e,n);for(Ke=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=un(t,e,o=u||l,n,r),a=ln(s,n),o===u?(t=s,u=a):(e=s,l=a)}}function un(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,l=i.min,h=i.max;return 8&n?(o=t.x+a*(h.y-t.y)/u,s=h.y):4&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):2&n?(o=h.x,s=t.y+u*(h.x-t.x)/a):1&n&&(o=l.x,s=t.y+u*(l.x-t.x)/a),new I(o,s,r)}function ln(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function hn(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function cn(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,l=a*a+u*u;return l>0&&((r=((t.x-o)*a+(t.y-s)*u)/l)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new I(o,s)}function fn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function pn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fn(t)}var dn={simplify:on,pointToSegmentDistance:sn,closestPointOnSegment:function(t,e,n){return cn(t,e,n)},clipSegment:an,_getEdgeIntersection:un,_getBitCode:ln,_sqClosestPointOnSegment:cn,isFlat:fn,_flat:pn};function yn(t,e,n){var i,r,o,s,a,u,l,h,c,f=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=ln(t[r],e);for(s=0;s<4;s++){for(h=f[s],i=[],r=0,l=t.length,o=l-1;r<l;o=r++)a=t[r],u=t[o],a._code&h?u._code&h||((c=un(u,a,h,e,n))._code=ln(c,e),i.push(c)):(u._code&h&&((c=un(u,a,h,e,n))._code=ln(c,e),i.push(c)),i.push(a));t=i}return t}var gn={clipPolygon:yn},vn={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new R([-180,-90],[180,90])},mn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new I(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),l=Math.PI/2-2*Math.atan(s*e)-a,a+=l;return new F(a*n,t.x*n/i)}},_n={LonLat:vn,Mercator:mn,SphericalMercator:z},bn=e({},G,{code:"EPSG:3395",projection:mn,transformation:function(){var t=.5/(Math.PI*mn.R);return q(t,.5,-t,.5)}()}),xn=e({},G,{code:"EPSG:4326",projection:vn,transformation:q(1/180,1,-1/180,.5)}),wn=e({},U,{projection:vn,transformation:q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});U.Earth=G,U.EPSG3395=bn,U.EPSG3857=V,U.EPSG900913=W,U.EPSG4326=xn,U.Simple=wn;var Sn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=Sn.extend({initialize:function(t,e){var n,i;if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){if(!t)return!1;var e="number"==typeof t?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Cn=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new D;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Tn=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=A(i),o=A("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=Tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Tn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=te("div","leaflet-default-icon-path",document.body),e=$t(t,"background-image")||$t(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),En=Je.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ae(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=de(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),u=k(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!u.contains(o)){var l=A((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),pe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=P(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=de(e._icon),r=e._map.layerPointToLatLng(i);n&&pe(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=Sn.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=B(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),se(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(se(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ee(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),En)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new En(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&he(this._icon,t),this._shadow&&he(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Mn=Sn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),In=Mn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=B(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=B(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Mn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new R(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Nn=In.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),f(this,n),this._latlng=B(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Mn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===G.distance){var r=Math.PI/180,o=this._mRadius/G.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),l=n.unproject(u).lat,h=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:u.x-n.project([l,t-h]).x,this._radiusY=u.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),An=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=cn,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,h=u.length;l<h;l++){e=u[l-1],n=u[l];var c=o(t,e,n,!0);c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a=this._rings[0],u=a.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,i=0;t<u-1;t++)if(r=a[t],o=a[t+1],n=r.distanceTo(o),(i+=n)>e)return s=(i-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-r.x),o.y-s*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=B(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new D,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=fn(t),i=0,r=t.length;i<r;i++)n?(e[i]=B(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new I(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof F,s=t.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(a=this._rings[e],n=0,o=a.length;n<o-1;n++)(s=an(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=on(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(a=this._parts[n],i=0,s=a.length,r=s-1;i<s;r=i++)if((e||0!==i)&&sn(t,a[r],a[i])<=u)return!0;return!1}});An._flat=pn;var Rn=An.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,s,a,u,l=this._rings[0],h=l.length;if(!h)return null;for(o=s=a=0,t=0,e=h-1;t<h;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,s+=(n.x+i.x)*r,a+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[s/o,a/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=An.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){An.prototype._setLatLngs.call(this,t),fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new I(e,e);if(t=new R(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=yn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(e=this._parts[r],o=0,u=e.length,s=u-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||An.prototype._containsPoint.call(this,t,!0)}}),kn=Cn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=g(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=Dn(t,o);return s?(s.feature=Zn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Dn(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],l=e&&e.pointToLayer,h=e&&e.coordsToLatLng||Fn;if(!a&&!s)return null;switch(s.type){case"Point":return n=h(a),jn(l,t,n,e);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=h(a[r]),u.push(jn(l,t,n,e));return new Cn(u);case"LineString":case"MultiLineString":return i=Bn(a,"LineString"===s.type?0:1,h),new An(i,e);case"Polygon":case"MultiPolygon":return i=Bn(a,"Polygon"===s.type?1:2,h),new Rn(i,e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=Dn({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);c&&u.push(c)}return new Cn(u);default:throw new Error("Invalid GeoJSON object.")}}function jn(t,e,n,i){return t?t(e,n):new Ln(n,i&&i.markersInheritOptions&&i)}function Fn(t){return new F(t[1],t[0],t[2])}function Bn(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Bn(t[o],e-1,n):(n||Fn)(t[o]),r.push(i);return r}function Un(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[l(t.lng,e),l(t.lat,e),l(t.alt,e)]:[l(t.lng,e),l(t.lat,e)]}function Gn(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Gn(t[o],e-1,n,i):Un(t[o],i));return!e&&n&&r.push(r[0]),r}function zn(t,n){return t.feature?e({},t.feature,{geometry:n}):Zn(n)}function Zn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var qn={toGeoJSON:function(t){return zn(this,{type:"Point",coordinates:Un(this.getLatLng(),t)})}};function Vn(t,e){return new kn(t,e)}Ln.include(qn),Nn.include(qn),In.include(qn),An.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=Gn(this._latlngs,e?1:0,!1,t);return zn(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Rn.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=e&&!fn(this._latlngs[0]),i=Gn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),zn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Pn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),zn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=Zn(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?zn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Wn=Vn,Hn=Sn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=j(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ie(this._image),this},bringToBack:function(){return this._map&&re(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=j(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:te("img");se(e,"leaflet-image-layer"),this._zoomAnimated&&se(e,"leaflet-zoom-animated"),this.options.className&&se(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,n,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();pe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){he(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Xn=Hn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:te("video");if(se(e,"leaflet-image-layer"),this._zoomAnimated&&se(e,"leaflet-zoom-animated"),this.options.className&&se(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var a=te("source");a.src=this._url[s],e.appendChild(a)}}}}),Yn=Hn.extend({_initImage:function(){var t=this._image=this._url;se(t,"leaflet-image-layer"),this._zoomAnimated&&se(t,"leaflet-zoom-animated"),this.options.className&&se(t,this.options.className),t.onselectstart=u,t.onmousemove=u}}),Qn=Sn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&he(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&he(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(he(this._container,0),this._removeTimeout=setTimeout(i(ee,void 0,this._container),200)):ee(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=B(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ie(this._container),this},bringToBack:function(){return this._map&&re(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Sn||(n=e,e=t),e instanceof Cn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),n=this._getAnchor();this._zoomAnimated?pe(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Jn=Qn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",Me))},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",Me))},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=te("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=te("div",t+"-content-wrapper",e);if(this._contentNode=te("div",t+"-content",n),Ne(e),Ie(this._contentNode),Se(e,"contextmenu",Me),this._tipContainer=te("div",t+"-tip-container",e),this._tip=te("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=te("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Se(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight;r&&i>r?(e.height=r+"px",se(t,"leaflet-popup-scrolled")):ae(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();pe(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt($t(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new I(this._containerLeft,-n-this._containerBottom);r._add(de(this._container));var o=t.layerPointToContainerPoint(r),s=A(this.options.autoPanPadding),a=A(this.options.autoPanPaddingTopLeft||s),u=A(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),h=0,c=0;o.x+i+u.x>l.x&&(h=o.x+i-l.x+u.x),o.x-h-a.x<0&&(h=o.x-a.x),o.y+n+u.y>l.y&&(c=o.y+n-l.y+u.y),o.y-c-a.y<0&&(c=o.y-a.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),Re(t)},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(t,e,n){return t instanceof Jn||(t=new Jn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Sn.include({bindPopup:function(t,e){return t instanceof Jn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Jn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Re(t),e instanceof Mn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Kn=Qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qn.prototype.getEvents.call(this);return bt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,u=r.offsetWidth,l=r.offsetHeight,h=A(this.options.offset),c=this._getAnchor();"top"===a?(e=u/2,n=l):"bottom"===a?(e=u/2,n=0):"center"===a?(e=u/2,n=l/2):"right"===a?(e=0,n=l/2):"left"===a?(e=u,n=l/2):s.x<o.x?(a="right",e=0,n=l/2):(a="left",e=u+2*(h.x+c.x),n=l/2),t=t.subtract(A(e,n,!0)).add(h).add(c),ae(r,"leaflet-tooltip-right"),ae(r,"leaflet-tooltip-left"),ae(r,"leaflet-tooltip-top"),ae(r,"leaflet-tooltip-bottom"),se(r,"leaflet-tooltip-"+a),pe(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&he(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});qe.include({openTooltip:function(t,e,n){return t instanceof Kn||(t=new Kn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Sn.include({bindTooltip:function(t,e){return t instanceof Kn?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Kn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),bt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(se(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ae(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var $n=Tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ne(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=A(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Tn.Default=On;var ti=Sn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ee(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ie(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!J){he(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);he(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ee(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ee(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new I(+r,+o);a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new I(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();dt?fe(t.el,r,i):pe(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new R(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new R(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var h=this._tiles[l].coords;h.z===this._tileZoom&&u.contains(new I(h.x,h.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var c=r.min.y;c<=r.max.y;c++)for(var f=r.min.x;f<=r.max.x;f++){var p=new I(f,c);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:s.push(p)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var y=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],y);this._level.el.appendChild(y)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return j(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n),o=e.unproject(i,t.z),s=e.unproject(r,t.z);return[o,s]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new D(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new I(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ee(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){se(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,J&&this.options.opacity<1&&he(t,this.options.opacity),tt&&!et&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&P(i(this._tileReady,this,t,null,o)),pe(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(he(n.el,0),C(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(se(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),J||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ei=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),tt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Se(n,"load",i(this._tileOnLoad,this,e,n)),Se(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return y(this._url,e(n,this.options))},_tileOnLoad:function(t,e){J?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=m,ee(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return it||e.el.setAttribute("src",m),ti.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==m))return ti.prototype._tileReady.call(this,t,e,n)}});function ni(t,e){return new ei(t,e)}var ii=ei.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var o=(n=f(this,n)).detectRetina&&St?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,ei.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=k(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===xn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=ei.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});ei.WMS=ii,ni.wms=function(t,e){return new ii(t,e)};var ri=Sn.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=de(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),s=this._map.project(t,e),a=s.subtract(o),u=r.multiplyBy(-n).add(i).add(r).subtract(a);dt?fe(this._container,u,n):pe(this._container,u)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),oi=ri.extend({getEvents:function(){var t=ri.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ri.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,ee(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ri.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=St?2:1;pe(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ri.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(Be(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ae(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(se(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function si(t){return Ct?new oi(t):null}var ai=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ui={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ri.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ai("shape");se(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ai("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ee(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ai("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=g(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ai("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ie(t._container)},_bringToBack:function(t){re(t._container)}},li=Ot?ai:H,hi=ri.extend({getEvents:function(){var t=ri.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=li("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=li("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ee(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ri.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),pe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=li("path");t.options.className&&se(e,t.options.className),t.options.interactive&&se(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ee(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,r="a"+n+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ie(t._path)},_bringToBack:function(t){re(t._path)}});function ci(t){return Tt||Ot?new hi(t):null}Ot&&hi.include(ui),qe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&si(t)||ci(t)}});var fi=Rn.extend({initialize:function(t,e){Rn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=j(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});hi.create=li,hi.pointsToPath=X,kn.geometryToLayer=Dn,kn.coordsToLatLng=Fn,kn.coordsToLatLngs=Bn,kn.latLngToCoords=Un,kn.latLngsToCoords=Gn,kn.getFeature=zn,kn.asFeature=Zn,qe.mergeOptions({boxZoom:!0});var pi=Je.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Gt(),ge(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),n=e.getSize();pe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ee(this._box),ae(this._container,"leaflet-crosshair")),zt(),ve(),Ce(document,{contextmenu:Re,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});qe.addInitHook("addHandler","boxZoom",pi),qe.mergeOptions({doubleClickZoom:!0});var di=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});qe.addInitHook("addHandler","doubleClickZoom",di),qe.mergeOptions({dragging:!0,inertia:!et,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yi=Je.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ae(this._map._container,"leaflet-grab"),ae(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=j(this._map.options.maxBounds);this._offsetLimit=k(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),h=a.multiplyBy(l/u),c=l/(n.inertiaDeceleration*s),f=h.multiplyBy(-c/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),P(function(){e.panBy(f,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});qe.addInitHook("addHandler","dragging",yi),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gi=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=A(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Re(t)}}});qe.addInitHook("addHandler","keyboard",gi),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vi=Je.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=je(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Re(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});qe.addInitHook("addHandler","scrollWheelZoom",vi),qe.mergeOptions({tap:!0,tapTolerance:15});var mi=Je.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ae(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&se(n,"leaflet-active"),this._holdTimeout=setTimeout(i(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Se(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ae(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!bt||_t&&!at||qe.addInitHook("addHandler","tap",mi),qe.mergeOptions({touchZoom:bt&&!et,bounceAtZoomLimits:!0});var _i=Je.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend",this._onTouchEnd,this),Ae(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=P(a,this,!0),Ae(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});qe.addInitHook("addHandler","touchZoom",_i),qe.BoxZoom=pi,qe.DoubleClickZoom=di,qe.Drag=yi,qe.Keyboard=gi,qe.ScrollWheelZoom=vi,qe.Tap=mi,qe.TouchZoom=_i,t.version="1.7.1",t.Control=Ve,t.control=We,t.Browser=Lt,t.Evented=M,t.Mixin=$e,t.Util=T,t.Class=O,t.Handler=Je,t.extend=e,t.bind=i,t.stamp=o,t.setOptions=f,t.DomEvent=ze,t.DomUtil=we,t.PosAnimation=Ze,t.Draggable=rn,t.LineUtil=dn,t.PolyUtil=gn,t.Point=I,t.point=A,t.Bounds=R,t.bounds=k,t.Transformation=Z,t.transformation=q,t.Projection=_n,t.LatLng=F,t.latLng=B,t.LatLngBounds=D,t.latLngBounds=j,t.CRS=U,t.GeoJSON=kn,t.geoJSON=Vn,t.geoJson=Wn,t.Layer=Sn,t.LayerGroup=Pn,t.layerGroup=function(t,e){return new Pn(t,e)},t.FeatureGroup=Cn,t.featureGroup=function(t,e){return new Cn(t,e)},t.ImageOverlay=Hn,t.imageOverlay=function(t,e,n){return new Hn(t,e,n)},t.VideoOverlay=Xn,t.videoOverlay=function(t,e,n){return new Xn(t,e,n)},t.SVGOverlay=Yn,t.svgOverlay=function(t,e,n){return new Yn(t,e,n)},t.DivOverlay=Qn,t.Popup=Jn,t.popup=function(t,e){return new Jn(t,e)},t.Tooltip=Kn,t.tooltip=function(t,e){return new Kn(t,e)},t.Icon=Tn,t.icon=function(t){return new Tn(t)},t.DivIcon=$n,t.divIcon=function(t){return new $n(t)},t.Marker=Ln,t.marker=function(t,e){return new Ln(t,e)},t.TileLayer=ei,t.tileLayer=ni,t.GridLayer=ti,t.gridLayer=function(t){return new ti(t)},t.SVG=hi,t.svg=ci,t.Renderer=ri,t.Canvas=oi,t.canvas=si,t.Path=Mn,t.CircleMarker=In,t.circleMarker=function(t,e){return new In(t,e)},t.Circle=Nn,t.circle=function(t,e,n){return new Nn(t,e,n)},t.Polyline=An,t.polyline=function(t,e){return new An(t,e)},t.Polygon=Rn,t.polygon=function(t,e){return new Rn(t,e)},t.Rectangle=fi,t.rectangle=function(t,e){return new fi(t,e)},t.Map=qe,t.map=function(t,e){return new qe(t,e)};var bi=window.L;t.noConflict=function(){return window.L=bi,this},window.L=t}(e)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgsServiceBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=n(128);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{};var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.CLASS_NAME="Zondy.IgsServiceBase",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.CommonServiceBase),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){this.request({method:t&&t.method?t.method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){(t=(0,r.transformResult)(t)).succeed?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events.triggerEvent("processFailed",{error:t})}}]),e}();e.IgsServiceBase=s,Zondy.Service.IgsServiceBase=s},function(t,e,n){var i=2*Math.PI,r=n(29);t.exports=function(t){return Math.abs(t)<=3.14159265359?t:t-r(t)*i}},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=void 0;var r=n(0);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=s,r.Zondy.Enum.XClsType=s;var a={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=a,r.Zondy.Enum.VectClsType=a;var u={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=u,r.Zondy.Enum.FeatureType=u;var l={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=l,r.Zondy.Enum.FontShape=l;var h={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=h,r.Zondy.Enum.LabelLinType=h;var c={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=c,r.Zondy.Enum.LabelRegType=c;var f={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=f,r.Zondy.Enum.LabelPntType=f;var p={Auto:0,NoRep:1,OnStep:2};e.RepeatType=p,r.Zondy.Enum.RepeatType=p;var d={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=d,r.Zondy.Enum.LabelSpreadType=d;var y={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=y,r.Zondy.Enum.LineConstrain=y;var g={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=g,r.Zondy.Enum.EightDirType=g;var v={Reg:0,Arc:1,All:2};e.ISShowArc=v,r.Zondy.Enum.ISShowArc=v;var m=(o(i={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},"SysModeMinDis","SysModeMinDis"),o(i,"SysModeSysRecommend","SysModeSysRecommend"),i);e.NetAnalyType=m,r.Zondy.Enum.Net.NetAnalyType=m;var _={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=_,r.Zondy.Enum.Net.NetElemType=_;var b={Adjust:0,NoAdjust:1};e.CLinAdjustType=b,r.Zondy.Enum.Theme.CLinAdjustType=b;var x={Round:0,Square:1,Butt:2};e.CLinHeadType=x,r.Zondy.Enum.Theme.CLinHeadType=x;var w={Round:0,Square:1,Butt:2};e.CLinJointType=w,r.Zondy.Enum.Theme.CLinJointType=w;var S={Byrule:0,Bypoint:1};e.CLinStyleMakeType=S,r.Zondy.Enum.Theme.CLinStyleMakeType=S;var P={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=P,r.Zondy.Enum.Theme.CItemType=P;var C={Doc:"mapType",Tile:"tileType"};e.MapType=C,r.Zondy.Enum.Map.MapType=C;var T={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=T,r.Zondy.Enum.Map.LayerStatusType=T},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(40),a=n(51),u=n(9);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.id=null,n.style={},n.highlightStyle=null,n.parent=null,n.__dirty=!0,n.__clipShapes=[],n.invisible=!1,n.ignore=!1,n.zlevel=0,n.draggable=!1,n.clickable=!1,n.hoverable=!0,n.z=0,n.refOriginalPosition=[0,0],n.refDataID=null,n.isHoverByRefDataID=!1,n.refDataHoverGroup=null,n.dataInfo=null,(0,o.extend)(n,t),n.id=n.id||(0,o.newGuid)(),n.CLASS_NAME="Zondy.LevelRenderer.Shape",n.getTansform=function(){var t=[];return function(e,n){var i=[e,n];return this.needTransform&&this.transform&&(u.SUtil.Util_matrix.invert(t,this.transform),u.SUtil.Util_matrix.mulVector(i,t,[e,n,1]),e===i[0]&&n===i[1]&&this.updateNeedTransform()),i}}(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.mixin)(s.Eventful,a.Transformable)),i(e,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),t.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),e&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"===this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],i=0,r=n.length;i<r;i++){var o=e[n[i][0]],s=n[i][1];void 0!==o&&(t[s]=o)}}},{key:"doClip",value:function(t){var e=u.SUtil.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var i=this.__clipShapes[n];if(i.needTransform){var r=i.transform;u.SUtil.Util_matrix.invert(e,r),t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}if(t.beginPath(),i.buildPath(t,i.style),t.clip(),i.needTransform){var o=e;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(t,e,n){var i={};for(var r in t)i[r]=t[r];var o=u.SUtil.Util_color.getHighlightColor();for(var s in"stroke"!==t.brushType?(i.strokeColor=o,i.lineWidth=t.lineWidth||1,i.brushType="both"):"stroke"!==n?(i.strokeColor=o,i.lineWidth=t.lineWidth||1):i.strokeColor=e.strokeColor||u.SUtil.Util_color.mix(t.strokeColor,u.SUtil.Util_color.toRGB(o)),e)void 0!==e[s]&&(i[s]=e[s]);return i}},{key:"getHighlightZoom",value:function(){return"text"!==this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){}},{key:"getRect",value:function(t){}},{key:"isCover",value:function(t,e){var n=this.getTansform(t,e);t=n[0],e=n[1];var i=this.style.__rect;return i||(i=this.style.__rect=this.getRect(this.style)),t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height&&u.SUtil.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,n,i){if(void 0!==n.text&&!1!==n.text){var r=n.textColor||n.color||n.strokeColor;t.fillStyle=r;var o,s,a,u,l=10,h=n.textPosition||this.textPosition||"top",c=[];switch(c=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var f=(i||n).__rect||this.getRect(i||n);switch(h){case"inside":a=f.x+f.width/2,u=f.y+f.height/2,o="center",s="middle","stroke"!==n.brushType&&r===n.color&&(t.fillStyle="#fff");break;case"left":a=f.x-l,u=f.y+f.height/2,o="end",s="middle";break;case"right":a=f.x+f.width+l,u=f.y+f.height/2,o="start",s="middle";break;case"top":a=f.x+f.width/2,u=f.y-l,o="center",s="bottom";break;case"bottom":a=f.x+f.width/2,u=f.y+f.height+l,o="center",s="top"}}break;case"start":case"end":var p=0,d=0,y=0,g=0;if(void 0!==n.pointList){var v=n.pointList;if(v.length<2)return;var m=v.length;switch(h){case"start":p=v[0][0]+c[0],d=v[1][0]+c[0],y=v[0][1]+c[1],g=v[1][1]+c[1];break;case"end":p=v[m-2][0]+c[0],d=v[m-1][0]+c[0],y=v[m-2][1]+c[1],g=v[m-1][1]+c[1]}}else p=n.xStart+c[0]||0,d=n.xEnd+c[0]||0,y=n.yStart+c[1]||0,g=n.yEnd+c[1]||0;switch(h){case"start":o=p<d?"end":"start",s=y<g?"bottom":"top",a=p,u=y;break;case"end":o=p<d?"start":"end",s=y<g?"top":"bottom",a=d,u=g}l-=4,p&&d&&p!==d?a-="end"===o?l:-l:o="center",y!==g?u-="bottom"===s?l:-l:s="middle";break;case"specific":a=n.textX||0,u=n.textY||0,o="start",s="middle"}n.labelXOffset&&!isNaN(n.labelXOffset)&&(a+=n.labelXOffset),n.labelYOffset&&!isNaN(n.labelYOffset)&&(u+=n.labelYOffset),null!=a&&null!=u&&e._fillText(t,n.text,a,u,n.textFont,n.textAlign||o,n.textBaseline||s)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,n){t.globalAlpha="fill"===e?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"===e?void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity:void 0===n.opacity?1:n.opacity}}],[{key:"_fillText",value:function(t,n,i,r,o,s,a){o&&(t.font=o),t.textAlign=s,t.textBaseline=a;var l=e._getTextRect(n,i,r,o,s,a);n=(n+"").split("\n");var h=u.SUtil.Util_area.getTextHeight("ZH",o);switch(a){case"top":r=l.y;break;case"bottom":r=l.y+h;break;default:r=l.y+h/2}for(var c=0,f=n.length;c<f;c++)t.fillText(n[c],i,r),r+=h}},{key:"_getTextRect",value:function(t,e,n,i,r,o){var s=u.SUtil.Util_area.getTextWidth(t,i),a=u.SUtil.Util_area.getTextHeight("ZH",i);switch(t=(t+"").split("\n"),r){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(o){case"top":break;case"bottom":n-=a*t.length;break;default:n-=a*t.length/2}return{x:e,y:n,width:s,height:a*t.length}}}]),e}();e.Shape=l,r.Zondy.LevelRenderer.Shape=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point2D=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(18);var o=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.x=void 0!==t?t:null,o.y=void 0!==n?n:null,o.nearDis=void 0!==r.nearDis?parseFloat(r.nearDis):null,o.CLASS_NAME="Zondy.Object.Point2D",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Tangram),i(e,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null===this.x||null===this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),e}();e.Point2D=o,Zondy.Object.Point2D=o},function(t,e,n){"use strict";var i=n(164),r=n(335),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return e},extend:function(t,e,n){return l(e,function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(173),s=n(91),a=n(174),u=n(52),l=n(175),h=n(176),c=n(177),f=n(178),p=n(179),d=n(26),y=n(53);var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"SUtil_smoothBezier",value:function(e,n,i,r,o){o&&2===o||(o=[0,0]);var s,a,u=o,l=[],h=[],c=[],f=[],p=!!r;if(p){s=[1/0,1/0],a=[-1/0,-1/0];for(var d=e.length,y=0;y<d;y++)t.Util_vector.min(s,s,[e[y][0]+u[0],e[y][1]+u[1]]),t.Util_vector.max(a,a,[e[y][0]+u[0],e[y][1]+u[1]]);t.Util_vector.min(s,s,r[0]),t.Util_vector.max(a,a,r[1])}for(var g=e.length,v=0;v<g;v++){var m=[e[v][0]+u[0],e[v][1]+u[1]],_=void 0,b=void 0;if(i)_=[e[v?v-1:g-1][0]+u[0],e[v?v-1:g-1][1]+u[1]],b=[e[(v+1)%g][0]+u[0],e[(v+1)%g][1]+u[1]];else{if(0===v||v===g-1){l.push([e[v][0]+u[0],e[v][1]+u[1]]);continue}_=[e[v-1][0]+u[0],e[v-1][1]+u[1]],b=[e[v+1][0]+u[0],e[v+1][1]+u[1]]}t.Util_vector.sub(h,b,_),t.Util_vector.scale(h,h,n);var x=t.Util_vector.distance(m,_),w=t.Util_vector.distance(m,b),S=x+w;0!==S&&(x/=S,w/=S),t.Util_vector.scale(c,h,-x),t.Util_vector.scale(f,h,w);var P=t.Util_vector.add([],m,c),C=t.Util_vector.add([],m,f);p&&(t.Util_vector.max(P,P,s),t.Util_vector.min(P,P,a),t.Util_vector.max(C,C,s),t.Util_vector.min(C,C,a)),l.push(P),l.push(C)}return i&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,n,i,r){r&&2===r||(r=[0,0]);for(var o=r,s=e.length,a=[],u=0,l=1;l<s;l++)u+=t.Util_vector.distance([e[l-1][0]+o[0],e[l-1][1]+o[1]],[e[l][0]+o[0],e[l][1]+o[1]]);var h=u/5;h=h<s?s:h;for(var c=0;c<h;c++){var f=c/(h-1)*(n?s:s-1),p=Math.floor(f),d=f-p,y=void 0,g=[e[p%s][0]+o[0],e[p%s][1]+o[1]],v=void 0,m=void 0;n?(y=[e[(p-1+s)%s][0]+o[0],e[(p-1+s)%s][1]+o[1]],v=[e[(p+1)%s][0]+o[0],e[(p+1)%s][1]+o[1]],m=[e[(p+2)%s][0]+o[0],e[(p+2)%s][1]+o[1]]):(y=[e[0===p?p:p-1][0]+o[0],e[0===p?p:p-1][1]+o[1]],v=[e[p>s-2?s-1:p+1][0]+o[0],e[p>s-2?s-1:p+1][1]+o[1]],m=[e[p>s-3?s-1:p+2][0]+o[0],e[p>s-3?s-1:p+2][1]+o[1]]);var _=d*d,b=d*_;a.push([x(y[0],g[0],v[0],m[0],d,_,b),x(y[1],g[1],v[1],m[1],d,_,b)])}return a;function x(t,e,n,i,r,o,s){var a=.5*(n-t),u=.5*(i-e);return(2*(e-n)+a+u)*s+(-3*(e-n)-2*a-u)*o+a*r+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,n,i,r,o,s){var a=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return a[0]=o,a[1]=o,s&&s instanceof Array?t.setLineDash(s):t.setLineDash(a),t.moveTo(e,n),void t.lineTo(i,r);var u=i-e,l=r-n,h=Math.floor(Math.sqrt(u*u+l*l)/o);u/=h,l/=h;for(var c=!0,f=0;f<h;++f)c?t.moveTo(e,n):t.lineTo(e,n),c=!c,e+=u,n+=l;t.lineTo(i,r)}}]),t}();g.Util_area=new o.Area,g.Util_color=new s.Color,g.Util_computeBoundingBox=new a.ComputeBoundingBox,g.Util_curve=new u.Curve,g.Util_env=new l.Env,g.Util_event=new h.Event,g.Util_http=new c.Http,g.Util_math=new f.Math,g.Util_matrix=new p.Matrix,g.Util=new d.Util,g.Util_vector=new y.Vector,e.SUtil=g,r.Zondy.LevelRenderer.SUtil=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,o.extend)(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null,this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:""}return i(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(r.Zondy.Util.isArray(t.ip))for(var n=0;n<t.ip.length;n++){e=new Array;var i=null;i=(0,o.isArray)(t.port)?void 0!==t.port[n]?t.port[n]:"6163":void 0!==t.port?t.port:"6163";var s=null;s=(0,o.isArray)(t.partUrl)?void 0!==t.partUrl[n]?t.partUrl[n]:null:void 0!==t.partUrl?t.partUrl:null,""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip[n]+":"+i:t.domainStr=t.domain,e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+s).trim()))}else""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port:t.domainStr=t.domain,e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();e.ServiceBase=s,r.Zondy.Service.ServiceBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notNULL=e.formatPoints=e.returnPoint=e.formatEdits=e.formatQuery=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=void 0;var i=n(64),r=n(253),o=n(0),s=n(44),a=n(254),u=n(255),l=n(116),h=n(111),c=n(117),f=n(256),p=n(45),d=n(65),y=n(66),g=n(112),v=n(110),m=n(5),_=n(118),b=n(119),x=n(46),w=n(47),S=n(68),P=n(67),C=n(69),T=n(114),O=n(115),E=n(113),L=n(257),M=n(7),I=n(121),N=n(258),A=n(19),R=n(18),k=n(259),D=n(120),j=n(1);e.AnyLine=i.AnyLine,e.Arc=r.Arc,e.Zondy=o.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=a.CAttDataRow,e.CDisplayStyle=u.CDisplayStyle,e.CDisplayStyleExtend=l.CDisplayStyleExtend,e.CDynNoteInfo=h.CDynNoteInfo,e.CGDBInfo=c.CGDBInfo,e.Circle=f.Circle,e.CLineInfo=p.CLineInfo,e.CPointInfo=d.CPointInfo,e.CRegionInfo=y.CRegionInfo,e.DynNoteLableType=g.DynNoteLableType,e.DynShowStyle=v.DynShowStyle,e.XClsType=m.XClsType,e.VectClsType=m.VectClsType,e.FeatureType=m.FeatureType,e.FontShape=m.FontShape,e.LabelLinType=m.LabelLinType,e.LabelRegType=m.LabelRegType,e.LabelPntType=m.LabelPntType,e.RepeatType=m.RepeatType,e.LabelSpreadType=m.LabelSpreadType,e.LineConstrain=m.LineConstrain,e.EightDirType=m.EightDirType,e.ISShowArc=m.ISShowArc,e.NetAnalyType=m.NetAnalyType,e.NetElemType=m.NetElemType,e.CLinAdjustType=m.CLinAdjustType,e.CLinHeadType=m.CLinHeadType,e.CLinJointType=m.CLinJointType,e.CLinStyleMakeType=m.CLinStyleMakeType,e.CItemType=m.CItemType,e.MapType=m.MapType,e.LayerStatusType=m.LayerStatusType,e.Feature=_.Feature,e.FeatureGeometry=b.FeatureGeometry,e.FeatureGraphicBase=x.FeatureGraphicBase,e.FeatureSet=w.FeatureSet,e.GLine=S.GLine,e.GPoint=P.GPoint,e.GRegion=C.GRegion,e.LabelLinInfo=T.LabelLinInfo,e.LabelRegInfo=O.LabelRegInfo,e.LablePntInfo=E.LablePntInfo,e.MultiPolygon=L.MultiPolygon,e.Point2D=M.Point2D,e.Polygon=I.Polygon,e.PolyLine=N.PolyLine,e.Rectangle=A.Rectangle,e.Tangram=R.Tangram,e.VectCls=k.VectCls,e.WebGraphicsInfo=D.WebGraphicsInfo,e.extend=j.extend,e.isArray=j.isArray,e.extendDeep=j.extendDeep,e.copy=j.copy,e.copyExcluce=j.copyExcluce,e.reset=j.reset,e.getElement=j.getElement,e.isElement=j.isElement,e.removeItem=j.removeItem,e.indexOf=j.indexOf,e.modifyDOMElement=j.modifyDOMElement,e.applyDefaults=j.applyDefaults,e.getParameterString=j.getParameterString,e.getWFParameterString=j.getWFParameterString,e.urlAppend=j.urlAppend,e.getParameters=j.getParameters,e.IS_GECKO=j.IS_GECKO,e.Browser=j.Browser,e.getBrowser=j.getBrowser,e.isSupportCanvas=j.isSupportCanvas,e.supportCanvas=j.supportCanvas,e.isInTheSameDomain=j.isInTheSameDomain,e.toJSON=j.toJSON,e.transformResult=j.transformResult,e.copyAttributes=j.copyAttributes,e.copyAttributesWithClip=j.copyAttributesWithClip,e.cloneObject=j.cloneObject,e.newGuid=j.newGuid,e.bind=j.bind,e.bindAsEventListener=j.bindAsEventListener,e.getTopAnalysisResult=j.getTopAnalysisResult,e.ChineseToUtf8=j.ChineseToUtf8,e.DeepMerge=j.DeepMerge,e.merge=j.merge,e.mixin=j.mixin,e.createCanvasContext2D=j.createCanvasContext2D,e.formatQuery=j.formatQuery,e.formatEdits=j.formatEdits,e.returnPoint=j.returnPoint,e.formatPoints=j.formatPoints,e.notNULL=j.notNULL},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CTheme=void 0;var i=n(0),r=n(1);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,r.extend)(this,n),this.Name=n&&n.Name?n.Name:null,this.IsBaseTheme=!n||!n.IsBaseTheme||n.IsBaseTheme,this.Visible=!n||!n.Visible||n.Visible};e.CTheme=o,i.Zondy.Object.Theme.CTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFactory=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(54),s=n(94),a=n(55),u=n(185),l=n(56),h=n(186),c=n(187),f=n(95),p=n(96),d=n(188),y=n(189),g=n(97),v=n(93),m=n(57),_=n(190),b=n(191),x=n(1);var w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="Zondy.Feature.ShapeFactory"}return i(t,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var n=this.shapeParameters;if(n instanceof o.Point){var i=new Object;i.x=n.x,i.y=n.y,i.r=n.r,i=(0,x.copyAttributesWithClip)(i,n.style,["x","y"]);var r=new p.SmicPoint;return r.style=t.transformStyle(i),r.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(r,n,["x","y","style","highlightStyle"]),r}if(n instanceof s.Line){if(!n.pointList)return null;var w=new Object;w.pointList=n.pointList,w=(0,x.copyAttributesWithClip)(w,n.style,["pointList"]);var S=new g.SmicBrokenLine;return S.style=t.transformStyle(w),S.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(S,n,["pointList","style","highlightStyle"]),S}if(n instanceof a.Polygon){if(!n.pointList)return null;var P=new Object;P.pointList=n.pointList,P=(0,x.copyAttributesWithClip)(P,n.style,["pointList"]);var C=new m.SmicPolygon;return C.style=t.transformStyle(P),C.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(C,n,["pointList","style","highlightStyle"]),C}if(n instanceof u.Rectangle){if(!n.x&&!n.y&!n.width&!n.height)return null;var T=new Object;T.x=n.x,T.y=n.y,T.width=n.width,T.height=n.height,T=(0,x.copyAttributesWithClip)(T,n.style,["x","y","width","height"]);var O=new _.SmicRectangle;return O.style=t.transformStyle(T),O.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(O,n,["x","y","width","height","style","highlightStyle"]),O}if(n instanceof l.Sector){var E=new Object;E.x=n.x,E.y=n.y,E.r=n.r,E.startAngle=n.startAngle,E.endAngle=n.endAngle,n.r0&&(E.r0=n.r0),n.clockWise&&(E.clockWise=n.clockWise),E=(0,x.copyAttributesWithClip)(E,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var L=new b.SmicSector;return L.style=t.transformStyle(E),L.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(L,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),L}if(n instanceof h.Label){var M=new Object;M.x=n.x,M.y=n.y,M.text=n.text,M=(0,x.copyAttributesWithClip)(M,n.style,["x","y","text"]);var I=new d.SmicText;return I.style=t.transformStyle(M),I.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(I,n,["x","y","text","style","highlightStyle"]),I}if(n instanceof c.Image){var N=new Object;N.x=n.x,N.y=n.y,n.image&&(N.image=n.image),n.width&&(N.width=n.width),n.height&&(N.height=n.height),n.sx&&(N.sx=n.sx),n.sy&&(N.sy=n.sy),n.sWidth&&(N.sWidth=n.sWidth),n.sHeight&&(N.sHeight=n.sHeight),N=(0,x.copyAttributesWithClip)(N,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new v.SmicImage;return A.style=t.transformStyle(N),A.highlightStyle=t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(A,n,["x","y","image","width","height","style","highlightStyle"]),A}if(n instanceof f.Circle){var R=new Object;R.x=n.x,R.r=n.r,R.y=n.y,R=(0,x.copyAttributesWithClip)(R,n.style,["x","y","r"]);var k=new y.SmicCircle;return k.style=new t.transformStyle(R),k.highlightStyle=new t.transformStyle(n.highlightStyle),(0,x.copyAttributesWithClip)(k,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),k}return null}}],[{key:"transformStyle",value:function(t){var e={},n=["normal","normal","normal","12","arial,sans-serif"],i=[!0,!1];for(var r in t)switch(r){case"fill":i[0]=t[r];break;case"fillColor":e.color=t[r];break;case"stroke":i[1]=t[r];break;case"strokeWidth":e.lineWidth=t[r];break;case"strokeLinecap":e.lineCap=t[r];break;case"strokeLineJoin":e.lineJoin=t[r];break;case"strokeDashstyle":e.lineType=t[r];break;case"pointRadius":e.r=t[r];break;case"label":e.text=t[r];break;case"labelRect":e.labelRect=t[r];break;case"fontColor":e.textColor=t[r];break;case"fontStyle":n[0]=t[r];break;case"fontVariant":n[1]=t[r];break;case"fontWeight":n[2]=t[r];break;case"fontSize":var o="";t[r]&&t[r].toString().indexOf("px")<0&&(o="px"),n[3]=t[r]+o;break;case"fontFamily":n[4]=t[r];break;case"fontOpacity":e.opacity=t[r];break;case"labelPosition":e.textPosition=t[r];break;case"labelAlign":e.textAlign=t[r];break;case"labelBaseline":e.textBaseline=t[r];break;case"labelRotation":e.textRotation=t[r];break;default:e[r]=t[r]}return e.textFont=n.join(" "),!0===i[0]&&!1===i[1]?e.brushType="fill":!1===i[0]&&!0===i[1]?e.brushType="stroke":!0===i[0]&&!0===i[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,n){var i=n||{},r=new u.Rectangle(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return r.style={fillColor:"#f3f3f3"},i.backgroundStyle&&(0,x.copyAttributesWithClip)(r.style,i.backgroundStyle),i.backgroundRadius&&(r.style.radius=i.backgroundRadius),r.clickable=!1,r.hoverable=!1,t.createShape(r)}},{key:"GraphAxis",value:function(t,e,n,i){var r,o=e,u=n||{},l=[],c=[],f=!!u.useXReferenceLine&&u.useXReferenceLine,p=u.axisYTick&&!isNaN(u.axisYTick)?u.axisYTick:0,d=[],y=[];if(0===p){if(y.push([o[0],o[3]-5]),y.push([o[0],o[1]]),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var g=parseInt(u.axis3DParameter),v=[o[0]-g,o[1]+g];u.axisUseArrow?(d.push([v[0]+1.5,v[1]-7.5]),d.push([v[0]-1,v[1]+1]),d.push([v[0]+7.5,v[1]-1.5]),y.push([v[0],v[1]])):y.push([v[0],v[1]]),y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}else{var m=Math.abs(o[1]-o[3])/p,_=o[3];y.push([o[0],_-5]);for(var b=0;b<p;b++){if(y.push([o[0],_]),y.push([o[0]-5,_]),y.push([o[0],_]),f){var w=new s.Line([[o[0],_],[o[2],_]]);w.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},w.clickable=!1,w.hoverable=!1,u.xReferenceLineStyle&&(0,x.copyAttributesWithClip)(w.style,u.xReferenceLineStyle),l.push(t.createShape(w))}_+=m}if(y.push([o[0],o[1]]),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var S=parseInt(u.axis3DParameter),P=[o[0]-S,o[1]+S];u.axisUseArrow?(d.push([P[0]+1.5,P[1]-7.5]),d.push([P[0]-1,P[1]+1]),d.push([P[0]+7.5,P[1]-1.5]),y.push([P[0],P[1]])):y.push([P[0],P[1]]),y.push([o[0],o[1]])}y.push([o[2]+5,o[1]])}if(u.axisUseArrow){var C=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],T=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],O=new a.Polygon(C);O.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(O.style,u.axisStyle),c.push(t.createShape(O));var E=new a.Polygon(T);if(E.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(E.style,u.axisStyle),c.push(t.createShape(E)),u.axis3DParameter&&!isNaN(u.axis3DParameter)&&u.axis3DParameter>=15){var L=new a.Polygon(d);L.style={fillColor:"#008acd"},(0,x.copyAttributesWithClip)(L.style,u.axisStyle),c.push(t.createShape(L))}}r=y;var M=new s.Line(r);M.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},u.axisStyle&&(0,x.copyAttributesWithClip)(M.style,u.axisStyle),M.clickable=!1,M.hoverable=!1;var I=[t.createShape(M)],N=[];if(u.axisYLabels&&u.axisYLabels.length&&u.axisYLabels.length>0){var A=u.axisYLabels,R=A.length,k=[0,0];if(u.axisYLabelsOffset&&u.axisYLabelsOffset.length&&(k=u.axisYLabelsOffset),1===R){var D=new h.Label(o[0]-5+k[0],o[3]+k[1],A[0]);D.style={labelAlign:"right"},u.axisYLabelsStyle&&(0,x.copyAttributesWithClip)(D.style,u.axisYLabelsStyle),D.clickable=!1,D.hoverable=!1,N.push(t.createShape(D))}else for(var j=o[3],F=Math.abs(o[1]-o[3])/(R-1),B=0;B<R;B++){var U=new h.Label(o[0]-5+k[0],j+k[1],A[B]);U.style={labelAlign:"right"},u.axisYLabelsStyle&&(0,x.copyAttributesWithClip)(U.style,u.axisYLabelsStyle),U.clickable=!1,U.hoverable=!1,N.push(t.createShape(U)),j+=F}}var G=[];if(u.axisXLabels&&u.axisXLabels.length&&u.axisXLabels.length>0){var z=u.axisXLabels,Z=z.length,q=[0,0];if(u.axisXLabelsOffset&&u.axisXLabelsOffset.length&&(q=u.axisXLabelsOffset),i&&i.xPositions&&i.xPositions.length&&i.xPositions.length===Z)for(var V=i.xPositions,W=0;W<Z;W++){var H=new h.Label(V[W]+q[0],o[1]+q[1],z[W]);H.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(H.style,u.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,G.push(t.createShape(H))}else if(1===Z){var X=new h.Label(o[0]-5+q[0],o[1]+q[0],z[0]);X.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(X.style,u.axisXLabelsStyle),X.clickable=!1,X.hoverable=!1,G.push(t.createShape(X))}else for(var Y=o[0],Q=Math.abs(o[2]-o[0])/(Z-1),J=0;J<Z;J++){var K=new h.Label(Y+q[0],o[1]+q[1],z[J]);K.style={labelAlign:"center",labelBaseline:"top"},u.axisXLabelsStyle&&(0,x.copyAttributesWithClip)(K.style,u.axisXLabelsStyle),K.clickable=!1,K.hoverable=!1,G.push(t.createShape(K)),Y+=Q}}return l.concat(I).concat(N).concat(G).concat(c)}},{key:"ShapeStyleTool",value:function(t,e,n,i,r,o){var s=t||{};if(e&&(0,x.copyAttributesWithClip)(s,e),n&&n.length&&void 0!==r&&!isNaN(r)&&r>=0&&n[r]&&(0,x.copyAttributesWithClip)(s,n[r]),i&&i.length&&void 0!==o)for(var a=i,u=a.length,l=parseFloat(o),h=0;h<u;h++)if(a[h].start<=l&&l<a[h].end){(0,x.copyAttributesWithClip)(s,a[h].style);break}return s}}]),t}();e.ShapeFactory=w,r.Zondy.Feature.ShapeFactory=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalysisBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(10),a=n(3);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};n.baseUrl="igs/rest/mrfws";var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.flowID=void 0!==n.flowID?n.flowID:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.ServiceBase),i(e,[{key:"execute",value:function(t,e,n){var i={};if((0,o.copyExcluce)(i,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"===e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!==i)){var r=(0,o.getWFParameterString)(i);null===r&&""===r||(this.partUrl+="&paraValues="+r)}if("post"===e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var s=new Array;if(null!==i)for(var u in i)if(null!==i[u]){var l={};l.Key=u,l.Value=i[u].toString(),s.push(l)}i=s}var h=this.getFullUrl(),c=new a.IgsServiceBase(h,{eventListeners:{scope:this,processCompleted:t,processFailed:n}});"post"===e.toLowerCase()?c.processAsync({method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):c.processAsync()}}]),e}();e.AnalysisBase=u,r.Zondy.Service.AnalysisBase=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeParameters=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="Zondy.Feature.ShapeParameters"}return i(t,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),t}();e.ShapeParameters=o,r.Zondy.Feature.ShapeParameters=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeInfo=void 0;var i=n(0),r=n(1);n(50),n(147),n(148);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,r.extend)(this,n),this.Caption=void 0!==n.Caption?n.Caption:null,this.IsVisible=void 0===n.IsVisible||n.IsVisible,this.MaxScale=void 0!==n.MaxScale?parseFloat(n.MaxScale):0,this.MinScale=void 0!==n.MinScale?parseFloat(n.MinScale):0,this.RegInfo=void 0!==n.RegInfo?n.RegInfo:null,this.LinInfo=void 0!==n.LinInfo?n.LinInfo:null,this.PntInfo=void 0!==n.PntInfo?n.PntInfo:null};e.CThemeInfo=o,i.Zondy.Object.Theme.CThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(27),s=n(13),a=n(19);var u=function(t){function e(t,n,i,o,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,o,a,u));if(l.shapeFactory=new s.ShapeFactory,l.shapeParameters=null,l.RelativeCoordinate=!1,l.setting=null,l.origonPoint=null,l.chartBox=null,l.chartBounds=null,l.width=null,l.height=null,l.XOffset=0,l.YOffset=0,l.DVBParameter=null,l.dataViewBox=null,l.DVBCodomain=null,l.DVBCenterPoint=null,l.DVBUnitValue=null,l.DVBOrigonPoint=null,l.DVBWidth=null,l.DVBHeight=null,l.origonPointOffset=null,l.fields=i||[],l.dataValues=null,a)l.lonlat=a;else if(u&&u.calGravity)if(t.ftype===r.Zondy.Enum.FeatureType.Pnt){var h=t.fGeom.PntGeom[0].Dot;l.lonlat=[h.x,h.y]}else if(t.ftype===r.Zondy.Enum.FeatureType.Lin){var c=[];t.fGeom.LinGeom[0].Line.Arcs.forEach(function(t){var e=t.Dots;c=[].concat(e)});var f=Math.ceil(c.length/2);h=c[f-1];l.lonlat=[h.x,h.y]}else if(t.ftype===r.Zondy.Enum.FeatureType.Reg)l.lonlat=l.getCenterOfGravityPoint(t);else{var p=t.bound;l.lonlat=[(p.xmin+p.xmax)/2,(p.ymin+p.ymax)/2]}else{p=t.bound;l.lonlat=[(p.xmin+p.xmax)/2,(p.ymin+p.ymax)/2]}return o&&o.width&&o.height&&o.codomain&&(l.setting=o),l.CLASS_NAME="Zondy.Feature.Theme.Graph",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Theme),i(e,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=o.Theme.getDataValues(this.data,this.fields,e);this.dataValues=n||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var i=this.width,r=this.height,s=this.location;this.origonPoint=[s[0]-i/2,s[1]-r/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+r,a[0]+i,a[1]];var u=this.chartBox,l=this.DVBParameter;this.dataViewBox=[u[0]+l[0],u[1]-l[1],u[2]-l[2],u[3]+l[3]];var h=this.dataViewBox;return!(h[0]>=h[2]||h[1]<=h[3])&&(this.DVBOrigonPoint=[h[0],h[3]],this.DVBWidth=Math.abs(h[2]-h[0]),this.DVBHeight=Math.abs(h[1]-h[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var n=this.width,i=this.height,r=this.location;return this.chartBounds=new a.Rectangle(r[0]-n/2,r[1]-i/2,r[0]+n/2,r[1]+i/2),this.resetLinearGradient(),r}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,n=0,i=t.length;n<i;n++){t[n].refOriginalPosition=e;var r=t[n].style;for(var o in r)switch(o){case"pointList":for(var s=r[o],a=0,u=s.length;a<u;a++)s[a][0]-=e[0],s[a][1]-=e[1];break;case"x":r[o]-=e[0];break;case"y":r[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function(t){var e=[],n=0,i=0,o=0;if(t.ftype===r.Zondy.Enum.FeatureType.Reg)for(var s=t.fGeom.RegGeom,a=0;a<s.length;a++){var u=s[a];if(null!=u&&null!=u.Rings)for(var l=u.Rings,h=0;h<l.length;h++){var c=l[h];if(null!=c&&null!=c.Arcs)for(var f=c.Arcs,p=0;p<f.length;p++){var d=f[p];if(null!=d&&null!=d.Dots)for(var y=d.Dots,g=0;g<y.length;g++)e.push(y[g])}}}for(h=1;h<=e.length;h++){var v=e[h%e.length].x,m=e[h%e.length].y,_=e[h-1].x,b=e[h-1].y,x=(v*b-m*_)/2;n+=x,i+=x*(v+_)/3,o+=x*(m+b)/3}return[i/=n,o/=n]}}]),e}();o.Theme.getDataValues=function(t,e,n){if(!t.attributes)return!1;for(var i=[],r=t.attributes,o=0;o<e.length;o++)for(var s in r)if(s===e[o]&&null!==r[s]&&void 0!==r[s])try{!isNaN(n)&&n>=0?i.push(parseFloat(r[s].toString()).toFixed(n)):i.push(parseFloat(r[s].toString()))}catch(t){throw new Error("not a number")}return i.length===e.length&&i},e.Graph=u,r.Zondy.Theme.Graph=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tangram=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};(0,o.extend)(this,n)}return i(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var n;return n=t.replace(/(^\s+)|(\s+$)/g,""),"g"===e.toLowerCase()&&(n=n.replace(/\s/g,"")),n}}]),t}();e.Tangram=s,r.Zondy.Object.Tangram=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(18);var o=function(t){function e(t,n,i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=o||{},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s));return a.xmin=t,a.xmax=i,a.ymin=n,a.ymax=r,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Tangram),i(e,[{key:"setByOL",value:function(t){void 0!==t&&null!==t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null===(e=e||{}).inclusive&&(e.inclusive=!0);var n=!1,i=this.xmin===t.xmax||this.xmax===t.xmin||this.ymax===t.ymin||this.ymin===t.ymax;if(e.inclusive||!i){var r=t.ymin>=this.ymin&&t.ymin<=this.ymax||this.ymin>=t.ymin&&this.ymin<=t.ymax,o=t.ymax>=this.ymin&&t.ymax<=this.ymax||this.ymax>t.ymin&&this.ymax<t.ymax,s=t.xmin>=this.xmin&&t.xmin<=this.xmax||this.xmin>=t.xmin&&this.xmin<=t.xmax,a=t.xmax>=this.xmin&&t.xmax<=this.xmax||this.xmax>=t.xmin&&this.xmax<=t.xmax;n=(r||o)&&(s||a)}return n}}]),e}();e.Rectangle=o,Zondy.Object.Rectangle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryAnalysisBase=void 0;var i=n(0),r=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrgs",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ServiceBase),e}();e.GeometryAnalysisBase=o,i.Zondy.Service.GeometryAnalysisBase=o},function(t,e){t.exports=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}},function(t,e){t.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogService=void 0;var i=n(0),r=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrcs",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ServiceBase),e}();e.CatalogService=o,i.Zondy.Catalog.CatalogService=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseParameter=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(11);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layers=[],this.pageIndex=0,this.pagination=100,this.resultFormat="json",this.IncludeAttribute=!0,this.IncludeGeometry=!0,this.IncludeWebGraphic=!1,this.orderBy=void 0,this.isAsc=void 0,this.proj=void 0,this.fields=void 0,this.coordPrecision=void 0,this.cursorType="backward"}return i(t,null,[{key:"formatParam",value:function(t){for(var e=["IncludeAttribute","IncludeGeometry","IncludeWebGraphic","isAsc","compareRectOnly","enableDisplayCondition"],n=0;n<e.length;n++)"string"==typeof t[e[n]]&&(t[e[n]]="true"===t[e[n]]);return t}}]),t}();o.prototype.formatParameter=function(t,e){var n=void 0,i=this;return i._crs=e,"typename"===t?(n={layers:t,pagination:"maxfeatures",rectangle:"bbox",where:"filter",geometry:"filter",objectIds:"featureId"},this.where&&this.geometry&&delete n.geometry,Object.keys(n).forEach(function(t){i.hasOwnProperty(t)&&i[t]&&(i[t]instanceof Array?n[n[t]]=i[t].join(","):n[n[t]]="where"===t||"geometry"===t?initFilter(i[t],i.geometry,i):i[t]),delete n[t]}),n):(n={layers:t,pageIndex:"Page",pagination:"pageCount",resultFormat:"f",includeAttribute:"IncludeAttribute",includeGeometry:"IncludeGeometry",includeWebGraphic:"IncludeWebGraphic",orderBy:"orderField"},Object.keys(n).forEach(function(t){i.hasOwnProperty(t)&&(i[n[t]]=i[t],delete i[t])}),this)},e.BaseParameter=o,r.Zondy.Service.BaseParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=void 0;var i=n(0),r=n(10);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return n.baseUrl="igs/rest/mrms",function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ServiceBase),e}();e.MapServiceBase=o,i.Zondy.Service.MapServiceBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}return r(t,[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==(void 0===t?"undefined":i(t))&&null!==t){var n=t;if(t instanceof Array){n=[];for(var r=0,o=t.length;r<o;r++)n[r]=this.clone(t[r])}else if(!e[Object.prototype.toString.call(t)])for(var s in n={},t)t.hasOwnProperty(s)&&(n[s]=this.clone(t[s]));return n}return t}},{key:"mergeItem",value:function(t,e,n,r){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(n)&&("object"!=i(t[n])||o[Object.prototype.toString.call(t[n])]?!r&&n in t||(t[n]=e[n]):this.merge(t[n],e[n],r))}},{key:"merge",value:function(t,e,n){for(var i in e)this.mergeItem(t,e,i,n);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var n,i=this._canvas,r=this._pixelCtx,o=this._width,s=this._height,a=this._offsetX,u=this._offsetY;t+a>o&&(o=t+a+100,i.width=o,n=!0),e+u>s&&(s=e+u+100,i.height=s,n=!0),t<-a&&(o+=a=100*Math.ceil(-t/100),i.width=o,n=!0),e<-u&&(s+=u=100*Math.ceil(-e/100),i.height=s,n=!0),n&&r.translate(a,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}},{key:"inherits",value:function(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)t.prototype[r]=n[r];t.constructor=t}}]),t}();e.Util=s,o.Zondy.LevelRenderer.Tool.Util=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1);var s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&n&&n.map&&n.renderer&&(this.id=(0,o.newGuid)(),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=n,this.CLASS_NAME="Zondy.Feature.Theme")}return i(t,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}}]),t}();e.Theme=s,r.Zondy.Theme=s},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));i.default.zondy=i.default.zondy||{},i.default.zondy.control=i.default.zondy.control||{},i.default.zondy.Clientview=i.default.zondy.Clientview||{},i.default.CRS=i.default.CRS||{}},function(t,e){t.exports=function(t){return t<0?-1:1}},function(t,e){t.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},function(t,e){t.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},function(t,e){t.exports=function(t){return.05859375*t*t*(1+.75*t)}},function(t,e){t.exports=function(t){return t*t*t*(35/3072)}},function(t,e){t.exports=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}},function(t,e,n){var i=Math.PI/2,r=n(29);t.exports=function(t){return Math.abs(t)<i?t:t-r(t)*Math.PI}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(10),a=n(47),u=n(48),l=n(3);var h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};n.baseUrl="igs/rest/mrfs";var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.resultCallBack=void 0!==n.resultCallBack?n.resultCallBack:null,i.queryParam=void 0!==n.queryParam?n.queryParam:null,i.requestType=void 0!==n.requestType?n.requestType:"GET",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.ServiceBase),i(e,[{key:"processResult",value:function(t){var e=new a.FeatureSet;(0,o.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};(0,o.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,n,i,r,o){this.resultCallBack=n;var s=new l.IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:"geojson"!==o?this.processResult:this.processGeoJsonResult,processFailed:r}});"GET"===i?s.processAsync():s.processAsync({method:"POST",data:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,n){if(null!==this.queryParam){var i="";if(this.queryParam instanceof u.QueryParameter){i=this.getFullUrl();var r="",o=null;"GET"===(r=n||(this.requestType?this.requestType:"GET")).toUpperCase()?i+=encodeURI("?"+this.queryParam.getParameterURL()):o=this.queryParam.getParameterObject(),this.restQuery(i,o,t,r,e,this.queryParam.resultFormat.toLowerCase())}}}}]),e}();e.QueryServiceBase=h,r.Zondy.Service.QueryServiceBase=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pushSerializeAndPop=e.serialize=e.pushParseAndPop=e.parseNode=e.makeStructureNS=e.makeSequence=e.OBJECT_PROPERTY_NODE_FACTORY=e.makeSimpleNodeFactory=e.makeArraySerializer=e.makeChildAppender=e.makeObjectPropertySetter=e.makeObjectPropertyPusher=e.makeReplacer=e.makeArrayPusher=e.makeArrayExtender=e.parse=e.getAttributeNS=e.isNode=e.isDocument=e.getAllTextContent_=e.getAllTextContent=e.createElementNS=e.XML_SCHEMA_INSTANCE_URI=e.DOCUMENT=void 0;var i=n(0),r=n(326),o=document.implementation.createDocument("","",null),s=function(t,e){return o.createElementNS(t,e)},a=function(t,e){return u(t,e,[]).join("")},u=function t(e,n,i){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)n?i.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(e.nodeValue);else{var r=void 0;for(r=e.firstChild;r;r=r.nextSibling)t(r,n,i)}return i},l=function(t){return t instanceof Document},h=function(t){return t instanceof Node},c=function(t,e,n){return t.getAttributeNS(e,n)||""},f=function(t){return(new DOMParser).parseFromString(t,"application/xml")},p=function(t,e){return function(n,i){var o=t.call(void 0!==e?e:this,n,i);if(void 0!==o){var s=i[i.length-1];(0,r.extend)(s,o)}}},d=function(t,e){return function(n,i){var r=t.call(void 0!==e?e:this,n,i);void 0!==r&&i[i.length-1].push(r)}},y=function(t,e){return function(n,i){var r=t.call(void 0!==e?e:this,n,i);void 0!==r&&(i[i.length-1]=r)}},g=function(t,e,n){return function(i,r){var o=t.call(void 0!==n?n:this,i,r);if(void 0!==o){var s=r[r.length-1],a=void 0!==e?e:i.localName;(a in s?s[a]:s[a]=[]).push(o)}}},v=function(t,e,n){return function(i,r){var o=t.call(void 0!==n?n:this,i,r);void 0!==o&&(r[r.length-1][void 0!==e?e:i.localName]=o)}},m=function(t,e){return function(n,i,r){t.call(void 0!==e?e:this,n,i,r),r[r.length-1].node.appendChild(n)}},_=function(t,e){var n=void 0,i=void 0;return function(e,r,o){if(void 0===n){n={};var s={};s[e.localName]=t,n[e.namespaceURI]=s,i=b(e.localName)}T(n,i,r,o)}},b=function(t,e){var n=t;return function(t,i,r){var o=i[i.length-1].node,a=n;void 0===a&&(a=r);var u=void 0!==e?e:o.namespaceURI;return s(u,a)}},x=b(),w=function(t,e){for(var n=e.length,i=new Array(n),r=0;r<n;++r)i[r]=t[e[r]];return i},S=function(t,e,n){var i,r=void 0!==n?n:{},o=void 0;for(o=0,i=t.length;o<i;++o)r[t[o]]=e;return r},P=function(t,e,n,i){var r=void 0;for(r=e.firstElementChild;r;r=r.nextElementSibling){var o=t[r.namespaceURI];if(void 0!==o){var s=o[r.localName];void 0!==s&&s.call(i,r,n)}}},C=function(t,e,n,i,r){return i.push(t),P(e,n,i,r),i.pop()},T=function(t,e,n,i,r,o){for(var s=(void 0!==r?r:n).length,a=void 0,u=void 0,l=0;l<s;++l)void 0!==(a=n[l])&&void 0!==(u=e.call(void 0!==o?o:this,a,i,void 0!==r?r[l]:void 0))&&t[u.namespaceURI][u.localName].call(o,u,a,i)},O=function(t,e,n,i,r,o,s){return r.push(t),T(e,n,i,r,o,s),r.pop()};e.DOCUMENT=o,e.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance",e.createElementNS=s,e.getAllTextContent=a,e.getAllTextContent_=u,e.isDocument=l,e.isNode=h,e.getAttributeNS=c,e.parse=f,e.makeArrayExtender=p,e.makeArrayPusher=d,e.makeReplacer=y,e.makeObjectPropertyPusher=g,e.makeObjectPropertySetter=v,e.makeChildAppender=m,e.makeArraySerializer=_,e.makeSimpleNodeFactory=b,e.OBJECT_PROPERTY_NODE_FACTORY=x,e.makeSequence=w,e.makeStructureNS=S,e.parseNode=P,e.pushParseAndPop=C,e.serialize=T,e.pushSerializeAndPop=O,i.Zondy.xml.DOCUMENT=o,i.Zondy.xml.XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance",i.Zondy.xml.createElementNS=s,i.Zondy.xml.getAllTextContent=a,i.Zondy.xml.getAllTextContent_=u,i.Zondy.xml.isDocument=l,i.Zondy.xml.isNode=h,i.Zondy.xml.getAttributeNS=c,i.Zondy.xml.parse=f,i.Zondy.xml.makeArrayExtender=p,i.Zondy.xml.makeArrayPusher=d,i.Zondy.xml.makeReplacer=y,i.Zondy.xml.makeObjectPropertyPusher=g,i.Zondy.xml.makeObjectPropertySetter=v,i.Zondy.xml.makeChildAppender=m,i.Zondy.xml.makeArraySerializer=_,i.Zondy.xml.makeSimpleNodeFactory=b,i.Zondy.xml.OBJECT_PROPERTY_NODE_FACTORY=x,i.Zondy.xml.makeSequence=w,i.Zondy.xml.makeStructureNS=S,i.Zondy.xml.parseNode=P,i.Zondy.xml.pushParseAndPop=C,i.Zondy.xml.serialize=T,i.Zondy.xml.applyTransform=O},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoFeatureThemeLayer=void 0;var i=n(0),r=(n(2),n(39)),o=n(13),s=n(192),a=n(47),u=n(19),l=r.ThemeLayer.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){r.ThemeLayer.prototype.initialize.call(this,t,e),window.L.Util.setOptions(this,e);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(t){var e=this;if(e.fire("beforefeaturesadded",{features:t}),t instanceof a.FeatureSet){var n=null,i=t.AttStruct,r=t.SFEleArray;if(null!=r&&r.length>0)for(var o=0;o<r.length;o++){var s=r[o];if(null!=s.AttValue&&s.AttValue.length>0){n={};for(var u=0;u<s.AttValue.length;u++)n[i.FldName[u]]=s.AttValue[u];n.FID=s.FID}s.attributes=n,e.features.push(s)}}e.isCustomSetMaxCacheCount||(e.maxCacheCount=5*e.features.length),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),r.ThemeLayer.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),r.ThemeLayer.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),i=null;if(n&&n.refDataID&&(i=n.refDataID),t&&t instanceof window.L.LatLngBounds){var r=this._map.options.crs;t=window.L.bounds(r.project(t.getSouthWest()),r.project(t.getNorthEast())),t=new u.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}e.renderer.clearAll();for(var o=e.features,s=e.cache,a=e.cacheFields,l=e._map.getZoom(),h=e.maxCacheCount,c=0,f=o.length;c<f;c++){var p=o[c],d=p.bound;if(!t||t.intersectsBounds(d)){var y=p.FID+"_zoom_"+l.toString();if(s[y])s[y].updateAndAddShapes();else{var g=e.createThematicFeature(o[c]);if(!(g.getShapesCount()<1)&&(s[y]=g,a.push(y),a.length>h)){var v=a[0];a.splice(0,1),delete s[v]}}}}if(e.renderer.render(),i&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(i);this.renderer.updateHoverShapes(m)}},createThematicFeature:function(t){var e=this,n=e.getStyleByData(t),i={};i.nodesClipPixel=e.options.nodesClipPixel,i.isHoverAble=e.options.isHoverAble,i.isMultiHover=e.options.isMultiHover,i.isClickAble=e.options.isClickAble,i.highlightStyle=o.ShapeFactory.transformStyle(e.highlightStyle);for(var r=new s.ThemeVector(t,e,o.ShapeFactory.transformStyle(n),i),a=0;a<r.shapes.length;a++)e.renderer.addShape(r.shapes[a]);return r},getStyleByData:function(t){},redraw:function(){return this.clearCache(),r.ThemeLayer.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var i=0,r=n.length;i<r;i++){var o=n[i];o.refDataID&&t===o.refDataID&&e.push(o)}return e}});e.GeoFeatureThemeLayer=l,i.Zondy.Map.GeoFeatureThemeLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeLayer=void 0;var i=n(0),r=(n(2),n(1)),o=n(169),s=window.L.Layer.extend({options:{name:null,opacity:1,TFEvents:null},initialize:function(t,e){window.L.Util.setOptions(this,e),this.options.name=t,this.features=[],this.TFEvents=e&&e.TFEvents?e.TFEvents:[],this.levelRenderer=new o.LevelRenderer,this.movingOffset=[0,0]},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},onRemove:function(t){window.L.DomUtil.remove(this.container),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var n=t.getSize();e.container.style.width=n.x+"px",e.container.style.height=n.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=window.L.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update()}else t.removeLayer(e)},addFeatures:function(t){},redrawThematicFeatures:function(t){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t);for(var e=t.length-1;e>=0;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t&&0!==t.length){if(t===e.features)return e.removeAllFeatures();window.L.Util.isArray(t)||(t=[t]);for(var n=[],i=t.length-1;i>=0;i--){var r=t[i],o=window.L.Util.indexOf(e.features,r);-1!==o?e.features.splice(o,1):n.push(r)}for(var s=[],a=0,u=e.features.length;a<u;a++)r=e.features[a],s.push(r);e.features=[],e.addFeatures(s),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var l=0===n.length;e.fire("featuresremoved",{features:n,succeed:l})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var t=this.features.length,e=new Array(t),n=0;n<t;++n)e[n]=this.features[n];return e},getFeatureBy:function(t,e){var n=null;for(var i in this.features)if(this.features[i][t]===e){n=this.features[i];break}return n},getFeatureById:function(t){return this.getFeatureBy("FID",t)},getFeaturesByAttribute:function(t,e){var n,i=[];for(var r in this.features)(n=this.features[r])&&n.attributes&&n.attributes[t]===e&&i.push(n);return i},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);window.L.DomUtil.setPosition(this.container,e);var n=this;n.renderer&&n.redrawThematicFeatures(t),n.currentMousePosition&&(n.currentMousePosition=window.L.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(t){t!==this.options.opacity&&(isNaN(t)||(this.options.opacity=t,this._updateOpacity()))},redraw:function(){var t=this;return!!t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures(),!0)},on:function(t,e,n){return this.renderer?this.renderer.on(t,e):window.L.Layer.prototype.on.call(this,t,e),this},off:function(t,e,n){return this.renderer?this.renderer.un(t,e):window.L.Layer.prototype.off.call(this,t,e),this},fire:function(t,e,n){return this.renderer&&this.renderer.trigger(t,e),window.L.Layer.prototype.fire.call(this,t,e,n),this},addTFEvents:function(){for(var t=this.TFEvents,e=t.length,n=0;n<e;n++)this.renderer.on(t[n][0],t[n][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;window.L.Util.isArray(t)?e=window.L.point(t[0],t[1]):t instanceof window.L.Point||(e=t instanceof i.Zondy.LonLat?window.L.point(t.lon,t.lat):window.L.point(t.x,t.y));var n=this._map.latLngToContainerPoint(this._map.options.crs.unproject(e));return[n.x,n.y]},_initContainer:function(){var t=this.getPane(),e=this._map.options.zoomAnimation&&window.L.Browser.any3d,n=this.options.name||"themeLayer";n+=" leaflet-layer leaflet-zoom-"+(e?"animated":"hide"),this.container=window.L.DomUtil.create("div",n,t);var i=window.L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.style[i]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());window.L.DomUtil.setTransform?window.L.DomUtil.setTransform(this.container,n,e):this.container.style[window.L.DomUtil.TRANSFORM]=window.L.DomUtil.getTranslateString(n)+" scale("+e+")"},_updateOpacity:function(){var t=this;(0,r.modifyDOMElement)(t.container,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},_reset:function(){var t=this,e=t._map.getBounds();t.update(e);var n=t._map.getSize(),i=this._map.containerPointToLayerPoint([0,0]);window.L.DomUtil.setPosition(this.container,i),parseFloat(t.container.width)!==parseFloat(n.x)&&(t.container.width=n.x+"px"),parseFloat(t.container.height)!==parseFloat(n.y)&&(t.container.height=n.y+"px"),t.redraw()},_resize:function(){var t=this._map.getSize();this.container.style.width=t.x+"px",this.container.style.height=t.y+"px",this.renderer.resize()}});e.ThemeLayer=s,i.Zondy.Map.ThemeLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Eventful=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}return i(t,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,n){var i=this._handlers;return e&&t?(i[t]||(i[t]=[]),i[t].push({h:e,one:!0,ctx:n||this}),this):this}},{key:"bind",value:function(t,e,n){var i=this._handlers;return e&&t?(i[t]||(i[t]=[]),i[t].push({h:e,one:!1,ctx:n||this}),this):this}},{key:"unbind",value:function(t,e){var n=this._handlers;if(!t)return this._handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;n>3&&(e=Array.prototype.slice.call(e,1));for(var i=this._handlers[t],r=i.length,o=0;o<r;){switch(n){case 1:i[o].h.call(i[o].ctx);break;case 2:i[o].h.call(i[o].ctx,e[1]);break;case 3:i[o].h.call(i[o].ctx,e[1],e[2]);break;default:i[o].h.apply(i[o].ctx,e)}i[o].one?(i.splice(o,1),r--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,n=e.length;n>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var i=e[e.length-1],r=this._handlers[t],o=r.length,s=0;s<o;){switch(n){case 1:r[s].h.call(i);break;case 2:r[s].h.call(i,e[1]);break;case 3:r[s].h.call(i,e[1],e[2]);break;default:r[s].h.apply(i,e)}r[s].one?(r.splice(s,1),o--):s++}}return this}}]),t}();e.Eventful=o,r.Zondy.LevelRenderer.Eventful=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.crs=e.CRS=void 0;n(2),n(0);var i=function(t){return t&&t.__esModule?t:{default:t}}(n(205));window.proj4=i.default,window.Zondy.Proj={},window.Zondy.Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},window.Zondy.Proj.Projection=window.L.Class.extend({initialize:function(t,e,n){var i=window.Zondy.Proj._isProj4Obj(t);this._proj=i?t:this._projFromCodeDef(t,e);var r=n;window.L.Util.isArray(n)&&(r=window.L.bounds(n)),this.bounds=i?e:r},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new window.L.Point(e[0],e[1])},unproject:function(t,e){this.bounds&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var n=this._proj.inverse([t.x,t.y]);return new window.L.LatLng(n[1],n[0],e)},_projFromCodeDef:function(t,e){if(e)i.default.defs(t,e);else if(void 0===i.default.defs[t]){var n=t.split(":");if(n.length>3&&(t=n[n.length-3]+":"+n[n.length-1]),void 0===i.default.defs[t])throw"No projection definition for code "+t}return(0,i.default)(t)},getUnits:function(){return this._proj.oProj.units}});var r=window.L.Class.extend({includes:window.L.CRS,options:{transformation:new window.L.Transformation(1,0,-1,0)},initialize:function(t,e){var n,i,r;if(window.Zondy.Proj._isProj4Obj(t)?(n=(i=t).srsCode,e=e||{},this.projection=new window.Zondy.Proj.Projection(i,e.bounds)):(n=t,r=(e=e||{}).def||"",this.projection=new window.Zondy.Proj.Projection(n,r,e.bounds)),window.L.Util.setOptions(this,e),this.code=n,this.transformation=this.options.transformation,this.options.bounds&&(this.options.bounds=window.L.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof window.L.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new window.L.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this._scales=this._toProj4Scales(this.options.scales);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){for(var o=[],s=0;s<this.options.scaleDenominators.length;s++)o[s]=1/this.options.scaleDenominators[s];this._scales=this._toProj4Scales(o)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var a=this.options.resolutions.length-1;a>=0;a--)this.options.resolutions[a]&&(this._scales[a]=1/this.options.resolutions[a])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this.infinite=!this.options.bounds},scale:function(t){var e,n=Math.floor(t);return t===n?this._scales[t]:(e=this._scales[n])+(this._scales[n+1]-e)*(t-n)},zoom:function(t){var e,n,i=this._closestElement(this._scales,t),r=this._scales.indexOf(i);return t===i?r:(n=r+1,void 0===(e=this._scales[n])?1/0:(t-i)/(e-i)+r)},distance:window.L.CRS.Earth.distance,R:window.L.CRS.Earth.R,_closestElement:function(t,e){for(var n,i=t.length;i--;)t[i]<=e&&(void 0===n||n<t[i])&&(n=t[i]);return n},_toProj4Scales:function(t){var e=[];if(!t)return e;for(var n=0;n<t.length;n++){var i=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;e[n]=1/(.0254/(96*t[n])/i)}return e},_getMeterPerMapUnit:function(t){var e=1;return"meter"===t?e=1:"degrees"===t?e=2*Math.PI*6378137/360:"kilometer"===t?e=.001:"inch"===t?e=1/.025399999918:"feet"===t&&(e=.3048),e},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),n=Math.max(e.x,e.y)/256,i=[],r=0;r<23;r++)i[r]=Math.pow(2,r)/n;return i}});e.CRS=r;var o=e.crs=function(t,e){return new r(t,e)};window.Zondy.Proj.CRS=o},function(t,e){var n=Math.PI/2;t.exports=function(t,e,i){var r=t*i,o=.5*t;return r=Math.pow((1-r)/(1+r),o),Math.tan(.5*(n-e))/r}},function(t,e){var n=Math.PI/2;t.exports=function(t,e){for(var i,r,o=.5*t,s=n-2*Math.atan(e),a=0;a<=15;a++)if(i=t*Math.sin(s),s+=r=n-2*Math.atan(e*Math.pow((1-i)/(1+i),o))-s,Math.abs(r)<=1e-10)return s;return-9999}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttStruct=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};e.CAttStruct=o,i.Zondy.Object.CAttStruct=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLineInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!==e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!==e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!==e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!==e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!==e.Yscale?e.Yscale:1};e.CLineInfo=o,i.Zondy.Object.CLineInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGraphicBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=void 0!==e?e:{};(0,o.extend)(this,n),this.GID=void 0!==n.GID&&null!==n.GID?n.GID:0}return i(t,[{key:"setGID",value:function(t){void 0!==t&&null!==t&&(this.GID=t)}}]),t}();e.FeatureGraphicBase=s,r.Zondy.Object.FeatureGraphicBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureSet=void 0;var i=n(0),r=n(1),o=(n(44),n(118)),s=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.TotalCount=void 0!==e.TotalCount&&null!==e.TotalCount?e.TotalCount:0,this.AttStruct=void 0!==e.AttStruct&&null!==e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!==e.SFEleArray?e.SFEleArray:new Array};s.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},s.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},s.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},s.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof o.Feature?e:new o.Feature(this.SFEleArray[t])},s.prototype.getAttType=function(t){var e;return null==this.AttStruct?null:null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},s.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,n=0;n<e;n++)if(this.AttStruct.FldName[n]==t)return n;return null},s.prototype.getAttNameByIndex=function(t){return null==this.AttStruct?null:null==this.AttStruct.FldName?null:this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},e.FeatureSet=s,i.Zondy.Object.FeatureSet=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameter=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(135);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.QueryParameterBase),i(e,[{key:"getParameterURL",value:function(){var t="page="+this.pageIndex.toString();return t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),this.struct&&(t+="&structs="+(0,o.toJSON)(this.struct)),this.where&&(t+="&where="+this.where),this.rule&&(t+="&rule="+(0,o.toJSON)(this.rule)),this.objectIds&&(t+="&objectIds="+this.objectIds),this.orderField&&(t+="&orderField="+this.orderField),void 0!==this.rtnLabel&&(t+="&rtnLabel="+this.rtnLabel),this.fields&&(t+="&fields="+this.fields),void 0!==this.coordPrecision&&(t+="&coordPrecision="+this.coordPrecision),this.isAsc&&(t+="&isAsc="+this.isAsc),this.proj&&(t+="&srsIds="+this.proj),this.guid&&(t+="&guid="+this.guid),t+="&cursorType="+this.cursorType}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!==this.struct&&(t.structs=this.struct.toJSON()),null!==this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!==this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!==this.where&&(t.where=this.where),null!==this.rule&&(t.rule=this.rule.toJSON()),null!==this.orderField&&(t.orderField=this.orderField),null!==this.isAsc&&(t.isAsc=this.isAsc),t.cursorType=this.cursorType,t)}}]),e}();e.QueryParameter=a,r.Zondy.Service.QueryParameter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipBase=void 0;var i=n(0),r=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.desInfo=void 0!==n.desInfo?n.desInfo:null,i.attOptType=void 0!==n.attOptType?n.attOptType:1,i.infoOptType=void 0!==n.infoOptType?n.infoOptType:1,i.overType=void 0!==n.overType?n.overType:3,i.tolerance=void 0!==n.tolerance?n.tolerance:1e-4,i.isCleanNode=void 0!==n.isCleanNode&&n.isCleanNode,i.isLabelPnt=void 0!==n.isLabelPnt&&n.isLabelPnt,i.isValidReg=void 0!==n.isValidReg&&n.isValidReg,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.ClipBase=o,i.Zondy.Service.ClipBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPntInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CPntInfo=o,i.Zondy.Object.Theme.CPntInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformable=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(9);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="Zondy.LevelRenderer.Transformable",this.lookAt=function(){var t=o.SUtil.Util_vector.create();return function(e){this.transform||(this.transform=o.SUtil.Util_matrix.create());var n=this.transform;function i(t){return t>-5e-5&&t<5e-5}o.SUtil.Util_vector.sub(t,e,this.position),i(t[0])&&i(t[1])||(o.SUtil.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())}}()}return i(t,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||o.SUtil.Util_matrix.create();if(o.SUtil.Util_matrix.identity(e),this.needLocalTransform){if(r(this.scale[0])||r(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var n=r(t[0])||r(t[1]);n&&o.SUtil.Util_matrix.translate(e,e,t),o.SUtil.Util_matrix.scale(e,e,this.scale),n&&(t[0]=-t[0],t[1]=-t[1],o.SUtil.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var i=r(t[0])||r(t[1]);i&&o.SUtil.Util_matrix.translate(e,e,t),o.SUtil.Util_matrix.rotate(e,e,this.rotation[0]),i&&(t[0]=-t[0],t[1]=-t[1],o.SUtil.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&o.SUtil.Util_matrix.rotate(e,e,this.rotation);(r(this.position[0])||r(this.position[1]))&&o.SUtil.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?o.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):o.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function r(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],n=this.position,i=this.scale,r=this.rotation;s(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];s(o-1)&&(o=Math.sqrt(o)),n[0]=t[4],n[1]=t[5],i[0]=e,i[1]=o,i[2]=i[3]=0,r[0]=Math.atan2(-t[1]/o,t[0]/e),r[1]=r[2]=0}function s(t){return t>5e-5||t<-5e-5}}}]),t}();e.Transformable=s,r.Zondy.LevelRenderer.Transformable=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curve=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(53);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new o.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}return i(t,[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}},{key:"cubicDerivativeAt",value:function(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}},{key:"cubicRootAt",value:function(t,e,n,i,r,o){var s=i+3*(e-n)-t,a=3*(n-2*e+t),u=3*(e-t),l=t-r,h=a*a-3*s*u,c=a*u-9*s*l,f=u*u-3*a*l,p=0;if(this.isAroundZero(h)&&this.isAroundZero(c))if(this.isAroundZero(a))o[0]=0;else{var d=-u/a;d>=0&&d<=1&&(o[p++]=d)}else{var y=c*c-4*h*f;if(this.isAroundZero(y)){var g=c/h,v=-a/s+g,m=-g/2;v>=0&&v<=1&&(o[p++]=v),m>=0&&m<=1&&(o[p++]=m)}else if(y>0){var _=Math.sqrt(y),b=h*a+1.5*s*(-c+_),x=h*a+1.5*s*(-c-_),w=(-a-((b=b<0?-Math.pow(-b,this.ONE_THIRD):Math.pow(b,this.ONE_THIRD))+(x=x<0?-Math.pow(-x,this.ONE_THIRD):Math.pow(x,this.ONE_THIRD))))/(3*s);w>=0&&w<=1&&(o[p++]=w)}else{var S=(2*h*a-3*s*c)/(2*Math.sqrt(h*h*h)),P=Math.acos(S)/3,C=Math.sqrt(h),T=Math.cos(P),O=(-a-2*C*T)/(3*s),E=(-a+C*(T+this.THREE_SQRT*Math.sin(P)))/(3*s),L=(-a+C*(T-this.THREE_SQRT*Math.sin(P)))/(3*s);O>=0&&O<=1&&(o[p++]=O),E>=0&&E<=1&&(o[p++]=E),L>=0&&L<=1&&(o[p++]=L)}}return p}},{key:"cubicExtrema",value:function(t,e,n,i,r){var o=6*n-12*e+6*t,s=9*e+3*i-3*t-9*n,a=3*e-3*t,u=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(o)){var l=-a/o;l>=0&&l<=1&&(r[u++]=l)}}else{var h=o*o-4*s*a;if(this.isAroundZero(h))r[0]=-o/(2*s);else if(h>0){var c=Math.sqrt(h),f=(-o+c)/(2*s),p=(-o-c)/(2*s);f>=0&&f<=1&&(r[u++]=f),p>=0&&p<=1&&(r[u++]=p)}}return u}},{key:"cubicSubdivide",value:function(t,e,n,i,r,o){var s=(e-t)*r+t,a=(n-e)*r+e,u=(i-n)*r+n,l=(a-s)*r+s,h=(u-a)*r+a,c=(h-l)*r+l;o[0]=t,o[1]=s,o[2]=l,o[3]=c,o[4]=c,o[5]=h,o[6]=u,o[7]=i}},{key:"cubicProjectPoint",value:function(t,e,n,i,r,o,s,a,u,l,h){var c,f=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,g=1/0;f[0]=u,f[1]=l;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(t,n,r,s,v),p[1]=this.cubicAt(e,i,o,a,v);var m=this.vector.distSquare(f,p);m<g&&(c=v,g=m)}g=1/0;for(var _=0;_<32&&!(y<this.EPSILON);_++){var b=c-y,x=c+y;p[0]=this.cubicAt(t,n,r,s,b),p[1]=this.cubicAt(e,i,o,a,b);var w=this.vector.distSquare(p,f);if(b>=0&&w<g)c=b,g=w;else{d[0]=this.cubicAt(t,n,r,s,x),d[1]=this.cubicAt(e,i,o,a,x);var S=this.vector.distSquare(d,f);x<=1&&S<g?(c=x,g=S):y*=.5}}return h&&(h[0]=this.cubicAt(t,n,r,s,c),h[1]=this.cubicAt(e,i,o,a,c)),Math.sqrt(g)}},{key:"quadraticAt",value:function(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}},{key:"quadraticDerivativeAt",value:function(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}},{key:"quadraticRootAt",value:function(t,e,n,i,r){var o=t-2*e+n,s=2*(e-t),a=t-i,u=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(s)){var l=-a/s;l>=0&&l<=1&&(r[u++]=l)}}else{var h=s*s-4*o*a;if(this.isAroundZero(h)){var c=-s/(2*o);c>=0&&c<=1&&(r[u++]=c)}else if(h>0){var f=Math.sqrt(h),p=(-s+f)/(2*o),d=(-s-f)/(2*o);p>=0&&p<=1&&(r[u++]=p),d>=0&&d<=1&&(r[u++]=d)}}return u}},{key:"quadraticExtremum",value:function(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}},{key:"quadraticProjectPoint",value:function(t,e,n,i,r,o,s,a,u){var l,h=this.vector.create(),c=this.vector.create(),f=this.vector.create(),p=.005,d=1/0;h[0]=s,h[1]=a;for(var y=0;y<1;y+=.05){c[0]=this.quadraticAt(t,n,r,y),c[1]=this.quadraticAt(e,i,o,y);var g=this.vector.distSquare(h,c);g<d&&(l=y,d=g)}d=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var m=l-p,_=l+p;c[0]=this.quadraticAt(t,n,r,m),c[1]=this.quadraticAt(e,i,o,m);var b=this.vector.distSquare(c,h);if(m>=0&&b<d)l=m,d=b;else{f[0]=this.quadraticAt(t,n,r,_),f[1]=this.quadraticAt(e,i,o,_);var x=this.vector.distSquare(f,h);_<=1&&x<d?(l=_,d=x):p*=.5}}return u&&(u[0]=this.quadraticAt(t,n,r,l),u[1]=this.quadraticAt(e,i,o,l)),Math.sqrt(d)}}]),t}();e.Curve=s,r.Zondy.LevelRenderer.Tool.Curve=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}return i(t,[{key:"create",value:function(t,e){var n=new(0,this.ArrayCtor)(2);return n[0]=t||0,n[1]=e||0,n}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,n){return t[0]=e,t[1]=n,t}},{key:"add",value:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},{key:"scaleAndAdd",value:function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}},{key:"sub",value:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},{key:"div",value:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},{key:"normalize",value:function(t,e){var n=this.len(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}},{key:"min",value:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},{key:"max",value:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}]),t}();e.Vector=o,r.Zondy.LevelRenderer.Tool.Vector=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.x=isNaN(t)?0:t,i.y=isNaN(n)?0:n,i.r=6,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Point",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Point=s,r.Zondy.Feature.ShapeParameters.Point=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pointList=t,n.holePolygonPointLists=null,n.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Polygon=s,r.Zondy.Feature.ShapeParameters.Polygon=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sector=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n,i,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s,a));return u.x=isNaN(t)?0:t,u.y=isNaN(n)?0:n,u.r=isNaN(i)?0:i,u.startAngle=isNaN(r)?0:r,u.endAngle=isNaN(o)?0:o,u.r0=isNaN(s)?0:s,u.clockWise=a,u.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Sector=s,r.Zondy.Feature.ShapeParameters.Sector=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPolygon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(6),a=n(9);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicpolygon",n.holePolygonPointLists=null,n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Shape),i(e,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),t.save(),this.setContext(t,n),this.setTransform(t);var i=!1;"fill"!==n.brushType&&"both"!==n.brushType&&void 0!==n.brushType||(t.beginPath(),"dashed"===n.lineType||"dotted"===n.lineType||"dot"===n.lineType||"dash"===n.lineType||"dashot"===n.lineType||"longdash"===n.lineType||"longdashdot"===n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),i=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),n.lineWidth>0&&("stroke"===n.brushType||"both"===n.brushType)&&(i||(t.beginPath(),this.buildPath(t,n)),this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)),this.drawText(t,n,this.style);var r=(0,o.cloneObject)(n);if(r.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var s=this.holePolygonPointLists,a=s.length,u=0;u<a;u++){var l=s[u];r.pointList=l,t.globalCompositeOperation="destination-out",i=!1,"fill"!==r.brushType&&"both"!==r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"===r.lineType||"dotted"===r.lineType||"dot"===r.lineType||"dash"===r.lineType||"dashot"===r.lineType||"longdash"===r.lineType||"longdashdot"===r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),i=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"===r.brushType||"both"===r.brushType)?(i||(t.beginPath(),this.buildPath(t,r)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=e.pointList;if(!(i.length<2))if(e.smooth&&"spline"!==e.smooth){var r,o,s,u=a.SUtil.SUtil_smoothBezier(i,e.smooth,!0,e.smoothConstraint,n);t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var l=i.length,h=0;h<l;h++)r=u[2*h],o=u[2*h+1],s=[i[(h+1)%l][0]+n[0],i[(h+1)%l][1]+n[1]],t.bezierCurveTo(r[0],r[1],o[0],o[1],s[0],s[1])}else if("spline"===e.smooth&&(i=a.SUtil.SUtil_smoothSpline(i,!0,null,n)),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,p=f,d=f;"dashed"===e.lineType&&(p*=5,d*=5,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(p=1,d+=f),"dot"===e.lineType&&(d*=4,e.lineCap&&"butt"!==e.lineCap&&(p=1,d+=f)),"dash"===e.lineType&&(p*=4,d*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),"longdash"===e.lineType&&(p*=8,d*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,d+=f)),t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var y=1;y<i.length;y++)a.SUtil.SUtil_dashedLineTo(t,i[y-1][0]+n[0],i[y-1][1]+n[1],i[y][0]+n[0],i[y][1]+n[1],f,[p,d]);a.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],f,[p,d])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var g=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=g;var v=e.lineWidth||1,m=v,_=v,b=v,x=v;"dashot"===e.lineType&&(m*=4,_*=4,x*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,x+=v)),"longdashdot"===e.lineType&&(m*=8,_*=4,x*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,x+=v)),t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var w=1;w<i.length;w++)a.SUtil.SUtil_dashedLineTo(t,i[w-1][0]+n[0],i[w-1][1]+n[1],i[w][0]+n[0],i[w][1]+n[1],v,[m,_,b,x]);a.SUtil.SUtil_dashedLineTo(t,i[i.length-1][0]+n[0],i[i.length-1][1]+n[1],i[0][0]+n[0],i[0][1]+n[1],v,[m,_,b,x])}}else{t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var S=1;S<i.length;S++)t.lineTo(i[S][0]+n[0],i[S][1]+n[1]);t.lineTo(i[0][0]+n[0],i[0][1]+n[1])}}},{key:"getRect",value:function(t,e){var n;if(e?n=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),t.__rect)return t.__rect;for(var i,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,u=t.pointList,l=0,h=u.length;l<h;l++)u[l][0]+n[0]<r&&(r=u[l][0]+n[0]),u[l][0]+n[0]>o&&(o=u[l][0]+n[0]),u[l][1]+n[1]<s&&(s=u[l][1]+n[1]),u[l][1]+n[1]>a&&(a=u[l][1]+n[1]);return i="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-i/2),y:Math.round(s-i/2),width:o-r+i,height:a-s+i},t.__rect}}]),e}();e.SmicPolygon=u,r.Zondy.LevelRenderer.SmicPolygon=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapvLayer=e.MapvLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var r=n(376);var o=e.MapvLayer=i.default.Layer.extend({initialize:function(t,e,n,r){this.map=t,this.dataset=e||{},this.mapvoption=n,r=r||{},this.render=this.render.bind(this),i.default.Util.setOptions(this,r),this._canvas=this._createCanvas(),i.default.stamp(this),this.innerMoveStartEvent=this.moveStartEvent.bind(this),this.innerMoveEndEvent=this.moveEndEvent.bind(this),this.innnerZoomstart=this.zoomStartEvent.bind(this),this.innerViewreset=this.viewresetEvent.bind(this),this.innerResize=this.resizeEvent.bind(this)},addData:function(t,e){this.mapvBaseLayer.addData(t,e)},updateData:function(t,e){this.mapvBaseLayer.updateData(t,e)},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||100;var e=this.map.getSize();t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px";var n=this.devicePixelRatio;return t.getContext("2d").scale(n,n),"2d"==this.mapvoption.context&&t.getContext("2d").scale(n,n),t},onAdd:function(t){var e=this.getPane(),n=i.default.DomUtil.create("div","leaflet-layer",e);n.appendChild(this._canvas),this._container=n,this.mapvBaseLayer=new r.MapvBaseLayer(t,this.dataset,this.mapvoption,this),this.bindEvent(),this.options.tileLoader&&this._initTileLoader(),this._reset(),this.fire("loaded")},bindEvent:function(){var t=this.map;t.on("movestart",this.innerMoveStartEvent),t.on("moveend",this.innerMoveEndEvent),t.on("zoomend",this.innerMoveEndEvent),t.on("zoomstart",this.innnerZoomstart),t.on("viewreset",this.innerViewreset),t.on("resize ",this.innerResize),this.mapvBaseLayer.bindEvent()},unbindEvent:function(){var t=this.map;t.off("movestart",this.innerMoveStartEvent),t.off("moveend",this.innerMoveEndEvent),t.on("zoomend",this.innerMoveEndEvent),t.off("zoomstart",this.innnerZoomstart),t.off("viewreset",this.innerViewreset),t.off("resize ",this.innerResize),this.removeAllData(),this.mapvBaseLayer.unbindEvent()},moveStartEvent:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()},moveEndEvent:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()},zoomStartEvent:function(){this._unvisiable()},viewresetEvent:function(){this._reset(),this._visiable()},resizeEvent:function(){this._reset(),this._visiable()},_animateZoom:function(t){this._animating||(this._animating=!0)},_endZoomAnim:function(){},getCanvas:function(){return this._canvas},getAttribution:function(){return this.options.attribution},draw:function(){return this._reset()},onRemove:function(t){i.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){this._canvas.style.zIndex=t},bringToFront:function(){return this},bringToBack:function(){return this},_reset:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()},_visiable:function(){this.getCanvas().style.display="block"},_unvisiable:function(){this.getCanvas().style.display="none"},_updateOpacity:function(){},_render:function(){this.render()},fixPosition:function(){var t=this.map.getBounds().getNorthWest(),e=this.map.latLngToLayerPoint(t);this.map.latLngToLayerPoint(i.default.latLng(0,0)),this.map.getPixelOrigin();t&&i.default.DomUtil.setPosition(this._canvas,{x:e.x,y:e.y})},resizeCanvas:function(){var t=this.map.getSize(),e=this.getCanvas();e.width=t.x,e.height=t.y,e.style.width=t.x+"px",e.style.height=t.y+"px"},redraw:function(t){this.resizeCanvas(),this.fixPosition(),this.render()},show:function(){this._visiable()},hide:function(){this._unvisiable()},destroy:function(){i.default.DomUtil.remove(this._container),this.unbindEvent(),this.disposeFlag=!0},update:function(t){void 0!=t&&this.mapvBaseLayer.updateData(t.data,t.options)},removeData:function(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)},removeAllData:function(){this.mapvBaseLayer.clearData()},onResize:function(){},render:function(){this.mapvBaseLayer._canvasUpdate()}}),s=e.mapvLayer=function(t,e,n){return new o(t,e,n)};i.default.zondy.MapvLayer=s},function(t,e,n){var i=n(207),r=n(60),o=n(211),s=n(214);function a(t,e){if(!(this instanceof a))return new a(t);e=e||function(t){if(t)throw t};var n=i(t);if("object"==typeof n){var o=s(n),u=a.projections.get(o.projName);u?(r(this,o),r(this,u),this.init(),e(null,this)):e(t)}else e(t)}a.projections=o,a.projections.start(),t.exports=a},function(t,e){t.exports=function(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}},function(t,e){t.exports=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}},function(t,e){t.exports=function(t,e,n,i,r){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}},function(t,e){t.exports=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnyLine=void 0;var i=n(0),r=n(1),o=function(t,e){var n=void 0!==e?e:{};(0,r.extend)(this,n),this.Arcs=void 0!==t&&null!==t?t:null};e.AnyLine=o,i.Zondy.Object.AnyLine=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPointInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Angle=void 0!==e.Angle&&null!==e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!==e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!==e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!==e.SymWidth?e.SymWidth:1};e.CPointInfo=o,i.Zondy.Object.CPointInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegionInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.EndColor=void 0!==e.EndColor&&null!==e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!==e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!==e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!==e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!==e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!==e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!==e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!==e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!==e.PatWidth?e.PatWidth:1};e.CRegionInfo=o,i.Zondy.Object.CRegionInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPoint=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(46),s=n(7);var a=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return void 0!==t&&null!==t&&void 0!==n&&null!==n&&(o.Dot=new s.Point2D(t,n)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),i(e,[{key:"setDot",value:function(t){this.Dot=void 0!==t&&null!==t?t:null}}]),e}();e.GPoint=a,r.Zondy.Object.GPoint=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLine=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(46);n(64);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.Line=void 0!==t&&null!==t?t:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),i(e,[{key:"setLine",value:function(t){this.Line=void 0!==t&&null!==t?t:null}}]),e}();e.GLine=s,r.Zondy.Object.GLine=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRegion=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(46);n(64);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.Rings=void 0!==t&&null!==t&&Array.isArray(t)?t:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.FeatureGraphicBase),i(e,[{key:"setRings",value:function(t){this.Rings=void 0!==t&&null!==t?t:null}}]),e}();e.GRegion=s,r.Zondy.Object.GRegion=s},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=l.length;e;){for(u=l,l=[];++c<e;)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditServiceBase=void 0;var i=n(0),r=n(10),o=n(1);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.guid=void 0!==n.guid?n.guid:(0,o.newGuid)(),i.baseUrl="igs/rest/mrfs",i.f=void 0!==n.f?n.f:"json",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ServiceBase),e}();e.EditServiceBase=s,i.Zondy.Service.EditServiceBase=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureStruct=void 0;var i=n(0),r=n(1),o=function(t){var e=t||{};(0,r.extend)(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};o.prototype.toJSON=function(){return(0,r.toJSON)(this)},e.QueryFeatureStruct=o,i.Zondy.Service.QueryFeatureStruct=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPoint=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="Point",(0,o.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Geometry),i(e,null,[{key:"getPointsCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var i=0;i<t[n].geometry.length;i++)e.push(t[n].geometry[i].coordinates);return e}},{key:"getPointsCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.point(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPoint=l,Zondy.Service.VPoint=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Geometry=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.coordinates=[]}},function(t,e,n){"use strict";n.r(e),n.d(e,"earthRadius",function(){return i}),n.d(e,"factors",function(){return r}),n.d(e,"unitsFactors",function(){return o}),n.d(e,"areaFactors",function(){return s}),n.d(e,"feature",function(){return a}),n.d(e,"geometry",function(){return u}),n.d(e,"point",function(){return l}),n.d(e,"points",function(){return h}),n.d(e,"polygon",function(){return c}),n.d(e,"polygons",function(){return f}),n.d(e,"lineString",function(){return p}),n.d(e,"lineStrings",function(){return d}),n.d(e,"featureCollection",function(){return y}),n.d(e,"multiLineString",function(){return g}),n.d(e,"multiPoint",function(){return v}),n.d(e,"multiPolygon",function(){return m}),n.d(e,"geometryCollection",function(){return _}),n.d(e,"round",function(){return b}),n.d(e,"radiansToLength",function(){return x}),n.d(e,"lengthToRadians",function(){return w}),n.d(e,"lengthToDegrees",function(){return S}),n.d(e,"bearingToAzimuth",function(){return P}),n.d(e,"radiansToDegrees",function(){return C}),n.d(e,"degreesToRadians",function(){return T}),n.d(e,"convertLength",function(){return O}),n.d(e,"convertArea",function(){return E}),n.d(e,"isNumber",function(){return L}),n.d(e,"isObject",function(){return M}),n.d(e,"validateBBox",function(){return I}),n.d(e,"validateId",function(){return N});var i=6371008.8,r={centimeters:100*i,centimetres:100*i,degrees:i/111325,feet:3.28084*i,inches:39.37*i,kilometers:i/1e3,kilometres:i/1e3,meters:i,metres:i,miles:i/1609.344,millimeters:1e3*i,millimetres:1e3*i,nauticalmiles:i/1852,radians:1,yards:i/1.0936},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i,yards:1/1.0936},s={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function u(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return l(e).geometry;case"LineString":return p(e).geometry;case"Polygon":return c(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!L(t[0])||!L(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return l(t,e)}),n)}function c(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return c(t,e)}),n)}function p(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:t},e,n)}function d(t,e,n){return void 0===n&&(n={}),y(t.map(function(t){return p(t,e)}),n)}function y(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),a({type:"MultiLineString",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),a({type:"MultiPoint",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),a({type:"MultiPolygon",coordinates:t},e,n)}function _(t,e,n){return void 0===n&&(n={}),a({type:"GeometryCollection",geometries:t},e,n)}function b(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function x(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function w(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function S(t,e){return C(w(t,e))}function P(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function T(t){return t%360*Math.PI/180}function O(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return x(w(t,e),n)}function E(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=s[e];if(!i)throw new Error("invalid original units");var r=s[n];if(!r)throw new Error("invalid final units");return t/i*r}function L(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function M(t){return!!t&&t.constructor===Object}function I(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!L(t))throw new Error("bbox must only contain numbers")})}function N(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){(function(t){!function(e){"use strict";var n=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},r={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function a(t,e,n){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return v(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return u(t,e)}),n)}function h(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return h(t,e)}),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return f(t,e)}),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function y(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function b(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function x(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function w(t,e){return P(x(t,e))}function S(t){var e=t%360;return e<0&&(e+=360),e}function P(t){return t%(2*Math.PI)*180/Math.PI}function C(t){return t%360*Math.PI/180}function T(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(x(t,e),n)}function O(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=o[e];if(!i)throw new Error("invalid original units");var r=o[n];if(!r)throw new Error("invalid final units");return t/i*r}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function L(t){return!!t&&t.constructor===Object}function M(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!E(t))throw new Error("bbox must only contain numbers")})}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var N=Object.freeze({__proto__:null,earthRadius:n,factors:i,unitsFactors:r,areaFactors:o,feature:s,geometry:a,point:u,points:l,polygon:h,polygons:c,lineString:f,lineStrings:p,featureCollection:d,multiLineString:y,multiPoint:g,multiPolygon:v,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:x,lengthToDegrees:w,bearingToAzimuth:S,radiansToDegrees:P,degreesToRadians:C,convertLength:T,convertArea:O,isNumber:E,isObject:L,validateBBox:M,validateId:I});function A(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function k(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return k(t[0]);throw new Error("coordinates must only contain numbers")}function D(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function j(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function F(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function B(t){return"Feature"===t.type?t.geometry:t}function U(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var G=Object.freeze({__proto__:null,getCoord:A,getCoords:R,containsNumber:k,geojsonType:D,featureOf:j,collectionOf:F,getGeom:B,getType:U});function z(t,e,n){if(null!==t)for(var i,r,o,s,a,u,l,h,c=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){a=(h=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,v,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,v,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-c;r++){if(!1===e(u[i][r],f,v,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(b=0,r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-c;o++){if(!1===e(u[i][r][o],f,v,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===z(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Z(t,e,n,i){var r=n;return z(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)},i),r}function q(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function V(t,e,n){var i=n;return q(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function W(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function H(t,e,n){var i=n;return W(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function X(t){var e=[];return z(t,function(t){e.push(t)}),e}function Y(t,e){var n,i,r,o,s,a,u,l,h,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},h=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function Q(t,e,n){var i=n;return Y(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),i}function J(t,e){Y(t,function(t,n,i,r,o){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var h=t.coordinates[l];if(!1===e(s({type:a,coordinates:h},i),n,l))return!1}})}function K(t,e,n){var i=n;return J(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i}function $(t,e){J(t,function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==z(t,function(o,h,c,p,d){if(void 0===s||n>a||p>u||d>l)return s=o,a=n,u=p,l=d,void(r=0);var y=f([s,o],t.properties);if(!1===e(y,n,i,d,r))return!1;r++,s=o})&&void 0}}})}function tt(t,e,n){var i=n,r=!1;return $(t,function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0}),i}function et(t,e){if(!t)throw new Error("geojson is required");J(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(f(o[s],t.properties),n,i,s))return!1}}})}function nt(t,e,n){var i=n;return et(t,function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)}),i}function it(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),f([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),f([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s-1),f([u[r][s],u[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s-1),f([u[r][o][s],u[r][o][s+1]],a,e)}throw new Error("geojson is invalid")}function rt(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return u(l,a,e);case"MultiPoint":return r<0&&(r=l.length+r),u(l[r],a,e);case"LineString":return s<0&&(s=l.length+s),u(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),u(l[o][s],a,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),u(l[r][s],a,e);case"MultiPolygon":return r<0&&(r=l.length+r),o<0&&(o=l[r].length+o),s<0&&(s=l[r][o].length-s),u(l[r][o][s],a,e)}throw new Error("geojson is invalid")}var ot=Object.freeze({__proto__:null,coordEach:z,coordReduce:Z,propEach:q,propReduce:V,featureEach:W,featureReduce:H,coordAll:X,geomEach:Y,geomReduce:Q,flattenEach:J,flattenReduce:K,segmentEach:$,segmentReduce:tt,lineEach:et,lineReduce:nt,findSegment:it,findPoint:rt});function st(t){var e=[1/0,1/0,-1/0,-1/0];return z(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}st.default=st;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */
var at=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,i,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))ut.call(n,s)&&(r[s]=n[s]);if(at){i=at(n);for(var a=0;a<i.length;a++)lt.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r},ct={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */
function pt(t,e,n){n=n||{};for(var i=Object.keys(ct),r=0;r<i.length;r++){var o=i[r],s=n[o];s=null!=s?s:ct[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.cells.forEach(function(i,r){i.forEach(function(i,o){if(void 0!==i&&5!==(f=i).cval&&10!==f.cval&&!yt(i)){var s=function(t,e,n){var i,r,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],c=h.cval,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][c],p=vt(h,f);s.push([n+p[0],e+p[1]]),p=vt(h,f=l[c]),s.push([n+p[0],e+p[1]]),gt(h);for(var d=n+a[c],y=e+u[c],g=c;d>=0&&y>=0&&y<o&&(d!=n||y!=e)&&void 0!==(h=t[y][d]);){if(0===(c=h.cval)||15===c)return{path:s,info:"mergeable"};f=l[c],i=a[c],r=u[c],5!==c&&10!==c||(5===c?h.flipped?-1===u[g]?(f="left",i=-1,r=0):(f="right",i=1,r=0):-1===a[g]&&(f="bottom",i=0,r=-1):10===c&&(h.flipped?-1===a[g]?(f="top",i=0,r=1):(f="bottom",i=0,r=-1):1===u[g]&&(f="left",i=-1,r=0))),p=vt(h,f),s.push([d+p[0],y+p[1]]),gt(h),d+=i,y+=r,g=c}return{path:s,info:"closed"}}(t.cells,r,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],l=s.path[s.path.length-1][1],h=n-1;h>=0;h--)if(Math.abs(e[h][0][0]-u)<=1e-7&&Math.abs(e[h][0][1]-l)<=1e-7){for(var c=s.path.length-2;c>=0;--c)e[h].unshift(s.path[c]);a=!0;break}a||(e[n++]=s.path)}var f})}),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var s=0;s<i;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],h=t[o][s+1],c=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(h)||isNaN(c))){a|=u>=e?8:0,a|=l>=e?4:0,a|=h>=e?2:0;var f,p,d,y,g=!1;if(5==(a|=c>=e?1:0)||10===a){var v=(u+l+h+c)/4;5===a&&v<e?(a=10,g=!0):10===a&&v<e&&(a=5,g=!0)}0!==a&&15!==a&&(f=p=d=y=.5,1===a?(d=1-dt(e,u,c),p=1-dt(e,h,c)):2===a?(p=dt(e,c,h),y=1-dt(e,l,h)):3===a?(d=1-dt(e,u,c),y=1-dt(e,l,h)):4===a?(f=dt(e,u,l),y=dt(e,h,l)):5===a?(f=dt(e,u,l),y=dt(e,h,l),p=1-dt(e,h,c),d=1-dt(e,u,c)):6===a?(p=dt(e,c,h),f=dt(e,u,l)):7===a?(d=1-dt(e,u,c),f=dt(e,u,l)):8===a?(d=dt(e,c,u),f=1-dt(e,l,u)):9===a?(p=1-dt(e,h,c),f=1-dt(e,l,u)):10===a?(f=1-dt(e,l,u),y=1-dt(e,l,h),p=dt(e,c,h),d=dt(e,c,u)):11===a?(f=1-dt(e,l,u),y=1-dt(e,l,h)):12===a?(d=dt(e,c,u),y=dt(e,h,l)):13===a?(p=1-dt(e,h,c),y=dt(e,h,l)):14===a?(d=dt(e,c,u),p=dt(e,c,h)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:g,top:f,right:y,bottom:p,left:d})}}}return r}(t,e));return"function"==typeof ft.successCallback&&ft.successCallback(a),a}function dt(t,e,n){return(t-e)/(n-e)}function yt(t){return 0===t.cval||15===t.cval}function gt(t){yt(t)||5===t.cval||10===t.cval||(t.cval=15)}function vt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var mt=bt,_t=bt;function bt(t,e,n,i,r){!function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*l/s+h)),Math.min(r,Math.floor(n+(s-a)*l/s+h)),o)}var c=e[n],f=i,p=r;for(xt(e,i,n),o(e[r],c)>0&&xt(e,i,r);f<p;){for(xt(e,f,p),f++,p--;o(e[f],c)<0;)f++;for(;o(e[p],c)>0;)p--}0===o(e[i],c)?xt(e,i,p):xt(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||wt)}function xt(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function wt(t,e){return t<e?-1:t>e?1:0}mt.default=_t;var St=Ct,Pt=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Tt(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Ot(t,e){Et(t,0,t.children.length,e,t)}function Et(t,e,n,i,r){r||(r=Dt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Lt(r,t.leaf?i(o):o);return r}function Lt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Mt(t,e){return t.minX-e.minX}function It(t,e){return t.minY-e.minY}function Nt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function At(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Rt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function kt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jt(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,mt(t,o,e,n,r),s.push(e,o,o,n))}function Ft(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!kt(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],kt(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):Rt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!kt(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],kt(t,s=e.leaf?n(o):o)){if(e.leaf||Rt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Dt([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(r=Tt(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!Rt(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Mt,compareMinY:It,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return Ot(r=Dt(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=Dt([])).leaf=!1,r.height=i;var a,u,l,h,c=Math.ceil(o/s),f=c*Math.ceil(Math.sqrt(s));for(jt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(jt(t,a,l=Math.min(a+f-1,n),c,this.compareMinY),u=a;u<=l;u+=c)h=Math.min(u+c-1,l),r.children.push(this._build(t,u,h,i-1));return Ot(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,l,h,c,f,p;i.push(e),!e.leaf&&i.length-1!==n;){for(h=c=1/0,r=0,o=e.children.length;r<o;r++)u=Nt(s=e.children[r]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<c?(c=l,h=u<h?u:h,a=s):l===c&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),Lt(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=Dt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Ot(n,this.toBBox),Ot(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,l,h,c,f,p,d,y,g;for(u=l=1/0,i=e;i<=n-e;i++)r=Et(t,0,i,this.toBBox),o=Et(t,i,n,this.toBBox),c=r,f=o,p=void 0,d=void 0,y=void 0,g=void 0,p=Math.max(c.minX,f.minX),d=Math.max(c.minY,f.minY),y=Math.min(c.maxX,f.maxX),g=Math.min(c.maxY,f.maxY),s=Math.max(0,y-p)*Math.max(0,g-d),a=Nt(r)+Nt(o),s<u?(u=s,h=i,l=a<l?a:l):s===u&&a<l&&(l=a,h=i);return h},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Mt,r=t.leaf?this.compareMinY:It;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=Et(t,0,e,s),u=Et(t,n-e,n,s),l=At(a)+At(u);for(r=e;r<n-e;r++)o=t.children[r],Lt(a,t.leaf?s(o):o),l+=At(a);for(r=n-e-1;r>=e;r--)o=t.children[r],Lt(u,t.leaf?s(o):o),l+=At(u);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Lt(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ot(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},St.default=Pt;var Bt=function(t,e,n){var i=t*e,r=Ut*t,o=r-(r-t),s=t-o,a=Ut*e,u=a-(a-e),l=e-u,h=s*l-(i-o*u-s*u-o*l);return n?(n[0]=h,n[1]=i,n):[h,i]},Ut=+(Math.pow(2,27)+1),Gt=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,h=Math.abs,c=t[u],f=h(c),p=e[l],d=h(p);f<d?(o=c,(u+=1)<n&&(c=t[u],f=h(c))):(o=p,(l+=1)<i&&(p=e[l],d=h(p))),u<n&&f<d||l>=i?(r=c,(u+=1)<n&&(c=t[u],f=h(c))):(r=p,(l+=1)<i&&(p=e[l],d=h(p)));for(var y,g,v=r+o,m=v-r,_=o-m,b=_,x=v;u<n&&l<i;)f<d?(r=c,(u+=1)<n&&(c=t[u],f=h(c))):(r=p,(l+=1)<i&&(p=e[l],d=h(p))),(_=(o=b)-(m=(v=r+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y;for(;u<n;)(_=(o=b)-(m=(v=(r=c)+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y,(u+=1)<n&&(c=t[u]);for(;l<i;)(_=(o=b)-(m=(v=(r=p)+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y,(l+=1)<i&&(p=e[l]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},zt=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);return n?(n[0]=s+o,n[1]=i,n):[s+o,i]},Zt=function(t,e){var n=t.length;if(1===n){var i=Bt(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Bt(t[0],e,o),o[0]&&(r[a++]=o[0]);for(var u=1;u<n;++u){Bt(t[u],e,s);var l=o[1];zt(l,s[0],o),o[0]&&(r[a++]=o[0]);var h=s[1],c=o[1],f=h+c,p=c-(f-h);o[1]=f,p&&(r[a++]=p)}return o[1]&&(r[a++]=o[1]),0===a&&(r[a++]=0),r.length=a,r},qt=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,h=Math.abs,c=t[u],f=h(c),p=-e[l],d=h(p);f<d?(o=c,(u+=1)<n&&(c=t[u],f=h(c))):(o=p,(l+=1)<i&&(p=-e[l],d=h(p))),u<n&&f<d||l>=i?(r=c,(u+=1)<n&&(c=t[u],f=h(c))):(r=p,(l+=1)<i&&(p=-e[l],d=h(p)));for(var y,g,v=r+o,m=v-r,_=o-m,b=_,x=v;u<n&&l<i;)f<d?(r=c,(u+=1)<n&&(c=t[u],f=h(c))):(r=p,(l+=1)<i&&(p=-e[l],d=h(p))),(_=(o=b)-(m=(v=r+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y;for(;u<n;)(_=(o=b)-(m=(v=(r=c)+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y,(u+=1)<n&&(c=t[u]);for(;l<i;)(_=(o=b)-(m=(v=(r=p)+o)-r))&&(s[a++]=_),b=x-((y=x+v)-(g=y-x))+(v-g),x=y,(l+=1)<i&&(p=-e[l]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Vt=Ft(function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var r=[],o=0;o<t.length;++o)r.push(["scale(",n(i(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return r;var s}function r(t){for(var r=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?r.push.apply(r,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var l=n(r),h=n(o),c="orientation"+t+"Exact",f=["function ",c,"(",a.join(),"){var p=",l,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",c].join("");return new Function("sum","prod","scale","sub",f)(Gt,Bt,Zt,qt)}var o=r(3),s=r(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=r-s;if(r>0){if(s<=0)return a;i=r+s}else{if(!(r<0))return a;if(s>=0)return a;i=-(r+s)}var u=3.3306690738754716e-16*i;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],u=t[1]-i[1],l=e[1]-i[1],h=n[1]-i[1],c=t[2]-i[2],f=e[2]-i[2],p=n[2]-i[2],d=o*h,y=a*l,g=a*u,v=r*h,m=r*l,_=o*u,b=c*(d-y)+f*(g-v)+p*(m-_),x=7.771561172376103e-16*((Math.abs(d)+Math.abs(y))*Math.abs(c)+(Math.abs(g)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>x||-b>x?b:s(t,e,n,i)}];!function(){for(;a.length<=5;)a.push(r(a.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)o.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=a[t.length];return e||(e=a[t.length]=r(t.length)),e.apply(void 0,t)}].concat(a)),i=0;i<=5;++i)t.exports[i]=a[i]}()}),Wt=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort(function(e,n){var i=t[e][0]-t[n][0];return i||t[e][1]-t[n][1]});var o=[r[0],r[1]],s=[r[0],r[1]];for(i=2;i<e;++i){for(var a=r[i],u=t[a],l=o.length;l>1&&Ht(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Ht(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var h=0,c=(i=0,o.length);i<c;++i)n[h++]=o[i];for(var f=s.length-2;f>0;--f)n[h++]=s[f];return n},Ht=Vt[3],Xt=Qt,Yt=Qt;function Qt(t,e){if(!(this instanceof Qt))return new Qt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Jt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Jt(t,e){return t<e?-1:t>e?1:0}Qt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,r)>=0)break;e[t]=a,t=o}e[t]=r}},Xt.default=Yt;var Kt=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],h=e[s][1];u>i!=h>i&&n<(l-a)*(i-u)/(h-u)+a&&(r=!r)}return r},$t=Vt[3],te=ne,ee=ne;function ne(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>i[0]&&(i=s),s[1]<n[1]&&(n=s),s[1]>r[1]&&(r=s)}var a=[e,n,i,r],u=a.slice();for(o=0;o<t.length;o++)Kt(t[o],a)||u.push(t[o]);var l=Wt(u),h=[];for(o=0;o<l.length;o++)h.push(u[l[o]]);return h}(t),o=St(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<r.length;a++){var u=r[a];o.remove(u),i=le(u,i),s.push(i)}var l=St(16);for(a=0;a<s.length;a++)l.insert(ue(s[a]));for(var h=e*e,c=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,y=he(p,d);if(!(y<c)){var g=y/h;(u=ie(o,f.prev.p,p,d,f.next.next.p,g,l))&&Math.min(he(u,p),he(u,d))<=g&&(s.push(f),s.push(le(u,f)),o.remove(u),l.remove(f),l.insert(ue(f)),l.insert(ue(f.next)))}}f=i;var v=[];do{v.push(f.p),f=f.next}while(f!==i);return v.push(f.p),v}function ie(t,e,n,i,r,o,s){for(var a=new Xt(null,re),u=t.data;u;){for(var l=0;l<u.children.length;l++){var h=u.children[l],c=u.leaf?ce(h,n,i):oe(n,i,h);c>o||a.push({node:h,dist:c})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=ce(p,e,n),y=ce(p,i,r);if(f.dist<d&&f.dist<y&&ae(n,p,s)&&ae(i,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function re(t,e){return t.dist-e.dist}function oe(t,e,n){if(se(t,n)||se(e,n))return 0;var i=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=fe(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=fe(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function se(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function ae(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=n.search({minX:a,minY:u,maxX:l,maxY:h}),f=0;f<c.length;f++)if(i=c[f].p,r=c[f].next.p,o=t,i!==(s=e)&&r!==o&&$t(i,r,o)>0!=$t(i,r,s)>0&&$t(o,s,i)>0!=$t(o,s,r)>0)return!1;return!0}function ue(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function le(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function he(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function ce(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function fe(t,e,n,i,r,o,s,a){var u,l,h,c,f=n-t,p=i-e,d=s-r,y=a-o,g=t-r,v=e-o,m=f*f+p*p,_=f*d+p*y,b=d*d+y*y,x=f*g+p*v,w=d*g+y*v,S=m*b-_*_,P=S,C=S;0===S?(l=0,P=1,c=w,C=b):(c=m*w-_*x,(l=_*w-b*x)<0?(l=0,c=w,C=b):l>P&&(l=P,c=w+_,C=b)),c<0?(c=0,-x<0?l=0:-x>m?l=P:(l=-x,P=m)):c>C&&(c=C,-x+_<0?l=0:-x+_>m?l=P:(l=-x+_,P=m));var T=(1-(h=0===c?0:c/C))*r+h*s-((1-(u=0===l?0:l/P))*t+u*n),O=(1-h)*o+h*a-((1-u)*e+u*i);return T*T+O*O}function pe(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(z(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var i=te(n,e.concavity);return i.length>3?h([i]):null}function de(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=A(t),r=B(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(ye(i,a[l][0],n.ignoreBoundary)){for(var h=!1,c=1;c<a[l].length&&!h;)ye(i,a[l][c],!n.ignoreBoundary)&&(h=!0),c++;h||(u=!0)}return u}function ye(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(i=!i)}return i}function ge(t,e){var n=[];return W(t,function(t){var i=!1;Y(e,function(e){de(t,e)&&(i=!0)}),i&&n.push(t)}),d(n)}function ve(t,e,n){void 0===n&&(n={});var i=A(t),r=A(e),o=C(r[1]-i[1]),s=C(r[0]-i[0]),a=C(i[1]),u=C(r[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function me(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(be);for(var e,n,i,r,o,s,a=t.length-1,u=t[a].x,l=t[0].x,h=t[a].y,c=h;a--;)t[a].y<h&&(h=t[a].y),t[a].y>c&&(c=t[a].y);var f,p=l-u,d=c-h,y=p>d?p:d,g=.5*(l+u),v=.5*(c+h),m=[new _e({__sentinel:!0,x:g-20*y,y:v-y},{__sentinel:!0,x:g,y:v+20*y},{__sentinel:!0,x:g+20*y,y:v-y})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,f=m.length;f--;)(p=t[a].x-m[f].x)>0&&p*p>m[f].r?(_.push(m[f]),m.splice(f,1)):p*p+(d=t[a].y-m[f].y)*d>m[f].r||(b.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1));for(xe(b),f=b.length;f;)n=b[--f],e=b[--f],i=t[a],r=n.x-e.x,o=n.y-e.y,s=2*(r*(i.y-n.y)-o*(i.x-n.x)),Math.abs(s)>1e-12&&m.push(new _e(e,n,i))}for(Array.prototype.push.apply(_,m),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map(function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i})).map(function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},h([[e,i,r,e]],o)}))}te.default=ee;var _e=function(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+u*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*h)/c,this.y=(o*h-a*l)/c,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r};function be(t,e){return e.x-t.x}function xe(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}function we(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Se(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Se(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Pe(t);default:throw new Error("unknown GeoJSON type")}}function Se(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach(function(i){var r=e[i];"object"==typeof r?null===r?n[i]=null:Array.isArray(r)?n[i]=r.map(function(t){return t}):n[i]=t(r):n[i]=r}),n):n}(t.properties),e.geometry=Pe(t.geometry),e}function Pe(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Pe(t)}),e):(e.coordinates=function t(e){var n=e;return"object"!=typeof n[0]?n.slice():n.map(function(e){return t(e)})}(t.coordinates),e)}function Ce(t){return t[0].toString()+","+t[1].toString()}function Te(t){return t}function Oe(t,e){var n=function(t){if(null==t)return Te;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,h=new Array(l);for(h[0]=(e+=t[0])*i+o,h[1]=(n+=t[1])*r+s;u<l;)h[u]=t[u],++u;return h}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:i,coordinates:n}}(e)}var Ee=Object.prototype.hasOwnProperty;function Le(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=r;return{set:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l]=o;if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=i,a[l]=o,o},maybeSet:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l];if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=i,a[l]=o,o},get:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l];if(++c>=t)break;h=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}}}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]}var Ie=new ArrayBuffer(16),Ne=new Float64Array(Ie),Ae=new Uint32Array(Ie);function Re(t){Ne[0]=t[0],Ne[1]=t[1];var e=Ae[0]^Ae[1];return 2147483647&(e=e<<5^e>>7^Ae[2]^Ae[3])}function ke(t,e,n,i){De(t,e,n),De(t,e,e+i),De(t,e+i,n)}function De(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function je(t){var e={type:"GeometryCollection",geometries:t.features.map(Fe)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Fe(t){var e,n=Be(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Be(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Be)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ue(t,e){var n=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;function o(t){null!=t&&Ee.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>i&&(i=o),s<n&&(n=s),s>r&&(r=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)o(t[h]);return i>=e&&r>=n?[e,n,i,r]:void 0}(t=function(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?je:"Feature"===n.type?Fe:Be)(n);return i}(t)),i=e>0&&n&&function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=o-i?(n-1)/(o-i):1,u=s-r?(n-1)/(s-r):1;function l(t){return[Math.round((t[0]-i)*a),Math.round((t[1]-r)*u)]}function h(t,e){for(var n,o,s,l,h,c=-1,f=0,p=t.length,d=new Array(p);++c<p;)n=t[c],l=Math.round((n[0]-i)*a),h=Math.round((n[1]-r)*u),l===o&&h===s||(d[f++]=[o=l,s=h]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function c(t){return h(t,2)}function f(t){return h(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Ee.call(y,t.type)&&y[t.type](t)}var y={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var g in t)d(t[g]);return{scale:[1/a,1/u],translate:[i,r]}}(t,n,e),r=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,i=0,r=s.length;i<r;++i)for(e=s[i];e=e.next;)++u;for(i=0,r=a.length;i<r;++i)for(n=a[i];n=n.next;)++u;var l=Le(2*u*1.4,Re,Me),h=t.arcs=[];for(i=0,r=s.length;i<r;++i){e=s[i];do{c(e)}while(e=e.next)}for(i=0,r=a.length;i<r;++i)if((n=a[i]).next)do{c(n)}while(n=n.next);else f(n);function c(t){var e,n,i,r,s,a,u,c;if(i=l.get(e=o[t[0]]))for(u=0,c=i.length;u<c;++u)if(p(r=i[u],t))return t[0]=r[0],void(t[1]=r[1]);if(s=l.get(n=o[t[1]]))for(u=0,c=s.length;u<c;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),h.push(t)}function f(t){var e,n,i,r,s;if(n=l.get(o[t[0]]))for(r=0,s=n.length;r<s;++r){if(y(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(g(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=l.get(e=o[t[0]+v(t)]))for(r=0,s=n.length;r<s;++r){if(y(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(g(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):l.set(e,[t]),h.push(t)}function p(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!Me(o[n],o[i]))return!1;return!0}function d(t,e){var n=t[0],i=e[0],r=t[1],s=e[1];if(n-r!=i-s)return!1;for(;n<=r;++n,--s)if(!Me(o[n],o[s]))return!1;return!0}function y(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var s=v(t),a=v(e),u=0;u<r;++u)if(!Me(o[n+(u+s)%r],o[i+(u+a)%r]))return!1;return!0}function g(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],a=r-n;if(a!==s-i)return!1;for(var u=v(t),l=a-v(e),h=0;h<a;++h)if(!Me(o[n+(h+u)%a],o[s-(h+l)%a]))return!1;return!0}function v(t){for(var e=t[0],n=t[1],i=e,r=i,s=o[i];++i<n;){var a=o[i];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(r=i,s=a)}return r-e}return t}(function(t){var e,n,i,r=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=Le(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,i=o.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],y=d[0],g=d[1];for(i=u[y],r=u[++y],++p,f[i]=1;++y<=g;)b(e,i,i=r,r=u[y]);++p,f[r]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var v=a[e],m=v[0]+1,_=v[1];for(b(e,u[_-1],i=u[m-1],r=u[m]);++m<=_;)b(e,i,i=r,r=u[m])}function b(t,e,n,i){if(l[n]!==t){l[n]=t;var r=h[n];if(r>=0){var o=c[n];r===e&&o===i||r===i&&o===e||(++p,f[n]=1)}else h[n]=e,c[n]=i}}function x(t){return Re(o[t])}function w(t,e){return Me(o[t],o[e])}l=h=c=null;var S,P=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;return{add:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=r;){if(n(u,i))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=r;){if(n(u,i))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*p,Re,Me);for(e=0,n=o.length;e<n;++e)f[S=u[e]]&&P.add(o[S]);return P}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,i=s.length;n<i;++n)for(var u=s[n],l=u[0],h=u[1];++l<h;)r.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,i=a.length;n<i;++n)for(var c=a[n],f=c[0],p=f,d=c[1],y=r.has(o[f]);++p<d;)r.has(o[p])&&(y?(e={0:p,1:c[1]},c[1]=p,c=c.next=e):(ke(o,f,d,d-p),o[d]=o[f],y=!0,p=f));return t}(function(t){var e=-1,n=[],i=[],r=[];function o(t){t&&Ee.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var i=0,o=t.length;i<o;++i)r[++e]=t[i];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)r[++e]=t[n];var s={0:e-o+1,1:e};return i.push(s),s}function l(t){return t.map(u)}for(var h in t)o(t[h]);return{type:"Topology",coordinates:r,lines:n,rings:i,objects:t}}(t))),o=r.coordinates,s=Le(1.4*r.arcs.length,Ge,ze);function a(t){t&&Ee.call(u,t.type)&&u[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete r.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};function l(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function h(t){return t.map(l)}for(var c in t)a(t[c]);return i&&(r.transform=i,r.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],s=0,a=1,u=o.length,l=o[0],h=l[0],c=l[1];++s<u;)i=(l=o[s])[0],r=l[1],i===h&&r===c||(o[a++]=[i-h,r-c],h=i,c=r);1===a&&(o[a++]=[0,0]),o.length=a}return t}(r.arcs)),r}function Ge(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function ze(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}function Ze(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=we(t));var n=[];J(t,function(t){n.push(t.geometry)});var i=Ue({geoms:m(n).geometry});return function(t){return Oe(t,function(t,e){var n={},i=[],r=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(Oe(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),i.forEach(function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,i.push(t))})})})}}),i.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(e){var i,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&r.push(t)})})}),(i=(r=function(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){n[t<0?~t:t]=1}),o.push(r)}}return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)}),e.forEach(function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],u=s[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=u,o=i[u]){delete i[o.start];var l=o===n?n:n.concat(o);i[l.start=n.start]=r[l.end=o.end]=l}else i[n.start]=r[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end];var h=o===n?n:o.concat(n);i[h.start=o.start]=r[h.end=n.end]=h}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=u]=n}),a(r,i),a(i,r),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,r)).length)>1)for(var o,a,u=1,l=s(r[0]);u<i;++u)(o=s(r[u]))>l&&(a=r[0],r[0]=r[u],r[u]=a,l=o);return r}).filter(function(t){return t.length>0})}}.apply(this,arguments))}(i,i.objects.geoms.geometries)}function qe(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=we(t));var i=function(t){var e={};J(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var r=t;switch(i){case"LineString":return function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==U(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=we(t));var i=[],r=nt(t,function(t,e){var n=function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=Ce(i[0]),s=Ce(i[i.length-1]),a=Ce(r[0]),u=Ce(r[r.length-1]);if(o===u)n=r.concat(i.slice(1));else if(a===s)n=i.concat(r.slice(1));else if(o===a)n=i.slice(1).reverse().concat(r);else{if(s!==u)return null;n=i.concat(r.reverse().slice(1))}return f(n)}(t,e);return n||(i.push(t),e)});return r&&i.push(r),i.length?1===i.length?i[0]:y(i.map(function(t){return t.coordinates})):null}(r,e);case"Polygon":return Ze(r,e);default:throw new Error(i+" is not supported")}}function Ve(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var i=U(t),r=[];switch(i){case"LineString":r=We(t);break;case"MultiLineString":case"Polygon":R(t).forEach(function(t){r.push(We(t))});break;case"MultiPolygon":R(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(We(t))}),r.push(e)});break;case"Point":return t;case"MultiPoint":var o={};R(t).forEach(function(t){var e=t.join("-");o.hasOwnProperty(e)||(r.push(t),o[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=r,t):{type:i,coordinates:r}:!0===n?(t.geometry.coordinates=r,t):s({type:i,coordinates:r},t.properties,{bbox:t.bbox,id:t.id})}function We(t){var e=R(t);if(2===e.length&&!He(e[0],e[1]))return e;var n=[],i=e.length-1,r=n.length;n.push(e[0]);for(var o=1;o<i;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(r=n.length)>2&&Xe(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),r=n.length,He(e[0],e[e.length-1])&&r<4)throw new Error("invalid polygon");return Xe(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1),n}function He(t,e){return t[0]===e[0]&&t[1]===e[1]}function Xe(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return 0==(i-o)*h-(r-s)*l&&(Math.abs(l)>=Math.abs(h)?l>0?o<=i&&i<=a:a<=i&&i<=o:h>0?s<=r&&r<=u:u<=r&&r<=s)}function Ye(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return(o=t.x-i)*o+(s=t.y-r)*s}function Qe(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,o){for(var s,a=r,u=n+1;u<i;u++){var l=Ye(e[u],e[n],e[i]);l>a&&(s=u,a=l)}a>r&&(s-n>1&&t(e,n,s,r,o),o.push(e[s]),i-s>1&&t(e,s,i,r,o))}(t,0,n,e,i),i.push(t[n]),i}function Je(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return t=Qe(t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)n=t[l],r=a,o=void 0,s=void 0,o=(i=n).x-r.x,s=i.y-r.y,o*o+s*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,i),i)}function Ke(t,e,n){return Je(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function $e(t,e,n){return t.map(function(t){var i=t.map(function(t){return{x:t[0],y:t[1]}});if(i.length<4)throw new Error("invalid polygon");for(var r=Je(i,e,n).map(function(t){return[t.x,t.y]});!tn(r);)r=Je(i,e-=.01*e,n).map(function(t){return[t.x,t.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function tn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var en=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t}();function nn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,i=e.sharpness||.85,r=[],o=B(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new en({duration:n,points:o,sharpness:i}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&r.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),f(r,e.properties)}function rn(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return h([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function on(t){return rn(st(t))}function sn(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(ve(t.slice(0,2),[i,n])>=ve(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(r-n)/2,n,s+(r-n)/2,r]}function an(t,e,n,i){void 0===i&&(i={});var r=A(t),o=C(r[0]),s=C(r[1]),a=C(n),l=x(e,i.units),h=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return u([P(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(h))),P(h)],i.properties)}function un(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(an(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),h([o],r)}function ln(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=ln(e,t);return n=(n+180)%360}(t,e);var i=A(t),r=A(e),o=C(i[0]),s=C(r[0]),a=C(i[1]),u=C(r[1]),l=Math.sin(s-o)*Math.cos(u),h=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return P(Math.atan2(l,h))}function hn(t,e){void 0===e&&(e={});var n=st(t);return u([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function cn(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return z(t,function(t){n+=t[0],i+=t[1],r++},!0),u([n/r,i/r],e.properties)}function fn(t){var e=[];return"FeatureCollection"===t.type?W(t,function(t){z(t,function(n){e.push(u(n,t.properties))})}):z(t,function(n){e.push(u(n,t.properties))}),d(e)}var pn=yn,dn=yn;function yn(t,e,n){n=n||2;var i,r,o,s,a,u,l,h=e&&e.length,c=h?e[0]*n:t.length,f=gn(t,0,c,n,!0),p=[];if(!f)return p;if(h&&(f=function(t,e,n,i){var r,o,s,a=[];for(r=0,o=e.length;r<o;r++)(s=gn(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(Tn(s));for(a.sort(Sn),r=0;r<a.length;r++)Pn(a[r],n),n=vn(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var d=n;d<c;d+=n)(a=t[d])<i&&(i=a),(u=t[d+1])<r&&(r=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-i,s-r))?1/l:0}return mn(f,p,n,i,r,l),p}function gn(t,e,n,i,r){var o,s;if(r===jn(t,e,n,i)>0)for(o=e;o<n;o+=i)s=Rn(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=Rn(o,t[o],t[o+1],s);return s&&Mn(s,s.next)&&(kn(s),s=s.next),s}function vn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Mn(i,i.next)&&0!==Ln(i.prev,i,i.next))i=i.next;else{if(kn(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function mn(t,e,n,i,r,o,s){if(t){!s&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Cn(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;a>0||u>0&&i;)0!==a&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1)}(r)}(t,i,r,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?bn(t,i,r,o):_n(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),kn(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?mn(t=xn(t,e,n),e,n,i,r,o,2):2===s&&wn(t,e,n,i,r,o):mn(vn(t),e,n,i,r,o,1);break}}}function _n(t){var e=t.prev,n=t,i=t.next;if(Ln(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(On(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ln(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function bn(t,e,n,i){var r=t.prev,o=t,s=t.next;if(Ln(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=Cn(a,u,e,n,i),f=Cn(l,h,e,n,i),p=t.prevZ,d=t.nextZ;p&&p.z>=c&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&On(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ln(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&On(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&On(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Ln(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&On(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Ln(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function xn(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Mn(r,o)&&In(r,i,i.next,o)&&Nn(r,o)&&Nn(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),kn(i),kn(i.next),i=t=o),i=i.next}while(i!==t);return i}function wn(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&En(s,a)){var u=An(s,a);return s=vn(s,s.next),u=vn(u,u.next),mn(s,e,n,i,r,o),void mn(u,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function Sn(t,e){return t.x-e.x}function Pn(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var u,l=n,h=n.x,c=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=h&&r!==i.x&&On(o<c?r:s,o,h,c,o<c?s:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<f||u===f&&i.x>n.x)&&Nn(i,t)&&(n=i,f=u),i=i.next;return n}(t,e)){var n=An(e,t);vn(n,n.next)}}function Cn(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Tn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function On(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function En(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&In(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Nn(t,e)&&Nn(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function Ln(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Mn(t,e){return t.x===e.x&&t.y===e.y}function In(t,e,n,i){return!!(Mn(t,e)&&Mn(n,i)||Mn(t,i)&&Mn(n,e))||Ln(t,e,n)>0!=Ln(t,e,i)>0&&Ln(n,i,t)>0!=Ln(n,i,e)>0}function Nn(t,e){return Ln(t.prev,t,t.next)<0?Ln(t,e,t.next)>=0&&Ln(t,t.prev,e)>=0:Ln(t,e,t.prev)<0||Ln(t,t.next,e)<0}function An(t,e){var n=new Dn(t.i,t.x,t.y),i=new Dn(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Rn(t,e,n,i){var r=new Dn(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function kn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Dn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jn(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}function Fn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=pn(e.vertices,e.holes,2),i=[],r=[];n.forEach(function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<r.length;o+=3){var s=r.slice(o,o+3);s.push(r[o]),i.push(h([s]))}return i}function Bn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0,r=0;return W(e,function(e,n){var o=ve(t,e);o<i&&(r=n,i=o)}),(n=we(e.features[r])).properties.featureIndex=r,n.properties.distanceToPoint=i,n}function Un(t){if(!t)throw new Error("geojson is required");var e=[];return J(t,function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=R(i);break;case"LineString":n=[R(i)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,i){var r=f([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}yn.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(jn(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(jn(t,l,h,n))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,p=i[a+1]*n,d=i[a+2]*n;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},yn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},pn.default=dn;var Gn=Ft(function(t,e){function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function c(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:3.86e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return i(t,e)}),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return r(t,e)}),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return o(t,e)}),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return f(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(c(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!p(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function zn(t,e,n){if(null!==t)for(var i,r,o,s,a,u,l,h,c=0,f=0,p=t.type,d="FeatureCollection"===p,y="Feature"===p,g=d?t.features.length:1,v=0;v<g;v++){a=(h=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,f,v,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,v,_,b))return!1;f++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-c;r++){if(!1===e(u[i][r],f,v,_,b))return!1;f++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(b=0,r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-c;o++){if(!1===e(u[i][r][o],f,v,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===zn(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function qn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Vn(t,e){var n,i,r,o,s,a,u,l,h,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(n=0;n<y;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},h=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function Wn(t,e){Vn(t,function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Gn.feature(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Gn.feature(l,i),n,u))return!1}})}function Hn(t,e){Wn(t,function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==zn(t,function(o,h,c,f,p){if(void 0===s||n>a||f>u||p>l)return s=o,a=n,u=f,l=p,void(r=0);var d=Gn.lineString([s,o],t.properties);if(!1===e(d,n,i,p,r))return!1;r++,s=o})&&void 0}}})}function Xn(t,e){if(!t)throw new Error("geojson is required");Wn(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Gn.lineString(o[s],t.properties),n,i,s))return!1}}})}var Yn=zn,Qn=Zn,Jn=qn,Kn=Vn,$n=Wn,ti=Hn,ei=Xn,ni=Object.defineProperty({coordEach:Yn,coordReduce:function(t,e,n,i){var r=n;return zn(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)},i),r},propEach:Qn,propReduce:function(t,e,n){var i=n;return Zn(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i},featureEach:Jn,featureReduce:function(t,e,n){var i=n;return qn(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i},coordAll:function(t){var e=[];return zn(t,function(t){e.push(t)}),e},geomEach:Kn,geomReduce:function(t,e,n){var i=n;return Vn(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),i},flattenEach:$n,flattenReduce:function(t,e,n){var i=n;return Wn(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i},segmentEach:ti,segmentReduce:function(t,e,n){var i=n,r=!1;return Hn(t,function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0}),i},lineEach:ei,lineReduce:function(t,e,n){var i=n;return Xn(t,function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)}),i},findSegment:function(t,e){if(e=e||{},!Gn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Gn.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Gn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s-1),Gn.lineString([u[r][s],u[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s-1),Gn.lineString([u[r][o][s],u[r][o][s+1]],a,e)}throw new Error("geojson is invalid")},findPoint:function(t,e){if(e=e||{},!Gn.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Gn.point(u,a,e);case"MultiPoint":return r<0&&(r=u.length+r),Gn.point(u[r],a,e);case"LineString":return s<0&&(s=u.length+s),Gn.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Gn.point(u[o][s],a,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s),Gn.point(u[r][s],a,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s),Gn.point(u[r][o][s],a,e)}throw new Error("geojson is invalid")}},"__esModule",{value:!0});function ii(t){var e=[1/0,1/0,-1/0,-1/0];return ni.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}ii.default=ii;var ri=ii,oi=Object.defineProperty({default:ri},"__esModule",{value:!0}).default,si=ni.featureEach,ai=(ni.coordEach,Gn.polygon,Gn.featureCollection);function ui(t){var e=St(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:oi(t),St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:oi(t),e.push(t)}):si(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:oi(t),e.push(t)}),St.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:oi(t),St.prototype.remove.call(this,t,e)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){var e=St.prototype.search.call(this,this.toBBox(t));return ai(e)},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=St.prototype.all.call(this);return ai(t)},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=oi(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=oi(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var li=ui,hi=ui;function ci(t,e){var n={},i=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=fi(t,e);return r&&i.push(r),d(i)}var o=li();return o.load(Un(e)),W(Un(t),function(t){W(o.search(t),function(e){var r=fi(t,e);if(r){var o=R(r).join(",");n[o]||(n[o]=!0,i.push(r))}})}),d(i)}function fi(t,e){var n=R(t),i=R(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],l=i[0][0],h=i[0][1],c=i[1][0],f=i[1][1],p=(f-h)*(s-r)-(c-l)*(a-o),d=(c-l)*(o-h)-(f-h)*(r-l),y=(s-r)*(o-h)-(a-o)*(r-l);if(0===p)return null;var g=d/p,v=y/p;return g>=0&&g<=1&&v>=0&&v<=1?u([r+g*(s-r),o+g*(a-o)]):null}function pi(t,e,n){void 0===n&&(n={});var i=u([1/0,1/0],{dist:1/0}),r=0;return J(t,function(t){for(var o=R(t),s=0;s<o.length-1;s++){var a=u(o[s]);a.properties.dist=ve(e,a,n);var l=u(o[s+1]);l.properties.dist=ve(e,l,n);var h=ve(a,l,n),c=Math.max(a.properties.dist,l.properties.dist),p=ln(a,l),d=an(e,c,p+90,n),y=an(e,c,p-90,n),g=ci(f([d.geometry.coordinates,y.geometry.coordinates]),f([a.geometry.coordinates,l.geometry.coordinates])),v=null;g.features.length>0&&((v=g.features[0]).properties.dist=ve(e,v,n),v.properties.location=r+ve(a,v,n)),a.properties.dist<i.properties.dist&&((i=a).properties.index=s,i.properties.location=r),l.properties.dist<i.properties.dist&&((i=l).properties.index=s+1,i.properties.location=r+h),v&&v.properties.dist<i.properties.dist&&((i=v).properties.index=s),r+=h}}),i}function di(t,e,i){void 0===i&&(i={});var r=A(t),o=A(e);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,T(function(t,e,i){var r=i=void 0===i?n:Number(i),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+h*h*u*u)*r}(r,o),"meters",i.units)}function yi(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=s(t):j(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=s(e):j(e,"LineString","line");var i=1/0,r=t.geometry.coordinates;return $(e,function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,i){var r=[n[0]-e[0],n[1]-e[1]],o=gi([t[0]-e[0],t[1]-e[1]],r);if(o<=0)return vi(t,e,{method:i.method,units:"degrees"});var s=gi(r,r);if(s<=o)return vi(t,n,{method:i.method,units:"degrees"});var a=o/s,u=[e[0]+a*r[0],e[1]+a*r[1]];return vi(t,u,{method:i.method,units:"degrees"})}(r,e,o,n);s<i&&(i=s)}),T(i,"degrees",n.units)}function gi(t,e){return t[0]*e[0]+t[1]*e[1]}function vi(t,e,n){return"planar"===n.method?di(t,e,n):ve(t,e,n)}function mi(t,e,n,i,r,o,s,a){var u,l,h,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(l=e-o)-(i-e)*(h=t-r),l=((s-r)*l-(a-o)*h)/u,h=c/u,f.x=t+l*(n-t),f.y=e+l*(i-e),l>=0&&l<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function _i(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([s(t)]):d([t]):t}(t),n=hn(e),i=!1,r=0;!i&&r<e.features.length;){var o,a=e.features[r].geometry,l=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(i=!0);else if("MultiPoint"===a.type){var h=!1;for(o=0;!h&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(i=!0,h=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)bi(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,i=!0),o++;else if("MultiLineString"===a.type)for(var c=0;c<a.coordinates.length;){l=!1,o=0;for(var f=a.coordinates[c];!l&&o<f.length-1;)bi(n.geometry.coordinates[0],n.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(l=!0,i=!0),o++;c++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||de(n,a)&&(i=!0);r++}if(i)return n;var p=d([]);for(r=0;r<e.features.length;r++)p.features=p.features.concat(fn(e.features[r]).features);return u(Bn(n,p).geometry.coordinates)}function bi(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}li.default=hi;var xi=6378137;function wi(t){return Q(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Si(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Si(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function Si(t){var e=0;if(t&&t.length>0){e+=Math.abs(Pi(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Pi(t[n]))}return e}function Pi(t){var e,n,i,r,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,r=u-1,o=0):s===u-1?(i=u-1,r=0,o=1):(i=s,r=s+1,o=s+2),e=t[i],n=t[r],a+=(Ci(t[o][0])-Ci(e[0]))*Math.sin(Ci(n[1]));a=a*xi*xi/2}return a}function Ci(t){return t*Math.PI/180}function Ti(t,e){return void 0===e&&(e={}),tt(t,function(t,n){var i=n.geometry.coordinates;return t+ve(i[0],i[1],e)},0)}function Oi(t,e,n,i){if(!L(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var s,a,u,l=r.length,h=0,c=0;c<r.length&&!(e>=h&&c===r.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(r[c]),f(o);a=ln(r[c],r[c-1])-180,u=an(r[c],s,a,i),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=ln(r[c],r[c-1])-180,u=an(r[c],s,a,i),o.push(u.geometry.coordinates),f(o)):(o.push(r[c]),f(o));if(h>=e&&o.push(r[c]),c===r.length-1)return f(o);h+=ve(r[c],r[c+1],i)}if(h<e&&r.length===l)throw new Error("Start position is beyond line");var p=r[r.length-1];return f([p,p])}function Ei(t,e,n){void 0===n&&(n={});for(var i=A(t),r=R(e),o=0;o<r.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),Li(r[o],r[o+1],i,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Li(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,f=h-u,p=(n[0]-a)*f-(n[1]-u)*c;if(null!==r){if(Math.abs(p)>r)return!1}else if(0!==p)return!1;return i?"start"===i?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=h:h<=s&&s<u:"end"===i?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<h:h<s&&s<=u:"both"===i&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=h:h<=s&&s<=u}function Mi(t,e){var n=B(t),i=B(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(Ni(e.coordinates[n],t.coordinates)){i=!0;break}return i}(n,i);case"LineString":return Ei(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return de(n,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)Ni(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(n,i);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!Ei(t.coordinates[i],e))return!1;n||(n=Ei(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=de(t.coordinates[1],e))){n=!1;break}i=de(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Ei(t.coordinates[n],e))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){var n=st(e),i=st(t);if(!Ii(n,i))return!1;for(var r=!1,o=0;o<t.coordinates.length-1;o++){if(!de(t.coordinates[o],e))return!1;r||(r=de(t.coordinates[o],e,{ignoreBoundary:!0})),r||(r=de(Ai(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0}))}return r}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=st(t);if(!Ii(st(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!de(t.coordinates[0][i],e))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function Ii(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Ni(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ai(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Ri(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var i=[],r=t[0],o=t[1],s=t[2],a=t[3],l=e/ve([r,o],[s,o],n)*(s-r),h=e/ve([r,o],[r,a],n)*(a-o),c=s-r,f=a-o,p=Math.floor(c/l),y=(f-Math.floor(f/h)*h)/2,g=r+(c-p*l)/2;g<=s;){for(var v=o+y;v<=a;){var m=u([g,v],n.properties);n.mask?Mi(m,n.mask)&&i.push(m):i.push(m),v+=h}g+=l}return d(i)}function ki(t,e){void 0===e&&(e={});var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return z(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)}),t}function Di(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Di(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}var ji=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},Fi=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Bi(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ui(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Bi([t[zi(e-1,t.length-1)],t[e],t[zi(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function Gi(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Gi(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function zi(t,e){return(t%e+e)%e}var Zi=Math.PI/180,qi=180/Math.PI,Vi=function(t,e){this.lon=t,this.lat=e,this.x=Zi*t,this.y=Zi*e};Vi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Vi.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Vi(e,t)};var Wi=function(){this.coords=[],this.length=0};Wi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Hi=function(t){this.properties=t||{},this.geometries=[]};Hi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Hi.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Xi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Vi(t.x,t.y),this.end=new Vi(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Yi(t,e){var n=[],i=li();return J(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var r=i.search(e);if(r.features.length){var o=Ji(e,r);n=n.filter(function(t){return t.id!==o.id}),i.remove(o),W(Qi(o,e),function(t){n.push(t),i.insert(t)})}}else(n=Qi(t,e).features).forEach(function(t){t.bbox||(t.bbox=sn(st(t)))}),i.load(d(n))}),d(n)}function Qi(t,e){var n=[],i=R(t)[0],r=R(t)[t.geometry.coordinates.length-1];if(Ki(i,A(e))||Ki(r,A(e)))return d([t]);var o=li(),s=Un(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var u=Ji(e,a),l=H(s,function(t,i,r){var o=R(i)[1],s=A(e);return r===u.id?(t.push(s),n.push(f(t)),Ki(s,o)?[s]:[s,o]):(t.push(o),t)},[i]);return l.length>1&&n.push(f(l)),d(n)}function Ji(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return W(e,function(e){var r=pi(e,t).properties.dist;r<i&&(n=e,i=r)}),n}function Ki(t,e){return t[0]===e[0]&&t[1]===e[1]}function $i(t,e,n,i,r){void 0===r&&(r={});var o=r.steps||64,s=tr(n),a=tr(i),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return f(un(t,e,r).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,c=l,p=[],d=0;c<h;)p.push(an(t,e,c,r).geometry.coordinates),c=l+360*++d/o;return c>h&&p.push(an(t,e,h,r).geometry.coordinates),f(p,u)}function tr(t){var e=t%360;return e<0&&(e+=360),e}function er(t,e){void 0===e&&(e={});var n=B(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return nr(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=B(t).coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},r=[];return n.forEach(function(t){r.push(ir(t,i))}),d(r)}(n,e);default:throw new Error("invalid poly")}}function nr(t,e){return void 0===e&&(e={}),ir(B(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function ir(t,e){return t.length>1?y(t,e):f(t[0],e)}function rr(t,e){var n,i,r;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(i=e.orderCoords)||void 0===i||i;switch(null!==(r=e.mutate)&&void 0!==r&&r||(t=we(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach(function(t){u.push(R(or(t,{},s,a)))}),v(u,o);default:return or(t,o,s,a)}}function or(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var r=B(t),o=r.coordinates,s=r.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=sr(o)),h([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(n&&(t=sr(t)),i){var e=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.abs(e-i)*Math.abs(n-r)}(st(f(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),h(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function sr(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}function ar(t,e){var n,i,r,o,s,a,u;for(i=1;i<=8;i*=2){for(n=[],o=!(lr(r=t[t.length-1],e)&i),s=0;s<t.length;s++)(u=!(lr(a=t[s],e)&i))!==o&&n.push(ur(r,a,i,e)),u&&n.push(a),r=a,o=u;if(!(t=n).length)break}return n}function ur(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function lr(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function hr(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=ar(r[i],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}Xi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=qi*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[qi*Math.atan2(r,i),s]},Xi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,f=360-l,p=1;p<n.length;++p){var d=n[p-1][0],y=n[p][0],g=Math.abs(y-d);g>f&&(y>h&&d<c||d>h&&y<c)?a=!0:g>u&&(u=g)}var v=[];if(a&&u<l){var m=[];v.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var x=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),S=parseFloat(n[_][0]),P=parseFloat(n[_][1]);if(x>-180&&x<c&&180===S&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<c){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x>h&&x<180&&-180===S&&_+1<n.length&&n[_-1][0]>h&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x<c&&S>h){var C=x;x=S,S=C;var T=w;w=P,P=T}if(x>h&&S<c&&(S+=360),x<=180&&S>=180&&x<S){var O=(180-x)/(S-x),E=O*P+(1-O)*w;m.push([n[_-1][0]>h?180:-180,E]),(m=[]).push([n[_-1][0]>h?-180:180,E]),v.push(m)}else m=[],v.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var L=[];v.push(L);for(var M=0;M<n.length;++M)L.push([n[M][0],n[M][1]])}for(var I=new Hi(this.properties),N=0;N<v.length;++N){var A=new Wi;I.geometries.push(A);for(var R=v[N],k=0;k<R.length;++k)A.move_to(R[k])}return I};var cr=Ft(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),fr=Ft(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r}),pr=Ft(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(i(t)||i(o))return!1;if(t.prototype!==o.prototype)return!1;if(fr(t))return!!fr(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(r(t)){if(!r(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=cr(t),h=cr(o)}catch(t){return!1}if(l.length!=h.length)return!1;for(l.sort(),h.sort(),a=l.length-1;a>=0;a--)if(l[a]!=h[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function i(t){return null==t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}});function dr(t,e,n){if(void 0===n&&(n={}),!L(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],s=li(),a=Un(t);return s.load(a),$(e,function(t){var e=!1;t&&(W(s.search(t),function(n){if(!1===e){var o=R(t).sort(),s=R(n).sort();pr(o,s)||(0===r?Ei(o[0],n)&&Ei(o[1],n):pi(n,o[0]).properties.dist<=r&&pi(n,o[1]).properties.dist<=r)?(e=!0,i=i?yr(i,t):t):(0===r?Ei(s[0],t)&&Ei(s[1],t):pi(t,s[0]).properties.dist<=r&&pi(t,s[1]).properties.dist<=r)&&(i=i?yr(i,n):n)}}),!1===e&&i&&(o.push(i),i=void 0))}),i&&o.push(i),d(o)}function yr(t,e){var n=R(e),i=R(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return pr(n[0],r)?s.unshift(n[1]):pr(n[0],o)?s.push(n[1]):pr(n[1],r)?s.unshift(n[0]):pr(n[1],o)&&s.push(n[0]),t}function gr(t){var e=t%360;return e<0&&(e+=360),e}function vr(t,e,n){var i;return void 0===n&&(n={}),(i=n.final?mr(A(e),A(t)):mr(A(t),A(e)))>180?-(360-i):i}function mr(t,e){var n=C(t[1]),i=C(e[1]),r=C(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(P(Math.atan2(r,o))+360)%360}function _r(t,e,i,r){void 0===r&&(r={});var o=e<0,s=T(Math.abs(e),r.units,"meters");o&&(s=-Math.abs(s));var a=A(t),l=function(t,e,i,r){r=void 0===r?n:Number(r);var o=e/r,s=t[0]*Math.PI/180,a=C(t[1]),u=C(i),l=o*Math.cos(u),h=a+l;Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h);var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(c)>1e-11?l/c:Math.cos(a),p=o*Math.sin(u)/f;return[(180*(s+p)/Math.PI+540)%360-180,180*h/Math.PI]}(a,s,i);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,u(l,r.properties)}function br(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),i=wr(a,u,e),n<=0&&i>0?wr(e,a,r)<0||(r=a):n>0&&i<=0&&(xr(e,a,o)||(o=a)),n=i}return[r,o]}function xr(t,e,n){return wr(t,e,n)>0}function wr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Sr(t){for(var e,n,i=R(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function Pr(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Y(t,function(t){Pr(t,e)}),t;case"LineString":return Cr(R(t),e),t;case"Polygon":return Tr(R(t),e),t;case"MultiLineString":return R(t).forEach(function(t){Cr(t,e)}),t;case"MultiPolygon":return R(t).forEach(function(t){Tr(t,e)}),t;case"Point":case"MultiPoint":return t}}function Cr(t,e){Sr(t)===e&&t.reverse()}function Tr(t,e){Sr(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Sr(t[n])===e&&t[n].reverse()}var Or={successCallback:null,verbose:!1,polygons:!1},Er={};function Lr(t,e,n,i){i=i||{};for(var r=Object.keys(Or),o=0;o<r.length;o++){var s=r[o],a=i[s];a=null!=a?a:Or[s],Er[s]=a}Er.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},s=e+Math.abs(n),a=0;a<i;++a){o.cells[a]=[];for(var u=0;u<r;++u){var l=0,h=t[a+1][u],c=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(h)||isNaN(c)||isNaN(f)||isNaN(p))){l|=h<e?0:h>s?128:64,l|=c<e?0:c>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),y=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var g=(h+c+f+p)/4;y=g>s?2:g<e?0:1,34===l?1===y?l=35:0===y&&(l=136):136===l?1===y?(l=35,y=4):0===y&&(l=34):17===l?1===y?(l=155,y=4):0===y&&(l=153):68===l?1===y?(l=103,y=4):0===y&&(l=102):153===l?1===y&&(l=155):102===l?1===y&&(l=103):152===l?y<2&&(l=156,y=1):137===l?y<2&&(l=139,y=1):98===l?y<2&&(l=99,y=1):38===l?y<2&&(l=39,y=1):18===l?y>0?(l=156,y=4):l=152:33===l?y>0?(l=139,y=4):l=137:72===l?y>0?(l=99,y=4):l=98:132===l&&(y>0?(l=39,y=4):l=38)}if(0!=l&&170!=l){var v,m,_,b,x,w,S,P;v=m=_=b=x=w=S=P=.5;var C=[];1===l?(_=1-bo(e,f,p),P=1-bo(e,h,p),C.push(po[l])):169===l?(_=bo(s,p,f),P=bo(s,p,h),C.push(po[l])):4===l?(w=1-bo(e,c,f),b=bo(e,p,f),C.push(co[l])):166===l?(w=bo(s,f,c),b=1-bo(s,f,p),C.push(co[l])):16===l?(x=bo(e,f,c),m=bo(e,h,c),C.push(ho[l])):154===l?(x=1-bo(s,c,f),m=1-bo(s,c,h),C.push(ho[l])):64===l?(S=bo(e,p,h),v=1-bo(e,c,h),C.push(go[l])):106===l?(S=1-bo(s,h,p),v=bo(s,h,c),C.push(go[l])):168===l?(b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),C.push(fo[l]),C.push(po[l])):2===l?(b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),C.push(fo[l]),C.push(po[l])):162===l?(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),C.push(fo[l]),C.push(po[l])):8===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),C.push(ho[l]),C.push(co[l])):138===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(ho[l]),C.push(co[l])):32===l?(x=bo(s,f,c),w=bo(e,f,c),v=bo(e,h,c),m=bo(s,h,c),C.push(ho[l]),C.push(co[l])):42===l?(P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c),C.push(yo[l]),C.push(go[l])):128===l&&(P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(yo[l]),C.push(go[l])),5===l?(w=1-bo(e,c,f),P=1-bo(e,h,p),C.push(co[l])):165===l?(w=bo(s,f,c),P=bo(s,p,h),C.push(co[l])):20===l?(b=bo(e,p,f),m=bo(e,h,c),C.push(fo[l])):150===l?(b=1-bo(s,f,p),m=1-bo(s,c,h),C.push(fo[l])):80===l?(x=bo(e,f,c),S=bo(e,p,h),C.push(ho[l])):90===l?(x=1-bo(s,c,f),S=1-bo(s,h,p),C.push(ho[l])):65===l?(_=1-bo(e,f,p),v=1-bo(e,c,h),C.push(po[l])):105===l?(_=bo(s,p,f),v=bo(s,h,c),C.push(po[l])):160===l?(x=bo(s,f,c),w=bo(e,f,c),P=bo(e,p,h),S=bo(s,p,h),C.push(ho[l]),C.push(co[l])):10===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),P=1-bo(s,h,p),S=1-bo(e,h,p),C.push(ho[l]),C.push(co[l])):130===l?(b=1-bo(e,f,p),_=1-bo(s,f,p),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(fo[l]),C.push(po[l])):40===l?(b=bo(s,p,f),_=bo(e,p,f),v=bo(e,h,c),m=bo(s,h,c),C.push(fo[l]),C.push(po[l])):101===l?(w=bo(s,f,c),v=bo(s,h,c),C.push(co[l])):69===l?(w=1-bo(e,c,f),v=1-bo(e,c,h),C.push(co[l])):149===l?(P=bo(s,p,h),m=1-bo(s,c,h),C.push(yo[l])):21===l?(P=1-bo(e,h,p),m=bo(e,h,c),C.push(yo[l])):86===l?(b=1-bo(s,f,p),S=1-bo(s,h,p),C.push(fo[l])):84===l?(b=bo(e,p,f),S=bo(e,p,h),C.push(fo[l])):89===l?(x=1-bo(s,c,f),_=bo(s,p,f),C.push(po[l])):81===l?(x=bo(e,f,c),_=1-bo(e,f,p),C.push(po[l])):96===l?(x=bo(s,f,c),w=bo(e,f,c),S=bo(e,p,h),v=bo(s,h,c),C.push(ho[l]),C.push(co[l])):74===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),S=1-bo(s,h,p),v=1-bo(e,c,h),C.push(ho[l]),C.push(co[l])):24===l?(x=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),m=bo(e,h,c),C.push(ho[l]),C.push(po[l])):146===l?(x=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),m=1-bo(s,c,h),C.push(ho[l]),C.push(po[l])):6===l?(w=1-bo(e,c,f),b=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),C.push(co[l]),C.push(fo[l])):164===l?(w=bo(s,f,c),b=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),C.push(co[l]),C.push(fo[l])):129===l?(_=1-bo(e,f,p),P=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(po[l]),C.push(yo[l])):41===l?(_=bo(s,p,f),P=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c),C.push(po[l]),C.push(yo[l])):66===l?(b=1-bo(e,f,p),_=1-bo(s,f,p),S=1-bo(s,h,p),v=1-bo(e,c,h),C.push(fo[l]),C.push(po[l])):104===l?(b=bo(s,p,f),_=bo(e,p,f),S=bo(e,p,h),v=bo(s,h,c),C.push(po[l]),C.push(vo[l])):144===l?(x=bo(e,f,c),P=bo(e,p,h),S=bo(s,p,h),m=1-bo(s,c,h),C.push(ho[l]),C.push(go[l])):26===l?(x=1-bo(s,c,f),P=1-bo(s,h,p),S=1-bo(e,h,p),m=bo(e,h,c),C.push(ho[l]),C.push(go[l])):36===l?(w=bo(s,f,c),b=bo(e,p,f),v=bo(e,h,c),m=bo(s,h,c),C.push(co[l]),C.push(fo[l])):134===l?(w=1-bo(e,c,f),b=1-bo(s,f,p),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(co[l]),C.push(fo[l])):9===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),_=bo(s,p,f),P=1-bo(e,h,p),C.push(ho[l]),C.push(co[l])):161===l?(x=bo(s,f,c),w=bo(e,f,c),_=1-bo(e,f,p),P=bo(s,p,h),C.push(ho[l]),C.push(co[l])):37===l?(w=bo(s,f,c),P=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c),C.push(co[l]),C.push(yo[l])):133===l?(w=1-bo(e,c,f),P=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h),C.push(co[l]),C.push(yo[l])):148===l?(b=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),m=1-bo(s,c,h),C.push(fo[l]),C.push(go[l])):22===l?(b=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),m=bo(e,h,c),C.push(fo[l]),C.push(go[l])):82===l?(x=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),S=1-bo(s,h,p),C.push(ho[l]),C.push(po[l])):88===l?(x=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),S=bo(e,p,h),C.push(ho[l]),C.push(po[l])):73===l?(x=1-bo(e,c,f),w=1-bo(s,c,f),_=bo(s,p,f),v=1-bo(e,c,h),C.push(ho[l]),C.push(co[l])):97===l?(x=bo(s,f,c),w=bo(e,f,c),_=1-bo(e,f,p),v=bo(s,h,c),C.push(ho[l]),C.push(co[l])):145===l?(x=bo(e,f,c),_=1-bo(e,f,p),P=bo(s,p,h),m=1-bo(s,c,h),C.push(ho[l]),C.push(yo[l])):25===l?(x=1-bo(s,c,f),_=bo(s,p,f),P=1-bo(e,h,p),m=bo(e,h,c),C.push(ho[l]),C.push(yo[l])):70===l?(w=1-bo(e,c,f),b=1-bo(s,f,p),S=1-bo(s,h,p),v=1-bo(e,c,h),C.push(co[l]),C.push(fo[l])):100===l?(w=bo(s,f,c),b=bo(e,p,f),S=bo(e,p,h),v=bo(s,h,c),C.push(co[l]),C.push(fo[l])):34===l?(0===y?(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)):(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)),C.push(ho[l]),C.push(co[l]),C.push(yo[l]),C.push(go[l])):35===l?(4===y?(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)):(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)),C.push(ho[l]),C.push(co[l]),C.push(po[l]),C.push(go[l])):136===l?(0===y?(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)):(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)),C.push(ho[l]),C.push(co[l]),C.push(yo[l]),C.push(go[l])):153===l?(0===y?(x=bo(e,f,c),_=1-bo(e,f,p),P=1-bo(e,h,p),m=bo(e,h,c)):(x=1-bo(s,c,f),_=bo(s,p,f),P=bo(s,p,h),m=1-bo(s,c,h)),C.push(ho[l]),C.push(po[l])):102===l?(0===y?(w=1-bo(e,c,f),b=bo(e,p,f),S=bo(e,p,h),v=1-bo(e,c,h)):(w=bo(s,f,c),b=1-bo(s,f,p),S=1-bo(s,h,p),v=bo(s,h,c)),C.push(co[l]),C.push(go[l])):155===l?(4===y?(x=bo(e,f,c),_=1-bo(e,f,p),P=1-bo(e,h,p),m=bo(e,h,c)):(x=1-bo(s,c,f),_=bo(s,p,f),P=bo(s,p,h),m=1-bo(s,c,h)),C.push(ho[l]),C.push(yo[l])):103===l?(4===y?(w=1-bo(e,c,f),b=bo(e,p,f),S=bo(e,p,h),v=1-bo(e,c,h)):(w=bo(s,f,c),b=1-bo(s,f,p),S=1-bo(s,h,p),v=bo(s,h,c)),C.push(co[l]),C.push(fo[l])):152===l?(0===y?(x=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),m=bo(e,h,c)):(x=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),m=1-bo(s,c,h)),C.push(ho[l]),C.push(fo[l]),C.push(po[l])):156===l?(4===y?(x=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),m=bo(e,h,c)):(x=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),m=1-bo(s,c,h)),C.push(ho[l]),C.push(po[l]),C.push(go[l])):137===l?(0===y?(x=bo(s,f,c),w=bo(e,f,c),_=1-bo(e,f,p),P=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)):(x=1-bo(e,c,f),w=1-bo(s,c,f),_=bo(s,p,f),P=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)),C.push(ho[l]),C.push(co[l]),C.push(po[l])):139===l?(4===y?(x=bo(s,f,c),w=bo(e,f,c),_=1-bo(e,f,p),P=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)):(x=1-bo(e,c,f),w=1-bo(s,c,f),_=bo(s,p,f),P=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)),C.push(ho[l]),C.push(co[l]),C.push(yo[l])):98===l?(0===y?(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),S=bo(e,p,h),v=1-bo(e,c,h)):(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),S=1-bo(s,h,p),v=bo(s,h,c)),C.push(ho[l]),C.push(co[l]),C.push(go[l])):99===l?(4===y?(x=1-bo(e,c,f),w=1-bo(s,c,f),b=bo(s,p,f),_=bo(e,p,f),S=bo(e,p,h),v=1-bo(e,c,h)):(x=bo(s,f,c),w=bo(e,f,c),b=1-bo(e,f,p),_=1-bo(s,f,p),S=1-bo(s,h,p),v=bo(s,h,c)),C.push(ho[l]),C.push(co[l]),C.push(po[l])):38===l?(0===y?(w=1-bo(e,c,f),b=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)):(w=bo(s,f,c),b=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)),C.push(co[l]),C.push(yo[l]),C.push(go[l])):39===l?(4===y?(w=1-bo(e,c,f),b=bo(e,p,f),P=bo(e,p,h),S=bo(s,p,h),v=1-bo(s,c,h),m=1-bo(e,c,h)):(w=bo(s,f,c),b=1-bo(s,f,p),P=1-bo(s,h,p),S=1-bo(e,h,p),v=bo(e,h,c),m=bo(s,h,c)),C.push(co[l]),C.push(fo[l]),C.push(go[l])):85===l&&(x=1,w=0,b=1,_=0,P=0,S=1,v=0,m=1),(v<0||v>1||m<0||m>1||x<0||x>1||b<0||b>1||P<0||P>1||S<0||S>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+h+","+c+","+f+","+p+" "+y+" "+v+" "+m+" "+x+" "+w+" "+b+" "+_+" "+P+" "+S),o.cells[a][u]={cval:l,cval_real:d,flipped:y,topleft:v,topright:m,righttop:x,rightbottom:w,bottomright:b,bottomleft:_,leftbottom:P,lefttop:S,edges:C}}}}}return o}(t,e,n);return Er.polygons?(Er.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach(function(t,i){t.forEach(function(t,r){if(void 0!==t){var o=_o[t.cval](t);"object"==typeof o&&xo(o)?"object"==typeof o[0]&&xo(o[0])?"object"==typeof o[0][0]&&xo(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=t}):(o.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(l)):(Er.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=So(t.cells[o][s]),u=null,l=s,h=o;null!==a&&r.push([a.p[0]+l,a.p[1]+h]);do{if(null===(u=Po(t.cells[h][l],a.x,a.y,a.o)))break;if(r.push([u.p[0]+l,u.p[1]+h]),l+=u.x,a=u,(h+=u.y)<0||h>=n||l<0||l>=i||void 0===t.cells[h][l]){var c=wo(t,l-=u.x,h-=u.y,u.x,u.y,u.o);if(null===c)break;c.path.forEach(function(t){r.push(t)}),l=c.i,h=c.j,a=c}}while(void 0!==t.cells[h][l]&&t.cells[h][l].edges.length>0);e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof Er.successCallback&&Er.successCallback(u),u}var Mr=64,Ir=16,Nr=[],Ar=[],Rr=[],kr=[],Dr=[],jr=[],Fr=[],Br=[],Ur=[],Gr=[],zr=[],Zr=[],qr=[],Vr=[],Wr=[],Hr=[],Xr=[],Yr=[],Qr=[],Jr=[],Kr=[],$r=[],to=[],eo=[];Fr[85]=Gr[85]=-1,Br[85]=zr[85]=0,Ur[85]=Zr[85]=1,Qr[85]=$r[85]=1,Jr[85]=to[85]=0,Kr[85]=eo[85]=1,Nr[85]=kr[85]=0,Ar[85]=Dr[85]=-1,Rr[85]=Wr[85]=0,Hr[85]=qr[85]=0,Xr[85]=Vr[85]=1,jr[85]=Yr[85]=1,$r[1]=$r[169]=0,to[1]=to[169]=-1,eo[1]=eo[169]=0,qr[1]=qr[169]=-1,Vr[1]=Vr[169]=0,Wr[1]=Wr[169]=0,Gr[4]=Gr[166]=0,zr[4]=zr[166]=-1,Zr[4]=Zr[166]=1,Hr[4]=Hr[166]=1,Xr[4]=Xr[166]=0,Yr[4]=Yr[166]=0,Fr[16]=Fr[154]=0,Br[16]=Br[154]=1,Ur[16]=Ur[154]=1,kr[16]=kr[154]=1,Dr[16]=Dr[154]=0,jr[16]=jr[154]=1,Qr[64]=Qr[106]=0,Jr[64]=Jr[106]=1,Kr[64]=Kr[106]=0,Nr[64]=Nr[106]=-1,Ar[64]=Ar[106]=0,Rr[64]=Rr[106]=1,Qr[2]=Qr[168]=0,Jr[2]=Jr[168]=-1,Kr[2]=Kr[168]=1,$r[2]=$r[168]=0,to[2]=to[168]=-1,eo[2]=eo[168]=0,qr[2]=qr[168]=-1,Vr[2]=Vr[168]=0,Wr[2]=Wr[168]=0,Hr[2]=Hr[168]=-1,Xr[2]=Xr[168]=0,Yr[2]=Yr[168]=1,Fr[8]=Fr[162]=0,Br[8]=Br[162]=-1,Ur[8]=Ur[162]=0,Gr[8]=Gr[162]=0,zr[8]=zr[162]=-1,Zr[8]=Zr[162]=1,qr[8]=qr[162]=1,Vr[8]=Vr[162]=0,Wr[8]=Wr[162]=1,Hr[8]=Hr[162]=1,Xr[8]=Xr[162]=0,Yr[8]=Yr[162]=0,Fr[32]=Fr[138]=0,Br[32]=Br[138]=1,Ur[32]=Ur[138]=1,Gr[32]=Gr[138]=0,zr[32]=zr[138]=1,Zr[32]=Zr[138]=0,Nr[32]=Nr[138]=1,Ar[32]=Ar[138]=0,Rr[32]=Rr[138]=0,kr[32]=kr[138]=1,Dr[32]=Dr[138]=0,jr[32]=jr[138]=1,$r[128]=$r[42]=0,to[128]=to[42]=1,eo[128]=eo[42]=1,Qr[128]=Qr[42]=0,Jr[128]=Jr[42]=1,Kr[128]=Kr[42]=0,Nr[128]=Nr[42]=-1,Ar[128]=Ar[42]=0,Rr[128]=Rr[42]=1,kr[128]=kr[42]=-1,Dr[128]=Dr[42]=0,jr[128]=jr[42]=0,Gr[5]=Gr[165]=-1,zr[5]=zr[165]=0,Zr[5]=Zr[165]=0,$r[5]=$r[165]=1,to[5]=to[165]=0,eo[5]=eo[165]=0,Hr[20]=Hr[150]=0,Xr[20]=Xr[150]=1,Yr[20]=Yr[150]=1,kr[20]=kr[150]=0,Dr[20]=Dr[150]=-1,jr[20]=jr[150]=1,Fr[80]=Fr[90]=-1,Br[80]=Br[90]=0,Ur[80]=Ur[90]=1,Qr[80]=Qr[90]=1,Jr[80]=Jr[90]=0,Kr[80]=Kr[90]=1,qr[65]=qr[105]=0,Vr[65]=Vr[105]=1,Wr[65]=Wr[105]=0,Nr[65]=Nr[105]=0,Ar[65]=Ar[105]=-1,Rr[65]=Rr[105]=0,Fr[160]=Fr[10]=-1,Br[160]=Br[10]=0,Ur[160]=Ur[10]=1,Gr[160]=Gr[10]=-1,zr[160]=zr[10]=0,Zr[160]=Zr[10]=0,$r[160]=$r[10]=1,to[160]=to[10]=0,eo[160]=eo[10]=0,Qr[160]=Qr[10]=1,Jr[160]=Jr[10]=0,Kr[160]=Kr[10]=1,Hr[130]=Hr[40]=0,Xr[130]=Xr[40]=1,Yr[130]=Yr[40]=1,qr[130]=qr[40]=0,Vr[130]=Vr[40]=1,Wr[130]=Wr[40]=0,Nr[130]=Nr[40]=0,Ar[130]=Ar[40]=-1,Rr[130]=Rr[40]=0,kr[130]=kr[40]=0,Dr[130]=Dr[40]=-1,jr[130]=jr[40]=1,Gr[37]=Gr[133]=0,zr[37]=zr[133]=1,Zr[37]=Zr[133]=1,$r[37]=$r[133]=0,to[37]=to[133]=1,eo[37]=eo[133]=0,Nr[37]=Nr[133]=-1,Ar[37]=Ar[133]=0,Rr[37]=Rr[133]=0,kr[37]=kr[133]=1,Dr[37]=Dr[133]=0,jr[37]=jr[133]=0,Hr[148]=Hr[22]=-1,Xr[148]=Xr[22]=0,Yr[148]=Yr[22]=0,$r[148]=$r[22]=0,to[148]=to[22]=-1,eo[148]=eo[22]=1,Qr[148]=Qr[22]=0,Jr[148]=Jr[22]=1,Kr[148]=Kr[22]=1,kr[148]=kr[22]=-1,Dr[148]=Dr[22]=0,jr[148]=jr[22]=1,Fr[82]=Fr[88]=0,Br[82]=Br[88]=-1,Ur[82]=Ur[88]=1,Hr[82]=Hr[88]=1,Xr[82]=Xr[88]=0,Yr[82]=Yr[88]=1,qr[82]=qr[88]=-1,Vr[82]=Vr[88]=0,Wr[82]=Wr[88]=1,Qr[82]=Qr[88]=0,Jr[82]=Jr[88]=-1,Kr[82]=Kr[88]=0,Fr[73]=Fr[97]=0,Br[73]=Br[97]=1,Ur[73]=Ur[97]=0,Gr[73]=Gr[97]=0,zr[73]=zr[97]=-1,Zr[73]=Zr[97]=0,qr[73]=qr[97]=1,Vr[73]=Vr[97]=0,Wr[73]=Wr[97]=0,Nr[73]=Nr[97]=1,Ar[73]=Ar[97]=0,Rr[73]=Rr[97]=1,Fr[145]=Fr[25]=0,Br[145]=Br[25]=-1,Ur[145]=Ur[25]=0,qr[145]=qr[25]=1,Vr[145]=Vr[25]=0,Wr[145]=Wr[25]=1,$r[145]=$r[25]=0,to[145]=to[25]=1,eo[145]=eo[25]=1,kr[145]=kr[25]=-1,Dr[145]=Dr[25]=0,jr[145]=jr[25]=0,Gr[70]=Gr[100]=0,zr[70]=zr[100]=1,Zr[70]=Zr[100]=0,Hr[70]=Hr[100]=-1,Xr[70]=Xr[100]=0,Yr[70]=Yr[100]=1,Qr[70]=Qr[100]=0,Jr[70]=Jr[100]=-1,Kr[70]=Kr[100]=1,Nr[70]=Nr[100]=1,Ar[70]=Ar[100]=0,Rr[70]=Rr[100]=0,Gr[101]=Gr[69]=0,zr[101]=zr[69]=1,Zr[101]=Zr[69]=0,Nr[101]=Nr[69]=1,Ar[101]=Ar[69]=0,Rr[101]=Rr[69]=0,$r[149]=$r[21]=0,to[149]=to[21]=1,eo[149]=eo[21]=1,kr[149]=kr[21]=-1,Dr[149]=Dr[21]=0,jr[149]=jr[21]=0,Hr[86]=Hr[84]=-1,Xr[86]=Xr[84]=0,Yr[86]=Yr[84]=1,Qr[86]=Qr[84]=0,Jr[86]=Jr[84]=-1,Kr[86]=Kr[84]=1,Fr[89]=Fr[81]=0,Br[89]=Br[81]=-1,Ur[89]=Ur[81]=0,qr[89]=qr[81]=1,Vr[89]=Vr[81]=0,Wr[89]=Wr[81]=1,Fr[96]=Fr[74]=0,Br[96]=Br[74]=1,Ur[96]=Ur[74]=0,Gr[96]=Gr[74]=-1,zr[96]=zr[74]=0,Zr[96]=Zr[74]=1,Qr[96]=Qr[74]=1,Jr[96]=Jr[74]=0,Kr[96]=Kr[74]=0,Nr[96]=Nr[74]=1,Ar[96]=Ar[74]=0,Rr[96]=Rr[74]=1,Fr[24]=Fr[146]=0,Br[24]=Br[146]=-1,Ur[24]=Ur[146]=1,Hr[24]=Hr[146]=1,Xr[24]=Xr[146]=0,Yr[24]=Yr[146]=1,qr[24]=qr[146]=0,Vr[24]=Vr[146]=1,Wr[24]=Wr[146]=1,kr[24]=kr[146]=0,Dr[24]=Dr[146]=-1,jr[24]=jr[146]=0,Gr[6]=Gr[164]=-1,zr[6]=zr[164]=0,Zr[6]=Zr[164]=1,Hr[6]=Hr[164]=-1,Xr[6]=Xr[164]=0,Yr[6]=Yr[164]=0,$r[6]=$r[164]=0,to[6]=to[164]=-1,eo[6]=eo[164]=1,Qr[6]=Qr[164]=1,Jr[6]=Jr[164]=0,Kr[6]=Kr[164]=0,qr[129]=qr[41]=0,Vr[129]=Vr[41]=1,Wr[129]=Wr[41]=1,$r[129]=$r[41]=0,to[129]=to[41]=1,eo[129]=eo[41]=0,Nr[129]=Nr[41]=-1,Ar[129]=Ar[41]=0,Rr[129]=Rr[41]=0,kr[129]=kr[41]=0,Dr[129]=Dr[41]=-1,jr[129]=jr[41]=0,Hr[66]=Hr[104]=0,Xr[66]=Xr[104]=1,Yr[66]=Yr[104]=0,qr[66]=qr[104]=-1,Vr[66]=Vr[104]=0,Wr[66]=Wr[104]=1,Qr[66]=Qr[104]=0,Jr[66]=Jr[104]=-1,Kr[66]=Kr[104]=0,Nr[66]=Nr[104]=0,Ar[66]=Ar[104]=-1,Rr[66]=Rr[104]=1,Fr[144]=Fr[26]=-1,Br[144]=Br[26]=0,Ur[144]=Ur[26]=0,$r[144]=$r[26]=1,to[144]=to[26]=0,eo[144]=eo[26]=1,Qr[144]=Qr[26]=0,Jr[144]=Jr[26]=1,Kr[144]=Kr[26]=1,kr[144]=kr[26]=-1,Dr[144]=Dr[26]=0,jr[144]=jr[26]=1,Gr[36]=Gr[134]=0,zr[36]=zr[134]=1,Zr[36]=Zr[134]=1,Hr[36]=Hr[134]=0,Xr[36]=Xr[134]=1,Yr[36]=Yr[134]=0,Nr[36]=Nr[134]=0,Ar[36]=Ar[134]=-1,Rr[36]=Rr[134]=1,kr[36]=kr[134]=1,Dr[36]=Dr[134]=0,jr[36]=jr[134]=0,Fr[9]=Fr[161]=-1,Br[9]=Br[161]=0,Ur[9]=Ur[161]=0,Gr[9]=Gr[161]=0,zr[9]=zr[161]=-1,Zr[9]=Zr[161]=0,qr[9]=qr[161]=1,Vr[9]=Vr[161]=0,Wr[9]=Wr[161]=0,$r[9]=$r[161]=1,to[9]=to[161]=0,eo[9]=eo[161]=1,Fr[136]=0,Br[136]=1,Ur[136]=1,Gr[136]=0,zr[136]=1,Zr[136]=0,Hr[136]=-1,Xr[136]=0,Yr[136]=1,qr[136]=-1,Vr[136]=0,Wr[136]=0,$r[136]=0,to[136]=-1,eo[136]=0,Qr[136]=0,Jr[136]=-1,Kr[136]=1,Nr[136]=1,Ar[136]=0,Rr[136]=0,kr[136]=1,Dr[136]=0,jr[136]=1,Fr[34]=0,Br[34]=-1,Ur[34]=0,Gr[34]=0,zr[34]=-1,Zr[34]=1,Hr[34]=1,Xr[34]=0,Yr[34]=0,qr[34]=1,Vr[34]=0,Wr[34]=1,$r[34]=0,to[34]=1,eo[34]=1,Qr[34]=0,Jr[34]=1,Kr[34]=0,Nr[34]=-1,Ar[34]=0,Rr[34]=1,kr[34]=-1,Dr[34]=0,jr[34]=0,Fr[35]=0,Br[35]=1,Ur[35]=1,Gr[35]=0,zr[35]=-1,Zr[35]=1,Hr[35]=1,Xr[35]=0,Yr[35]=0,qr[35]=-1,Vr[35]=0,Wr[35]=0,$r[35]=0,to[35]=-1,eo[35]=0,Qr[35]=0,Jr[35]=1,Kr[35]=0,Nr[35]=-1,Ar[35]=0,Rr[35]=1,kr[35]=1,Dr[35]=0,jr[35]=1,Fr[153]=0,Br[153]=1,Ur[153]=1,qr[153]=-1,Vr[153]=0,Wr[153]=0,$r[153]=0,to[153]=-1,eo[153]=0,kr[153]=1,Dr[153]=0,jr[153]=1,Gr[102]=0,zr[102]=-1,Zr[102]=1,Hr[102]=1,Xr[102]=0,Yr[102]=0,Qr[102]=0,Jr[102]=1,Kr[102]=0,Nr[102]=-1,Ar[102]=0,Rr[102]=1,Fr[155]=0,Br[155]=-1,Ur[155]=0,qr[155]=1,Vr[155]=0,Wr[155]=1,$r[155]=0,to[155]=1,eo[155]=1,kr[155]=-1,Dr[155]=0,jr[155]=0,Gr[103]=0,zr[103]=1,Zr[103]=0,Hr[103]=-1,Xr[103]=0,Yr[103]=1,Qr[103]=0,Jr[103]=-1,Kr[103]=1,Nr[103]=1,Ar[103]=0,Rr[103]=0,Fr[152]=0,Br[152]=1,Ur[152]=1,Hr[152]=-1,Xr[152]=0,Yr[152]=1,qr[152]=-1,Vr[152]=0,Wr[152]=0,$r[152]=0,to[152]=-1,eo[152]=0,Qr[152]=0,Jr[152]=-1,Kr[152]=1,kr[152]=1,Dr[152]=0,jr[152]=1,Fr[156]=0,Br[156]=-1,Ur[156]=1,Hr[156]=1,Xr[156]=0,Yr[156]=1,qr[156]=-1,Vr[156]=0,Wr[156]=0,$r[156]=0,to[156]=-1,eo[156]=0,Qr[156]=0,Jr[156]=1,Kr[156]=1,kr[156]=-1,Dr[156]=0,jr[156]=1,Fr[137]=0,Br[137]=1,Ur[137]=1,Gr[137]=0,zr[137]=1,Zr[137]=0,qr[137]=-1,Vr[137]=0,Wr[137]=0,$r[137]=0,to[137]=-1,eo[137]=0,Nr[137]=1,Ar[137]=0,Rr[137]=0,kr[137]=1,Dr[137]=0,jr[137]=1,Fr[139]=0,Br[139]=1,Ur[139]=1,Gr[139]=0,zr[139]=-1,Zr[139]=0,qr[139]=1,Vr[139]=0,Wr[139]=0,$r[139]=0,to[139]=1,eo[139]=0,Nr[139]=-1,Ar[139]=0,Rr[139]=0,kr[139]=1,Dr[139]=0,jr[139]=1,Fr[98]=0,Br[98]=-1,Ur[98]=0,Gr[98]=0,zr[98]=-1,Zr[98]=1,Hr[98]=1,Xr[98]=0,Yr[98]=0,qr[98]=1,Vr[98]=0,Wr[98]=1,Qr[98]=0,Jr[98]=1,Kr[98]=0,Nr[98]=-1,Ar[98]=0,Rr[98]=1,Fr[99]=0,Br[99]=1,Ur[99]=0,Gr[99]=0,zr[99]=-1,Zr[99]=1,Hr[99]=1,Xr[99]=0,Yr[99]=0,qr[99]=-1,Vr[99]=0,Wr[99]=1,Qr[99]=0,Jr[99]=-1,Kr[99]=0,Nr[99]=1,Ar[99]=0,Rr[99]=1,Gr[38]=0,zr[38]=-1,Zr[38]=1,Hr[38]=1,Xr[38]=0,Yr[38]=0,$r[38]=0,to[38]=1,eo[38]=1,Qr[38]=0,Jr[38]=1,Kr[38]=0,Nr[38]=-1,Ar[38]=0,Rr[38]=1,kr[38]=-1,Dr[38]=0,jr[38]=0,Gr[39]=0,zr[39]=1,Zr[39]=1,Hr[39]=-1,Xr[39]=0,Yr[39]=0,$r[39]=0,to[39]=-1,eo[39]=1,Qr[39]=0,Jr[39]=1,Kr[39]=0,Nr[39]=-1,Ar[39]=0,Rr[39]=1,kr[39]=1,Dr[39]=0,jr[39]=0;var no=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},io=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ro=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},oo=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},so=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ao=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},uo=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},lo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ho=[],co=[],fo=[],po=[],yo=[],go=[],vo=[],mo=[];po[1]=yo[1]=18,po[169]=yo[169]=18,fo[4]=co[4]=12,fo[166]=co[166]=12,ho[16]=mo[16]=4,ho[154]=mo[154]=4,go[64]=vo[64]=22,go[106]=vo[106]=22,fo[2]=go[2]=17,po[2]=yo[2]=18,fo[168]=go[168]=17,po[168]=yo[168]=18,ho[8]=po[8]=9,co[8]=fo[8]=12,ho[162]=po[162]=9,co[162]=fo[162]=12,ho[32]=mo[32]=4,co[32]=vo[32]=1,ho[138]=mo[138]=4,co[138]=vo[138]=1,yo[128]=mo[128]=21,go[128]=vo[128]=22,yo[42]=mo[42]=21,go[42]=vo[42]=22,co[5]=yo[5]=14,co[165]=yo[165]=14,fo[20]=mo[20]=6,fo[150]=mo[150]=6,ho[80]=go[80]=11,ho[90]=go[90]=11,po[65]=vo[65]=3,po[105]=vo[105]=3,ho[160]=go[160]=11,co[160]=yo[160]=14,ho[10]=go[10]=11,co[10]=yo[10]=14,fo[130]=mo[130]=6,po[130]=vo[130]=3,fo[40]=mo[40]=6,po[40]=vo[40]=3,co[101]=vo[101]=1,co[69]=vo[69]=1,yo[149]=mo[149]=21,yo[21]=mo[21]=21,fo[86]=go[86]=17,fo[84]=go[84]=17,ho[89]=po[89]=9,ho[81]=po[81]=9,ho[96]=vo[96]=0,co[96]=go[96]=15,ho[74]=vo[74]=0,co[74]=go[74]=15,ho[24]=fo[24]=8,po[24]=mo[24]=7,ho[146]=fo[146]=8,po[146]=mo[146]=7,co[6]=go[6]=15,fo[6]=yo[6]=16,co[164]=go[164]=15,fo[164]=yo[164]=16,po[129]=mo[129]=7,yo[129]=vo[129]=20,po[41]=mo[41]=7,yo[41]=vo[41]=20,fo[66]=vo[66]=2,po[66]=go[66]=19,fo[104]=vo[104]=2,po[104]=go[104]=19,ho[144]=yo[144]=10,go[144]=mo[144]=23,ho[26]=yo[26]=10,go[26]=mo[26]=23,co[36]=mo[36]=5,fo[36]=vo[36]=2,co[134]=mo[134]=5,fo[134]=vo[134]=2,ho[9]=yo[9]=10,co[9]=po[9]=13,ho[161]=yo[161]=10,co[161]=po[161]=13,co[37]=mo[37]=5,yo[37]=vo[37]=20,co[133]=mo[133]=5,yo[133]=vo[133]=20,fo[148]=yo[148]=16,go[148]=mo[148]=23,fo[22]=yo[22]=16,go[22]=mo[22]=23,ho[82]=fo[82]=8,po[82]=go[82]=19,ho[88]=fo[88]=8,po[88]=go[88]=19,ho[73]=vo[73]=0,co[73]=po[73]=13,ho[97]=vo[97]=0,co[97]=po[97]=13,ho[145]=po[145]=9,yo[145]=mo[145]=21,ho[25]=po[25]=9,yo[25]=mo[25]=21,co[70]=vo[70]=1,fo[70]=go[70]=17,co[100]=vo[100]=1,fo[100]=go[100]=17,ho[34]=po[34]=9,co[34]=fo[34]=12,yo[34]=mo[34]=21,go[34]=vo[34]=22,ho[136]=mo[136]=4,co[136]=vo[136]=1,fo[136]=go[136]=17,po[136]=yo[136]=18,ho[35]=mo[35]=4,co[35]=fo[35]=12,po[35]=yo[35]=18,go[35]=vo[35]=22,ho[153]=mo[153]=4,po[153]=yo[153]=18,co[102]=fo[102]=12,go[102]=vo[102]=22,ho[155]=po[155]=9,yo[155]=mo[155]=23,co[103]=vo[103]=1,fo[103]=go[103]=17,ho[152]=mo[152]=4,fo[152]=go[152]=17,po[152]=yo[152]=18,ho[156]=fo[156]=8,po[156]=yo[156]=18,go[156]=mo[156]=23,ho[137]=mo[137]=4,co[137]=vo[137]=1,po[137]=yo[137]=18,ho[139]=mo[139]=4,co[139]=po[139]=13,yo[139]=vo[139]=20,ho[98]=po[98]=9,co[98]=fo[98]=12,go[98]=vo[98]=22,ho[99]=vo[99]=0,co[99]=fo[99]=12,po[99]=go[99]=19,co[38]=fo[38]=12,yo[38]=mo[38]=21,go[38]=vo[38]=22,co[39]=mo[39]=5,fo[39]=yo[39]=16,go[39]=vo[39]=22;var _o=[];function bo(t,e,n){return(t-e)/(n-e)}function xo(t){return t.constructor.toString().indexOf("Array")>-1}function wo(t,e,n,i,r,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+i,l=n+r,h=[],c=!1;!c;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=r,u-=i,a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(1&a)h.push([u,l]),i=-1,r=0,o=0;else{if(!(4&a)){h.push([u+s.bottomright,l]),i=0,r=1,o=1,c=!0;break}h.push([u+1,l]),i=1,r=0,o=0}else{if(!(1&a)){if(4&a){h.push([u+s.bottomright,l]),i=0,r=1,o=1,c=!0;break}h.push([u+s.bottomleft,l]),i=0,r=1,o=0,c=!0;break}h.push([u,l]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&Ir)){if(a&Mr){h.push([u+s.topleft,l+1]),i=0,r=-1,o=0,c=!0;break}h.push([u+s.topright,l+1]),i=0,r=-1,o=1,c=!0;break}h.push([u+1,l+1]),i=1,r=0,o=1}else h.push([u+1,l+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(a&Mr)){if(1&a){h.push([u,l+s.leftbottom]),i=1,r=0,o=0,c=!0;break}h.push([u,l+s.lefttop]),i=1,r=0,o=1,c=!0;break}h.push([u,l+1]),i=0,r=1,o=0}else{if(!(a&Mr)){console.log("MarchingSquaresJS-isoBands: wtf");break}h.push([u,l+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){h.push([u+1,l+s.rightbottom]),i=-1,r=0,o=0,c=!0;break}h.push([u+1,l]),i=0,r=-1,o=1}else{if(!(4&a)){if(a&Ir){h.push([u+1,l+s.righttop]),i=-1,r=0,o=1;break}h.push([u+1,l+s.rightbottom]),i=-1,r=0,o=0,c=!0;break}h.push([u+1,l]),i=0,r=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])i=0,r=-1,o=1;else{if(!(1&a)){h.push([u+s.bottomright,l]),i=0,r=1,o=1,c=!0;break}h.push([u,l])}else{if(!(a&Mr)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])i=0,r=1,o=0;else{if(!(a&Ir)){h.push([u+s.topleft,l+1]),i=0,r=-1,o=0,c=!0;break}h.push([u+1,l+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])i=1,r=0,o=1;else{if(!(4&a)){h.push([u+1,l+s.righttop]),i=-1,r=0,o=1,c=!0;break}h.push([u+1,l]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])i=-1,r=0,o=0;else{if(!(a&Mr)){h.push([u,l+s.leftbottom]),i=1,r=0,o=0,c=!0;break}h.push([u,l+1]),i=0,r=1,o=0}}if(l+=r,(u+=i)===e&&l===n)break}return{path:h,i:u,j:l,x:i,y:r,o:o}}function So(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Ir?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Ir?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Mr?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Mr?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Mr?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Mr?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Mr?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Ir?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Mr?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Ir?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Po(t,e,n,i){var r,o,s,a,u,l=t.cval;switch(e){case-1:switch(i){case 0:r=co[l],s=Gr[l],a=zr[l],u=Zr[l];break;default:r=ho[l],s=Fr[l],a=Br[l],u=Ur[l]}break;case 1:switch(i){case 0:r=yo[l],s=$r[l],a=to[l],u=eo[l];break;default:r=go[l],s=Qr[l],a=Jr[l],u=Kr[l]}break;default:switch(n){case-1:switch(i){case 0:r=vo[l],s=Nr[l],a=Ar[l],u=Rr[l];break;default:r=mo[l],s=kr[l],a=Dr[l],u=jr[l]}break;case 1:switch(i){case 0:r=po[l],s=qr[l],a=Vr[l],u=Wr[l];break;default:r=fo[l],s=Hr[l],a=Xr[l],u=Yr[l]}}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,r){case 0:l&Ir?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&Ir?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&Mr?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&Mr?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&Mr?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&Mr?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&Mr?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&Ir?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&Mr?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&Ir?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Co(t){var e=[],n=[];t.forEach(function(t){var i=wi(h([t]));n.push(i),e.push({ring:t,area:i})}),n.sort(function(t,e){return e-t});var i=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}}),i}function To(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!Eo(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=h([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||Oo(h([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}function Oo(t,e){for(var n=fn(t),i=0;i<n.features.length;i++)if(!de(n.features[i],e))return!1;return!0}function Eo(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Lo(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=cn(t)),!1!==r&&void 0!==r||(t=we(t)),z(t,function(t){var n=vr(i,t)+e,r=di(i,t),o=R(_r(i,r,n));t[0]=o[0],t[1]=o[1]})),t}function Mo(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=we(t)),"FeatureCollection"!==t.type||o?Io(t,e,i):(W(t,function(n,r){t.features[r]=Io(n,e,i)}),t)}function Io(t,e,n){var i="Point"===U(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return A(e);var n=t.bbox?t.bbox:st(t),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return u([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,s]);case"center":return hn(t);case void 0:case null:case"centroid":return cn(t);default:throw new Error("invalid origin")}}(t,n),1===e||i||z(t,function(t){var i=di(n,t),r=vr(n,t),o=R(_r(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function No(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Ao(t,e){return t[0]*e[1]-e[0]*t[1]}function Ro(t,e,n){var i=[],r=w(e,n),o=R(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=(l=t,h=o[e+1],c=r,f=Math.sqrt((l[0]-h[0])*(l[0]-h[0])+(l[1]-h[1])*(l[1]-h[1])),p=l[0]+c*(h[1]-l[1])/f,d=h[0]+c*(h[1]-l[1])/f,y=l[1]+c*(l[0]-h[0])/f,g=h[1]+c*(l[0]-h[0])/f,[[p,y],[d,g]]);if(i.push(n),e>0){var a=i[e-1],u=function(t,e){return!function(t,e){return 0===Ao(No(t),No(e))}(t,e)&&function(t,e){var n,i,r=t[0],o=No(t),s=e[0],a=No(e),u=Ao(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(Ao((i=r,[(n=s)[0]-i[0],n[1]-i[1]]),a)/u,o))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,h,c,f,p,d,y,g}),f(s,t.properties)}function ko(t,e,n){var i=e[0]-t[0],r=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(i*(n[1]-e[1])-o*r)}function Do(t,e){return e.geometry.coordinates[0].every(function(e){return de(u(e),t)})}_o[1]=_o[169]=no,_o[4]=_o[166]=io,_o[16]=_o[154]=ro,_o[64]=_o[106]=oo,_o[168]=_o[2]=so,_o[162]=_o[8]=ao,_o[138]=_o[32]=uo,_o[42]=_o[128]=lo,_o[5]=_o[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},_o[20]=_o[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},_o[80]=_o[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},_o[65]=_o[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},_o[160]=_o[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},_o[130]=_o[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},_o[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},_o[101]=_o[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},_o[149]=_o[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},_o[86]=_o[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},_o[89]=_o[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},_o[96]=_o[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},_o[24]=_o[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},_o[6]=_o[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},_o[129]=_o[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},_o[66]=_o[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_o[144]=_o[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_o[36]=_o[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},_o[9]=_o[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},_o[37]=_o[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},_o[148]=_o[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_o[82]=_o[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},_o[73]=_o[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},_o[145]=_o[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},_o[70]=_o[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_o[34]=function(t){return[lo(t),ao(t)]},_o[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},_o[136]=function(t){return[uo(t),so(t)]},_o[153]=function(t){return[ro(t),no(t)]},_o[102]=function(t){return[io(t),oo(t)]},_o[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},_o[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_o[152]=function(t){return[ro(t),so(t)]},_o[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},_o[137]=function(t){return[uo(t),no(t)]},_o[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},_o[98]=function(t){return[ao(t),oo(t)]},_o[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},_o[38]=function(t){return[io(t),lo(t)]},_o[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var jo=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=ko(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Fo=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return ko(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Bo=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e},0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=ko(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return g(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=h([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=on(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,r=t.getEnvelope();return e.forEach(function(e){var o,s,a,l,h,c,f=e.getEnvelope();if(i&&(n=i.getEnvelope()),s=r,a=(o=f).geometry.coordinates.map(function(t){return t[0]}),l=o.geometry.coordinates.map(function(t){return t[1]}),h=s.geometry.coordinates.map(function(t){return t[0]}),c=s.geometry.coordinates.map(function(t){return t[1]}),(Math.max(null,a)!==Math.max(null,h)||Math.max(null,l)!==Math.max(null,c)||Math.min(null,a)!==Math.min(null,h)||Math.min(null,l)!==Math.min(null,c))&&Do(f,r)){var p=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return n=t,i=e.from.coordinates,n[0]===i[0]&&n[1]===i[1];var n,i})});p&&e.inside(u(p))&&(i&&!Do(n,f)||(i=e))}}),i},t.prototype.inside=function(t){return de(t,this.toPolygon())},t}(),Uo=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return J(e,function(t){j(t,"LineString","Graph::fromGeoJson"),Z(t,function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e})}),n},t.prototype.getNode=function(t){var e=jo.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new jo(t)),n},t.prototype.addEdge=function(t,e){var n=new Fo(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(i=l),u&&(i&&(i.next=u,i=void 0),n||(n=u)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++i}),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Bo;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function Go(t,e){var n=!0;return J(t,function(t){J(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,i=e.coordinates,!(n[0]===i[0]&&n[1]===i[1]);case"LineString":return!zo(e,t);case"Polygon":return!de(t,e)}break;case"LineString":switch(e.type){case"Point":return!zo(t,e);case"LineString":return!function(t,e){return ci(t,e).features.length>0}(t,e);case"Polygon":return!Zo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!de(e,t);case"LineString":return!Zo(t,e);case"Polygon":return!function(t,e){for(var n=0,i=t.coordinates[0];n<i.length;n++)if(de(i[n],e))return!0;for(var r=0,o=e.coordinates[0];r<o.length;r++)if(de(o[r],t))return!0;return ci(er(t),er(e)).features.length>0}(e,t)}}var n,i;return!1}(t.geometry,e.geometry)})}),n}function zo(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(qo(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Zo(t,e){for(var n=0,i=e.coordinates;n<i.length;n++)if(de(i[n],t))return!0;return ci(e,er(t)).features.length>0}function qo(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Vo(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Wo(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ho(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Xo(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Jo(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function Yo(t,e){return ci(t,nr(e)).features.length>0}function Qo(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)de(u(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function Jo(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Ko=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:es};function $o(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function ts(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function es(t,e){return pr(t,e,{strict:!0})}Ko.prototype.compare=function(t,e){if(t.type!==e.type||!ts(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=$o(t),r=$o(e);return i.every(function(t){return this.some(function(e){return n.compare(t,e)})},r)}}return!1},Ko.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Ko.prototype.compareLine=function(t,e,n,i){if(!ts(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},Ko.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},Ko.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Ko.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every(function(t){return this.some(function(e){return r.compareLine(t,e,1,!0)})},i)}return!1},Ko.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Ko.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Ko.prototype.removePseudo=function(t){return t};var ns=Ko;function is(t,e){var n=B(t),i=B(e),r=n.type,o=i.type;if("MultiPoint"===r&&"MultiPoint"!==o||("LineString"===r||"MultiLineString"===r)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===r||"MultiPolygon"===r)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===r)throw new Error("Point geometry not supported");if(new ns({precision:6}).compare(t,e))return!1;var s=0;switch(r){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<i.coordinates.length;u++){var l=n.coordinates[a],h=i.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":$(t,function(t){$(e,function(e){dr(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":$(t,function(t){$(e,function(e){ci(t,e).features.length&&s++})})}return s>0}function rs(t,e){var n=!1;return J(t,function(t){J(e,function(e){if(!0===n)return!0;n=!Go(t.geometry,e.geometry)})}),n}var os=Ft(function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),ss=Ft(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,u=0;u<h;u++)s[u]=0;for(var l=0;l<n;l++){var h=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<h;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<h;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)}),as=Ft(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),us=Ft(function(t){if(t.exports)var e=as;function n(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}n.prototype.run=function(t,n,i,r){this._init(t,n,i,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},n.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},n.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}})},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=n)}),ls=Ft(function(t){t.exports&&(t.exports={DBSCAN:os,KMEANS:ss,OPTICS:us,PriorityQueue:as})}),hs=function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},cs=hs,fs=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},ps=hs;function ds(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}var ys=function(t,e,n,i){var r=[],o=[],s=[],a=[],u=!1,l=i||1e4,h=t.length,c=t[0].length,f=c>0,p=[];if(n)r="kmrand"==n?function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?cs:fs,i=[],r=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*r)];for(o&&s.join("_"),i.push(s);i.length<e;){for(var a=[],u=i.length,l=0,h=[],c=0;c<r;c++){for(var f=1/0,p=0;p<u;p++){var d=n(t[c],i[p]);d<=f&&(f=d)}a[c]=f}for(var y=0;y<r;y++)l+=a[y];for(var g=0;g<r;g++)h[g]={i:g,v:t[g],pr:a[g]/l,cs:0};h.sort(function(t,e){return t.pr-e.pr}),h[0].cs=h[0].pr;for(var v=1;v<r;v++)h[v].cs=h[v-1].cs+h[v].pr;for(var m=Math.random(),_=0;_<r-1&&h[_++].cs<m;);i.push(h[_-1].v)}return i}(t,e):n;else for(var d={};r.length<e;){var y=Math.floor(Math.random()*h);d[y]||(d[y]=!0,r.push(t[y]))}do{ds(e,0,p);for(var g=0;g<h;g++){for(var v=1/0,m=0,_=0;_<e;_++)(a=f?ps(t[g],r[_]):Math.abs(t[g]-r[_]))<=v&&(v=a,m=_);s[g]=m,p[m]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=f?ds(c,0,b[x]):0,o[x]=r[x];if(f){for(var w=0;w<e;w++)r[w]=[];for(var S=0;S<h;S++)for(var P=b[s[S]],C=t[S],T=0;T<c;T++)P[T]+=C[T];u=!0;for(var O=0;O<e;O++){for(var E=r[O],L=b[O],M=o[O],I=p[O],N=0;N<c;N++)E[N]=L[N]/I||0;if(u)for(var A=0;A<c;A++)if(M[A]!=E[A]){u=!1;break}}}else{for(var R=0;R<h;R++)b[s[R]]+=t[R];for(var k=0;k<e;k++)r[k]=b[k]/p[k]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=r[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:r}};function gs(t,e){return S(vr(t[0],t[1]))===S(vr(e[0],e[1]))}function vs(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function ms(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var _s={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||_s.heuristics.manhattan,o=i.closest||!1,s=new ws(function(t){return t.f}),a=e;for(e.h=r(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return ms(u);u.closed=!0;for(var l=t.neighbors(u),h=0,c=l.length;h<c;++h){var f=l[h];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||r(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?ms(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function bs(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new xs(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function xs(t,e,n){this.x=t,this.y=e,this.weight=n}function ws(t){this.content=[],this.scoreFunction=t}function Ss(t,e){for(var n=0;n<e.features.length;n++)if(de(t,e.features[n]))return!0;return!1}function Ps(t){return function(){return t}}function Cs(t){return t[0]}function Ts(t){return t[1]}function Os(){this._=null}function Es(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ls(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ms(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Is(t){for(;t.L;)t=t.L;return t}function Ns(t,e,n,i){var r=[null,null],o=ta.push(r)-1;return r.left=t,r.right=e,n&&Rs(r,t,e,n),i&&Rs(r,e,t,i),Ks[t.index].halfedges.push(o),Ks[e.index].halfedges.push(o),r}function As(t,e,n){var i=[e,n];return i.left=t,i}function Rs(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function ks(t,e,n,i,r){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>h&&(h=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*f,l+h*p]),c<1&&(t[1]=[u+c*f,l+c*p]),!0)}}}}}function Ds(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],f=l[1],p=h[0],d=h[1],y=(c+p)/2,g=(f+d)/2;if(d===f){if(y<e||y>=i)return;if(c>p){if(u){if(u[1]>=r)return}else u=[y,n];o=[y,r]}else{if(u){if(u[1]<n)return}else u=[y,r];o=[y,n]}}else if(a=g-(s=(c-p)/(d-f))*y,s<-1||s>1)if(c>p){if(u){if(u[1]>=r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(u){if(u[1]<n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function js(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Fs(t,e){return e[+(e.left!==t.site)]}function Bs(t,e){return e[+(e.left===t.site)]}bs.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)_s.cleanNode(this.nodes[t])},bs.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)_s.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},bs.prototype.markDirty=function(t){this.dirtyNodes.push(t)},bs.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},bs.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},xs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},xs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},xs.prototype.isWall=function(){return 0===this.weight},ws.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(r=this.scoreFunction(u))<i&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Os.prototype={constructor:Os,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Is(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ls(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ms(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ms(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ls(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?Is(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ls(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ms(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ls(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ms(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ls(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ms(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Us,Gs=[];function zs(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],u=i[0]-s,l=i[1]-a,h=o[0]-s,c=o[1]-a,f=2*(u*c-l*h);if(!(f>=-na)){var p=u*u+l*l,d=h*h+c*c,y=(c*p-l*d)/f,g=(u*d-h*p)/f,v=Gs.pop()||new function(){Es(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=r,v.x=y+s,v.y=(v.cy=g+a)+Math.sqrt(y*y+g*g),t.circle=v;for(var m=null,_=$s._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}$s.insert(m,v),m||(Us=v)}}}}function Zs(t){var e=t.circle;e&&(e.P||(Us=e.N),$s.remove(e),Gs.push(e),Es(e),t.circle=null)}var qs=[];function Vs(t){var e=qs.pop()||new function(){Es(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Ws(t){Zs(t),Js.remove(t),qs.push(t),Es(t)}function Hs(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];Ws(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<ea&&Math.abs(i-u.circle.cy)<ea;)o=u.P,a.unshift(u),Ws(u),u=o;a.unshift(u),Zs(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<ea&&Math.abs(i-l.circle.cy)<ea;)s=l.N,a.push(l),Ws(l),l=s;a.push(l),Zs(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],Rs(l.edge,u.site,l.site,r);u=a[0],(l=a[c-1]).edge=Ns(u.site,l.site,null,r),zs(u),zs(l)}function Xs(t){for(var e,n,i,r,o=t[0],s=t[1],a=Js._;a;)if((i=Ys(a,s)-o)>ea)a=a.L;else{if(!((r=o-Qs(a,s))>ea)){i>-ea?(e=a.P,n=a):r>-ea?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ks[t.index]={site:t,halfedges:[]}}(t);var u=Vs(t);if(Js.insert(e,u),e||n){if(e===n)return Zs(e),n=Vs(e.site),Js.insert(u,n),u.edge=n.edge=Ns(e.site,u.site),zs(e),void zs(n);if(n){Zs(e),Zs(n);var l=e.site,h=l[0],c=l[1],f=t[0]-h,p=t[1]-c,d=n.site,y=d[0]-h,g=d[1]-c,v=2*(f*g-p*y),m=f*f+p*p,_=y*y+g*g,b=[(g*m-p*_)/v+h,(f*_-y*m)/v+c];Rs(n.edge,l,d,b),u.edge=Ns(l,t,null,b),n.edge=Ns(t,d,null,b),zs(e),zs(n)}else u.edge=Ns(e.site,u.site)}}function Ys(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-i,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+r-o/2)))/c+i:(i+a)/2}function Qs(t,e){var n=t.N;if(n)return Ys(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Js,Ks,$s,ta,ea=1e-6,na=1e-12;function ia(t,e){return e[1]-t[1]||e[0]-t[0]}function ra(t,e){var n,i,r,o=t.sort(ia).pop();for(ta=[],Ks=new Array(t.length),Js=new Os,$s=new Os;;)if(r=Us,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Xs(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Hs(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Ks.length;r<o;++r)if((t=Ks[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=js(t,ta[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,i){for(var r,o=ta.length;o--;)Ds(r=ta[o],t,e,n,i)&&ks(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>ea||Math.abs(r[0][1]-r[1][1])>ea)||delete ta[o]}(s,a,u,l),function(t,e,n,i){var r,o,s,a,u,l,h,c,f,p,d,y,g=Ks.length,v=!0;for(r=0;r<g;++r)if(o=Ks[r]){for(s=o.site,a=(u=o.halfedges).length;a--;)ta[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=Bs(o,ta[u[a]]))[0],y=p[1],c=(h=Fs(o,ta[u[++a%l]]))[0],f=h[1],(Math.abs(d-c)>ea||Math.abs(y-f)>ea)&&(u.splice(a,0,ta.push(As(s,p,Math.abs(d-t)<ea&&i-y>ea?[t,Math.abs(c-t)<ea?f:i]:Math.abs(y-i)<ea&&n-d>ea?[Math.abs(f-i)<ea?c:n,i]:Math.abs(d-n)<ea&&y-e>ea?[n,Math.abs(c-n)<ea?f:e]:Math.abs(y-e)<ea&&d-t>ea?[Math.abs(f-e)<ea?c:t,e]:null))-1),++l);l&&(v=!1)}if(v){var m,_,b,x=1/0;for(r=0,v=null;r<g;++r)(o=Ks[r])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<x&&(x=b,v=o);if(v){var w=[t,e],S=[t,i],P=[n,i],C=[n,e];v.halfedges.push(ta.push(As(s=v.site,w,S))-1,ta.push(As(s,S,P))-1,ta.push(As(s,P,C))-1,ta.push(As(s,C,w))-1)}}for(r=0;r<g;++r)(o=Ks[r])&&(o.halfedges.length||delete Ks[r])}(s,a,u,l)}this.edges=ta,this.cells=Ks,Js=$s=ta=Ks=null}function oa(t){return(t=t.slice()).push(t[0]),h([t])}function sa(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,u=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!L(i))throw new Error("options must be an object");if(!E(r))throw new Error("steps must be a number");if(!E(s))throw new Error("angle must be a number");var l=A(t);if("degrees"===o)var c=C(s);else e=_r(t,e,90,{units:o}),n=_r(t,n,0,{units:o}),e=A(e)[0]-l[0],n=A(n)[1]-l[1];for(var f=[],p=0;p<r;p+=1){var d=-360*p/r,y=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(aa(d),2)),g=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(aa(d),2));if(d<-90&&d>=-270&&(y=-y),d<-180&&d>=-360&&(g=-g),"degrees"===o){var v=y*Math.cos(c)+g*Math.sin(c),m=g*Math.cos(c)-y*Math.sin(c);y=v,g=m}f.push([y+l[0],g+l[1]])}return f.push(f[0]),"degrees"===o?h([f],u):Lo(h([f],u),s,{pivot:a})}function aa(t){var e=t*Math.PI/180;return Math.tan(e)}function ua(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return Y(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!E(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&z(t,function(t){n+=t[0]*a,i+=t[1]*a,r+=a})}),u([n/r,i/r],e.properties,e)}function la(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ha(t,e){var n=0,i=0;z(t,function(r,o,s,a,u){u>n&&(n=u,i=o,e.push([]));var l=o-i,h=t.coordinates[u][l+1],c=r[0],f=r[1],p=h[0],d=h[1];e[u].push([.75*c+.25*p,.75*f+.25*d]),e[u].push([.25*c+.75*p,.25*f+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function ca(t,e){var n=0,i=0,r=0;z(t,function(o,s,a,u,l){u>r&&(r=u,i=s,e.push([[]])),l>n&&(n=l,i=s,e[u].push([]));var h=s-i,c=t.coordinates[u][l][h+1],f=o[0],p=o[1],d=c[0],y=c[1];e[u][l].push([.75*f+.25*d,.75*p+.25*y]),e[u][l].push([.25*f+.75*d,.25*p+.75*y])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function fa(t,e,n){void 0===n&&(n=2);var i=A(t),r=A(e),o=i[0]-r[0],s=i[1]-r[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function pa(t,e){var n=(e=e||{}).threshold||1e4,i=e.p||2,r=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];W(t,function(t){a.push(cn(t))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var h=l;h<a.length;h++){l===h&&(u[l][h]=0);var c=fa(a[l],a[h],i);u[l][h]=c,u[h][l]=c}for(l=0;l<a.length;l++)for(h=0;h<a.length;h++)0!==(c=u[l][h])&&(u[l][h]=r?c<=n?1:0:c<=n?Math.pow(c,o):0);if(s)for(l=0;l<a.length;l++){var f=u[l].reduce(function(t,e){return t+e},0);for(h=0;h<a.length;h++)u[l][h]=u[l][h]/f}return u}function da(t){for(var e=0,n=0,i=t;n<i.length;n++)e+=i[n];return e/t.length}function ya(t,e){return void 0===e&&(e={}),va(t,"mercator",e)}function ga(t,e){return void 0===e&&(e={}),va(t,"wgs84",e)}function va(t,e,n){void 0===n&&(n={});var i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?ma(t):_a(t):(!0!==i&&(t=we(t)),z(t,function(t){var n="mercator"===e?ma(t):_a(t);t[0]=n[0],t[1]=n[1]})),t}function ma(t){var e=Math.PI/180,n=6378137,i=20037508.342789244,r=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function _a(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}ra.prototype={constructor:ra,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Fs(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,u,l,h=n.site,c=-1,f=e[r[o-1]],p=f.left===h?f.right:f.left;++c<o;)s=p,p=(f=e[r[c]]).left===h?f.right:f.left,s&&p&&i<s.index&&i<p.index&&(u=s,l=p,((a=h)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([h.data,s.data,p.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var u=t-r.site[0],l=e-r.site[1],h=u*u+l*l;do{r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var u=t-a[0],l=e-a[1],c=u*u+l*l;c<h&&(h=c,s=a.index)}})}while(null!==s);return o._found=i,null==n||h<=n*n?r.site:null}};var ba=Object.freeze({__proto__:null,toMercator:ya,toWgs84:ga});function xa(t){return Array.isArray(t)?Ta(t):t&&t.bbox?Ta(t.bbox):[360*Ca(),180*Ca()]}function wa(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(u(xa(e.bbox)));return d(n)}function Sa(t,e){void 0===e&&(e={}),null==t&&(t=1),E(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),E(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],i=function(t){var i,r=[],o=Array.apply(null,new Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();r.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])}),r[r.length-1]=r[0],r=r.map((i=xa(e.bbox),function(t){return[t[0]+i[0],t[1]+i[1]]})),n.push(h([r]))},r=0;r<t;r++)i();return d(n)}function Pa(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;null==t&&(t=1),(!E(i)||void 0===i||i<2)&&(i=10),E(r)&&void 0!==r||(r=1e-4),E(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[xa(n)],l=0;l<i-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*r;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(f(u))}return d(s)}function Ca(){return Math.random()-.5}function Ta(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Oa=Object.freeze({__proto__:null,randomPosition:xa,randomPoint:wa,randomPolygon:Sa,randomLineString:Pa});function Ea(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return W(t,function(t){Na(t.properties,e)&&n.push(t)}),d(n)}function La(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=Ia(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var s=r[o],a=i[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(d(u),s,o)}}function Ma(t,e,n,i){var r=i;return La(t,e,function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)}),r}function Ia(t,e){var n={};return W(t,function(t,i){var r=t.properties||{};if(r.hasOwnProperty(String(e))){var o=r[e];n.hasOwnProperty(o)?n[o].push(i):n[o]=[i]}}),n}function Na(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!Na(t,e[i]))return!1;return!0}return Aa(t,e)}function Aa(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function Ra(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(n[r]=t[r])}return n}var ka=Object.freeze({__proto__:null,getCluster:Ea,clusterEach:La,clusterReduce:Ma,createBins:Ia,applyFilter:Na,propertiesContainsFilter:Aa,filterProperties:Ra}),Da=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */};function ja(t,e){return t>e?1:t<e?-1:0}function Fa(t,e,n){for(var i=new Da(null,null),r=i,o=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;r.right=e,r=e,e=e.right}}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function Ba(t,e,n,i){var r=new Da(t,e);if(null===n)return r.left=r.right=null,r;var o=i(t,(n=Fa(t,n,i)).key);return o<0?(r.left=n.left,r.right=n,n.left=null):o>=0&&(r.right=n.right,r.left=n,n.right=null),r}function Ua(t,e,n){var i=null,r=null;if(e){var o=n((e=Fa(t,e,n)).key,t);0===o?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}var Ga=function(){function t(t){void 0===t&&(t=ja),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Ba(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new Da(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,r=Fa(t,this._root,i),o=i(t,r.key);return 0===o?this._root=r:(o<0?(n.left=r.left,n.right=r,r.left=null):o>0&&(n.right=r.right,n.left=r,r.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=Fa(t,e,n)).key)?(null===e.left?i=e.right:(i=Fa(t,e.left,n)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Fa(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Fa(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],i=!1,r=new Da(null,null),o=r;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:i=!0;return o.next=null,r.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,r=this._comparator;if(n&&function t(e,n,i,r,o){if(!(i>=r)){for(var s=e[i+r>>1],a=i-1,u=r+1;;){do{a++}while(o(e[a],s)<0);do{u--}while(o(e[u],s)>0);if(a>=u)break;var l=e[a];e[a]=e[u],e[u]=l,l=n[a],n[a]=n[u],n[u]=l}t(e,n,i,u,o),t(e,n,u+1,r,o)}}(t,e,0,i-1,r),null===this._root)this._root=function t(e,n,i,r){var o=r-i;if(o>0){var s=i+Math.floor(o/2),a=e[s],u=n[s],l=new Da(a,u);return l.left=t(e,n,i,s),l.right=t(e,n,s+1,r),l}return null}(t,e,0,i),this._size=i;else{var o=function(t,e,n){for(var i=new Da(null,null),r=i,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(r.next=o,o=o.next):(r.next=s,s=s.next),r=r.next;return null!==o?r.next=o:null!==s&&(r.next=s),i.next}(this.toList(),function(t,e){for(var n=new Da(null,null),i=n,r=0;r<t.length;r++)i=i.next=new Da(t[r],e[r]);return i.next=null,n.next}(t,e),r);i=this._size+i,this._root=function t(e,n,i){var r=i-n;if(r>0){var o=n+Math.floor(r/2),s=t(e,n,o),a=e.head;return a.left=s,e.head=e.head.next,a.right=t(e,o+1,i),a}return null}({head:o},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,n,i,r,o){if(e){r(n+(i?" ":" ")+o(e)+"\n");var s=n+(i?"    ":"   ");e.left&&t(e.left,s,!1,r,o),e.right&&t(e.right,s,!0,r,o)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=Ua(t,this._root,i),o=r.left,s=r.right;i(t,e)<0?s=Ba(e,n,s,i):o=Ba(e,n,o,i),this._root=function(t,e,n){return null===e?t:(null===t||((e=Fa(t.key,e,n)).left=t),e)}(o,s,i)},t.prototype.split=function(t){return Ua(t,this._root,this._comparator)},t}();function za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function qa(t,e,n){return e&&Za(t.prototype,e),n&&Za(t,n),t}var Va=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Wa=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Ha=Number.EPSILON;void 0===Ha&&(Ha=Math.pow(2,-52));var Xa=Ha*Ha,Ya=function(t,e){if(-Ha<t&&t<Ha&&-Ha<e&&e<Ha)return 0;var n=t-e;return n*n<Xa*t*e?0:t<e?-1:1},Qa=function(){function t(){za(this,t),this.reset()}return qa(t,[{key:"reset",value:function(){this.xRounder=new Ja,this.yRounder=new Ja}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ja=function(){function t(){za(this,t),this.tree=new Ga,this.round(0)}return qa(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Ya(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===Ya(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),t}(),Ka=new Qa,$a=function(t,e){return t.x*e.y-t.y*e.x},tu=function(t,e){return t.x*e.x+t.y*e.y},eu=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},o=$a(i,r);return Ya(o,0)},nu=function(t){return Math.sqrt(tu(t,t))},iu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},ru=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},ou=function(){function t(e,n){za(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return qa(t,null,[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:au.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),qa(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,s,a,u,l=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,s=l.point,a={x:o.x-r.x,y:o.y-r.y},u={x:s.x-r.x,y:s.y-r.y},$a(u,a)/nu(u)/nu(a)),cosine:function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return tu(r,i)/nu(r)/nu(i)}(e.point,t.point,l.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),su=0,au=function(){function t(e,n,i,r){za(this,t),this.id=++su,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=r}return qa(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<i){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n>i){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(r>o){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return-1}if(r!==o){var g=u-s,v=r-n,m=l-a,_=o-i;if(g>v&&m<_)return 1;if(g<v&&m>_)return-1}return r>o?1:r<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),qa(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;var s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=Wa(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Va(e,s)&&0===this.comparePoint(s),l=Va(n,r)&&0===t.comparePoint(r),h=Va(e,a)&&0===this.comparePoint(a),c=Va(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&r.x===a.x&&r.y===a.y?null:r;if(u)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var f=function(t,e,n,i){if(0===e.x)return ru(n,i,t.x);if(0===i.x)return ru(t,e,n.x);if(0===e.y)return iu(n,i,t.y);if(0===i.y)return iu(t,e,n.y);var r=$a(e,i);if(0==r)return null;var o={x:n.x-t.x,y:n.y-t.y},s=$a(o,e)/r,a=$a(o,i)/r;return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}}(r,this.vector(),s,t.vector());return null===f?null:Va(i,f)?Ka.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new ou(e,!0),o=new ou(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new t(r,s,this.rings.slice(),this.windings.slice());return ou.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),ou.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,u=i.rings.length;a<u;a++){var l=i.rings[a],h=i.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var p=e[c],d=p.poly;if(-1===h.indexOf(d))if(p.isExterior)l.push(d);else{-1===h.indexOf(d)&&h.push(d);var y=l.indexOf(p.poly);-1!==y&&l.splice(y,1)}}for(var g=0,v=l.length;g<v;g++){var m=l[g].multiPoly;-1===i.indexOf(m)&&i.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(vu.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===vu.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(vu.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var r,o,s,a=ou.comparePoints(e,n);if(a<0)r=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,s=-1}return new t(new ou(r,!0),new ou(o,!1),[i],[s])}}]),t}(),uu=function(){function t(e,n,i){if(za(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=Ka.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Ka.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(au.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}r.x===o.x&&r.y===o.y||this.segments.push(au.fromRing(o,r,this))}return qa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),t}(),lu=function(){function t(e,n){if(za(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new uu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new uu(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return qa(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),hu=function(){function t(e,n){if(za(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new lu(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return qa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),t}(),cu=function(){function t(e){za(this,t),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return qa(t,null,[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,a=u,l.push(a),a.point!==h;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var y=null,g=0,v=c.length;g<v;g++)if(c[g].point===a.point){y=g;break}if(null===y){c.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=c.splice(y)[0],b=l.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(l))}}return n}}]),qa(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==eu(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===eu(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],f=l;f!=h;f+=u)c.push([e[f].x,e[f].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];ou.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),t}(),fu=function(){function t(e){za(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return qa(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),t}(),pu=function(){function t(e){za(this,t),this.rings=e,this.polys=this._composePolys(e)}return qa(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new fu(r));else{var o=r.enclosingRing();o.poly||e.push(new fu(o)),o.poly.addInterior(r)}}return e}}]),t}(),du=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:au.compare;za(this,t),this.queue=e,this.tree=new Ga(n),this.segments=[]}return qa(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,s=void 0,a=void 0;void 0===s;)null===(r=this.tree.prev(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var h=this._splitSafely(s,l),c=0,f=h.length;c<f;c++)n.push(h[c])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var y=this._splitSafely(a,d),g=0,v=y.length;g<v;g++)n.push(y[g])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p?u:ou.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),b=0,x=_.length;b<x;b++)n.push(_[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var S=this._splitSafely(s,w),P=0,C=S.length;P<C;P++)n.push(S[P]);if(!a.isAnEndpoint(w))for(var T=this._splitSafely(a,w),O=0,E=T.length;O<E;O++)n.push(T[O])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),t}(),yu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,gu=void 0!==t&&Object({NODE_ENV:void 0}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,vu=new(function(){function t(){za(this,t)}return qa(t,[{key:"run",value:function(t,e,n){vu.type=t,Ka.reset();for(var i=[new hu(e,!0)],r=0,o=n.length;r<o;r++)i.push(new hu(n[r],!1));if(vu.numMultiPolys=i.length,"difference"===vu.type)for(var s=i[0],a=1;a<i.length;)null!==Wa(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===vu.type)for(var u=0,l=i.length;u<l;u++)for(var h=i[u],c=u+1,f=i.length;c<f;c++)if(null===Wa(h.bbox,i[c].bbox))return[];for(var p=new Ga(ou.compare),d=0,y=i.length;d<y;d++)for(var g=i[d].getSweepEvents(),v=0,m=g.length;v<m;v++)if(p.insert(g[v]),p.size>yu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new du(p),b=p.size,x=p.pop();x;){var w=x.key;if(p.size===b){var S=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>yu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>gu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var P=_.process(w),C=0,T=P.length;C<T;C++){var O=P[C];void 0===O.consumedBy&&p.insert(O)}b=p.size,x=p.pop()}Ka.reset();var E=cu.factory(_.segments);return new pu(E).getGeom()}}]),t}()),mu=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return vu.run("union",t,n)},_u=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return vu.run("intersection",t,n)};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var bu=function(){};bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var xu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),wu=function(){},Su={MAX_VALUE:{configurable:!0}};wu.isNaN=function(t){return Number.isNaN(t)},wu.doubleToLongBits=function(t){return t},wu.longBitsToDouble=function(t){return t},wu.isInfinite=function(t){return!Number.isFinite(t)},Su.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(wu,Su);var Pu=function(){},Cu=function(){},Tu=function(){};function Ou(){}var Eu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Lu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Eu.prototype.setOrdinate=function(t,e){switch(t){case Eu.X:this.x=e;break;case Eu.Y:this.y=e;break;case Eu.Z:this.z=e;break;default:throw new xu("Invalid ordinate index: "+t)}},Eu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!bu.equalsWithTolerance(this.x,e.x,n)&&!!bu.equalsWithTolerance(this.y,e.y,n)}},Eu.prototype.getOrdinate=function(t){switch(t){case Eu.X:return this.x;case Eu.Y:return this.y;case Eu.Z:return this.z}throw new xu("Invalid ordinate index: "+t)},Eu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||wu.isNaN(this.z))&&wu.isNaN(t.z)},Eu.prototype.equals=function(t){return t instanceof Eu&&this.equals2D(t)},Eu.prototype.equalInZ=function(t,e){return bu.equalsWithTolerance(this.z,t.z,e)},Eu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Eu.prototype.clone=function(){},Eu.prototype.copy=function(){return new Eu(this)},Eu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Eu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},Eu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Eu.prototype.hashCode=function(){var t=17;return t=37*(t=37*t+Eu.hashCode(this.x))+Eu.hashCode(this.y)},Eu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Eu.prototype.interfaces_=function(){return[Pu,Cu,Ou]},Eu.prototype.getClass=function(){return Eu},Eu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=wu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Lu.DimensionalComparator.get=function(){return Mu},Lu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Lu.NULL_ORDINATE.get=function(){return wu.NaN},Lu.X.get=function(){return 0},Lu.Y.get=function(){return 1},Lu.Z.get=function(){return 2},Object.defineProperties(Eu,Lu);var Mu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new xu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Mu.prototype.compare=function(t,e){var n=t,i=e,r=Mu.compare(n.x,i.x);if(0!==r)return r;var o=Mu.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:Mu.compare(n.z,i.z)},Mu.prototype.interfaces_=function(){return[Tu]},Mu.prototype.getClass=function(){return Mu},Mu.compare=function(t,e){return t<e?-1:t>e?1:wu.isNaN(t)?wu.isNaN(e)?0:-1:wu.isNaN(e)?1:0};var Iu=function(){};Iu.prototype.create=function(){},Iu.prototype.interfaces_=function(){return[]},Iu.prototype.getClass=function(){return Iu};var Nu=function(){},Au={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.toLocationSymbol=function(t){switch(t){case Nu.EXTERIOR:return"e";case Nu.BOUNDARY:return"b";case Nu.INTERIOR:return"i";case Nu.NONE:return"-"}throw new xu("Unknown location value: "+t)},Au.INTERIOR.get=function(){return 0},Au.BOUNDARY.get=function(){return 1},Au.EXTERIOR.get=function(){return 2},Au.NONE.get=function(){return-1},Object.defineProperties(Nu,Au);var Ru=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},ku=function(){},Du={LOG_10:{configurable:!0}};ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.log10=function(t){var e=Math.log(t);return wu.isInfinite(e)||wu.isNaN(e)?e:e/ku.LOG_10},ku.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},ku.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},ku.wrap=function(t,e){return t<0?e- -t%e:t%e},ku.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=r;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},ku.average=function(t,e){return(t+e)/2},Du.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ku,Du);var ju=function(t){this.str=t};ju.prototype.append=function(t){this.str+=t},ju.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},ju.prototype.toString=function(t){return this.str};var Fu=function(t){this.value=t};Fu.prototype.intValue=function(){return this.value},Fu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Fu.isNaN=function(t){return Number.isNaN(t)};var Bu=function(){};Bu.isWhitespace=function(t){return t<=32&&t>=0||127===t},Bu.toUpperCase=function(t){return t.toUpperCase()};var Uu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},Gu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Uu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Uu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=Uu.magnitude(n._hi),r=Uu.TEN.pow(i);(n=n.divide(r)).gt(Uu.TEN)?(n=n.divide(Uu.TEN),i+=1):n.lt(Uu.ONE)&&(n=n.multiply(Uu.TEN),i-=1);for(var o=i+1,s=new ju,a=Uu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,s.append(c),n=n.subtract(Uu.valueOf(l)).multiply(Uu.TEN),h&&n.selfAdd(Uu.TEN);var f=!0,p=Uu.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=i,s.toString()},Uu.prototype.sqr=function(){return this.multiply(this)},Uu.prototype.doubleValue=function(){return this._hi+this._lo},Uu.prototype.subtract=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Uu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Uu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Uu.prototype.selfSubtract=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Uu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Uu.prototype.min=function(t){return this.le(t)?this:t},Uu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Uu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null,h=null,c=null;return u=this._hi/n,c=(r=(l=Uu.SPLIT*u)-(r=l-u))*(s=(c=Uu.SPLIT*n)-(s=c-n))-(h=u*n)+r*(a=n-s)+(o=u-r)*s+o*a,c=u+(l=(this._hi-h-c+this._lo-u*i)/n),this._hi=c,this._lo=u-c+l,this}},Uu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Uu.prototype.divide=function(){if(arguments[0]instanceof Uu){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=Uu.SPLIT*o)-(e=s-o)),u=e*(i=(u=Uu.SPLIT*t._hi)-(i=u-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),h=o-u+s;return new Uu(l,h)}if("number"==typeof arguments[0]){var c=arguments[0];return wu.isNaN(c)?Uu.createNaN():Uu.copy(this).selfDivide(c,0)}},Uu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Uu.prototype.pow=function(t){if(0===t)return Uu.valueOf(1);var e=new Uu(this),n=Uu.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Uu.prototype.ceil=function(){if(this.isNaN())return Uu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Uu(t,e)},Uu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Uu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Uu.prototype.setValue=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Uu.prototype.max=function(t){return this.ge(t)?this:t},Uu.prototype.sqrt=function(){if(this.isZero())return Uu.valueOf(0);if(this.isNegative())return Uu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Uu.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},Uu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Uu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),i=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],h=null,c=null,f=null,p=null,d=null,y=null,g=null;p=this._hi+u,c=this._lo+l,d=p-(y=p-this._hi),f=c-(g=c-this._lo);var v=(h=p+(y=(d=u-y+(this._hi-d))+c))+(y=(f=l-g+(this._lo-f))+(y+(p-h))),m=y+(h-v);return this._hi=v,this._lo=m,this}},Uu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Uu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,l=null;r=(u=Uu.SPLIT*this._hi)-this._hi,l=Uu.SPLIT*n,r=u-r,o=this._hi-r,s=l-n;var h=(u=this._hi*n)+(l=r*(s=l-s)-u+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),c=l+(r=u-h);return this._hi=h,this._lo=c,this}},Uu.prototype.selfSqr=function(){return this.selfMultiply(this)},Uu.prototype.floor=function(){if(this.isNaN())return Uu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Uu(t,e)},Uu.prototype.negate=function(){return this.isNaN()?this:new Uu(-this._hi,-this._lo)},Uu.prototype.clone=function(){},Uu.prototype.multiply=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return t.isNaN()?Uu.createNaN():Uu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return wu.isNaN(e)?Uu.createNaN():Uu.copy(this).selfMultiply(e,0)}},Uu.prototype.isNaN=function(){return wu.isNaN(this._hi)},Uu.prototype.intValue=function(){return Math.trunc(this._hi)},Uu.prototype.toString=function(){var t=Uu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Uu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+Uu.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+Uu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},Uu.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this._hi)-(r=(s=Uu.SPLIT*n)-(r=s-n)),o=(a=Uu.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Uu(u,n-u+s)},Uu.prototype.toSciNotation=function(){if(this.isZero())return Uu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=Uu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},Uu.prototype.abs=function(){return this.isNaN()?Uu.NaN:this.isNegative()?this.negate():new Uu(this)},Uu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Uu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Uu.prototype.add=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return Uu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Uu.copy(this).selfAdd(e)}},Uu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Uu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},Uu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Uu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Uu.prototype.trunc=function(){return this.isNaN()?Uu.NaN:this.isPositive()?this.floor():this.ceil()},Uu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Uu.prototype.interfaces_=function(){return[Ou,Pu,Cu]},Uu.prototype.getClass=function(){return Uu},Uu.sqr=function(t){return Uu.valueOf(t).selfMultiply(t)},Uu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Uu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Uu(e)}},Uu.sqrt=function(t){return Uu.valueOf(t).sqrt()},Uu.parse=function(t){for(var e=0,n=t.length;Bu.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new Uu,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,Bu.isDigit(l)){var h=l-"0";o.selfMultiply(Uu.TEN),o.selfAdd(h),s++}else{if("."!==l){if("e"===l||"E"===l){var c=t.substring(e);try{u=Fu.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=Uu.TEN.pow(p);f=o.divide(d)}else if(p<0){var y=Uu.TEN.pow(-p);f=o.multiply(y)}return i?f.negate():f},Uu.createNaN=function(){return new Uu(wu.NaN,wu.NaN)},Uu.copy=function(t){return new Uu(t)},Uu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},Uu.stringOfChar=function(t,e){for(var n=new ju,i=0;i<e;i++)n.append(t);return n.toString()},Gu.PI.get=function(){return new Uu(3.141592653589793,1.2246467991473532e-16)},Gu.TWO_PI.get=function(){return new Uu(6.283185307179586,2.4492935982947064e-16)},Gu.PI_2.get=function(){return new Uu(1.5707963267948966,6.123233995736766e-17)},Gu.E.get=function(){return new Uu(2.718281828459045,1.4456468917292502e-16)},Gu.NaN.get=function(){return new Uu(wu.NaN,wu.NaN)},Gu.EPS.get=function(){return 1.23259516440783e-32},Gu.SPLIT.get=function(){return 134217729},Gu.MAX_PRINT_DIGITS.get=function(){return 32},Gu.TEN.get=function(){return Uu.valueOf(10)},Gu.ONE.get=function(){return Uu.valueOf(1)},Gu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Gu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Uu,Gu);var zu=function(){},Zu={DP_SAFE_EPSILON:{configurable:!0}};zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.orientationIndex=function(t,e,n){var i=zu.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=Uu.valueOf(e.x).selfAdd(-t.x),o=Uu.valueOf(e.y).selfAdd(-t.y),s=Uu.valueOf(n.x).selfAdd(-e.x),a=Uu.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},zu.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},zu.intersection=function(t,e,n,i){var r=Uu.valueOf(i.y).selfSubtract(n.y).selfMultiply(Uu.valueOf(e.x).selfSubtract(t.x)),o=Uu.valueOf(i.x).selfSubtract(n.x).selfMultiply(Uu.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=Uu.valueOf(i.x).selfSubtract(n.x).selfMultiply(Uu.valueOf(t.y).selfSubtract(n.y)),u=Uu.valueOf(i.y).selfSubtract(n.y).selfMultiply(Uu.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),h=Uu.valueOf(t.x).selfAdd(Uu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),c=Uu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Uu.valueOf(t.y).selfSubtract(n.y)),f=Uu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Uu.valueOf(t.x).selfSubtract(n.x)),p=c.subtract(f).selfDivide(s).doubleValue(),d=Uu.valueOf(n.y).selfAdd(Uu.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new Eu(h,d)},zu.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return zu.signum(s);i=r+o}else{if(!(r<0))return zu.signum(s);if(o>=0)return zu.signum(s);i=-r-o}var a=zu.DP_SAFE_EPSILON*i;return s>=a||-s>=a?zu.signum(s):2},zu.signum=function(t){return t>0?1:t<0?-1:0},Zu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(zu,Zu);var qu=function(){},Vu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Vu.X.get=function(){return 0},Vu.Y.get=function(){return 1},Vu.Z.get=function(){return 2},Vu.M.get=function(){return 3},qu.prototype.setOrdinate=function(t,e,n){},qu.prototype.size=function(){},qu.prototype.getOrdinate=function(t,e){},qu.prototype.getCoordinate=function(){},qu.prototype.getCoordinateCopy=function(t){},qu.prototype.getDimension=function(){},qu.prototype.getX=function(t){},qu.prototype.clone=function(){},qu.prototype.expandEnvelope=function(t){},qu.prototype.copy=function(){},qu.prototype.getY=function(t){},qu.prototype.toCoordinateArray=function(){},qu.prototype.interfaces_=function(){return[Cu]},qu.prototype.getClass=function(){return qu},Object.defineProperties(qu,Vu);var Wu=function(){},Hu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wu),Xu=function(){};Xu.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},Xu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Yu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],y=c.y-f.y,g=f.x-c.x,v=c.x*f.y-f.x*c.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=g*b-_*v,this.y=m*v-y*b,this.w=y*_-m*g}};Yu.prototype.getY=function(){var t=this.y/this.w;if(wu.isNaN(t)||wu.isInfinite(t))throw new Hu;return t},Yu.prototype.getX=function(){var t=this.x/this.w;if(wu.isNaN(t)||wu.isInfinite(t))throw new Hu;return t},Yu.prototype.getCoordinate=function(){var t=new Eu;return t.x=this.getX(),t.y=this.getY(),t},Yu.prototype.interfaces_=function(){return[]},Yu.prototype.getClass=function(){return Yu},Yu.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,l=n.x*i.y-i.x*n.y,h=r*u-a*o,c=(o*l-u*s)/h,f=(a*s-r*l)/h;if(wu.isNaN(c)||wu.isInfinite(c)||wu.isNaN(f)||wu.isInfinite(f))throw new Hu;return new Eu(c,f)};var Qu=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Eu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ju={serialVersionUID:{configurable:!0}};Qu.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Qu.prototype.equals=function(t){if(!(t instanceof Qu))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Qu.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Qu;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new Qu(e,i,n,r)},Qu.prototype.isNull=function(){return this._maxx<this._minx},Qu.prototype.getMaxX=function(){return this._maxx},Qu.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Qu){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},Qu.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Qu){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},Qu.prototype.getMinY=function(){return this._miny},Qu.prototype.getMinX=function(){return this._minx},Qu.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Qu){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Qu.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Qu.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Qu.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Qu.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Qu.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Qu.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Qu.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Qu.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Qu.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Qu.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Qu){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},Qu.prototype.centre=function(){return this.isNull()?null:new Eu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Qu.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Qu){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Qu.prototype.getMaxY=function(){return this._maxy},Qu.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Qu.prototype.hashCode=function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+Eu.hashCode(this._minx))+Eu.hashCode(this._maxx))+Eu.hashCode(this._miny))+Eu.hashCode(this._maxy)},Qu.prototype.interfaces_=function(){return[Pu,Ou]},Qu.prototype.getClass=function(){return Qu},Qu.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),h=Math.max(i.y,r.y),l>u||h<a))}},Ju.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Qu,Ju);var Ku={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$u=function(t){this.geometryFactory=t||new Ah};$u.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=Ku.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Ku.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],el[n]&&(e=el[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$u.prototype.write=function(t){return this.extractGeometry(t)},$u.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!tl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+tl[e].apply(this,[t])+")"};var tl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return tl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+tl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(tl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(tl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+tl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+tl.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+tl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+tl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},el={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Ku.spaces);return this.geometryFactory.createPoint(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Ku.trimParens,"$1"),i.push(el.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Ku.spaces),i.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Ku.spaces),i.push(new Eu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Ku.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Ku.trimParens,"$1"),i.push(el.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e,n,i;if(void 0===t)return this.geometryFactory.createPolygon();for(var r,o=t.trim().split(Ku.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Ku.trimParens,"$1"),n=el.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Ku.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Ku.trimParens,"$1"),i.push(el.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},nl=function(t){this.parser=new $u(t)};nl.prototype.write=function(t){return this.parser.write(t)},nl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var il=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),rl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(il),ol=function(){};ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.shouldNeverReachHere=function(){if(0===arguments.length)ol.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new rl("Should never reach here"+(null!==t?": "+t:""))}},ol.isTrue=function(){var t;if(1===arguments.length)ol.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new rl:new rl(t)},ol.equals=function(){var t,e,n;if(2===arguments.length)ol.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new rl("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var sl=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Eu,this._intPt[1]=new Eu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},al={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};sl.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},sl.prototype.getTopologySummary=function(){var t=new ju;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},sl.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},sl.prototype.getIntersectionNum=function(){return this._result},sl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},sl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},sl.prototype.setPrecisionModel=function(t){this._precisionModel=t},sl.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},sl.prototype.getIntersection=function(t){return this._intPt[t]},sl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},sl.prototype.hasIntersection=function(){return this._result!==sl.NO_INTERSECTION},sl.prototype.getEdgeDistance=function(t,e){return sl.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},sl.prototype.isCollinear=function(){return this._result===sl.COLLINEAR_INTERSECTION},sl.prototype.toString=function(){return nl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+nl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},sl.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},sl.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},sl.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl},sl.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return ol.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},sl.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return ol.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},al.DONT_INTERSECT.get=function(){return 0},al.DO_INTERSECT.get=function(){return 1},al.COLLINEAR.get=function(){return 2},al.NO_INTERSECTION.get=function(){return 0},al.POINT_INTERSECTION.get=function(){return 1},al.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(sl,al);var ul=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Qu(this._inputLines[0][0],this._inputLines[0][1]),n=new Qu(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,Qu.intersects(n,i,e)&&0===cl.orientationIndex(n,i,e)&&0===cl.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Yu.intersection(t,n,i,r)}catch(s){if(!(s instanceof Hu))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new Eu(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=zu.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);Xu.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&Xu.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new Eu(t),o=new Eu(e),s=new Eu(n),a=new Eu(i),u=new Eu;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=Qu.intersects(e,n,i),s=Qu.intersects(e,n,r),a=Qu.intersects(i,r,e),u=Qu.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,h=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=((o>l?o:l)+(a<c?a:c))/2,d=((s>h?s:h)+(u<f?u:f))/2;r.x=p,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!Qu.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=cl.orientationIndex(e,n,i),s=cl.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=cl.orientationIndex(i,r,e),u=cl.orientationIndex(i,r,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new Eu(i):0===s?this._intPt[0]=new Eu(r):0===a?this._intPt[0]=new Eu(e):0===u&&(this._intPt[0]=new Eu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=cl.distancePointLine(t,n,i),s=cl.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=cl.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=cl.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(sl),ll=function(){};ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll},ll.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ll.signOfDet2x2(i,r,o,s)},ll.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var hl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};hl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=ll.signOfDet2x2(r,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},hl.prototype.isPointInPolygon=function(){return this.getLocation()!==Nu.EXTERIOR},hl.prototype.getLocation=function(){return this._isPointOnSegment?Nu.BOUNDARY:this._crossingCount%2==1?Nu.INTERIOR:Nu.EXTERIOR},hl.prototype.isOnSegment=function(){return this._isPointOnSegment},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl},hl.locatePointInRing=function(){if(arguments[0]instanceof Eu&&Ru(arguments[1],qu)){for(var t=arguments[0],e=arguments[1],n=new hl(t),i=new Eu,r=new Eu,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Eu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new hl(s),l=1;l<a.length;l++){var h=a[l],c=a[l-1];if(u.countSegment(h,c),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var cl=function(){},fl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};cl.prototype.interfaces_=function(){return[]},cl.prototype.getClass=function(){return cl},cl.orientationIndex=function(t,e,n){return zu.orientationIndex(t,e,n)},cl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,s=t[i-1].y;e+=r*(s-o)}return e/2}if(Ru(arguments[0],qu)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new Eu,h=new Eu,c=new Eu;a.getCoordinate(0,h),a.getCoordinate(1,c);var f=h.x;c.x-=f;for(var p=0,d=1;d<u-1;d++)l.y=h.y,h.x=c.x,h.y=c.y,a.getCoordinate(d+1,c),c.x-=f,p+=h.x*(l.y-c.y);return p/2}},cl.distanceLineLine=function(t,e,n,i){if(t.equals(e))return cl.distancePointLine(t,n,i);if(n.equals(i))return cl.distancePointLine(i,t,e);var r=!1;if(Qu.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?ku.min(cl.distancePointLine(t,n,i),cl.distancePointLine(e,n,i),cl.distancePointLine(n,t,e),cl.distancePointLine(i,t,e)):0},cl.isPointInRing=function(t,e){return cl.locatePointInRing(t,e)!==Nu.EXTERIOR},cl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new Eu;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,h=u-o;n+=Math.sqrt(l*l+h*h),r=a,o=u}return n},cl.isCCW=function(t){var e=t.length-1;if(e<3)throw new xu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=cl.computeOrientation(u,n,l);return 0===h?u.x>l.x:h>0},cl.locatePointInRing=function(t,e){return hl.locatePointInRing(t,e)},cl.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},cl.computeOrientation=function(t,e,n){return cl.orientationIndex(t,e,n)},cl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new xu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=cl.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(h)*Math.sqrt(u)}},cl.isOnLine=function(t,e){for(var n=new ul,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},fl.CLOCKWISE.get=function(){return-1},fl.RIGHT.get=function(){return cl.CLOCKWISE},fl.COUNTERCLOCKWISE.get=function(){return 1},fl.LEFT.get=function(){return cl.COUNTERCLOCKWISE},fl.COLLINEAR.get=function(){return 0},fl.STRAIGHT.get=function(){return cl.COLLINEAR},Object.defineProperties(cl,fl);var pl=function(){};pl.prototype.filter=function(t){},pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl};var dl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},yl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};dl.prototype.isGeometryCollection=function(){return this.getSortIndex()===dl.SORTINDEX_GEOMETRYCOLLECTION},dl.prototype.getFactory=function(){return this._factory},dl.prototype.getGeometryN=function(t){return this},dl.prototype.getArea=function(){return 0},dl.prototype.isRectangle=function(){return!1},dl.prototype.equals=function(){if(arguments[0]instanceof dl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof dl))return!1;var n=e;return this.equalsExact(n)}},dl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},dl.prototype.geometryChanged=function(){this.apply(dl.geometryChangedFilter)},dl.prototype.geometryChangedAction=function(){this._envelope=null},dl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},dl.prototype.getLength=function(){return 0},dl.prototype.getNumGeometries=function(){return 1},dl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},dl.prototype.getUserData=function(){return this._userData},dl.prototype.getSRID=function(){return this._SRID},dl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},dl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===dl.SORTINDEX_GEOMETRYCOLLECTION)throw new xu("This method does not support GeometryCollection arguments")},dl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},dl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},dl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},dl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Qu(this._envelope)},dl.prototype.setSRID=function(t){this._SRID=t},dl.prototype.setUserData=function(t){this._userData=t},dl.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},dl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},dl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===dl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===dl.SORTINDEX_MULTIPOINT||this.getSortIndex()===dl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===dl.SORTINDEX_MULTIPOLYGON},dl.prototype.interfaces_=function(){return[Cu,Pu,Ou]},dl.prototype.getClass=function(){return dl},dl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},dl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},yl.serialVersionUID.get=function(){return 0x799ea46522854c00},yl.SORTINDEX_POINT.get=function(){return 0},yl.SORTINDEX_MULTIPOINT.get=function(){return 1},yl.SORTINDEX_LINESTRING.get=function(){return 2},yl.SORTINDEX_LINEARRING.get=function(){return 3},yl.SORTINDEX_MULTILINESTRING.get=function(){return 4},yl.SORTINDEX_POLYGON.get=function(){return 5},yl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},yl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},yl.geometryChangedFilter.get=function(){return gl},Object.defineProperties(dl,yl);var gl=function(){};gl.interfaces_=function(){return[pl]},gl.filter=function(t){t.geometryChangedAction()};var vl=function(){};vl.prototype.filter=function(t){},vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl};var ml=function(){},_l={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ml.prototype.isInBoundary=function(t){},ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},_l.Mod2BoundaryNodeRule.get=function(){return bl},_l.EndPointBoundaryNodeRule.get=function(){return xl},_l.MultiValentEndPointBoundaryNodeRule.get=function(){return wl},_l.MonoValentEndPointBoundaryNodeRule.get=function(){return Sl},_l.MOD2_BOUNDARY_RULE.get=function(){return new bl},_l.ENDPOINT_BOUNDARY_RULE.get=function(){return new xl},_l.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new wl},_l.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Sl},_l.OGC_SFS_BOUNDARY_RULE.get=function(){return ml.MOD2_BOUNDARY_RULE},Object.defineProperties(ml,_l);var bl=function(){};bl.prototype.isInBoundary=function(t){return t%2==1},bl.prototype.interfaces_=function(){return[ml]},bl.prototype.getClass=function(){return bl};var xl=function(){};xl.prototype.isInBoundary=function(t){return t>0},xl.prototype.interfaces_=function(){return[ml]},xl.prototype.getClass=function(){return xl};var wl=function(){};wl.prototype.isInBoundary=function(t){return t>1},wl.prototype.interfaces_=function(){return[ml]},wl.prototype.getClass=function(){return wl};var Sl=function(){};Sl.prototype.isInBoundary=function(t){return 1===t},Sl.prototype.interfaces_=function(){return[ml]},Sl.prototype.getClass=function(){return Sl};var Pl=function(){};function Cl(t){this.message=t||""}Pl.prototype.add=function(){},Pl.prototype.addAll=function(){},Pl.prototype.isEmpty=function(){},Pl.prototype.iterator=function(){},Pl.prototype.size=function(){},Pl.prototype.toArray=function(){},Pl.prototype.remove=function(){},Cl.prototype=new Error,Cl.prototype.name="IndexOutOfBoundsException";var Tl=function(){};Tl.prototype.hasNext=function(){},Tl.prototype.next=function(){},Tl.prototype.remove=function(){};var Ol=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Pl);function El(t){this.message=t||""}El.prototype=new Error,El.prototype.name="NoSuchElementException";var Ll=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Pl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Pl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Ml(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Cl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Ol),Ml=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new El;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Tl),Il=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];return this.add(i,r,!0),!0}if(arguments[0]instanceof Eu&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var h=arguments[0],c=arguments[1],f=arguments[2];if(f)for(var p=0;p<h.length;p++)e.add(h[p],c);else for(var d=h.length-1;d>=0;d--)e.add(h[d],c);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Eu){var y=arguments[0],g=arguments[1],v=arguments[2];if(!v){var m=this.size();if(m>0){if(y>0){var _=this.get(y-1);if(_.equals2D(g))return null}if(y<m){var b=this.get(y);if(b.equals2D(g))return null}}}t.prototype.add.call(this,y,g)}}else if(4===arguments.length){var x=arguments[0],w=arguments[1],S=arguments[2],P=arguments[3],C=1;S>P&&(C=-1);for(var T=S;T!==P;T+=C)e.add(x[T],w);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Eu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ll),Nl=function(){},Al={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Al.ForwardComparator.get=function(){return Rl},Al.BidirectionalComparator.get=function(){return kl},Al.coordArrayType.get=function(){return new Array(0).fill(null)},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl},Nl.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Nl.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Nl.indexOf(i,e)<0)return i}return null},Nl.scroll=function(t,e){var n=Nl.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);Xu.arraycopy(t,n,i,0,t.length-n),Xu.arraycopy(t,0,i,t.length-n,n),Xu.arraycopy(i,0,t,0,t.length)},Nl.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},Nl.intersection=function(t,e){for(var n=new Il,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Nl.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Nl.removeRepeatedPoints=function(t){return Nl.hasRepeatedPoints(t)?new Il(t,!1).toCoordinateArray():t},Nl.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Nl.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Nl.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Eu(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new Eu(i[r+u])},Nl.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Nl.envelope=function(t){for(var e=new Qu,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Nl.toCoordinateArray=function(t){return t.toArray(Nl.coordArrayType)},Nl.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Nl.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Nl.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},Nl.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Nl.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Nl.extract=function(t,e,n){e=ku.clamp(e,0,t.length);var i=(n=ku.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(Nl,Al);var Rl=function(){};Rl.prototype.compare=function(t,e){return Nl.compare(t,e)},Rl.prototype.interfaces_=function(){return[Tu]},Rl.prototype.getClass=function(){return Rl};var kl=function(){};kl.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Nl.compare(n,i);return Nl.isEqualReversed(n,i)?0:r},kl.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Nl.increasingDirection(n),o=Nl.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},kl.prototype.interfaces_=function(){return[Tu]},kl.prototype.getClass=function(){return kl};var Dl=function(){};Dl.prototype.get=function(){},Dl.prototype.put=function(){},Dl.prototype.size=function(){},Dl.prototype.values=function(){},Dl.prototype.entrySet=function(){};var jl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dl);function Fl(t){this.message=t||""}function Bl(){}Fl.prototype=new Error,Fl.prototype.name="OperationNotSupported",Bl.prototype=new Pl,Bl.prototype.contains=function(){};var Ul=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Pl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Gl(this)},e}(Bl),Gl=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new El;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Fl},e}(Tl);function zl(t){return null===t?0:t.color}function Zl(t){return null===t?null:t.parent}function ql(t,e){null!==t&&(t.color=e)}function Vl(t){return null===t?null:t.left}function Wl(t){return null===t?null:t.right}function Hl(){this.root_=null,this.size_=0}Hl.prototype=new jl,Hl.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Hl.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Hl.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Zl(t)===Vl(Zl(Zl(t)))){var n=Wl(Zl(Zl(t)));1===zl(n)?(ql(Zl(t),0),ql(n,0),ql(Zl(Zl(t)),1),t=Zl(Zl(t))):(t===Wl(Zl(t))&&(t=Zl(t),e.rotateLeft(t)),ql(Zl(t),0),ql(Zl(Zl(t)),1),e.rotateRight(Zl(Zl(t))))}else{var i=Vl(Zl(Zl(t)));1===zl(i)?(ql(Zl(t),0),ql(i,0),ql(Zl(Zl(t)),1),t=Zl(Zl(t))):(t===Vl(Zl(t))&&(t=Zl(t),e.rotateRight(t)),ql(Zl(t),0),ql(Zl(Zl(t)),1),e.rotateLeft(Zl(Zl(t))))}this.root_.color=0},Hl.prototype.values=function(){var t=new Ll,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Hl.successor(e));)t.add(e.value);return t},Hl.prototype.entrySet=function(){var t=new Ul,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Hl.successor(e));)t.add(e);return t},Hl.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Hl.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Hl.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Hl.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Hl.prototype.size=function(){return this.size_};var Xl=function(){};function Yl(){}function Ql(){this.array_=[],arguments[0]instanceof Pl&&this.addAll(arguments[0])}Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Yl.prototype=new Bl,Ql.prototype=new Yl,Ql.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ql.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ql.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ql.prototype.remove=function(t){throw new Fl},Ql.prototype.size=function(){return this.array_.length},Ql.prototype.isEmpty=function(){return 0===this.array_.length},Ql.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ql.prototype.iterator=function(){return new Jl(this)};var Jl=function(t){this.treeSet_=t,this.position_=0};Jl.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new El;return this.treeSet_.array_[this.position_++]},Jl.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Jl.prototype.remove=function(){throw new Fl};var Kl=function(){};Kl.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Kl.asList=function(t){for(var e=new Ll,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var $l=function(){},th={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};th.P.get=function(){return 0},th.L.get=function(){return 1},th.A.get=function(){return 2},th.FALSE.get=function(){return-1},th.TRUE.get=function(){return-2},th.DONTCARE.get=function(){return-3},th.SYM_FALSE.get=function(){return"F"},th.SYM_TRUE.get=function(){return"T"},th.SYM_DONTCARE.get=function(){return"*"},th.SYM_P.get=function(){return"0"},th.SYM_L.get=function(){return"1"},th.SYM_A.get=function(){return"2"},$l.prototype.interfaces_=function(){return[]},$l.prototype.getClass=function(){return $l},$l.toDimensionSymbol=function(t){switch(t){case $l.FALSE:return $l.SYM_FALSE;case $l.TRUE:return $l.SYM_TRUE;case $l.DONTCARE:return $l.SYM_DONTCARE;case $l.P:return $l.SYM_P;case $l.L:return $l.SYM_L;case $l.A:return $l.SYM_A}throw new xu("Unknown dimension value: "+t)},$l.toDimensionValue=function(t){switch(Bu.toUpperCase(t)){case $l.SYM_FALSE:return $l.FALSE;case $l.SYM_TRUE:return $l.TRUE;case $l.SYM_DONTCARE:return $l.DONTCARE;case $l.SYM_P:return $l.P;case $l.SYM_L:return $l.L;case $l.SYM_A:return $l.A}throw new xu("Unknown dimension symbol: "+t)},Object.defineProperties($l,th);var eh=function(){};eh.prototype.filter=function(t){},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh};var nh=function(){};nh.prototype.filter=function(t,e){},nh.prototype.isDone=function(){},nh.prototype.isGeometryChanged=function(){},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh};var ih=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new xu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Qu,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Kl.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=$l.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=$l.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Ql(Kl.asList(this._geometries)),n=new Ql(Kl.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=this.getGeometryN(u),h=o.getGeometryN(u),c=l.compareToSameClass(h,r);if(0!==c)return c;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){var t=this;if(Ru(arguments[0],vl))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(Ru(arguments[0],nh)){var i=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(t._geometries[r].apply(i),!i.isDone());r++);i.isGeometryChanged()&&this.geometryChanged()}else if(Ru(arguments[0],eh)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(Ru(arguments[0],pl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ol.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(dl),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?$l.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new oh(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Xl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(ih),oh=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ml.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};oh.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},oh.prototype.getBoundary=function(){return this._geom instanceof ch?this.boundaryLineString(this._geom):this._geom instanceof rh?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},oh.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},oh.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},oh.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Ll;this._endpointMap=new Hl;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);0!==r.getNumPoints()&&(e.addEndpoint(r.getCoordinateN(0)),e.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return Nl.toCoordinateArray(n)},oh.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new sh,this._endpointMap.put(t,e)),e.count++},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},oh.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new oh(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new oh(n,i);return r.getBoundary()}};var sh=function(){this.count=null};function ah(){}sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var uh=function(){},lh={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},uh.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},uh.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(uh.getStackTrace(i)),a=new function(){}(s),u=0;u<r;u++)try{o+=a.readLine()+uh.NEWLINE}catch(t){if(!(t instanceof ah))throw t;ol.shouldNeverReachHere()}return o}},uh.split=function(t,e){for(var n=e.length,i=new Ll,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},uh.toString=function(){if(1===arguments.length){var t=arguments[0];return uh.SIMPLE_ORDINATE_FORMAT.format(t)}},uh.spaces=function(t){return uh.chars(" ",t)},lh.NEWLINE.get=function(){return Xu.getProperty("line.separator")},lh.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(uh,lh);var hh=function(){};hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh},hh.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},hh.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,qu.X)===t.getOrdinate(e-1,qu.X)&&t.getOrdinate(0,qu.Y)===t.getOrdinate(e-1,qu.Y)},hh.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||wu.isNaN(s)&&wu.isNaN(a)))return!1}return!0},hh.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(hh.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)hh.copy(e,r-1,i,o,1);return i},hh.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)hh.swap(t,i,e-i)},hh.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},hh.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)hh.copyCoord(t,e+o,n,i+o)},hh.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new ju;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(uh.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},hh.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?hh.createClosedRing(t,e,4):e.getOrdinate(0,qu.X)===e.getOrdinate(n-1,qu.X)&&e.getOrdinate(0,qu.Y)===e.getOrdinate(n-1,qu.Y)?e:hh.createClosedRing(t,e,n+1)},hh.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();hh.copy(e,0,i,0,r);for(var o=r;o<n;o++)hh.copy(e,0,i,o,1);return i};var ch=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Qu:this._points.expandEnvelope(new Qu)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&hh.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?$l.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return cl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return hh.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this._points.size()&&i<e._points.size();){var r=this._points.getCoordinate(n).compareTo(e._points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this._points.size()?1:i<e._points.size()?-1:0}if(2===arguments.length){var o=arguments[0],s=arguments[1],a=o;return s.compare(this._points,a._points)}},e.prototype.apply=function(){if(Ru(arguments[0],vl))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Ru(arguments[0],nh)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(Ru(arguments[0],eh)){var r=arguments[0];r.filter(this)}else if(Ru(arguments[0],pl)){var o=arguments[0];o.filter(this)}},e.prototype.getBoundary=function(){return new oh(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new xu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Xl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(dl),fh=function(){};fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var ph=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Qu;var t=new Qu;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return $l.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=n;return i.compare(this._coordinates,r._coordinates)}},e.prototype.apply=function(){if(Ru(arguments[0],vl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Ru(arguments[0],nh)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Ru(arguments[0],eh)){var n=arguments[0];n.filter(this)}else if(Ru(arguments[0],pl)){var i=arguments[0];i.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),ol.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[fh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(dl),dh=function(){};dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var yh=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new xu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new xu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(cl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(cl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Kl.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);Xu.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Nl.minCoordinate(e.getCoordinates());Nl.scroll(i,r),Xu.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],cl.isCCW(e.getCoordinates())===n&&Nl.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=this._shell,a=o._shell,u=s.compareToSameClass(a,r);if(0!==u)return u;for(var l=this.getNumInteriorRing(),h=o.getNumInteriorRing(),c=0;c<l&&c<h;){var f=this.getInteriorRingN(c),p=o.getInteriorRingN(c),d=f.compareToSameClass(p,r);if(0!==d)return d;c++}return c<l?1:c<h?-1:0}},e.prototype.apply=function(t){var e=this;if(Ru(t,vl)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(Ru(t,nh)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(e._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(Ru(t,eh))t.filter(this);else if(Ru(t,pl)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)e._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[dh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(dl),gh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return $l.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[fh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(ih),vh=function(t){function e(e,n){e instanceof Eu&&n instanceof Ah&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return $l.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return hh.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new xu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new xu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(ch),mh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ll,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[dh]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(ih),_h=function(t){this._factory=t||null,this._isUserDataCopied=!1},bh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};_h.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},_h.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},_h.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ih?this.editGeometryCollection(t,e):t instanceof yh?this.editPolygon(t,e):t instanceof ph||t instanceof ch?e.edit(t,this._factory):(ol.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},_h.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Ll,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===gh?this._factory.createMultiPoint(i.toArray([])):n.getClass()===rh?this._factory.createMultiLineString(i.toArray([])):n.getClass()===mh?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},_h.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Ll,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h},_h.GeometryEditorOperation=function(){},bh.NoOpGeometryOperation.get=function(){return xh},bh.CoordinateOperation.get=function(){return wh},bh.CoordinateSequenceOperation.get=function(){return Sh},Object.defineProperties(_h,bh);var xh=function(){};xh.prototype.edit=function(t,e){return t},xh.prototype.interfaces_=function(){return[_h.GeometryEditorOperation]},xh.prototype.getClass=function(){return xh};var wh=function(){};wh.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof vh?e.createLinearRing(n):t instanceof ch?e.createLineString(n):t instanceof ph?n.length>0?e.createPoint(n[0]):e.createPoint():t},wh.prototype.interfaces_=function(){return[_h.GeometryEditorOperation]},wh.prototype.getClass=function(){return wh};var Sh=function(){};Sh.prototype.edit=function(t,e){return t instanceof vh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ch?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof ph?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Sh.prototype.interfaces_=function(){return[_h.GeometryEditorOperation]},Sh.prototype.getClass=function(){return Sh};var Ph=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new Eu}else if(Ru(arguments[0],qu)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)t._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new Eu}},Ch={serialVersionUID:{configurable:!0}};Ph.prototype.setOrdinate=function(t,e,n){switch(e){case qu.X:this._coordinates[t].x=n;break;case qu.Y:this._coordinates[t].y=n;break;case qu.Z:this._coordinates[t].z=n;break;default:throw new xu("invalid ordinateIndex")}},Ph.prototype.size=function(){return this._coordinates.length},Ph.prototype.getOrdinate=function(t,e){switch(e){case qu.X:return this._coordinates[t].x;case qu.Y:return this._coordinates[t].y;case qu.Z:return this._coordinates[t].z}return wu.NaN},Ph.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Ph.prototype.getCoordinateCopy=function(t){return new Eu(this._coordinates[t])},Ph.prototype.getDimension=function(){return this._dimension},Ph.prototype.getX=function(t){return this._coordinates[t].x},Ph.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ph(t,this._dimension)},Ph.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ph.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ph(t,this._dimension)},Ph.prototype.toString=function(){if(this._coordinates.length>0){var t=new ju(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ph.prototype.getY=function(t){return this._coordinates[t].y},Ph.prototype.toCoordinateArray=function(){return this._coordinates},Ph.prototype.interfaces_=function(){return[qu,Ou]},Ph.prototype.getClass=function(){return Ph},Ch.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ph,Ch);var Th=function(){},Oh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Th.prototype.readResolve=function(){return Th.instance()},Th.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Ph(t)}if(Ru(arguments[0],qu)){var e=arguments[0];return new Ph(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new Ph(n):new Ph(n,i)}},Th.prototype.interfaces_=function(){return[Iu,Ou]},Th.prototype.getClass=function(){return Th},Th.instance=function(){return Th.instanceObject},Oh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Oh.instanceObject.get=function(){return new Th},Object.defineProperties(Th,Oh);var Eh=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ll,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Ul;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Dl),Lh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ih){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Mh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Lh.prototype.equals=function(t){if(!(t instanceof Lh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Lh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new Fu(n).compareTo(new Fu(i))},Lh.prototype.getScale=function(){return this._scale},Lh.prototype.isFloating=function(){return this._modelType===Lh.FLOATING||this._modelType===Lh.FLOATING_SINGLE},Lh.prototype.getType=function(){return this._modelType},Lh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Lh.FLOATING?t="Floating":this._modelType===Lh.FLOATING_SINGLE?t="Floating-Single":this._modelType===Lh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Lh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return wu.isNaN(t)?t:this._modelType===Lh.FLOATING_SINGLE?t:this._modelType===Lh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Eu){var e=arguments[0];if(this._modelType===Lh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Lh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Lh.FLOATING?t=16:this._modelType===Lh.FLOATING_SINGLE?t=6:this._modelType===Lh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Lh.prototype.setScale=function(t){this._scale=Math.abs(t)},Lh.prototype.interfaces_=function(){return[Ou,Pu]},Lh.prototype.getClass=function(){return Lh},Lh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Mh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Mh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Lh,Mh);var Ih=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Nh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ih.prototype.readResolve=function(){return Ih.nameToTypeMap.get(this._name)},Ih.prototype.toString=function(){return this._name},Ih.prototype.interfaces_=function(){return[Ou]},Ih.prototype.getClass=function(){return Ih},Nh.serialVersionUID.get=function(){return-552860263173159e4},Nh.nameToTypeMap.get=function(){return new Eh},Object.defineProperties(Ih,Nh),Lh.Type=Ih,Lh.FIXED=new Ih("FIXED"),Lh.FLOATING=new Ih("FLOATING"),Lh.FLOATING_SINGLE=new Ih("FLOATING SINGLE");var Ah=function t(){this._precisionModel=new Lh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Ru(arguments[0],Iu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Lh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Rh={serialVersionUID:{configurable:!0}};Ah.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Eu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Eu(t.getMinX(),t.getMinY()),new Eu(t.getMinX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMaxY()),new Eu(t.getMaxX(),t.getMinY()),new Eu(t.getMinX(),t.getMinY())]),null)},Ah.prototype.createLineString=function(t){return t?t instanceof Array?new ch(this.getCoordinateSequenceFactory().create(t),this):Ru(t,qu)?new ch(t,this):void 0:new ch(this.getCoordinateSequenceFactory().create([]),this)},Ah.prototype.createMultiLineString=function(){if(0===arguments.length)return new rh(null,this);if(1===arguments.length){var t=arguments[0];return new rh(t,this)}},Ah.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Ah.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof yh)return this.createMultiPolygon(Ah.toPolygonArray(t));if(a instanceof ch)return this.createMultiLineString(Ah.toLineStringArray(t));if(a instanceof ph)return this.createMultiPoint(Ah.toPointArray(t));ol.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Ah.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Ah.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Eu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Ru(arguments[0],qu)){var e=arguments[0];return new ph(e,this)}}},Ah.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Ah.prototype.createPolygon=function(){if(0===arguments.length)return new yh(null,null,this);if(1===arguments.length){if(Ru(arguments[0],qu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof vh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new yh(i,r,this)}},Ah.prototype.getSRID=function(){return this._SRID},Ah.prototype.createGeometryCollection=function(){if(0===arguments.length)return new ih(null,this);if(1===arguments.length){var t=arguments[0];return new ih(t,this)}},Ah.prototype.createGeometry=function(t){return new _h(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Ah.prototype.getPrecisionModel=function(){return this._precisionModel},Ah.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Ru(arguments[0],qu)){var e=arguments[0];return new vh(e,this)}}},Ah.prototype.createMultiPolygon=function(){if(0===arguments.length)return new mh(null,this);if(1===arguments.length){var t=arguments[0];return new mh(t,this)}},Ah.prototype.createMultiPoint=function(){if(0===arguments.length)return new gh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new gh(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Ru(arguments[0],qu)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());hh.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},Ah.prototype.interfaces_=function(){return[Ou]},Ah.prototype.getClass=function(){return Ah},Ah.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.getDefaultCoordinateSequenceFactory=function(){return Th.instance()},Ah.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Ah.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Rh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Ah,Rh);var kh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Dh=function(t){this.geometryFactory=t||new Ah};Dh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!jh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==kh.indexOf(n)?jh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?jh[n].apply(this,[e.geometries]):jh[n].apply(this,[e])},Dh.prototype.write=function(t){var e=t.getGeometryType();if(!Fh[e])throw new Error("Geometry is not supported");return Fh[e].apply(this,[t])};var jh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!jh[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=jh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new Eu(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Eu(t[0],t[1]),new Eu(t[2],t[1]),new Eu(t[2],t[3]),new Eu(t[0],t[3]),new Eu(t[0],t[1])])},Point:function(t){var e=new Eu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(jh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=jh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(jh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=jh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=jh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(jh.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Fh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Fh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Fh.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(Fh.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Fh.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Fh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=Fh.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Fh.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Fh[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Bh=function(t){this.geometryFactory=t||new Ah,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Dh(this.geometryFactory)};Bh.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Lh.FIXED&&this.reducePrecision(e),e},Bh.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Uh=function(){this.parser=new Dh(this.geometryFactory)};Uh.prototype.write=function(t){return this.parser.write(t)};var Gh=function(){},zh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Zh(t){this.message=t||""}function qh(){this.array_=[]}Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.opposite=function(t){return t===Gh.LEFT?Gh.RIGHT:t===Gh.RIGHT?Gh.LEFT:t},zh.ON.get=function(){return 0},zh.LEFT.get=function(){return 1},zh.RIGHT.get=function(){return 2},Object.defineProperties(Gh,zh),Zh.prototype=new Error,Zh.prototype.name="EmptyStackException",qh.prototype=new Ol,qh.prototype.add=function(t){return this.array_.push(t),!0},qh.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},qh.prototype.push=function(t){return this.array_.push(t),t},qh.prototype.pop=function(t){if(0===this.array_.length)throw new Zh;return this.array_.pop()},qh.prototype.peek=function(){if(0===this.array_.length)throw new Zh;return this.array_[this.array_.length-1]},qh.prototype.empty=function(){return 0===this.array_.length},qh.prototype.isEmpty=function(){return this.empty()},qh.prototype.search=function(t){return this.array_.indexOf(t)},qh.prototype.size=function(){return this.array_.length},qh.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Vh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Vh.prototype.getCoordinate=function(){return this._minCoord},Vh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Vh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();ol.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=cl.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===cl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===cl.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Vh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Gh.LEFT;return n[e].y<n[e+1].y&&(i=Gh.RIGHT),i},Vh.prototype.getEdge=function(){return this._orientedDe},Vh.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===e._minCoord||n[i].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=i,e._minCoord=n[i])},Vh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Vh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}ol.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Gh.LEFT&&(this._orientedDe=this._minDe.getSym())},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};var Wh=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new Eu(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(il),Hh=function(){this.array_=[]};Hh.prototype.addLast=function(t){this.array_.push(t)},Hh.prototype.removeFirst=function(){return this.array_.shift()},Hh.prototype.isEmpty=function(){return 0===this.array_.length};var Xh=function(){this._finder=null,this._dirEdgeList=new Ll,this._nodes=new Ll,this._rightMostCoord=null,this._env=null,this._finder=new Vh};Xh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Xh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Xh.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Wh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Xh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Gh.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Xh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Xh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Gh.RIGHT)>=1&&e.getDepth(Gh.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Xh.prototype.computeDepths=function(t){var e=new Ul,n=new Hh,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Xh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Xh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Qu,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Xh.prototype.addReachable=function(t){var e=new qh;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Xh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Gh.LEFT,t.getDepth(Gh.RIGHT)),e.setDepth(Gh.RIGHT,t.getDepth(Gh.LEFT))},Xh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Xh.prototype.getNodes=function(){return this._nodes},Xh.prototype.getDirectedEdges=function(){return this._dirEdgeList},Xh.prototype.interfaces_=function(){return[Pu]},Xh.prototype.getClass=function(){return Xh};var Yh=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Gh.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Gh.ON]=o,this.location[Gh.LEFT]=s,this.location[Gh.RIGHT]=a}};Yh.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Yh.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Nu.NONE)return!1;return!0},Yh.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Nu.NONE&&(this.location[e]=t)},Yh.prototype.isLine=function(){return 1===this.location.length},Yh.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Gh.ON]=this.location[Gh.ON],e[Gh.LEFT]=Nu.NONE,e[Gh.RIGHT]=Nu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Nu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Yh.prototype.getLocations=function(){return this.location},Yh.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Gh.LEFT];this.location[Gh.LEFT]=this.location[Gh.RIGHT],this.location[Gh.RIGHT]=t},Yh.prototype.toString=function(){var t=new ju;return this.location.length>1&&t.append(Nu.toLocationSymbol(this.location[Gh.LEFT])),t.append(Nu.toLocationSymbol(this.location[Gh.ON])),this.location.length>1&&t.append(Nu.toLocationSymbol(this.location[Gh.RIGHT])),t.toString()},Yh.prototype.setLocations=function(t,e,n){this.location[Gh.ON]=t,this.location[Gh.LEFT]=e,this.location[Gh.RIGHT]=n},Yh.prototype.get=function(t){return t<this.location.length?this.location[t]:Nu.NONE},Yh.prototype.isArea=function(){return this.location.length>1},Yh.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Nu.NONE)return!0;return!1},Yh.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Gh.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Yh.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Nu.NONE)},Yh.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Yh.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Qh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Yh(e),this.elt[1]=new Yh(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Yh(n.elt[0]),this.elt[1]=new Yh(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Yh(Nu.NONE),this.elt[1]=new Yh(Nu.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Yh(o,s,a),this.elt[1]=new Yh(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Yh(Nu.NONE,Nu.NONE,Nu.NONE),this.elt[1]=new Yh(Nu.NONE,Nu.NONE,Nu.NONE),this.elt[u].setLocations(l,h,c)}};Qh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Qh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Qh.prototype.isNull=function(t){return this.elt[t].isNull()},Qh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Qh.prototype.isLine=function(t){return this.elt[t].isLine()},Qh.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Yh(t.elt[n]):e.elt[n].merge(t.elt[n])},Qh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Qh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Gh.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Qh.prototype.toString=function(){var t=new ju;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Qh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Qh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Qh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Gh.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Qh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Qh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Qh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Yh(this.elt[t].location[0]))},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.toLineLabel=function(t){for(var e=new Qh(Nu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Jh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ll,this._pts=new Ll,this._label=new Qh(Nu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ll,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Jh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=cl.isCCW(this._ring.getCoordinates())},Jh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Jh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,i=!0;do{if(null===n)throw new Wh("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Wh("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var r=n.getLabel();ol.isTrue(r.isArea()),e.mergeLabel(r),e.addPoints(n.getEdge(),n.isForward(),i),i=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Jh.prototype.getLinearRing=function(){return this._ring},Jh.prototype.getCoordinate=function(t){return this._pts.get(t)},Jh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Jh.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Jh.prototype.isHole=function(){return this._isHole},Jh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Jh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!cl.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Jh.prototype.addHole=function(t){this._holes.add(t)},Jh.prototype.isShell=function(){return null===this._shell},Jh.prototype.getLabel=function(){return this._label},Jh.prototype.getEdges=function(){return this._edges},Jh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Jh.prototype.getShell=function(){return this._shell},Jh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Gh.RIGHT);if(i===Nu.NONE)return null;if(this._label.getLocation(n)===Nu.NONE)return this._label.setLocation(n,i),null}},Jh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Jh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Kh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Jh),$h=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ll,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Kh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Jh),tc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};tc.prototype.setVisited=function(t){this._isVisited=t},tc.prototype.setInResult=function(t){this._isInResult=t},tc.prototype.isCovered=function(){return this._isCovered},tc.prototype.isCoveredSet=function(){return this._isCoveredSet},tc.prototype.setLabel=function(t){this._label=t},tc.prototype.getLabel=function(){return this._label},tc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},tc.prototype.updateIM=function(t){ol.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},tc.prototype.isInResult=function(){return this._isInResult},tc.prototype.isVisited=function(){return this._isVisited},tc.prototype.interfaces_=function(){return[]},tc.prototype.getClass=function(){return tc};var ec=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Qh(0,Nu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Nu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==Nu.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Qh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Qh)for(var i=arguments[0],r=0;r<2;r++){var o=t.computeMergedLocation(i,r),s=t._label.getLocation(r);s===Nu.NONE&&t._label.setLocation(r,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Nu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Nu.BOUNDARY:n=Nu.INTERIOR;break;case Nu.INTERIOR:default:n=Nu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tc),nc=function(){this.nodeMap=new Hl,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};nc.prototype.find=function(t){return this.nodeMap.get(t)},nc.prototype.addNode=function(){if(arguments[0]instanceof Eu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ec){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},nc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},nc.prototype.iterator=function(){return this.nodeMap.values().iterator()},nc.prototype.values=function(){return this.nodeMap.values()},nc.prototype.getBoundaryNodes=function(t){for(var e=new Ll,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===Nu.BOUNDARY&&e.add(i)}return e},nc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},nc.prototype.interfaces_=function(){return[]},nc.prototype.getClass=function(){return nc};var ic=function(){},rc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.isNorthern=function(t){return t===ic.NE||t===ic.NW},ic.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ic.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ic.isInHalfPlane=function(t,e){return e===ic.SE?t===ic.SE||t===ic.SW:t===e||t===e+1},ic.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new xu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ic.NE:ic.SE:e>=0?ic.NW:ic.SW}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new xu("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?ic.NE:ic.SE:i.y>=n.y?ic.NW:ic.SW}},rc.NE.get=function(){return 0},rc.NW.get=function(){return 1},rc.SW.get=function(){return 2},rc.SE.get=function(){return 3},Object.defineProperties(ic,rc);var oc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};oc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:cl.computeOrientation(t._p0,t._p1,this._p1)},oc.prototype.getDy=function(){return this._dy},oc.prototype.getCoordinate=function(){return this._p0},oc.prototype.setNode=function(t){this._node=t},oc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},oc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},oc.prototype.getDirectedCoordinate=function(){return this._p1},oc.prototype.getDx=function(){return this._dx},oc.prototype.getLabel=function(){return this._label},oc.prototype.getEdge=function(){return this._edge},oc.prototype.getQuadrant=function(){return this._quadrant},oc.prototype.getNode=function(){return this._node},oc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},oc.prototype.computeLabel=function(t){},oc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ic.quadrant(this._dx,this._dy),ol.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},oc.prototype.interfaces_=function(){return[Pu]},oc.prototype.getClass=function(){return oc};var sc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Qh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Wh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Gh.LEFT)===Nu.INTERIOR&&t._label.getLocation(n,Gh.RIGHT)===Nu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Gh.LEFT]+"/"+this._depth[Gh.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Nu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Nu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Gh.LEFT&&(i=-1);var r=Gh.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Nu.EXTERIOR&&e===Nu.INTERIOR?1:t===Nu.INTERIOR&&e===Nu.EXTERIOR?-1:0},e}(oc),ac=function(){};ac.prototype.createNode=function(t){return new ec(t,null)},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac};var uc=function(){if(this._edges=new Ll,this._nodes=null,this._edgeEndList=new Ll,0===arguments.length)this._nodes=new nc(new ac);else if(1===arguments.length){var t=arguments[0];this._nodes=new nc(t)}};uc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},uc.prototype.find=function(t){return this._nodes.find(t)},uc.prototype.addNode=function(){if(arguments[0]instanceof ec){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Eu){var e=arguments[0];return this._nodes.addNode(e)}},uc.prototype.getNodeIterator=function(){return this._nodes.iterator()},uc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},uc.prototype.debugPrintln=function(t){Xu.out.println(t)},uc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===Nu.BOUNDARY},uc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},uc.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&cl.computeOrientation(t,e,i)===cl.COLLINEAR&&ic.quadrant(t,e)===ic.quadrant(n,i)},uc.prototype.getEdgeEnds=function(){return this._edgeEndList},uc.prototype.debugPrint=function(t){Xu.out.print(t)},uc.prototype.getEdgeIterator=function(){return this._edges.iterator()},uc.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,i=0;i<this._edges.size();i++){var r=n._edges.get(i),o=r.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return r;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return r}return null},uc.prototype.insertEdge=function(t){this._edges.add(t)},uc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},uc.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next();e._edges.add(i);var r=new sc(i,!0),o=new sc(i,!1);r.setSym(o),o.setSym(r),e.add(r),e.add(o)}},uc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},uc.prototype.getNodes=function(){return this._nodes.values()},uc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},uc.prototype.interfaces_=function(){return[]},uc.prototype.getClass=function(){return uc},uc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var lc=function(){this._geometryFactory=null,this._shellList=new Ll;var t=arguments[0];this._geometryFactory=t};lc.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},lc.prototype.computePolygons=function(t){for(var e=new Ll,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},lc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Wh("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},lc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Ll,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},lc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},lc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ll,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new $h(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},lc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},lc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},lc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(i)&&cl.isPointInRing(r,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(o=u)}return o},lc.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return ol.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},lc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];uc.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Ll,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc};var hc=function(){};hc.prototype.getBounds=function(){},hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc};var cc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};cc.prototype.getItem=function(){return this._item},cc.prototype.getBounds=function(){return this._bounds},cc.prototype.interfaces_=function(){return[hc,Ou]},cc.prototype.getClass=function(){return cc};var fc=function(){this._size=null,this._items=null,this._size=0,this._items=new Ll,this._items.add(null)};fc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},fc.prototype.size=function(){return this._size},fc.prototype.reorder=function(t){for(var e=this,n=null,i=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(i)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,i)},fc.prototype.clear=function(){this._size=0,this._items.clear()},fc.prototype.isEmpty=function(){return 0===this._size},fc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc};var pc=function(){};pc.prototype.visitItem=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var dc=function(){};dc.prototype.insert=function(t,e){},dc.prototype.remove=function(t,e){},dc.prototype.query=function(){},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var yc=function(){if(this._childBoundables=new Ll,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},gc={serialVersionUID:{configurable:!0}};yc.prototype.getLevel=function(){return this._level},yc.prototype.size=function(){return this._childBoundables.size()},yc.prototype.getChildBoundables=function(){return this._childBoundables},yc.prototype.addChildBoundable=function(t){ol.isTrue(null===this._bounds),this._childBoundables.add(t)},yc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},yc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},yc.prototype.interfaces_=function(){return[hc,Ou]},yc.prototype.getClass=function(){return yc},gc.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(yc,gc);var vc=function(){};vc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},vc.min=function(t){return vc.sort(t),t.get(0)},vc.sort=function(t,e){var n=t.toArray();e?Kl.sort(n,e):Kl.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},vc.singletonList=function(t){var e=new Ll;return e.add(t),e};var mc=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};mc.prototype.expandToQueue=function(t,e){var n=mc.isComposite(this._boundable1),i=mc.isComposite(this._boundable2);if(n&&i)return mc.area(this._boundable1)>mc.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new xu("neither boundable is composite")},mc.prototype.isLeaves=function(){return!(mc.isComposite(this._boundable1)||mc.isComposite(this._boundable2))},mc.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},mc.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new mc(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},mc.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},mc.prototype.getDistance=function(){return this._distance},mc.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},mc.prototype.interfaces_=function(){return[Pu]},mc.prototype.getClass=function(){return mc},mc.area=function(t){return t.getBounds().getArea()},mc.isComposite=function(t){return t instanceof yc};var _c=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ll,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];ol.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},bc={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};_c.prototype.getNodeCapacity=function(){return this._nodeCapacity},_c.prototype.lastNode=function(t){return t.get(t.size()-1)},_c.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof yc?e+=this.size(i):i instanceof cc&&(e+=1)}return e}},_c.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof cc&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},_c.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ll:t}if(1===arguments.length){for(var e=arguments[0],n=new Ll,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof yc){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof cc?n.add(r.getItem()):ol.shouldNeverReachHere()}return n.size()<=0?null:n}},_c.prototype.insert=function(t,e){ol.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new cc(t,e))},_c.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ll;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(ol.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof yc?this.boundablesAtLevel(n,s,r):(ol.isTrue(s instanceof cc),-1===n&&r.add(s))}return null}},_c.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Ll;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,r)}else if(3===arguments.length)if(Ru(arguments[2],pc)&&arguments[0]instanceof Object&&arguments[1]instanceof yc)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var h=u.get(l);t.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof yc?t.query(o,h,a):h instanceof cc?a.visitItem(h.getItem()):ol.shouldNeverReachHere())}else if(Ru(arguments[2],Ol)&&arguments[0]instanceof Object&&arguments[1]instanceof yc)for(var c=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),y=0;y<d.size();y++){var g=d.get(y);t.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof yc?t.query(c,g,p):g instanceof cc?p.add(g.getItem()):ol.shouldNeverReachHere())}},_c.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},_c.prototype.getRoot=function(){return this.build(),this._root},_c.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof yc&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},_c.prototype.createHigherLevels=function(t,e){ol.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},_c.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof yc){var r=this.depth(i);r>e&&(e=r)}}return e+1}},_c.prototype.createParentBoundables=function(t,e){var n=this;ol.isTrue(!t.isEmpty());var i=new Ll;i.add(this.createNode(e));var r=new Ll(t);vc.sort(r,this.getComparator());for(var o=r.iterator();o.hasNext();){var s=o.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(e)),n.lastNode(i).addChildBoundable(s)}return i},_c.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},_c.prototype.interfaces_=function(){return[Ou]},_c.prototype.getClass=function(){return _c},_c.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},bc.IntersectsOp.get=function(){return xc},bc.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},bc.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(_c,bc);var xc=function(){},wc=function(){};wc.prototype.distance=function(t,e){},wc.prototype.interfaces_=function(){return[]},wc.prototype.getClass=function(){return wc};var Sc=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){ol.isTrue(t.length>0);for(var n=new Ll,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new Pc(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Ll;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(Ru(arguments[2],pc)&&arguments[0]instanceof Object&&arguments[1]instanceof yc){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(Ru(arguments[2],Ol)&&arguments[0]instanceof Object&&arguments[1]instanceof yc){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){ol.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Ll(t);vc.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Ru(arguments[0],wc)){var t=arguments[0],n=new mc(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof mc){var i=arguments[0];return this.nearestNeighbour(i,wu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Ru(arguments[1],wc)){var r=arguments[0],o=arguments[1],s=new mc(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof mc&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,h=null,c=new fc;for(c.add(a);!c.isEmpty()&&l>0;){var f=c.poll(),p=f.getDistance();if(p>=l)break;f.isLeaves()?(l=p,h=f):f.expandToQueue(c,l)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],v=new cc(d,y),m=new mc(this.getRoot(),v,g);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[dc,Ou]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Pc},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Tu]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Tu]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(_c),Pc=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Qu(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yc),Cc=function(){};Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc},Cc.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Cc.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Cc.relativeSign(e.x,n.x),r=Cc.relativeSign(e.y,n.y);switch(t){case 0:return Cc.compareValue(i,r);case 1:return Cc.compareValue(r,i);case 2:return Cc.compareValue(r,-i);case 3:return Cc.compareValue(-i,r);case 4:return Cc.compareValue(-i,-r);case 5:return Cc.compareValue(-r,-i);case 6:return Cc.compareValue(-r,i);case 7:return Cc.compareValue(i,-r)}return ol.shouldNeverReachHere("invalid octant value"),0},Cc.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Tc=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new Eu(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};Tc.prototype.getCoordinate=function(){return this.coord},Tc.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Tc.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Cc.compare(this._segmentOctant,this.coord,e.coord)},Tc.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Tc.prototype.isInterior=function(){return this._isInterior},Tc.prototype.interfaces_=function(){return[Pu]},Tc.prototype.getClass=function(){return Tc};var Oc=function(){this._nodeMap=new Hl,this._edge=null;var t=arguments[0];this._edge=t};Oc.prototype.getSplitCoordinates=function(){var t=new Il;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},Oc.prototype.addCollapsedNodes=function(){var t=new Ll;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Oc.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Oc.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new Fu(e+1))}},Oc.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new Eu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new Eu(e.coord))},Oc.prototype.iterator=function(){return this._nodeMap.values().iterator()},Oc.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Oc.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},Oc.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new Fu(e[0])),i=r}},Oc.prototype.getEdge=function(){return this._edge},Oc.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Oc.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Eu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new Eu(e.coord)),new Ic(o,this._edge.getData())},Oc.prototype.add=function(t,e){var n=new Tc(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(ol.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},Oc.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new il("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new il("bad split edge end point at "+r)},Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var Ec=function(){};Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ec.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new xu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof Eu&&arguments[1]instanceof Eu){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new xu("Cannot compute the octant for two identical points "+r);return Ec.octant(s,a)}};var Lc=function(){};Lc.prototype.getCoordinates=function(){},Lc.prototype.size=function(){},Lc.prototype.getCoordinate=function(t){},Lc.prototype.isClosed=function(){},Lc.prototype.setData=function(t){},Lc.prototype.getData=function(){},Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc};var Mc=function(){};Mc.prototype.addIntersection=function(t,e){},Mc.prototype.interfaces_=function(){return[Lc]},Mc.prototype.getClass=function(){return Mc};var Ic=function(){this._nodeList=new Oc(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ic.prototype.getCoordinates=function(){return this._pts},Ic.prototype.size=function(){return this._pts.length},Ic.prototype.getCoordinate=function(t){return this._pts[t]},Ic.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ic.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Ic.prototype.setData=function(t){this._data=t},Ic.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Ec.octant(t,e)},Ic.prototype.getData=function(){return this._data},Ic.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new Eu(n.getIntersection(r));this.addIntersection(o,i)}},Ic.prototype.toString=function(){return nl.toLineString(new Ph(this._pts))},Ic.prototype.getNodeList=function(){return this._nodeList},Ic.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},Ic.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},Ic.prototype.interfaces_=function(){return[Mc]},Ic.prototype.getClass=function(){return Ic},Ic.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ll;return Ic.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}};var Nc=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Eu,this.p1=new Eu;else if(1===arguments.length){var t=arguments[0];this.p0=new Eu(t.p0),this.p1=new Eu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new Eu(e,n),this.p1=new Eu(i,r)}},Ac={serialVersionUID:{configurable:!0}};Nc.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Nc.prototype.orientationIndex=function(){if(arguments[0]instanceof Nc){var t=arguments[0],e=cl.orientationIndex(this.p0,this.p1,t.p0),n=cl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Eu){var i=arguments[0];return cl.orientationIndex(this.p0,this.p1,i)}},Nc.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Nc.prototype.isVertical=function(){return this.p0.x===this.p1.x},Nc.prototype.equals=function(t){if(!(t instanceof Nc))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Nc.prototype.intersection=function(t){var e=new ul;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Nc.prototype.project=function(){if(arguments[0]instanceof Eu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Eu(t);var e=this.projectionFactor(t),n=new Eu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Nc){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Nc(s,a)}},Nc.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Nc.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Nc.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Nc.prototype.distancePerpendicular=function(t){return cl.distancePointLinePerpendicular(t,this.p0,this.p1)},Nc.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Nc.prototype.midPoint=function(){return Nc.midPoint(this.p0,this.p1)},Nc.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?wu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},Nc.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=wu.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},Nc.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Nc.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Nc.prototype.getLength=function(){return this.p0.distance(this.p1)},Nc.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Nc.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Nc.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Nc.prototype.lineIntersection=function(t){try{return Yu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Hu))throw t}return null},Nc.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Nc.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new Eu(n-u,i+a)},Nc.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Nc.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||wu.isNaN(e))&&(e=1),e},Nc.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Nc.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Nc.prototype.distance=function(){if(arguments[0]instanceof Nc){var t=arguments[0];return cl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Eu){var e=arguments[0];return cl.distancePointLine(e,this.p0,this.p1)}},Nc.prototype.pointAlong=function(t){var e=new Eu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Nc.prototype.hashCode=function(){var t=wu.doubleToLongBits(this.p0.x);t^=31*wu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=wu.doubleToLongBits(this.p1.x);return n^=31*wu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Nc.prototype.interfaces_=function(){return[Pu,Ou]},Nc.prototype.getClass=function(){return Nc},Nc.midPoint=function(t,e){return new Eu((t.x+e.x)/2,(t.y+e.y)/2)},Ac.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Nc,Ac);var Rc=function(){this.tempEnv1=new Qu,this.tempEnv2=new Qu,this._overlapSeg1=new Nc,this._overlapSeg2=new Nc};Rc.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var kc=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};kc.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},kc.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},kc.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},kc.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},kc.prototype.setId=function(t){this._id=t},kc.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},kc.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Qu(t,e)}return this._env},kc.prototype.getEndIndex=function(){return this._end},kc.prototype.getStartIndex=function(){return this._start},kc.prototype.getContext=function(){return this._context},kc.prototype.getId=function(){return this._id},kc.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],u=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((i+r)/2);t<h&&(i<c&&this.computeOverlapsInternal(t,h,n,i,c,o),c<r&&this.computeOverlapsInternal(t,h,n,c,r,o)),h<e&&(i<c&&this.computeOverlapsInternal(h,e,n,i,c,o),c<r&&this.computeOverlapsInternal(h,e,n,c,r,o))},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var Dc=function(){};Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Dc.getChainStartIndices=function(t){var e=0,n=new Ll;n.add(new Fu(e));do{var i=Dc.findChainEnd(t,e);n.add(new Fu(i)),e=i}while(e<t.length-1);return Dc.toIntArray(n)},Dc.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=ic.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||ic.quadrant(t[r-1],t[r])===i);)r++;return r-1},Dc.getChains=function(){if(1===arguments.length){var t=arguments[0];return Dc.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Ll,r=Dc.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new kc(e,r[o],r[o+1],n);i.add(s)}return i}},Dc.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var jc=function(){};jc.prototype.computeNodes=function(t){},jc.prototype.getNodedSubstrings=function(){},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var Fc=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Fc.prototype.setSegmentIntersector=function(t){this._segInt=t},Fc.prototype.interfaces_=function(){return[jc]},Fc.prototype.getClass=function(){return Fc};var Bc=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ll,this._index=new Sc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Ic.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Dc.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var i=n.next();i.setId(e._idCounter++),e._index.insert(i.getEnvelope(),i),e._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Uc(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var i=n.next(),r=t._index.query(i.getEnvelope()).iterator();r.hasNext();){var o=r.next();if(o.getId()>i.getId()&&(i.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Uc},Object.defineProperties(e,n),e}(Fc),Uc=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),s=i.getContext();this._si.processIntersections(o,n,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),Gc=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},zc={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Gc.prototype.getEndCapStyle=function(){return this._endCapStyle},Gc.prototype.isSingleSided=function(){return this._isSingleSided},Gc.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Gc.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Gc.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Gc.JOIN_ROUND&&(this._quadrantSegments=Gc.DEFAULT_QUADRANT_SEGMENTS)},Gc.prototype.getJoinStyle=function(){return this._joinStyle},Gc.prototype.setJoinStyle=function(t){this._joinStyle=t},Gc.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Gc.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Gc.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Gc.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Gc.prototype.getMitreLimit=function(){return this._mitreLimit},Gc.prototype.setMitreLimit=function(t){this._mitreLimit=t},Gc.prototype.setSingleSided=function(t){this._isSingleSided=t},Gc.prototype.interfaces_=function(){return[]},Gc.prototype.getClass=function(){return Gc},Gc.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},zc.CAP_ROUND.get=function(){return 1},zc.CAP_FLAT.get=function(){return 2},zc.CAP_SQUARE.get=function(){return 3},zc.JOIN_ROUND.get=function(){return 1},zc.JOIN_MITRE.get=function(){return 2},zc.JOIN_BEVEL.get=function(){return 3},zc.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},zc.DEFAULT_MITRE_LIMIT.get=function(){return 5},zc.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Gc,zc);var Zc=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=cl.COUNTERCLOCKWISE,this._inputLine=t||null},qc={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Zc.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Zc.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;t.isDeletable(e,n,i,t._distanceTol)&&(t._isDeleted[n]=Zc.DELETE,o=!0,r=!0),e=o?i:n,n=t.findNextNonDeletedIndex(e),i=t.findNextNonDeletedIndex(n)}return r},Zc.prototype.isShallowConcavity=function(t,e,n,i){return cl.computeOrientation(t,e,n)===this._angleOrientation&&cl.distancePointLine(e,t,n)<i},Zc.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Zc.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Zc.prototype.isConcave=function(t,e,n){var i=cl.computeOrientation(t,e,n)===this._angleOrientation;return i},Zc.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=cl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Zc.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Zc.DELETE;)e++;return e},Zc.prototype.isShallow=function(t,e,n,i){return cl.distancePointLine(e,t,n)<i},Zc.prototype.collapseLine=function(){for(var t=new Il,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Zc.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc},Zc.simplify=function(t,e){return new Zc(t).simplify(e)},qc.INIT.get=function(){return 0},qc.DELETE.get=function(){return 1},qc.KEEP.get=function(){return 1},qc.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Zc,qc);var Vc=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ll},Wc={COORDINATE_ARRAY_TYPE:{configurable:!0}};Vc.prototype.getCoordinates=function(){return this._ptList.toArray(Vc.COORDINATE_ARRAY_TYPE)},Vc.prototype.setPrecisionModel=function(t){this._precisionModel=t},Vc.prototype.addPt=function(t){var e=new Eu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Vc.prototype.revere=function(){},Vc.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Vc.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Vc.prototype.toString=function(){return(new Ah).createLineString(this.getCoordinates()).toString()},Vc.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Eu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Vc.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Vc.prototype.interfaces_=function(){return[]},Vc.prototype.getClass=function(){return Vc},Wc.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Vc,Wc);var Hc=function(){},Xc={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.toDegrees=function(t){return 180*t/Math.PI},Hc.normalize=function(t){for(;t>Math.PI;)t-=Hc.PI_TIMES_2;for(;t<=-Math.PI;)t+=Hc.PI_TIMES_2;return t},Hc.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Hc.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Hc.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Hc.interiorAngle=function(t,e,n){var i=Hc.angle(e,t),r=Hc.angle(e,n);return Math.abs(r-i)},Hc.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Hc.PI_TIMES_2;t>=Hc.PI_TIMES_2&&(t=0)}else{for(;t>=Hc.PI_TIMES_2;)t-=Hc.PI_TIMES_2;t<0&&(t=0)}return t},Hc.angleBetween=function(t,e,n){var i=Hc.angle(e,t),r=Hc.angle(e,n);return Hc.diff(i,r)},Hc.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Hc.toRadians=function(t){return t*Math.PI/180},Hc.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Hc.COUNTERCLOCKWISE:n<0?Hc.CLOCKWISE:Hc.NONE},Hc.angleBetweenOriented=function(t,e,n){var i=Hc.angle(e,t),r=Hc.angle(e,n)-i;return r<=-Math.PI?r+Hc.PI_TIMES_2:r>Math.PI?r-Hc.PI_TIMES_2:r},Xc.PI_TIMES_2.get=function(){return 2*Math.PI},Xc.PI_OVER_2.get=function(){return Math.PI/2},Xc.PI_OVER_4.get=function(){return Math.PI/4},Xc.COUNTERCLOCKWISE.get=function(){return cl.COUNTERCLOCKWISE},Xc.CLOCKWISE.get=function(){return cl.CLOCKWISE},Xc.NONE.get=function(){return cl.COLLINEAR},Object.defineProperties(Hc,Xc);var Yc=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Nc,this._seg1=new Nc,this._offset0=new Nc,this._offset1=new Nc,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new ul,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Gc.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Qc={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Yc.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=cl.computeOrientation(this._s0,this._s1,this._s2),i=n===cl.CLOCKWISE&&this._side===Gh.LEFT||n===cl.COUNTERCLOCKWISE&&this._side===Gh.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Yc.prototype.addLineEndCap=function(t,e){var n=new Nc(t,e),i=new Nc;this.computeOffsetSegment(n,Gh.LEFT,this._distance,i);var r=new Nc;this.computeOffsetSegment(n,Gh.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,cl.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Gc.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Gc.CAP_SQUARE:var u=new Eu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new Eu(i.p1.x+u.x,i.p1.y+u.y),h=new Eu(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}},Yc.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Yc.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Yu.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof Hu))throw t;o=new Eu(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Yc.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);i===cl.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,i,r),this._segList.addPt(n)},Yc.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Yc.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Yc.prototype.createSquare=function(t){this._segList.addPt(new Eu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Eu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Eu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Yc.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Yc.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Yc.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Yc.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Yc.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Hc.angle(r,this._seg0.p0),s=Hc.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Hc.normalize(o+s),u=Hc.normalize(a+Math.PI),l=i*n,h=n-l*Math.abs(Math.sin(s)),c=r.x+l*Math.cos(u),f=r.y+l*Math.sin(u),p=new Eu(c,f),d=new Nc(r,p),y=d.pointAlongOffset(1,h),g=d.pointAlongOffset(1,-h);this._side===Gh.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},Yc.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Gh.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},Yc.prototype.addFilletArc=function(t,e,n,i,r){var o=i===cl.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,h=new Eu;l<s;){var c=e+o*l;h.x=t.x+r*Math.cos(c),h.y=t.y+r*Math.sin(c),this._segList.addPt(h),l+=u}},Yc.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Yc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Eu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new Eu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Yc.prototype.createCircle=function(t){var e=new Eu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Yc.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Yc.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Vc,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Yc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Yc.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Gc.JOIN_BEVEL||this._bufParams.getJoinStyle()===Gc.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,cl.CLOCKWISE,this._distance))},Yc.prototype.closeRing=function(){this._segList.closeRing()},Yc.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Qc.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Qc.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Qc.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Qc.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Yc,Qc);var Jc=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Jc.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Nl.reverse(o),o},Jc.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Zc.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Gh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Zc.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Gh.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Jc.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Gh.RIGHT&&(i=-i);var r=Zc.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},Jc.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Zc.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Gh.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Zc.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Gh.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Jc.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Gc.CAP_ROUND:e.createCircle(t);break;case Gc.CAP_SQUARE:e.createSquare(t)}},Jc.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Jc.prototype.getBufferParameters=function(){return this._bufParams},Jc.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Jc.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Jc.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Jc.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Zc.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Gh.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Zc.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Gh.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Jc.prototype.getSegGen=function(t){return new Yc(this._precisionModel,this._bufParams,t)},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Eu(t[n]);return e};var Kc=function(){this._subgraphs=null,this._seg=new Nc,this._cga=new cl;var t=arguments[0];this._subgraphs=t},$c={DepthSegment:{configurable:!0}};Kc.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Ll,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),o=r.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,r.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Ru(arguments[2],Ol)&&arguments[0]instanceof Eu&&arguments[1]instanceof sc)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++){t._seg.p0=l[h],t._seg.p1=l[h+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var c=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(c<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||cl.computeOrientation(t._seg.p0,t._seg.p1,s)===cl.RIGHT)){var f=a.getDepth(Gh.LEFT);t._seg.p0.equals(l[h])||(f=a.getDepth(Gh.RIGHT));var p=new tf(t._seg,f);u.add(p)}}else if(Ru(arguments[2],Ol)&&arguments[0]instanceof Eu&&Ru(arguments[1],Ol))for(var d=arguments[0],y=arguments[1],g=arguments[2],v=y.iterator();v.hasNext();){var m=v.next();m.isForward()&&t.findStabbedSegments(d,m,g)}},Kc.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:vc.min(e)._leftDepth},Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc},$c.DepthSegment.get=function(){return tf},Object.defineProperties(Kc,$c);var tf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Nc(t),this._leftDepth=e};tf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},tf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},tf.prototype.toString=function(){return this._upwardSeg.toString()},tf.prototype.interfaces_=function(){return[Pu]},tf.prototype.getClass=function(){return tf};var ef=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};ef.prototype.area=function(){return ef.area(this.p0,this.p1,this.p2)},ef.prototype.signedArea=function(){return ef.signedArea(this.p0,this.p1,this.p2)},ef.prototype.interpolateZ=function(t){if(null===t)throw new xu("Supplied point is null.");return ef.interpolateZ(t,this.p0,this.p1,this.p2)},ef.prototype.longestSideLength=function(){return ef.longestSideLength(this.p0,this.p1,this.p2)},ef.prototype.isAcute=function(){return ef.isAcute(this.p0,this.p1,this.p2)},ef.prototype.circumcentre=function(){return ef.circumcentre(this.p0,this.p1,this.p2)},ef.prototype.area3D=function(){return ef.area3D(this.p0,this.p1,this.p2)},ef.prototype.centroid=function(){return ef.centroid(this.p0,this.p1,this.p2)},ef.prototype.inCentre=function(){return ef.inCentre(this.p0,this.p1,this.p2)},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef},ef.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ef.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ef.det=function(t,e,n,i){return t*i-e*n},ef.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,h=s*l-a*u,c=t.x-r,f=t.y-o,p=(l*c-a*f)/h,d=(-u*c+s*f)/h;return e.z+p*(n.z-e.z)+d*(i.z-e.z)},ef.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},ef.isAcute=function(t,e,n){return!!Hc.isAcute(t,e,n)&&!!Hc.isAcute(e,n,t)&&!!Hc.isAcute(n,t,e)},ef.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*ef.det(o,s,a,u),h=ef.det(s,o*o+s*s,u,a*a+u*u),c=ef.det(o,o*o+s*s,a,a*a+u*u);return new Eu(i-h/l,r+c/l)},ef.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Yu(t.x+n/2,t.y+i/2,1),o=new Yu(t.x-i+n/2,t.y+n+i/2,1);return new Yu(r,o)},ef.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new Eu(t.x+r*o,t.y+r*s)},ef.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,h=o*s-i*u,c=i*a-r*s,f=l*l+h*h+c*c,p=Math.sqrt(f)/2;return p},ef.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new Eu(i,r)},ef.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,u=(i*t.y+r*e.y+o*n.y)/s;return new Eu(a,u)};var nf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ll;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};nf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Nu.EXTERIOR,Nu.INTERIOR)},nf.prototype.addPolygon=function(t){var e=this,n=this._distance,i=Gh.LEFT;this._distance<0&&(n=-this._distance,i=Gh.RIGHT);var r=t.getExteriorRing(),o=Nl.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,i,Nu.EXTERIOR,Nu.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=Nl.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,Gh.opposite(i),Nu.INTERIOR,Nu.EXTERIOR)}},nf.prototype.isTriangleErodedCompletely=function(t,e){var n=new ef(t[0],t[1],t[2]),i=n.inCentre();return cl.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},nf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Nl.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Nu.EXTERIOR,Nu.INTERIOR)},nf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new Ic(t,new Qh(0,Nu.BOUNDARY,e,n));this._curveList.add(i)},nf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},nf.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<vh.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=vh.MINIMUM_VALID_SIZE&&cl.isCCW(t)&&(o=r,s=i,n=Gh.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},nf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof yh?this.addPolygon(t):t instanceof ch?this.addLineString(t):t instanceof ph?this.addPoint(t):(t instanceof gh||t instanceof rh||t instanceof mh||t instanceof ih)&&this.addCollection(t)},nf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},nf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf};var rf=function(){};rf.prototype.locate=function(t){},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf};var of=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};of.prototype.next=function(){if(this._atStart)return this._atStart=!1,of.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new El;var t=this._parent.getGeometryN(this._index++);return t instanceof ih?(this._subcollectionIterator=new of(t),this._subcollectionIterator.next()):t},of.prototype.remove=function(){throw new Error(this.getClass().getName())},of.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},of.prototype.interfaces_=function(){return[Tl]},of.prototype.getClass=function(){return of},of.isAtomic=function(t){return!(t instanceof ih)};var sf=function(){this._geom=null;var t=arguments[0];this._geom=t};sf.prototype.locate=function(t){return sf.locate(t,this._geom)},sf.prototype.interfaces_=function(){return[rf]},sf.prototype.getClass=function(){return sf},sf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&cl.isPointInRing(t,e.getCoordinates())},sf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!sf.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(sf.isPointInRing(t,r))return!1}return!0},sf.containsPoint=function(t,e){if(e instanceof yh)return sf.containsPointInPolygon(t,e);if(e instanceof ih)for(var n=new of(e);n.hasNext();){var i=n.next();if(i!==e&&sf.containsPoint(t,i))return!0}return!1},sf.locate=function(t,e){return e.isEmpty()?Nu.EXTERIOR:sf.containsPoint(t,e)?Nu.INTERIOR:Nu.EXTERIOR};var af=function(){this._edgeMap=new Hl,this._edgeList=null,this._ptInAreaLocation=[Nu.NONE,Nu.NONE]};af.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},af.prototype.propagateSideLabels=function(t){for(var e=Nu.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Gh.LEFT)!==Nu.NONE&&(e=i.getLocation(t,Gh.LEFT))}if(e===Nu.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Gh.ON)===Nu.NONE&&a.setLocation(t,Gh.ON,r),a.isArea(t)){var u=a.getLocation(t,Gh.LEFT),l=a.getLocation(t,Gh.RIGHT);if(l!==Nu.NONE){if(l!==r)throw new Wh("side location conflict",s.getCoordinate());u===Nu.NONE&&ol.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else ol.isTrue(a.getLocation(t,Gh.LEFT)===Nu.NONE,"found single null side"),a.setLocation(t,Gh.RIGHT,r),a.setLocation(t,Gh.LEFT,r)}}},af.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},af.prototype.print=function(t){Xu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},af.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},af.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Gh.LEFT);ol.isTrue(i!==Nu.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();ol.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Gh.LEFT),u=s.getLocation(t,Gh.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},af.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},af.prototype.iterator=function(){return this.getEdges().iterator()},af.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ll(this._edgeMap.values())),this._edgeList},af.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Nu.NONE&&(this._ptInAreaLocation[t]=sf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},af.prototype.toString=function(){var t=new ju;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},af.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},af.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===Nu.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=Nu.NONE;if(e[u])l=Nu.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}},af.prototype.getDegree=function(){return this._edgeMap.size()},af.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af};var uf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var o=t._resultAreaEdgeList.get(r),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),i){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,i=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),i=t._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===e)throw new Wh("no outgoing dirEdge found",this.getCoordinate());ol.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return ic.isNorthern(r)&&ic.isNorthern(o)?n:ic.isNorthern(r)||ic.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(ol.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){Xu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ll;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Gh.LEFT),i=t.getDepth(Gh.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n),o=this.computeDepths(0,e,r);if(o!==i)throw new Wh("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=u,h=s;h<a;h++){var c=this._edgeList.get(h);c.setEdgeDepths(Gh.RIGHT,l),l=c.getDepth(Gh.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,i=null,r=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),r){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;i=a,r=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;i.setNextMin(s),r=e._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(ol.isTrue(null!==n,"found null for first outgoing dirEdge"),ol.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],r=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===i&&r++}return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Nu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Nu.INTERIOR;break}if(i.isInResult()){t=Nu.EXTERIOR;break}}}if(t===Nu.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===Nu.INTERIOR):(s.isInResult()&&(r=Nu.EXTERIOR),a.isInResult()&&(r=Nu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Qh(Nu.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==Nu.INTERIOR&&o!==Nu.BOUNDARY||this._label.setLocation(r,Nu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(af),lf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ec(t,new uf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ac),hf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};hf.prototype.compareTo=function(t){var e=t;return hf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},hf.prototype.interfaces_=function(){return[Pu]},hf.prototype.getClass=function(){return hf},hf.orientation=function(t){return 1===Nl.increasingDirection(t)},hf.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=r)===s,f=(l+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}};var cf=function(){this._edges=new Ll,this._ocaMap=new Hl};cf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},cf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},cf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},cf.prototype.iterator=function(){return this._edges.iterator()},cf.prototype.getEdges=function(){return this._edges},cf.prototype.get=function(t){return this._edges.get(t)},cf.prototype.findEqualEdge=function(t){var e=new hf(t.getCoordinates());return this._ocaMap.get(e)},cf.prototype.add=function(t){this._edges.add(t);var e=new hf(t.getCoordinates());this._ocaMap.put(e,t)},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var ff=function(){};ff.prototype.processIntersections=function(t,e,n,i){},ff.prototype.isDone=function(){},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var pf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};pf.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(pf.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},pf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pf.prototype.getLineIntersector=function(){return this._li},pf.prototype.hasProperIntersection=function(){return this._hasProper},pf.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},pf.prototype.hasIntersection=function(){return this._hasIntersection},pf.prototype.isDone=function(){return!1},pf.prototype.hasInteriorIntersection=function(){return this._hasInterior},pf.prototype.interfaces_=function(){return[ff]},pf.prototype.getClass=function(){return pf},pf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var df=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Eu(t),this.segmentIndex=e,this.dist=n};df.prototype.getSegmentIndex=function(){return this.segmentIndex},df.prototype.getCoordinate=function(){return this.coord},df.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},df.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},df.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},df.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},df.prototype.getDistance=function(){return this.dist},df.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},df.prototype.interfaces_=function(){return[Pu]},df.prototype.getClass=function(){return df};var yf=function(){this._nodeMap=new Hl,this.edge=null;var t=arguments[0];this.edge=t};yf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},yf.prototype.iterator=function(){return this._nodeMap.values().iterator()},yf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},yf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},yf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new Eu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new bf(o,new Qh(this.edge._label))},yf.prototype.add=function(t,e,n){var i=new df(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},yf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf};var gf=function(){};gf.prototype.getChainStartIndices=function(t){var e=0,n=new Ll;n.add(new Fu(e));do{var i=this.findChainEnd(t,e);n.add(new Fu(i)),e=i}while(e<t.length-1);return gf.toIntArray(n)},gf.prototype.findChainEnd=function(t,e){for(var n=ic.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&ic.quadrant(t[i-1],t[i])===n;)i++;return i-1},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf},gf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var vf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Qu,this.env2=new Qu;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new gf;this.startIndex=e.getChainStartIndices(this.pts)};vf.prototype.getCoordinates=function(){return this.pts},vf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},vf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},vf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],h=this.pts[r],c=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(h,c),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),y=Math.trunc((a+u)/2);r<d&&(a<y&&this.computeIntersectsForChain(r,d,s,a,y,l),y<u&&this.computeIntersectsForChain(r,d,s,y,u,l)),d<o&&(a<y&&this.computeIntersectsForChain(d,o,s,a,y,l),y<u&&this.computeIntersectsForChain(d,o,s,y,u,l))}},vf.prototype.getStartIndexes=function(){return this.startIndex},vf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var mf=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},_f={NULL_VALUE:{configurable:!0}};mf.prototype.getDepth=function(t,e){return this._depth[t][e]},mf.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},mf.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==mf.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===mf.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===mf.NULL_VALUE}},mf.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var i=1;i<3;i++){var r=0;t._depth[e][i]>n&&(r=1),t._depth[e][i]=r}}},mf.prototype.getDelta=function(t){return this._depth[t][Gh.RIGHT]-this._depth[t][Gh.LEFT]},mf.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Nu.EXTERIOR:Nu.INTERIOR},mf.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},mf.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==Nu.EXTERIOR&&r!==Nu.INTERIOR||(t.isNull(n,i)?t._depth[n][i]=mf.depthAtLocation(r):t._depth[n][i]+=mf.depthAtLocation(r))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===Nu.INTERIOR&&this._depth[o][s]++}},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},mf.depthAtLocation=function(t){return t===Nu.EXTERIOR?0:t===Nu.INTERIOR?1:mf.NULL_VALUE},_f.NULL_VALUE.get=function(){return-1},Object.defineProperties(mf,_f);var bf=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new yf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new mf,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Qh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new vf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Qu;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new Eu(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new ju;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Gh.ON),e.getLocation(1,Gh.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Gh.LEFT),e.getLocation(1,Gh.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Gh.RIGHT),e.getLocation(1,Gh.RIGHT),2))},e}(tc),xf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new cf,this._bufParams=t||null};xf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},xf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Qh(t.getLabel())).flip(),n.merge(i);var r=xf.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(xf.depthDelta(t.getLabel()))},xf.prototype.buildSubgraphs=function(t,e){for(var n=new Ll,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Kc(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},xf.prototype.createSubgraphs=function(t){for(var e=new Ll,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Xh;r.create(i),e.add(r)}}return vc.sort(e,vc.reverseOrder()),e},xf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},xf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Bc,n=new ul;return n.setPrecisionModel(t),e.setSegmentIntersector(new pf(n)),e},xf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Jc(n,this._bufParams),r=new nf(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new uc(new lf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new lc(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},xf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new bf(r.getCoordinates(),new Qh(s));this.insertUniqueEdge(a)}}},xf.prototype.setNoder=function(t){this._workingNoder=t},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.depthDelta=function(t){var e=t.getLocation(0,Gh.LEFT),n=t.getLocation(0,Gh.RIGHT);return e===Nu.INTERIOR&&n===Nu.EXTERIOR?1:e===Nu.EXTERIOR&&n===Nu.INTERIOR?-1:0},xf.convertSegStrings=function(t){for(var e=new Ah,n=new Ll;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var wf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};wf.prototype.rescale=function(){var t=this;if(Ru(arguments[0],Pl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],o=0;o<r.length;o++)r[o].x=r[o].x/t._scaleFactor+t._offsetX,r[o].y=r[o].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&Xu.out.println(r)}},wf.prototype.scale=function(){var t=this;if(Ru(arguments[0],Pl)){for(var e=arguments[0],n=new Ll,i=e.iterator();i.hasNext();){var r=i.next();n.add(new Ic(t.scale(r.getCoordinates()),r.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new Eu(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=Nl.removeRepeatedPoints(s);return u}},wf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},wf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},wf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},wf.prototype.interfaces_=function(){return[jc]},wf.prototype.getClass=function(){return wf};var Sf=function(){this._li=new ul,this._segStrings=null;var t=arguments[0];this._segStrings=t},Pf={fact:{configurable:!0}};Sf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),i=n.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(r))throw new il("found endpt/interior pt intersection at index "+l+" :pt "+r)},Sf.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,o,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],p=arguments[3];if(h===f&&c===p)return null;var d=h.getCoordinates()[c],y=h.getCoordinates()[c+1],g=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,y,g,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,v)))throw new il("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+v)}},Sf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Sf.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length-2;r++)this.checkCollapse(i[r],i[r+1],i[r+2])},Sf.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},Sf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new il("found non-noded collapse at "+Sf.fact.createLineString([t,e,n]))},Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Pf.fact.get=function(){return new Ah},Object.defineProperties(Sf,Pf);var Cf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new xu("Scale factor must be non-zero");1!==e&&(this._pt=new Eu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Eu,this._p1Scaled=new Eu),this.initCorners(this._pt)},Tf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Cf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return ol.isTrue(!(s&&a),"Found bad envelope test"),a},Cf.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Eu(this._maxx,this._maxy),this._corner[1]=new Eu(this._minx,this._maxy),this._corner[2]=new Eu(this._minx,this._miny),this._corner[3]=new Eu(this._maxx,this._miny)},Cf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Cf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Cf.prototype.getCoordinate=function(){return this._originalPt},Cf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Cf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Cf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Qu(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Cf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Cf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},Cf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Tf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Cf,Tf);var Of=function(){this.tempEnv1=new Qu,this.selectedSegment=new Nc};Of.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of};var Ef=function(){this._index=null;var t=arguments[0];this._index=t},Lf={HotPixelSnapAction:{configurable:!0}};Ef.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Mf(e,n,i);return this._index.query(r,{interfaces_:function(){return[pc]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Lf.HotPixelSnapAction.get=function(){return Mf},Object.defineProperties(Ef,Lf);var Mf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();if(null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Of),If=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ll};If.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},If.prototype.isDone=function(){return!1},If.prototype.getInteriorIntersections=function(){return this._interiorIntersections},If.prototype.interfaces_=function(){return[ff]},If.prototype.getClass=function(){return If};var Nf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ul,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Nf.prototype.checkCorrectness=function(t){var e=Ic.getNodedSubstrings(t),n=new Sf(e);try{n.checkValid()}catch(t){if(!(t instanceof Wu))throw t;t.printStackTrace()}},Nf.prototype.getNodedSubstrings=function(){return Ic.getNodedSubstrings(this._nodedSegStrings)},Nf.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Nf.prototype.findInteriorIntersections=function(t,e){var n=new If(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Nf.prototype.computeVertexSnaps=function(){var t=this;if(Ru(arguments[0],Pl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof Ic)for(var r=arguments[0],o=r.getCoordinates(),s=0;s<o.length;s++){var a=new Cf(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,r,s);u&&r.addIntersection(o[s],s)}},Nf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Bc,this._pointSnapper=new Ef(this._noder.getIndex()),this.snapRound(t,this._li)},Nf.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next(),r=new Cf(i,e._scaleFactor,e._li);e._pointSnapper.snap(r)}},Nf.prototype.interfaces_=function(){return[jc]},Nf.prototype.getClass=function(){return Nf};var Af=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Gc,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Rf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Af.prototype.bufferFixedPrecision=function(t){var e=new wf(new Nf(new Lh(1)),t.getScale()),n=new xf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Af.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Af.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Wh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=Af.precisionScaleFactor(this._argGeom,this._distance,n),r=new Lh(i);this.bufferFixedPrecision(r)}},Af.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Lh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Af.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Af.prototype.bufferOriginalPrecision=function(){try{var t=new xf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof il))throw t;this._saveException=t}},Af.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Af.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Af(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof dl&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=arguments[2],a=new Af(r);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof Gc&&arguments[0]instanceof dl&&"number"==typeof arguments[1]){var l=arguments[0],h=arguments[1],c=arguments[2],f=new Af(l,c),p=f.getResultGeometry(h);return p}}else if(4===arguments.length){var d=arguments[0],y=arguments[1],g=arguments[2],v=arguments[3],m=new Af(d);m.setQuadrantSegments(g),m.setEndCapStyle(v);var _=m.getResultGeometry(y);return _}},Af.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=ku.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},Rf.CAP_ROUND.get=function(){return Gc.CAP_ROUND},Rf.CAP_BUTT.get=function(){return Gc.CAP_FLAT},Rf.CAP_FLAT.get=function(){return Gc.CAP_FLAT},Rf.CAP_SQUARE.get=function(){return Gc.CAP_SQUARE},Rf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Af,Rf);var kf=function(){this._pt=[new Eu,new Eu],this._distance=wu.NaN,this._isNull=!0};kf.prototype.getCoordinates=function(){return this._pt},kf.prototype.getCoordinate=function(t){return this._pt[t]},kf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},kf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},kf.prototype.getDistance=function(){return this._distance},kf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf};var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.computeDistance=function(){if(arguments[2]instanceof kf&&arguments[0]instanceof ch&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new Nc,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof kf&&arguments[0]instanceof yh&&arguments[1]instanceof Eu){var a=arguments[0],u=arguments[1],l=arguments[2];Df.computeDistance(a.getExteriorRing(),u,l);for(var h=0;h<a.getNumInteriorRing();h++)Df.computeDistance(a.getInteriorRingN(h),u,l)}else if(arguments[2]instanceof kf&&arguments[0]instanceof dl&&arguments[1]instanceof Eu){var c=arguments[0],f=arguments[1],p=arguments[2];if(c instanceof ch)Df.computeDistance(c,f,p);else if(c instanceof yh)Df.computeDistance(c,f,p);else if(c instanceof ih)for(var d=c,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Df.computeDistance(g,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof kf&&arguments[0]instanceof Nc&&arguments[1]instanceof Eu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var jf=function(t){this._maxPtDist=new kf,this._inputGeom=t||null},Ff={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};jf.prototype.computeMaxMidpointDistance=function(t){var e=new Uf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jf.prototype.computeMaxVertexDistance=function(t){var e=new Bf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},jf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},jf.prototype.getDistancePoints=function(){return this._maxPtDist},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},Ff.MaxPointDistanceFilter.get=function(){return Bf},Ff.MaxMidpointDistanceFilter.get=function(){return Uf},Object.defineProperties(jf,Ff);var Bf=function(t){this._maxPtDist=new kf,this._minPtDist=new kf,this._geom=t||null};Bf.prototype.filter=function(t){this._minPtDist.initialize(),Df.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Bf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bf.prototype.interfaces_=function(){return[vl]},Bf.prototype.getClass=function(){return Bf};var Uf=function(t){this._maxPtDist=new kf,this._minPtDist=new kf,this._geom=t||null};Uf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new Eu((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Df.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Uf.prototype.isDone=function(){return!1},Uf.prototype.isGeometryChanged=function(){return!1},Uf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Uf.prototype.interfaces_=function(){return[nh]},Uf.prototype.getClass=function(){return Uf};var Gf=function(t){this._comps=t||null};Gf.prototype.filter=function(t){t instanceof yh&&this._comps.add(t)},Gf.prototype.interfaces_=function(){return[eh]},Gf.prototype.getClass=function(){return Gf},Gf.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Gf.getPolygons(t,new Ll)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof yh?n.add(e):e instanceof ih&&e.apply(new Gf(n)),n}};var zf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};zf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof vh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof ch&&this._lines.add(t)},zf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},zf.prototype.interfaces_=function(){return[pl]},zf.prototype.getClass=function(){return zf},zf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(zf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(zf.getLines(e,n))}},zf.getLines=function(){if(1===arguments.length){var t=arguments[0];return zf.getLines(t,!1)}if(2===arguments.length){if(Ru(arguments[0],Pl)&&Ru(arguments[1],Pl)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();zf.getLines(r,n)}return n}if(arguments[0]instanceof dl&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new Ll;return o.apply(new zf(a,s)),a}if(arguments[0]instanceof dl&&Ru(arguments[1],Pl)){var u=arguments[0],l=arguments[1];return u instanceof ch?l.add(u):u.apply(new zf(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Ru(arguments[0],Pl)&&Ru(arguments[1],Pl)){for(var h=arguments[0],c=arguments[1],f=arguments[2],p=h.iterator();p.hasNext();){var d=p.next();zf.getLines(d,c,f)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof dl&&Ru(arguments[1],Pl)){var y=arguments[0],g=arguments[1],v=arguments[2];return y.apply(new zf(g,v)),g}}};var Zf=function(){if(this._boundaryRule=ml.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new xu("Rule must be non-null");this._boundaryRule=t}};Zf.prototype.locateInternal=function(){if(arguments[0]instanceof Eu&&arguments[1]instanceof yh){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Nu.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===Nu.EXTERIOR)return Nu.EXTERIOR;if(i===Nu.BOUNDARY)return Nu.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===Nu.INTERIOR)return Nu.EXTERIOR;if(s===Nu.BOUNDARY)return Nu.BOUNDARY}return Nu.INTERIOR}if(arguments[0]instanceof Eu&&arguments[1]instanceof ch){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return Nu.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?cl.isOnLine(a,l)?Nu.INTERIOR:Nu.EXTERIOR:Nu.BOUNDARY}if(arguments[0]instanceof Eu&&arguments[1]instanceof ph){var h=arguments[0],c=arguments[1],f=c.getCoordinate();return f.equals2D(h)?Nu.INTERIOR:Nu.EXTERIOR}},Zf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?cl.locatePointInRing(t,e.getCoordinates()):Nu.EXTERIOR},Zf.prototype.intersects=function(t,e){return this.locate(t,e)!==Nu.EXTERIOR},Zf.prototype.updateLocationInfo=function(t){t===Nu.INTERIOR&&(this._isIn=!0),t===Nu.BOUNDARY&&this._numBoundaries++},Zf.prototype.computeLocation=function(t,e){var n=this;if(e instanceof ph&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof ch)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof yh)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof rh)for(var i=e,r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof mh)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof ih)for(var l=new of(e);l.hasNext();){var h=l.next();h!==e&&n.computeLocation(t,h)}},Zf.prototype.locate=function(t,e){return e.isEmpty()?Nu.EXTERIOR:e instanceof ch||e instanceof yh?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Nu.BOUNDARY:this._numBoundaries>0||this._isIn?Nu.INTERIOR:Nu.EXTERIOR)},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var qf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},Vf={INSIDE_AREA:{configurable:!0}};qf.prototype.isInsideArea=function(){return this._segIndex===qf.INSIDE_AREA},qf.prototype.getCoordinate=function(){return this._pt},qf.prototype.getGeometryComponent=function(){return this._component},qf.prototype.getSegmentIndex=function(){return this._segIndex},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf},Vf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(qf,Vf);var Wf=function(t){this._pts=t||null};Wf.prototype.filter=function(t){t instanceof ph&&this._pts.add(t)},Wf.prototype.interfaces_=function(){return[eh]},Wf.prototype.getClass=function(){return Wf},Wf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof ph?vc.singletonList(t):Wf.getPoints(t,new Ll)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ph?n.add(e):e instanceof ih&&e.apply(new Wf(n)),n}};var Hf=function(){this._locations=null;var t=arguments[0];this._locations=t};Hf.prototype.filter=function(t){(t instanceof ph||t instanceof ch||t instanceof yh)&&this._locations.add(new qf(t,0,t.getCoordinate()))},Hf.prototype.interfaces_=function(){return[eh]},Hf.prototype.getClass=function(){return Hf},Hf.getLocations=function(t){var e=new Ll;return t.apply(new Hf(e)),e};var Xf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Zf,this._minDistanceLocation=null,this._minDistance=wu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Xf.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=1-n,o=Gf.getPolygons(this._geom[n]);if(o.size()>0){var s=Hf.getLocations(this._geom[r]);if(this.computeContainmentDistance(s,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Ru(arguments[0],Ol)&&Ru(arguments[1],Ol)){for(var a=arguments[0],u=arguments[1],l=arguments[2],h=0;h<a.size();h++)for(var c=a.get(h),f=0;f<u.size();f++)if(t.computeContainmentDistance(c,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof qf&&arguments[1]instanceof yh){var p=arguments[0],d=arguments[1],y=arguments[2],g=p.getCoordinate();if(Nu.EXTERIOR!==this._ptLocator.locate(g,d))return this._minDistance=0,y[0]=p,y[1]=new qf(d,g),null}},Xf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},Xf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=zf.getLines(this._geom[0]),n=zf.getLines(this._geom[1]),i=Wf.getPoints(this._geom[0]),r=Wf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Xf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Xf.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Xf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Xf.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ch&&arguments[1]instanceof ph){var e=arguments[0],n=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),o=n.getCoordinate(),s=0;s<r.length-1;s++){var a=cl.distancePointLine(o,r[s],r[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new Nc(r[s],r[s+1]),l=u.closestPoint(o);i[0]=new qf(e,s,l),i[1]=new qf(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ch&&arguments[1]instanceof ch){var h=arguments[0],c=arguments[1],f=arguments[2];if(h.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=h.getCoordinates(),d=c.getCoordinates(),y=0;y<p.length-1;y++)for(var g=0;g<d.length-1;g++){var v=cl.distanceLineLine(p[y],p[y+1],d[g],d[g+1]);if(v<t._minDistance){t._minDistance=v;var m=new Nc(p[y],p[y+1]),_=new Nc(d[g],d[g+1]),b=m.closestPoints(_);f[0]=new qf(h,y,b[0]),f[1]=new qf(c,g,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},Xf.prototype.computeMinDistancePoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<i._minDistance&&(i._minDistance=u,n[0]=new qf(o,0,o.getCoordinate()),n[1]=new qf(a,0,a.getCoordinate())),i._minDistance<=i._terminateDistance)return null}},Xf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new xu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Xf.prototype.computeMinDistanceLines=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),s=0;s<e.size();s++){var a=e.get(s);if(i.computeMinDistance(o,a,n),i._minDistance<=i._terminateDistance)return null}},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf},Xf.distance=function(t,e){return new Xf(t,e).distance()},Xf.isWithinDistance=function(t,e,n){return new Xf(t,e,n).distance()<=n},Xf.nearestPoints=function(t,e){return new Xf(t,e).nearestPoints()};var Yf=function(){this._pt=[new Eu,new Eu],this._distance=wu.NaN,this._isNull=!0};Yf.prototype.getCoordinates=function(){return this._pt},Yf.prototype.getCoordinate=function(t){return this._pt[t]},Yf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Yf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Yf.prototype.toString=function(){return nl.toLineString(this._pt[0],this._pt[1])},Yf.prototype.getDistance=function(){return this._distance},Yf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var Qf=function(){};Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},Qf.computeDistance=function(){if(arguments[2]instanceof Yf&&arguments[0]instanceof ch&&arguments[1]instanceof Eu)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new Nc,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Yf&&arguments[0]instanceof yh&&arguments[1]instanceof Eu){var a=arguments[0],u=arguments[1],l=arguments[2];Qf.computeDistance(a.getExteriorRing(),u,l);for(var h=0;h<a.getNumInteriorRing();h++)Qf.computeDistance(a.getInteriorRingN(h),u,l)}else if(arguments[2]instanceof Yf&&arguments[0]instanceof dl&&arguments[1]instanceof Eu){var c=arguments[0],f=arguments[1],p=arguments[2];if(c instanceof ch)Qf.computeDistance(c,f,p);else if(c instanceof yh)Qf.computeDistance(c,f,p);else if(c instanceof ih)for(var d=c,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Qf.computeDistance(g,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof Yf&&arguments[0]instanceof Nc&&arguments[1]instanceof Eu){var v=arguments[0],m=arguments[1],_=arguments[2],b=v.closestPoint(m);_.setMinimum(b,m)}};var Jf=function(){this._g0=null,this._g1=null,this._ptDist=new Yf,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Kf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Jf.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Jf.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new xu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Jf.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Jf.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Jf.prototype.computeOrientedDistance=function(t,e,n){var i=new $f(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new tp(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Jf.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Jf(t,e);return n.distance()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new Jf(i,r);return s.setDensifyFraction(o),s.distance()}},Kf.MaxPointDistanceFilter.get=function(){return $f},Kf.MaxDensifiedByFractionDistanceFilter.get=function(){return tp},Object.defineProperties(Jf,Kf);var $f=function(){this._maxPtDist=new Yf,this._minPtDist=new Yf,this._euclideanDist=new Qf,this._geom=null;var t=arguments[0];this._geom=t};$f.prototype.filter=function(t){this._minPtDist.initialize(),Qf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},$f.prototype.getMaxPointDistance=function(){return this._maxPtDist},$f.prototype.interfaces_=function(){return[vl]},$f.prototype.getClass=function(){return $f};var tp=function(){this._maxPtDist=new Yf,this._minPtDist=new Yf,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};tp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var i=t.getCoordinate(e-1),r=t.getCoordinate(e),o=(r.x-i.x)/this._numSubSegs,s=(r.y-i.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=i.x+a*o,l=i.y+a*s,h=new Eu(u,l);n._minPtDist.initialize(),Qf.computeDistance(n._geom,h,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},tp.prototype.isDone=function(){return!1},tp.prototype.isGeometryChanged=function(){return!1},tp.prototype.getMaxPointDistance=function(){return this._maxPtDist},tp.prototype.interfaces_=function(){return[nh]},tp.prototype.getClass=function(){return tp};var ep=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},np={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ep.prototype.checkMaximumDistance=function(t,e,n){var i=new Jf(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+nl.toLineString(r[0],r[1])+")"}},ep.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=ep.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ep.VERBOSE&&Xu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ep.prototype.checkNegativeValid=function(){if(!(this._input instanceof yh||this._input instanceof mh||this._input instanceof ih))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},ep.prototype.getErrorIndicator=function(){return this._errorIndicator},ep.prototype.checkMinimumDistance=function(t,e,n){var i=new Xf(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+nl.toLineString(r[0],r[1])+" )"}},ep.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},ep.prototype.getErrorLocation=function(){return this._errorLocation},ep.prototype.getPolygonLines=function(t){for(var e=new Ll,n=new zf(e),i=Gf.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},ep.prototype.getErrorMessage=function(){return this._errMsg},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},np.VERBOSE.get=function(){return!1},np.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ep,np);var ip=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},rp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ip.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ip.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ip.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Qu(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Qu(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},ip.prototype.checkDistance=function(){var t=new ep(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ip.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ip.prototype.checkPolygonal=function(){this._result instanceof yh||this._result instanceof mh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ip.prototype.getErrorIndicator=function(){return this._errorIndicator},ip.prototype.getErrorLocation=function(){return this._errorLocation},ip.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ip.prototype.report=function(t){if(!ip.VERBOSE)return null;Xu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ip.prototype.getErrorMessage=function(){return this._errorMsg},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.isValidMsg=function(t,e,n){var i=new ip(t,e,n);return i.isValid()?null:i.getErrorMessage()},ip.isValid=function(t,e,n){return!!new ip(t,e,n).isValid()},rp.VERBOSE.get=function(){return!1},rp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ip,rp);var op=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};op.prototype.getCoordinates=function(){return this._pts},op.prototype.size=function(){return this._pts.length},op.prototype.getCoordinate=function(t){return this._pts[t]},op.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},op.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Ec.octant(this.getCoordinate(t),this.getCoordinate(t+1))},op.prototype.setData=function(t){this._data=t},op.prototype.getData=function(){return this._data},op.prototype.toString=function(){return nl.toLineString(new Ph(this._pts))},op.prototype.interfaces_=function(){return[Lc]},op.prototype.getClass=function(){return op};var sp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ll,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};sp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},sp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},sp.prototype.getIntersectionSegments=function(){return this._intSegments},sp.prototype.count=function(){return this._intersectionCount},sp.prototype.getIntersections=function(){return this._intersections},sp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},sp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},sp.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},sp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},sp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},sp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},sp.prototype.interfaces_=function(){return[ff]},sp.prototype.getClass=function(){return sp},sp.createAllIntersectionsFinder=function(t){var e=new sp(t);return e.setFindAllIntersections(!0),e},sp.createAnyIntersectionFinder=function(t){return new sp(t)},sp.createIntersectionCounter=function(t){var e=new sp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var ap=function(){this._li=new ul,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};ap.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},ap.prototype.getIntersections=function(){return this._segInt.getIntersections()},ap.prototype.isValid=function(){return this.execute(),this._isValid},ap.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ap.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new sp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Bc;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},ap.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Wh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},ap.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+nl.toLineString(t[0],t[1])+" and "+nl.toLineString(t[2],t[3])},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},ap.computeIntersections=function(t){var e=new ap(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var up=function t(){this._nv=null;var e=arguments[0];this._nv=new ap(t.toSegmentStrings(e))};up.prototype.checkValid=function(){this._nv.checkValid()},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.toSegmentStrings=function(t){for(var e=new Ll,n=t.iterator();n.hasNext();){var i=n.next();e.add(new op(i.getCoordinates(),i))}return e},up.checkValid=function(t){new up(t).checkValid()};var lp=function(t){this._mapOp=t};lp.prototype.map=function(t){for(var e=new Ll,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Ah.toGeometryArray(e))},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},lp.map=function(t,e){return new lp(e).map(t)};var hp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ll,this._resultLineList=new Ll;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};hp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();e.collectLineEdge(i,t,e._lineEdgesList),e.collectBoundaryTouchEdge(i,t,e._lineEdgesList)}},hp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},hp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},hp.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!qp.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},hp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},hp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},hp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},hp.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(ol.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(qp.isResultOfOp(i,e)&&e===qp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp};var cp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ll;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};cp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},cp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==qp.INTERSECTION)){var i=n.getLabel();qp.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},cp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp};var fp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};fp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},fp.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof vh&&!i.isEmpty()||(n=!1);for(var r=new Ll,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof vh||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new Ll;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},fp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},fp.prototype.getInputGeometry=function(){return this._inputGeom},fp.prototype.transformMultiLineString=function(t,e){for(var n=new Ll,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},fp.prototype.transformCoordinates=function(t,e){return this.copy(t)},fp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},fp.prototype.transformMultiPoint=function(t,e){for(var n=new Ll,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},fp.prototype.transformMultiPolygon=function(t,e){for(var n=new Ll,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},fp.prototype.copy=function(t){return t.copy()},fp.prototype.transformGeometryCollection=function(t,e){for(var n=new Ll,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Ah.toGeometryArray(n)):this._factory.buildGeometry(n)},fp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof ph)return this.transformPoint(t,null);if(t instanceof gh)return this.transformMultiPoint(t,null);if(t instanceof vh)return this.transformLinearRing(t,null);if(t instanceof ch)return this.transformLineString(t,null);if(t instanceof rh)return this.transformMultiLineString(t,null);if(t instanceof yh)return this.transformPolygon(t,null);if(t instanceof mh)return this.transformMultiPolygon(t,null);if(t instanceof ih)return this.transformGeometryCollection(t,null);throw new xu("Unknown Geometry subtype: "+t.getClass().getName())},fp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Nc,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ch&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};pp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new Eu(o)),0===i&&this._isClosed&&t.set(t.size()-1,new Eu(o)))}},pp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},pp.prototype.snapTo=function(t){var e=new Il(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},pp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new Eu(r),!1)}},pp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,i=wu.MAX_VALUE,r=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<i&&(i=s,r=o)}return r},pp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},pp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var dp=function(t){this._srcGeom=t||null},yp={SNAP_PRECISION_FACTOR:{configurable:!0}};dp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new gp(e,n).transform(this._srcGeom)},dp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new gp(t,n,!0).transform(this._srcGeom),r=i;return e&&Ru(r,dh)&&(r=i.buffer(0)),r},dp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},dp.prototype.extractTargetCoordinates=function(t){for(var e=new Ql,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},dp.prototype.computeMinimumSegmentLength=function(t){for(var e=wu.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.snap=function(t,e,n){var i=new Array(2).fill(null),r=new dp(t);i[0]=r.snapTo(e,n);var o=new dp(e);return i[1]=o.snapTo(i[0],n),i},dp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=dp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Lh.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(dp.computeOverlaySnapTolerance(r),dp.computeOverlaySnapTolerance(o))}},dp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*dp.SNAP_PRECISION_FACTOR},dp.snapToSelf=function(t,e,n){return new dp(t).snapToSelf(e,n)},yp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(dp,yp);var gp=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new pp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),vp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};vp.prototype.getCommon=function(){return wu.longBitsToDouble(this._commonBits)},vp.prototype.add=function(t){var e=wu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=vp.signExpBits(this._commonBits),this._isFirst=!1,null):vp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=vp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=vp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},vp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=wu.longBitsToDouble(t),n=wu.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,r=i.substring(i.length-64),o=r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]";return o}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp},vp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},vp.signExpBits=function(t){return t>>52},vp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},vp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(vp.getBit(t,i)!==vp.getBit(e,i))return n;n++}return 52};var mp=function(){this._commonCoord=null,this._ccFilter=new bp},_p={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};mp.prototype.addCommonBits=function(t){var e=new xp(this._commonCoord);t.apply(e),t.geometryChanged()},mp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Eu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new xp(e);return t.apply(n),t.geometryChanged(),t},mp.prototype.getCommonCoordinate=function(){return this._commonCoord},mp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},_p.CommonCoordinateFilter.get=function(){return bp},_p.Translater.get=function(){return xp},Object.defineProperties(mp,_p);var bp=function(){this._commonBitsX=new vp,this._commonBitsY=new vp};bp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},bp.prototype.getCommonCoordinate=function(){return new Eu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},bp.prototype.interfaces_=function(){return[vl]},bp.prototype.getClass=function(){return bp};var xp=function(){this.trans=null;var t=arguments[0];this.trans=t};xp.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},xp.prototype.isDone=function(){return!1},xp.prototype.isGeometryChanged=function(){return!0},xp.prototype.interfaces_=function(){return[nh]},xp.prototype.getClass=function(){return xp};var wp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};wp.prototype.selfSnap=function(t){return new dp(t).snapTo(t,this._snapTolerance)},wp.prototype.removeCommonBits=function(t){this._cbr=new mp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},wp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},wp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=qp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},wp.prototype.checkValid=function(t){t.isValid()||Xu.out.println("Snapped geometry is invalid")},wp.prototype.computeSnapTolerance=function(){this._snapTolerance=dp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},wp.prototype.snap=function(t){var e=this.removeCommonBits(t);return dp.snap(e[0],e[1],this._snapTolerance)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.overlayOp=function(t,e,n){return new wp(t,e).getResultGeometry(n)},wp.union=function(t,e){return wp.overlayOp(t,e,qp.UNION)},wp.intersection=function(t,e){return wp.overlayOp(t,e,qp.INTERSECTION)},wp.symDifference=function(t,e){return wp.overlayOp(t,e,qp.SYMDIFFERENCE)},wp.difference=function(t,e){return wp.overlayOp(t,e,qp.DIFFERENCE)};var Sp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Sp.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=qp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof il))throw t;i=t}if(!n)try{e=wp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof il?i:t}return e},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.overlayOp=function(t,e,n){return new Sp(t,e).getResultGeometry(n)},Sp.union=function(t,e){return Sp.overlayOp(t,e,qp.UNION)},Sp.intersection=function(t,e){return Sp.overlayOp(t,e,qp.INTERSECTION)},Sp.symDifference=function(t,e){return Sp.overlayOp(t,e,qp.SYMDIFFERENCE)},Sp.difference=function(t,e){return Sp.overlayOp(t,e,qp.DIFFERENCE)};var Pp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Pp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Cp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},Tp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Cp.prototype.isDelete=function(){return this._eventType===Cp.DELETE},Cp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Cp.prototype.getObject=function(){return this._obj},Cp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Cp.prototype.getInsertEvent=function(){return this._insertEvent},Cp.prototype.isInsert=function(){return this._eventType===Cp.INSERT},Cp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Cp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Cp.prototype.interfaces_=function(){return[Pu]},Cp.prototype.getClass=function(){return Cp},Tp.INSERT.get=function(){return 1},Tp.DELETE.get=function(){return 2},Object.defineProperties(Cp,Tp);var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op};var Ep=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Ep.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Ep.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Ep.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ep.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Ep.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ep.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},Ep.prototype.hasProperIntersection=function(){return this._hasProper},Ep.prototype.hasIntersection=function(){return this._hasIntersection},Ep.prototype.isDone=function(){return this._isDone},Ep.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Ep.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Ep.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Ep.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Lp=function(t){function e(){t.call(this),this.events=new Ll,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){vc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Ep&&Ru(arguments[0],Ol)&&Ru(arguments[1],Ol)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Ru(arguments[0],Ol)&&arguments[1]instanceof Ep){var s=arguments[0],a=arguments[1],u=arguments[2];u?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new Pp(n,r),s=new Cp(e,n.getMinX(r),o);this.events.add(s),this.events.add(new Cp(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],o=i.iterator();o.hasNext();){var s=o.next();this.addEdge(s,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Op),Mp=function(){this._min=wu.POSITIVE_INFINITY,this._max=wu.NEGATIVE_INFINITY},Ip={NodeComparator:{configurable:!0}};Mp.prototype.getMin=function(){return this._min},Mp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Mp.prototype.getMax=function(){return this._max},Mp.prototype.toString=function(){return nl.toLineString(new Eu(this._min,0),new Eu(this._max,0))},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Ip.NodeComparator.get=function(){return Np},Object.defineProperties(Mp,Ip);var Np=function(){};Np.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},Np.prototype.interfaces_=function(){return[Tu]},Np.prototype.getClass=function(){return Np};var Ap=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mp),Rp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mp),kp=function(){this._leaves=new Ll,this._root=null,this._level=0};kp.prototype.buildTree=function(){vc.sort(this._leaves,new Mp.NodeComparator);for(var t=this._leaves,e=null,n=new Ll;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},kp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Ap(t,e,n))},kp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},kp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},kp.prototype.printNode=function(t){Xu.out.println(nl.toLineString(new Eu(t._min,this._level),new Eu(t._max,this._level)))},kp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},kp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Rp(t.get(n),t.get(n+1));e.add(r)}}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp};var Dp=function(){this._items=new Ll};Dp.prototype.visitItem=function(t){this._items.add(t)},Dp.prototype.getItems=function(){return this._items},Dp.prototype.interfaces_=function(){return[pc]},Dp.prototype.getClass=function(){return Dp};var jp=function(){this._index=null;var t=arguments[0];if(!Ru(t,dh))throw new xu("Argument must be Polygonal");this._index=new Up(t)},Fp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jp.prototype.locate=function(t){var e=new hl(t),n=new Bp(e);return this._index.query(t.y,t.y,n),e.getLocation()},jp.prototype.interfaces_=function(){return[rf]},jp.prototype.getClass=function(){return jp},Fp.SegmentVisitor.get=function(){return Bp},Fp.IntervalIndexedGeometry.get=function(){return Up},Object.defineProperties(jp,Fp);var Bp=function(){this._counter=null;var t=arguments[0];this._counter=t};Bp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Bp.prototype.interfaces_=function(){return[pc]},Bp.prototype.getClass=function(){return Bp};var Up=function(){this._index=new kp;var t=arguments[0];this.init(t)};Up.prototype.init=function(t){for(var e=zf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Up.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Nc(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Up.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Dp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},Up.prototype.interfaces_=function(){return[]},Up.prototype.getClass=function(){return Up};var Gp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Eh,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Zf,2===arguments.length){var e=arguments[0],n=arguments[1],i=ml.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Gh.ON)===Nu.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new Ep(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof vh||this._parentGeom instanceof yh||this._parentGeom instanceof mh,u=i||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new Ep(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof ph){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,Nu.INTERIOR)}else if(arguments[0]instanceof Eu){var n=arguments[0];this.insertPoint(this._argIndex,n,Nu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Nu.EXTERIOR,Nu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Nu.INTERIOR,Nu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Nu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Nu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Nl.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new bf(e,new Qh(this._argIndex,Nu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),ol.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Nu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Nl.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;cl.isCCW(i)&&(r=n,o=e);var s=new bf(i,new Qh(this._argIndex,Nu.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],Nu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Qh(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Lp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof mh&&(this._useBoundaryDeterminationRule=!1),e instanceof yh)this.addPolygon(e);else if(e instanceof ch)this.addLineString(e);else if(e instanceof ph)this.addPoint(e);else if(e instanceof gh)this.addCollection(e);else if(e instanceof rh)this.addCollection(e);else if(e instanceof mh)this.addCollection(e);else{if(!(e instanceof ih))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Ru(this._parentGeom,dh)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new jp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Nu.BOUNDARY:Nu.INTERIOR},e}(uc),zp=function(){if(this._li=new ul,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Gp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=ml.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Gp(0,e,i),this._arg[1]=new Gp(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Gp(0,r,s),this._arg[1]=new Gp(1,o,s)}};zp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},zp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var Zp=function(){};Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.map=function(){if(arguments[0]instanceof dl&&Ru(arguments[1],Zp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ll,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(Ru(arguments[0],Pl)&&Ru(arguments[1],Zp.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Ll,u=o.iterator();u.hasNext();){var l=u.next(),h=s.map(l);null!==h&&a.add(h)}return a}},Zp.MapOp=function(){};var qp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Zf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new cf,this._resultPolyList=new Ll,this._resultLineList=new Ll,this._resultPointList=new Ll,this._graph=new uc(new lf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Qh(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Ll;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==Nu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ll,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ll;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),up.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new lc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new hp(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new cp(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Gh.RIGHT),r.getLocation(1,Gh.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(ol.isTrue(!i.isNull(r,Gh.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Gh.LEFT,i.getLocation(r,Gh.LEFT)),ol.isTrue(!i.isNull(r,Gh.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Gh.RIGHT,i.getLocation(r,Gh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zp);qp.overlayOp=function(t,e,n){return new qp(t,e).getResultGeometry(n)},qp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return qp.createEmptyResult(qp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return lp.map(t,{interfaces_:function(){return[Zp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,qp.INTERSECTION)},qp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return qp.createEmptyResult(qp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,qp.SYMDIFFERENCE)},qp.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case qp.INTERSECTION:o=Math.min(i,r);break;case qp.UNION:o=Math.max(i,r);break;case qp.DIFFERENCE:o=i;break;case qp.SYMDIFFERENCE:o=Math.max(i,r)}return o},qp.createEmptyResult=function(t,e,n,i){var r=null;switch(qp.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},qp.difference=function(t,e){return t.isEmpty()?qp.createEmptyResult(qp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,qp.DIFFERENCE))},qp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return qp.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===Nu.BOUNDARY&&(r=Nu.INTERIOR),o===Nu.BOUNDARY&&(o=Nu.INTERIOR),s){case qp.INTERSECTION:return r===Nu.INTERIOR&&o===Nu.INTERIOR;case qp.UNION:return r===Nu.INTERIOR||o===Nu.INTERIOR;case qp.DIFFERENCE:return r===Nu.INTERIOR&&o!==Nu.INTERIOR;case qp.SYMDIFFERENCE:return r===Nu.INTERIOR&&o!==Nu.INTERIOR||r!==Nu.INTERIOR&&o===Nu.INTERIOR}return!1}},qp.INTERSECTION=1,qp.UNION=2,qp.DIFFERENCE=3,qp.SYMDIFFERENCE=4;var Vp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Zf,this._seg=new Nc;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Vp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=e._linework.getGeometryN(n).getCoordinateSequence(),r=0;r<i.size()-1;r++)if(i.getCoordinate(r,e._seg.p0),i.getCoordinate(r+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Vp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Nu.BOUNDARY:this._ptLocator.locate(t,this._g)},Vp.prototype.extractLinework=function(t){var e=new Wp;t.apply(e);var n=e.getLinework(),i=Ah.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp};var Wp=function(){this._linework=null,this._linework=new Ll};Wp.prototype.getLinework=function(){return this._linework},Wp.prototype.filter=function(t){if(t instanceof yh){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Wp.prototype.interfaces_=function(){return[eh]},Wp.prototype.getClass=function(){return Wp};var Hp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Hp.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Hp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Hp.prototype.getPoints=function(t){for(var e=new Ll,n=zf.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Hp.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,u=n*o/s,l=(e.x+t.x)/2,h=(e.y+t.y)/2;if(this._doLeft){var c=new Eu(l-u,h+a);i.add(c)}if(this._doRight){var f=new Eu(l+u,h-a);i.add(f)}},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};var Xp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ll;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Vp(this._geom[0],this._boundaryDistanceTolerance),new Vp(this._geom[1],this._boundaryDistanceTolerance),new Vp(this._geom[2],this._boundaryDistanceTolerance)]},Yp={TOLERANCE:{configurable:!0}};Xp.prototype.reportResult=function(t,e,n){Xu.out.println("Overlay result invalid - A:"+Nu.toLocationSymbol(e[0])+" B:"+Nu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Nu.toLocationSymbol(e[2]))},Xp.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Xp.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(e,i))return t._invalidLocation=i,!1}return!0}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Xp.hasLocation(this._location,Nu.BOUNDARY)||this.isValidResult(r,this._location)}},Xp.prototype.addTestPts=function(t){var e=new Hp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Xp.prototype.isValidResult=function(t,e){var n=qp.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===Nu.INTERIOR);return i||this.reportResult(t,e,n),i},Xp.prototype.getInvalidLocation=function(){return this._invalidLocation},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp},Xp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Xp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(dp.computeSizeBasedSnapTolerance(t),dp.computeSizeBasedSnapTolerance(e))},Xp.isValid=function(t,e,n,i){return new Xp(t,e,i).isValid(n)},Yp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Xp,Yp);var Qp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Qp.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Qp.prototype.combine=function(){for(var t=new Ll,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp},Qp.combine=function(){if(1===arguments.length){var t=arguments[0],e=new Qp(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new Qp(Qp.createList(n,i));return r.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new Qp(Qp.createList(o,s,a));return u.combine()}},Qp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Qp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ll;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new Ll;return s.add(i),s.add(r),s.add(o),s}};var Jp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ll)},Kp={STRTREE_NODE_CAPACITY:{configurable:!0}};Jp.prototype.reduceToGeometries=function(t){for(var e=new Ll,n=t.iterator();n.hasNext();){var i=n.next(),r=null;Ru(i,Ol)?r=this.unionTree(i):i instanceof dl&&(r=i),e.add(r)}return e},Jp.prototype.extractByEnvelope=function(t,e,n){for(var i=new Ll,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Jp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Qp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Jp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Sc(Jp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Jp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Jp.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Jp.getGeometry(e,n),Jp.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Jp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Jp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Jp.prototype.unionActual=function(t,e){return Jp.restrictToPolygons(t.union(e))},Jp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Jp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Ll,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Qp.combine(i)},Jp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getFactory(),a=s.createGeometryCollection([r,o]),u=a.buffer(0);return u}},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.restrictToPolygons=function(t){if(Ru(t,dh))return t;var e=Gf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Ah.toPolygonArray(e))},Jp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Jp.union=function(t){return new Jp(t).union()},Kp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Jp,Kp);var $p=function(){};function td(){return new ed}function ed(){this.reset()}$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return qp.createEmptyResult(qp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Sp.overlayOp(t,e,qp.UNION)},ed.prototype={constructor:ed,reset:function(){this.s=this.t=0},add:function(t){id(nd,t,this.t),id(this,nd.s,this.s),this.s?this.t+=nd.t:this.s=nd.t},valueOf:function(){return this.s}};var nd=new ed;function id(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var rd=1e-6,od=Math.PI,sd=od/2,ad=od/4,ud=2*od,ld=180/od,hd=od/180,cd=Math.abs,fd=Math.atan,pd=Math.atan2,dd=Math.cos,yd=Math.sin,gd=Math.sqrt;function vd(t){return t>1?0:t<-1?od:Math.acos(t)}function md(t){return t>1?sd:t<-1?-sd:Math.asin(t)}function _d(){}function bd(t,e){t&&Pd.hasOwnProperty(t.type)&&Pd[t.type](t,e)}var xd,wd,Sd={Feature:function(t,e){bd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)bd(n[i].geometry,e)}},Pd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Cd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Cd(n[i],e,0)},Polygon:function(t,e){Td(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Td(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)bd(n[i],e)}};function Cd(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Td(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Cd(t[n],e,1);e.polygonEnd()}function Od(t){return[pd(t[1],t[0]),md(t[2])]}function Ed(t){var e=t[0],n=t[1],i=dd(n);return[i*dd(e),i*yd(e),yd(n)]}function Ld(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Md(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Id(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Nd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ad(t){var e=gd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Rd(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function kd(t,e){return[t>od?t-ud:t<-od?t+ud:t,e]}function Dd(t){return function(e,n){return[(e+=t)>od?e-ud:e<-od?e+ud:e,n]}}function jd(t){var e=Dd(t);return e.invert=Dd(-t),e}function Fd(t,e){var n=dd(t),i=yd(t),r=dd(e),o=yd(e);function s(t,e){var s=dd(e),a=dd(t)*s,u=yd(t)*s,l=yd(e),h=l*n+a*i;return[pd(u*r-h*o,a*n-l*i),md(h*r+u*o)]}return s.invert=function(t,e){var s=dd(e),a=dd(t)*s,u=yd(t)*s,l=yd(e),h=l*r-u*o;return[pd(u*r+l*o,a*n+h*i),md(h*n-a*i)]},s}function Bd(t,e){(e=Ed(e))[0]-=t,Ad(e);var n=vd(-e[1]);return((-e[2]<0?-n:n)+ud-rd)%ud}function Ud(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:_d,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Gd(t,e){return cd(t[0]-e[0])<rd&&cd(t[1]-e[1])<rd}function zd(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Zd(t,e,n,i,r){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(Gd(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new zd(i,t,null,!0)),u.push(n.o=new zd(i,null,n,!1)),a.push(n=new zd(s,t,null,!1)),u.push(n.o=new zd(s,null,n,!0))}}),a.length){for(u.sort(e),qd(a),qd(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)r.point((h=l[o])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)r.point((h=l[o])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function qd(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Vd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Wd(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}td(),td(),td(),kd.invert=kd,1===(xd=Vd).length&&(wd=xd,xd=function(t,e){return Vd(wd(t),e)});var Hd=1e9,Xd=-Hd,Yd=td();function Qd(t){return t}td(),td(),td();var Jd=1/0,Kd=Jd,$d=-Jd,ty=$d,ey={point:function(t,e){t<Jd&&(Jd=t),t>$d&&($d=t),e<Kd&&(Kd=e),e>ty&&(ty=e)},lineStart:_d,lineEnd:_d,polygonStart:_d,polygonEnd:_d,result:function(){var t=[[Jd,Kd],[$d,ty]];return $d=ty=-(Kd=Jd=1/0),t}};function ny(t,e,n,i){return function(r,o){var s,a,u,l=e(o),h=r.invert(i[0],i[1]),c=Ud(),f=e(c),p=!1,d={point:y,lineStart:v,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=y,d.lineStart=v,d.lineEnd=m,a=Wd(a);var t=function(t,e){var n=e[0],i=e[1],r=[yd(n),-dd(n),0],o=0,s=0;Yd.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],f=c[0],p=c[1]/2+ad,d=yd(p),y=dd(p),g=0;g<h;++g,f=m,d=b,y=x,c=v){var v=l[g],m=v[0],_=v[1]/2+ad,b=yd(_),x=dd(_),w=m-f,S=w>=0?1:-1,P=S*w,C=P>od,T=d*b;if(Yd.add(pd(T*S*yd(P),y*x+T*dd(P))),o+=C?w+S*ud:w,C^f>=n^m>=n){var O=Md(Ed(c),Ed(v));Ad(O);var E=Md(r,O);Ad(E);var L=(C^w>=0?-1:1)*md(E[2]);(i>L||i===L&&(O[0]||O[1]))&&(s+=C^w>=0?1:-1)}}return(o<-1e-6||o<rd&&Yd<-1e-6)^1&s}(s,h);a.length?(p||(o.polygonStart(),p=!0),Zd(a,ry,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function y(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function g(t,e){var n=r(t,e);l.point(n[0],n[1])}function v(){d.point=g,l.lineStart()}function m(){d.point=y,l.lineEnd()}function _(t,e){u.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function x(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,i,r=f.clean(),l=c.result(),h=l.length;if(u.pop(),s.push(u),u=null,h)if(1&r){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else h>1&&2&r&&l.push(l.pop().concat(l.shift())),a.push(l.filter(iy))}return d}}function iy(t){return t.length>1}function ry(t,e){return((t=t.x)[0]<0?t[1]-sd-rd:sd-t[1])-((e=e.x)[0]<0?e[1]-sd-rd:sd-e[1])}td();var oy=ny(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?od:-od,u=cd(o-n);cd(u-od)<rd?(t.point(n,i=(i+s)/2>0?sd:-sd),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&u>=od&&(cd(n-r)<rd&&(n-=r*rd),cd(o-a)<rd&&(o-=a*rd),i=function(t,e,n,i){var r,o,s=yd(t-n);return cd(s)>rd?fd((yd(e)*(o=dd(i))*yd(n)-yd(i)*(r=dd(e))*yd(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*sd,i.point(-od,r),i.point(0,r),i.point(od,r),i.point(od,0),i.point(od,-r),i.point(0,-r),i.point(-od,-r),i.point(-od,0),i.point(-od,r);else if(cd(t[0]-e[0])>rd){var o=t[0]<e[0]?od:-od;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-od,-sd]);function sy(t){return function(e){var n=new ay;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ay(){}function uy(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&Sd.hasOwnProperty(t.type)?Sd[t.type](t,e):bd(t,e)}(n,t.stream(ey));var s=ey.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),u=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}ay.prototype={constructor:ay,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ly=dd(30*hd);function hy(t,e){return+e?function(t,e){function n(i,r,o,s,a,u,l,h,c,f,p,d,y,g){var v=l-i,m=h-r,_=v*v+m*m;if(_>4*e&&y--){var b=s+f,x=a+p,w=u+d,S=gd(b*b+x*x+w*w),P=md(w/=S),C=cd(cd(w)-1)<rd||cd(o-c)<rd?(o+c)/2:pd(x,b),T=t(C,P),O=T[0],E=T[1],L=O-i,M=E-r,I=m*L-v*M;(I*I/_>e||cd((v*L+m*M)/_-.5)>.3||s*f+a*p+u*d<ly)&&(n(i,r,o,s,a,u,O,E,C,b/=S,x/=S,w,y,g),g.point(O,E),n(O,E,C,b,x,w,l,h,c,f,p,d,y,g))}}return function(e){var i,r,o,s,a,u,l,h,c,f,p,d,y={point:g,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),y.lineStart=b},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function g(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){h=NaN,y.point=m,e.lineStart()}function m(i,r){var o=Ed([i,r]),s=t(i,r);n(h,c,l,f,p,d,h=s[0],c=s[1],l=i,f=o[0],p=o[1],d=o[2],16,e),e.point(h,c)}function _(){y.point=g,e.lineEnd()}function b(){v(),y.point=x,y.lineEnd=w}function x(t,e){m(i=t,e),r=h,o=c,s=f,a=p,u=d,y.point=m}function w(){n(h,c,l,f,p,d,r,o,i,s,a,u,16,e),y.lineEnd=_,_()}return y}}(t,e):function(t){return sy({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var cy=sy({point:function(t,e){this.stream.point(t*hd,e*hd)}});function fy(t){return function(t){var e,n,i,r,o,s,a,u,l,h,c=150,f=480,p=250,d=0,y=0,g=0,v=0,m=0,_=null,b=oy,x=null,w=Qd,S=.5,P=hy(O,S);function C(t){return[(t=o(t[0]*hd,t[1]*hd))[0]*c+n,i-t[1]*c]}function T(t){return(t=o.invert((t[0]-n)/c,(i-t[1])/c))&&[t[0]*ld,t[1]*ld]}function O(t,r){return[(t=e(t,r))[0]*c+n,i-t[1]*c]}function E(){o=Rd(r=function(t,e,n){return(t%=ud)?e||n?Rd(jd(t),Fd(e,n)):jd(t):e||n?Fd(e,n):kd}(g,v,m),e);var t=e(d,y);return n=f-t[0]*c,i=p+t[1]*c,L()}function L(){return l=h=null,C}return C.stream=function(t){return l&&h===t?l:l=cy(b(r,P(w(h=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?function(t,e){var n=dd(t),i=n>0,r=cd(n)>rd;function o(t,e){return dd(t)*dd(e)>n}function s(t,e,i){var r=[1,0,0],o=Md(Ed(t),Ed(e)),s=Ld(o,o),a=o[0],u=s-a*a;if(!u)return!i&&t;var l=n*s/u,h=-n*a/u,c=Md(r,o),f=Nd(r,l);Id(f,Nd(o,h));var p=c,d=Ld(f,p),y=Ld(p,p),g=d*d-y*(Ld(f,f)-1);if(!(g<0)){var v=gd(g),m=Nd(p,(-d-v)/y);if(Id(m,f),m=Od(m),!i)return m;var _,b=t[0],x=e[0],w=t[1],S=e[1];x<b&&(_=b,b=x,x=_);var P=x-b,C=cd(P-od)<rd;if(!C&&S<w&&(_=w,w=S,S=_),C||P<rd?C?w+S>0^m[1]<(cd(m[0]-b)<rd?w:S):w<=m[1]&&m[1]<=S:P>od^(b<=m[0]&&m[0]<=x)){var T=Nd(p,(-d+v)/y);return Id(T,f),[m,Od(T)]}}}function a(e,n){var r=i?t:od-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return ny(o,function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var p,d=[c,f],y=o(c,f),g=i?y?0:a(c,f):y?a(c+(c<0?od:-od),f):0;if(!e&&(l=u=y)&&t.lineStart(),y!==u&&(!(p=s(e,d))||Gd(e,p)||Gd(d,p))&&(d[0]+=rd,d[1]+=rd,y=o(d[0],d[1])),y!==u)h=0,y?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&i^y){var v;g&n||!(v=s(d,e,!0))||(h=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!y||e&&Gd(e,d)||t.point(d[0],d[1]),e=d,u=y,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}},function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var s=dd(e),a=yd(e),u=i*n;null==r?(r=e+i*ud,o=e-u/2):(r=Bd(s,r),o=Bd(s,o),(i>0?r<o:r>o)&&(r+=i*ud));for(var l,h=r;i>0?h>o:h<o;h-=u)l=Od([s,-a*dd(h),-a*yd(h)]),t.point(l[0],l[1])}}(o,t,e,r,n,i)},i?[0,-t]:[-od,t-od])}(_=t*hd,6*hd):(_=null,oy),L()):_*ld},C.clipExtent=function(t){return arguments.length?(w=null==t?(x=s=a=u=null,Qd):function(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var h=0,c=0;if(null==r||(h=s(r,a))!==(c=s(o,a))||u(r,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==c);else l.point(o[0],o[1])}function s(i,r){return cd(i[0]-t)<rd?r>0?0:3:cd(i[0]-n)<rd?r>0?2:1:cd(i[1]-e)<rd?r>0?1:0:r>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,f,p,d,y,g,v,m,_=s,b=Ud(),x={point:w,lineStart:function(){x.point=S,l&&l.push(h=[]),v=!0,g=!1,d=y=NaN},lineEnd:function(){u&&(S(c,f),p&&g&&b.rejoin(),u.push(b.result())),x.point=w,g&&_.lineEnd()},polygonStart:function(){_=b,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],f=c[0],p=c[1];u<h;++u)o=f,s=p,f=(c=a[u])[0],p=c[1],s<=i?p>i&&(f-o)*(i-s)>(p-s)*(t-o)&&++e:p<=i&&(f-o)*(i-s)<(p-s)*(t-o)&&--e;return e}(),n=m&&e,r=(u=Wd(u)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&Zd(u,a,e,o,s),s.polygonEnd()),_=s,u=l=h=null}};function w(t,e){r(t,e)&&_.point(t,e)}function S(o,s){var a=r(o,s);if(l&&h.push([o,s]),v)c=o,f=s,p=a,v=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&g)_.point(o,s);else{var u=[d=Math.max(Xd,Math.min(Hd,d)),y=Math.max(Xd,Math.min(Hd,y))],b=[o=Math.max(Xd,Math.min(Hd,o)),s=Math.max(Xd,Math.min(Hd,s))];!function(t,e,n,i,r,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=i-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}}(u,b,t,e,n,i)?a&&(_.lineStart(),_.point(o,s),m=!1):(g||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),a||_.lineEnd(),m=!1)}d=o,y=s,g=a}return x}}(x=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==x?null:[[x,s],[a,u]]},C.scale=function(t){return arguments.length?(c=+t,E()):c},C.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],E()):[f,p]},C.center=function(t){return arguments.length?(d=t[0]%360*hd,y=t[1]%360*hd,E()):[d*ld,y*ld]},C.rotate=function(t){return arguments.length?(g=t[0]%360*hd,v=t[1]%360*hd,m=t.length>2?t[2]%360*hd:0,E()):[g*ld,v*ld,m*ld]},C.precision=function(t){return arguments.length?(P=hy(O,S=t*t),L()):gd(S)},C.fitExtent=function(t,e){return uy(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return uy(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&T,E()}}(function(){return t})()}var py=function(t,e){var n=dd(t),i=dd(e),r=function(t){return(t=vd(t))&&t/yd(t)}(n*i);return[r*i*yd(t),r*yd(e)]};function dy(t,e,i,r){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return Y(t,function(t){var n=dy(t,e,i,r);n&&u.push(n)}),d(u)}var l=function(t){var e=hn(t).geometry.coordinates,i=[-e[0],-e[1]];return fy(py).scale(79.4188).clipAngle(179.999).rotate(i).scale(n)}(a),h={type:a.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(a.coordinates,l)},c=(new Bh).read(h),f=b(x(e,i),"meters"),p=Af.bufferOp(c,f,r);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((p=(new Uh).write(p)).coordinates))return s({type:p.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(p.coordinates,l)},o)}function yy(t,e,n){void 0===n&&(n={});var i=B(t),r=B(e),o=mu(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):v(o,n.properties)}function gy(t,e,n){void 0===n&&(n={});var i=B(t),r=B(e),o=_u(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?h(o[0],n.properties):v(o,n.properties)}
/**
     * @license get-closest https://github.com/cosmosio/get-closest
     *
     * The MIT License (MIT)
     *
     * Copyright (c) 2014-2017 Olivier Scherrer <pode.fr@gmail.com>
     */function vy(t,e){return function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===r||o<r)&&(r=o,i=n)}),i}(t,e)}function my(t,e){return ci(f(X(t)),f(X(e))).features.length>0}function _y(t,e,n){void 0===n&&(n={});var i=JSON.stringify(n.properties||{}),r=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(r+s)/2,h=2*e/ve([r,u],[s,u],n)*(s-r),c=2*e/ve([l,o],[l,a],n)*(a-o),f=h/2,p=2*f,y=Math.sqrt(3)/2*c,g=s-r,v=a-o,m=.75*p,_=y,b=(g-p)/(p-f/2),x=Math.floor(b),w=(x*m-f/2-g)/2-f/2+m/2,S=Math.floor((v-y)/y),P=(v-S*y)/2,C=S*y-v>y/2;C&&(P-=y/4);for(var T=[],O=[],E=0;E<6;E++){var L=2*Math.PI/6*E;T.push(Math.cos(L)),O.push(Math.sin(L))}for(var M=[],I=0;I<=x;I++)for(var N=0;N<=S;N++){var A=I%2==1;if(!(0===N&&A||0===N&&C)){var R=I*m+r-w,k=N*_+o+P;if(A&&(k-=y/2),!0===n.triangles)xy([R,k],h/2,c/2,JSON.parse(i),T,O).forEach(function(t){n.mask?gy(n.mask,t)&&M.push(t):M.push(t)});else{var D=by([R,k],h/2,c/2,JSON.parse(i),T,O);n.mask?gy(n.mask,D)&&M.push(D):M.push(D)}}}return d(M)}function by(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*r[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),h([s],i)}function xy(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*r[a],t[1]+n*o[a]]),u.push([t[0]+e*r[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(h([u],i))}return s}function wy(t){if(t.features.length<=1)return t;var e=function(t){var e=St(),n=[];return J(t,function(t,e){var i=st(t);n.push({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],i={};return J(t,function(t,r){if(i[r])return!0;for(e.remove({index:r},Sy),i[r]=!0;;){var o=st(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0)for(var a=s.map(function(t){return i[t.index]=!0,e.remove({index:t.index},Sy),t.geojson}),u=0,l=a.length;u<l;u++)t=yy(t,a[u]);if(0===s.length)break}n.push(t)}),d(n)}function Sy(t,e){return t.index===e.index}function Py(t,e,n){return void 0===n&&(n={}),function(t,e,n,i){void 0===i&&(i={});for(var r=[],o=t[0],s=t[1],a=t[2],u=t[3],l=e/ve([o,s],[a,s],i)*(a-o),c=n/ve([o,s],[o,u],i)*(u-s),f=a-o,p=u-s,y=Math.floor(f/l),g=Math.floor(p/c),v=(p-g*c)/2,m=o+(f-y*l)/2,_=0;_<y;_++){for(var b=s+v,x=0;x<g;x++){var w=h([[[m,b],[m,b+c],[m+l,b+c],[m+l,b],[m,b]]],i.properties);i.mask?rs(i.mask,w)&&r.push(w):r.push(w),b+=c}m+=l}return d(r)}(t,e,e,n)}function Cy(t,e,n){void 0===n&&(n={});for(var i=[],r=e/ve([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ve([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var c=null,f=null;s%2==0&&u%2==0?(c=h([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),f=h([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(c=h([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties),f=h([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(c=h([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties),f=h([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(c=h([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),f=h([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)),n.mask?(gy(n.mask,c)&&i.push(c),gy(n.mask,f)&&i.push(f)):(i.push(c),i.push(f)),l+=o,u++}s++,a+=r}return d(i)}py.invert=function(t,e){var n=gd(t*t+e*e),i=function(t){return t}(n),r=yd(i),o=dd(i);return[pd(t*r,n*o),md(n&&e*r/n)]},e.along=function(t,e,n){void 0===n&&(n={});for(var i=B(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var s=e-r;if(s){var a=ln(i[o],i[o-1])-180;return an(i[o],s,a,n)}return u(i[o])}r+=ve(i[o],i[o+1],n)}return u(i[i.length-1])},e.angle=function(t,e,n,i){if(void 0===i&&(i={}),!L(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var r=t,o=e,s=n,a=S(!0!==i.mercator?ln(r,o):vr(r,o)),u=S(!0!==i.mercator?ln(s,o):vr(s,o)),l=Math.abs(a-u);return!0===i.explementary?360-l:l},e.applyFilter=Na,e.area=wi,e.areaFactors=o,e.bbox=st,e.bboxClip=function(t,e){var n=B(t),i=n.type,r="Feature"===t.type?t.properties:{},o=n.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(o=[o]),o.forEach(function(t){!function(t,e,n){var i,r,o,s,a,u=t.length,l=lr(t[0],e),h=[];for(n||(n=[]),i=1;i<u;i++){for(s=t[i-1],r=o=lr(a=t[i],e);;){if(!(l|r)){h.push(s),r!==o?(h.push(a),i<u-1&&(n.push(h),h=[])):i===u-1&&h.push(a);break}if(l&r)break;l?l=lr(s=ur(s,a,l,e),e):r=lr(a=ur(s,a,r,e),e)}l=o}h.length&&n.push(h)}(t,e,s)}),1===s.length?f(s[0],r):y(s,r);case"Polygon":return h(hr(o,e),r);case"MultiPolygon":return v(o.map(function(t){return hr(t,e)}),r);default:throw new Error("geometry "+i+" not supported")}},e.bboxPolygon=rn,e.bearing=ln,e.bearingToAngle=S,e.bearingToAzimuth=S,e.bezier=nn,e.bezierSpline=nn,e.booleanClockwise=Sr,e.booleanContains=function(t,e){var n=B(t),i=B(e),r=n.type,o=i.type,s=n.coordinates,a=i.coordinates;switch(r){case"Point":switch(o){case"Point":return Wo(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(Wo(t.coordinates[n],e.coordinates)){i=!0;break}return i}(n,i);case"MultiPoint":return function(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){for(var r=i[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(Wo(r,a[s])){o=!0;break}if(!o)return!1}return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Ei(i,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(Ei({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Ei({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,i);case"MultiPoint":return function(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i];if(Ei(o,t,{ignoreEndVertices:!0})&&(n=!0),!Ei(o,t))return!1}return!!n}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return de(i,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0,r=st(t),o=st(e);if(!Vo(r,o))return!1;for(;i<e.coordinates.length-1;i++)if(de({type:"Point",coordinates:Ho(e.coordinates[i],e.coordinates[i+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,i);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;var n=st(t),i=st(e);if(!Vo(n,i))return!1;for(var r=B(e).coordinates,o=0,s=r;o<s.length;o++)for(var a=0,u=s[o];a<u.length;a++)if(!de(u[a],t))return!1;return!0}(n,i);case"MultiPoint":return function(t,e){for(var n=0,i=e.coordinates;n<i.length;n++)if(!de(i[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=B(t),i=B(e),r=n.type,o=i.type;switch(r){case"MultiPoint":switch(o){case"LineString":return Xo(n,i);case"Polygon":return Qo(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Xo(i,n);case"LineString":return function(t,e){if(ci(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),Jo(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(n,i);case"Polygon":return Yo(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Qo(i,n);case"LineString":return Yo(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.booleanDisjoint=Go,e.booleanEqual=function(t,e){return B(t).type===B(e).type&&new ns({precision:6}).compare(Ve(t),Ve(e))},e.booleanIntersects=rs,e.booleanOverlap=is,e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==vs(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==vs(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Un(Ve(t)).features,i=Un(Ve(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!gs(o,i[r].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=de,e.booleanPointOnLine=Ei,e.booleanWithin=Mi,e.buffer=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return Y(t,function(t){var n=dy(t,e,i,r);n&&o.push(n)}),d(o);case"FeatureCollection":return W(t,function(t){var n=dy(t,e,i,r);n&&W(n,function(t){t&&o.push(t)})}),d(o)}return dy(t,e,i,r)},e.center=hn,e.centerMean=ua,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!L(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!E(n))throw new Error("counter must be a number");var i=e.weight,r=ua(t,{weight:e.weight}),o=d([]);W(t,function(t){var e;o.features.push(cn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[i]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return function t(e,n,i,r,o){var s=r.tolerance||.001,a=0,l=0,h=0,c=0;if(W(i,function(t){var n,i=null===(n=t.properties)||void 0===n?void 0:n.weight,r=null==i?1:i;if(!E(r=Number(r)))throw new Error("weight value must be a number");if(r>0){c+=1;var o=r*ve(t,e);0===o&&(o=1);var s=r/o;a+=t.geometry.coordinates[0]*s,l+=t.geometry.coordinates[1]*s,h+=s}}),c<1)throw new Error("no features to measure");var f=a/h,p=l/h;return 1===c||0===o||Math.abs(f-n[0])<s&&Math.abs(p-n[1])<s?u([f,p],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([f,p]),t([f,p],e,i,r,o-1))}(r.geometry.coordinates,[0,0],o,s,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),U(e)){case"Point":return u(A(e),n.properties);case"Polygon":var i=[];z(e,function(t){i.push(t)});var r,o,s,a,l,h,c,f,p=cn(e,{properties:n.properties}),d=p.geometry.coordinates,y=0,g=0,v=0,m=i.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(r=0;r<i.length-1;r++)a=(o=m[r])[0],h=o[1],l=(s=m[r+1])[0],v+=f=a*(c=s[1])-l*h,y+=(a+l)*f,g+=(h+c)*f;if(0===v)return p;var _=1/(.5*v*6);return u([d[0]+_*y,d[1]+_*g],n.properties);default:var b=pe(e);return b?t(b,{properties:n.properties}):cn(e,{properties:n.properties})}},e.centroid=cn,e.circle=un,e.cleanCoords=Ve,e.clone=we,e.clusterEach=La,e.clusterReduce=Ma,e.clusters=ka,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=we(t)),n.minPoints=n.minPoints||3;var i=new ls.DBSCAN,r=i.run(X(t),T(e,n.units),n.minPoints,ve),o=-1;return r.forEach(function(e){o++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"})}),i.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=we(t));var i=X(t),r=i.slice(0,e.numberOfClusters),o=ys(i,e.numberOfClusters,r),s={};return o.centroids.forEach(function(t,e){s[e]=t}),W(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},e.collect=function(t,e,n,i){var r=St(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}});return r.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=st(t),n=r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){de([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[i]=o}),t},e.collectionOf=F,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return W(t,function(t){var n,i,r,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,i=me(function(t){var e=[],n={};return W(t,function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");n.hasOwnProperty(i)||(e.push(t),n[i]=!0)}}),d(e)}(t));if(i.features=i.features.filter(function(t){var i=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(i,r,e),a=ve(r,o,e),u=ve(i,o,e);return s<=n&&a<=n&&u<=n}),i.features.length<1)return null;var r=qe(i);return 1===r.coordinates.length&&(r.coordinates=r.coordinates[0],r.type="Polygon"),s(r)},e.containsNumber=k,e.convertArea=O,e.convertDistance=T,e.convertLength=T,e.convex=pe,e.coordAll=X,e.coordEach=z,e.coordReduce=Z,e.createBins=Ia,e.degrees2radians=C,e.degreesToRadians=C,e.destination=an,e.difference=function(t,e){var n=B(t),i=B(e),r=t.properties||{},o=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return vu.run("difference",t,n)}(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?h(o[0],r):v(o,r)},e.dissolve=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;F(t,"Polygon","dissolve");var i=we(t),r=i.features,o=[];r.forEach(function(t,e){t.properties.origIndexPosition=e});var s=li();for(var a in s.load(i),r){var u=r[a],l=!1;if(s.search(u).features.forEach(function(t){u=r[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=vy(e,o);0!==i&&(e-=i)}if(e!==+a){var h=r[e];h&&u&&(void 0!==n&&h.properties[n]!==u.properties[n]||is(u,h)&&my(u,h)&&(r[a]=yy(u,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),r.splice(e,1),u.properties.origIndexPosition=a,s.remove(u,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),l=!0))}}),l){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return r.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),i},e.distance=ve,e.distanceToDegrees=w,e.distanceToRadians=x,e.distanceWeight=pa,e.earthRadius=n,e.ellipse=sa,e.envelope=on,e.explode=fn,e.factors=i,e.feature=s,e.featureCollection=d,e.featureEach=W,e.featureOf=j,e.featureReduce=H,e.filterProperties=Ra,e.findPoint=rt,e.findSegment=it,e.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return J(t,function(t){e.push(t)}),d(e)},e.flattenEach=J,e.flattenReduce=K,e.flip=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=we(t)),z(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},e.geojsonType=D,e.geomEach=Y,e.geomReduce=Q,e.geometry=a,e.geometryCollection=m,e.getCluster=Ea,e.getCoord=A,e.getCoords=R,e.getGeom=B,e.getType=U,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=A(t),e=A(e),i=i||{},r=r||100,o=o||10,new Xi({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},e.helpers=N,e.hexGrid=_y,e.inside=de,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(F(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var s,a=st(t);switch(i){case"point":case"points":s=Ri(a,e,n);break;case"square":case"squares":s=Py(a,e,n);break;case"hex":case"hexes":s=_y(a,e,n);break;case"triangle":case"triangles":s=Cy(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return W(s,function(e){var s=0,a=0;W(t,function(t){var u,l=ve("point"===i?e:cn(e),t,n);if(void 0!==r&&(u=t.properties[r]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var h=1/Math.pow(l,o);a+=h,s+=h*u});var l=we(e);l.properties[r]=s/a,u.push(l)}),d(u)},e.intersect=gy,e.invariant=G,e.isNumber=E,e.isObject=L,e.isobands=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(F(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!L(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;F(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return W(t,function(t){var e=R(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return R(t)[0]-R(e)[0]})}).sort(function(t,n){return e?R(t[0])[1]-R(n[0])[1]:R(n[0])[1]-R(t[0])[1]})}
/*!
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===r&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:i,flip:!0}),a=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=To(Co(Lr(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,i.push(u)}return i}(s,e,i);return d((a=function(t,e,n){var i=st(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=e[0].length-1,l=e.length-1,h=r/u,c=o/l,f=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!L(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ht({},r,o[e]);return n[i]=t[i],v(t.groupedRings,n)}))},e.isolines=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(F(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!L(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;F(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return W(t,function(t){var e=R(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return R(t)[0]-R(e)[0]})}).sort(function(t,n){return e?R(t[0])[1]-R(n[0])[1]:R(n[0])[1]-R(t[0])[1]})}(t,i),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===r&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:i,flip:!0});return d(function(t,e,n){var i=st(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],u=e[0].length-1,l=e.length-1,h=r/u,c=o/l,f=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach(function(t){z(t,f)}),t}(function(t,e,n,i,r){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ht({},i,r[s]);u[n]=a;var l=y(pt(t,a),u);o.push(l)}return o}(s,e,i,r,o),s,t))},e.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var r=n;r<e.length-1;r++){if(t===e){if(1===Math.abs(n-r))continue;if(0===n&&r===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=mi(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[r][0],e[r][1],e[r+1][0],e[r+1][1]);o&&i.features.push(u([o[0],o[1]]))}})}),i},e.length=Ti,e.lengthToDegrees=w,e.lengthToRadians=x,e.lineArc=$i,e.lineChunk=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return J(t,function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=Ti(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(Oi(t,e*s,e*(s+1),{units:n}))}(t,e,i,function(t){o.push(t)})}),d(o)},e.lineDistance=Ti,e.lineEach=et,e.lineIntersect=ci,e.lineOffset=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=U(t),o=t.properties;switch(r){case"LineString":return Ro(t,e,i);case"MultiLineString":var s=[];return J(t,function(t){s.push(Ro(t,e,i).geometry.coordinates)}),y(s,o);default:throw new Error("geometry "+r+" is not supported")}},e.lineOverlap=dr,e.lineReduce=nt,e.lineSegment=Un,e.lineSlice=function(t,e,n){var i=R(n);if("LineString"!==U(n))throw new Error("line must be a LineString");for(var r,o=pi(n,t),s=pi(n,e),a=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=r[0].properties.index+1;u<r[1].properties.index+1;u++)a.push(i[u]);return a.push(r[1].geometry.coordinates),f(a,n.properties)},e.lineSliceAlong=Oi,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=U(t),i=U(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=ki(e,{precision:7});switch(i){case"Point":return Qi(t,r);case"MultiPoint":return Yi(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Yi(t,ci(t,r))}},e.lineString=f,e.lineStringToPolygon=rr,e.lineStrings=p,e.lineToPolygon=rr,e.mask=function(t,e){var n,i,r=function(t){return h(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),o=(n=[],i=[],J(t,function(t){var e=t.geometry.coordinates,r=e[0],o=e.slice(1);n.push(h([r])),o.forEach(function(t){i.push(h([t]))})}),[d(n),d(i)]),s=o[0],a=o[1];return function(t,e,n){var i=[];return i.push(t.geometry.coordinates[0]),J(e,function(t){i.push(t.geometry.coordinates[0])}),J(n,function(t){i.push(t.geometry.coordinates[0])}),h(i)}(r,s=wy(s),a=wy(a))},e.meta=ot,e.midpoint=function(t,e){return an(t,ve(t,e)/2,ln(t,e))},e.moranIndex=function(t,e){var n=e.inputField,i=e.threshold||1e5,r=e.p||2,o=e.binary||!1,s=pa(t,{alpha:e.alpha||-1,binary:o,p:r,standardization:e.standardization||!0,threshold:i}),a=[];W(t,function(t){var e=t.properties||{};a.push(e[n])});for(var u=da(a),l=function(t){for(var e=da(t),n=0,i=0,r=t;i<r.length;i++){var o=r[i];n+=Math.pow(o-e,2)}return n/t.length}(a),h=0,c=0,f=0,p=0,d=s.length,y=0;y<d;y++){for(var g=0,v=0;v<d;v++)h+=s[y][v]*(a[y]-u)*(a[v]-u),c+=s[y][v],f+=Math.pow(s[y][v]+s[v][y],2),g+=s[y][v]+s[v][y];p+=Math.pow(g,2)}var m=h/c/l,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+c*c*3)/((d-1)*(d+1)*(c*c))-_*_,x=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:x,zNorm:(m-_)/x}},e.multiLineString=y,e.multiPoint=g,e.multiPolygon=v,e.nearest=Bn,e.nearestPoint=Bn,e.nearestPointOnLine=pi,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var i=n.units,r=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return Y(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==U(e))throw new Error("line must be a LineString");var s=1/0,a=null;return W(o,function(t){var n=yi(t,e,{units:i});n<s&&(s=n,a=t)}),a&&(a.properties=ht({dist:s},a.properties,r)),a},e.planepoint=function(t,e){var n=A(t),i=B(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,s=r.b,a=r.c,u=n[0],l=n[1],h=i[0][0],c=i[0][1],f=void 0!==o?o:i[0][2],p=i[1][0],d=i[1][1],y=void 0!==s?s:i[1][2],g=i[2][0],v=i[2][1],m=void 0!==a?a:i[2][2];return(m*(u-h)*(l-d)+f*(u-p)*(l-v)+y*(u-g)*(l-c)-y*(u-h)*(l-v)-m*(u-p)*(l-c)-f*(u-g)*(l-d))/((u-h)*(l-d)+(u-p)*(l-v)+(u-g)*(l-c)-(u-h)*(l-v)-(u-p)*(l-c)-(u-g)*(l-d))},e.point=u,e.pointGrid=Ri,e.pointOnFeature=_i,e.pointOnLine=pi,e.pointOnSurface=_i,e.pointToLineDistance=yi,e.points=l,e.pointsWithinPolygon=ge,e.polygon=h,e.polygonSmooth=function(t,e){var n=[],i=e.iterations||1;if(!t)throw new Error("inputPolys is required");return Y(t,function(t,e,r){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<i;u++)a=[[]],s=t,u>0&&(s=h(o).geometry),ha(s,a),o=a.slice(0);n.push(h(o,r));break;case"MultiPolygon":o=[[[]]];for(var l=0;l<i;l++)a=[[[]]],s=t,l>0&&(s=v(o).geometry),ca(s,a),o=a.slice(0);n.push(v(o,r));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(n)},e.polygonTangents=function(t,e){var n,i,r,o,s=R(t),a=R(e),l=st(e),h=0,c=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(h=(c=Bn(t,fn(e))).properties.featureIndex),U(e)){case"Polygon":n=a[0][h],i=a[0][0],null!==c&&c.geometry.coordinates[1]<s[1]&&(i=a[0][h]),o=wr(a[0][0],a[0][a[0].length-1],s);var f=br(a[0],s,o,r,n,i);n=f[0],i=f[1];break;case"MultiPolygon":for(var p=0,y=0,g=0,v=0;v<a[0].length;v++){p=v;for(var m=!1,_=0;_<a[0][v].length;_++){if(y=_,g===h){m=!0;break}g++}if(m)break}n=a[0][p][y],i=a[0][p][y],o=wr(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(t){var e=br(t[0],s,o,r,n,i);n=e[0],i=e[1]})}return d([u(n),u(i)])},e.polygonToLine=er,e.polygonToLineString=er,e.polygonize=function(t){var e=Uo.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):i.push(t)}),n.forEach(function(t){Bo.findEdgeRingContaining(t,i)&&i.push(t)}),d(i.map(function(t){return t.toPolygon()}))},e.polygons=c,e.projection=ba,e.propEach=q,e.propReduce=V,e.propertiesContainsFilter=Aa,e.radians2degrees=P,e.radiansToDegrees=P,e.radiansToDistance=b,e.radiansToLength=b,e.random=Oa,e.randomLineString=Pa,e.randomPoint=wa,e.randomPolygon=Sa,e.randomPosition=xa,e.rewind=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=we(t));var r=[];switch(t.type){case"GeometryCollection":return Y(t,function(t){Pr(t,n)}),t;case"FeatureCollection":return W(t,function(t){W(Pr(t,n),function(t){r.push(t)})}),d(r)}return Pr(t,n)},e.rhumbBearing=vr,e.rhumbDestination=_r,e.rhumbDistance=di,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))},e.sector=function(t,e,n,i,r){if(!L(r=r||{}))throw new Error("options is invalid");var o=r.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(gr(n)===gr(i))return un(t,e,r);var s=R(t),a=$i(t,e,n,i,r),u=[[s]];return z(a,function(t){u[0].push(t)}),u[0].push(s),h(u,o)},e.segmentEach=$,e.segmentReduce=tt,e.shortestPath=function(t,e,n){if(!L(n=n||{}))throw new Error("options is invalid");var i=n.resolution,r=n.minDistance,o=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&!E(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");if(r)throw new Error("options.minDistance is not yet implemented");var a=A(t),l=A(e);switch(t=u(a),e=u(l),U(o)){case"FeatureCollection":if(0===o.features.length)return f([a,l]);break;case"Polygon":o=d([s(B(o))]);break;default:throw new Error("invalid obstacles")}var h=o;h.features.push(t),h.features.push(e);var c=st(Mo(rn(st(h)),1.15));i||(i=ve([c[0],c[1]],[c[2],c[1]],n)/100),h.features.pop(),h.features.pop();for(var p=c[0],y=c[1],g=c[2],v=c[3],m=i/ve([p,y],[g,y],n)*(g-p),_=i/ve([p,y],[p,v],n)*(v-y),b=g-p,x=v-y,w=Math.floor(b/m),S=Math.floor(x/_),P=(b-w*m)/2,C=[],T=[],O=[],M=[],I=1/0,N=1/0,R=v-(x-S*_)/2,k=0;R>=y;){for(var D=[],j=[],F=p+P,G=0;F<=g;){var z=u([F,R]),Z=Ss(z,o);D.push(Z?0:1),j.push(F+"|"+R);var q=ve(z,t);!Z&&q<I&&(I=q,O={x:G,y:k});var V=ve(z,e);!Z&&V<N&&(N=V,M={x:G,y:k}),F+=m,G++}T.push(D),C.push(j),R-=_,k++}var W=new bs(T,{diagonal:!0}),H=W.grid[O.y][O.x],X=W.grid[M.y][M.x],Y=_s.search(W,H,X),Q=[a];return Y.forEach(function(t){var e=C[t.x][t.y].split("|");Q.push([+e[0],+e[1]])}),Q.push(l),Ve(f(Q))},e.simplify=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=we(t)),Y(t,function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;Ve(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=Ke(r,e,n);break;case"MultiLineString":t.coordinates=r.map(function(t){return Ke(t,e,n)});break;case"Polygon":t.coordinates=$e(r,e,n);break;case"MultiPolygon":t.coordinates=r.map(function(t){return $e(t,e,n)})}}(t,n,i)}),t},e.square=sn,e.squareGrid=Py,e.standardDeviationalEllipse=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!E(n))throw new Error("steps must be a number");if(!L(r))throw new Error("properties must be a number");var o=X(t).length,s=ua(t,{weight:i}),a=0,u=0,l=0;W(t,function(t){var e=t.properties[i]||1,n=la(R(t),R(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e});var h=a-u,c=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),f=2*l,p=Math.atan((h+c)/f),y=180*p/Math.PI,g=0,v=0,m=0;W(t,function(t){var e=t.properties[i]||1,n=la(R(t),R(s));g+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,v+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,m+=e});var _=Math.sqrt(2*g/m),b=Math.sqrt(2*v/m),x=sa(s,_,b,{units:"degrees",angle:y,steps:n,properties:r}),w=ge(t,d([x])),S={meanCenterCoordinates:R(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:y,percentageWithinEllipse:100*X(w).length/o};return x.properties.standardDeviationalEllipse=S,x},e.tag=function(t,e,n,i){return t=we(t),e=we(e),W(t,function(t){t.properties||(t.properties={}),W(e,function(e){void 0===t.properties[i]&&de(t,e)&&(t.properties[i]=e.properties[n])})}),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Fn(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Fn(t))}),e},e.tin=me,e.toMercator=ya,e.toWgs84=ga,e.transformRotate=Lo,e.transformScale=Mo,e.transformTranslate=function(t,e,n,i){if(!L(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=we(t)),z(t,function(t){var i=R(_r(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)}),t},e.triangleGrid=Cy,e.truncate=ki,e.union=yy,e.unitsFactors=r,e.unkinkPolygon=function(t){var e=[];return J(t,function(t){"Polygon"===t.geometry.type&&W(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var r=t.geometry.coordinates[i];Gi(r[0],r[r.length-1])||r.push(r[0]),n.push.apply(n,r.slice(0,r.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(e.hasOwnProperty(t[i])){n=0;break}e[t[i]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var s=[],a=0;a<i.length;a++)for(var u=0;u<i[a].length-1;u++)s.push(y(a,u));var l=St();l.load(s)}for(var h=0;h<i.length;h++)for(var c=0;c<i[h].length-1;c++)if(n)l.search(y(h,c)).forEach(function(t){var e=t.ring,n=t.edge;d(h,c,e,n)});else for(var f=0;f<i.length;f++)for(var p=0;p<i[f].length-1;p++)d(h,c,f,p);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function d(t,n,s,a){var u,l,h=i[t][n],c=i[t][n+1],f=i[s][a],p=i[s][a+1],d=function(t,e,n,i){if(Di(t,n)||Di(t,i)||Di(e,n)||Di(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=i[0],c=i[1],f=(r-s)*(l-c)-(o-a)*(u-h);return 0===f?null:[((r*a-o*s)*(u-h)-(r-s)*(u*c-l*h))/f,((r*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/f]}(h,c,f,p);if(null!==d&&(u=c[0]!==h[0]?(d[0]-h[0])/(c[0]-h[0]):(d[1]-h[1])/(c[1]-h[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var y=d,g=!o[y];g&&(o[y]=!0),e?r.push(e(d,t,n,h,c,u,s,a,f,p,l,g)):r.push(d)}}function y(t,e){var n,r,o,s,a=i[t][e],u=i[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,function(t,e,n,i,r,o,s,a,u,l,h,c){return[t,e,n,i,r,o,s,a,u,l,h,c]}),a=s.length;if(0==a){var u=[];for(i=0;i<e;i++)u.push(h([t.geometry.coordinates[i]],{parent:-1,winding:Ui(t.geometry.coordinates[i])}));var l=d(u);return F(),B(),l}var c=[],f=[];for(i=0;i<e;i++){c.push([]);for(var p=0;p<t.geometry.coordinates[i].length-1;p++)c[i].push([new ji(t.geometry.coordinates[i][zi(p+1,t.geometry.coordinates[i].length-1)],1,[i,p],[i,zi(p+1,t.geometry.coordinates[i].length-1)],void 0)]),f.push(new Fi(t.geometry.coordinates[i][p],[i,zi(p-1,t.geometry.coordinates[i].length-1)],[i,p],void 0,void 0,!1,!0))}for(i=0;i<a;i++)c[s[i][1]][s[i][2]].push(new ji(s[i][0],s[i][5],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0)),s[i][11]&&f.push(new Fi(s[i][0],[s[i][1],s[i][2]],[s[i][6],s[i][7]],void 0,void 0,!0,!0));var y=f.length;for(i=0;i<c.length;i++)for(p=0;p<c[i].length;p++)c[i][p].sort(function(t,e){return t.param<e.param?-1:1});var g=[];for(i=0;i<y;i++)g.push({minX:f[i].coord[0],minY:f[i].coord[1],maxX:f[i].coord[0],maxY:f[i].coord[1],index:i});var v=St();for(v.load(g),i=0;i<c.length;i++)for(p=0;p<c[i].length;p++)for(var m=0;m<c[i][p].length;m++){b=m==c[i][p].length-1?c[i][zi(p+1,t.geometry.coordinates[i].length-1)][0].coord:c[i][p][m+1].coord;var _=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];c[i][p][m].nxtIsectAlongEdgeIn=_.index}for(i=0;i<c.length;i++)for(p=0;p<c[i].length;p++)for(m=0;m<c[i][p].length;m++){var b=c[i][p][m].coord,x=(_=v.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?f[x].nxtIsectAlongRingAndEdge2=c[i][p][m].nxtIsectAlongEdgeIn:Gi(f[x].ringAndEdge1,c[i][p][m].ringAndEdgeIn)?f[x].nxtIsectAlongRingAndEdge1=c[i][p][m].nxtIsectAlongEdgeIn:f[x].nxtIsectAlongRingAndEdge2=c[i][p][m].nxtIsectAlongEdgeIn}var w=[];for(i=0,p=0;p<e;p++){var S=i;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[i].coord[0]<f[S].coord[0]&&(S=i),i++;var P=f[S].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==S||f[m].nxtIsectAlongRingAndEdge2==S){var C=m;break}var T=Bi([f[C].coord,f[S].coord,f[P].coord],!0)?1:-1;w.push({isect:S,parent:-1,winding:T})}for(w.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}),u=[];w.length>0;){var O=w.pop(),E=O.isect,L=O.parent,M=O.winding,I=u.length,N=[f[E].coord],A=E;if(f[E].ringAndEdge1Walkable)var R=f[E].ringAndEdge1,k=f[E].nxtIsectAlongRingAndEdge1;else R=f[E].ringAndEdge2,k=f[E].nxtIsectAlongRingAndEdge2;for(;!Gi(f[E].coord,f[k].coord);){N.push(f[k].coord);var D=void 0;for(i=0;i<w.length;i++)if(w[i].isect==k){D=i;break}if(null!=D&&w.splice(D,1),Gi(R,f[k].ringAndEdge1)){if(R=f[k].ringAndEdge2,f[k].ringAndEdge2Walkable=!1,f[k].ringAndEdge1Walkable){var j={isect:k};Bi([f[A].coord,f[k].coord,f[f[k].nxtIsectAlongRingAndEdge2].coord],1==M)?(j.parent=L,j.winding=-M):(j.parent=I,j.winding=M),w.push(j)}A=k,k=f[k].nxtIsectAlongRingAndEdge2}else R=f[k].ringAndEdge1,f[k].ringAndEdge1Walkable=!1,f[k].ringAndEdge2Walkable&&(j={isect:k},Bi([f[A].coord,f[k].coord,f[f[k].nxtIsectAlongRingAndEdge1].coord],1==M)?(j.parent=L,j.winding=-M):(j.parent=I,j.winding=M),w.push(j)),A=k,k=f[k].nxtIsectAlongRingAndEdge1}N.push(f[k].coord),u.push(h([N],{index:I,parent:L,winding:M,netWinding:void 0}))}function F(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<l.features.length;i++)t[e]!=i&&de(l.features[t[e]].geometry.coordinates[0][0],l.features[i],{ignoreBoundary:!0})&&wi(l.features[i])<1/0&&(n=i);l.features[t[e]].properties.parent=n}}function B(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,U(t,e)}}function U(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var i=e+l.features[n].properties.winding;l.features[n].properties.netWinding=i,U(n,i)}}return l=d(u),F(),B(),l}(t),function(n){e.push(h(n.geometry.coordinates,t.properties))})}),d(e)},e.validateBBox=M,e.validateId=I,e.voronoi=function(t,e){if(!L(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return F(t,"Point","points"),d(function(){var t=Cs,e=Ts,n=null;function i(i){return new ra(i.map(function(n,r){var o=[Math.round(t(n,r,i)/ea)*ea,Math.round(e(n,r,i)/ea)*ea];return o.index=r,o.data=n,o}),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Ps(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Ps(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(oa))},e.within=ge,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(70))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolyline=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type="LineString",(0,o.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Geometry),i(e,null,[{key:"getPolylinesCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var i=0;i<t[n].geometry.length;i++){for(var r=[],o=t[n].geometry[i].coordinates,s=0;s<o.length;s++)r.push([o[s].x,o[s].y]);e.push(r)}return e}},{key:"getPolylinesCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.lineString(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPolyline=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VPolygon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(74),o=n(11),s=u(n(75)),a=u(n(76));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(n.type="Polygon",n.exterior=[],n.interior=[],(0,o.extend)(n,t),n.exterior.length>0&&n.coordinates.push(n.exterior),n.interior.length>0)for(var i=0;i<n.interior.length;i++)n.coordinates.push(n.interior[i]);return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Geometry),i(e,null,[{key:"getPolygonsCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var i=0;i<t[n].geometry.length;i++){for(var r=[],o=t[n].geometry[i].exterior,s=[],a=t[n].geometry[i].interior,u=[],l=0;l<o.length;l++)s.push([o[l].x,o[l].y]);for(var h=0;h<a.length;h++){for(var c=[],f=0;f<a[h].length;f++)c.push([a[h][f].x,a[h][f].y]);u.push(c)}r.push(s),r=r.concat(u),e.push(r)}return e}},{key:"getPolygonsCenter",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(s.polygon(t[n]));return a.center(a.featureCollection(e))}}]),e}();e.VPolygon=l,Zondy.Service.VPolygon=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBase=void 0;var i=n(0),r=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,i.desInfo=void 0!==n.desInfo?n.desInfo:null,i.idstr=void 0!==n.idstr?n.idstr:"",i.angleType=void 0!==n.angleType?n.angleType:0,i.isDissolve=void 0===n.isDissolve||n.isDissolve,i.isDynPrj=void 0!==n.isDynPrj&&n.isDynPrj,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.ClassBufferBase=o,i.Zondy.Service.ClassBufferBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBase=void 0;var i=n(0),r=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.sfGeometryXML=void 0!==n.sfGeometryXML?n.sfGeometryXML:null,i.attStrctXML=void 0!==n.attStrctXML?n.attStrctXML:null,i.attRowsXML=void 0!==n.attRowsXML?n.attRowsXML:null,i.traceRadius=void 0!==n.traceRadius?n.traceRadius:1e-4,i.resultName=void 0!==n.resultName?n.resultName:null,i.inFormat=void 0!==n.inFormat?n.inFormat:"json",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.FeatureBuffBase=o,i.Zondy.Service.FeatureBuffBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayBase=void 0;var i=n(0),r=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo1=void 0!==n.srcInfo1?n.srcInfo1:null,i.desInfo=void 0!==n.desInfo?n.desInfo:null,i.attOptType=void 0!==n.attOptType?n.attOptType:1,i.infoOptType=void 0!==n.infoOptType?n.infoOptType:1,i.overType=void 0!==n.overType?n.overType:3,i.isCleanNode=void 0!==n.isCleanNode&&n.isCleanNode,i.isLabelPnt=void 0!==n.isLabelPnt&&n.isLabelPnt,i.isValidReg=void 0!==n.isValidReg&&n.isValidReg,i.isReCalculate=void 0===n.isReCalculate||n.isReCalculate,i.radius=void 0!==n.radius?n.radius:.001,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.OverlayBase=o,i.Zondy.Service.OverlayBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBase=void 0;var i=n(0),r=n(14);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.clsName=void 0!==n.clsName?n.clsName:null,i.desClsName=void 0!==n.desClsName?n.desClsName:null,i.resultName=void 0!==n.resultName?n.resultName:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.ProjectBase=o,i.Zondy.Service.ProjectBase=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalServiceBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=(n(7),n(3)),a=n(84),u=n(85);var l=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.dots=void 0!==n.dots?n.dots:null,i.projectInfo=void 0!==n.projectInfo?n.projectInfo:null,i.projectInfoBySRSID=void 0!==n.projectInfoBySRSID?n.projectInfoBySRSID:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"execute",value:function(t,e,n){t instanceof a.CProjectParam&&(this.projectInfo=t),t instanceof u.CProjectBySRSID&&(this.projectInfoBySrsID=t);var i={};i.Dots=this.dots,i.ProjectInfo=this.projectInfo,i.ProjectInfoBySrsID=this.projectInfoBySrsID;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.CalServiceBase=l,r.Zondy.Service.CalServiceBase=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectParam=void 0;var i=n(0),r=n(1),o=function(t){var e=t||{};(0,r.extend)(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};e.CProjectParam=o,i.Zondy.Service.CProjectParam=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectBySRSID=void 0;var i=n(0),r=(n(117),function(t,e){this.DesSrsID=t,this.GdbInfo=e});e.CProjectBySRSID=r,i.Zondy.Service.CProjectBySRSID=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfoAttribute=void 0;var i=n(0),r=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};e.FolderInfoAttribute=r,i.Zondy.Object.Theme.FolderInfoAttribute=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readHref=void 0;var i=n(0),r=function(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")};e.readHref=r,i.Zondy.XLink.readHref=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(37);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"read",value:function(t){if((0,o.isDocument)(t))return this.readFromDocument(t);if((0,o.isNode)(t))return this.readFromNode(t);if("string"==typeof t){var e=(0,o.parse)(t);return this.readFromDocument(e)}return null}},{key:"readFromDocument",value:function(t){}},{key:"readFromNode",value:function(t){}}]),t}();e.default=s,r.Zondy.Format.XML=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.writeStringTextNode=e.writeNonNegativeIntegerTextNode=e.writeDecimalTextNode=e.writeDateTimeTextNode=e.writeCDATASection=e.writeBooleanTextNode=e.readString=e.readNonNegativeIntegerString=e.readNonNegativeInteger=e.readDecimalString=e.readDecimal=e.readDateTime=e.readBooleanString=e.readBoolean=void 0;var i=n(0),r=n(37),o=n(327),s=function(t){var e=(0,r.getAllTextContent)(t,!1);return a(e)},a=function(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0},u=function(t){var e=(0,r.getAllTextContent)(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3},l=function(t){var e=(0,r.getAllTextContent)(t,!1);return h(e)},h=function(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0},c=function(t){var e=(0,r.getAllTextContent)(t,!1);return f(e)},f=function(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0},p=function(t){return(0,r.getAllTextContent)(t,!1).trim()},d=function(t,e){_(t,e?"1":"0")},y=function(t,e){t.appendChild(r.DOCUMENT.createCDATASection(e))},g=function(t,e){var n=new Date(1e3*e),i=n.getUTCFullYear()+"-"+(0,o.padNumber)(n.getUTCMonth()+1,2)+"-"+(0,o.padNumber)(n.getUTCDate(),2)+"T"+(0,o.padNumber)(n.getUTCHours(),2)+":"+(0,o.padNumber)(n.getUTCMinutes(),2)+":"+(0,o.padNumber)(n.getUTCSeconds(),2)+"Z";t.appendChild(r.DOCUMENT.createTextNode(i))},v=function(t,e){var n=e.toPrecision();t.appendChild(r.DOCUMENT.createTextNode(n))},m=function(t,e){var n=e.toString();t.appendChild(r.DOCUMENT.createTextNode(n))},_=function(t,e){t.appendChild(r.DOCUMENT.createTextNode(e))};e.readBoolean=s,e.readBooleanString=a,e.readDateTime=u,e.readDecimal=l,e.readDecimalString=h,e.readNonNegativeInteger=c,e.readNonNegativeIntegerString=f,e.readString=p,e.writeBooleanTextNode=d,e.writeCDATASection=y,e.writeDateTimeTextNode=g,e.writeDecimalTextNode=v,e.writeNonNegativeIntegerTextNode=m,e.writeStringTextNode=_,i.Zondy.xsd.readBoolean=s,i.Zondy.xsd.readBooleanString=a,i.Zondy.xsd.readDateTime=u,i.Zondy.xsd.readDecimal=l,i.Zondy.xsd.readDecimalString=h,i.Zondy.xsd.readNonNegativeInteger=c,i.Zondy.xsd.readNonNegativeIntegerString=f,i.Zondy.xsd.readString=p,i.Zondy.xsd.writeBooleanTextNode=d,i.Zondy.xsd.writeCDATASection=y,i.Zondy.xsd.writeDateTimeTextNode=g,i.Zondy.xsd.writeDecimalTextNode=v,i.Zondy.xsd.writeNonNegativeIntegerTextNode=m,i.Zondy.xsd.writeStringTextNode=_},function(t,e,n){"use strict";(function(e){var i=n(8),r=n(337),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(165):void 0!==e&&(t=n(165)),t}(),transformRequest:[function(t,e){return r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(t){a.headers[t]={}}),i.forEach(["post","put","patch"],function(t){a.headers[t]=i.merge(o)}),t.exports=a}).call(this,n(70))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(26);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new o.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}return i(t,[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,n,i,r,o,s){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var u=this._ctx.createRadialGradient(t,e,n,i,r,o),l=0,h=s.length;l<h;l++)u.addColorStop(s[l][0],s[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,n,i,r){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var s=this._ctx.createLinearGradient(t,e,n,i),a=0,u=r.length;a<u;a++)s.addColorStop(r[a][0],r[a][1]);return s.__nonRecursion=!0,s}},{key:"getStepColors",value:function(t,e,n){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var i=[],r=((e=this.getData(e))[0]-t[0])/n,o=(e[1]-t[1])/n,s=(e[2]-t[2])/n,a=(e[3]-t[3])/n,u=0,l=t[0],h=t[1],c=t[2],f=t[3];u<n;u++)i[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(h),[0,255]),this.adjust(Math.floor(c),[0,255]),f.toFixed(4)-0],"rgba"),l+=r,h+=o,c+=s,f+=a;return l=e[0],h=e[1],c=e[2],f=e[3],i[u]=this.toColor([l,h,c,f],"rgba"),i}},{key:"getGradientColors",value:function(t,e){var n=[],i=t.length;if(void 0===e&&(e=20),1===i)n=this.getStepColors(t[0],t[0],e);else if(i>1)for(var r=0,o=i-1;r<o;r++){var s=this.getStepColors(t[r],t[r+1],e);r<o-1&&s.pop(),n=n.concat(s)}return n}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var n=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=n[0],t[2]=n[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],n=0;return t.replace(/[\d.]+/g,function(t){n<3?t|=0:t=+t,e[n++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=this.getData(t),i=n[3];return void 0===i&&(i=1),t.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):t.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):e.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=i,this.toColor(n,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,n=(240&t)<<4,i=15&t;t="#"+((1<<24)+(e<<4)+e+(n<<4)+n+(i<<4)+i).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var n=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var i=this.getData(t),r=0;r<3;r++)i[r]=1===n?i[r]*(1-e)|0:(255-i[r])*e+i[r]|0;return"rgb("+i.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,n){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===n&&(n=.5);for(var i=2*(n=1-this.adjust(n,[0,1]))-1,r=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),s=r[3]-o[3],a=((i*s==-1?i:(i+s)/(1+i*s))+1)/2,u=1-a,l=[],h=0;h<3;h++)l[h]=r[h]*a+o[h]*u;var c=r[3]*n+o[3]*(1-n);return c=Math.max(0,Math.min(1,c)),1===r[3]&&1===o[3]?this.toColor(l,"rgb"):(l[3]=c,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var n,i,r=(e=this.normalize(e)).match(this.colorRegExp);if(null===r)throw new Error("The color format error");var o,s=[];if(r[2])o=[(n=r[2].replace("#","").split(""))[0]+n[1],n[2]+n[3],n[4]+n[5]],s=this.map(o,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(r[4]){var a=r[4].split(",");i=a[3],o=a.slice(0,3),s=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==i&&s.push(this.adjust(parseFloat(i),[0,1]))}else if(r[5]||r[6]){var u=(r[5]||r[6]).split(","),l=parseInt(u[0],0)/360,h=u[1],c=u[2];i=u[3],(s=this.map([h,c],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==i&&s.push(this.adjust(parseFloat(i),[0,1]))}return s}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var n=this.getData(this.toRGBA(t));return n[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var n=t?t.length:0,i=0;i<n;i++)t[i]=e(t[i]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,n,i,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,n=255*s,i=255*s;else{var a=6*r;6===a&&(a=0);var u=0|a,l=s*(1-o),h=s*(1-o*(a-u)),c=s*(1-o*(1-(a-u))),f=0,p=0,d=0;0===u?(f=s,p=c,d=l):1===u?(f=h,p=s,d=l):2===u?(f=l,p=s,d=c):3===u?(f=l,p=h,d=s):4===u?(f=c,p=l,d=s):(f=s,p=l,d=h),e=255*f,n=255*p,i=255*d}return[e,n,i]}},{key:"_HSL_2_RGB",value:function(t){var e,n,i,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,n=255*s,i=255*s;else{var a,u=2*s-(a=s<.5?s*(1+o):s+o-o*s);e=255*this._HUE_2_RGB(u,a,r+1/3),n=255*this._HUE_2_RGB(u,a,r),i=255*this._HUE_2_RGB(u,a,r-1/3)}return[e,n,i]}},{key:"_HUE_2_RGB",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?t+6*(e-t)*n:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),u=a-s,l=a;if(0===u)e=0,n=0;else{n=u/a;var h=((a-i)/6+u/2)/u,c=((a-r)/6+u/2)/u,f=((a-o)/6+u/2)/u;i===a?e=f-c:r===a?e=1/3+h-f:o===a&&(e=2/3+c-h),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,n*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),u=a-s,l=(a+s)/2;if(0===u)e=0,n=0;else{n=l<.5?u/(a+s):u/(2-a-s);var h=((a-i)/6+u/2)/u,c=((a-r)/6+u/2)/u,f=((a-o)/6+u/2)/u;i===a?e=f-c:r===a?e=1/3+h-f:o===a&&(e=2/3+c-h),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,n*=100,l*=100]}}]),t}();e.Color=s,r.Zondy.LevelRenderer.Tool.Color=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var i=n(0);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};r.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},r.catchBrushException=!1,r.debugMode=0,e.Config=r,i.Zondy.LevelRenderer.Config=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicImage=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicimage",n._imageCache={},n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,n,i){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,o=this.style||{};n&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var s=o.image,a=this;if("string"==typeof s){var u=s;this._imageCache[u]?s=this._imageCache[u]:((s=new Image).onload=function(){s.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(a),e._refreshTimeout=setTimeout(function(){i&&i(e._needsRefresh),e._needsRefresh=[]},10)},s.src=u,this._imageCache[u]=s)}if(s){if("IMG"===s.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!==s.readyState)return}else if(!s.complete)return;var l=o.width||s.width,h=o.height||s.height,c=o.x+r[0],f=o.y+r[1];if(!s.width||!s.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var p=o.sx+r[0]||0,d=o.sy+r[1]||0;t.drawImage(s,p,d,o.sWidth,o.sHeight,c,f,l,h)}else if(o.sx&&o.sy){var y=o.sx+r[0],g=o.sy+r[1],v=l-y,m=h-g;t.drawImage(s,y,g,v,m,c,f,l,h)}else t.drawImage(s,c,f,l,h);o.width||(o.width=l),o.height||(o.height=h),this.style.width||(this.style.width=l),this.style.height||(this.style.height=h),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),e}();s._needsRefresh=[],s._refreshTimeout=null,e.SmicImage=s,r.Zondy.LevelRenderer.SmicImage=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.pointList=t,n.CLASS_NAME="Zondy.Feature.ShapeParameters.Line",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.pointList=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Line=s,r.Zondy.Feature.ShapeParameters.Line=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return r.x=isNaN(t)?0:t,r.y=isNaN(n)?0:n,r.r=isNaN(i)?0:i,r.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Circle=s,r.Zondy.Feature.ShapeParameters.Circle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPoint=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicpoint",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}]),e}();e.SmicPoint=s,r.Zondy.LevelRenderer.SmicPoint=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicBrokenLine=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6),s=n(57),a=n(9);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.brushTypeOnly="stroke",n.textPosition="end",n.type="smicbroken-line",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=e.pointList;if(!(i.length<2)){var r=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,s,u,l=a.SUtil.SUtil_smoothBezier(i,e.smooth,!1,e.smoothConstraint,n);t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var h=0;h<r-1;h++)o=l[2*h],s=l[2*h+1],u=[i[h+1][0]+n[0],i[h+1][1]+n[1]],t.bezierCurveTo(o[0],o[1],s[0],s[1],u[0],u[1])}else if("spline"===e.smooth&&(r=(i=a.SUtil.SUtil_smoothSpline(i,null,null,n)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,p=c;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var d=1;d<r;d++)a.SUtil.SUtil_dashedLineTo(t,i[d-1][0]+n[0],i[d-1][1]+n[1],i[d][0]+n[0],i[d][1]+n[1],c,[f,p])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,g=y,v=y,m=y,_=y;"dashot"===e.lineType&&(g*=4,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=y,v+=y,m=1,_+=y)),"longdashdot"===e.lineType&&(g*=8,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=y,v+=y,m=1,_+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var b=1;b<r;b++)a.SUtil.SUtil_dashedLineTo(t,i[b-1][0]+n[0],i[b-1][1]+n[1],i[b][0]+n[0],i[b][1]+n[1],y,[g,v,m,_])}}else{t.moveTo(i[0][0]+n[0],i[0][1]+n[1]);for(var x=1;x<r;x++)t.lineTo(i[x][0]+n[0],i[x][1]+n[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return s.SmicPolygon.prototype.getRect.apply(this,[t,e])}},{key:"brush",value:function(t,e){var n=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,n),n.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",n),n.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",n),t.stroke()),this.setCtxGlobalAlpha(t,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",n);break;default:this.setCtxGlobalAlpha(t,"fill",n),this.setCtxGlobalAlpha(t,"reset",n)}this.drawText(t,n,this.style),this.afterBrush(t)}}]),e}();e.SmicBrokenLine=u,r.Zondy.LevelRenderer.SmicBrokenLine=u},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerEvent=e.BroadcastEvent=e.SubscribeEvent=e.BroadcastPrefix=e.SubscribePrefix=void 0;var i=n(0),r=(e.SubscribePrefix="/subscribe",e.BroadcastPrefix="/broadcast",e.SubscribeEvent={OPEN:"subscribeOpen",MESSAGE:"subscribeMessage",CLOSE:"subscribeClose",ERROR:"subscribeError"}),o=e.BroadcastEvent={OPEN:"broadcastOpen",MESSAGE:"broadcastMessage",CLOSE:"broadcastClose",ERROR:"broadcastError"};e.LayerEvent={UPDATE:"layerupdate"};i.Zondy.Event.SubscribeEvent=r,i.Zondy.Event.BroadcastEvent=o,i.Zondy.Event.LayerEvent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=void 0;var i=n(391),r=e.TimeDimensionUtil={getTimeDuration:function(t){return i.iso8601.Period.parse(t,!0)},addTimeDuration:function(t,e,n){void 0===n&&(n=!0),("string"==typeof e||e instanceof String)&&(e=this.getTimeDuration(e));var i=e.length,r=n?"getUTC":"get",o=n?"setUTC":"set";i>0&&0!=e[0]&&t[o+"FullYear"](t[r+"FullYear"]()+e[0]),i>1&&0!=e[1]&&t[o+"Month"](t[r+"Month"]()+e[1]),i>2&&0!=e[2]&&t[o+"Date"](t[r+"Date"]()+7*e[2]),i>3&&0!=e[3]&&t[o+"Date"](t[r+"Date"]()+e[3]),i>4&&0!=e[4]&&t[o+"Hours"](t[r+"Hours"]()+e[4]),i>5&&0!=e[5]&&t[o+"Minutes"](t[r+"Minutes"]()+e[5]),i>6&&0!=e[6]&&t[o+"Seconds"](t[r+"Seconds"]()+e[6])},subtractTimeDuration:function(t,e,n){("string"==typeof e||e instanceof String)&&(e=this.getTimeDuration(e));for(var i=[],r=0,o=e.length;r<o;r++)i.push(-e[r]);this.addTimeDuration(t,i,n)},parseAndExplodeTimeRange:function(t,e){var n=t.split("/"),i=new Date(Date.parse(n[0])),r=new Date(Date.parse(n[1])),o=n.length>2&&n[2].length?n[2]:"P1D";return void 0!==e&&null!==e&&(o=e),this.explodeTimeRange(i,r,o)},explodeTimeRange:function(t,e,n,i){var r=this.getTimeDuration(n),o=[],s=new Date(t.getTime()),a=null,u=null,l=null,h=null;if(void 0!==i){var c=i.split("/");a=c[0].split(":")[0],u=c[0].split(":")[1],l=c[1].split(":")[0],h=c[1].split(":")[1]}for(;s<e;)(void 0===i||s.getUTCHours()>=a&&s.getUTCHours()<=l)&&(s.getUTCHours()!=a||s.getUTCMinutes()>=u)&&(s.getUTCHours()!=l||s.getUTCMinutes()<=h)&&o.push(s.getTime()),this.addTimeDuration(s,r);return s>=e&&o.push(e.getTime()),o},parseTimeInterval:function(t){var e=t.split("/");if(2!=e.length)throw"Incorrect ISO9601 TimeInterval: "+t;var n=Date.parse(e[0]),i=null,r=null;return isNaN(n)?(r=this.getTimeDuration(e[0]),i=Date.parse(e[1]),n=new Date(i),this.subtractTimeDuration(n,r,!0),i=new Date(i)):(i=Date.parse(e[1]),isNaN(i)?(r=this.getTimeDuration(e[1]),i=new Date(n),this.addTimeDuration(i,r,!0)):i=new Date(i),n=new Date(n)),[n,i]},parseTimesExpression:function(t,e){var n=[];if(!t)return n;if("string"==typeof t||t instanceof String)for(var i,r,o=t.split(","),s=0,a=o.length;s<a;s++)3==(i=o[s]).split("/").length?n=n.concat(this.parseAndExplodeTimeRange(i,e)):(r=Date.parse(i),isNaN(r)||n.push(r));else n=t;return n.sort(function(t,e){return t-e})},intersect_arrays:function(t,e){for(var n=t.slice(0),i=e.slice(0),r=[];n.length>0&&i.length>0;)n[0]<i[0]?n.shift():n[0]>i[0]?i.shift():(r.push(n.shift()),i.shift());return r},union_arrays:function(t,e){for(var n=t.slice(0),i=e.slice(0),r=[];n.length>0&&i.length>0;)n[0]<i[0]?r.push(n.shift()):n[0]>i[0]?r.push(i.shift()):(r.push(n.shift()),i.shift());return n.length>0?r=r.concat(n):i.length>0&&(r=r.concat(i)),r},sort_and_deduplicate:function(t){for(var e=[],n=null,i=0,r=(t=t.slice(0).sort(function(t,e){return t-e})).length;i<r;i++)t[i]!==n&&(e.push(t[i]),n=t[i]);return e}};L.zondy.TimeDimensionUtil=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var r=e.TimeDimensionLayer=(i.default.Layer||i.default.Class).extend({includes:i.default.Evented||i.default.Mixin.Events,options:{opacity:1,zIndex:1},initialize:function(t,e){i.default.setOptions(this,e||{}),this._map=null,this._baseLayer=t,this._currentLayer=null,this._timeDimension=this.options.timeDimension||null},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t,!this._timeDimension&&t.timeDimension&&(this._timeDimension=t.timeDimension),this._timeDimension.on("timeloading",this._onNewTimeLoading,this),this._timeDimension.on("timeload",this._update,this),this._timeDimension.registerSyncedLayer(this),this._update()},onRemove:function(t){this._timeDimension.unregisterSyncedLayer(this),this._timeDimension.off("timeloading",this._onNewTimeLoading,this),this._timeDimension.off("timeload",this._update,this),this.eachLayer(t.removeLayer,t),this._map=null},eachLayer:function(t,e){return t.call(e,this._baseLayer),this},setZIndex:function(t){return this.options.zIndex=t,this._baseLayer.setZIndex&&this._baseLayer.setZIndex(t),this._currentLayer&&this._currentLayer.setZIndex&&this._currentLayer.setZIndex(t),this},setOpacity:function(t){return this.options.opacity=t,this._baseLayer.setOpacity&&this._baseLayer.setOpacity(t),this._currentLayer&&this._currentLayer.setOpacity&&this._currentLayer.setOpacity(t),this},bringToBack:function(){if(this._currentLayer)return this._currentLayer.bringToBack(),this},bringToFront:function(){if(this._currentLayer)return this._currentLayer.bringToFront(),this},_onNewTimeLoading:function(t){this.fire("timeload",{time:t.time})},isReady:function(t){return!0},_update:function(){return!0},getBaseLayer:function(){return this._baseLayer},getBounds:function(){var t=new i.default.LatLngBounds;return this._currentLayer&&t.extend(this._currentLayer.getBounds?this._currentLayer.getBounds():this._currentLayer.getLatLng()),t}});i.default.zondy.TimeDimensionLayer=function(t,e){return new r(t,e)}},function(t,e,n){var i=n(208),r=n(103),o=n(104);function s(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?s[t]=r(arguments[1]):s[t]=o(arguments[1]):s[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?s.apply(e,t):s(t)});if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}i(s),t.exports=s},function(t,e,n){var i=.017453292519943295,r=n(209),o=n(210);t.exports=function(t){var e,n,s,a={},u={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),u[e[0].toLowerCase()]=e[1]});var l={proj:"projName",datum:"datumCode",rf:function(t){a.rf=parseFloat(t)},lat_0:function(t){a.lat0=t*i},lat_1:function(t){a.lat1=t*i},lat_2:function(t){a.lat2=t*i},lat_ts:function(t){a.lat_ts=t*i},lon_0:function(t){a.long0=t*i},lon_1:function(t){a.long1=t*i},lon_2:function(t){a.long2=t*i},alpha:function(t){a.alpha=parseFloat(t)*i},lonc:function(t){a.longc=t*i},x_0:function(t){a.x0=parseFloat(t)},y_0:function(t){a.y0=parseFloat(t)},k_0:function(t){a.k0=parseFloat(t)},k:function(t){a.k0=parseFloat(t)},a:function(t){a.a=parseFloat(t)},b:function(t){a.b=parseFloat(t)},r_a:function(){a.R_A=!0},zone:function(t){a.zone=parseInt(t,10)},south:function(){a.utmSouth=!0},towgs84:function(t){a.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){a.to_meter=parseFloat(t)},units:function(t){a.units=t,o[t]&&(a.to_meter=o[t].to_meter)},from_greenwich:function(t){a.from_greenwich=t*i},pm:function(t){a.from_greenwich=(r[t]?r[t]:parseFloat(t))*i},nadgrids:function(t){"@null"===t?a.datumCode="none":a.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(a.axis=t)}};for(e in u)n=u[e],e in l?"function"==typeof(s=l[e])?s(n):a[s]=n:a[e]=n;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}},function(t,e,n){var i=.017453292519943295,r=n(60);function o(t,e,n){t[e]=n.map(function(t){var e={};return s(t,e),e}).reduce(function(t,e){return r(t,e)},{})}function s(t,e){var n;Array.isArray(t)?("PARAMETER"===(n=t.shift())&&(n=t.shift()),1===t.length?Array.isArray(t[0])?(e[n]={},s(t[0],e[n])):e[n]=t[0]:t.length?"TOWGS84"===n?e[n]=t:(e[n]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(n)>-1?(e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[n].auth=t[2])):"SPHEROID"===n?(e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[n].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(n)>-1?(t[0]=["name",t[0]],o(e,n,t)):t.every(function(t){return Array.isArray(t)})?o(e,n,t):s(t,e[n])):e[n]=!0):e[t]=!0}function a(t){return t*i}t.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),i=n.shift(),o=n.shift();n.unshift(["name",o]),n.unshift(["type",i]),n.unshift("output");var u={};return s(n,u),function(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",a],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["alpha","azimuth",a],["srsCode","name"]].forEach(function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(u.output),r(e,u.output)}},function(t,e,n){var i=.017453292519943295,r=57.29577951308232,o=1,s=2,a=n(218),u=n(219),l=n(59),h=n(106);t.exports=function t(e,n,c){var f;function p(t,e){return(t.datum.datum_type===o||t.datum.datum_type===s)&&"WGS84"!==e.datumCode}return Array.isArray(c)&&(c=h(c)),e.datum&&n.datum&&(p(e,n)||p(n,e))&&(t(e,f=new l("WGS84"),c),e=f),"enu"!==e.axis&&u(e,!1,c),"longlat"===e.projName?(c.x*=i,c.y*=i):(e.to_meter&&(c.x*=e.to_meter,c.y*=e.to_meter),e.inverse(c)),e.from_greenwich&&(c.x+=e.from_greenwich),c=a(e.datum,n.datum,c),n.from_greenwich&&(c.x-=n.from_greenwich),"longlat"===n.projName?(c.x*=r,c.y*=r):(n.forward(c),n.to_meter&&(c.x/=n.to_meter,c.y/=n.to_meter)),"enu"!==n.axis&&u(n,!0,c),c}},function(t,e){t.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},function(t,e){var n=6,i="AJSAJS",r="AFAFAF",o=65,s=73,a=79,u=86,l=90;function h(t){return t*(Math.PI/180)}function c(t){return t/Math.PI*180}function f(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var o,s,a,u,l,h,p,d,y=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,m=e;i<"N"&&(m-=1e7),h=6*(r-1)-180+3,d=(p=m/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*p)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*p)+151*g*g*g/96*Math.sin(6*p),o=y/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),a=.006739496752268451*Math.cos(d)*Math.cos(d),u=.99330562*y/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),l=v/(.9996*o);var _=d-o*Math.tan(d)/u*(l*l/2-(5+3*s+10*a-4*a*a-.06065547077041606)*l*l*l*l/24+(61+90*s+298*a+45*s*s-1.6983531815716497-3*a*a)*l*l*l*l*l*l/720);_=c(_);var b,x=(l-(1+2*s+a)*l*l*l/6+(5-2*a+28*s-3*a*a+.05391597401814761+24*s*s)*l*l*l*l*l/120)/Math.cos(d);if(x=h+c(x),t.accuracy){var w=f({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:_,left:x}}else b={lat:_,lon:x};return b}function p(t){var e=t%n;return 0===e&&(e=n),e}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,h=null,c="",f=0;!/[A-Z]/.test(e=t.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+t;c+=e,f++}var d=parseInt(c,10);if(0===f||f+3>n)throw"MGRSPoint bad conversion from: "+t;var g=t.charAt(f++);if(g<="A"||"B"===g||"Y"===g||g>="Z"||"I"===g||"O"===g)throw"MGRSPoint zone letter "+g+" not handled: "+t;h=t.substring(f,f+=2);for(var v=p(d),m=function(t,e){var n=i.charCodeAt(e-1),r=1e5,u=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===a&&n++,n>l){if(u)throw"Bad character: "+t;n=o,u=!0}r+=1e5}return r}(h.charAt(0),v),_=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=r.charCodeAt(e-1),i=0,l=!1;for(;n!==t.charCodeAt(0);){if(++n===s&&n++,n===a&&n++,n>u){if(l)throw"Bad character: "+t;n=o,l=!0}i+=1e5}return i}(h.charAt(1),v);_<y(g);)_+=2e6;var b=n-f;if(b%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var x,w,S,P=b/2,C=0,T=0;return P>0&&(x=1e5/Math.pow(10,P),w=t.substring(f,f+P),C=parseFloat(w)*x,S=t.substring(f+P),T=parseFloat(S)*x),{easting:C+m,northing:T+_,zoneLetter:g,zoneNumber:d,accuracy:x}}function y(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}e.forward=function(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,h="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var h=p(n),c=Math.floor(t/1e5),f=Math.floor(e/1e5)%20;return function(t,e,n){var h=n-1,c=i.charCodeAt(h),f=r.charCodeAt(h),p=c+t-1,d=f+e,y=!1;p>l&&(p=p-l+o-1,y=!0);(p===s||c<s&&p>s||(p>s||c<s)&&y)&&p++;(p===a||c<a&&p>a||(p>a||c<a)&&y)&&++p===s&&p++;p>l&&(p=p-l+o-1);d>u?(d=d-u+o-1,y=!0):y=!1;(d===s||f<s&&d>s||(d>s||f<s)&&y)&&d++;(d===a||f<a&&d>a||(d>a||f<a)&&y)&&++d===s&&d++;d>u&&(d=d-u+o-1);return String.fromCharCode(p)+String.fromCharCode(d)}(c,f,h)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+h.substr(h.length-5,e)}(function(t){var e,n,i,r,o,s,a,u=t.lat,l=t.lon,c=6378137,f=h(u),p=h(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60);u>=56&&u<64&&l>=3&&l<12&&(a=32);u>=72&&u<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37));s=h(6*(a-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),i=.006739496752268451*Math.cos(f)*Math.cos(f),r=Math.cos(f)*(p-s),o=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var d=.9996*e*(r+(1-n+i)*r*r*r/6+(5-18*n+n*n+72*i-.39089081163157013)*r*r*r*r*r/120)+5e5,y=.9996*(o+e*Math.tan(f)*(r*r/2+(5-n+9*i+4*i*i)*r*r*r*r/24+(61-58*n+n*n+600*i-2.2240339282485886)*r*r*r*r*r*r/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(d),zoneNumber:a,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)},e.inverse=function(t){var e=f(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},e.toPoint=function(t){var e=f(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},function(t,e,n){var i=n(30),r=n(31),o=n(32),s=n(33),a=n(34),u=n(4),l=Math.PI/2,h=n(29),c=n(22);e.init=function(){this.e0=i(this.es),this.e1=r(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*a(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,n,i,r=t.x,o=t.y,s=u(r-this.long0),l=Math.sin(o),h=Math.cos(o);if(this.sphere){var c=h*Math.sin(s);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(h*Math.cos(s)/Math.sqrt(1-c*c)),o<0&&(e=-e),i=this.a*this.k0*(e-this.lat0)}else{var f=h*s,p=Math.pow(f,2),d=this.ep2*Math.pow(h,2),y=Math.tan(o),g=Math.pow(y,2);e=1-this.es*Math.pow(l,2);var v=this.a/Math.sqrt(e),m=this.a*a(this.e0,this.e1,this.e2,this.e3,o);n=this.k0*v*f*(1+p/6*(1-g+d+p/20*(5-18*g+Math.pow(g,2)+72*d-58*this.ep2)))+this.x0,i=this.k0*(m-this.ml0+v*y*(p*(.5+p/24*(5-g+9*d+4*Math.pow(d,2)+p/30*(61-58*g+Math.pow(g,2)+600*d-330*this.ep2)))))+this.y0}return t.x=n,t.y=i,t},e.inverse=function(t){var e,n,i,r,o,s;if(this.sphere){var a=Math.exp(t.x/(this.a*this.k0)),f=.5*(a-1/a),p=this.lat0+t.y/(this.a*this.k0),d=Math.cos(p);e=Math.sqrt((1-d*d)/(1+f*f)),o=c(e),p<0&&(o=-o),s=0===f&&0===d?this.long0:u(Math.atan2(f,d)+this.long0)}else{var y=t.x-this.x0,g=t.y-this.y0;for(n=e=(this.ml0+g/this.k0)/this.a,r=0;n+=i=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,!(Math.abs(i)<=1e-10);r++)if(r>=6)return 95;if(Math.abs(n)<l){var v=Math.sin(n),m=Math.cos(n),_=Math.tan(n),b=this.ep2*Math.pow(m,2),x=Math.pow(b,2),w=Math.pow(_,2),S=Math.pow(w,2);e=1-this.es*Math.pow(v,2);var P=this.a/Math.sqrt(e),C=P*(1-this.es)/e,T=y/(P*this.k0),O=Math.pow(T,2);o=n-P*_*O/C*(.5-O/24*(5+3*w+10*b-4*x-9*this.ep2-O/30*(61+90*w+298*b+45*S-252*this.ep2-3*x))),s=u(this.long0+T*(1-O/6*(1+2*w+b-O/20*(5-2*b+28*w-3*x+8*this.ep2+24*S)))/m)}else o=l*h(g),s=this.long0}return t.x=s,t.y=o,t},e.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},function(t,e){t.exports=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynShowStyle=void 0;var i=n(0),r=n(1),o=(n(111),n(5),n(45),n(65),n(66),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0});e.DynShowStyle=o,i.Zondy.Object.DynShowStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynNoteInfo=void 0;var i=n(0),r=n(1),o=n(5),s=(n(112),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:o.FontShape.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0});e.CDynNoteInfo=s,i.Zondy.Object.CDynNoteInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynNoteLableType=void 0;var i=n(0),r=n(1),o=(n(113),n(114),n(115),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.DynNoteLableType=o,i.Zondy.Object.DynNoteLableType=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LablePntInfo=void 0;var i=n(0),r=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Ang=void 0!==e.Ang&&null!==e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!==e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!==e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!==e.PntType?e.PntType:0});e.LablePntInfo=o,i.Zondy.Object.LablePntInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelLinInfo=void 0;var i=n(0),r=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!==e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!==e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!==e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!==e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!==e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!==e.SpreadType?e.SpreadType:null});e.LabelLinInfo=o,i.Zondy.Object.LabelLinInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelRegInfo=void 0;var i=n(0),r=n(1),o=(n(5),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!==e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!==e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!==e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!==e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!==e.RegType?e.RegType:0});e.LabelRegInfo=o,i.Zondy.Object.LabelRegInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyleExtend=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};e.CDisplayStyleExtend=o,i.Zondy.Object.CDisplayStyleExtend=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGDBInfo=void 0;var i=n(0),r=function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null};e.CGDBInfo=r,i.Zondy.Object.CGDBInfo=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var i=n(0),r=n(1),o=n(19),s=(n(119),n(5),n(120)),a=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AttValue=void 0!==e.AttValue&&null!==e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!==e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!==e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!==e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!==e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!==e.GraphicInfo?e.GraphicInfo:null};a.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},a.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new s.WebGraphicsInfo(this.GraphicInfo)},a.prototype.getAttValueArray=function(){return this.AttValue},a.prototype.getRectBound=function(){var t=this.bound;return null!==t?new o.Rectangle(t):t},a.prototype.getGeometry=function(){return this.fGeom},a.prototype.getFID=function(){return this.FID},a.prototype.setAttValues=function(t){this.AttValue=t},a.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new o.Rectangle(t)),t instanceof String&&(e=new o.Rectangle(t)),t instanceof o.Rectangle&&(e=t),t instanceof ol.extent&&(e=new o.Rectangle).setByOL(t),this.bound=e},a.prototype.setFID=function(t){this.FID=t},a.prototype.setFType=function(t){this.ftype=t},a.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},e.Feature=a,i.Zondy.Object.Feature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGeometry=void 0;var i=n(0),r=n(1),o=(n(67),n(68),n(69),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.PntGeom=void 0!==e.PntGeom&&null!==e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!==e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!==e.RegGeom?e.RegGeom:null});o.prototype.setPntGeom=function(t){this.PntGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setLine=function(t){this.LinGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setRegGeom=function(t){this.RegGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},e.FeatureGeometry=o,i.Zondy.Object.FeatureGeometry=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGraphicsInfo=void 0;var i=n(0),r=n(1),o=(n(5),n(65),n(45),n(66),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.InfoType=void 0!==e.InfoType&&null!==e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.WebGraphicsInfo=o,i.Zondy.Object.WebGraphicsInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(18),o=n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Tangram),i(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getLinearRing(0).getCoordinates(),n=e.length,i=0;i<n;i++)this.pointArr[i]=new o.Point2D(e[i][0],e[i][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),e}();e.Polygon=s,Zondy.Object.Polygon=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourNoteParam=void 0;var i=n(0),r=function(t){var e=void 0!=t?t:{};this.IsClipLine=void 0==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=void 0!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=void 0!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=void 0!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=void 0!=e.MaxAngle?e.MaxAngle:90,this.MinDist=void 0!=e.MinDist?e.MinDist:10,this.IsAbs=void 0!=e.IsAbs&&e.IsAbs,this.IsComma=void 0!=e.IsComma&&e.IsComma,this.DigitNum=void 0!=e.DigitNum?e.DigitNum:0,this.FormatNo=void 0!=e.FormatNo?e.FormatNo:0,this.LogFlag=void 0!=e.LogFlag?e.LogFlag:0,this.Prefix=void 0!=e.Prefix?e.Prefix:"",this.Suffix=void 0!=e.Suffix?e.Suffix:"",this.ColorNo=void 0!=e.ColorNo?e.ColorNo:0,this.FixSize=void 0!=e.FixSize?e.FixSize:.01,this.FontNo=void 0!=e.FontNo?e.FontNo:0};e.ContourNoteParam=r,i.Zondy.Object.ContourAnalyse.ContourNoteParam=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourParam=void 0;var i=n(0),r=(n(122),n(124),n(125),function(t){var e=void 0!=t?t:{};this.IsSmoothLine=void 0!==e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!==e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!==e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!==e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!==e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!==e.MapWay?e.MapWay:1,this.FrameWidth=void 0!==e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!==e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!==e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!==e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!==e.NoteParam?e.NoteParam:new i.Zondy.Object.ContourAnalyse.ContourNoteParam,this.SlopLineParam=void 0!==e.SlopLineParam?e.SlopLineParam:new i.Zondy.Object.ContourAnalyse.SlopLineParam,this.ZValues=void 0!==e.ZValues?e.ZValues:new i.Zondy.Object.ContourAnalyse.ContourZValue});e.ContourParam=r,i.Zondy.Object.ContourAnalyse.ContourParam=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=void 0;var i=n(0),r=function(t){var e=void 0!==t?t:{};this.XScale=void 0!==e.XScale?e.XScale:2,this.YScale=void 0!==e.YScale?e.YScale:10,this.LineType=void 0!==e.LineType?e.LineType:0,this.SubLineType=void 0!==e.SubLineType?e.SubLineType:0};e.SlopLineParam=r,i.Zondy.Object.ContourAnalyse.SlopLineParam=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourZValue=void 0;var i=n(0),r=(n(45),n(126),function(t){var e=void 0!=t?t:{};this.ZValue=void 0!=e.ZValue?e.ZValue:1,this.LineInfo=void 0!=e.LineInfo?e.LineInfo:null,this.RegInfo=void 0!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=void 0!=e.IsOutputNote&&e.IsOutputNote});e.ContourZValue=r,i.Zondy.Object.ContourAnalyse.ContourZValue=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourRegionInfo=void 0;var i=n(0),r=function(t){var e=void 0!=t?t:{};this.PatID=void 0!=e.PatID?e.PatID:0,this.FillMode=void 0!=e.FillMode?e.FillMode:0,this.FillColor=void 0!=e.FillColor?e.FillColor:1,this.PatHeight=void 0!=e.PatHeight?e.PatHeight:1,this.PatWidth=void 0!=e.PatWidth?e.PatWidth:1,this.PatAngle=void 0!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!=e.PatColor?e.PatColor:1,this.OutPenWidth=void 0!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=void 0!=e.OverMethod?e.OverMethod:0};e.ContourRegionInfo=r,i.Zondy.Object.ContourAnalyse.ContourRegionInfo=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeshingParam=void 0;var i=n(0),r=function(t){var e=void 0!==t?t:{};this.SfClsURL=void 0!==e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.XCellNum=void 0!==e.XCellNum?e.XCellNum:200,this.Bound=void 0!==e.Bound?e.Bound:null,this.CalN=void 0!==e.CalN?e.CalN:null,this.CalM=void 0!==e.CalM?e.CalM:null,this.bIsCalInValidCtrlPnt=void 0!==e.bIsCalInValidCtrlPnt&&e.bIsCalInValidCtrlPnt,this.nYCtrlNum=void 0!==e.nYCtrlNum?e.nYCtrlNum:null,this.nXCtrlNum=void 0!==e.nXCtrlNum?e.nXCtrlNum:null,this.nLayerNum=void 0!==e.nLayerNum?e.nLayerNum:null};e.MeshingParam=r,i.Zondy.Object.ContourAnalyse.MeshingParam=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonServiceBase=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(129),a=n(130),u=n(131);var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,(0,o.isArray)(e)?(i.urls=e,i.length=e.length,i.totalTimes=i.length,1===i.length?i.url=e[0]:(i.index=parseInt(Math.random()*i.length),i.url=e[i.index])):(i.totalTimes=1,i.url=e),(n=n||{})&&(0,o.extend)(this,n),i.isInTheSameDomain=(0,o.isInTheSameDomain)(i.url),i.events=new s.Events(i,null,i.EVENT_TYPES,!0),i.eventListeners instanceof Object&&i.events.on(i.eventListeners)}return i(t,[{key:"destroy",value:function(){var t=this;(0,o.isArray)(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(n,n.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=(0,o.isInTheSameDomain)(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=(0,o.transformResult)(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=(t=(0,o.transformResult)(t)).error||t;this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=(0,o.urlAppend)(t.url,(0,o.getParameterString)(t.params||{}))),t.params=t.data),u.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json()}).catch(function(e){(t.scope?(0,o.bind)(t.failure,t.scope):t.failure)({error:!0,value:{}})}).then(function(e){if(e){var n=null;if("string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(n=(new a.JSONFormat).read(e)):(n={},"true"===e.toLowerCase()?n.succeed=!0:n.error=!0),(!n&&isNaN(n)||n.error)&&(n=n&&n.error?{error:n.error}:{error:!0}),n.error)(t.scope?(0,o.bind)(t.failure,t.scope):t.failure)(n);else isNaN(n)||(n={value:n}),"string"==typeof n&&(n={value:n}),"[object Array]"!==Object.prototype.toString.call(n)?n.succeed=void 0===n.succeed||n.succeed:n={value:n,succeed:!0},(t.scope?(0,o.bind)(t.success,t.scope):t.success)(n)}})}}]),t}();e.CommonServiceBase=l,r.Zondy.Service.CommonServiceBase=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(1),o=function(t,e,n,i){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},(0,r.extend)(this,i),null!=n)for(var o=0,s=n.length;o<s;o++)this.addEventType(n[o])};o.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},o.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},o.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},o.prototype.register=function(t,e,n,s){if(t in o&&!this.extensions[t]&&(this.extensions[t]=new o[t](this)),null!=n&&-1!==(0,r.indexOf)(this.eventTypes,t)){null==e&&(e=this.object);var a=this.listeners[t];a||(a=[],this.listeners[t]=a,this.extensionCount[t]=0);var u={obj:e,func:n};s?(a.splice(this.extensionCount[t],0,u),"object"===(void 0===s?"undefined":i(s))&&s.extension&&this.extensionCount[t]++):a.push(u)}},o.prototype.registerPriority=function(t,e,n){this.register(t,e,n,!0)},o.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},o.prototype.unregister=function(t,e,n){null==e&&(e=this.object);var i=this.listeners[t];if(null!=i)for(var r=0,o=i.length;r<o;r++)if(i[r].obj===e&&i[r].func===n){i.splice(r,1);break}},o.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},o.prototype.triggerEvent=function(t,e){var n=this.listeners[t];if(n&&0!=n.length){var i;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var r=0,o=(n=n.slice()).length;r<o;r++){var s=n[r];if(void 0!=(i=s.func.apply(s.obj,[e.result]))&&0==i)break}return i}},e.Events=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(1),o=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),(0,r.extend)(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,n,i,r=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(n=this.write.apply(this,[e,this.pretty]),i=this.write.apply(this,[t[e],this.pretty]),null!=n&&null!=i&&(o&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),i),o=!0));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"}"),r.join("")},array:function(t){var e,n=["["];this.level+=1;for(var i=0,r=t.length;i<r;++i)null!=(e=this.write.apply(this,[t[i],this.pretty]))&&(i>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,n){var i=e[n];return i||(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};o.prototype.read=function(t,e){var n;if(this.nativeJSON)try{n=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=n),n},o.prototype.write=function(t,e){this.pretty=!!e;var n=null,r=void 0===t?"undefined":i(t);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[r].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return n},o.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},o.prototype.writeNewline=function(){return this.pretty?this.newline:""},o.prototype.writeSpace=function(){return this.pretty?this.space:""},e.JSONFormat=o,Zondy.Service.JSONFormat=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FetchRequest=e.RequestTimeout=e.CORS=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(1);n(263),n(267);var r=window.fetch,o=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,s=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,a=Zondy.FetchRequest={commit:function(t,e,n,i){switch(t=t?t.toUpperCase():t){case"GET":return this._get(e,n,i);case"POST":return this._post(e,n,i);case"PUT":return this._put(e,n,i);case"DELETE":return this._delete(e,n,i);default:return this._get(e,n,i)}},_get:function(t,e,n){n=n||{};return t=this._processUrl(t,n),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,n):this._fetch(t,e,n,"GET")},_delete:function(t,e,n){n=n||{};return t=this._processUrl(t,n),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&o?this._fetch(t,e,n,"DELETE"):this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,n)},_post:function(t,e,n){return n=n||{},this._fetch(this._processUrl(t,n),e,n,"POST")},_put:function(t,e,n){return n=n||{},this._fetch(this._processUrl(t,n),e,n,"PUT")},urlIsLong:function(t){for(var e=0,n=null,i=0,r=t.length;i<r;i++)(n=t.charCodeAt(i))<127?e++:128<=n&&n<=2047?e+=2:2048<=n&&n<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,n,i){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof n&&(n=JSON.stringify(n)),this._post(e,n,i)},_processUrl:function(t,e){return this._isMVTRequest(t)?t:(e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t)},_fetch:function(t,e,n,i){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,r(t,{method:i,headers:n.headers,body:"PUT"===i||"POST"===i?e:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:s}).then(function(t){return t})):r(t,{method:i,body:"PUT"===i||"POST"===i?e:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:s}).then(function(t){return t}).catch(function(t){return t})},_timeout:function(t,e){return new Promise(function(n,i){setTimeout(function(){i(new Error("timeout"))},t),e.then(n,i)})},_getParameterString:function(t){var e=[];for(var n in t){var r=t[n];if(null!=r&&"function"!=typeof r){var o;if("object"===(void 0===r?"undefined":i(r))&&r.constructor===Array){for(var s,a=[],u=0,l=r.length;u<l;u++)s=r[u],a.push(encodeURIComponent(null===s||void 0===s?"":s));o="["+a.join(",")+"]"}else o=encodeURIComponent(r);e.push(encodeURIComponent(n)+"="+o)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};e.CORS=o,e.RequestTimeout=s,e.FetchRequest=a,Zondy.Service.FetchRequest=a,Zondy.Service.CORS=o,Zondy.Service.RequestTimeout=s},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDBInfo=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(23),o=n(3);n(1);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.serverName=void 0!==n.serverName?n.serverName:null,i.gdbName=void 0!==n.gdbName?n.gdbName:null,i.dsName=void 0!==n.dsName?n.dsName:null,i.rcsName=void 0!==n.rcsName?n.rcsName:null,i.User=void 0!==n.User?n.User:null,i.Password=void 0!==n.Password?n.Password:null,i.containAll=void 0===n.containAll||n.containAll,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CatalogService),i(e,[{key:"getServerList",value:function(t,e){this.partUrl="datasource?f=json";var n=this.getFullUrl();new o.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"?f=json":n.partUrl="datasource/"+n.serverName+"?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var n=this;"mapgislocal"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rcs?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var n=this;n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"?f=json";var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,n){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?f=json";var r=i.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}},{key:"AttachGDB",value:function(t,e,n){var i=this;if(null!==i.serverName&&null!==i.gdbName&&null!==t){i.partUrl="gdb/attach/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json",null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var r=i.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var n=this;if(null!==n.serverName&&null!==n.gdbName){n.partUrl="gdb/detach/"+n.gdbName+"?gdbSvrName="+n.serverName,null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,n){var i=this;if(null!==i.serverName&&null!==i.gdbName&&("mapgislocal"!==i.serverName.toLowerCase()||null!==t)){i.partUrl="gdb/creat/"+i.gdbName+"?gdbSvrName="+i.serverName+"&path="+t+"&f=json",null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var r=i.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var n=this;if(null!==n.serverName&&null!==n.gdbName){n.partUrl="gdb/delete/"+n.gdbName+"?gdbSvrName="+n.serverName,null!==n.User&&null!==n.Password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.GDBInfo=s,Zondy.Catalog.GDBInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=e.VPolyline=e.VPolygon=e.VPoint=e.BaseParameter=e.ObjectIdsParameter=e.RectangleParameter=e.GeometryParameter=e.SQLParameter=e.FeatureService=e.QueryUnifyParameter=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=void 0;var i=n(275),r=n(276),o=n(71),s=n(277),a=n(137),u=n(278),l=n(138),h=n(139),c=n(140),f=n(136),p=n(72),d=n(279),y=n(48),g=n(135),v=n(36),m=n(280),_=n(282),b=n(283),x=n(284),w=n(285),S=n(286),P=n(24),C=n(73),T=n(78),O=n(77),E=n(287);e.EditDocFeature=i.EditDocFeature,e.EditLayerFeature=r.EditLayerFeature,e.EditServiceBase=o.EditServiceBase,e.MultiGeoQuery=s.MultiGeoQuery,e.MultiGeoQueryParameter=a.MultiGeoQueryParameter,e.ObjClsQuery=u.ObjClsQuery,e.ObjClsQueryParameter=l.ObjClsQueryParameter,e.QueryByLayerParameter=h.QueryByLayerParameter,e.QueryDocFeature=c.QueryDocFeature,e.QueryFeatureRule=f.QueryFeatureRule,e.QueryFeatureStruct=p.QueryFeatureStruct,e.QueryLayerFeature=d.QueryLayerFeature,e.QueryParameter=y.QueryParameter,e.QueryParameterBase=g.QueryParameterBase,e.QueryServiceBase=v.QueryServiceBase,e.QueryUnifyParameter=m.QueryUnifyParameter,e.FeatureService=_.FeatureService,e.SQLParameter=b.SQLParameter,e.GeometryParameter=x.GeometryParameter,e.RectangleParameter=w.RectangleParameter,e.ObjectIdsParameter=S.ObjectIdsParameter,e.BaseParameter=P.BaseParameter,e.VPoint=C.VPoint,e.VPolygon=T.VPolygon,e.VPolyline=O.VPolyline,e.VFeature=E.VFeature},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameterBase=void 0;var i=n(0),r=n(1),o=n(72),s=n(136);var a=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};(0,r.extend)(this,n),this.geometry=void 0!==n.geometry?n.geometry:null,this.where=void 0!==n.where?n.where:null,this.rule=void 0!==n.rule?n.rule:new s.QueryFeatureRule,this.objectIds=void 0!==n.objectIds?n.objectIds:null,this.pageIndex=void 0!==n.pageIndex?n.pageIndex:0,this.recordNumber=void 0!==n.recordNumber?n.recordNumber:20,this.resultFormat=void 0!==n.resultFormat?n.resultFormat:"json",this.struct=void 0!==n.struct?n.struct:new o.QueryFeatureStruct,this.orderField=void 0!==n.orderField?n.orderField:null,this.rtnLabel=void 0!==n.rtnLabel&&n.rtnLabel,this.fields=n.fields||"",this.coordPrecision=n.coordPrecision||0===n.coordPrecision?n.coordPrecision:2,this.isAsc=void 0!==n.isAsc&&n.isAsc,this.cursorType=void 0!==n.cursorType?n.cursorType:"forward",this.proj=n.proj||null,this.guid=n.guid||"__readonly_user__"};e.QueryParameterBase=a,i.Zondy.Service.QueryParameterBase=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureRule=void 0;var i=n(0),r=n(1),o=function(t){var e=t||{};(0,r.extend)(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};o.prototype.toJSON=function(){return(0,r.toJSON)(this)},e.QueryFeatureRule=o,i.Zondy.Service.QueryFeatureRule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQueryParameter=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,t+="&geometryType="+this.geometryType,t+="&nearDis="+this.nearDis},e.MultiGeoQueryParameter=o,i.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQueryParameter=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!==this.objectIds?t+="&objectIds="+this.objectIds:null!==this.where&&(t+="&where="+this.where),t},e.ObjClsQueryParameter=o,i.Zondy.Service.ObjClsQueryParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryByLayerParameter=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},o=n(0),s=n(48);n(72);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.gdbp=void 0!==t?encodeURI(t):null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.QueryParameter),i(e,[{key:"getParameterURL",value:function(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),e}();e.QueryByLayerParameter=a,o.Zondy.Service.QueryByLayerParameter=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDocFeature=void 0;var i=n(0),r=n(36);var o=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.queryParam=t,s.docName=n,s.layerIndex=void 0==i?-1:i,s.mapIndex=0,s.partUrl="docs/"+s.docName+"/"+s.mapIndex.toString()+"/"+s.layerIndex.toString()+"/query",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.QueryServiceBase),e}();e.QueryDocFeature=o,i.Zondy.Service.QueryDocFeature=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAllOtherDataItemInfoSource=void 0;var i=n(0),r={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=r,i.Zondy.Object.Theme.CAllOtherDataItemInfoSource=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};e.CAnnInfo=o,i.Zondy.Object.Theme.CAnnInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartLabelFormat=void 0;var i=n(0),r={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=r,i.Zondy.Object.Theme.CChartLabelFormat=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartTheme=void 0;var i=n(0),r=n(12),o=n(145);n(146),n(149);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.ChartType=void 0!==n.ChartType?n.ChartType:o.CChartType.Bar,i.ChartThemeInfoArr=void 0!==n.ChartThemeInfoArr?n.ChartThemeInfoArr:null,i.RepresentInfo=void 0!==n.RepresentInfo?n.RepresentInfo:null,i.Type="CChartTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CChartTheme=s,i.Zondy.Object.Theme.CChartTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartType=void 0;var i=n(0),r={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=r,i.Zondy.Object.Theme.CChartType=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeInfo=void 0;var i=n(0),r=n(16);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.Expression=void 0!==t?t:"",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CThemeInfo),e}();e.CChartThemeInfo=o,i.Zondy.Object.Theme.CChartThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLinInfo=void 0;var i=n(0),r=n(1),o=n(5),s=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:o.CLinAdjustType.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:o.CLinHeadType.Round,this.JointType=void 0!==e.JointType?e.JointType:o.CLinJointType.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:o.CLinStyleMakeType.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CLinInfo=s,i.Zondy.Object.Theme.CLinInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegInfo=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};e.CRegInfo=o,i.Zondy.Object.Theme.CRegInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeRepresentInfo=void 0;var i=n(0),r=n(1),o=n(142),s=n(143),a=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new o.CAnnInfo,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:s.CChartLabelFormat.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};e.CChartThemeRepresentInfo=a,i.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDotDensityTheme=void 0;var i=n(0),r=n(12);n(50);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.Expression=void 0!==n.Expression?n.Expression:"",i.Info=void 0!==n.Info?n.Info:null,i.Value=void 0!==n.Value?n.Value:null,i.Type="CDotDensityTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CDotDensityTheme=o,i.Zondy.Object.Theme.CDotDensityTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFourColorTheme=void 0;var i=n(0),r=n(12);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.ClrInfo=void 0!==n.ClrInfo?n.ClrInfo:[25,57,89,121],i.Type="CFourColorTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CFourColorTheme=o,i.Zondy.Object.Theme.CFourColorTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGraduatedSymbolTheme=void 0;var i=n(0),r=n(12);n(50);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.BaseValue=void 0!==n.BaseValue?n.BaseValue:141e-6,i.DispMinus=void 0!==n.DispMinus&&n.DispMinus,i.DispZero=void 0!==n.DispZero&&n.DispZero,i.Expression=void 0!==n.Expression?n.Expression:null,i.MinusPntInfo=void 0!==n.MinusPntInfo?n.MinusPntInfo:null,i.PlusPntInfo=void 0!==n.PlusPntInfo?n.PlusPntInfo:null,i.ZeroPntInfo=void 0!==n.ZeroPntInfo?n.ZeroPntInfo:null,i.Type="CGraduatedSymbolTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CGraduatedSymbolTheme=o,i.Zondy.Object.Theme.CGraduatedSymbolTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMultiClassTheme=void 0;var i=n(0),r=n(12);n(16),n(154);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,i.ExpInfoArr=void 0!==n.ExpInfoArr?n.ExpInfoArr:null,i.MultiClassThemeInfoArr=void 0!==n.MultiClassThemeInfoArr?n.MultiClassThemeInfoArr:null,i.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,i.Type="CMultiClassTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CMultiClassTheme=o,i.Zondy.Object.Theme.CMultiClassTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpInfo=void 0;var i=n(0),r=n(1),o=function(t,e,n){var i=void 0!==n?n:{};(0,r.extend)(this,i),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};e.ExpInfo=o,i.Zondy.Object.Theme.ExpInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRandomTheme=void 0;var i=n(0),r=n(12);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.Type="CRandomTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CRandomTheme=o,i.Zondy.Object.Theme.CRandomTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeTheme=void 0;var i=n(0),r=n(12),o=n(141);n(16),n(157);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.AllOtherDataItemInfoSource=void 0!==n.AllOtherDataItemInfoSource?n.AllOtherDataItemInfoSource:o.CAllOtherDataItemInfoSource.DefaultThemeInfo,i.Expression=void 0!==n.Expression?n.Expression:"",i.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,i.RangeThemeInfoArr=void 0!==n.RangeThemeInfoArr?n.RangeThemeInfoArr:null,i.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,i.Type="CRangeTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CRangeTheme=s,i.Zondy.Object.Theme.CRangeTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeThemeInfo=void 0;var i=n(0),r=n(16);var o=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.StartValue=void 0!==t?t:"",o.EndValue=void 0!==n?n:"",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CThemeInfo),e}();e.CRangeThemeInfo=o,i.Zondy.Object.Theme.CRangeThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSimpleTheme=void 0;var i=n(0),r=n(12),o=n(16);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.ThemeInfo=void 0!==n.ThemeInfo?n.ThemeInfo:new o.CThemeInfo,i.Type="CSimpleTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CSimpleTheme=s,i.Zondy.Object.Theme.CSimpleTheme=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueTheme=void 0;var i=n(0),r=n(12);n(16),n(160);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.DefaultInfo=void 0!==n.DefaultInfo?n.DefaultInfo:null,i.Expression=void 0!==n.Expression?n.Expression:"",i.UniqueThemeInfoArr=void 0!==n.UniqueThemeInfoArr?n.UniqueThemeInfoArr:null,i.GeoInfoType=void 0!==n.GeoInfoType?n.GeoInfoType:null,i.Type="CUniqueTheme",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CTheme),e}();e.CUniqueTheme=o,i.Zondy.Object.Theme.CUniqueTheme=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueThemeInfo=void 0;var i=n(0),r=n(16);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.Value=void 0!==t?t:"",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CThemeInfo),e}();e.CUniqueThemeInfo=o,i.Zondy.Object.Theme.CUniqueThemeInfo=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfo=void 0;var i=n(0),r=(n(86),function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null});e.FolderInfo=r,i.Zondy.Object.Theme.FolderInfo=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=void 0;var i=n(0),r=(n(12),function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null});e.ThemesInfo=r,i.Zondy.Object.Theme.ThemesInfo=r},function(t,e,n){t.exports=n(334)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){"use strict";var i=n(8),r=n(338),o=n(340),s=n(341),a=n(342),u=n(166);t.exports=function(t){return new Promise(function(e,l){var h=t.data,c=t.headers;i.isFormData(h)&&delete c["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";c.Authorization="Basic "+btoa(p+":"+d)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:t,request:f};r(e,l,i),f=null}},f.onerror=function(){l(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var y=n(343),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(c[t.xsrfHeaderName]=g)}if("setRequestHeader"in f&&i.forEach(c,function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete c[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),l(t),f=null)}),void 0===h&&(h=null),f.send(h)})}},function(t,e,n){"use strict";var i=n(339);t.exports=function(t,e,n,r,o){var s=new Error(t);return i(s,e,n,r,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRenderer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(170);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.CLASS_NAME="Zondy.LevelRenderer"}return i(t,[{key:"destroy",value:function(){this.dispose()}},{key:"init",value:function(e){var n=new s.Render((0,o.newGuid)(),e);return t._instances[n.id]=n,n}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var n in t._instances)t._instances[n].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}]),t}();e.LevelRenderer=a,r.Zondy.LevelRenderer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Render=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(171),a=n(180),u=n(181),l=n(182);var h=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new s.Storage,this.painter=new a.Painter(n,this.storage),this.handler=new u.Handler(n,this.storage,this.painter),this.animatingElements=[],this.animation=new l.Animation({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="Zondy.LevelRenderer.Render"}return i(t,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,n){if("string"==typeof t&&(t=this.storage.get(t)),t){var i;if(e){for(var r=e.split("."),s=t,a=0,u=r.length;a<u;a++)s&&(s=s[r[a]]);s&&(i=s)}else i=t;if(!i)return;var l=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(i,{loop:n}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(0,o.indexOf)(l,t);l.splice(e,1)}})}}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,n){return this.painter.toDataURL(t,e,n)}},{key:"shapeToImage",value:function(t,e,n){var i=(0,o.newGuid)();return this.painter.shapeToImage(i,t,e,n)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var n=0,i=e.length;n<i;n++)t.storage.mod(e[n].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}]),t}();e.Render=h,r.Zondy.LevelRenderer.Render=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(172);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="Zondy.LevelRenderer.Storage"}return i(t,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var n=0,i=this._hoverElements.length;n<i;n++){var r=this._hoverElements[n];if(r.updateTransform(),t(r))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var s=0,a=this._shapeList.length;s<a;s++)if(t(this._shapeList[s]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var n=[],i=this._hoverElements.length,r=0;r<i;r++){n.push(this._hoverElements[r]);var o=this._hoverElements[r].hoverConnect;if(o)for(var s,a=0,u=(o=o instanceof Array?o:[o]).length;a<u;a++)(s=o[a].id?o[a]:this.get(o[a]))&&n.push(s)}if(n.sort(t.shapeCompareFunc),e)for(var l=0,h=n.length;l<h;l++)n[l].updateTransform();return n}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,n=0;n<e;n++){var i=this._roots[n];this._updateAndAddShape(i)}this._shapeList.length=this._shapeListOffset;for(var r=this._shapeList.length,o=0;o<r;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"===t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var n=0;n<t._children.length;n++){var i=t._children[n];i.__dirty=t.__dirty||i.__dirty,this._updateAndAddShape(i,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var n=this._elements[t];if(n&&(n.modSelf(),e))if(e.parent||e._storage||e.__startClip){var i={};for(var r in e)"parent"!==r&&"_storage"!==r&&"__startClip"!==r&&e.hasOwnProperty(r)&&(i[r]=e[r]);(0,o.merge)(n,i,!0)}else(0,o.merge)(n,e,!0);return this}},{key:"drift",value:function(t,e,n){var i=this._elements[t];return i&&(i.needTransform=!0,"horizontal"===i.draggable?n=0:"vertical"===i.draggable&&(e=0),(!i.ondrift||i.ondrift&&!i.ondrift(e,n))&&i.drift(e,n)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof s.Group&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof s.Group&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var i=t.length,r=0;r<i;r++)this.delRoot(t[r]);else{var a;a="string"==typeof t?this._elements[t]:t;var u=(0,o.indexOf)(this._roots,a);u>=0&&(this.delFromMap(a.id),this._roots.splice(u,1),a instanceof s.Group&&a.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof s.Group&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof s.Group&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}]),t}();e.Storage=a,r.Zondy.LevelRenderer.Storage=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(40),a=n(51);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.id=null,n.type="group",n.clipShape=null,n._children=[],n._storage=null,n.__dirty=!0,n.ignore=!1,(0,o.extend)(n,t),n.id=n.id||(0,o.newGuid)(),n.CLASS_NAME="Zondy.LevelRenderer.Group",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,o.mixin)(s.Eventful,a.Transformable)),i(e,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!==this&&t.parent!==this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var n=(0,o.indexOf)(this._children,t);this._children.splice(n,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var n=!!e,i=0;i<this._children.length;i++){var r=this._children[i];n?t.call(e,r):t(r)}}},{key:"traverse",value:function(t,e){for(var n=!!e,i=0;i<this._children.length;i++){var r=this._children[i];n?t.call(e,r):t(r),"group"===r.type&&r.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToMap(n),"group"===n.type&&n.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),e}();e.Group=u,r.Zondy.LevelRenderer.Group=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(26),s=n(52);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new o.Util,this.curve=new s.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}return i(t,[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,n,i){if(!e||!t)return!1;var r=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,n,i);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,n,i);switch(r){case"ellipse":case"smicellipse":return!0;case"trochoid":var s="out"===e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,n,i,s);case"rose":return this.isInsideCircle(e,n,i,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,n,i){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,n,i):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,n,i);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,n,i);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,n,i);case"smicbroken-line":var r=n,o=i;return t.refOriginalPosition&&(r=n-t.refOriginalPosition[0],o=i-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,r,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,n,i);case"smicring":var s=e.x,a=e.y;return t.refOriginalPosition&&(s=e.x+t.refOriginalPosition[0],a=e.y+t.refOriginalPosition[1]),this.isInsideRing(s,a,e.r0,e.r,n,i);case"circle":return this.isInsideCircle(e.x,e.y,e.r,n,i);case"smicpoint":var u=n,l=i;return t.refOriginalPosition&&(u=n-t.refOriginalPosition[0],l=i-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var h=e.startAngle*Math.PI/180,c=e.endAngle*Math.PI/180;return e.clockWise||(h=-h,c=-c),this.isInsideSector(e.x,e.y,e.r0,e.r,h,c,!e.clockWise,n,i);case"smicsector":var f=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(f=-f,p=-p);var d=e.x,y=e.y;return t.refOriginalPosition&&(d=e.x+t.refOriginalPosition[0],y=e.y+t.refOriginalPosition[1]),this.isInsideSector(d,y,e.r0,e.r,f,p,!e.clockWise,n,i);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,n,i);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,n,i);case"smicpolygon":var g=n,v=i;if(t.refOriginalPosition&&(g=n-t.refOriginalPosition[0],v=i-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,g,v),_=t.holePolygonPointLists,b=!1,x=0,w=_.length;x<w;x++){var S=_[x];!0===this.isInsidePolygon(S,g,v)&&(b=!0)}return!0===m&&!1===b}return this.isInsidePolygon(e.pointList,g,v);case"text":var P=e.__rect||t.getRect(e);return this.isInsideRect(P.x,P.y,P.width,P.height,n,i);case"smictext":var C=t.getTextBackground(e);return this.isInsidePolygon(C,n,i);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,n,i);case"smicimage":var T=e.x,O=e.y;return t.refOriginalPosition&&(T=e.x+t.refOriginalPosition[0],O=e.y+t.refOriginalPosition[1]),this.isInsideRect(T,O,e.width,e.height,n,i)}}},{key:"_buildPathMethod",value:function(t,e,n,i,r){return e.beginPath(),t.buildPath(e,n),e.closePath(),e.isPointInPath(i,r)}},{key:"isOutside",value:function(t,e,n,i){return!this.isInside(t,e,n,i)}},{key:"isInsideLine",value:function(t,e,n,i,r,o,s){if(0===r)return!1;var a=Math.max(r,5),u=0;if(s>e+a&&s>i+a||s<e-a&&s<i-a||o>t+a&&o>n+a||o<t-a&&o<n-a)return!1;if(t===n)return Math.abs(o-t)<=a/2;var l=(u=(e-i)/(t-n))*o-s+(t*i-n*e)/(t-n);return l*l/(u*u+1)<=a/2*a/2}},{key:"isInsideCubicStroke",value:function(t,e,n,i,r,o,s,a,u,l,h){if(0===u)return!1;var c=Math.max(u,5);return!(h>e+c&&h>i+c&&h>o+c&&h>a+c||h<e-c&&h<i-c&&h<o-c&&h<a-c||l>t+c&&l>n+c&&l>r+c&&l>s+c||l<t-c&&l<n-c&&l<r-c&&l<s-c)&&this.curve.cubicProjectPoint(t,e,n,i,r,o,s,a,l,h,null)<=c/2}},{key:"isInsideQuadraticStroke",value:function(t,e,n,i,r,o,s,a,u){if(0===s)return!1;var l=Math.max(s,5);return!(u>e+l&&u>i+l&&u>o+l||u<e-l&&u<i-l&&u<o-l||a>t+l&&a>n+l&&a>r+l||a<t-l&&a<n-l&&a<r-l)&&this.curve.quadraticProjectPoint(t,e,n,i,r,o,a,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,n,i,r,o,s,a,u){var l=this.PI2;if(0===s)return!1;var h=Math.max(s,5);a-=t,u-=e;var c=Math.sqrt(a*a+u*u);if(c-h>n||c+h<n)return!1;if(Math.abs(i-r)>=l)return!0;if(o){var f=i;i=this.normalizeRadian(r),r=this.normalizeRadian(f)}else i=this.normalizeRadian(i),r=this.normalizeRadian(r);i>r&&(r+=l);var p=Math.atan2(u,a);return p<0&&(p+=l),p>=i&&p<=r||p+l>=i&&p+l<=r}},{key:"isInsideBrokenLine",value:function(t,e,n,i){for(var r=Math.max(e,10),o=0,s=t.length-1;o<s;o++){var a=t[o][0],u=t[o][1],l=t[o+1][0],h=t[o+1][1];if(this.isInsideLine(a,u,l,h,r,n,i))return!0}return!1}},{key:"isInsideRing",value:function(t,e,n,i,r,o){var s=(r-t)*(r-t)+(o-e)*(o-e);return s<i*i&&s>n*n}},{key:"isInsideRect",value:function(t,e,n,i,r,o){return r>=t&&r<=t+n&&o>=e&&o<=e+i}},{key:"isInsideCircle",value:function(t,e,n,i,r){return(i-t)*(i-t)+(r-e)*(r-e)<n*n}},{key:"isInsideSector",value:function(t,e,n,i,r,o,s,a,u){return this.isInsideArcStroke(t,e,(n+i)/2,r,o,s,i-n,a,u)}},{key:"isInsidePolygon",value:function(t,e,n){for(var i=t.length,r=0,o=0,s=i-1;o<i;o++){var a=t[s][0],u=t[s][1],l=t[o][0],h=t[o][1];r+=this.windingLine(a,u,l,h,e,n),s=o}return 0!==r}},{key:"windingLine",value:function(t,e,n,i,r,o){return o>e&&o>i||o<e&&o<i?0:i==e?0:(o-e)/(i-e)*(n-t)+t>r?i<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,n,i,r,o,s,a,u,l){var h=this.curve,c=this.roots,f=this.extrema;if(l>e&&l>i&&l>o&&l>a||l<e&&l<i&&l<o&&l<a)return 0;var p=h.cubicRootAt(e,i,o,a,l,c);if(0===p)return 0;for(var d,y,g=0,v=-1,m=0;m<p;m++){var _=c[m];h.cubicAt(t,n,r,s,_)<u||(v<0&&(v=h.cubicExtrema(e,i,o,a,f),f[1]<f[0]&&v>1&&this.swapExtrema(),d=h.cubicAt(e,i,o,a,f[0]),v>1&&(y=h.cubicAt(e,i,o,a,f[1]))),2===v?_<f[0]?g+=d<e?1:-1:_<f[1]?g+=y<d?1:-1:g+=a<y?1:-1:_<f[0]?g+=d<e?1:-1:g+=a<d?1:-1)}return g}},{key:"windingQuadratic",value:function(t,e,n,i,r,o,s,a){var u=this.curve,l=this.roots;if(a>e&&a>i&&a>o||a<e&&a<i&&a<o)return 0;var h=u.quadraticRootAt(e,i,o,a,l);if(0===h)return 0;var c=u.quadraticExtremum(e,i,o);if(c>=0&&c<=1){for(var f=0,p=u.quadraticAt(e,i,o,c),d=0;d<h;d++){u.quadraticAt(t,n,r,l[d])>s||(l[d]<c?f+=p<e?1:-1:f+=o<p?1:-1)}return f}return u.quadraticAt(t,n,r,l[0])>s?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,n,i,r,o,s,a){var u=this.roots,l=this.PI2;if((a-=e)>n||a<-n)return 0;var h=Math.sqrt(n*n-a*a);if(u[0]=-h,u[1]=h,Math.abs(i-r)>=l){i=0,r=l;var c=o?1:-1;return s>=u[0]+t&&s<=u[1]+t?c:0}if(o){var f=i;i=this.normalizeRadian(r),r=this.normalizeRadian(f)}else i=this.normalizeRadian(i),r=this.normalizeRadian(r);i>r&&(r+=l);for(var p=0,d=0;d<2;d++){var y=u[d];if(y+t>s){var g=Math.atan2(a,y),v=o?1:-1;g<0&&(g=l+g),(g>=i&&g<=r||g+l>=i&&g+l<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(t,e,n,i,r){for(var o=0,s=0,a=0,u=0,l=0,h=!0,c=!0,f="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,d=0;d<t.length;d++){var y=t[d],g=y.points;if(h||"M"===y.command){if(d>0&&(p&&(o+=this.windingLine(s,a,u,l,i,r)),0!==o))return!0;u=g[g.length-2],l=g[g.length-1],h=!1,c&&"A"!==y.command&&(c=!1,s=u,a=l)}switch(y.command){case"M":s=g[0],a=g[1];break;case"L":if(f&&this.isInsideLine(s,a,g[0],g[1],e,i,r))return!0;p&&(o+=this.windingLine(s,a,g[0],g[1],i,r)),s=g[0],a=g[1];break;case"C":if(f&&this.isInsideCubicStroke(s,a,g[0],g[1],g[2],g[3],g[4],g[5],e,i,r))return!0;p&&(o+=this.windingCubic(s,a,g[0],g[1],g[2],g[3],g[4],g[5],i,r)),s=g[4],a=g[5];break;case"Q":if(f&&this.isInsideQuadraticStroke(s,a,g[0],g[1],g[2],g[3],e,i,r))return!0;p&&(o+=this.windingQuadratic(s,a,g[0],g[1],g[2],g[3],i,r)),s=g[2],a=g[3];break;case"A":var v=g[0],m=g[1],_=g[2],b=g[3],x=g[4],w=g[5],S=Math.cos(x)*_+v,P=Math.sin(x)*b+m;c?(c=!1,u=S,l=P):o+=this.windingLine(s,a,S,P);var C=(i-v)*b/_+v;if(f&&this.isInsideArcStroke(v,m,b,x,x+w,1-g[7],e,C,r))return!0;p&&(o+=this.windingArc(v,m,b,x,x+w,1-g[7],C,r)),s=Math.cos(x+w)*_+v,a=Math.sin(x+w)*b+m;break;case"z":if(f&&this.isInsideLine(s,a,u,l,e,i,r))return!0;h=!0}}return p&&(o+=this.windingLine(s,a,u,l,i,r)),0!==o}},{key:"getTextWidth",value:function(t,e){var n=t+":"+e;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var i=0,r=0,o=(t=(t+"").split("\n")).length;r<o;r++)i=Math.max(this._ctx.measureText(t[r]).width,i);return this._ctx.restore(),this._textWidthCache[n]=i,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),i}},{key:"getTextHeight",value:function(t,e){var n=t+":"+e;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var i=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[n]=i,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),i}}]),t}();e.Area=a,r.Zondy.LevelRenderer.Tool.Area=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeBoundingBox=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(52),s=n(53);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}return i(t,[{key:"computeBoundingBox",value:function(t,e,n){if(0!==t.length){for(var i=t[0][0],r=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var u=t[a];u[0]<i&&(i=u[0]),u[0]>r&&(r=u[0]),u[1]<o&&(o=u[1]),u[1]>s&&(s=u[1])}e[0]=i,e[1]=o,n[0]=r,n[1]=s}}},{key:"cubeBezier",value:function(t,e,n,i,r,s){var a=new o.Curve,u=[];a.cubicExtrema(t[0],e[0],n[0],i[0],u);for(var l=0;l<u.length;l++)u[l]=a.cubicAt(t[0],e[0],n[0],i[0],u[l]);var h=[];a.cubicExtrema(t[1],e[1],n[1],i[1],h);for(var c=0;c<h.length;c++)h[c]=a.cubicAt(t[1],e[1],n[1],i[1],h[c]);u.push(t[0],i[0]),h.push(t[1],i[1]);var f=Math.min.apply(null,u),p=Math.max.apply(null,u),d=Math.min.apply(null,h),y=Math.max.apply(null,h);r[0]=f,r[1]=d,s[0]=p,s[1]=y}},{key:"quadraticBezier",value:function(t,e,n,i,r){var s=new o.Curve,a=s.quadraticExtremum(t[0],e[0],n[0]),u=s.quadraticExtremum(t[1],e[1],n[1]),l=1-(a=Math.max(Math.min(a,1),0)),h=1-(u=Math.max(Math.min(u,1),0)),c=l*l*t[0]+2*l*a*e[0]+a*a*n[0],f=l*l*t[1]+2*l*a*e[1]+a*a*n[1],p=h*h*t[0]+2*h*u*e[0]+u*u*n[0],d=h*h*t[1]+2*h*u*e[1]+u*u*n[1];i[0]=Math.min(t[0],n[0],c,p),i[1]=Math.min(t[1],n[1],f,d),r[0]=Math.max(t[0],n[0],c,p),r[1]=Math.max(t[1],n[1],f,d)}},{key:"arc",value:function(t,e,n,i,r,o,a,u){var l=new s.Vector,h=l.create(),c=l.create(),f=l.create();if(h[0]=Math.cos(i)*n+t,h[1]=Math.sin(i)*n+e,c[0]=Math.cos(r)*n+t,c[1]=Math.sin(r)*n+e,l.min(a,h,c),l.max(u,h,c),(i%=2*Math.PI)<0&&(i+=2*Math.PI),(r%=2*Math.PI)<0&&(r+=2*Math.PI),i>r&&!o?r+=2*Math.PI:i<r&&o&&(i+=2*Math.PI),o){var p=r;r=i,i=p}for(var d=0;d<r;d+=Math.PI/2)d>i&&(f[0]=Math.cos(d)*n+t,f[1]=Math.sin(d)*n+e,l.min(a,f,a),l.max(u,f,u))}}]),t}();e.ComputeBoundingBox=a,r.Zondy.LevelRenderer.Tool.ComputeBoundingBox=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Env=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;return function(t){var n=e.os={},i=e.browser={},r=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=t.match(/(iPad).*OS\s([\d_]+)/),a=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=l&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),f=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),g=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),_=t.match(/MSIE ([\d.]+)/),b=r&&t.match(/Mobile\//)&&!v,x=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v;return(i.webkit=!!r)&&(i.version=r[1]),o&&(n.android=!0,n.version=o[2]),u&&!a&&(n.ios=n.iphone=!0,n.version=u[2].replace(/_/g,".")),s&&(n.ios=n.ipad=!0,n.version=s[2].replace(/_/g,".")),a&&(n.ios=n.ipod=!0,n.version=a[3]?a[3].replace(/_/g,"."):null),l&&(n.webos=!0,n.version=l[2]),h&&(n.touchpad=!0),p&&(n.blackberry=!0,n.version=p[2]),d&&(n.bb10=!0,n.version=d[2]),y&&(n.rimtabletos=!0,n.version=y[2]),g&&(i.playbook=!0),c&&(n.kindle=!0,n.version=c[1]),f&&(i.silk=!0,i.version=f[1]),!f&&n.android&&t.match(/Kindle Fire/)&&(i.silk=!0),v&&(i.chrome=!0,i.version=v[1]),m&&(i.firefox=!0,i.version=m[1]),_&&(i.ie=!0,i.version=_[1]),b&&(t.match(/Safari/)||n.ios)&&(i.safari=!0),x&&(i.webview=!0),_&&(i.ie=!0,i.version=_[1]),n.tablet=!!(s||g||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(o||u||l||p||d||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:i,os:n,canvasSupported:!!document.createElement("canvas").getContext}}(navigator.userAgent)}return i(t,[{key:"destory",value:function(){return!0}}]),t}();e.Env=o,r.Zondy.LevelRenderer.Tool.Env=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}return i(t,[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}]),t}();e.Event=o,r.Zondy.LevelRenderer.Tool.Event=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Http=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}return r(t,[{key:"get",value:function(t,e,n){if("object"===(void 0===t?"undefined":i(t))){var r=t;t=r.url,e=r.onsuccess,n=r.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):n&&n(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),t}();e.Http=s,o.Zondy.LevelRenderer.Tool.Http=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}return i(t,[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}]),t}();e.Math=o,r.Zondy.LevelRenderer.Tool.Math=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}return i(t,[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,n){return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=e[1]*n[0]+e[3]*n[1],t[2]=e[0]*n[2]+e[2]*n[3],t[3]=e[1]*n[2]+e[3]*n[3],t[4]=e[0]*n[4]+e[2]*n[5]+e[4],t[5]=e[1]*n[4]+e[3]*n[5]+e[5],t}},{key:"translate",value:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}},{key:"rotate",value:function(t,e,n){var i=e[0],r=e[2],o=e[4],s=e[1],a=e[3],u=e[5],l=Math.sin(n),h=Math.cos(n);return t[0]=i*h+s*l,t[1]=-i*l+s*h,t[2]=r*h+a*l,t[3]=-r*l+h*a,t[4]=h*o+l*u,t[5]=h*u-l*o,t}},{key:"scale",value:function(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}},{key:"invert",value:function(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],s=e[3],a=e[5],u=n*s-o*i;return u?(u=1/u,t[0]=s*u,t[1]=-o*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*a-s*r)*u,t[5]=(o*r-n*a)*u,t):null}},{key:"mulVector",value:function(t,e,n){var i=e[0],r=e[2],o=e[4],s=e[1],a=e[3],u=e[5];return t[0]=n[0]*i+n[1]*r+o,t[1]=n[0]*s+n[1]*a+u,t}}]),t}();e.Matrix=o,r.Zondy.LevelRenderer.Tool.Matrix=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaintLayer=e.Painter=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(26),a=n(51),u=n(92),l=n(9),h=n(93);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(){function t(e,n){c(this,t),this.root=e,this.storage=n,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="Zondy.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var i=document.createElement("div");this._domRoot=i,i.style.position="relative",i.style.overflow="hidden",i.style.width=this._width+"px",i.style.height=this._height+"px",this.root.appendChild(i),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom((0,o.newGuid)(),"div",this),i.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new p((0,o.newGuid)(),this);this._layers.hover=r,i.appendChild(r.dom),r.initContext(),r.dom.onselectstart=a,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var s=this;function a(){return!1}this.updatePainter=function(t,e){s.refreshShapes(t,e)}}return i(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var n=this.storage.getShapeList(!0);return this._paintList(n,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var n,i,r;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var s=[],a=0,h=t.length;a<h;a++){var c=t[a];if(i!==c.zlevel&&(n&&n.needTransform&&r.restore(),r=(n=this.getLayer(c.zlevel)).ctx,i=c.zlevel,n.unusedCount=0,(n.dirty||e)&&n.clear(),n.needTransform&&(r.save(),n.setTransform(r))),r&&c.__startClip){var f=c.__startClip;if(r.save(),f.needTransform){var p=f.transform;l.SUtil.Util_matrix.invert(s,p),r.transform(p[0],p[1],p[2],p[3],p[4],p[5])}if(r.beginPath(),f.buildPath(r,f.style),r.clip(),f.needTransform){var d=s;r.transform(d[0],d[1],d[2],d[3],d[4],d[5])}}if((n&&n.dirty||e)&&!c.invisible&&(!c.onbrush||c.onbrush&&!c.onbrush(r,!1)))if(u.Config.catchBrushException)try{c.brush(r,!1,this.updatePainter)}catch(t){}else c.brush(r,!1,this.updatePainter);r&&c.__stopClip&&r.restore(),c.__dirty=!1}for(var y in r&&n&&n.needTransform&&r.restore(),this._layers)if("hover"!==y){var g=this._layers[y];g.dirty=!1,1===g.unusedCount&&g.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var n=this._zlevelList.length,i=null,r=-1;if(n>0&&t>this._zlevelList[0]){for(r=0;r<n-1&&!(this._zlevelList[r]<t&&this._zlevelList[r+1]>t);r++);i=this._layers[this._zlevelList[r]]}this._zlevelList.splice(r+1,0,t),e=new p((0,o.newGuid)(),this);var a=i?i.dom:this._bgDom;a.nextSibling?a.parentNode.insertBefore(e.dom,a.nextSibling):a.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new s.Util).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,n={};for(var i in e)"hover"!==i&&(n[i]=e[i].elCount,e[i].elCount=0);for(var r=0;r<t.length;r++){var o=t[r],s=e[o.zlevel];if(s){if(s.elCount++,s.dirty)continue;s.dirty=o.__dirty}}for(var a in e)"hover"!==a&&n[a]!==e[a].elCount&&(e[a].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var n=0,i=t.length;n<i;n++){var r=t[n];this.storage.mod(r.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!==t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new s.Util).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var n=this._layers[t];n&&(new s.Util).merge(n,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new s.Util).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,n=t.length;e<n;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),n=this._getHeight();if(t.style.display="",this._width!==e||n!==this._height){for(var i in this._width=e,this._height=n,t.style.width=e+"px",t.style.height=n+"px",this._layers)this._layers[i].resize(e,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,n,i){var r=t.createDom((0,o.newGuid)(),"canvas",this);this._bgDom.appendChild(r);var s=r.getContext("2d");1!==t.devicePixelRatio&&s.scale(t.devicePixelRatio,t.devicePixelRatio),s.fillStyle=n||"#fff",s.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),s.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(s,!1)))if(u.Config.catchBrushException)try{t.brush(s,!1,a.updatePainter)}catch(t){}else t.brush(s,!1,a.updatePainter)},{normal:"up",update:!0});var l=r.toDataURL(e,i);return s=null,this._bgDom.removeChild(r),l}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var n=this.getLayer(t.zlevel);if(n.needTransform&&(e.save(),n.setTransform(e)),u.Config.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(t){}else t.brush(e,!0,this.updatePainter);n.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,n,i,r){var o=document.createElement("canvas"),s=o.getContext("2d"),a=r||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=i+"px",o.setAttribute("width",n*a),o.setAttribute("height",i*a),s.clearRect(0,0,n*a,i*a);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s,!1);var l=new h.SmicImage({id:t,style:{x:0,y:0,image:o}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(n,i,r,o){return e._shapeToImage(n,i,r,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,n,i){var r=document.createElement(n),o=i._width,s=i._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=o+"px",r.style.height=s+"px",r.setAttribute("width",o*t.devicePixelRatio),r.setAttribute("height",s*t.devicePixelRatio),r.setAttribute("id",e),r}}]),t}(),p=function(t){function e(t,n){c(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.dom=null,i.domBack=null,i.ctxBack=null,i.painter=n,i.unusedCount=0,i.config=null,i.dirty=!0,i.elCount=0,i.clearColor=0,i.motionBlur=!1,i.lastFrameAlpha=.7,i.zoomable=!1,i.panable=!1,i.maxZoom=1/0,i.minZoom=0,i.ctx=null,i.dom=f.createDom((0,o.newGuid)(),"canvas",n),i.dom.onselectstart=function(){return!1},i.dom.style["-webkit-user-select"]="none",i.dom.style["user-select"]="none",i.dom.style["-webkit-touch-callout"]="none",i.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Transformable),i(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,a.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!==f.devicePixelRatio&&this.ctx.scale(f.devicePixelRatio,f.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=f.createDom((0,o.newGuid)(),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!==f.devicePixelRatio&&this.ctxBack.scale(f.devicePixelRatio,f.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*f.devicePixelRatio),this.dom.setAttribute("height",e*f.devicePixelRatio),1!==f.devicePixelRatio&&this.ctx.scale(f.devicePixelRatio,f.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*f.devicePixelRatio),this.domBack.setAttribute("height",e*f.devicePixelRatio),1!==f.devicePixelRatio&&this.ctxBack.scale(f.devicePixelRatio,f.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,n=t.width,i=t.height,r=this.clearColor,o=this.motionBlur,s=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,n/f.devicePixelRatio,i/f.devicePixelRatio)),r?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,n/f.devicePixelRatio,i/f.devicePixelRatio),e.restore()):e.clearRect(0,0,n/f.devicePixelRatio,i/f.devicePixelRatio),o){var a=this.domBack;e.save(),e.globalAlpha=s,e.drawImage(a,0,0,n/f.devicePixelRatio,i/f.devicePixelRatio),e.restore()}}}]),e}();e.Painter=f,r.Zondy.LevelRenderer.Painter=f,e.PaintLayer=p,r.Zondy.LevelRenderer.PaintLayer=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Handler=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(40),s=n(92),a=n(9);var u=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));r.root=t,r.storage=n,r.painter=i,r._lastX=0,r._lastY=0,r._mouseX=0,r._mouseY=0,r._findHover=null,r._domHover=null,r._findHover=function(t,e){return function(n,i,r){return t.call(e,n,i,r)}}(function(t,e,n){var i=this;if(i._draggingTarget&&i._draggingTarget.id===t.id||t.isSilent())return!1;var r=i._event;if(t.isCover(e,n)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,s=null;t.refDataHoverGroup&&(s=t.refDataHoverGroup);for(var a=i.storage._shapeList,u=0,l=a.length;u<l;u++){var h=a[u];h.refDataID&&o===h.refDataID&&(s?h.refDataHoverGroup&&s===h.refDataHoverGroup&&i.storage.addHover(h):i.storage.addHover(h))}}}else i.storage.addHover(t);for(var c=t.parent;c;){if(c.clipShape&&!c.clipShape.isCover(i._mouseX,i._mouseY))return!1;c=c.parent}return i._lastHover!==t&&(i._processOutShape(r),i._processDragLeave(r),i._lastHover=t,i._processDragEnter(r)),i._processOverShape(r),i._processDragOver(r),i._hasfound=1,!0}return!1},r),r._domHover=i.getDomHover(),r.CLASS_NAME="Zondy.LevelRenderer.Handler";var o={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(s.Config.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,s.Config.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,s.Config.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,n=this.painter.getLayers(),i=!1;for(var r in n)if("hover"!==r){var o=n[r],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var u=o.__zoom;u*=e,e=(u=Math.max(Math.min(o.maxZoom,u),o.minZoom))/o.__zoom,o.__zoom=u,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,o.dirty=!0,i=!0}}i&&this.painter.refresh(),this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=a.SUtil.Util_event.getX(t),this._mouseY=a.SUtil.Util_event.getY(t);var e=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var i="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var r=this.painter.getLayers(),o=!1;for(var u in r)if("hover"!==u){var l=r[u];l.panable&&(i="move",l.position[0]+=e,l.position[1]+=n,o=!0,l.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?i="move":this._hasfound&&this._lastHover.clickable&&(i="pointer"),this.root.style.cursor=i,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!==this.root)for(;e&&9!==e.nodeType;){if(e===this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(s.Config.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2===this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&a.SUtil.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<s.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<s.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&a.SUtil.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(n){return t.call(e,n)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=e.length;for(;n--;){var i=e[n];t["_"+i+"Handler"]=u(o[i],t)}}(r),window.addEventListener?(window.addEventListener("resize",r._resizeHandler),a.SUtil.Util_env.os.tablet||a.SUtil.Util_env.os.phone?(t.addEventListener("touchstart",r._touchstartHandler),t.addEventListener("touchmove",r._touchmoveHandler),t.addEventListener("touchend",r._touchendHandler)):(t.addEventListener("click",r._clickHandler),t.addEventListener("dblclick",r._dblclickHandler),t.addEventListener("mousewheel",r._mousewheelHandler),t.addEventListener("mousemove",r._mousemoveHandler),t.addEventListener("mousedown",r._mousedownHandler),t.addEventListener("mouseup",r._mouseupHandler)),t.addEventListener("DOMMouseScroll",r._mousewheelHandler),t.addEventListener("mouseout",r._mouseoutHandler)):(window.attachEvent("onresize",r._resizeHandler),t.attachEvent("onclick",r._clickHandler),t.ondblclick=r._dblclickHandler,t.attachEvent("onmousewheel",r._mousewheelHandler),t.attachEvent("onmousemove",r._mousemoveHandler),t.attachEvent("onmouseout",r._mouseoutHandler),t.attachEvent("onmousedown",r._mousedownHandler),t.attachEvent("onmouseup",r._mouseupHandler)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Eventful),i(e,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,o.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var n=s.Config.EVENT;switch(t){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),a.SUtil.Util_env.os.tablet||a.SUtil.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget===e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var n=e;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,s.Config.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,s.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,s.Config.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,s.Config.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,s.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,n,i){var r="on"+e,o={type:e,event:n,target:t,cancelBubble:!1},s=t;for(i&&(o.dragged=i);s&&(s[r]&&(o.cancelBubble=s[r](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):i||this.dispatch(e,{type:e,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=a.SUtil.Util_matrix.create(),n=this.storage.getShapeList(),i=[0,0],r=n.length-1;r>=0;r--){var o=n[r];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),i[0]=this._mouseX,i[1]=this._mouseY,t.needTransform&&(a.SUtil.Util_matrix.invert(e,t.transform),a.SUtil.Util_vector.applyTransform(i,i,e))),this._findHover(o,i[0],i[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<e.length;n++){var i=e[n];i.x&&(this._mouseX+=i.x),i.y&&(this._mouseX+=i.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var n="touchend"!==t.type?t.targetTouches[0]:t.changedTouches[0];if(n){var i=this.root.getBoundingClientRect();t.zrenderX=n.clientX-i.left,t.zrenderY=n.clientY-i.top}}else{var r=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;r&&r!==this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+r.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+r.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),e}();e.Handler=u,r.Zondy.LevelRenderer.Handler=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.Animation=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(0),s=n(1),a=n(26),u=n(40),l=n(183),h=n(9);function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function(t){function e(t){c(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return t=t||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,(0,s.extend)(n,t),n.CLASS_NAME="Zondy.LevelRenderer.Animation",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Eventful),r(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new a.Util).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,n=this._clips,i=n.length,r=[],o=[],s=0;s<i;s++){var a=n[s],u=a.step(t);u&&(r.push(u),o.push(a))}this.stage.update&&this.stage.update();for(var l=0;l<i;)n[l]._needsRemove?(n[l]=n[i-1],n.pop(),i--):l++;i=r.length;for(var h=0;h<i;h++)o[h].fire(r[h]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function n(){e._running&&(e._update(),t(n))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var n=new p(t,(e=e||{}).loop,e.getter,e.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(t,e,n){return(e-t)*n+t}},{key:"_interpolateArray",value:function(t,n,i,r,o){var s=t.length;if(1===o)for(var a=0;a<s;a++)r[a]=e._interpolateNumber(t[a],n[a],i);else for(var u=t[0].length,l=0;l<s;l++)for(var h=0;h<u;h++)r[l][h]=e._interpolateNumber(t[l][h],n[l][h],i)}},{key:"_isArrayLike",value:function(t){switch(void 0===t?"undefined":i(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,n,i,r,o,s,a,u,l){var h=t.length;if(1===l)for(var c=0;c<h;c++)u[c]=e._catmullRomInterpolate(t[c],n[c],i[c],r[c],o,s,a);else for(var f=t[0].length,p=0;p<h;p++)for(var d=0;d<f;d++)u[p][d]=e._catmullRomInterpolate(t[p][d],n[p][d],i[p][d],r[p][d],o,s,a)}},{key:"_catmullRomInterpolate",value:function(t,e,n,i,r,o,s){var a=.5*(n-t),u=.5*(i-e);return(2*(e-n)+a+u)*s+(-3*(e-n)-2*a-u)*o+a*r+e}},{key:"_cloneValue",value:function(t){var n=Array.prototype.slice;if(e._isArrayLike(t)){var i=t.length;if(e._isArrayLike(t[0])){for(var r=[],o=0;o<i;o++)r.push(n.call(t[o]));return r}return n.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(),p=function(){function t(e,n,i,r){c(this,t),this._tracks={},this._target=e,this._loop=n||!1,this._getter=i||function(t,e){return t[e]},this._setter=r||function(t,e,n){t[e]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator"}return r(t,[{key:"when",value:function(t,e){for(var n in e)this._tracks[n]||(this._tracks[n]=[],0!==t&&this._tracks[n].push({time:0,value:f._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(t,10),value:e[n]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,n=this._setter,i=this._getter,r=e._onframeList.length,o="spline"===t,s=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,n=0;n<t;n++)e._doneList[n].call(e)}},a=function(a,u){var c=a.length;if(c){var p=a[0].value,d=f._isArrayLike(p),y=!1,g=d&&f._isArrayLike(p[0])?2:1;a.sort(function(t,e){return t.time-e.time});for(var v=a[c-1].time,m=[],_=[],b=0;b<c;b++){m.push(a[b].time/v);var x=a[b].value;"string"==typeof x&&(0===(x=h.SUtil.Util_color.toArray(x)).length&&(x[0]=x[1]=x[2]=0,x[3]=1),y=!0),_.push(x)}var w,S,P,C,T,O,E,L=0,M=0;if(y)var I=[0,0,0,0];var N=new l.Clip({target:e._target,life:v,loop:e._loop,delay:e._delay,onframe:function(t,s){if(s<M){for(w=Math.min(L+1,c-1),S=w;S>=0&&!(m[S]<=s);S--);S=Math.min(S,c-2)}else{for(S=L;S<c&&!(m[S]>s);S++);S=Math.min(S-1,c-2)}L=S,M=s;var a=m[S+1]-m[S];if(0!==a){if(P=(s-m[S])/a,o)if(T=_[S],C=_[0===S?S:S-1],O=_[S>c-2?c-1:S+1],E=_[S>c-3?c-1:S+2],d)f._catmullRomInterpolateArray(C,T,O,E,P,P*P,P*P*P,i(t,u),g);else{var l=void 0;l=y?f.rgba2String(I):f._catmullRomInterpolate(C,T,O,E,P,P*P,P*P*P),n(t,u,l)}else if(d)f._interpolateArray(_[S],_[S+1],P,i(t,u),g);else{var h=void 0;y?(f._interpolateArray(_[S],_[S+1],P,I,1),h=f.rgba2String(I)):h=f._interpolateNumber(_[S],_[S+1],P),n(t,u,h)}for(S=0;S<r;S++)e._onframeList[S](t,s)}},ondestroy:s});t&&"spline"!==t&&(N.easing=t),e._clipList.push(N),e._clipCount++,e.animation.add(N)}};for(var u in this._tracks)a(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();e.Animation=f,o.Zondy.LevelRenderer.Animation=f,e.Animator=p,o.Zondy.LevelRenderer.Animation.Animator=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(184);var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}return i(t,[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new o.Easing,n=(t-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i="string"==typeof this.easing?e[this.easing]:this.easing,r="function"==typeof i?i(n):n;return this.fire("frame",r),1===n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var n=0,i=this._targetPool.length;n<i;n++)this["on"+t]&&this["on"+t](this._targetPool[n],e)}}]),t}();e.Clip=s,r.Zondy.LevelRenderer.Animation.Clip=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0);var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}return i(t,[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}]),t}();e.Easing=o,r.Zondy.LevelRenderer.Animation.Easing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r));return o.x=isNaN(t)?0:t,o.y=isNaN(t)?0:n,o.width=isNaN(i)?0:i,o.height=isNaN(r)?0:r,o.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Rectangle=s,r.Zondy.Feature.ShapeParameters.Rectangle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));return r.x=t,r.y=n,r.text=i,r.CLASS_NAME="Zondy.Feature.ShapeParameters.Label",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Label=s,r.Zondy.Feature.ShapeParameters.Label=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(15);var s=function(t){function e(t,n,i,r,o,s,a,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s,a,u,l));return h.x=t,h.y=n,h.image=i,h.width=r,h.height=o,h.sx=s,h.sy=a,h.sWidth=u,h.sHeight=l,h.CLASS_NAME="Zondy.Feature.ShapeParameters.Image",h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ShapeParameters),i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}();e.Image=s,r.Zondy.Feature.ShapeParameters.Image=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicText=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smictext",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicText",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=this.style;if(e&&(i=this.getHighlightStyle(i,this.highlightStyle||{})),void 0!==i.text&&!1!==i.text){t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.textFont&&(t.font=i.textFont),t.textAlign=i.textAlign||"start",t.textBaseline=i.textBaseline||"middle";var r,o=(i.text+"").split("\n"),a=s.SUtil.Util_area.getTextHeight("ZH",i.textFont),u=this.getRectNoRotation(i),l=i.x+n[0];r="top"===i.textBaseline?u.y:"bottom"===i.textBaseline?u.y+a:u.y+a/2;for(var h=i.x+n[0],c=i.y+n[1],f=0,p=o.length;f<p;f++){switch(i.labelRect&&(t.fillRect(u.x-2,u.y,u.width+4,u.height),t.fillStyle=i.strokeColor,t.strokeRect(u.x-2,u.y,u.width+4,u.height),t.fillStyle=i.textColor),i.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",i),i.textRotation&&0!==i.textRotation?(t.save(),t.translate(h,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?t.strokeText(o[f],0,a*f,i.maxWidth):t.strokeText(o[f],0,a*f):"bottom"===i.textBaseline?i.maxWidth?t.strokeText(o[f],0,a*(f+1)-u.height,i.maxWidth):t.strokeText(o[f],0,a*(f+1)-u.height):i.maxWidth?t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2,i.maxWidth):t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2),t.restore()):i.maxWidth?t.strokeText(o[f],l,r,i.maxWidth):t.strokeText(o[f],l,r),this.setCtxGlobalAlpha(t,"reset",i);break;case"both":i.textRotation&&0!==i.textRotation?(t.save(),t.translate(h,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*f,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*f,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",i)):"bottom"===i.textBaseline?i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*(f+1)-u.height,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*(f+1)-u.height,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*(f+1)-u.height),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*(f+1)-u.height),this.setCtxGlobalAlpha(t,"reset",i)):i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*(f+1)-u.height/2-a/2,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],0,a*(f+1)-u.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],0,a*(f+1)-u.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",i)),t.restore()):i.maxWidth?(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],l,r,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],l,r,i.maxWidth),this.setCtxGlobalAlpha(t,"reset",i)):(this.setCtxGlobalAlpha(t,"fill",i),t.fillText(o[f],l,r),this.setCtxGlobalAlpha(t,"reset",i),this.setCtxGlobalAlpha(t,"stroke",i),t.strokeText(o[f],l,r),this.setCtxGlobalAlpha(t,"reset",i));break;default:this.setCtxGlobalAlpha(t,"fill",i),i.textRotation&&0!==i.textRotation?(t.save(),t.translate(h,c),t.rotate(i.textRotation*Math.PI/180),"top"===i.textBaseline?i.maxWidth?t.fillText(o[f],0,a*f,i.maxWidth):t.fillText(o[f],0,a*f):"bottom"===i.textBaseline?i.maxWidth?t.fillText(o[f],0,a*(f+1)-u.height,i.maxWidth):t.fillText(o[f],0,a*(f+1)-u.height):i.maxWidth?t.fillText(o[f],0,a*(f+1)-u.height/2-a/2,i.maxWidth):t.fillText(o[f],0,a*(f+1)-u.height/2-a/2),t.restore()):i.maxWidth?t.fillText(o[f],l,r,i.maxWidth):t.fillText(o[f],l,r),this.setCtxGlobalAlpha(t,"reset",i)}r+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,n,i,r,o=this.getTextBackground(t,!0),s=0,a=o.length;s<a;s++){var u=o[s];0===s?(e=u[0],i=u[0],n=u[1],r=u[1]):(u[0]<e&&(e=u[0]),u[0]>i&&(i=u[0]),u[1]<n&&(n=u[1]),u[1]>r&&(r=u[1]))}return t.__rect={x:e,y:n,width:i-e,height:r-n},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,i=s.SUtil.Util_area.getTextHeight("ZH",t.textFont),r=s.SUtil.Util_area.getTextWidth(t.text,t.textFont),o=s.SUtil.Util_area.getTextHeight(t.text,t.textFont),a=t.x+n[0];"end"===t.textAlign||"right"===t.textAlign?a-=r:"center"===t.textAlign&&(a-=r/2),e="top"===t.textBaseline?t.y+n[1]:"bottom"===t.textBaseline?t.y+n[1]-o:t.y+n[1]-o/2;var u,l=!1;if(t.maxWidth){var h=parseInt(t.maxWidth);h<r&&(u=r,l=!0,r=h),a=t.x+n[0],"end"===t.textAlign||"right"===t.textAlign?a-=r:"center"===t.textAlign&&(a-=r/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(r+=u&&!0===l?i/3*(r/u):i/3));return{x:a,y:e,width:r,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if((!e||!1===e)&&t.__textBackground)return t.__textBackground;var i=this.getRectNoRotation(t),r=t.x+n[0],o=t.y+n[1],s=[];if(t.textRotation&&0!==t.textRotation){var a=t.textRotation,u=this.getRotatedLocation(i.x,i.y,r,o,a),l=this.getRotatedLocation(i.x+i.width,i.y,r,o,a),h=this.getRotatedLocation(i.x+i.width,i.y+i.height,r,o,a),c=this.getRotatedLocation(i.x,i.y+i.height,r,o,a);s.push(u),s.push(l),s.push(h),s.push(c)}else{var f=[i.x,i.y],p=[i.x+i.width,i.y],d=[i.x+i.width,i.y+i.height],y=[i.x,i.y+i.height];s.push(f),s.push(p),s.push(d),s.push(y)}return t.__textBackground=s,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,n,i,r){var o,s,a=new Array;return e=-e,i=-i,r=-r,o=(t-n)*Math.cos(r/180*Math.PI)-(e-i)*Math.sin(r/180*Math.PI)+n,s=(t-n)*Math.sin(r/180*Math.PI)+(e-i)*Math.cos(r/180*Math.PI)+i,a[0]=o,a[1]=-s,a}}]),e}();e.SmicText=a,r.Zondy.LevelRenderer.SmicText=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicCircle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smiccircle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicCircle",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=e.x+n[0],r=e.y+n[1];return t.moveTo(i+e.r,r),t.arc(i,r,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition,i=t.x+n[0],r=t.y+n[1],o=t.r;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(i-o-e/2),y:Math.round(r-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}]),e}();e.SmicCircle=s,r.Zondy.LevelRenderer.SmicCircle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRectangle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicrectangle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,i,r,o,s,a=this.refOriginalPosition,u=e.x+a[0],l=e.y+a[1],h=e.width,c=e.height,f=e.radius;"number"==typeof f?n=i=r=o=f:f instanceof Array?1===f.length?n=i=r=o=f[0]:2===f.length?(n=r=f[0],i=o=f[1]):3===f.length?(n=f[0],i=o=f[1],r=f[2]):(n=f[0],i=f[1],r=f[2],o=f[3]):n=i=r=o=0,n+i>h&&(n*=h/(s=n+i),i*=h/s),r+o>h&&(r*=h/(s=r+o),o*=h/s),i+r>c&&(i*=c/(s=i+r),r*=c/s),n+o>c&&(n*=c/(s=n+o),o*=c/s),t.moveTo(u+n,l),t.lineTo(u+h-i,l),0!==i&&t.quadraticCurveTo(u+h,l,u+h,l+i),t.lineTo(u+h,l+c-r),0!==r&&t.quadraticCurveTo(u+h,l+c,u+h-r,l+c),t.lineTo(u+o,l+c),0!==o&&t.quadraticCurveTo(u,l+c,u,l+c-o),t.lineTo(u,l+n),0!==n&&t.quadraticCurveTo(u,l,u+n,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+n[0],e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]),t.lineTo(e.x+n[0]+e.width,e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1]+e.height),t.lineTo(e.x+n[0],e.y+n[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-e/2),y:Math.round(t.y+n[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}]),e}();e.SmicRectangle=s,r.Zondy.LevelRenderer.SmicRectangle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicSector=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicsector",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=e.x+n[0],r=e.y+n[1],o=e.r0||0,a=e.r,u=e.startAngle,l=e.endAngle,h=e.clockWise||!1;u=s.SUtil.Util_math.degreeToRadian(u),l=s.SUtil.Util_math.degreeToRadian(l),h||(u=-u,l=-l);var c=s.SUtil.Util_math.cos(u),f=s.SUtil.Util_math.sin(u);t.moveTo(c*o+i,f*o+r),t.lineTo(c*a+i,f*a+r),t.arc(i,r,a,u,l,!h),t.lineTo(s.SUtil.Util_math.cos(l)*o+i,s.SUtil.Util_math.sin(l)*o+r),0!==o&&t.arc(i,r,o,l,u,h),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,n=s.SUtil.Util_vector.create(),i=s.SUtil.Util_vector.create(),r=s.SUtil.Util_vector.create(),o=s.SUtil.Util_vector.create(),a=t.x+e[0],u=t.y+e[1],l=t.r0||0,h=t.r,c=s.SUtil.Util_math.degreeToRadian(t.startAngle),f=s.SUtil.Util_math.degreeToRadian(t.endAngle),p=t.clockWise;return p||(c=-c,f=-f),l>1?s.SUtil.Util_computeBoundingBox.arc(a,u,l,c,f,!p,n,r):(n[0]=r[0]=a,n[1]=r[1]=u),s.SUtil.Util_computeBoundingBox.arc(a,u,h,c,f,!p,i,o),s.SUtil.Util_vector.min(n,n,i),s.SUtil.Util_vector.max(r,r,o),t.__rect={x:n[0],y:n[1],width:r[0]-n[0],height:r[1]-n[1]},t.__rect}}]),e}();e.SmicSector=a,r.Zondy.LevelRenderer.SmicSector=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeVector=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(27),a=n(97),u=n(96),l=n(57);function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(t,n,i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(!t.fGeom)return h(a);a.dataBounds=t.bound,a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=i||{},a.CLASS_NAME="Zondy.Theme.ThemeVector",a.style=i||{},r&&(0,o.copyAttributesWithClip)(a,r,["shapeOptions","dataBounds"]),s&&(0,o.copyAttributesWithClip)(a.shapeOptions,s);t.fGeom;switch(a.lonlat=[(a.dataBounds.xmin+a.dataBounds.xmax)/2,(a.dataBounds.ymin+a.dataBounds.ymax)/2],a.location=a.getLocalXY(a.lonlat),t.ftype){case 0:break;case 1:a.pointsToTF(t.fGeom.PntGeom);break;case 2:a.linesToTF(t.fGeom.LinGeom);break;case 3:a.regsToTF(t.fGeom.RegGeom)}return a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Theme),i(e,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function(t){if(!(null==t||t.length<=0)){t.components;for(var e=[],n=[],i=this.location,r=[],s=this.nodesClipPixel,a=0;a<t.length;a++){var l=t[a];if(n=[],e=this.getLocalXY([l.Dot.x,l.Dot.y]),n[0]=e[0]-i[0],n[1]=e[1]-i[1],r.length>0){var h=r[r.length-1];if(Math.abs(h[0]-n[0])<=s&&Math.abs(h[1]-n[1])<=s)continue}r.push(n);var c=new Object;c.r=6,(c=(0,o.copyAttributesWithClip)(c,this.style)).x=n[0],c.y=n[1];var f=new u.SmicPoint({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=i,f.refDataID=this.data.FID,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,o.copyAttributesWithClip)(f,this.shapeOptions),this.shapes.push(f)}}}},{key:"linesToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.lineToTF(t[e])}},{key:"lineToTF",value:function(t){var e=[];if(null!=t.Line&&null!=t.Line.Arcs&&t.Line.Arcs.length>0)for(var n=t.Line.Arcs,i=0;i<n.length;i++)for(var r=n[i].Dots,s=0;s<r.length;s++)e.push([r[s].x,r[s].y]);if(!(e.length<=0)){var u=[],l=[],h=this.location,c=[],f=this.nodesClipPixel;for(i=0;i<e.length;i++){var p=e[i];if(l=[],u=this.getLocalXY(p),l[0]=u[0]-h[0],l[1]=u[1]-h[1],c.length>0){var d=c[c.length-1];if(Math.abs(d[0]-l[0])<=f&&Math.abs(d[1]-l[1])<=f)continue}c.push(l)}if(c.length<2)return null;var y=new Object;(y=(0,o.copyAttributesWithClip)(y,this.style,["pointList"])).pointList=c;var g=new a.SmicBrokenLine({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(g.highlightStyle=this.highlightStyle),g.refOriginalPosition=this.location,g.refDataID=this.data.FID,g.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,o.copyAttributesWithClip)(g,this.shapeOptions),this.shapes.push(g)}}},{key:"regsToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.regToTF(t[e])}},{key:"regToTF",value:function(t){var e=t.Rings;if(!(null==e||e.length<=0)){for(var n=[],i=[],r=this.location,s=[],a=[],u=[],h=this.nodesClipPixel,c=0;c<e.length;c++){if(0===c){if(s=[],null!=e[c]&&null!=e[c].Arcs&&e[c].Arcs.length>0)for(var f=e[c].Arcs,p=0;p<f.length;p++)for(var d=f[p].Dots,y=0;y<d.length;y++){if(i=[],n=this.getLocalXY([d[y].x,d[y].y]),i[0]=n[0]-r[0],i[1]=n[1]-r[1],s.length>0){var g=s[s.length-1];if(Math.abs(g[0]-i[0])<=h&&Math.abs(g[1]-i[1])<=h)continue}s.push(i)}}else if(a=[],null!=e[c]&&null!=e[c].Arcs&&e[c].Arcs.length>0)for(f=e[c].Arcs,p=0;p<f.length;p++)for(d=f[p].Dots,y=0;y<d.length;y++){if(i=[],n=this.getLocalXY([d[y].x,d[y].y]),i[0]=n[0]-r[0],i[1]=n[1]-r[1],a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-i[0])<=h&&Math.abs(v[1]-i[1])<=h)continue}a.push(i)}a.length<2||u.push(a)}if(!(s.length<2)){var m={};(m=(0,o.copyAttributesWithClip)(m,this.style,["pointList"])).pointList=s;var _=new l.SmicPolygon({style:m,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(_.highlightStyle=this.highlightStyle),_.refOriginalPosition=this.location,_.refDataID=this.data.FID,_.isHoverByRefDataID=this.isMultiHover,u.length>0&&(_.holePolygonPointLists=u),this.shapeOptions&&(0,o.copyAttributesWithClip)(_,this.shapeOptions),this.shapes.push(_)}}}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,n=0,i=this.shapes.length;n<i;n++){var r=this.shapes[n];r.refOriginalPosition=t,e.addShape(r)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}]),e}();e.ThemeVector=c,r.Zondy.Theme.ThemeVector=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphThemeLayer=e.graphThemeLayer=void 0;var i=n(0),r=(n(2),n(39)),o=n(47),s=n(27),a=n(19),u=n(7),l=r.ThemeLayer.extend({options:{isOverLay:!0},initialize:function(t,e,n){var i=[];i.push(t),i.push(n),r.ThemeLayer.prototype.initialize.apply(this,i),this.chartsType=e,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){var e=this;if(e.fire("beforefeaturesadded",{features:t}),t instanceof o.FeatureSet){var n=null,i=t.AttStruct,r=t.SFEleArray;if(null!=r&&r.length>0)for(var s=0;s<r.length;s++){var a=r[s];if(null!=a.AttValue&&a.AttValue.length>0){n={};for(var u=0;u<a.AttValue.length;u++)n[i.FldName[u]]=a.AttValue[u];n.FID=a.FID}a.attributes=n,e.features.push(a)}}e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var n=e.features;if(t&&t instanceof window.L.LatLngBounds){var i=this._map.options.crs;t=window.L.bounds(i.project(t.getSouthWest()),i.project(t.getNorthEast())),t=new a.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}for(var r=0,o=n.length;r<o;r++){var s=n[r],u=s.bound;if(!t||t.intersectsBounds(u)){var l=e.cache,h=s.FID;if(!l[h]){l[h]=h;var c=e.createThematicFeature(s),f=e.overlayWeightField&&s.attributes[e.overlayWeightField]&&!isNaN(s.attributes[e.overlayWeightField]);c&&f&&(c.__overlayWeight=s.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()},createThematicFeature:function(t){var e,n=this;return s.Theme[n.chartsType]&&n.themeFields&&n.chartsSetting&&(e=new s.Theme[n.chartsType](t,n,n.themeFields,n.chartsSetting,null,n.options)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())},getShapesByFeatureID:function(t){var e=[],n=this.renderer.getAllShapes();if(!t)return n;for(var i=0,r=n.length;i<r;i++){var o=n[i];o.refDataID&&t===o.refDataID&&e.push(o)}return e},isQuadrilateralOverLap:function(t,e){var n=[{x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymin},{x:t.xmax,y:t.ymax},{x:t.xmin,y:t.ymax}],i=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],r=n.length,o=i.length;if(4!==r||4!==o)return null;for(var s=!1,a=0;a<r;a++)if(this.isPointInPoly(n[a],i)){s=!0;break}for(var u=0;u<o;u++)if(this.isPointInPoly(i[u],n)){s=!0;break}for(var l=0;l<r-1&&!s;l++)for(var h=0;h<o-1;h++){if("Zondy.Object.Point2D"===this.lineIntersection(n[l],n[l+1],i[h],i[h+1]).CLASS_NAME){s=!0;break}}return s},lineIntersection:function(t,e,n,i){var r,o,s=null,a=(i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x),l=(e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x),h=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!==h)o=l/h,s=(r=a/h)>=0&&o<=1&&r<=1&&o>=0?new u.Point2D(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y)):"No Intersection";else if(0===a&&0===l){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),p=Math.max(t.x,e.x),d=Math.min(t.x,e.x);s=(n.y>=f&&n.y<=c||i.y>=f&&i.y<=c)&&n.x>=d&&n.x<=p||i.x>=d&&i.x<=p?"Coincident":"Parallel"}else s="Parallel";return s},isPointInPoly:function(t,e){for(var n=!1,i=-1,r=e.length,o=r-1;++i<r;o=i)(e[i].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[i].y)&&t.x<(e[o].x-e[i].x)*(t.y-e[i].y)/(e[o].y-e[i].y)+e[i].x&&(n=!n);return n},isChartInMap:function(t,e){for(var n=t,i=!1,r=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],o=0,s=r.length;o<s;o++){var a=r[o];if(a.x>=n.xmin&&a.x<=n.xmax&&a.y>=n.ymin&&a.y<=n.ymax){i=!0;break}}return i},isSuitableChart:function(t,e,n){return Math.abs(n)<=1},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){this.clearCache(),r.ThemeLayer.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),r.ThemeLayer.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),r.ThemeLayer.prototype.redraw.apply(this,arguments)},clear:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()},getWeightFieldValue:function(t,e,n){if((void 0===n||isNaN(n))&&(n=0),!t.attributes)return n;var i=t.attributes[e];return(void 0===i||isNaN(i))&&(i=n),i},_sortChart:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var t=this.charts,e=0,n=t.length;e<n;e++)for(var i=t[e],r=i.resetLocation(),o=i.shapes,s=0,a=o.length;s<a;s++)o[s].refOriginalPosition=r,this.renderer.addShape(o[s])},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),n=this._map.options.crs;e=window.L.bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()));var i=t.charts,r=[],o=t.getLocalXY(e.min),s=t.getLocalXY(e.max),u=new a.Rectangle;u.xmin=Math.min(parseFloat(o[0]),parseFloat(s[0])),u.xmax=Math.max(parseFloat(o[0]),parseFloat(s[0])),u.ymin=Math.min(parseFloat(o[1]),parseFloat(s[1])),u.ymax=Math.max(parseFloat(o[1]),parseFloat(s[1]));for(var l=0,h=i.length;l<h;l++){var c=i[l],f=c.resetLocation(),p=c.chartBounds;if(!u||t.isChartInMap(u,p)){var d=t._map.getZoom()-t.options.fitZoom;if(!(u&&t.options.fitZoom>-1)||t.isSuitableChart(u,p,d)){for(var y=!1,g=0;g<r.length;g++)if(t.isQuadrilateralOverLap(p,r[g])){y=!0;break}if(!y){r.push(p);for(var v=c.shapes,m=0,_=v.length;m<_;m++)v[m].refOriginalPosition=f,t.renderer.addShape(v[m])}}}}}}),h=e.graphThemeLayer=function(t,e,n){return new l(t,e,n)};e.GraphThemeLayer=l,i.Zondy.Map.graphThemeLayer=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbol=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(17);var s=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.setting=null,r&&r.codomain&&(a.setting=r,a.DVBCodomain=a.setting.codomain),a.CLASS_NAME="Zondy.Theme.RankSymbol",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Graph),i(e,[{key:"destroy",value:function(){this.setting=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,n=this.height,i=this.location;this.origonPoint=[i[0]-e/2,i[1]-n/2];var r=this.origonPoint;this.chartBox=[r[0],r[1]+n,r[0]+e,r[1]];var o=this.chartBox,s=this.DVBParameter;this.dataViewBox=[o[0]+s[0],o[1]-s[1],o[2]-s[2],o[3]+s[3]];var a=this.dataViewBox;return!(a[0]>=a[2]||a[1]<=a[3])&&(this.DVBOrigonPoint=[a[0],a[3]],this.DVBWidth=Math.abs(a[2]-a[0]),this.DVBHeight=Math.abs(a[1]-a[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-r[0],this.DVBOrigonPoint[1]-r[1]],!0)}}]),e}();e.RankSymbol=s,r.Zondy.Theme.RankSymbol=s},function(t,e){t.exports=function(){try{return echarts}catch(t){return{}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeDimensionPlayer=e.TimeDimensionPlayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var r=e.TimeDimensionPlayer=(i.default.Layer||i.default.Class).extend({includes:i.default.Evented||i.default.Mixin.Events,initialize:function(t,e){i.default.setOptions(this,t),this._timeDimension=e,this._paused=!1,this._buffer=this.options.buffer||5,this._minBufferReady=this.options.minBufferReady||1,this._waitingForBuffer=!1,this._loop=this.options.loop||!1,this._steps=1,this._timeDimension.on("timeload",function(t){this.release(),this._waitingForBuffer=!1}.bind(this)),this.setTransitionTime(this.options.transitionTime||1e3),this._timeDimension.on("limitschanged availabletimeschanged timeload",function(t){this._timeDimension.prepareNextTimes(this._steps,this._minBufferReady,this._loop)}.bind(this))},_tick:function(){var t=this._getMaxIndex(),e=this._timeDimension.getCurrentTimeIndex()>=t&&this._steps>0,n=0==this._timeDimension.getCurrentTimeIndex()&&this._steps<0;if((e||n)&&!this._loop)return this.pause(),this.stop(),void this.fire("animationfinished");if(!this._paused){var i=0,r=this._bufferSize;if(this._minBufferReady>0)if(i=this._timeDimension.getNumberNextTimesReady(this._steps,r,this._loop),this._waitingForBuffer){if(i<r)return console.log("Waiting until buffer is loaded. "+i+" of "+r+" loaded"),void this.fire("waiting",{buffer:r,available:i});console.log("Buffer is fully loaded!"),this.fire("running"),this._waitingForBuffer=!1}else if(i<this._minBufferReady)return console.log("Force wait for load buffer. "+i+" of "+r+" loaded"),this._waitingForBuffer=!0,this._timeDimension.prepareNextTimes(this._steps,r,this._loop),void this.fire("waiting",{buffer:r,available:i});this.pause(),this._timeDimension.nextTime(this._steps,this._loop),r>0&&this._timeDimension.prepareNextTimes(this._steps,r,this._loop)}},_getMaxIndex:function(){return Math.min(this._timeDimension.getAvailableTimes().length-1,this._timeDimension.getUpperLimitIndex()||1/0)},start:function(t){if(!this._intervalID){this._steps=t||1,this._waitingForBuffer=!1;var e=!1;this.options.startOver&&this._timeDimension.getCurrentTimeIndex()===this._getMaxIndex()&&(this._timeDimension.setCurrentTimeIndex(this._timeDimension.getLowerLimitIndex()||0),e=!0),this.release(),this._intervalID=window.setInterval(i.default.bind(this._tick,this),this._transitionTime),e||this._tick(),this.fire("play"),this.fire("running")}},stop:function(){this._intervalID&&(clearInterval(this._intervalID),this._intervalID=null,this._waitingForBuffer=!1,this.fire("stop"))},pause:function(){this._paused=!0},release:function(){this._paused=!1},getTransitionTime:function(){return this._transitionTime},isPlaying:function(){return!!this._intervalID},isWaiting:function(){return this._waitingForBuffer},isLooped:function(){return this._loop},setLooped:function(t){this._loop=t,this.fire("loopchange",{loop:t})},setTransitionTime:function(t){this._transitionTime=t,"function"==typeof this._buffer?(this._bufferSize=this._buffer.call(this,this._transitionTime,this._minBufferReady,this._loop),console.log("Buffer size changed to "+this._bufferSize)):this._bufferSize=this._buffer,this._intervalID&&(this.stop(),this.start(this._steps)),this.fire("speedchange",{transitionTime:t,buffer:this._bufferSize})},getSteps:function(){return this._steps}}),o=e.timeDimensionPlayer=function(t,e){return new r(t,e)};i.default.zondy.TimeDimensionPlayer=o},function(t,e,n){"use strict";n(198)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=e.AnimatedMarkerLayer=e.MarkerClusterLayer=e.ClusterLayer=e.HeaterLayer=e.StreamLayer=e.MapvLayer=e.EchartsLayer=e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=e.OGCWMSInfo=e.OGCWMTSInfo=e.WMTSCapabilities=e.WMSCapabilities=e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=void 0,e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=void 0,e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.EPSG4610=e.EPSG4490=e.EPSG4214=e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.BaiduTileLayer=e.TDTLayer=e.ArcGISLayer=e.crs=e.CRS=e.MapVectorLayer=e.MapWMTSLayer=e.MapTileLayer=e.MapDocLayer=e.L=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(199),o=n(10),s=n(11),a=n(260),u=n(268),l=n(269),h=n(134),c=n(288),f=n(303),p=n(311),d=n(317),y=n(320),g=n(324),v=n(352),m=n(359),_=n(373);e.L=i.default,e.MapDocLayer=r.MapDocLayer,e.MapTileLayer=r.MapTileLayer,e.MapWMTSLayer=r.MapWMTSLayer,e.MapVectorLayer=r.MapVectorLayer,e.CRS=r.CRS,e.crs=r.crs,e.ArcGISLayer=r.ArcGISLayer,e.TDTLayer=r.TDTLayer,e.BaiduTileLayer=r.BaiduTileLayer,e.TiandituType=r.TiandituType,e.GoogleLayerType=r.GoogleLayerType,e.ArcGISLayerType=r.ArcGISLayerType,e.OpenStreetLayerType=r.OpenStreetLayerType,e.EPSG4214=y.EPSG4214,e.EPSG4490=y.EPSG4490,e.EPSG4610=y.EPSG4610,e.ServiceBase=o.ServiceBase,e.AnyLine=s.AnyLine,e.Arc=s.Arc,e.Zondy=s.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=s.CAttDataRow,e.CDisplayStyle=s.CDisplayStyle,e.CDisplayStyleExtend=s.CDisplayStyleExtend,e.CDynNoteInfo=s.CDynNoteInfo,e.CGDBInfo=s.CGDBInfo,e.Circle=s.Circle,e.CLineInfo=s.CLineInfo,e.CPointInfo=s.CPointInfo,e.CRegionInfo=s.CRegionInfo,e.DynNoteLableType=s.DynNoteLableType,e.DynShowStyle=s.DynShowStyle,e.XClsType=s.XClsType,e.VectClsType=s.VectClsType,e.FeatureType=s.FeatureType,e.FontShape=s.FontShape,e.LabelLinType=s.LabelLinType,e.LabelRegType=s.LabelRegType,e.LabelPntType=s.LabelPntType,e.RepeatType=s.RepeatType,e.LabelSpreadType=s.LabelSpreadType,e.LineConstrain=s.LineConstrain,e.EightDirType=s.EightDirType,e.ISShowArc=s.ISShowArc,e.NetAnalyType=s.NetAnalyType,e.NetElemType=s.NetElemType,e.CLinAdjustType=s.CLinAdjustType,e.CLinHeadType=s.CLinHeadType,e.CLinJointType=s.CLinJointType,e.CLinStyleMakeType=s.CLinStyleMakeType,e.CItemType=s.CItemType,e.MapType=s.MapType,e.LayerStatusType=s.LayerStatusType,e.Feature=s.Feature,e.FeatureGeometry=s.FeatureGeometry,e.FeatureGraphicBase=s.FeatureGraphicBase,e.FeatureSet=s.FeatureSet,e.GLine=s.GLine,e.GPoint=s.GPoint,e.GRegion=s.GRegion,e.LabelLinInfo=s.LabelLinInfo,e.LabelRegInfo=s.LabelRegInfo,e.LablePntInfo=s.LablePntInfo,e.MultiPolygon=s.MultiPolygon,e.Point2D=s.Point2D,e.Polygon=s.Polygon,e.PolyLine=s.PolyLine,e.Rectangle=s.Rectangle,e.Tangram=s.Tangram,e.VectCls=s.VectCls,e.WebGraphicsInfo=s.WebGraphicsInfo,e.extend=s.extend,e.isArray=s.isArray,e.extendDeep=s.extendDeep,e.copy=s.copy,e.copyExcluce=s.copyExcluce,e.reset=s.reset,e.getElement=s.getElement,e.isElement=s.isElement,e.removeItem=s.removeItem,e.indexOf=s.indexOf,e.modifyDOMElement=s.modifyDOMElement,e.applyDefaults=s.applyDefaults,e.getParameterString=s.getParameterString,e.getWFParameterString=s.getWFParameterString,e.urlAppend=s.urlAppend,e.getParameters=s.getParameters,e.IS_GECKO=s.IS_GECKO,e.Browser=s.Browser,e.getBrowser=s.getBrowser,e.isSupportCanvas=s.isSupportCanvas,e.supportCanvas=s.supportCanvas,e.isInTheSameDomain=s.isInTheSameDomain,e.toJSON=s.toJSON,e.transformResult=s.transformResult,e.copyAttributes=s.copyAttributes,e.copyAttributesWithClip=s.copyAttributesWithClip,e.cloneObject=s.cloneObject,e.newGuid=s.newGuid,e.bind=s.bind,e.bindAsEventListener=s.bindAsEventListener,e.getTopAnalysisResult=s.getTopAnalysisResult,e.ChineseToUtf8=s.ChineseToUtf8,e.DeepMerge=s.DeepMerge,e.merge=s.merge,e.mixin=s.mixin,e.ContourNoteParam=a.ContourNoteParam,e.ContourParam=a.ContourParam,e.ContourZValue=a.ContourZValue,e.ContourRegionInfo=a.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=a.NetAnalyse,e.NetAnalysisExtent=a.NetAnalysisExtent,e.SlopLineParam=a.SlopLineParam,e.CommonServiceBase=u.CommonServiceBase,e.Events=u.Events,e.CORS=u.CORS,e.RequestTimeout=u.RequestTimeout,e.FetchRequest=u.FetchRequest,e.IgsServiceBase=u.IgsServiceBase,e.JSONFormat=u.JSONFormat,e.ColorInfo=l.ColorInfo,e.GDBInfo=l.GDBInfo,e.MapDoc=l.MapDoc,e.CatalogService=l.CatalogService,e.TileLayer=l.TileLayer,e.VectorLayer=l.VectorLayer,e.EditDocFeature=h.EditDocFeature,e.EditLayerFeature=h.EditLayerFeature,e.EditServiceBase=h.EditServiceBase,e.MultiGeoQuery=h.MultiGeoQuery,e.MultiGeoQueryParameter=h.MultiGeoQueryParameter,e.ObjClsQuery=h.ObjClsQuery,e.ObjClsQueryParameter=h.ObjClsQueryParameter,e.QueryByLayerParameter=h.QueryByLayerParameter,e.QueryDocFeature=h.QueryDocFeature,e.QueryFeatureRule=h.QueryFeatureRule,e.QueryFeatureStruct=h.QueryFeatureStruct,e.QueryLayerFeature=h.QueryLayerFeature,e.QueryParameter=h.QueryParameter,e.QueryParameterBase=h.QueryParameterBase,e.QueryServiceBase=h.QueryServiceBase,e.AnalysisBase=c.AnalysisBase,e.ClassBufferBase=c.ClassBufferBase,e.ClassBufferByMultiplyRing=c.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=c.ClassBufferBySingleRing,e.ClipBase=c.ClipBase,e.ClipByCircle=c.ClipByCircle,e.ClipByLayer=c.ClipByLayer,e.ClipByPolygon=c.ClipByPolygon,e.ContourAnalyse=c.ContourAnalyse,e.FeatureBuffBase=c.FeatureBuffBase,e.FeatureBuffByMultiplyRing=c.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=c.FeatureBuffBySingleRing,e.NetAnalysis=c.NetAnalysis,e.OverlayBase=c.OverlayBase,e.OverlayByLayer=c.OverlayByLayer,e.OverlayByPolygon=c.OverlayByPolygon,e.ProjectBase=c.ProjectBase,e.ProjectByLayer=c.ProjectByLayer,e.ProjectBySRID=c.ProjectBySRID,e.CalArea=f.CalArea,e.CalPolyLineLength=f.CalPolyLineLength,e.CalServiceBase=f.CalServiceBase,e.CProjectBySRSID=f.CProjectBySRSID,e.CProjectParam=f.CProjectParam,e.GeometryAnalysisBase=f.GeometryAnalysisBase,e.ProjectDots=f.ProjectDots,e.ProjectRang=f.ProjectRang,e.Smooth=f.Smooth,e.TopAnalysis=f.TopAnalysis,e.GetDocImageService=p.GetDocImageService,e.GetLayerImageService=p.GetLayerImageService,e.GetMapImageService=p.GetMapImageService,e.GetMapInfoService=p.GetMapInfoService,e.GetTileImageService=p.GetTileImageService,e.MapServiceBase=p.MapServiceBase,e.CAllOtherDataItemInfoSource=d.CAllOtherDataItemInfoSource,e.CAnnInfo=d.CAnnInfo,e.CChartLabelFormat=d.CChartLabelFormat,e.CChartTheme=d.CChartTheme,e.CChartThemeInfo=d.CChartThemeInfo,e.CChartThemeRepresentInfo=d.CChartThemeRepresentInfo,e.CChartType=d.CChartType,e.CDotDensityTheme=d.CDotDensityTheme,e.CFourColorTheme=d.CFourColorTheme,e.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme,e.CLinInfo=d.CLinInfo,e.CMultiClassTheme=d.CMultiClassTheme,e.CPntInfo=d.CPntInfo,e.CRandomTheme=d.CRandomTheme,e.CRangeTheme=d.CRangeTheme,e.CRangeThemeInfo=d.CRangeThemeInfo,e.CRegInfo=d.CRegInfo,e.CSimpleTheme=d.CSimpleTheme,e.CTheme=d.CTheme,e.CThemeInfo=d.CThemeInfo,e.CUniqueTheme=d.CUniqueTheme,e.CUniqueThemeInfo=d.CUniqueThemeInfo,e.ExpInfo=d.ExpInfo,e.FolderInfo=d.FolderInfo,e.FolderInfoAttribute=d.FolderInfoAttribute,e.ItemValue=d.ItemValue,e.ThemeOper=d.ThemeOper,e.ThemesInfo=d.ThemesInfo,e.WMSCapabilities=g.WMSCapabilities,e.WMTSCapabilities=g.WMTSCapabilities,e.OGCWMTSInfo=g.OGCWMTSInfo,e.OGCWMSInfo=g.OGCWMSInfo,e.GeoFeatureThemeLayer=v.GeoFeatureThemeLayer,e.ThemeLayer=v.ThemeLayer,e.RangeThemeLayer=v.RangeThemeLayer,e.UniqueThemeLayer=v.UniqueThemeLayer,e.GraphThemeLayer=v.GraphThemeLayer,e.graphThemeLayer=v.graphThemeLayer,e.RandomThemeLayer=v.RandomThemeLayer,e.SimpleThemeLayer=v.SimpleThemeLayer,e.RankSymbolThemeLayer=v.RankSymbolThemeLayer,e.ThemeStyle=v.ThemeStyle,e.Bar=m.Bar,e.Bar3D=m.Bar3D,e.OverlayCircle=m.OverlayCircle,e.Graph=m.Graph,e.Line=m.Line,e.Pie=m.Pie,e.OverlayPoint=m.OverlayPoint,e.RankSymbol=m.RankSymbol,e.Ring=m.Ring,e.ThemeVector=m.ThemeVector,e.ShapeFactory=m.ShapeFactory,e.ShapeParameters=m.ShapeParameters,e.FeatureCircle=m.FeatureCircle,e.Image=m.Image,e.Label=m.Label,e.FeatureLine=m.FeatureLine,e.Point=m.Point,e.FeaturePolygon=m.FeaturePolygon,e.FeatureRectangle=m.FeatureRectangle,e.Sector=m.Sector,e.FeatureTheme=m.FeatureTheme,e.LevelRenderer=m.LevelRenderer,e.Render=m.Render,e.Animation=m.Animation,e.Animator=m.Animator,e.Area=m.Area,e.Clip=m.Clip,e.Color=m.Color,e.ComputeBoundingBox=m.ComputeBoundingBox,e.Config=m.Config,e.LevelRendererCurve=m.LevelRendererCurve,e.Easing=m.Easing,e.Env=m.Env,e.LevelRendererEvent=m.LevelRendererEvent,e.Eventful=m.Eventful,e.Group=m.Group,e.Handler=m.Handler,e.Http=m.Http,e.Math=m.Math,e.Matrix=m.Matrix,e.Painter=m.Painter,e.PaintLayer=m.PaintLayer,e.Shape=m.Shape,e.SmicBrokenLine=m.SmicBrokenLine,e.SmicCircle=m.SmicCircle,e.SmicEllipse=m.SmicEllipse,e.SmicImage=m.SmicImage,e.SmicIsogon=m.SmicIsogon,e.SmicPoint=m.SmicPoint,e.SmicPolygon=m.SmicPolygon,e.SmicRectangle=m.SmicRectangle,e.SmicRing=m.SmicRing,e.SmicSector=m.SmicSector,e.SmicStar=m.SmicStar,e.SmicText=m.SmicText,e.Storage=m.Storage,e.Transformable=m.Transformable,e.Util=m.Util,e.LevelRendererVector=m.LevelRendererVector,e.SUtil=m.SUtil,e.EchartsLayer=_.EchartsLayer,e.MapvLayer=_.MapvLayer,e.StreamLayer=_.StreamLayer,e.HeaterLayer=_.HeaterLayer,e.ClusterLayer=_.ClusterLayer,e.MarkerClusterLayer=_.MarkerClusterLayer,e.AnimatedMarkerLayer=_.AnimatedMarkerLayer,e.TimeDimension=_.TimeDimension,e.TimeDimensionControl=_.TimeDimensionControl,e.TimeDimensionLayer=_.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=_.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=_.TimeDimensionLayerWMS,e.TimeDimensionPlayer=_.TimeDimensionPlayer,e.TimeDimensionUtil=_.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.ArcGISLayer=e.BaiduTileLayer=e.TDTLayer=e.crs=e.CRS=e.MapVectorLayer=e.GeneralWMTSLayer=e.MapWMTSLayer=e.MapTileLayer=e.MapDocLayer=void 0;var i=n(200),r=n(201),o=n(202),s=n(203),a=n(204),u=n(41),l=n(249),h=n(250),c=n(251),f=n(252);e.MapDocLayer=i.MapDocLayer,e.MapTileLayer=r.MapTileLayer,e.MapWMTSLayer=o.MapWMTSLayer,e.GeneralWMTSLayer=s.GeneralWMTSLayer,e.MapVectorLayer=a.MapVectorLayer,e.CRS=u.CRS,e.crs=u.crs,e.TDTLayer=l.TDTLayer,e.BaiduTileLayer=h.BaiduTileLayer,e.ArcGISLayer=c.ArcGISLayer,e.TiandituType=f.TiandituType,e.GoogleLayerType=f.GoogleLayerType,e.ArcGISLayerType=f.ArcGISLayerType,e.OpenStreetLayerType=f.OpenStreetLayerType},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.L=e.MapDocLayer=void 0;var i=n(0),r=n(2),o=n(1),s=window.L.TileLayer.extend({options:{layers:null,filters:null,style:null,f:null,proj:null,guid:null,cache:!1,keepCache:!0,tileSize:256,attribution:"Zondy Map doc Data"},initialize:function(t,e){var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var i=e&&e.ip?e.ip:"localhost",r=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+r+"/igs/rest/mrms/docs/"+t)}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/docs/"+t);window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=t.options.crs,this._initLayerUrl(),window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),r="&bbox="+n.x+","+i.y+","+i.x+","+n.y;return this.options.keepCache||(r+="&temp="+Math.random()),this._layerUrl+encodeURI(r)},_initLayerUrl:function(){var t=this.url+"?";t+=encodeURI(this._initAllRequestParams().join("&")),this._layerUrl=t},_initAllRequestParams:function(){var t=this.options||{},e=[],n=t.f||"png";e.push("f="+n);var i=this.options.tileSize;i instanceof window.L.Point||(i=window.L.point(i,i)),e.push("w="+i.x),e.push("h="+i.y),t.layers&&e.push("layers="+t.layers),t.filters&&e.push("filters="+t.filters),t.style&&e.push("style="+JSON.stringify(t.style));var r=t.guid||(0,o.newGuid)();return e.push("guid="+r),t.proj&&e.push("proj="+t.proj),void 0!==t.cache&&null!==t.isAntialiasing&&e.push("cache="+t.cache),void 0!==t.update&&null!==t.isAntialiasing&&e.push("update="+t.update),t.mode&&e.push("mode="+t.mode),void 0!==t.isAntialiasing&&null!==t.isAntialiasing&&e.push("isAntialiasing="+t.isAntialiasing),e},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},refreshMap:function(t){null!==t&&(this.options.guid=t),this._initLayerUrl(),this.redraw()}});e.MapDocLayer=s,i.Zondy.Map.MapDocLayer=s,e.L=r.L},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapTileLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({options:{yAxis:"down",origin:[-180,90],tileSize:256,attribution:"Zondy Map Tile Data"},initialize:function(t,e){var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var i=e&&e.ip?e.ip:"localhost",r=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+r+"/igs/rest/mrms/tile/"+t)}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/tile/"+t);this.options.origin=e.origin?e.origin:null,window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.GridLayer.prototype.initialize(arguments[1]),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=this._crs.projection.bounds,n=[e.min.x,e.max.y];this._origin=this.options.origin?this.options.origin:n,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.url+"/{z}/{y}/{x}?size="+this.options.tileSize;return e=e.replace("{x}",t.x.toString()).replace("{y}",t.y.toString()).replace("{z}",t.z.toString())}}));e.MapTileLayer=r,i.Zondy.Map.MapTileLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapWMTSLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({options:{version:"1.0.0",style:"",serverName:"",tilematrixSet:"",layer:"",format:"image/png",tileSize:256,attribution:"Zondy WMTS Data",noWrap:!0},initialize:function(t){if(t.url)t.url.indexOf("?")>-1?this._url=t.url.split("?")[0]:this._url=t.url;else{var e="/igs/rest/ogc/WMTSServer";t.serverName&&""!==t.serverName&&(e="/igs/rest/ogc/"+t.serverName+"/WMTSServer");var n=t&&t.domain?t.domain:"";if(""===n){this.networkProtocol=void 0!==t.networkProtocol?t.networkProtocol:location.protocol.split(":")[0]||"http";var i=t&&t.ip?t.ip:"localhost",r=t&&t.port?t.port:"6163";this._url=encodeURI(this.networkProtocol+"://"+i+":"+r+e)}else this._url=encodeURI(n+e)}this._url.toLowerCase().indexOf("ime-cloud")>-1?this._url+="?service=WMTS&REQUEST=GetTile":this._url+="?service=WMTS&request=GetTile",this.options.origin=t.origin?t.origin:null,window.L.setOptions(this,t)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=this._crs.projection.bounds,n=[e.min.x,e.max.y];this._origin=this.options.origin?this.options.origin:n,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getZoomForUrl(),n=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),i={version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,layer:this.options.layer,tilematrix:e,tilerow:t.y,tilecol:t.x};return n.indexOf("tianditu")>-1?i.tilematrixSet="c":n.indexOf("geoserver")>-1&&(i.tilematrix=this.options.tilematrixSet+":"+e),this.options.token&&(n.indexOf("tianditu")>-1?i.tk=this.options.token:i.token=this.options.token),n+window.L.Util.getParamString(i,n)}}));e.MapWMTSLayer=r,i.Zondy.Map.MapWMTSLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralWMTSLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({url:"",options:{version:"1.0.0",style:"default",tilematrixSet:"",layer:"",format:"image/png",tileSize:256,attribution:"WMTS Data"},initialize:function(t,e){this._url=encodeURI(t),window.L.setOptions(this,e)},onAdd:function(t){window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getZoomForUrl(),n=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),i={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,layer:this.options.layer,tilematrix:this.options.tilematrixIds[e],height:this.options.tileSize,width:this.options.tileSize,tilerow:t.y,tilecol:t.x},r=window.L.Util.getParamString(i,n);return n+"?"+(r=r.slice(1,r.length))}}));e.GeneralWMTSLayer=r,i.Zondy.Map.GeneralWMTSLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapVectorLayer=void 0;var i=n(0),r=(n(2),n(1)),o=window.L.TileLayer.extend({options:{gdbps:null,filters:null,style:null,f:null,keepCache:!0,guid:null,attribution:"Zondy Map vector Data",proj:null},initialize:function(t,e){(e=e||{}).gdbps=t;var n=e&&e.domain?e.domain:"";if(""===n){this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http";var i=e&&e.ip?e.ip:"localhost",r=e&&e.port?e.port:"6163";this.url=this._url=encodeURI(this.networkProtocol+"://"+i+":"+r+"/igs/rest/mrms/layers")}else this.url=this._url=encodeURI(n+"/igs/rest/mrms/layers");window.L.TileLayer.prototype.initialize.apply(this,arguments),window.L.setOptions(this,e),window.L.stamp(this)},onAdd:function(t){this._crs=t.options.crs,this._initLayerUrl(),window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),i=this._crs.project(e.getSouthEast()),r="&bbox="+n.x+","+i.y+","+i.x+","+n.y;return this.options.keepCache||(r+="&temp="+Math.random()),this._layerUrl+encodeURI(r)},_initLayerUrl:function(){var t=this.url+"?";t+=encodeURI(this._initAllRequestParams().join("&")),this._layerUrl=t},_initAllRequestParams:function(){var t=this.options||{},e=[],n=t.f||"png";e.push("f="+n),t.gdbps&&e.push("gdbps="+t.gdbps);var i=this.options.tileSize;i instanceof window.L.Point||(i=window.L.point(i,i)),e.push("w="+i.x),e.push("h="+i.y),t.filters&&e.push("filters="+t.filters),t.style&&e.push("style="+JSON.stringify(t.style)),t.proj&&e.push("proj="+t.proj);var o=t.guid||(0,r.newGuid)();return e.push("guid="+o),void 0!==t.isAntialiasing&&null!==t.isAntialiasing&&e.push("isAntialiasing="+t.isAntialiasing),e},redraw:function(){if(this._map){this._removeAllTiles();var t=(0,r.newGuid)();this.options.guid=t,this._initLayerUrl(),this._update()}return this}});e.MapVectorLayer=o,i.Zondy.Map.MapVectorLayer=o},function(t,e,n){var i=n(206);i.defaultDatum="WGS84",i.Proj=n(59),i.WGS84=new i.Proj("WGS84"),i.Point=n(220),i.toPoint=n(106),i.defs=n(102),i.transform=n(105),i.mgrs=n(107),i.version=n(221).version,n(222)(i),t.exports=i},function(t,e,n){var i=n(59),r=n(105),o=i("WGS84");function s(t,e,n){var i;return Array.isArray(n)?(i=r(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):r(t,e,n)}function a(t){return t instanceof i?t:t.oProj?t.oProj:i(t)}t.exports=function(t,e,n){t=a(t);var i,r=!1;return void 0===e?(e=t,t=o,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=o,r=!0),e=a(e),n?s(t,e,n):(i={forward:function(n){return s(t,e,n)},inverse:function(n){return s(e,t,n)}},r&&(i.oProj=e),i)}},function(t,e,n){var i=n(102),r=n(104),o=n(103);t.exports=function(t){return function(t){return"string"==typeof t}(t)?function(t){return t in i}(t)?i[t]:function(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,n){return e+1+t.indexOf(n)},0)}(t)?r(t):function(t){return"+"===t[0]}(t)?o(t):void 0:t}},function(t,e){t.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},function(t,e){e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667},function(t,e){e.ft={to_meter:.3048},e["us-ft"]={to_meter:1200/3937}},function(t,e,n){var i=[n(212),n(213)],r={},o=[];function s(t,e){var n=o.length;return t.names?(o[n]=t,t.names.forEach(function(t){r[t.toLowerCase()]=n}),this):(console.log(e),!0)}e.add=s,e.get=function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==r[e]&&o[r[e]]?o[r[e]]:void 0},e.start=function(){i.forEach(s)}},function(t,e,n){var i=n(21),r=Math.PI/2,o=57.29577951308232,s=n(4),a=Math.PI/4,u=n(42),l=n(43);e.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=i(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},e.forward=function(t){var e,n,i=t.x,l=t.y;if(l*o>90&&l*o<-90&&i*o>180&&i*o<-180)return null;if(Math.abs(Math.abs(l)-r)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*s(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(a+.5*l));else{var h=Math.sin(l),c=u(this.e,l,h);e=this.x0+this.a*this.k0*s(i-this.long0),n=this.y0-this.a*this.k0*Math.log(c)}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n,i=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=r-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(n=l(this.e,a)))return null}return e=s(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},e.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},function(t,e){function n(t){return t}e.init=function(){},e.forward=n,e.inverse=n,e.names=["longlat","identity"]},function(t,e,n){var i=n(215),r=n(216),o=n(60),s=n(217);t.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=i[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var n=r[t.ellps]?r[t.ellps]:r.WGS84;o(t,n)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=s(t)),t}},function(t,e){e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(t,e){e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(t,e){var n=Math.PI/2,i=function(t){if(!(this instanceof i))return new i(t);this.datum_type=4,t&&(t.datumCode&&"none"===t.datumCode&&(this.datum_type=5),t.datum_params&&(this.datum_params=t.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=484813681109536e-20,this.datum_params[4]*=484813681109536e-20,this.datum_params[5]*=484813681109536e-20,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=t.grids?3:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,3===this.datum_type&&(this.grids=t.grids))};i.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,i,r,o,s,a,u,l=t.x,h=t.y,c=t.z?t.z:0;if(h<-n&&h>-1.001*n)h=-n;else if(h>n&&h<1.001*n)h=n;else if(h<-n||h>n)return null;return l>Math.PI&&(l-=2*Math.PI),s=Math.sin(h),u=Math.cos(h),a=s*s,e=((o=this.a/Math.sqrt(1-this.es*a))+c)*u*Math.cos(l),i=(o+c)*u*Math.sin(l),r=(o*(1-this.es)+c)*s,t.x=e,t.y=i,t.z=r,0},geocentric_to_geodetic:function(t){var e,i,r,o,s,a,u,l,h,c,f,p,d,y,g,v,m=t.x,_=t.y,b=t.z?t.z:0;if(!1,e=Math.sqrt(m*m+_*_),i=Math.sqrt(m*m+_*_+b*b),e/this.a<1e-12){if(!0,y=0,i/this.a<1e-12)return g=n,void(v=-this.b)}else y=Math.atan2(_,m);r=b/i,o=e/i,s=1/Math.sqrt(1-this.es*(2-this.es)*o*o),l=o*(1-this.es)*s,h=r*s,d=0;do{d++,v=e*l+b*h-(u=this.a/Math.sqrt(1-this.es*h*h))*(1-this.es*h*h),a=this.es*u/(u+v),p=(f=r*(s=1/Math.sqrt(1-a*(2-a)*o*o)))*l-(c=o*(1-a)*s)*h,l=c,h=f}while(p*p>1e-24&&d<30);return g=Math.atan(f/Math.abs(c)),t.x=y,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,i,r,o,s,a,u,l,h,c,f,p,d,y,g,v,m,_=t.x,b=t.y,x=t.z?t.z:0;if(_=parseFloat(_),b=parseFloat(b),x=parseFloat(x),m=!1,0!==_)e=Math.atan2(b,_);else if(b>0)e=n;else if(b<0)e=-n;else if(m=!0,e=0,x>0)i=n;else{if(!(x<0))return i=n,void(r=-this.b);i=-n}return s=_*_+b*b,a=1.0026*x,p=(o=Math.sqrt(s))/(l=Math.sqrt(a*a+s)),f=(c=a/l)*c*c,u=x+this.b*this.ep2*f,v=o-this.a*this.es*p*p*p,d=u/(h=Math.sqrt(u*u+v*v)),y=v/h,g=this.a/Math.sqrt(1-this.es*d*d),r=y>=.3826834323650898?o/y-g:y<=-.3826834323650898?o/-y-g:x/d+g*(this.es-1),!1===m&&(i=Math.atan(d/y)),t.x=e,t.y=i,t.z=r,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=a*(t.x-s*t.y+o*t.z)+e,l=a*(s*t.x+t.y-r*t.z)+n,h=a*(-o*t.x+r*t.y+t.z)+i;t.x=u,t.y=l,t.z=h}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],n=this.datum_params[1],i=this.datum_params[2],r=this.datum_params[3],o=this.datum_params[4],s=this.datum_params[5],a=this.datum_params[6],u=(t.x-e)/a,l=(t.y-n)/a,h=(t.z-i)/a;t.x=u+s*l-o*h,t.y=-s*u+l+r*h,t.z=o*u-r*l+h}}},t.exports=i},function(t,e){var n=1,i=2;t.exports=function(t,e,r){var o,s,a;function u(t){return t===n||t===i}if(t.compare_datums(e))return r;if(5===t.datum_type||5===e.datum_type)return r;var l=t.a,h=t.es,c=e.a,f=e.es,p=t.datum_type;if(3===p)if(0===this.apply_gridshift(t,0,r))t.a=6378137,t.es=.006694379990141316;else{if(!t.datum_params)return t.a=l,t.es=t.es,r;for(o=1,s=0,a=t.datum_params.length;s<a;s++)o*=t.datum_params[s];if(0===o)return t.a=l,t.es=t.es,r;p=t.datum_params.length>3?i:n}return 3===e.datum_type&&(e.a=6378137,e.es=.006694379990141316),(t.es!==e.es||t.a!==e.a||u(p)||u(e.datum_type))&&(t.geodetic_to_geocentric(r),u(t.datum_type)&&t.geocentric_to_wgs84(r),u(e.datum_type)&&e.geocentric_from_wgs84(r),e.geocentric_to_geodetic(r)),3===e.datum_type&&this.apply_gridshift(e,1,r),t.a=l,t.es=h,e.a=c,e.es=f,r}},function(t,e){t.exports=function(t,e,n){var i,r,o,s=n.x,a=n.y,u=n.z||0;for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=s,r="x"):1===o?(i=a,r="y"):(i=u,r="z"),t.axis[o]){case"e":n[r]=i;break;case"w":n[r]=-i;break;case"n":n[r]=i;break;case"s":n[r]=-i;break;case"u":void 0!==n[r]&&(n.z=i);break;case"d":void 0!==n[r]&&(n.z=-i);break;default:return null}return n}},function(t,e,n){var i=n(107);function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}r.fromMGRS=function(t){return new r(i.toPoint(t))},r.prototype.toMGRS=function(t){return i.forward([this.x,this.y],t)},t.exports=r},function(t){t.exports={name:"proj4",version:"2.3.15",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},function(t,e,n){var i=[n(108),n(223),n(224),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(238),n(239),n(240),n(241),n(242),n(245),n(246),n(247),n(248)];t.exports=function(t){i.forEach(function(e){t.Proj.projections.add(e)})}},function(t,e,n){var i=n(108);e.dependsOn="tmerc",e.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.init.apply(this),this.forward=i.forward,this.inverse=i.inverse)},e.names=["Universal Transverse Mercator System","utm"]},function(t,e,n){var i=n(225),r=n(4);e.init=function(){i.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},e.forward=function(t){var e,n,o,s;return t.x=r(t.x-this.long0),i.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},e.inverse=function(t){var e,n,o,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var u=2*Math.atan2(a,this.R2);e=Math.sin(u),n=Math.cos(u),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),o=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,i.inverse.apply(this,[t]),t.x=r(t.x+this.long0),t},e.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},function(t,e,n){var i=Math.PI/4,r=n(226),o=Math.PI/2;e.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*r(this.e*t,this.ratexp))},e.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*r(this.e*Math.sin(n),this.ratexp))-o,t.x=this.C*e,t},e.inverse=function(t){for(var e=t.x/this.C,n=t.y,s=Math.pow(Math.tan(.5*n+i)/this.K,1/this.C),a=20;a>0&&(n=2*Math.atan(s*r(this.e*Math.sin(t.y),-.5*this.e))-o,!(Math.abs(n-t.y)<1e-14));--a)t.y=n;return a?(t.x=e,t.y=n,t):null},e.names=["gauss"]},function(t,e){t.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},function(t,e,n){var i=Math.PI/2,r=n(29),o=n(21),s=n(42),a=n(43),u=n(4);e.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i+t))*Math.pow((1-e)/(1+e),.5*n)},e.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+r(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/s(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=o(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},e.forward=function(t){var e,n,r,o,a,l,h=t.x,c=t.y,f=Math.sin(c),p=Math.cos(c),d=u(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=1e-10&&Math.abs(c+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*f+this.coslat0*p*Math.cos(d)),t.x=this.a*e*p*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*p*Math.cos(d))+this.y0,t):(n=2*Math.atan(this.ssfn_(c,f,this.e))-i,o=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=s(this.e,c*this.con,this.con*f),l=2*this.a*this.k0*a/this.cons,t.x=this.x0+l*Math.sin(h-this.long0),t.y=this.y0-this.con*l*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+o*Math.cos(d)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*o*Math.cos(d))),t.y=e*(this.cosX0*r-this.sinX0*o*Math.cos(d))+this.y0),t.x=e*o*Math.sin(d)+this.x0,t))},e.inverse=function(t){var e,n,r,o,s;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var h=2*Math.atan(l/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,l<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(h)*this.sinlat0+t.y*Math.sin(h)*this.coslat0/l),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?u(this.long0+Math.atan2(t.x,-1*t.y)):u(this.long0+Math.atan2(t.x,t.y)):u(this.long0+Math.atan2(t.x*Math.sin(h),l*this.coslat0*Math.cos(h)-t.y*this.sinlat0*Math.sin(h))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(l<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=l*this.cons/(2*this.a*this.k0),n=this.con*a(this.e,r),e=this.con*u(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=1e-10?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=u(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*a(this.e,Math.tan(.5*(i+s)));return t.x=e,t.y=n,t},e.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},function(t,e){e.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},e.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},e.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,u=0,l=o,h=-1e3,c=0;Math.abs(l-h)>1e-7;){if(++c>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),h=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=l,t},e.names=["somerc"]},function(t,e,n){var i=n(42),r=n(4),o=n(43),s=Math.PI/2,a=Math.PI/4;e.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var o,s,a=i(this.e,this.lat0,t),u=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(u*u<1&&(u=1),isNaN(this.longc)){var l=i(this.e,this.lat1,Math.sin(this.lat1)),h=i(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(u+Math.sqrt(u*u-1))*Math.pow(a,this.bl):this.el=(u-Math.sqrt(u*u-1))*Math.pow(a,this.bl);var c=Math.pow(l,this.bl),f=Math.pow(h,this.bl);s=.5*((o=this.el/c)-1/o);var p=(this.el*this.el-f*c)/(this.el*this.el+f*c),d=(f-c)/(f+c),y=r(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*y)/d)/this.bl,this.long0=r(this.long0);var g=r(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/s),this.alpha=Math.asin(u*Math.sin(this.gamma0))}else o=this.lat0>=0?u+Math.sqrt(u*u-1):u-Math.sqrt(u*u-1),this.el=o*Math.pow(a,this.bl),s=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/u),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(u*u-1),Math.cos(this.alpha))},e.forward=function(t){var e,n,o,u=t.x,l=t.y,h=r(u-this.long0);if(Math.abs(Math.abs(l)-s)<=1e-10)o=l>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(a+o*this.gamma0*.5)),e=-1*o*s*this.al/this.bl;else{var c=i(this.e,l,Math.sin(l)),f=this.el/Math.pow(c,this.bl),p=.5*(f-1/f),d=.5*(f+1/f),y=Math.sin(this.bl*h),g=(p*Math.sin(this.gamma0)-y*Math.cos(this.gamma0))/d;n=Math.abs(Math.abs(g)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-g)/(1+g))/this.bl,e=Math.abs(Math.cos(this.bl*h))<=1e-10?this.al*this.bl*h:this.al*Math.atan2(p*Math.cos(this.gamma0)+y*Math.sin(this.gamma0),Math.cos(this.bl*h))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},e.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),a=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.bl*e/this.al),h=(l*Math.cos(this.gamma0)+a*Math.sin(this.gamma0))/u,c=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<1e-10?(t.x=this.long0,t.y=s):Math.abs(h+1)<1e-10?(t.x=this.long0,t.y=-1*s):(t.y=o(this.e,c),t.x=r(this.long0-Math.atan2(a*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},e.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},function(t,e,n){var i=n(21),r=n(42),o=Math.PI/2,s=n(29),a=n(4),u=n(43);e.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=i(this.e,e,n),s=r(this.e,this.lat1,e),a=Math.sin(this.lat2),u=Math.cos(this.lat2),l=i(this.e,a,u),h=r(this.e,this.lat2,a),c=r(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(o/l)/Math.log(s/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},e.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=s(n)*(o-2e-10));var i,u,l=Math.abs(Math.abs(n)-o);if(l>1e-10)i=r(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(i,this.ns);else{if((l=n*this.ns)<=0)return null;u=0}var h=this.ns*a(e-this.long0);return t.x=this.k0*(u*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-u*Math.cos(h))+this.y0,t},e.inverse=function(t){var e,n,i,r,s,l=(t.x-this.x0)/this.k0,h=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+h*h),n=1):(e=-Math.sqrt(l*l+h*h),n=-1);var c=0;if(0!==e&&(c=Math.atan2(n*l,n*h)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=u(this.e,i)))return null}else r=-o;return s=a(c/this.ns+this.long0),t.x=s,t.y=r,t},e.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},function(t,e,n){var i=n(4);e.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},e.forward=function(t){var e,n,r,o,s,a,u,l=t.x,h=t.y,c=i(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(o)),a=this.n*s,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(a)/1,t.x=u*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},e.inverse=function(t){var e,n,i,r,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,l+=1}while(0===a&&l<15);return l>=15?null:t},e.names=["Krovak","krovak"]},function(t,e,n){var i=n(34),r=n(30),o=n(31),s=n(32),a=n(33),u=n(61),l=n(4),h=n(35),c=n(62),f=Math.PI/2;e.init=function(){this.sphere||(this.e0=r(this.es),this.e1=o(this.es),this.e2=s(this.es),this.e3=a(this.es),this.ml0=this.a*i(this.e0,this.e1,this.e2,this.e3,this.lat0))},e.forward=function(t){var e,n,r=t.x,o=t.y;if(r=l(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(r))-this.lat0);else{var s=Math.sin(o),a=Math.cos(o),h=u(this.a,this.e,s),c=Math.tan(o)*Math.tan(o),f=r*Math.cos(o),p=f*f,d=this.es*a*a/(1-this.es);e=h*f*(1-p*c*(1/6-(8-c+8*d)*p/120)),n=this.a*i(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+h*s/a*p*(.5+(5-c+6*d)*p/24)}return t.x=e+this.x0,t.y=n+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var s=this.ml0/this.a+r,a=c(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-f)<=1e-10)return t.x=this.long0,t.y=f,r<0&&(t.y*=-1),t;var p=u(this.a,this.e,Math.sin(a)),d=p*p*p/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(a),2),g=i*this.a/p,v=g*g;e=a-p*Math.tan(a)/d*g*g*(.5-(1+3*y)*g*g/24),n=g*(1-v*(y/3+(1+3*y)*y*v/15))/Math.cos(a)}return t.x=l(n+this.long0),t.y=h(e),t},e.names=["Cassini","Cassini_Soldner","cass"]},function(t,e,n){var i=Math.PI/2,r=Math.PI/4,o=n(63),s=n(4);e.S_POLE=1,e.N_POLE=2,e.EQUIT=3,e.OBLIQ=4,e.init=function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-i)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=o(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=o(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},e.forward=function(t){var e,n,a,u,l,h,c,f,p,d,y=t.x,g=t.y;if(y=s(y-this.long0),this.sphere){if(l=Math.sin(g),d=Math.cos(g),a=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*a:1+this.sinph0*l+this.cosph0*d*a)<=1e-10)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(y),n*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(g+this.phi0)<1e-10)return null;n=r-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(y),n*=a}}else{switch(c=0,f=0,p=0,a=Math.cos(y),u=Math.sin(y),l=Math.sin(g),h=o(this.e,l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=h/this.qp,f=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:p=1+this.sinb1*c+this.cosb1*f*a;break;case this.EQUIT:p=1+f*a;break;case this.N_POLE:p=i+g,h=this.qp-h;break;case this.S_POLE:p=g-i,h=this.qp+h}if(Math.abs(p)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),n=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*c-this.sinb1*f*a):(p=Math.sqrt(2/(1+f*a)))*c*this.ymf,e=this.xmf*p*f*u;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(p=Math.sqrt(h))*u,n=a*(this.mode===this.S_POLE?p:-p)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,o,a,u,l,h=t.x/this.a,c=t.y/this.a;if(this.sphere){var f,p=0,d=0;if((n=.5*(f=Math.sqrt(h*h+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=1e-10?0:Math.asin(c*d/f),h*=d,c=p*f;break;case this.OBLIQ:n=Math.abs(f)<=1e-10?this.phi0:Math.asin(p*this.sinph0+c*d*this.cosph0/f),h*=d*this.cosph0,c=(p-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:c=-c,n=i-n;break;case this.S_POLE:n-=i}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,c):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,c*=this.dd,(u=Math.sqrt(h*h+c*c))<1e-10)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*u/this.rq),r=Math.cos(o),h*=o=Math.sin(o),this.mode===this.OBLIQ?(l=r*this.sinb1+c*o*this.cosb1/u,a=this.qp*l,c=u*this.cosb1*r-c*this.sinb1*o):(l=c*o/u,a=this.qp*l,c=u*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(a=h*h+c*c))return t.x=0,t.y=this.phi0,t;l=1-a/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(h,c),n=this.authlat(Math.asin(l),this.apa)}return t.x=s(this.long0+e),t.y=n,t},e.P00=.3333333333333333,e.P01=.17222222222222222,e.P02=.10257936507936508,e.P10=.06388888888888888,e.P11=.0664021164021164,e.P20=.016415012942191543,e.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},e.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},e.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},function(t,e,n){var i=n(21),r=n(63),o=n(4),s=n(22);e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=i(this.e3,this.sin_po,this.cos_po),this.qs1=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=i(this.e3,this.sin_po,this.cos_po),this.qs2=r(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=r(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},e.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=r(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*o(e-this.long0),u=s*Math.sin(a)+this.x0,l=this.rh-s*Math.cos(a)+this.y0;return t.x=u,t.y=l,t},e.inverse=function(t){var e,n,i,r,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,a=this.phi1z(this.e3,n)),s=o(r/this.ns0+this.long0),t.x=s,t.y=a,t},e.phi1z=function(t,e){var n,i,r,o,a,u=s(.5*e);if(t<1e-10)return u;for(var l=t*t,h=1;h<=25;h++)if(n=Math.sin(u),i=Math.cos(u),u+=a=.5*(o=1-(r=t*n)*r)*o/i*(e/(1-l)-n/o+.5/t*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return u;return null},e.names=["Albers_Conic_Equal_Area","Albers","aea"]},function(t,e,n){var i=n(4),r=n(22);e.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},e.forward=function(t){var e,n,r,o,s,a,u,l=t.x,h=t.y;return r=i(l-this.long0),e=Math.sin(h),n=Math.cos(h),o=Math.cos(r),1,(s=this.sin_p14*e+this.cos_p14*n*o)>0||Math.abs(s)<=1e-10?(a=this.x0+1*this.a*n*Math.sin(r)/s,u=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*o)/s):(a=this.x0+this.infinity_dist*n*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=a,t.y=u,t},e.inverse=function(t){var e,n,o,s,a,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),o=Math.cos(s),u=r(o*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),a=i(this.long0+a)):(u=this.phic0,a=0),t.x=a,t.y=u,t},e.names=["gnom"]},function(t,e,n){var i=n(4),r=n(63),o=n(21),s=n(237);e.init=function(){this.sphere||(this.k0=o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},e.forward=function(t){var e,n,o=t.x,s=t.y,a=i(o-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var u=r(this.e,Math.sin(s));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=i(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=s(this.e,2*t.y*this.k0/this.a),e=i(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},e.names=["cea"]},function(t,e){var n=Math.PI/2;t.exports=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*n:n;for(var r,o,s,a,u=Math.asin(.5*e),l=0;l<30;l++)if(o=Math.sin(u),s=Math.cos(u),a=t*o,u+=r=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return u;return NaN}},function(t,e,n){var i=n(4),r=n(35);e.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},e.forward=function(t){var e=t.x,n=t.y,o=i(e-this.long0),s=r(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*s,t},e.inverse=function(t){var e=t.x,n=t.y;return t.x=i(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=r(this.lat0+(n-this.y0)/this.a),t},e.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},function(t,e,n){var i=n(30),r=n(31),o=n(32),s=n(33),a=n(4),u=n(35),l=n(34),h=n(61);e.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=o(this.es),this.e3=s(this.es),this.ml0=this.a*l(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var e,n,i,r=t.x,o=t.y,s=a(r-this.long0);if(i=s*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(u(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*s,n=-1*this.ml0;else{var c=h(this.a,this.e,Math.sin(o))/Math.tan(o);e=c*Math.sin(i),n=this.a*l(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},e.inverse=function(t){var e,n,i,r,o,s,u,h,c;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=1e-10)e=a(i/this.a+this.long0),n=0;else{var f;for(s=this.lat0+r/this.a,u=i*i/this.a/this.a+s*s,h=s,o=20;o;--o)if(h+=c=-1*(s*(h*(f=Math.tan(h))+1)-h-.5*(h*h+u)*f)/((h-s)/f-1),Math.abs(c)<=1e-10){n=h;break}e=a(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=1e-10)n=0,e=a(this.long0+i/this.a);else{var p,d,y,g,v;for(s=(this.ml0+r)/this.a,u=i*i/this.a/this.a+s*s,h=s,o=20;o;--o)if(v=this.e*Math.sin(h),p=Math.sqrt(1-v*v)*Math.tan(h),d=this.a*l(this.e0,this.e1,this.e2,this.e3,h),y=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=c=(s*(p*(g=d/this.a)+1)-g-.5*p*(g*g+u))/(this.es*Math.sin(2*h)*(g*g+u-2*s*g)/(4*p)+(s-g)*(p*y-2/Math.sin(2*h))-y),Math.abs(c)<=1e-10){n=h;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=a(this.long0+Math.asin(i*p/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},e.names=["Polyconic","poly"]},function(t,e){e.iterations=1,e.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},e.forward=function(t){var e,n=t.x,i=(t.y-this.lat0)/484813681109536e-20*1e-5,r=n-this.long0,o=1,s=0;for(e=1;e<=10;e++)o*=i,s+=this.A[e]*o;var a,u=s,l=r,h=1,c=0,f=0,p=0;for(e=1;e<=6;e++)a=c*u+h*l,h=h*u-c*l,c=a,f=f+this.B_re[e]*h-this.B_im[e]*c,p=p+this.B_im[e]*h+this.B_re[e]*c;return t.x=p*this.a+this.x0,t.y=f*this.a+this.y0,t},e.inverse=function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,s=(r-this.y0)/this.a,a=o/this.a,u=1,l=0,h=0,c=0;for(e=1;e<=6;e++)n=l*s+u*a,u=u*s-l*a,l=n,h=h+this.C_re[e]*u-this.C_im[e]*l,c=c+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=h,y=c,g=s,v=a;for(e=2;e<=6;e++)p=y*h+d*c,d=d*h-y*c,y=p,g+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),v+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var m=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=y*h+d*c,d=d*h-y*c,y=p,m+=e*(this.B_re[e]*d-this.B_im[e]*y),_+=e*(this.B_im[e]*d+this.B_re[e]*y);var b=m*m+_*_;h=(g*m+v*_)/b,c=(v*m-g*_)/b}var x=h,w=c,S=1,P=0;for(e=1;e<=9;e++)S*=x,P+=this.D[e]*S;var C=this.lat0+484813681109536e-20*P*1e5,T=this.long0+w;return t.x=T,t.y=C,t},e.names=["New_Zealand_Map_Grid","nzmg"]},function(t,e,n){var i=n(4);e.init=function(){},e.forward=function(t){var e=t.x,n=t.y,r=i(e-this.long0),o=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=s,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},e.names=["Miller_Cylindrical","mill"]},function(t,e,n){var i=n(4),r=n(35),o=n(243),s=n(109),a=n(244),u=Math.PI/2,l=n(22);e.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=o(this.es)},e.forward=function(t){var e,n,r=t.x,o=t.y;if(r=i(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(o),u=20;u;--u){var l=(this.m*o+Math.sin(o)-a)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<1e-10)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*r*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var h=Math.sin(o),c=Math.cos(o);n=this.a*s(o,h,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},e.inverse=function(t){var e,n,o,s;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=l((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=l(Math.sin(e)/this.n)),o=i(o+this.long0),e=r(e)):(e=a(t.y/this.a,this.es,this.en),(s=Math.abs(e))<u?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),o=i(n)):s-1e-10<u&&(o=this.long0)),t.x=o,t.y=e,t},e.names=["Sinusoidal","sinu"]},function(t,e){var n=.01068115234375;t.exports=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*n))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*n)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}},function(t,e,n){var i=n(109);t.exports=function(t,e,n){for(var r=1/(1-e),o=t,s=20;s;--s){var a=Math.sin(o),u=1-e*a*a;if(o-=u=(i(o,a,Math.cos(o),n)-t)*(u*Math.sqrt(u))*r,Math.abs(u)<1e-10)return o}return o}},function(t,e,n){var i=n(4);e.init=function(){},e.forward=function(t){for(var e=t.x,n=t.y,r=i(e-this.long0),o=n,s=Math.PI*Math.sin(n),a=0;;a++){var u=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=u,Math.abs(u)<1e-10)break}o/=2,Math.PI/2-Math.abs(n)<1e-10&&(r=0);var l=.900316316158*this.a*r*Math.cos(o)+this.x0,h=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=h,t},e.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=i(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=r,t.y=o,t},e.names=["Mollweide","moll"]},function(t,e,n){var i=n(30),r=n(31),o=n(32),s=n(33),a=n(21),u=n(34),l=n(4),h=n(35),c=n(62);e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i(this.es),this.e1=r(this.es),this.e2=o(this.es),this.e3=s(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=a(this.e,this.sinphi,this.cosphi),this.ml1=u(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=a(this.e,this.sinphi,this.cosphi),this.ml2=u(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=u(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},e.forward=function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=u(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*l(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},e.inverse=function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=l(this.long0+o/this.ns),i=h(this.g-n/this.a),t.x=r,t.y=i,t;var s=this.g-n/this.a;return i=c(s,this.e0,this.e1,this.e2,this.e3),r=l(this.long0+o/this.ns),t.x=r,t.y=i,t},e.names=["Equidistant_Conic","eqdc"]},function(t,e,n){var i=n(4),r=Math.PI/2,o=n(22);e.init=function(){this.R=this.a},e.forward=function(t){var e,n,s=t.x,a=t.y,u=i(s-this.long0);Math.abs(a)<=1e-10&&(e=this.x0+this.R*u,n=this.y0);var l=o(2*Math.abs(a/Math.PI));(Math.abs(u)<=1e-10||Math.abs(Math.abs(a)-r)<=1e-10)&&(e=this.x0,n=a>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var h=.5*Math.abs(Math.PI/u-u/Math.PI),c=h*h,f=Math.sin(l),p=Math.cos(l),d=p/(f+p-1),y=d*d,g=d*(2/f-1),v=g*g,m=Math.PI*this.R*(h*(d-v)+Math.sqrt(c*(d-v)*(d-v)-(v+c)*(y-v)))/(v+c);u<0&&(m=-m),e=this.x0+m;var _=c+d;return m=Math.PI*this.R*(g*_-h*Math.sqrt((v+c)*(c+1)-_*_))/(v+c),n=a>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},e.inverse=function(t){var e,n,r,o,s,a,u,l,h,c,f,p;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,s=(r=t.x/f)*r+(o=t.y/f)*o,f=3*(o*o/(l=-2*(a=-Math.abs(o)*(1+s))+1+2*o*o+s*s)+(2*(u=a-2*o*o+r*r)*u*u/l/l/l-9*a*u/l/l)/27)/(h=(a-u*u/3/l)/l)/(c=2*Math.sqrt(-h/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,n=t.y>=0?(-c*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-u/3/l)*Math.PI,e=Math.abs(r)<1e-10?this.long0:i(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-o*o)+s*s))/2/r),t.x=e,t.y=n,t},e.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},function(t,e,n){var i=n(4),r=Math.PI/2,o=n(34),s=n(30),a=n(31),u=n(32),l=n(33),h=n(61),c=n(22),f=n(62);e.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},e.forward=function(t){var e,n,c,f,p,d,y,g,v,m,_,b,x,w,S,P,C,T,O,E,L,M,I=t.x,N=t.y,A=Math.sin(t.y),R=Math.cos(t.y),k=i(I-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(r-N)*Math.sin(k),t.y=this.y0-this.a*(r-N)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(r+N)*Math.sin(k),t.y=this.y0+this.a*(r+N)*Math.cos(k),t):(T=this.sin_p12*A+this.cos_p12*R*Math.cos(k),C=(P=Math.acos(T))/Math.sin(P),t.x=this.x0+this.a*C*R*Math.sin(k),t.y=this.y0+this.a*C*(this.cos_p12*A-this.sin_p12*R*Math.cos(k)),t):(e=s(this.es),n=a(this.es),c=u(this.es),f=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*o(e,n,c,f,r),d=this.a*o(e,n,c,f,N),t.x=this.x0+(p-d)*Math.sin(k),t.y=this.y0-(p-d)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*o(e,n,c,f,r),d=this.a*o(e,n,c,f,N),t.x=this.x0+(p+d)*Math.sin(k),t.y=this.y0+(p+d)*Math.cos(k),t):(y=A/R,g=h(this.a,this.e,this.sin_p12),v=h(this.a,this.e,A),m=Math.atan((1-this.es)*y+this.es*g*this.sin_p12/(v*R)),O=0===(_=Math.atan2(Math.sin(k),this.cos_p12*Math.tan(m)-this.sin_p12*Math.cos(k)))?Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.abs(Math.abs(_)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(m)-this.sin_p12*Math.cos(m)):Math.asin(Math.sin(k)*Math.cos(m)/Math.sin(_)),b=this.e*this.sin_p12/Math.sqrt(1-this.es),P=g*O*(1-(E=O*O)*(S=(x=this.e*this.cos_p12*Math.cos(_)/Math.sqrt(1-this.es))*x)*(1-S)/6+(L=E*O)/8*(w=b*x)*(1-2*S)+(M=L*O)/120*(S*(4-7*S)-3*b*b*(1-7*S))-M*O/48*w),t.x=this.x0+P*Math.sin(_),t.y=this.y0+P*Math.cos(_),t))},e.inverse=function(t){var e,n,p,d,y,g,v,m,_,b,x,w,S,P,C,T,O,E,L,M,I,N;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*r*this.a)return;return n=e/this.a,p=Math.sin(n),d=Math.cos(n),y=this.long0,Math.abs(e)<=1e-10?g=this.lat0:(g=c(d*this.sin_p12+t.y*p*this.cos_p12/e),v=Math.abs(this.lat0)-r,y=Math.abs(v)<=1e-10?this.lat0>=0?i(this.long0+Math.atan2(t.x,-t.y)):i(this.long0-Math.atan2(-t.x,t.y)):i(this.long0+Math.atan2(t.x*p,e*this.cos_p12*d-t.y*this.sin_p12*p))),t.x=y,t.y=g,t}return m=s(this.es),_=a(this.es),b=u(this.es),x=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(w=this.a*o(m,_,b,x,r),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f((w-e)/this.a,m,_,b,x),y=i(this.long0+Math.atan2(t.x,-1*t.y)),t.x=y,t.y=g,t):Math.abs(this.sin_p12+1)<=1e-10?(w=this.a*o(m,_,b,x,r),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f((e-w)/this.a,m,_,b,x),y=i(this.long0+Math.atan2(t.x,t.y)),t.x=y,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),C=Math.atan2(t.x,t.y),S=h(this.a,this.e,this.sin_p12),T=Math.cos(C),E=-(O=this.e*this.cos_p12*T)*O/(1-this.es),L=3*this.es*(1-E)*this.sin_p12*this.cos_p12*T/(1-this.es),N=1-E*(I=(M=e/S)-E*(1+E)*Math.pow(M,3)/6-L*(1+3*E)*Math.pow(M,4)/24)*I/2-M*I*I*I/6,P=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*T),y=i(this.long0+Math.asin(Math.sin(C)*Math.sin(I)/Math.cos(P))),g=Math.atan((1-this.es*N*this.sin_p12/Math.sin(P))*Math.tan(P)/(1-this.es)),t.x=y,t.y=g,t)},e.names=["Azimuthal_Equidistant","aeqd"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TDTLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,url:"http://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],version:"1.0.0",tilematrixSet:"",tileSize:256,matrixIds:null,layer:"",attribution:""},initialize:function(t){if(t=t||{},window.L.setOptions(this,t),this.options.baseURL){var e=this.options.baseURL.split("gov.cn/")[1];this.options.baseURL.indexOf("?")>0&&(e=e.split("?")[0]),this.options.layerType=e.substring(0,e.length-7)}this.options.layer=this.options.isLabel&&this.layerLabelMap[this.options.layerType]?this.layerLabelMap[this.options.layerType]:this.options.layerType,"ter"===this.options.layerType?this.options.maxZoom=14:this.options.maxZoom=18,this._url=this.options.url,this.options.ip=this.options.ip?this.options.ip:"localhost",this.options.port=this.options.port?this.options.port:"6163",window.L.stamp(this)},onAdd:function(t){if(this._crs=this.options.crs||t.options.crs,this.options.tilematrixSet="EPSG:4326"===this._crs.code?"c":"w",this.options.layerType.indexOf("igs")>0){var e,n="http://{ip}:{port}/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?",i=this.options&&this.options.domain?this.options.domain:"";switch(""===i?(this.networkProtocol=void 0!==this.options.networkProtocol?this.options.networkProtocol:location.protocol.split(":")[0]||"http",n=this.networkProtocol+"://"+this.options.ip+":"+this.options.port+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?"):n=i+"/igs/rest/cts/tianditu/{layerType}/{x}/{y}/{z}?",this.options.layerType){case"vec_igs":e="vector";break;case"img_igs":e="raster";break;case"cva_igs":e="vectorAnno";break;case"cia_igs":e="rasterAnno";break;default:e="vector"}this._url=n.replace("{layerType}",e)}else this.options.baseURL?(this._url=this.options.baseURL,this.options.baseURL.indexOf("?")<0&&(this._url+="?")):this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet);window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e,n=this._getZoomForUrl(),i=this.options.matrixIds?this.options.matrixIds[n].identifier:n,r={};return this.options.layerType.indexOf("igs")>0?e=this._url.replace("{x}",t.x).replace("{y}",t.y).replace("{z}",i):(e=window.L.Util.template(this._url,{s:this._getSubdomain(t)}),r={request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:i,tilerow:t.y,tilecol:t.x}),this.options.token&&(r.tk=this.options.token),(e+="service=WMTS")+window.L.Util.getParamString(r,e)}}));e.TDTLayer=r,i.Zondy.Map.TDTLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaiduTileLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({style:{light:"light",visualization:"visualization",redalert:"redalert",grassgreen:"grassgreen",pink:"pink",bluish:"bluish",darkgreen:"darkgreen",grayscale:"grayscale",hardedge:"hardedge",midnight:"midnight",default:"pl"},url:"http://api2.map.bdimg.com/customimage/tile?&udt=20180601&scale=1&x={x}&y={y}&z={z}&ak={baidukey}&styles={styles}",options:{minZoom:3,maxZoom:18,subdomains:[0,1,2],errorTileUrl:"",zoomOffset:0,tms:!0,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,baidukey:"HmkUGKETQBkEcd6aj3udNZ3W5hKXmXSi",id:"dark",styles:"pl"},initialize:function(t){window.L.setOptions(this,t)},onAdd:function(t){window.L.TileLayer.prototype.onAdd.call(this,t)},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},getTileUrl:function(t){var e={s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl(),styles:this.options.styles,ak:this.options.baidukey};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return window.L.Util.template(this.url,window.L.Util.extend(e,this.options))}}));e.BaiduTileLayer=r,i.Zondy.Map.BaiduTileLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGISLayer=void 0;var i=n(0),r=(n(2),window.L.TileLayer.extend({options:{layerType:"NGS_Topo_US_2D",url:"http://services.arcgisonline.com/ArcGIS/rest/services/{layerType}/MapServer/tile/{z}/{y}/{x}.jpg",tileSize:256,f:"image",format:"png",dpi:96,transparent:!0,attribution:"ArcGIS",layers:""},initialize:function(t){t=t||{},window.L.setOptions(this,t),window.L.stamp(this)},onAdd:function(t){this._url=this.options.url,this.options.layerType&&this._url.indexOf("{layerType}/MapServer/tile/{z}/{y}/{x}")>0?this._url=this.options.url.replace("{layerType}",this.options.layerType):this._crs=this.options.crs||t.options.crs,window.L.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=null;if(this._url.indexOf("tile/{z}/{y}/{x}")>0){var n=this._getZoomForUrl();e=this._url.replace("{x}",t.x).replace("{y}",t.y).replace("{z}",n)}else{var i=this._tileCoordsToBounds(t),r=this._crs.project(i.getNorthWest()),o=this._crs.project(i.getSouthEast()),s={bbox:r.x+","+o.y+","+o.x+","+r.y,f:this.options.f,format:this.options.format,transparent:this.options.transparent,size:this.options.tileSize+","+this.options.tileSize,bboxsr:this._crs.code.split(":")[1],imagesr:this._crs.code.split(":")[1],dpi:96,layers:this.options.layers},a=window.L.Util.getParamString(s,e);a=a.slice(1,a.length),e=this._url+"/export?"+a}return e}}));e.ArcGISLayer=r,i.Zondy.Map.ArcGISLayer=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={VEC:"vec",IMG:"img",CVA:"cva",CIA:"cia",VEC_IGS:"vec_igs",IMG_IGS:"img_igs",CVA_IGS:"cva_igs",CIA_IGS:"cia_igs"};e.TiandituType=i,Zondy.Enum.Map.TiandituType=Zondy.Enum.TiandituType=i;var r={VEC:"vector",RASTER:"raster",ROAD:"road",TERRAIN:"terrain",VEC_IGS:"vector_igs",RASTER_IGS:"raster_igs",ROAD_IGS:"road_igs",TERRAIN_IGS:"terrain_igs"};e.GoogleLayerType=r,Zondy.Enum.Map.GoogleLayerType=Zondy.Enum.GoogleLayerType=r;var o={ImageryWorld2D:"ESRI_Imagery_World_2D",StreetMapWorld2D:"ESRI_StreetMap_World_2D",TopoUS2D:"NGS_Topo_US_2D",WorldImagery:"World_Imagery",WorldPhysical:"World_Physical_Map",WorldShadedRelief:"World_Shaded_Relief",WorldStreet:"World_Street_Map",WorldTerrainBase:"World_Terrain_Base",WorldTopo:"World_Topo_Map",NatGeoWorldMap:"NatGeo_World_Map",OceanBasemap:"Ocean_Basemap",USATopoMaps:"USA_Topo_Maps"};e.ArcGISLayerType=o,Zondy.Enum.Map.ArcGISLayerType=Zondy.Enum.ArcGISLayerType=o;var s={LandScape:"landscape",CYCLE:"cycle",CycleTransport:"transport",OSM:"openstreetmap",OSM_HYB:"hyb",OSM_Quest:"mapquest",OSM_Q_SAT:"OSM_sat"};e.OpenStreetLayerType=s,Zondy.Enum.Map.OpenStreetLayerType=Zondy.Enum.OpenStreetLayerType=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var i=n(0),r=n(1),o=function(t,e){this.ArcID=0;var n=void 0!==e?e:{};(0,r.extend)(this,n),this.Dots=void 0!==t&&null!==t?t:null};e.Arc=o,i.Zondy.Object.Arc=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttDataRow=void 0;var i=n(0),r=n(1),o=function(t,e,n){var i=void 0!==n?n:{};(0,r.extend)(this,i),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};e.CAttDataRow=o,i.Zondy.Object.CAttDataRow=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyle=void 0;var i=n(0),r=n(1),o=(n(110),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow});e.CDisplayStyle=o,i.Zondy.Object.CDisplayStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(18);n(7);var s=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.point=void 0!==t&&null!==t?t:null,o.radious=void 0!==n&&null!==n?n:null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Tangram),i(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){var e=t.getCenter(),n=t.getRadius();this.point=new r.Zondy.Object.Point2D(e[0],e[1]),this.radious=n}}},{key:"toString",value:function(){return null===this.point||0===this.point.length||null===this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),e}();e.Circle=s,r.Zondy.Object.Circle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolygon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(18),o=n(7),s=n(121);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.polygonArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Tangram),i(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){this.polygonArr=[];for(var e=t.getLinearRingCount(),n=t.getLinearRings(),i=0;i<e;i++){for(var r=n[i].getCoordinates(),a=r.length,u=[],l=0;l<a;l++)u[l]=new o.Point2D(r[l][0],r[l][1]);this.polygonArr[i]=new s.Polygon(u)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null===this.polygonArr||0===this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),e}();e.MultiPolygon=a,Zondy.Object.MultiPolygon=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyLine=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(18),o=n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.nearDis=void 0!==i.nearDis&&null!==i.nearDis?parseFloat(i.nearDis):null,r.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Tangram),i(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getCoordinates(),n=e.length,i=0;i<n;i++)this.pointArr[i]=new o.Point2D(e[i][0],e[i][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!==this.nearDis&&(t+=";"+this.nearDis),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),e}();e.PolyLine=s,Zondy.Object.PolyLine=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectCls=void 0;var i=n(0),r=n(1),o=n(5),s=(n(44),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.clsType=void 0!==e.clsType?e.clsType:o.VectClsType.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null});e.VectCls=s,i.Zondy.Object.VectCls=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=void 0;var i=n(122),r=n(123),o=n(125),s=n(126),a=n(127),u=n(261),l=n(262),h=n(124);e.ContourNoteParam=i.ContourNoteParam,e.ContourParam=r.ContourParam,e.ContourZValue=o.ContourZValue,e.ContourRegionInfo=s.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=u.NetAnalyse,e.NetAnalysisExtent=l.NetAnalysisExtent,e.SlopLineParam=h.SlopLineParam},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalyse=void 0;var i=n(0),r=n(1),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};e.NetAnalyse=o,i.Zondy.Object.NetAnalyse=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysisExtent=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=(n(1),n(10)),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.netClsUrl=void 0!==n.netClsUrl?n.netClsUrl:null,i.flagPosStr=void 0!==n.flagPosStr?n.flagPosStr:null,i.analyTp=void 0!==n.analyTp?n.analyTp:"UserMode",i.weight=void 0!==n.weight?n.weight:",Weight1,Weight1",i.outFormat=void 0!==n.outFormat?n.outFormat:"JSON",i.elementType=void 0!==n.elementType?n.elementType:2,i.nearDis=void 0!==n.nearDis?n.nearDis:.001,i.barrierPosStr=void 0!==n.barrierPosStr?n.barrierPosStr:null,i.roadName=void 0!==n.roadName?n.roadName:"name",i.baseUrl="igs/rest/netAnaly",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),i(e,[{key:"getNetInfo",value:function(t,e,n,i){null!=t&&void 0!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"addNetFlag",value:function(t,e,n,i,r){var o={};null!=i&&"POST"==i.toUpperCase()?(o.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var a=this.getFullUrl(),u=new s.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:e,processFailed:n}});null!=i&&"POST"==i.toUpperCase()?u.processAsync({method:"POST",data:JSON.stringify(o),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):u.processAsync()}},{key:"netAnalyse",value:function(t,e,n,i){this.partUrl="netAnalyse";var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,n,i){this.partUrl="comNetAnalyse";var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,n,i){this.partUrl="pluNetAnalyse";var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.NetAnalysisExtent=a,r.Zondy.Service.NetAnalysisExtent=a},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(264));window.Promise=i.default},function(t,e,n){"use strict";(function(i){var r,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,a){"object"===s(e)&&void 0!==t?t.exports=a():void 0===(o="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=o)}(0,function(){var t=setTimeout;function e(){}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void o(e.promise,t)}r(e.promise,i)}else(1===t._state?r:o)(e.promise,t._value)})):t._deferreds.push(e)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":s(e))||"function"==typeof e)){var n=e.then;if(e instanceof l)return t._state=3,t._value=e,void a(t);if("function"==typeof n)return void u(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,a(t)}catch(e){o(t,e)}}function o(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&l._immediateFn(function(){t._handled||l._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)n(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,r(e,t))},function(t){n||(n=!0,o(e,t))})}catch(t){if(n)return;n=!0,o(e,t)}}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}var h=l.prototype;return h.catch=function(t){return this.then(null,t)},h.then=function(t,i){var r=new this.constructor(e);return n(this,new function(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}(t,i,r)),r},l.all=function(t){return new l(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var r=i.length;function o(t,a){try{if(a&&("object"===(void 0===a?"undefined":s(a))||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){o(t,e)},n)}i[t]=a,0==--r&&e(i)}catch(t){n(t)}}for(var a=0;a<i.length;a++)o(a,i[a])})},l.resolve=function(t){return t&&"object"===(void 0===t?"undefined":s(t))&&t.constructor===l?t:new l(function(e){e(t)})},l.reject=function(t){return new l(function(e,n){n(t)})},l.race=function(t){return new l(function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)})},l._immediateFn="function"==typeof i&&function(t){i(t)}||function(e){t(e,0)},l._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},l})}).call(this,n(265).setImmediate)},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(266),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(132))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){h(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&h(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),i=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},i=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;i=function(e){var n=a.createElement("script");n.onreadystatechange=function(){h(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():i=function(t){setTimeout(h,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return o[r]=s,i(r),r++},u.clearImmediate=l}function l(t){delete o[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{l(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(132),n(70))},function(t,e,n){"use strict";!function(e){if(e.__disableNativeFetch||!e.fetch){a.prototype.append=function(t,e){t=o(t),e=s(e);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(e)},a.prototype.delete=function(t){delete this.map[o(t)]},a.prototype.get=function(t){var e=this.map[o(t)];return e?e[0]:null},a.prototype.getAll=function(t){return this.map[o(t)]||[]},a.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},a.prototype.set=function(t,e){this.map[o(t)]=[s(e)]},a.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){t.call(e,i,n,this)},this)},this)};var n={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var r=[301,302,303,307,308];d.redirect=function(t,e){if(-1===r.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},e.Headers=a,e.Request=f,e.Response=d,e.fetch=function(t,e){return new Promise(function(i,r){var o;o=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var s=new XMLHttpRequest;var u=!1;function l(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599){if(u)return;return u=!0,void r(new TypeError("Network request failed"))}var e={status:t,statusText:s.statusText,headers:function(t){var e=new a;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var n=t.trim().split(":"),i=n.shift().trim(),r=n.join(":").trim();e.append(i,r)}),e}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},n="response"in s?s.response:s.responseText;u||(u=!0,i(new d(n,e)))}}s.onreadystatechange=l,s.onload=l,s.onerror=function(){u||(u=!0,r(new TypeError("Network request failed")))},s.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in s&&n.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,void 0!==t&&t.exports&&(t.exports=e.fetch)}function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function h(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function c(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(n.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(n.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(h)},this.text=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return function(t,e){var n=new FileReader,i=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",r=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(r)||i.match(r),s=[t];return o&&s.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,s),l(n)}(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t,e){var n=(e=e||{}).body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=function(t){var e=t.toUpperCase();return i.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n,e)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function d(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof a?e.headers:new a(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:void 0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=void 0;var i=n(128),r=n(129),o=n(131),s=n(3),a=n(130);e.CommonServiceBase=i.CommonServiceBase,e.Events=r.Events,e.CORS=o.CORS,e.RequestTimeout=o.RequestTimeout,e.FetchRequest=o.FetchRequest,e.IgsServiceBase=s.IgsServiceBase,e.JSONFormat=a.JSONFormat},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=void 0;var i=n(270),r=n(133),o=n(271),s=n(23),a=n(272),u=n(273),l=n(274);e.ColorInfo=i.ColorInfo,e.GDBInfo=r.GDBInfo,e.MapDoc=o.MapDoc,e.CatalogService=s.CatalogService,e.TileLayer=a.TileLayer,e.VectorLayer=u.VectorLayer,e.SystomInfo=l.SystomInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInfo=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.SystemLibID=void 0!==n.SystemLibID?n.SystemLibID:0,i.ColorNO=void 0!==n.ColorNO?n.ColorNO:6,i.Red=void 0!==n.Red?n.Red:0,i.Green=void 0!==n.Green?n.Green:0,i.Blue=void 0!==n.Blue?n.Blue:0,i.addNew=void 0!==n.addNew&&n.addNew,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CatalogService),i(e,[{key:"getColorNO",value:function(t,e,n){var i=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(i.SystemLibID=t.SystemLibID),void 0!==t.Red&&(i.Red=t.Red),void 0!==t.Green&&(i.Green=t.Green),void 0!==t.Blue&&(i.Blue=t.Blue),void 0!==t.addNew&&(i.addNew=t.addNew)),i.partUrl="ColorLib/getColorNO?f=json&libID="+i.SystemLibID+"&r="+i.Red+"&g="+i.Green+"&b="+i.Blue+"&addNew="+i.addNew;var r=i.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getColorRGB",value:function(t,e,n){var i=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(i.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(i.ColorNO=t.ColorNO)),i.partUrl="ColorLib/getColorRGB?f=json&libID="+i.SystemLibID+"&colorNO="+i.ColorNO;var r=i.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.ColorInfo=s,Zondy.Catalog.ColorInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDoc=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(23),a=n(3);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.docName=void 0!==n.docName?n.docName:null,i.mapIndex=void 0!==n.mapIndex?n.mapIndex:0,i.layerID=void 0!==n.layerID?n.layerID:0,i.version=void 0!==n.version?n.version:2,i.include=void 0!==n.include?n.include:"{includeDetails:true,includeSubs:false}",i.returnFullStyle=void 0!==n.returnFullStyle&&n.returnFullStyle,i.guid=void 0!==n.guid?n.guid:(0,o.newGuid)(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.CatalogService),i(e,[{key:"getMapDocList",value:function(t,e){this.partUrl="docs?v="+this.version+"&f=json";var n=this.getFullUrl();new a.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,n,i,r){var s=this;if("boolean"==typeof r&&(s.returnFullStyle=r),"boolean"==typeof e||"boolean"==typeof n){var u={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof n&&n};s.include=(0,o.toJSON)(u)}s.partUrl="docs/"+s.docName+"?include="+s.include+"&returnFullStyle="+s.returnFullStyle+"&guid="+s.guid+"&f=json";var l=s.getFullUrl();new a.IgsServiceBase(l,{eventListeners:{scope:s,processCompleted:t,processFailed:i}}).processAsync()}},{key:"getMapInfo",value:function(t,e,n){var i=this;"boolean"==typeof e&&(i.returnFullStyle=e),i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var r=i.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:n}}).processAsync()}},{key:"getMapDocTree",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"?tree=true&guid="+n.guid+"&f=json";var i=n.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerID+"?returnFullStyle="+n.returnFullStyle+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers?f=json";var i=n.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/delete?layerIDs="+n.layerID+"&guid="+n.guid+"&f=json";var i=n.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,n){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers/add?guid="+i.guid+"&f=json";var r=i.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,n){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers/index?guid="+i.guid+"&f=json";var r=i.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,n,i){this.partUrl="legendInfo/"+this.docName+"?f=json&layerIndexes="+t+"&fields="+e;var r=this.getFullUrl();new a.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:n,processFailed:i}}).processAsync()}}]),e}();e.MapDoc=u,r.Zondy.Catalog.MapDoc=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.tileName=void 0!==n.tileName?n.tileName:null,i.version=void 0!==n.version?n.version:"2.0",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CatalogService),i(e,[{key:"getTileList",value:function(t,e){var n=this;n.partUrl="tiles?f=json",this.version&&("2.0"===n.version?n.partUrl+="&v=2":n.partUrl+="&v="+n.version);var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var n=this;n.partUrl="tiles/"+n.tileName+"?f=json",n.version&&(n.partUrl+="&v="+n.version);var i=n.getFullUrl();new o.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}]),e}();e.TileLayer=s,Zondy.Catalog.TileLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o=n(133),s=n(3),a=n(44);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{};return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GDBInfo),i(e,[{key:"getSfclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/sfcls?user="+n.User+"&psw="+n.Password+"&containAll="+this.containAll+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/acls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ocls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ncls?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/rds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0||"mapgislocalplus"===n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/sfcls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/acls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ocls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/ncls?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var n=this;n.serverName.toLowerCase().indexOf("mapgislocal")>=0?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.rcsName+"/rds?user="+n.User+"&psw="+n.Password+"&f=json";var i=n.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,n){var i=this;i.serverName.toLowerCase().indexOf("mapgislocal")>=0?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,n){var i=this;i.serverName.toLowerCase().indexOf("mapgislocal")>=0?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/"+t+"?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,n,i){this.partUrl="layerinfo?gdbpUrl="+t+"&f=json&encryptPassword="+i+"&proj="+this.proj;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,n){var i=this;if(null!==(t=null!==t?t:null)&&null!==i.serverName&&null!==i.gdbName){null!==i.User&&null!==i.Password?i.partUrl="datasource/"+i.User+":"+i.Password+"@":i.partUrl="datasource/",null===t.clsName&&(t.clsName=(0,r.newGuid)()),i.partUrl+=i.serverName+"/"+i.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null===t.attStruct&&(t.attStruct=new a.CAttStruct);var o=i.getFullUrl();new s.IgsServiceBase(o,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,n,i){var r=this;if(null!==r.serverName&&null!==r.gdbName&&null!==t&&null!==e){r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=r.getFullUrl();new s.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:n,processFailed:i}}).processAsync()}}}]),e}();e.VectorLayer=u,Zondy.Catalog.VectorLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(23),o=n(3);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.f=n.f||"json",i.page=n.page||0,i.pageCount=n.pageCount||20,i.systemLib=n.systemLib||null,i.type=n.type||null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CatalogService),i(e,[{key:"GetSystemLibrary",value:function(t,e){this.partUrl="systemlibraries?f="+this.f;var n=this.getFullUrl();new o.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetSymbol",value:function(t,e){var n=this,i="symbols?&systemLib="+n.systemLib+"&type="+n.type;n.f&&(i+="&f="+n.f),n.page&&(i+="&page="+n.page),n.size&&(i+="&size="+n.pageCount),n.partUrl=i;var r=n.getFullUrl();new o.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}]),e}();e.SystomInfo=s,Zondy.Catalog.SystomInfo=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditDocFeature=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(71),s=n(3);var a=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.docName=void 0!==t?t:null,o.mapIndex=0,o.layerIndex=void 0!==n?n:0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.EditServiceBase),i(e,[{key:"add",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/addFeatures?f="+i.f+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/updateFeatures?f="+i.f+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerIndex+"/deleteFeatures?f="+i.f+"&objectIds="+t+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}}}]),e}();e.EditDocFeature=a,r.Zondy.Service.EditDocFeature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditLayerFeature=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(71),s=n(3);var a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.gdbp=void 0!==t?t:null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.EditServiceBase),i(e,[{key:"add",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="layer/addFeatures?f="+i.f+"&gdbp="+i.gdbp+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="layer/updateFeatures?f="+i.f+"&gdbp="+i.gdbp+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,n){var i=this;if(void 0!==t){i.partUrl="layer/deleteFeatures?f="+i.f+"&objectIds="+t+"&gdbp="+i.gdbp+"&guid="+i.guid;var r=i.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:e,processFailed:n}}).processAsync()}}}]),e}();e.EditLayerFeature=a,r.Zondy.Service.EditLayerFeature=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQuery=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(36),s=n(137),a=n(3);var u=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.queryParam=t,s.mapName=n,s.mapIndex=0,s.layerIndex=i,s.baseUrl="igs/rest/extend/MultiGeo",s.partUrl="docs/"+s.mapName+"/"+s.mapIndex.toString()+"/"+s.layerIndex+"/Geoquery",s.partUrl+=t.getParameterURL(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.QueryServiceBase),i(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof s.MultiGeoQueryParameter){var n=null;"point"===this.queryParam.geometryType?n={pointArr:this.queryParam.geometry}:"line"===this.queryParam.geometryType?n={lineArr:this.queryParam.geometry}:"polygon"===this.queryParam.geometryType&&(n={PolygonObjs:this.queryParam.geometry});var i=this.getFullUrl();new a.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),e}();e.MultiGeoQuery=u,r.Zondy.Service.MultiGeoQuery=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQuery=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(36),s=n(138),a=n(3);var u=function(t){function e(t,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i||{},o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return o.queryParam=t,o.gdbp=n,o.baseUrl="igs/rest/extend/dxlcz",o.partUrl="objlayer/query?gdbp="+n,o.partUrl+=t.getParameterURL(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.QueryServiceBase),i(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof s.ObjClsQueryParameter){var n=this.getFullUrl();new a.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.ObjClsQuery=u,r.Zondy.Service.ObjClsQuery=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryLayerFeature=void 0;var i=n(0),r=n(36);var o=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.queryParam=t,r.partUrl="layer/query",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.QueryServiceBase),e}();e.QueryLayerFeature=o,i.Zondy.Service.QueryLayerFeature=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryUnifyParameter=void 0;var i=n(139),r=n(48),o=n(140),s=n(281);var a=e.QueryUnifyParameter=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.mix)(i.QueryByLayerParameter,r.QueryParameter,o.QueryDocFeature)),e}();e.default=a},function(t,e,n){"use strict";function i(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;u&&r(this,new u)}}catch(t){i=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}},o=!0,s=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var h=u.value;h&&r(i,h),h&&r(i.prototype,h.prototype)}}catch(t){s=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}return i}function r(t,e){var n=!0,i=!1,r=void 0;try{for(var o,s=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if("constructor"!==a&&"prototype"!==a&&"name"!==a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,u)}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}Object.defineProperty(e,"__esModule",{value:!0}),e.mix=i,e.copyProperties=r,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(24),o=n(134),s=n(11);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e.url;var n=this.url.split("http://");this._ip=n[1].split(":")[0];var i=n[1].split(":")[1].split("/");this._port=i[0],this.url.indexOf("igs/rest/mrfs/docs")>-1&&(this._mapId=i[i.length-1])}return i(t,null,[{key:"get",value:function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&200==i.status||304==i.status?e.call(this,i.responseText):4===i.readyState&&200!==i.status&&304!==i.status&&n.call(this,i.responseText)},i.send()}}]),t}();a.prototype.query=function(t,e,n){t=r.BaseParameter.formatParam(t);var i,a,u=Object.assign({},t),l=void 0,h=void 0,c=void 0,f=void 0,p=void 0;if("string"==typeof(f=u.layers)&&(f=f.split(",")),a=["layers","pagination","orderBy","spatialRelationType","EnableDisplayCondition","MustInside","CompareRectOnly","Intersect","IncludeGeometry","IncludeAttribute","IncludeWebGraphic"],Object.keys(u).forEach(function(t){switch(t){case"pagination":u.recordNumber=u.pagination;break;case"orderBy":u.orderField=u.orderBy;break;case"spatialRelationType":u.MustInside="MustInside"===u.spatialRelationType,u.Intersect="Intersect"===u.spatialRelationType;break;case"objectIds":u.objectIds=u.objectIds.join(",")}}),u.hasOwnProperty("geometry")&&u.geometry||u.hasOwnProperty("rectangle")&&u.rectangle.length>0)if(l=new o.QueryFeatureRule({EnableDisplayCondition:u.enableDisplayCondition,MustInside:u.MustInside,CompareRectOnly:u.compareRectOnly,Intersect:u.Intersect}),!u.hasOwnProperty("geometry")&&u.rectangle.length>0)c=new s.Rectangle(u.rectangle[0],u.rectangle[1],u.rectangle[2],u.rectangle[3]),delete u.rectangle;else if("Point"===u.geometry.type)c=new s.Point2D(u.geometry.coordinates[0],u.geometry.coordinates[1],{nearDis:"0.001"}),delete u.geometry;else if("LineString"===u.geometry.type||"Polygon"===u.geometry.type){for(var d=[],y=0;y<u.geometry.coordinates.length;y++)d.push(new s.Point2D(u.geometry.coordinates[y][0],u.geometry.coordinates[y][1]));switch(u.geometry.type){case"LineString":c=new s.PolyLine(d);break;case"Polygon":c=new s.Polygon(d)}delete u.geometry}else if("MultiPolygon"===u.geometry.type){for(var g=[],v=0;v<u.geometry.coordinates.length;v++){for(var m=[],_=u.geometry.coordinates[v],b=0;b<_.length;b++)m.push(new s.Point2D(_[b][0],_[b][1]));g.push(new s.Polygon(m))}c=new s.MultiPolygon(g),delete u.geometry}i=new o.QueryFeatureStruct({IncludeGeometry:u.IncludeGeometry,IncludeAttribute:u.IncludeAttribute,IncludeWebGraphic:u.IncludeWebGraphic});var x=new RegExp("^[0-9]+$");if(f.length<=0)throw new Error("");if(x.test(f[0]))h=new o.QueryParameter,p=new o.QueryDocFeature(h,this._mapId,f.join(","),{ip:this._ip,port:this._port});else{if(!("string"==typeof f[0]&&f[0].indexOf("gdbp")>-1))throw new Error("Idgdbp");h=new o.QueryByLayerParameter(f),p=new o.QueryLayerFeature(h,{ip:this._ip,port:this._port})}c&&(h.geometry=c,h.rule=l),h.struct=i;for(var w=Object.assign({},u),S=0;S<a.length;S++)w.hasOwnProperty(a[S])&&delete w[a[S]];(0,s.extend)(h,w),p.query(function(t){e&&e(t)},function(t){n&&n(t)})},a.prototype.add=function(t,e,n,i){var r=this;this.getFieldAtt(e,function(o){var s=r.getFeatureSet(o,t);r.getFeatureService(e).add(s,n,i)})},a.prototype.update=function(t,e,n,i){var r=this;this.getFieldAtt(e,function(o){var s=r.getFeatureSet(o,t);r.getFeatureService(e).update(s,n,i)})},a.prototype.delete=function(t,e,n,i){t=t.join(","),this.getFeatureService(e).deletes(t,n,i)},a.prototype.getFeatureSet=function(t,e){for(var n=[],i=t.FieldAtt.FldType,r=0;r<i.length;r++)n.push(i[r].substr(3,i[r].length).toLowerCase());t.FieldAtt.FldType=n;for(var o=new s.FeatureSet({AttStruct:new s.CAttStruct(t.FieldAtt)}),a=0;a<e.length;a++){for(var u=e[a].hasOwnProperty("geometry")&&e[a].geometry,l=void 0,h=void 0,c=void 0,f=[],p=0;p<t.FieldAtt.FldName.length;p++)e[a].attributes.hasOwnProperty(t.FieldAtt.FldName[p])?f.push(e[a].attributes[t.FieldAtt.FldName[p]]):f.push(null);var d=new s.Feature({AttValue:f}),y=void 0;if(u){var g=e[a].geometryType,v=void 0,m=void 0,_=void 0,b=void 0,x=void 0,w=void 0,S=void 0,P=void 0;switch(l=e[a].geometry,g){case"Point":h=[];for(var C=0;C<l.length;C++)x=new s.GPoint(l[C].coordinates[0],l[C].coordinates[1]),h.push(x);v=new s.FeatureGeometry({PntGeom:h}),y=1,e[a].style&&(_=new s.CPointInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:1,PntInfo:_}));break;case"LineString":h=[];for(var T=0;T<l.length;T++){w=[];for(var O=0;O<l[T].coordinates.length;O++)w.push(new s.Point2D(l[T].coordinates[O].x,l[T].coordinates[O].y));S=new Arc(w),b=new s.AnyLine([S]),c=new s.GLine(b),h.push(c)}v=new s.FeatureGeometry({LinGeom:h}),y=2,e[a].style&&(_=new s.CLineInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:2,LinInfo:_}));break;case"Polygon":h=[];for(var E=0;E<l.length;E++){b=[];for(var L=[],M=0;M<l[E].exterior.length;M++)L.push(new s.Point2D(l[E].exterior[M].x,l[E].exterior[M].y));b.push(new s.AnyLine([new Arc(L)]));for(var I=0;I<l[E].interior.length;I++){for(var N=[],A=0;A<l[E].interior[I].length;A++)N.push(new s.Point2D(l[E].interior[I][A].x,l[E].interior[I][A].y));b.push(new s.AnyLine([new Arc(N)]))}P=new s.GRegion(b),h.push(P)}v=new s.FeatureGeometry({RegGeom:h}),y=3,e[a].style&&(_=new s.CRegionInfo(e[a].style),m=new s.WebGraphicsInfo({InfoType:3,RegInfo:_}))}d.fGeom=v,d.GraphicInfo=m,d.ftype=y}e[a].FID&&d.setFID(e[a].FID),o.addFeature(d)}return o},a.prototype.getFeatureService=function(t){return t.indexOf("gdbp")>=0?new o.EditLayerFeature(t):new o.EditDocFeature(this._mapId,t,{ip:this._ip,port:this._port})},a.prototype.getFieldAtt=function(t,e){var n=this;t.indexOf("gdbp")>=0?this.getGDBPInfo(t,e):this.getLayerInfo(t,function(t){n.getGDBPInfo(t,e)})},a.prototype.getGDBPInfo=function(t,e){a.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/layerinfo?gdbpUrl="+t,function(t){t=JSON.parse(t),e(t)})},a.prototype.getLayerInfo=function(t,e){a.get("http://"+this._ip+":"+this._port+"/igs/rest/mrcs/docs/"+this._mapId+"/0/"+t+"?f=json",function(t){var n=(t=JSON.parse(t)).URL;e(n)})},e.FeatureService=a,s.Zondy.Service.FeatureService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SQLParameter=void 0;var i=n(24),r=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.where=void 0,(0,r.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.BaseParameter),e}();e.SQLParameter=o,r.Zondy.Service.SQLParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryParameter=void 0;var i=n(24),r=n(11),o=n(73),s=n(77),a=n(78);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.geometry=void 0,n.where=void 0,n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersect",(0,r.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.BaseParameter),e}();u.prototype.fromGeoJSON=function(t){if(t){switch(t.geometry.type){case"Point":this.geometry=new o.VPoint({coordinates:t.geometry.coordinates});break;case"LineString":this.geometry=new s.VPolyline({coordinates:t.geometry.coordinates});break;case"Polygon":this.geometry=new a.VPolygon({coordinates:t.geometry.coordinates[0]})}}},e.GeometryParameter=u,r.Zondy.Service.GeometryParameter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleParameter=void 0;var i=n(24),r=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.where=void 0,n.rectangle=[],n.compareRectOnly=!1,n.enableDisplayCondition=!1,n.spatialRelationType="Intersects",(0,r.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.BaseParameter),e}();e.RectangleParameter=o,r.Zondy.Service.RectangleParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectIdsParameter=void 0;var i=n(24),r=n(11);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.objectIds=[],(0,r.extend)(n,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.BaseParameter),e}();e.ObjectIdsParameter=o,r.Zondy.Service.ObjectIdsParameter=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VFeature=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(11),o=n(73),s=n(77),a=n(78);var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geometry=void 0,this.geometryType=void 0,this.attributes=void 0,this.style=void 0,this.FID=void 0,(0,r.extend)(this,e)}return i(t,null,[{key:"fromQueryResult",value:function(e){if(!e.hasOwnProperty("SFEleArray")||!e.hasOwnProperty("AttStruct")||e.hasOwnProperty("SFEleArray")&&!e.SFEleArray||e.hasOwnProperty("AttStruct")&&!e.AttStruct)return[];for(var n=e.SFEleArray,i=e.AttStruct,r=[],u=void 0,l=0;l<n.length;l++){for(var h={},c=[],f=void 0,p=0;p<n[l].AttValue.length;p++)""!==n[l].AttValue[p]&&(h[i.FldName[p]]=n[l].AttValue[p]);if(n[l].fGeom)switch(n[l].ftype){case 1:for(var d=n[l].fGeom.PntGeom,y=0;y<d.length;y++){var g=new o.VPoint({coordinates:[d[y].Dot.x,d[y].Dot.y]});c.push(g),f="Point"}break;case 2:for(var v=n[l].fGeom.LinGeom,m=0;m<v.length;m++){var _=new s.VPolyline({coordinates:v[m].Line.Arcs[0].Dots});c.push(_),f="LineString"}break;case 3:for(var b=n[l].fGeom.RegGeom,x=0;x<b.length;x++){var w=new a.VPolygon;w.exterior=b[x].Rings[0].Arcs[0].Dots;for(var S=1;S<b[x].Rings.length;S++)w.interior.push(b[x].Rings[S].Arcs[0].Dots);c.push(w),f="Polygon"}}var P=void 0;if(n[l].GraphicInfo){var C=n[l].GraphicInfo;switch(C.InfoType){case 1:P=C.PntInfo;break;case 2:P=C.LinInfo;break;case 3:P=C.RegInfo}}u=new t({attributes:h,FID:n[l].FID,geometry:c,geometryType:f,style:P}),r.push(u)}return r}},{key:"fromGeoJSON",value:function(e){var n=void 0,i=[];if(!e.hasOwnProperty("type"))throw new Error("geoJSON");if("Feature"===e.type)return n=new t({geometry:t.geometry,attributes:e.properties});if("FeatureCollection"===e.type){for(var r=e.features,o=void 0,s=void 0,u=void 0,l=0;l<r.length;l++){switch(o=[],u=r[l].geometry.coordinates,r[l].geometry.type){case"Point":o.push(r[l].geometry);break;case"LineString":s=[];for(var h=0;h<u.length;h++)s.push({x:Number(u[h][0]),y:Number(u[h][1])});r[l].geometry.coordinates=s,o.push(r[l].geometry);break;case"Polygon":for(var c=new a.VPolygon,f=0;f<u[0].length;f++)c.exterior.push({x:Number(u[0][f][0]),y:Number(u[0][f][1])});for(var p=1;p<u.length;p++){for(var d=[],y=0;y<u[p].length;y++)d.push({x:Number(u[p][y][0]),y:Number(u[p][y][1])});c.exterior.push(d)}o.push(c)}n=new t({geometry:o,attributes:r[l].properties,geometryType:r[l].geometry.type}),i.push(n)}return i}throw new Error("geoJSON")}},{key:"toAntTableData",value:function(e){for(var n=[],i=t.fromQueryResult(e),r=0;r<i.length;r++)n.push(Object.assign(i[r].attributes,{key:i[r].FID?i[r].FID:r}));return n}},{key:"resultToGeojson",value:function(e){var n=t.fromQueryResult(e),i=[];n=JSON.parse(JSON.stringify(n).replace(/attributes/g,"properties").replace(/geometryType/g,"type"));for(var r=void 0,o=0;o<n.length;o++)r=t.polygonToGeojson(n[o]),i=i.concat(r);return{type:"feature",features:i}}},{key:"polygonToGeojson",value:function(t){for(var e=void 0,n=[],i=t.geometry,r=t.properties,o=0;o<i.length;o++)e={},"Polygon"===i[o].type&&(i[o].coordinates=i[o].coordinates.concat(i[o].exterior,i[o].interior)),e.geometry=i[o],e.properties=r,n.push(e);return n}}]),t}();e.VFeature=u,r.Zondy.Service.VFeature=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=void 0;var i=n(14),r=n(79),o=n(289),s=n(290),a=n(49),u=n(291),l=n(292),h=n(293),c=n(294),f=n(80),p=n(295),d=n(296),y=n(297),g=n(81),v=n(298),m=n(299),_=n(82),b=n(300),x=n(301),w=n(302);e.AnalysisBase=i.AnalysisBase,e.ClassBufferBase=r.ClassBufferBase,e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=s.ClassBufferBySingleRing,e.ClipBase=a.ClipBase,e.ClipByCircle=u.ClipByCircle,e.ClipByLayer=l.ClipByLayer,e.ClipByPolygon=h.ClipByPolygon,e.ContourAnalyse=c.ContourAnalyse,e.FeatureBuffBase=f.FeatureBuffBase,e.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=d.FeatureBuffBySingleRing,e.NetAnalysis=y.NetAnalysis,e.OverlayBase=g.OverlayBase,e.OverlayByLayer=v.OverlayByLayer,e.OverlayByPolygon=m.OverlayByPolygon,e.ProjectBase=_.ProjectBase,e.ProjectByLayer=b.ProjectByLayer,e.ProjectBySRID=x.ProjectBySRID,e.FunctionWareService=w.FunctionWareService},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferByMultiplyRing=void 0;var i=n(0),r=n(79);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.flowID="600232",i.radiusStr=void 0!==n.radiusStr?n.radiusStr:"2,4,8,10",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ClassBufferBase),e}();e.ClassBufferByMultiplyRing=o,i.Zondy.Service.ClassBufferByMultiplyRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBySingleRing=void 0;var i=n(0),r=n(79);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.leftRad=void 0!==n.leftRad?n.leftRad:.001,i.rightRad=void 0!==n.rightRad?n.rightRad:.001,i.isByAtt=void 0===n.isByAtt||n.isByAtt,i.fldName=void 0!==n.fldName?n.fldName:null,i.dynPrjRad=void 0!==n.dynPrjRad?n.dynPrjRad:0,i.flowID="600231",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ClassBufferBase),e}();e.ClassBufferBySingleRing=o,i.Zondy.Service.ClassBufferBySingleRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByCircle=void 0;var i=n(0),r=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,i.center=void 0!==n.center?n.center:null,i.radius=void 0!==n.radius?n.radius:null,i.step=void 0!==n.step?n.step:.001,i.flowID="600229",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ClipBase),e}();e.ClipByCircle=o,i.Zondy.Service.ClipByCircle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByLayer=void 0;var i=n(0),r=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo1=void 0!==n.srcInfo1?n.srcInfo1:null,i.srcInfo2=void 0!==n.srcInfo2?n.srcInfo2:null,i.flowID="600230",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ClipBase),e}();e.ClipByLayer=o,i.Zondy.Service.ClipByLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByPolygon=void 0;var i=n(0),r=n(49);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo=void 0!==n.srcInfo?n.srcInfo:null,i.strPos=void 0!==n.strPos?n.strPos:null,i.flowID="600228",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ClipBase),e}();e.ClipByPolygon=o,i.Zondy.Service.ClipByPolygon=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourAnalyse=void 0;var i=n(0),r=(n(1),n(14));n(3),n(127),n(123);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.flowID="600320",i.linSfclsURL=void 0!==n.linSfclsURL?n.linSfclsURL:null,i.regSfclsURL=void 0!==n.regSfclsURL?n.regSfclsURL:null,i.annoClsURL=void 0!==n.annoClsURL?n.annoClsURL:null,i.meshingParam=void 0!==n.meshingParam?n.meshingParam:null,i.contourParam=void 0!==n.contourParam?n.contourParam:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.ContourAnalyse=o,i.Zondy.Service.ContourAnalyse=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffByMultiplyRing=void 0;var i=n(0),r=n(80);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.radiusStr=void 0!==n.radiusStr?n.radiusStr:"0.003,0.002,0.001",i.flowID="600239",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.FeatureBuffBase),e}();e.FeatureBuffByMultiplyRing=o,i.Zondy.Service.FeatureBuffByMultiplyRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBySingleRing=void 0;var i=n(0),r=n(80);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.leftRad=void 0!==n.leftRad?n.leftRad:.001,i.rightRad=void 0!==n.rightRad?n.rightRad:.001,i.flowID="600238",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.FeatureBuffBase),e}();e.FeatureBuffBySingleRing=o,i.Zondy.Service.FeatureBuffBySingleRing=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysis=void 0;var i=n(0),r=n(14),o=n(5);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.netClsUrl=void 0!==n.netClsUrl?n.netClsUrl:null,i.flagPosStr=void 0!==n.flagPosStr?n.flagPosStr:null,i.barrierPosStr=void 0!==n.barrierPosStr?n.barrierPosStr:null,i.analyType=void 0!==n.analyType?n.analyType:o.NetAnalyType.UserMode,i.weight=void 0!==n.weight?n.weight:",Weight1,Weight1",i.elementType=void 0!==n.elementType?n.elementType:o.NetElemType.Edge,i.nearDis=void 0!==n.nearDis?n.nearDis:.001,i.outFormat=void 0!==n.outFormat?n.outFormat:"json",i.flowID="600233",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.AnalysisBase),e}();e.NetAnalysis=s,i.Zondy.Service.NetAnalysis=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByLayer=void 0;var i=n(0),r=n(81);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.srcInfo2=void 0!==n.srcInfo2?n.srcInfo2:null,i.flowID="600227",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.OverlayBase),e}();e.OverlayByLayer=o,i.Zondy.Service.OverlayByLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByPolygon=void 0;var i=n(0),r=n(81);var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.strGRegionXML=void 0!==n.strGRegionXML?n.strGRegionXML:null,i.inFormat=void 0!==n.inFormat?n.inFormat:"json",i.flowID="600237",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.OverlayBase),e}();e.OverlayByPolygon=o,i.Zondy.Service.OverlayByPolygon=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectByLayer=void 0;var i=n(0),r=n(82),o=n(1);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{};(0,o.extend)(i,t);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.flowID="600235",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ProjectBase),e}();e.ProjectByLayer=s,i.Zondy.Service.ProjectByLayer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=void 0;var i=n(0),r=n(82),o=n(1);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{};(0,o.extend)(i,t);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.flowID="600234",r.srID=void 0!==i.srID?i.srID:32,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.ProjectBase),e}();e.ProjectBySRID=s,i.Zondy.Service.ProjectBySRID=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(14),s=n(3),a=n(1);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.guid=n.guid?n.guid:(0,a.newGuid)(),i.f=void 0!==n.f?n.f:"json",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.AnalysisBase),i(e,[{key:"executeWorkFlow",value:function(t,e,n,i,r,o){n||(n=!1);var a={};null!==o&&"POST"===o.toUpperCase()?(a.paraValues=e,this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+n+"&guid="+this.guid):this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+n+"&guid="+this.guid;var u=this.getFullUrl(),l=new s.IgsServiceBase(u,{eventListeners:{scope:this,processCompleted:i,processFailed:r}});null!==o&&"POST"===o.toUpperCase()?l.processAsync({method:"POST",data:JSON.stringify(a)}):l.processAsync()}},{key:"getInstanceMessage",value:function(t,e,n){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getInstanceOutPutValue",value:function(t,e,n,i){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:n,processFailed:i}}).processAsync()}},{key:"getInstanceResult",value:function(t,e,n){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getInstanceStatus",value:function(t,e,n){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getWorkFlowGroups",value:function(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfoByID",value:function(t,e,n){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getWorkFlowInfos",value:function(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfosByGroup",value:function(t,e,n){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}},{key:"getFolder1",value:function(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder2",value:function(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new s.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder3",value:function(t,e,n){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.FunctionWareService=u,r.Zondy.Service.FunctionWareService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=void 0;var i=n(304),r=n(305),o=n(83),s=n(85),a=n(84),u=n(20),l=n(306),h=n(307),c=n(308),f=n(309),p=n(310);e.CalArea=i.CalArea,e.CalPolyLineLength=r.CalPolyLineLength,e.CalServiceBase=o.CalServiceBase,e.CProjectBySRSID=s.CProjectBySRSID,e.CProjectParam=a.CProjectParam,e.GeometryAnalysisBase=u.GeometryAnalysisBase,e.ProjectDots=l.ProjectDots,e.ProjectRang=h.ProjectRang,e.Smooth=c.Smooth,e.TopAnalysis=f.TopAnalysis,e.CoordinateElpTrans=p.CoordinateElpTrans},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalArea=void 0;var i=n(0),r=n(83),o=n(1);n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{};(0,o.extend)(i,{dots:t});var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.partUrl="geomservice/calArea?f=json",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CalServiceBase),e}();e.CalArea=s,i.Zondy.Service.CalArea=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalPolyLineLength=void 0;var i=n(0),r=n(83),o=n(1);n(7);var s=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=n||{};(0,o.extend)(i,{dots:t});var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.partUrl="geomservice/calLength?f=json",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.CalServiceBase),e}();e.CalPolyLineLength=s,i.Zondy.Service.CalPolyLineLength=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectDots=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=(n(7),n(84),n(3));var a=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r||{},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return s.InputDots=t,s.SrcProjParam=n,s.DesProjParm=i,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var n={};n.InputDots=this.InputDots,n.SrcProjParam=this.SrcProjParam,n.DesProjParm=this.DesProjParm;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.ProjectDots=a,r.Zondy.Service.ProjectDots=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectRang=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.gdbsvrName=void 0!==n.gdbsvrName?n.gdbsvrName:"MapGISLocal",i.gdbName=void 0!==n.gdbName?n.gdbName:null,i.srefID=void 0!==n.srefID?n.srefID:0,i.desfID=void 0!==n.desfID?n.desfID:0,i.userName=void 0!==n.userName?n.userName:null,i.password=void 0!==n.password?n.password:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"execute",value:function(t,e,n){var i="";t&&(i=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null===this.userName||null===this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+i+"&userName="+this.userName+"&password="+this.password;var r=this.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync()}}]),e}();e.ProjectRang=a,r.Zondy.Service.ProjectRang=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=(n(7),n(3));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.type=void 0!==n.type?n.type:0,i.step=void 0!==n.step?n.step:1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,n){if(2==this.type){if(t.length<4)return void alert("Beizer")}else if(t.length<3)return void alert("");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var i=this.getFullUrl();new s.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:e,processFailed:n}}).processAsync({method:"POST",data:JSON.stringify(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.Smooth=a,r.Zondy.Service.Smooth=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=n(3),a=(n(67),n(68),n(69),n(1));var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.pnt=void 0!==n.pnt?n.pnt:null,i.line=void 0!==n.line?n.line:null,i.reg=void 0!==n.reg?n.reg:null,i.nearDis=void 0!==n.nearDis?n.nearDis:.01,i.relativeObj=void 0!==n.relativeObj?n.relativeObj:null,i.p_onSuccess=void 0!==n.p_onSuccess?n.p_onSuccess:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=(0,a.getTopAnalysisResult)(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(r=this).p_onSuccess=t;var n={};n.NearDis=this.nearDis,n.Pnt=this.pnt,n.Line=this.line,n.Reg=this.reg,n.RelativeObj=this.relativeObj,r.partUrl="geomservice/topanalysis?f=json";var i=r.getFullUrl(),r=this;new s.IgsServiceBase(i,{eventListeners:{scope:r,processCompleted:r.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:JSON.stringify(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.TopAnalysis=u,r.Zondy.Service.TopAnalysis=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(20),s=n(3);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.points=void 0!==n.points?n.points:"",i.dx=void 0!==n.dx?n.dx:"",i.dy=void 0!==n.dy?n.dy:"",i.dz=void 0!==n.dz?n.dz:"",i.m=void 0!==n.m?n.m:"",i.wx=void 0!==n.wx?n.wx:"",i.wy=void 0!==n.wy?n.wy:"",i.wz=void 0!==n.wz?n.wz:"",i.srcsrsname=void 0!==n.srcsrsname?n.srcsrsname:"",i.dessrsname=void 0!==n.dessrsname?n.dessrsname:"",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.GeometryAnalysisBase),i(e,[{key:"coordinateTrans",value:function(t,e,n){var i={};null!==n&&"POST"===n.toUpperCase()?(i.paraValues="",this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname):(i=this,this.partUrl="geomservice/transcoordinate");var r=this.getFullUrl(),o=new s.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}});null!==n&&"POST"===n.toUpperCase()?o.processAsync({method:"POST",data:JSON.stringify(i)}):o.processAsync()}}]),e}();e.CoordinateElpTrans=a,r.Zondy.Service.CoordinateTransform=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=void 0;var i=n(312),r=n(313),o=n(314),s=n(315),a=n(316),u=n(25);e.GetDocImageService=i.GetDocImageService,e.GetLayerImageService=r.GetLayerImageService,e.GetMapImageService=o.GetMapImageService,e.GetMapInfoService=s.GetMapInfoService,e.GetTileImageService=a.GetTileImageService,e.MapServiceBase=u.MapServiceBase},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetDocImageService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(25),s=(n(85),n(1));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.docName=void 0!==n.docName?n.docName:null,i.cache=void 0!==n.cache&&n.cache,i.cache?(i.level=void 0!==n.level?n.level:0,i.row=void 0!==n.row?n.row:0,i.col=void 0!==n.col?n.col:0,i.update=void 0!==n.update&&n.update):(i.layers=void 0!==n.layers?n.layers:null,i.style=void 0!==n.style?n.style:null,i.picType=void 0!==n.picType?n.picType:"gif",i.bbox=void 0!==n.bbox?n.bbox:null,i.filters=void 0!==n.filters?n.filters:null,i.picWidth=void 0!==n.picWidth?n.picWidth:512,i.picHeight=void 0!==n.picHeight?n.picHeight:512,i.proj=void 0!==n.proj?n.proj:null,i.guid=void 0!==n.guid?n.guid:(0,s.newGuid)()),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),i(e,[{key:"GetMapImage",value:function(){return this.docName?(!0===this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!==this.bbox&&(this.partUrl+="bbox="+this.bbox),null!==this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!==this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!==this.layers&&(this.partUrl+="&layers="+this.layers),null!==this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.proj&&(this.partUrl+="&proj="+JSON.stringify(this.proj)),null!==this.picType&&(this.partUrl+="&f="+this.picType),null!==this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),e}();e.GetDocImageService=a,r.Zondy.Service.GetDocImageService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetLayerImageService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(25);n(116);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.gdbps=void 0!==n.gdbps?n.gdbps:null,i.picType=void 0!==n.picType?n.picType:"gif",i.style=void 0!==n.style?n.style:null,i.bbox=void 0!==n.bbox?n.bbox:null,i.filters=void 0!==n.filters?n.filters:null,i.picWidth=void 0!==n.picWidth?n.picWidth:512,i.picHeight=void 0!==n.picHeight?n.picHeight:512,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),i(e,[{key:"GetLayerImage",value:function(){if(null!==this.gdbps&&null!==this.picWidth&&null!==this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");for(var t=this.gdbps.split(","),e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!==this.style&&(this.partUrl+="&style="+JSON.stringify(this.style)),null!==this.filters&&(this.partUrl+="&filters="+this.filters),null!==this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),e}();e.GetLayerImageService=s,r.Zondy.Service.GetLayerImageService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapImageService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(25),s=n(5);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.mapName=void 0!==n.mapName?n.mapName:null,i.mapType=void 0!==n.mapType?n.mapType:s.MapType.Doc,i.mapType===s.MapType.Tile?(i.level=void 0!==n.level?n.level:0,i.row=void 0!==n.row?n.row:0,i.col=void 0!==n.col?n.col:0):(i.picType=void 0!==n.picType?n.picType:"gif",i.picWidth=void 0!==n.picWidth?n.picWidth:512,i.picHeight=void 0!==n.picHeight?n.picHeight:512,i.xmin=void 0!==n.xmin?n.xmin:null,i.xmax=void 0!==n.xmax?n.xmax:null,i.ymin=void 0!==n.ymin?n.ymin:null,i.ymax=void 0!==n.ymax?n.ymax:null),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),i(e,[{key:"GetImage",value:function(){return this.mapName?(this.mapType===s.MapType.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!==this.xmin&&null!==this.xmax&&null!==this.ymin&&null!==this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),e}();e.GetMapImageService=a,r.Zondy.Service.GetMapImageService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapInfoService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(25),s=n(3),a=n(1);var u=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.mapName=void 0!==n.mapName?n.mapName:null,i.guid=void 0!==n.guid?n.guid:(0,a.newGuid)(),i.token=n.token,i.type=n.type,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),i(e,[{key:"GetMapInfo",value:function(t,e){var n=this;if(n.mapName){n.partUrl="info/"+this.mapName;var i=[];n.guid&&i.push("guid="+n.guid),this.token&&i.push("token="+n.token),this.type&&i.push("type="+n.type),i.length>0&&(n.partUrl+="?"+i.join("&"));var r=n.getFullUrl();new s.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}();e.GetMapInfoService=u,r.Zondy.Service.GetMapInfoService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTileImageService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(25);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.hdfName=void 0!==n.hdfName?n.hdfName:null,i.level=void 0!==n.level?n.level:0,i.row=void 0!==n.row?n.row:0,i.col=void 0!==n.col?n.col:0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.MapServiceBase),i(e,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),e}();e.GetTileImageService=s,r.Zondy.Service.GetTileImageService=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=void 0;var i=n(141),r=n(142),o=n(143),s=n(144),a=n(146),u=n(149),l=n(145),h=n(150),c=n(151),f=n(152),p=n(147),d=n(153),y=n(50),g=n(155),v=n(156),m=n(157),_=n(148),b=n(158),x=n(12),w=n(16),S=n(159),P=n(160),C=n(154),T=n(161),O=n(86),E=n(318),L=n(319),M=n(162);e.CAllOtherDataItemInfoSource=i.CAllOtherDataItemInfoSource,e.CAnnInfo=r.CAnnInfo,e.CChartLabelFormat=o.CChartLabelFormat,e.CChartTheme=s.CChartTheme,e.CChartThemeInfo=a.CChartThemeInfo,e.CChartThemeRepresentInfo=u.CChartThemeRepresentInfo,e.CChartType=l.CChartType,e.CDotDensityTheme=h.CDotDensityTheme,e.CFourColorTheme=c.CFourColorTheme,e.CGraduatedSymbolTheme=f.CGraduatedSymbolTheme,e.CLinInfo=p.CLinInfo,e.CMultiClassTheme=d.CMultiClassTheme,e.CPntInfo=y.CPntInfo,e.CRandomTheme=g.CRandomTheme,e.CRangeTheme=v.CRangeTheme,e.CRangeThemeInfo=m.CRangeThemeInfo,e.CRegInfo=_.CRegInfo,e.CSimpleTheme=b.CSimpleTheme,e.CTheme=x.CTheme,e.CThemeInfo=w.CThemeInfo,e.CUniqueTheme=S.CUniqueTheme,e.CUniqueThemeInfo=P.CUniqueThemeInfo,e.ExpInfo=C.ExpInfo,e.FolderInfo=T.FolderInfo,e.FolderInfoAttribute=O.FolderInfoAttribute,e.ItemValue=E.ItemValue,e.ThemeOper=L.ThemeOper,e.ThemesInfo=M.ThemesInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemValue=void 0;var i=n(0),r=n(1),o=n(5),s=function(t,e,n,i){var s=void 0!==i?i:{};(0,r.extend)(this,s),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==n?n:o.CItemType.RangeTheme};e.ItemValue=s,i.Zondy.Object.Theme.ItemValue=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeOper=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(10),s=n(1),a=n(3),u=n(153),l=n(158),h=n(144),c=n(152),f=n(150),p=n(155),d=n(151),y=n(159),g=n(156),v=n(86),m=n(161),_=n(162);var b=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n||{}).baseUrl="igs/rest/theme";var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.guid=null!==t?t:(0,s.newGuid)(),i.p_onSuccess=void 0!==n.p_onSuccess?n.p_onSuccess:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),i(e,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new m.FolderInfo;if((0,s.extendDeep)(e,t.result||t),null!==e&&null!==e.attribute&&e.attribute.length>0){for(var n=[],i=null,r=0;r<e.attribute.length;r++)if(n[r]=new _.ThemesInfo,null!==e.attribute[r]&&(n[r].LayerName=e.attribute[r].name,null!==(i=JSON.parse(e.attribute[r].value))&&i.length>0)){n[r].ThemeArr=[];for(var o=0;o<i.length;o++){switch(i[o].name){case"CMultiClassTheme":n[r].ThemeArr[o]=new u.CMultiClassTheme;break;case"CSimpleTheme":n[r].ThemeArr[o]=new l.CSimpleTheme;break;case"CChartTheme":n[r].ThemeArr[o]=new h.CChartTheme;break;case"CGraduatedSymbolTheme":n[r].ThemeArr[o]=new c.CGraduatedSymbolTheme;break;case"CDotDensityTheme":n[r].ThemeArr[o]=new f.CDotDensityTheme;break;case"CRandomTheme":n[r].ThemeArr[o]=new p.CRandomTheme;break;case"CFourColorTheme":n[r].ThemeArr[o]=new d.CFourColorTheme;break;case"CUniqueTheme":n[r].ThemeArr[o]=new y.CUniqueTheme;break;case"CRangeTheme":n[r].ThemeArr[o]=new g.CRangeTheme}(0,s.extendDeep)(n[r].ThemeArr[o],JSON.parse(i[o].value))}}null!==this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(n)}}},{key:"getThemesInfo",value:function(t,e,n,i){var r=this;r.p_onSuccess=n;var o=Math.random();r.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+r.guid;var s=r.getFullUrl();new a.IgsServiceBase(s,{eventListeners:{scope:r,processCompleted:r.onGetThemesInfoSuccess,processFailed:i}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,n,i){var r=Math.random();this.partUrl=t+"/remove?idxArr="+e+"&r="+r+"&guid="+this.guid;var o=this.getFullUrl();new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:n,processFailed:i}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,n,i,r){Math.random();this.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var o=this.getFullUrl(),s=new m.FolderInfo;if(null!==n&&n.length>0){s.name="ThemeInfo",s.attribute=[];for(var u=0;u<n.length;u++)if(s.attribute[u]=new v.FolderInfoAttribute,s.attribute[u].name=n[u].LayerName,null!==n[u].ThemeArr&&n[u].ThemeArr.length>0){for(var l=[],h=0;h<n[u].ThemeArr.length;h++)null!==n[u].ThemeArr[h]&&(l[h]=new v.FolderInfoAttribute(n[u].ThemeArr[h].Type,JSON.stringify(n[u].ThemeArr[h])));s.attribute[u].value=JSON.stringify(l)}}new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:i,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,n,i,r){Math.random();this.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var o=this.getFullUrl(),s=new m.FolderInfo;if(null!==n&&n.length>0){s.name="ThemeInfo",s.attribute=[];for(var u=0;u<n.length;u++)if(s.attribute[u]=new v.FolderInfoAttribute,s.attribute[u].name=n[u].LayerName,null!==n[u].ThemeArr&&n[u].ThemeArr.length>0){for(var l=[],h=0;h<n[u].ThemeArr.length;h++)null!==n[u].ThemeArr[h]&&(l[h]=new v.FolderInfoAttribute(n[u].ThemeArr[h].Type,JSON.stringify(n[u].ThemeArr[h])));s.attribute[u].value=JSON.stringify(l)}}new a.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:i,processFailed:r}}).processAsync({method:"POST",data:JSON.stringify(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}();e.ThemeOper=b,r.Zondy.Service.ThemeOper=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4610=e.EPSG4490=e.EPSG4214=void 0;var i=n(321),r=n(322),o=n(323);e.EPSG4214=i.EPSG4214,e.EPSG4490=r.EPSG4490,e.EPSG4610=o.EPSG4610},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4214=void 0;var i=n(0),r=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4214=window.Zondy.Proj.CRS("EPSG:4214",{def:"+proj=longlat +ellps=krass +towgs84=15.8,-154.4,-82.3,0,0,0,0 +no_defs",origin:[-180,90],resolutions:o,bounds:r.default.bounds([-180,-90],[180,90])});i.Zondy.CRS.EPSG4214=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4490=void 0;var i=n(0),r=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4490=window.Zondy.Proj.CRS("EPSG:4490",{def:"+proj=longlat +ellps=GRS80 +units=degrees +no_defs",origin:[-180,90],resolutions:o,bounds:r.default.bounds([-180,-90],[180,90])});i.Zondy.CRS.EPSG4490=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EPSG4610=void 0;var i=n(0),r=(n(41),function(t){return t&&t.__esModule?t:{default:t}}(n(2)));for(var o=[],s=1;s<19;s++)o.push(1.40625/Math.pow(2,s));var a=e.EPSG4610=window.Zondy.Proj.CRS("EPSG:4610",{def:"+proj=longlat +a=6378140 +b=6356755.288157528 +units=degrees +no_defs",origin:[-180,90],resolutions:o,bounds:r.default.bounds([-180,-90],[180,90])});i.Zondy.CRS.EPSG4610=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMSInfo=e.OGCWMTSInfo=e.WMTSCapabilities=e.WMSCapabilities=void 0;var i=n(325),r=n(328),o=n(333),s=n(351);e.WMSCapabilities=i.WMSCapabilities,e.WMTSCapabilities=r.WMTSCapabilities,e.OGCWMTSInfo=o.OGCWMTSInfo,e.OGCWMSInfo=s.OGCWMSInfo},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WMSCapabilities=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(87),s=function(t){return t&&t.__esModule?t:{default:t}}(n(88)),a=n(89),u=n(37);var l=[null,"http://www.opengis.net/wms"],h=(0,u.makeStructureNS)(l,{Service:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},p,t,e)}),Capability:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},c,t,e)})}),c=(0,u.makeStructureNS)(l,{Request:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},x,t,e)}),Exception:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)([],v,t,e)}),Layer:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},m,t,e)})}),f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.version=void 0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){this.version=t.getAttribute("version").trim();var e=(0,u.pushParseAndPop)({version:this.version},h,t,[]);return e||null}}]),e}(),p=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),KeywordList:(0,u.makeObjectPropertySetter)(I),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref),ContactInformation:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},d,t,e)}),Fees:(0,u.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,u.makeObjectPropertySetter)(a.readString),LayerLimit:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxWidth:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger),MaxHeight:(0,u.makeObjectPropertySetter)(a.readNonNegativeInteger)}),d=(0,u.makeStructureNS)(l,{ContactPersonPrimary:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},y,t,e)}),ContactPosition:(0,u.makeObjectPropertySetter)(a.readString),ContactAddress:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},g,t,e)}),ContactVoiceTelephone:(0,u.makeObjectPropertySetter)(a.readString),ContactFacsimileTelephone:(0,u.makeObjectPropertySetter)(a.readString),ContactElectronicMailAddress:(0,u.makeObjectPropertySetter)(a.readString)}),y=(0,u.makeStructureNS)(l,{ContactPerson:(0,u.makeObjectPropertySetter)(a.readString),ContactOrganization:(0,u.makeObjectPropertySetter)(a.readString)}),g=(0,u.makeStructureNS)(l,{AddressType:(0,u.makeObjectPropertySetter)(a.readString),Address:(0,u.makeObjectPropertySetter)(a.readString),City:(0,u.makeObjectPropertySetter)(a.readString),StateOrProvince:(0,u.makeObjectPropertySetter)(a.readString),PostCode:(0,u.makeObjectPropertySetter)(a.readString),Country:(0,u.makeObjectPropertySetter)(a.readString)}),v=(0,u.makeStructureNS)(l,{Format:(0,u.makeArrayPusher)(a.readString)}),m=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),KeywordList:(0,u.makeObjectPropertySetter)(I),SRS:(0,u.makeObjectPropertyPusher)(a.readString),EX_GeographicBoundingBox:(0,u.makeObjectPropertySetter)(function(t,e){var n=(0,u.pushParseAndPop)({},b,t,e);if(!n)return;var i=n.westBoundLongitude,r=n.southBoundLatitude,o=n.eastBoundLongitude,s=n.northBoundLatitude;if(void 0===i||void 0===r||void 0===o||void 0===s)return;return[i,r,o,s]}),BoundingBox:(0,u.makeObjectPropertyPusher)(function(t,e){var n=[(0,a.readDecimalString)(t.getAttribute("minx")),(0,a.readDecimalString)(t.getAttribute("miny")),(0,a.readDecimalString)(t.getAttribute("maxx")),(0,a.readDecimalString)(t.getAttribute("maxy"))],i=[(0,a.readDecimalString)(t.getAttribute("resx")),(0,a.readDecimalString)(t.getAttribute("resy"))];return{srs:t.getAttribute("SRS"),extent:n,res:i}}),Dimension:(0,u.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:(0,a.readBooleanString)(t.getAttribute("multipleValues")),nearestValue:(0,a.readBooleanString)(t.getAttribute("nearestValue")),current:(0,a.readBooleanString)(t.getAttribute("current")),values:(0,a.readString)(t)}}),Attribution:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},_,t,e)}),AuthorityURL:(0,u.makeObjectPropertyPusher)(function(t,e){var n=E(t,e);if(n)return n.name=t.getAttribute("name"),n;return}),Identifier:(0,u.makeObjectPropertyPusher)(a.readString),MetadataURL:(0,u.makeObjectPropertyPusher)(function(t,e){var n=E(t,e);if(n)return n.type=t.getAttribute("type"),n;return}),DataURL:(0,u.makeObjectPropertyPusher)(E),FeatureListURL:(0,u.makeObjectPropertyPusher)(E),Style:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},C,t,e)}),MinScaleDenominator:(0,u.makeObjectPropertySetter)(a.readDecimal),MaxScaleDenominator:(0,u.makeObjectPropertySetter)(a.readDecimal),Layer:(0,u.makeObjectPropertyPusher)(function(t,e){var n=e[e.length-1],i=(0,u.pushParseAndPop)({},m,t,e);if(!i)return;var r=(0,a.readBooleanString)(t.getAttribute("queryable"));void 0===r&&(r=n.queryable);i.queryable=void 0!==r&&r;var o=(0,a.readNonNegativeIntegerString)(t.getAttribute("cascaded"));void 0===o&&(o=n.cascaded);i.cascaded=o;var s=(0,a.readBooleanString)(t.getAttribute("opaque"));void 0===s&&(s=n.opaque);i.opaque=void 0!==s&&s;var l=(0,a.readBooleanString)(t.getAttribute("noSubsets"));void 0===l&&(l=n.noSubsets);i.noSubsets=void 0!==l&&l;var h=(0,a.readDecimalString)(t.getAttribute("fixedWidth"));h||(h=n.fixedWidth);i.fixedWidth=h;var c=(0,a.readDecimalString)(t.getAttribute("fixedHeight"));c||(c=n.fixedHeight);i.fixedHeight=c,["Style","SRS","AuthorityURL"].forEach(function(t){if(t in n){var e=i[t]||[];i[t]=e.concat(n[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in i)){var e=n[t];i[t]=e}}),i})}),_=(0,u.makeStructureNS)(l,{Title:(0,u.makeObjectPropertySetter)(a.readString),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref),LogoURL:(0,u.makeObjectPropertySetter)(M)}),b=(0,u.makeStructureNS)(l,{westBoundLongitude:(0,u.makeObjectPropertySetter)(a.readDecimal),eastBoundLongitude:(0,u.makeObjectPropertySetter)(a.readDecimal),southBoundLatitude:(0,u.makeObjectPropertySetter)(a.readDecimal),northBoundLatitude:(0,u.makeObjectPropertySetter)(a.readDecimal)}),x=(0,u.makeStructureNS)(l,{GetCapabilities:(0,u.makeObjectPropertySetter)(L),GetMap:(0,u.makeObjectPropertySetter)(L),GetFeatureInfo:(0,u.makeObjectPropertySetter)(L)}),w=(0,u.makeStructureNS)(l,{Format:(0,u.makeObjectPropertyPusher)(a.readString),DCPType:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,u.pushParseAndPop)({},S,t,e)})}),S=(0,u.makeStructureNS)(l,{HTTP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},P,t,e)})}),P=(0,u.makeStructureNS)(l,{Get:(0,u.makeObjectPropertySetter)(E),Post:(0,u.makeObjectPropertySetter)(E)}),C=(0,u.makeStructureNS)(l,{Name:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),Abstract:(0,u.makeObjectPropertySetter)(a.readString),LegendURL:(0,u.makeObjectPropertyPusher)(M),StyleSheetURL:(0,u.makeObjectPropertySetter)(E),StyleURL:(0,u.makeObjectPropertySetter)(E)}),T=(0,u.makeStructureNS)(l,{Format:(0,u.makeObjectPropertySetter)(a.readString),OnlineResource:(0,u.makeObjectPropertySetter)(o.readHref)}),O=(0,u.makeStructureNS)(l,{Keyword:(0,u.makeArrayPusher)(a.readString)});function E(t,e){return(0,u.pushParseAndPop)({},T,t,e)}function L(t,e){return(0,u.pushParseAndPop)({},w,t,e)}function M(t,e){var n=E(t,e);if(n){var i=[(0,a.readNonNegativeIntegerString)(t.getAttribute("width")),(0,a.readNonNegativeIntegerString)(t.getAttribute("height"))];return n.size=i,n}}function I(t,e){return(0,u.pushParseAndPop)([],O,t,e)}e.WMSCapabilities=f,r.Zondy.Format.WMSCapabilities=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSorted=e.findIndex=e.stableSort=e.equals=e.find=e.remove=e.extend=e.reverseSubArray=e.linearFindNearest=e.includes=e.numberSafeCompareFunction=e.binarySearch=void 0;var i=n(0),r=function(t,e,n){for(var i=void 0,r=void 0,s=n||o,a=0,u=t.length,l=!1;a<u;)(r=+s(t[i=a+(u-a>>1)],e))<0?a=i+1:(u=i,l=!r);return l?a:~a},o=function(t,e){return t>e?1:t<e?-1:0},s=function(t,e){return t.indexOf(e)>=0},a=function(t,e,n){var i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;var r=void 0;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1},u=function(t,e,n){for(;e<n;){var i=t[e];t[e]=t[n],t[n]=i,++e,--n}},l=function(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]},h=function(t,e){var n=t.indexOf(e),i=n>-1;return i&&t.splice(n,1),i},c=function(t,e){for(var n=t.length>>>0,i=void 0,r=0;r<n;r++)if(e(i=t[r],r,t))return i;return null},f=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0},p=function(t,e){var n=t.length,i=Array(t.length),r=void 0;for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort(function(t,n){return e(t.value,n.value)||t.index-n.index}),r=0;r<t.length;r++)t[r]=i[r].value},d=function(t,e){var n=void 0;return!t.every(function(i,r){return n=r,!e(i,r,t)})?n:-1},y=function(t,e,n){var i=e||o;return t.every(function(e,r){if(0===r)return!0;var o=i(t[r-1],e);return!(o>0||n&&0===o)})};e.binarySearch=r,e.numberSafeCompareFunction=o,e.includes=s,e.linearFindNearest=a,e.reverseSubArray=u,e.extend=l,e.remove=h,e.find=c,e.equals=f,e.stableSort=p,e.findIndex=d,e.isSorted=y,i.Zondy.array.binarySearch=r,i.Zondy.array.numberSafeCompareFunction=o,i.Zondy.array.includes=s,i.Zondy.array.linearFindNearest=a,i.Zondy.array.reverseSubArray=u,i.Zondy.array.extend=l,i.Zondy.array.remove=h,i.Zondy.array.find=c,i.Zondy.array.equals=f,i.Zondy.array.stableSort=p,i.Zondy.array.findIndex=d,i.Zondy.array.isSorted=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareVersions=e.padNumber=void 0;var i=n(0),r=function(t,e,n){var i=void 0!==n?t.toFixed(n):""+t,r=i.indexOf(".");return(r=-1===r?i.length:r)>e?i:new Array(1+e-r).join("0")+i},o=function(t,e){for(var n=(""+t).split("."),i=(""+e).split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||"0",10),s=parseInt(i[r]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0};e.padNumber=r,e.compareVersions=o,i.Zondy.string.padNumber=r,i.Zondy.string.compareVersions=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WMTSCapabilities=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(329),s=c(n(332)),a=n(87),u=c(n(88)),l=n(89),h=n(37);function c(t){return t&&t.__esModule?t:{default:t}}var f=[null,"http://www.opengis.net/wmts/1.0"],p=[null,"http://www.opengis.net/ows/1.1"],d=(0,h.makeStructureNS)(f,{Contents:(0,h.makeObjectPropertySetter)(function(t,e){return(0,h.pushParseAndPop)({},g,t,e)})}),y=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.owsParser_=new s.default,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),i(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=t.getAttribute("version").trim(),n=this.owsParser_.readFromNode(t);return n?(n.version=e,(n=(0,h.pushParseAndPop)(n,d,t,[]))||null):null}}]),e}(),g=(0,h.makeStructureNS)(f,{Layer:(0,h.makeObjectPropertyPusher)(function(t,e){return(0,h.pushParseAndPop)({},v,t,e)}),TileMatrixSet:(0,h.makeObjectPropertyPusher)(function(t,e){return(0,h.pushParseAndPop)({},P,t,e)})}),v=(0,h.makeStructureNS)(f,{Style:(0,h.makeObjectPropertyPusher)(function(t,e){var n=(0,h.pushParseAndPop)({},m,t,e);if(!n)return;var i="true"===t.getAttribute("isDefault");return n.isDefault=i,n}),Format:(0,h.makeObjectPropertyPusher)(l.readString),TileMatrixSetLink:(0,h.makeObjectPropertyPusher)(function(t,e){return(0,h.pushParseAndPop)({},_,t,e)}),Dimension:(0,h.makeObjectPropertyPusher)(function(t,e){return(0,h.pushParseAndPop)({},w,t,e)}),ResourceURL:(0,h.makeObjectPropertyPusher)(function(t,e){var n=t.getAttribute("format"),i=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};n&&(o.format=n);i&&(o.template=i);r&&(o.resourceType=r);return o})},(0,h.makeStructureNS)(p,{Title:(0,h.makeObjectPropertySetter)(l.readString),Abstract:(0,h.makeObjectPropertySetter)(l.readString),BoundingBox:(0,h.makeObjectPropertySetter)(T),WGS84BoundingBox:(0,h.makeObjectPropertySetter)(T),Identifier:(0,h.makeObjectPropertySetter)(l.readString)})),m=(0,h.makeStructureNS)(f,{LegendURL:(0,h.makeObjectPropertyPusher)(function(t,e){var n={};return n.format=t.getAttribute("format"),n.href=(0,a.readHref)(t),n})},(0,h.makeStructureNS)(p,{Title:(0,h.makeObjectPropertySetter)(l.readString),Identifier:(0,h.makeObjectPropertySetter)(l.readString)})),_=(0,h.makeStructureNS)(f,{TileMatrixSet:(0,h.makeObjectPropertySetter)(l.readString),TileMatrixSetLimits:(0,h.makeObjectPropertySetter)(function(t,e){return(0,h.pushParseAndPop)([],b,t,e)})}),b=(0,h.makeStructureNS)(f,{TileMatrixLimits:(0,h.makeArrayPusher)(function(t,e){return(0,h.pushParseAndPop)({},x,t,e)})}),x=(0,h.makeStructureNS)(f,{TileMatrix:(0,h.makeObjectPropertySetter)(l.readString),MinTileRow:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),MaxTileRow:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),MinTileCol:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),MaxTileCol:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger)}),w=(0,h.makeStructureNS)(f,{Default:(0,h.makeObjectPropertySetter)(l.readString),Value:(0,h.makeObjectPropertyPusher)(l.readString)},(0,h.makeStructureNS)(p,{Identifier:(0,h.makeObjectPropertySetter)(l.readString)})),S=(0,h.makeStructureNS)(p,{LowerCorner:(0,h.makeArrayPusher)(O),UpperCorner:(0,h.makeArrayPusher)(O)}),P=(0,h.makeStructureNS)(f,{WellKnownScaleSet:(0,h.makeObjectPropertySetter)(l.readString),TileMatrix:(0,h.makeObjectPropertyPusher)(function(t,e){return(0,h.pushParseAndPop)({},C,t,e)})},(0,h.makeStructureNS)(p,{SupportedCRS:(0,h.makeObjectPropertySetter)(l.readString),Identifier:(0,h.makeObjectPropertySetter)(l.readString)})),C=(0,h.makeStructureNS)(f,{TopLeftCorner:(0,h.makeObjectPropertySetter)(O),ScaleDenominator:(0,h.makeObjectPropertySetter)(l.readDecimal),TileWidth:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),TileHeight:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),MatrixWidth:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger),MatrixHeight:(0,h.makeObjectPropertySetter)(l.readNonNegativeInteger)},(0,h.makeStructureNS)(p,{Identifier:(0,h.makeObjectPropertySetter)(l.readString)}));function T(t,e){var n=(0,h.pushParseAndPop)([],S,t,e);if(2==n.length)return(0,o.boundingExtent)(n)}function O(t,e){var n=(0,l.readString)(t).split(/\s+/);if(n&&2==n.length){var i=+n[0],r=+n[1];if(!isNaN(i)&&!isNaN(r))return[i,r]}}e.WMTSCapabilities=y,r.Zondy.Format.WMTSCapabilities=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyTransform=e.intersectsSegment=e.scaleFromCenter=e.returnOrUpdate=e.isEmpty=e.intersects=e.getWidth=e.getTopRight=e.getTopLeft=e.getSize=e.getMargin=e.getIntersection=e.getIntersectionArea=e.getHeight=e.getForViewAndSize=e.getEnlargedArea=e.getCorner=e.getCenter=e.getBottomRight=e.getBottomLeft=e.getArea=e.forEachCorner=e.extendXY=e.extendRings=e.extendFlatCoordinates=e.extendCoordinates=e.extendCoordinate=e.extend=e.equals=e.createOrUpdateFromRings=e.createOrUpdateFromFlatCoordinates=e.createOrUpdateFromCoordinates=e.createOrUpdateFromCoordinate=e.createOrUpdateEmpty=e.createOrUpdate=e.createEmpty=e.coordinateRelationship=e.containsXY=e.containsExtent=e.containsCoordinate=e.closestSquaredDistanceXY=e.clone=e.buffer=e.boundingExtent=void 0;var i=n(0),r=n(330),o=n(331),s=function(t){for(var e=d(),n=0,i=t.length;n<i;++n)S(e,t[n]);return e},a=function(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},u=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},l=function(t,e,n){var i=void 0,r=void 0;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r},h=function(t,e){return f(t,e[0],e[1])},c=function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},f=function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]},p=function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=e[0],u=e[1],l=o.Relationship.UNKNOWN;return a<n?l|=o.Relationship.LEFT:a>r&&(l|=o.Relationship.RIGHT),u<i?l|=o.Relationship.BELOW:u>s&&(l|=o.Relationship.ABOVE),l===o.Relationship.UNKNOWN&&(l=o.Relationship.INTERSECTING),l},d=function(){return[1/0,1/0,-1/0,-1/0]},y=function(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]},g=function(t){return y(1/0,1/0,-1/0,-1/0,t)},v=function(t,e){var n=t[0],i=t[1];return y(n,i,n,i,e)},m=function(t,e){var n=g(e);return P(n,t)},_=function(t,e,n,i,r){var o=g(r);return C(o,t,e,n,i)},b=function(t,e){var n=g(e);return T(n,t)},x=function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},w=function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},S=function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},P=function(t,e){for(var n=0,i=e.length;n<i;++n)S(t,e[n]);return t},C=function(t,e,n,i,r){for(;n<i;n+=r)O(t,e[n],e[n+1]);return t},T=function(t,e){for(var n=0,i=e.length;n<i;++n)P(t,e[n]);return t},O=function(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)},E=function(t,e,n){var i=void 0;return(i=e.call(n,M(t)))?i:(i=e.call(n,I(t)))?i:(i=e.call(n,z(t)))?i:(i=e.call(n,G(t)))||!1},L=function(t){var e=0;return V(t)||(e=Z(t)*D(t)),e},M=function(t){return[t[0],t[1]]},I=function(t){return[t[2],t[1]]},N=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},A=function(t,e){var n=void 0;return e===r.Corner.BOTTOM_LEFT?n=M(t):e===r.Corner.BOTTOM_RIGHT?n=I(t):e===r.Corner.TOP_LEFT?n=G(t):e===r.Corner.TOP_RIGHT&&(n=z(t)),n},R=function(t,e){var n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-n)*(Math.max(t[3],e[3])-i)},k=function(t,e,n,i,r){var o=e*i[0]/2,s=e*i[1]/2,a=Math.cos(n),u=Math.sin(n),l=o*a,h=o*u,c=s*a,f=s*u,p=t[0],d=t[1],g=p-l+f,v=p-l-f,m=p+l-f,_=p+l+f,b=d-h-c,x=d-h+c,w=d+h+c,S=d+h-c;return y(Math.min(g,v,m,_),Math.min(b,x,w,S),Math.max(g,v,m,_),Math.max(b,x,w,S),r)},D=function(t){return t[3]-t[1]},j=function(t,e){var n=F(t,e);return L(n)},F=function(t,e,n){var i=n||d();return q(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):g(i),i},B=function(t){return Z(t)+D(t)},U=function(t){return[t[2]-t[0],t[3]-t[1]]},G=function(t){return[t[0],t[3]]},z=function(t){return[t[2],t[3]]},Z=function(t){return t[2]-t[0]},q=function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},V=function(t){return t[2]<t[0]||t[3]<t[1]},W=function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},H=function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i},X=function(t,e,n){var i=!1,r=p(t,e),s=p(t,n);if(r===o.Relationship.INTERSECTING||s===o.Relationship.INTERSECTING)i=!0;else{var a=t[0],u=t[1],l=t[2],h=t[3],c=e[0],f=e[1],d=n[0],y=n[1],g=(y-f)/(d-c),v=void 0,m=void 0;s&o.Relationship.ABOVE&&!(r&o.Relationship.ABOVE)&&(i=(v=d-(y-h)/g)>=a&&v<=l),i||!(s&o.Relationship.RIGHT)||r&o.Relationship.RIGHT||(i=(m=y-(d-l)*g)>=u&&m<=h),i||!(s&o.Relationship.BELOW)||r&o.Relationship.BELOW||(i=(v=d-(y-u)/g)>=a&&v<=l),i||!(s&o.Relationship.LEFT)||r&o.Relationship.LEFT||(i=(m=y-(d-a)*g)>=u&&m<=h)}return i},Y=function(t,e,n){var i=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(i,i,2),function(t,e,n){var i=Math.min.apply(null,t),r=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return y(i,r,o,s,n)}([i[0],i[2],i[4],i[6]],[i[1],i[3],i[5],i[7]],n)};e.boundingExtent=s,e.buffer=a,e.clone=u,e.closestSquaredDistanceXY=l,e.containsCoordinate=h,e.containsExtent=c,e.containsXY=f,e.coordinateRelationship=p,e.createEmpty=d,e.createOrUpdate=y,e.createOrUpdateEmpty=g,e.createOrUpdateFromCoordinate=v,e.createOrUpdateFromCoordinates=m,e.createOrUpdateFromFlatCoordinates=_,e.createOrUpdateFromRings=b,e.equals=x,e.extend=w,e.extendCoordinate=S,e.extendCoordinates=P,e.extendFlatCoordinates=C,e.extendRings=T,e.extendXY=O,e.forEachCorner=E,e.getArea=L,e.getBottomLeft=M,e.getBottomRight=I,e.getCenter=N,e.getCorner=A,e.getEnlargedArea=R,e.getForViewAndSize=k,e.getHeight=D,e.getIntersectionArea=j,e.getIntersection=F,e.getMargin=B,e.getSize=U,e.getTopLeft=G,e.getTopRight=z,e.getWidth=Z,e.intersects=q,e.isEmpty=V,e.returnOrUpdate=W,e.scaleFromCenter=H,e.intersectsSegment=X,e.applyTransform=Y,i.Zondy.extent.boundingExtent=s,i.Zondy.extent.buffer=a,i.Zondy.extent.clone=u,i.Zondy.extent.closestSquaredDistanceXY=l,i.Zondy.extent.containsCoordinate=h,i.Zondy.extent.containsExtent=c,i.Zondy.extent.containsXY=f,i.Zondy.extent.coordinateRelationship=p,i.Zondy.extent.createEmpty=d,i.Zondy.extent.createOrUpdate=y,i.Zondy.extent.createOrUpdateEmpty=g,i.Zondy.extent.createOrUpdateFromCoordinate=v,i.Zondy.extent.createOrUpdateFromCoordinates=m,i.Zondy.extent.createOrUpdateFromFlatCoordinates=_,i.Zondy.extent.createOrUpdateFromRings=b,i.Zondy.extent.equals=x,i.Zondy.extent.extend=w,i.Zondy.extent.extendCoordinate=S,i.Zondy.extent.extendCoordinates=P,i.Zondy.extent.extendFlatCoordinates=C,i.Zondy.extent.extendRings=T,i.Zondy.extent.extendXY=O,i.Zondy.extent.forEachCorner=E,i.Zondy.extent.getArea=L,i.Zondy.extent.getBottomLeft=M,i.Zondy.extent.getBottomRight=I,i.Zondy.extent.getCenter=N,i.Zondy.extent.getCorner=A,i.Zondy.extent.getEnlargedArea=R,i.Zondy.extent.getForViewAndSize=k,i.Zondy.extent.getHeight=D,i.Zondy.extent.getIntersectionArea=j,i.Zondy.extent.getIntersection=F,i.Zondy.extent.getMargin=B,i.Zondy.extent.getSize=U,i.Zondy.extent.getTopLeft=G,i.Zondy.extent.getTopRight=z,i.Zondy.extent.getWidth=Z,i.Zondy.extent.intersects=q,i.Zondy.extent.isEmpty=V,i.Zondy.extent.returnOrUpdate=W,i.Zondy.extent.scaleFromCenter=H,i.Zondy.extent.intersectsSegment=X,i.Zondy.extent.applyTransform=Y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Corner=void 0;var i=n(0),r={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};e.Corner=r,i.Zondy.Enum.Corner=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Relationship=void 0;var i=n(0),r={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};e.Relationship=r,i.Zondy.Enum.Relationship=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(87),s=function(t){return t&&t.__esModule?t:{default:t}}(n(88)),a=n(89),u=n(37);var l=[null,"http://www.opengis.net/ows/1.1"],h=(0,u.makeStructureNS)(l,{ServiceIdentification:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},S,t,e)}),ServiceProvider:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},P,t,e)}),OperationsMetadata:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},_,t,e)})}),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"readFromDocument",value:function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}},{key:"readFromNode",value:function(t){var e=(0,u.pushParseAndPop)({},h,t,[]);return e||null}}]),e}(),f=(0,u.makeStructureNS)(l,{DeliveryPoint:(0,u.makeObjectPropertySetter)(a.readString),City:(0,u.makeObjectPropertySetter)(a.readString),AdministrativeArea:(0,u.makeObjectPropertySetter)(a.readString),PostalCode:(0,u.makeObjectPropertySetter)(a.readString),Country:(0,u.makeObjectPropertySetter)(a.readString),ElectronicMailAddress:(0,u.makeObjectPropertySetter)(a.readString)}),p=(0,u.makeStructureNS)(l,{Value:(0,u.makeObjectPropertyPusher)(function(t,e){return(0,a.readString)(t)})}),d=(0,u.makeStructureNS)(l,{AllowedValues:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},p,t,e)})}),y=(0,u.makeStructureNS)(l,{Phone:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},b,t,e)}),Address:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},f,t,e)})}),g=(0,u.makeStructureNS)(l,{HTTP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},v,t,e)})}),v=(0,u.makeStructureNS)(l,{Get:(0,u.makeObjectPropertyPusher)(function(t,e){var n=(0,o.readHref)(t);if(!n)return;return(0,u.pushParseAndPop)({href:n},x,t,e)}),Post:void 0}),m=(0,u.makeStructureNS)(l,{DCP:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},g,t,e)})}),_=(0,u.makeStructureNS)(l,{Operation:function(t,e){var n=t.getAttribute("name"),i=(0,u.pushParseAndPop)({},m,t,e);if(!i)return;e[e.length-1][n]=i}}),b=(0,u.makeStructureNS)(l,{Voice:(0,u.makeObjectPropertySetter)(a.readString),Facsimile:(0,u.makeObjectPropertySetter)(a.readString)}),x=(0,u.makeStructureNS)(l,{Constraint:(0,u.makeObjectPropertyPusher)(function(t,e){var n=t.getAttribute("name");if(!n)return;return(0,u.pushParseAndPop)({name:n},d,t,e)})}),w=(0,u.makeStructureNS)(l,{IndividualName:(0,u.makeObjectPropertySetter)(a.readString),PositionName:(0,u.makeObjectPropertySetter)(a.readString),ContactInfo:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},y,t,e)})}),S=(0,u.makeStructureNS)(l,{Abstract:(0,u.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,u.makeObjectPropertySetter)(a.readString),Fees:(0,u.makeObjectPropertySetter)(a.readString),Title:(0,u.makeObjectPropertySetter)(a.readString),ServiceTypeVersion:(0,u.makeObjectPropertySetter)(a.readString),ServiceType:(0,u.makeObjectPropertySetter)(a.readString)}),P=(0,u.makeStructureNS)(l,{ProviderName:(0,u.makeObjectPropertySetter)(a.readString),ProviderSite:(0,u.makeObjectPropertySetter)(o.readHref),ServiceContact:(0,u.makeObjectPropertySetter)(function(t,e){return(0,u.pushParseAndPop)({},w,t,e)})});e.default=c,r.Zondy.Format.OWS=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMTSInfo=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(10),s=function(t){return t&&t.__esModule?t:{default:t}}(n(163));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return n.baseUrl="igs/rest/ogc",i.ip=n.ip||"localhost",i.port=n.port||"6163",i.baseUrl=n.baseUrl,i.version=n.version||"1.0.0",i.serverName=n.serverName,i.name=n.name,i.style=n.style||"default",i.tileMatrixset=n.tileMatrixset,i.tileMatrix=n.tileMatrix,i.tileRow=n.tileRow,i.tileCol=n.tileCol,i.format=n.format||"image/png",i.infoFormat=n.infoFormat||"text/html",i.I=n.I,i.J=n.J,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),i(e,[{key:"getWMTSInfo",value:function(t,e){var n=this,i="";n.serverName&&""!==n.serverName&&(i+=n.serverName+"/"),i+="WMTSServer/1.0.0/WMTSCapabilities.xml",n.partUrl=i;var r=n.getFullUrl();(0,s.default)({method:"get",url:r}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var n=this;n.partUrl="WMTSServer?service=WMTS&request=GetFeatureInfo&version="+n.version+"&layer="+n.serverName+":"+n.name+"&style="+n.style+"&TileMatrixSet="+n.tileMatrixSet+"&TileMatrix="+n.tileMatrix+"&TileRow="+n.tileRow+"&TileCol="+n.tileCol+"&format="+n.format+"&InfoFormat="+n.infoFormat+"&I="+n.I+"&J="+n.J;var i=n.getFullUrl();(0,s.default)({method:"get",url:i}).then(t).catch(e)}}]),e}();e.OGCWMTSInfo=a,r.Zondy.OGC.OGCWMTSInfo=a},function(t,e,n){"use strict";var i=n(8),r=n(164),o=n(336),s=n(90);function a(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var u=a(s);u.Axios=o,u.create=function(t){return a(i.merge(s,t))},u.Cancel=n(168),u.CancelToken=n(349),u.isCancel=n(167),u.all=function(t){return Promise.all(t)},u.spread=n(350),t.exports=u,t.exports.default=u},function(t,e){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var i=n(90),r=n(8),o=n(344),s=n(345);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),(t=r.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=a},function(t,e,n){"use strict";var i=n(8);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(166);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t}},function(t,e,n){"use strict";var i=n(8);function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(r(e)+"="+r(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var i=n(8),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(i.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var i=n(8);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var i=n(8);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var i=n(8);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";var i=n(8),r=n(346),o=n(167),s=n(90),a=n(347),u=n(348);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return l(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var i=n(8);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var i=n(168);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OGCWMSInfo=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(10),s=function(t){return t&&t.__esModule?t:{default:t}}(n(163));var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return n.baseUrl="igs/rest/ogc",i.ip=n.ip||"localhost",i.port=n.port||"6163",i.baseUrl=n.baseUrl,i.serverType=n.serverType,i.serverName=n.serverName,i.version=n.version||"1.1.1",i.layersName=n.layersName,i.style=n.style||"default",i.srs=n.srs,i.bbox=n.bbox,i.width=n.width||"1024",i.height=n.height||"768",i.format=n.format||"image/png",i.infoFormat=n.infoFormat||"text/html",i.I=n.I,i.J=n.J,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.ServiceBase),i(e,[{key:"getWMSInfo",value:function(t,e){var n=this;n.partUrl=n.serverType+"/"+n.serverName+"/WMSServer?service=WMS&REQUEST=GetCapabilities&version="+n.version;var i=n.getFullUrl();(0,s.default)({method:"get",url:i}).then(t).catch(e)}},{key:"getFeatureInfo",value:function(t,e){var n=this;n.partUrl=n.serverType+"/"+n.serverName+"/WMSServer?layers="+n.layersName+"&version="+n.version+"&service=WMS&request=GetFeatureInfo&styles="+n.style+"&format="+n.format+"&bbox="+n.bbox+"&width="+n.width+"&height="+n.height+"&query_Layers="+n.layersName+"&info_Format="+n.infoFormat,"1.1.1"===n.version?n.partUrl+="&srs="+n.srs+"&&X="+n.I+"&Y="+n.J:"1.3.0"===n.version&&(n.partUrl+="&crs="+n.srs+"&&I="+n.I+"&J="+n.J);var i=n.getFullUrl();(0,s.default)({method:"get",url:i}).then(t).catch(e)}}]),e}();e.OGCWMSInfo=a,r.Zondy.OGC.OGCWMSInfo=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=e.RankSymbolThemeLayer=e.SimpleThemeLayer=e.RandomThemeLayer=e.graphThemeLayer=e.GraphThemeLayer=e.UniqueThemeLayer=e.RangeThemeLayer=e.ThemeLayer=e.GeoFeatureThemeLayer=void 0;var i=n(38),r=n(39),o=n(353),s=n(354),a=n(193),u=n(355),l=n(356),h=n(357),c=n(358);e.GeoFeatureThemeLayer=i.GeoFeatureThemeLayer,e.ThemeLayer=r.ThemeLayer,e.RangeThemeLayer=o.RangeThemeLayer,e.UniqueThemeLayer=s.UniqueThemeLayer,e.GraphThemeLayer=a.GraphThemeLayer,e.graphThemeLayer=a.graphThemeLayer,e.RandomThemeLayer=u.RandomThemeLayer,e.SimpleThemeLayer=l.SimpleThemeLayer,e.RankSymbolThemeLayer=h.RankSymbolThemeLayer,e.ThemeStyle=c.ThemeStyle},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rangeThemeLayer=void 0;var i=n(0),r=(n(2),n(1)),o=n(38),s=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,i=(0,r.copyAttributesWithClip)({},e.style),o=e.styleGroups,s=!1,a=null,u=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&u&&n.attributes){var l=e.themeField,h=n.attributes;for(var c in h)if(l===c){s=!0,a=h[c];break}}if(s&&u)for(var f=0,p=o.length;f<p;f++){if(f===p-1?a>=o[f].start&&a<=o[f].end:a>=o[f].start&&a<o[f].end){var d=o[f].style;i=(0,r.copyAttributesWithClip)(i,d)}}return i}}),a=e.rangeThemeLayer=function(t,e){return new s(t,e)};i.Zondy.Map.rangeThemeLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueThemeLayer=void 0;var i=n(0),r=(n(2),n(1)),o=n(38),s=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,n=t,i=(0,r.copyAttributesWithClip)({},e.style),o=e.styleGroups,s=!1,a=null,u=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&u&&n.attributes){var l=e.themeField,h=n.attributes;for(var c in h)if(l===c){s=!0,a=h[c];break}}if(s&&u)for(var f=0,p=o.length;f<p;f++)if(!a&&!o[f].value||a&&o[f].value&&a.toString()===o[f].value.toString()){var d=o[f].style;i=(0,r.copyAttributesWithClip)(i,d);break}return i}}),a=e.uniqueThemeLayer=function(t,e){return new s(t,e)};i.Zondy.Map.uniqueThemeLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomThemeLayer=void 0;var i=n(0),r=(n(2),n(1)),o=n(38),s=n(39),a=n(19),u=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[],this.keepStyle=!0},getColor:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",n=0;n<6;n++)e+=t[Math.floor(16*Math.random())];return e},getStyleByData:function(){var t=(0,r.copyAttributesWithClip)({},this.style);return t.fillColor=this.getColor(),t},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var n=t.getSize();e.container.style.width=n.x+"px",e.container.style.height=n.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var n=t.layerPoint;e.currentMousePosition=window.L.point(n.x+e.movingOffset[0],n.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.zoomstartHandler=function(t){e.keepStyle=!1},t.on("zoomstart ",e.zoomstartHandler),e.zoomendHandler=function(t){e.keepStyle=!0},t.on("zoomend",e.zoomendHandler),e.update()}else t.removeLayer(e)},redrawThematicFeatures:function(t){var e=this,n=e.renderer.getHoverOne(),i=null;if(n&&n.refDataID&&(i=n.refDataID),t&&t instanceof window.L.LatLngBounds){var r=this._map.options.crs;t=window.L.bounds(r.project(t.getSouthWest()),r.project(t.getNorthEast())),t=new a.Rectangle(t.min.x,t.min.y,t.max.x,t.max.y)}e.renderer.clearAll();for(var o=e.features,s=e.cache,u=e.cacheFields,l=e._map.getZoom(),h=e.maxCacheCount,c=0,f=o.length;c<f;c++){var p=o[c],d=p.bound;if(!t||t.intersectsBounds(d)){var y=p.FID+"_zoom_"+l.toString();if(s[y]&&e.keepStyle)s[y].updateAndAddShapes();else{var g=e.createThematicFeature(o[c]);if(!(g.getShapesCount()<1)&&(s[y]=g,u.push(y),u.length>h)){var v=u[0];u.splice(0,1),delete s[v]}}}}if(e.renderer.render(),i&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(i);this.renderer.updateHoverShapes(m)}},redraw:function(){return this.keepStyle||this.clearCache(),s.ThemeLayer.prototype.redraw.apply(this,arguments)}}),l=e.randomThemeLayer=function(t,e){return new u(t,e)};i.Zondy.Map.randomThemeLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleThemeLayer=void 0;var i=n(0),r=(n(2),n(1)),o=n(38),s=n(39),a=o.GeoFeatureThemeLayer.extend({initialize:function(t,e){o.GeoFeatureThemeLayer.prototype.initialize.call(this,t,e),this.style=[]},getColor:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",n=0;n<6;n++)e+=t[Math.floor(16*Math.random())];return e},getStyleByData:function(){var t=(0,r.copyAttributesWithClip)({},this.style);return null==t.fillColor&&(t.fillColor=this.getColor()),this.style=t,t},redraw:function(){return s.ThemeLayer.prototype.redraw.apply(this,arguments)}}),u=e.simpleThemeLayer=function(t,e){return new a(t,e)};i.Zondy.Map.simpleThemeLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rankSymbolThemeLayer=void 0;var i=n(0),r=(n(2),n(27)),o=n(193),s=n(19),a=o.GraphThemeLayer.extend({initialize:function(t,e,n){o.GraphThemeLayer.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e,n=this;return r.Theme[n.symbolType]&&n.themeField&&n.symbolSetting&&(e=new r.Theme[n.symbolType](t,n,[n.themeField],n.symbolSetting,null,n.options)),!!e&&(e.assembleShapes(),e)},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),n=this._map.options.crs;e=window.L.bounds(n.project(e.getSouthWest()),n.project(e.getNorthEast()));var i=t.getLocalXY(e.min),r=t.getLocalXY(e.max),o=new s.Rectangle;o.xmin=Math.min(parseFloat(i[0]),parseFloat(r[0])),o.xmax=Math.max(parseFloat(i[0]),parseFloat(r[0])),o.ymin=Math.min(parseFloat(i[1]),parseFloat(r[1])),o.ymax=Math.max(parseFloat(i[1]),parseFloat(r[1]));for(var a=t.charts,u=[],l=0,h=a.length;l<h;l++){var c=a[l],f=c.resetLocation(),p=c.chartBounds;if(!o||t.isChartInMap(o,p)){var d=t._map.getZoom();t.options.fitZoom;if(!(o&&t.options.fitZoom>-1&&Math.abs(d-t.options.fitZoom)>1)){for(var y=!1,g=0;g<u.length;g++)if(t.isQuadrilateralOverLap(p,u[g])){y=!0;break}if(!y){u.push(p);for(var v=c.shapes,m=0,_=v.length;m<_;m++)v[m].refOriginalPosition=f,t.renderer.addShape(v[m])}}}}}}),u=e.rankSymbolThemeLayer=function(t,e,n){return new a(t,e,n)};i.Zondy.Map.rankSymbolThemeLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=void 0;var i=n(0),r=n(1);var o=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,(0,r.extend)(this,e)};e.ThemeStyle=o,i.Zondy.Map.ThemeStyle=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=void 0;var i=n(360),r=n(361),o=n(362),s=n(17),a=n(363),u=n(364),l=n(365),h=n(194),c=n(366),f=n(192),p=n(367),d=n(368);e.Bar=i.Bar,e.Bar3D=r.Bar3D,e.OverlayCircle=o.Circle,e.Graph=s.Graph,e.Line=a.Line,e.Pie=u.Pie,e.OverlayPoint=l.Point,e.RankSymbol=h.RankSymbol,e.Ring=c.Ring,e.ThemeVector=f.ThemeVector,e.ShapeFactory=p.ShapeFactory,e.ShapeParameters=p.ShapeParameters,e.FeatureCircle=p.FeatureCircle,e.Image=p.Image,e.Label=p.Label,e.FeatureLine=p.FeatureLine,e.Point=p.Point,e.FeaturePolygon=p.FeaturePolygon,e.FeatureRectangle=p.FeatureRectangle,e.Sector=p.Sector,e.FeatureTheme=p.FeatureTheme,e.LevelRenderer=d.LevelRenderer,e.Render=d.Render,e.Animation=d.Animation,e.Animator=d.Animator,e.Area=d.Area,e.Clip=d.Clip,e.Color=d.Color,e.ComputeBoundingBox=d.ComputeBoundingBox,e.Config=d.Config,e.LevelRendererCurve=d.LevelRendererCurve,e.Easing=d.Easing,e.Env=d.Env,e.LevelRendererEvent=d.LevelRendererEvent,e.Eventful=d.Eventful,e.Group=d.Group,e.Handler=d.Handler,e.Http=d.Http,e.Math=d.Math,e.Matrix=d.Matrix,e.Painter=d.Painter,e.PaintLayer=d.PaintLayer,e.Shape=d.Shape,e.SmicBrokenLine=d.SmicBrokenLine,e.SmicCircle=d.SmicCircle,e.SmicEllipse=d.SmicEllipse,e.SmicImage=d.SmicImage,e.SmicIsogon=d.SmicIsogon,e.SmicPoint=d.SmicPoint,e.SmicPolygon=d.SmicPolygon,e.SmicRectangle=d.SmicRectangle,e.SmicRing=d.SmicRing,e.SmicSector=d.SmicSector,e.SmicStar=d.SmicStar,e.SmicText=d.SmicText,e.Storage=d.Storage,e.Transformable=d.Transformable,e.Util=d.Util,e.LevelRendererVector=d.LevelRendererVector,e.SUtil=d.SUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(13),a=n(55),u=n(91),l=n(17);var h=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Bar",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var u=0,l=r.length;u<l;u++)if(r[u]<n[0]||r[u]>n[1])return;var h=this.calculateXShapeInfo();if(h){var c=h.xPositions,f=h.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(s.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(s.ShapeFactory.GraphAxis(this.shapeFactory,i,e,h)));for(var p=0;p<r.length;p++){var d=i[1]-(r[p]-n[0])/this.DVBUnitValue,y=[[c[p]-f/2,i[1]-1],[c[p]+f/2,i[1]-1],[c[p]+f/2,d],[c[p]-f/2,d]],g=new a.Polygon(y);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var v=e.barShadowStyle;v.shadowBlur&&(t.shadowBlur=v.shadowBlur),v.shadowColor&&(t.shadowColor=v.shadowColor),v.shadowOffsetX&&(t.shadowOffsetX=v.shadowOffsetX),v.shadowOffsetY&&(t.shadowOffsetY=v.shadowOffsetY)}g.style={},(0,o.copyAttributesWithClip)(g.style,t)}g.refDataID=this.data.FID,g.dataInfo={field:this.fields[p],value:r[p]},void 0!==e.barHoverAble&&(g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,i=this.dataValues.length;if(i<1)return null;var r=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3===n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(i-1)*t[1]);if(a<=i)return null;o=a/i}else t=[o=s/(2*i+1),o,o];for(var u=0,l=0;l<i;l++)0===l?u=t[0]+o/2:u+=o+t[1],r.push(e[0]+u);return{xPositions:r,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,n=-1,i=0;i<t;i++){var r=this.shapes[i];if("Zondy.LevelRenderer.Shape.SmicPolygon"===r.CLASS_NAME){var o=r.style,s=this.location[0]+o.pointList[0][0],a=this.location[0]+o.pointList[1][0];++n>=e.length&&(n%=e.length);var l=e[n][0],h=e[n][1],c=(new u.Color).getLinearGradient(s,0,a,0,[[0,l],[1,h]]);r.style.color=c}}}}]),e}();e.Bar=h,r.Zondy.Theme.Bar=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar3D=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(1),s=n(13),a=n(55),u=n(17);var l=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Bar3D",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var n=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var r=0,u=i.length;r<u;r++)if(i[r]<e[0]||i[r]>e[1])return;var l=this.calculateXShapeInfo();if(l){var h=l.xPositions,c=l.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(s.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(s.ShapeFactory.GraphAxis(this.shapeFactory,n,t,l)));for(var f=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,p=0;p<i.length;p++){var d=n[1]-(i[p]-e[0])/this.DVBUnitValue,y=h[p]-c/2,g=h[p]+c/2,v=[[y,d],[g,d],[g-f,d+f],[y-f,d+f]],m=[[g,d],[g-f,d+f],[g-f,n[1]+f],[g,n[1]]],_=[[y-f,n[1]+f],[g-f,n[1]+f],[g-f,d+f],[y-f,d+f]];f<=0&&(_=[[y,n[1]],[g,n[1]],[g,d],[y,d]]);var b=new a.Polygon(v),x=new a.Polygon(m),w=new a.Polygon(_);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,w.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,p,i[p]),x.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,p,i[p]),b.style=s.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,p,i[p]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,w.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),x.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),b.highlightStyle=s.ShapeFactory.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),b.refDataID=x.refDataID=w.refDataID=this.data.FID,b.isHoverByRefDataID=x.isHoverByRefDataID=w.isHoverByRefDataID=!0,b.refDataHoverGroup=x.refDataHoverGroup=w.refDataHoverGroup=(0,o.newGuid)(),b.dataInfo=x.dataInfo=w.dataInfo={field:this.fields[p],value:i[p]},void 0!==t.barHoverAble&&(b.hoverable=x.hoverable=w.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(b.clickable=x.clickable=w.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(x)),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(w))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,i=this.dataValues.length;if(i<1)return null;var r=[],o=0,s=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3===n.xShapeBlank.length){var a=s-((t=n.xShapeBlank)[0]+t[2]+(i-1)*t[1]);if(a<=i)return null;o=a/i}else t=[o=s/(2*i+1),o,o];for(var u=0,l=0;l<i;l++)0===l?u=t[0]+o/2:u+=o+t[1],r.push(e[0]+u);return{xPositions:r,width:o}}}]),e}();e.Bar3D=l,r.Zondy.Theme.Bar3D=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(27),s=n(95),a=n(13),u=n(194);var l=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Circle",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.RankSymbol),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,n=o.Theme.getDataValues(this.data,this.fields,e);this.dataValues=n||[];var i=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var r=this.DVBCodomain;r&&r[1]-r[0]>0?this.DVBUnitValue=t.maxR/(r[1]-r[0]):this.DVBUnitValue=t.maxR;var u=this.DVBUnitValue,l=i[0]*u+t.minR;if(this.width=2*l,this.height=2*l,this.initBaseParameter()&&(!r||!(i[0]<r[0]||i[0]>r[1]))){var h=this.DVBCenterPoint,c=new s.Circle(h[0],h[1],l);c.style=a.ShapeFactory.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?c.style.fillColor=t.fillColor:c.style.fillColor="#ff9277",c.highlightStyle=a.ShapeFactory.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(c.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(c.clickable=t.circleClickAble),c.refDataID=this.data.FID,c.dataInfo={field:this.fields[0],r:l,value:i[0]},this.shapes.push(this.shapeFactory.createShape(c)),this.shapesConvertToRelativeCoordinate()}}}]),e}();e.Circle=l,r.Zondy.Theme.Circle=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(13),s=n(54),a=n(94),u=n(17);var l=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Line",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue,r=this.dataValues;if(!(r.length<1)){var u=this.calculateXShapeInfo();if(u){var l,h,c=u.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(o.ShapeFactory.GraphAxis(this.shapeFactory,e,t,u));for(var f=[],p=[],d=0,y=r.length;d<y;d++){if(r[d]<n[0]||r[d]>n[1])return null;l=c[d],h=e[1]-(r[d]-n[0])/i;var g=new s.Point(l,h);g.style=o.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,d,r[d]),g.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(g.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(g.clickable=t.pointClickAble),g.refDataID=this.data.FID,g.dataInfo={field:this.fields[d],value:r[d]},p.push(this.shapeFactory.createShape(g));var v=[l,h];f.push(v)}var m=new a.Line(f);m.style=o.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),m.clickable=!1,m.hoverable=!1;var _=this.shapeFactory.createShape(m);this.shapes.push(_),this.shapes=this.shapes.concat(p),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,i=this.dataValues.length;if(i<1)return null;var r=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2===n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=i)return null;s=a/(i-1)}else t=[s=o/(i+1),s,s];for(var u=0,l=0;l<i;l++)0===l?u=t[0]:u+=s,r.push(e[0]+u);return{xPositions:r,width:0}}}]),e}();e.Line=l,r.Zondy.Theme.Line=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(13),s=n(56),a=n(17);var u=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Pie",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var i=this.DVBCodomain,r=0;r<n.length;r++)if(n[r]<i[0]||n[r]>i[1])return;for(var a=0,u=0;u<n.length;u++)a+=Math.abs(n[u]);this.DVBUnitValue=360/a;for(var l=this.DVBUnitValue,h=this.DVBCenterPoint,c=0,f=0,p=c,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,y=0;y<n.length;y++){var g=Math.abs(n[y]);(f=0===y?c+g*l:y===g.length-1?p:c+g*l)-c>=360&&(f=359.9999999);var v=new s.Sector(h[0],h[1],d,c,f);if(void 0===t.sectorStyleByFields){var m=y%e.length;v.style=o.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else v.style=o.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,y,n[y]);v.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.FID,v.dataInfo={field:this.fields[y],value:n[y]},this.shapes.push(this.shapeFactory.createShape(v)),c=f}this.shapesConvertToRelativeCoordinate()}}}}]),e}();e.Pie=u,r.Zondy.Theme.Pie=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(13),s=n(54),a=n(17);var u=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Point",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var i=this.DVBUnitValue,r=this.dataValues,a=this.calculateXShapeInfo();if(a){var u,l,h=a.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(o.ShapeFactory.GraphAxis(this.shapeFactory,e,t,a));for(var c=0,f=r.length;c<f;c++){if(r[c]<n[0]||r[c]>n[1])return null;u=h[c],l=e[1]-(r[c]-n[0])/i;var p=new s.Point(u,l);p.style=o.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,c,r[c]),p.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.FID,p.dataInfo={field:this.fields[c],value:r[c]},this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,n=this.setting,i=this.dataValues.length;if(i<1)return null;var r=[],o=this.DVBWidth,s=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2===n.xShapeBlank.length){var a=o-((t=n.xShapeBlank)[0]+t[1]);if(a<=i)return null;s=a/(i-1)}else t=[s=o/(i+1),s,s];for(var u=0,l=0;l<i;l++)0===l?u=t[0]:u+=s,r.push(e[0]+u);return{xPositions:r,width:0}}}]),e}();e.Point=u,r.Zondy.Theme.Point=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(13),s=n(56),a=n(17);var u=function(t){function e(t,n,i,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,r,o,s));return a.CLASS_NAME="Zondy.Theme.Ring",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.Graph),i(e,[{key:"destroy",value:function(){(function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(o.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var i=this.DVBCodomain,r=0;r<n.length;r++)if(n[r]<i[0]||n[r]>i[1])return;for(var a=0,u=0;u<n.length;u++)a+=Math.abs(n[u]);this.DVBUnitValue=360/a;for(var l=this.DVBUnitValue,h=this.DVBCenterPoint,c=0,f=0,p=c,d=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,y=e.innerRingRadius>=0&&e.innerRingRadius<d,g=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&y?e.innerRingRadius:0,v=0;v<n.length;v++){var m=Math.abs(n[v]);f=0===v?c+m*l:v===m.length-1?p:c+m*l;var _=new s.Sector(h[0],h[1],d,c,f,g);if(void 0===e.sectorStyleByFields){var b=v%t.length;_.style=o.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else _.style=o.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,v,n[v]);_.highlightStyle=o.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(_.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(_.clickable=e.sectorClickAble),_.refDataID=this.data.FID,_.dataInfo={field:this.fields[v],value:n[v]},this.shapes.push(this.shapeFactory.createShape(_)),c=f}this.shapesConvertToRelativeCoordinate()}}}}]),e}();e.Ring=u,r.Zondy.Theme.Ring=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=void 0;var i=n(13),r=n(15),o=n(95),s=n(187),a=n(186),u=n(94),l=n(54),h=n(55),c=n(185),f=n(56),p=n(27);e.ShapeFactory=i.ShapeFactory,e.ShapeParameters=r.ShapeParameters,e.FeatureCircle=o.Circle,e.Image=s.Image,e.Label=a.Label,e.FeatureLine=u.Line,e.Point=l.Point,e.FeaturePolygon=h.Polygon,e.FeatureRectangle=c.Rectangle,e.Sector=f.Sector,e.FeatureTheme=p.Theme},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=void 0;var i=n(169),r=n(170),o=n(182),s=n(173),a=n(183),u=n(91),l=n(174),h=n(92),c=n(52),f=n(184),p=n(175),d=n(176),y=n(40),g=n(172),v=n(181),m=n(177),_=n(178),b=n(179),x=n(180),w=n(6),S=n(97),P=n(189),C=n(369),T=n(93),O=n(370),E=n(96),L=n(57),M=n(190),I=n(371),N=n(191),A=n(372),R=n(188),k=n(171),D=n(51),j=n(26),F=n(53),B=n(9);e.LevelRenderer=i.LevelRenderer,e.Render=r.Render,e.Animation=o.Animation,e.Animator=o.Animator,e.Area=s.Area,e.Clip=a.Clip,e.Color=u.Color,e.ComputeBoundingBox=l.ComputeBoundingBox,e.Config=h.Config,e.LevelRendererCurve=c.Curve,e.Easing=f.Easing,e.Env=p.Env,e.LevelRendererEvent=d.Event,e.Eventful=y.Eventful,e.Group=g.Group,e.Handler=v.Handler,e.Http=m.Http,e.Math=_.Math,e.Matrix=b.Matrix,e.Painter=x.Painter,e.PaintLayer=x.PaintLayer,e.Shape=w.Shape,e.SmicBrokenLine=S.SmicBrokenLine,e.SmicCircle=P.SmicCircle,e.SmicEllipse=C.SmicEllipse,e.SmicImage=T.SmicImage,e.SmicIsogon=O.SmicIsogon,e.SmicPoint=E.SmicPoint,e.SmicPolygon=L.SmicPolygon,e.SmicRectangle=M.SmicRectangle,e.SmicRing=I.SmicRing,e.SmicSector=N.SmicSector,e.SmicStar=A.SmicStar,e.SmicText=R.SmicText,e.Storage=k.Storage,e.Transformable=D.Transformable,e.Util=j.Util,e.LevelRendererVector=F.Vector,e.SUtil=B.SUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicEllipse=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicellipse",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=.5522848,r=e.x+n[0],o=e.y+n[1],s=e.a,a=e.b,u=s*i,l=a*i;t.moveTo(r-s,o),t.bezierCurveTo(r-s,o-l,r-u,o-a,r,o-a),t.bezierCurveTo(r+u,o-a,r+s,o-l,r+s,o),t.bezierCurveTo(r+s,o+l,r+u,o+a,r,o+a),t.bezierCurveTo(r-u,o+a,r-s,o+l,r-s,o),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.a-e/2),y:Math.round(t.x+n[1]-t.b-e/2),width:2*t.a+e,height:2*t.b+e},t.__rect}}]),e}();e.SmicEllipse=s,r.Zondy.LevelRenderer.SmicEllipse=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicIsogon=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicisogon",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=s.SUtil.Util_math.sin,r=s.SUtil.Util_math.cos,o=Math.PI,a=e.n;if(a&&!(a<2)){var u=e.x+n[0],l=e.y+n[1],h=e.r,c=2*o/a,f=-o/2,p=u+h*r(f),d=l+h*i(f);f+=c;var y=e.pointList=[];y.push([p,d]);for(var g=0,v=a-1;g<v;g++)y.push([u+h*r(f),l+h*i(f)]),f+=c;y.push([p,d]),t.moveTo(y[0][0],y[0][1]);for(var m=0;m<y.length;m++)t.lineTo(y[m][0],y[m][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicIsogon=a,r.Zondy.LevelRenderer.SmicIsogon=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRing=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicring",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.arc(e.x+n[0],e.y+n[1],e.r,0,2*Math.PI,!1),t.moveTo(e.x+n[0]+e.r0,e.y+n[1]),t.arc(e.x+n[0],e.y+n[1],e.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicRing=s,r.Zondy.LevelRenderer.SmicRing=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicStar=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(6),s=n(9);var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.type="smicstar",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.Shape),i(e,[{key:"destroy",value:function(){this.type=null,function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,i=e.n;if(i&&!(i<2)){var r=s.SUtil.Util_math.sin,o=s.SUtil.Util_math.cos,a=Math.PI,u=e.x+n[0],l=e.y+n[1],h=e.r,c=e.r0;null==c&&(c=i>4?h*o(2*a/i)/o(a/i):h/3);var f=a/i,p=-a/2,d=u+h*o(p),y=l+h*r(p);p+=f;var g=e.pointList=[];g.push([d,y]);for(var v,m=0,_=2*i-1;m<_;m++)v=m%2==0?c:h,g.push([u+v*o(p),l+v*r(p)]),p+=f;g.push([d,y]),t.moveTo(g[0][0],g[0][1]);for(var b=0;b<g.length;b++)t.lineTo(g[b][0],g[b][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,n=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+n[0]-t.r-e/2),y:Math.round(t.y+n[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}();e.SmicStar=a,r.Zondy.LevelRenderer.SmicStar=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=e.AnimatedMarkerLayer=e.MarkerClusterLayer=e.ClusterLayer=e.HeaterLayer=e.StreamLayer=e.MapvLayer=e.EchartsLayer=void 0;var i=n(374),r=n(58),o=n(377),s=n(385),a=n(386),u=n(387),l=n(388),h=n(389);e.EchartsLayer=i.EchartsLayer,e.MapvLayer=r.MapvLayer,e.StreamLayer=o.StreamLayer,e.HeaterLayer=s.HeaterLayer,e.ClusterLayer=a.ClusterLayer,e.MarkerClusterLayer=u.MarkerClusterLayer,e.AnimatedMarkerLayer=l.AnimatedMarkerLayer,e.TimeDimension=h.TimeDimension,e.TimeDimensionControl=h.TimeDimensionControl,e.TimeDimensionLayer=h.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=h.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=h.TimeDimensionLayerWMS,e.TimeDimensionPlayer=h.TimeDimensionPlayer,e.TimeDimensionUtil=h.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.echartsLayer=e.EchartsLayer=void 0;var i=s(n(2)),r=s(n(195));n(28);var o=s(n(375));function s(t){return t&&t.__esModule?t:{default:t}}var a=e.EchartsLayer=i.default.Layer.extend({map:null,chart:null,options:null,echartsInitOpts:null,canvas:null,initialize:function(t,e){this.map=t,this.options=e,this.echartsInitOpts=e.echartsInitOpts,this.layerId=e.layerId||"echartlayerdefaultid",this.layerClass=e.classId||"echartlayerdefaultclass",this.visible=!0,this.initDevicePixelRatio(),this.initOptions(this.options),this.initEcharts(),this._resizeCanvas()},initDevicePixelRatio:function(){this.devicePixelRatio=window.devicePixelRatio||1},initOptions:function(t){if(t){if(t.leaflet)return;this.options.leaflet={roam:!0}}},initEcharts:function(){r.default.registerCoordinateSystem("leaflet",o.default),r.default.extendComponentModel({type:"leaflet",getBMap:function(){return this.__leaflet},defaultOption:{roam:!1}}),r.default.registerAction({type:"LeafletRoma",event:"LeafletRoma",update:"updateLayout"},function(t,e){})},_visible:function(){this.visible=!0,this.canvas.style.visibility="visible"},_unvisible:function(){this.visible=!1,this.canvas.style.visibility="hidden"},onAdd:function(t){var e=this;this.map=t,this.canvas=this._createCanvas(),this.map.getPanes().overlayPane.appendChild(this.canvas),this.chart=r.default.init(this.canvas,null,this.echartsInitOpts),r.default.leafletMap=t;var n=this;t.on("resize",function(t){var e=t.newSize;n.canvas.style.width=e.x+"px",n.canvas.style.height=e.y+"px",n.chart.resize()}),t.on("zoomstart",function(){n._unvisible()}),r.default.extendComponentView({type:"leaflet",render:function(t,i,o){var s=!0,a=r.default.leafletMap,u=o.getZr().painter.getViewportRoot(),l=t.coordinateSystem,h=function(){if(!s&&e.visible){var n=a.getBounds().getNorthWest(),i=a.latLngToLayerPoint(n),r=[parseInt(i.x,10)||0,parseInt(i.y,10)||0];u.style.left=r[0]+"px",u.style.top=r[1]+"px",l.setMapOffset(r),t.__mapOffset=r,o.dispatchAction({type:"LeafletRoma"})}},c=function(){n._visible(),!s&&e.visible&&o.dispatchAction({type:"LeafletRoma"})};this._oldMoveHandler&&a.off("move",this._oldMoveHandler),this._oldZoomEndHandler&&a.off("zoomend",this._oldZoomEndHandler),a.on("move",h),a.on("zoomend",c),this._oldMoveHandler=h,this._oldZoomEndHandler=c;t.get("roam");s=!1}}),this.chart.setOption(this.options)},onRemove:function(t){this.chart.dispose()},_createCanvas:function(){var t=document.createElement("div");return t.id=this.layerId,t.style.top="0px",t.style.left="0px",t.height=this.map.getSize().y+"px",t.width=this.map.getSize().x+"px",t.style.height=this.map.getSize().y+"px",t.style.width=this.map.getSize().x+"px",t.style.zIndex=1e3,t.setAttribute("id",this.layerId),t.setAttribute("class",this.layerClass),this.canvas=t,t},_resizeCanvas:function(){var t=this;window.onresize=function(){var e=t.canvas;t.map;e.style.top="0px",e.style.left="0px",e.height=this.map.getSize().y+"px",e.width=this.map.getSize().x+"px",e.style.height=this.map.getSize().y+"px",e.style.width=this.map.getSize().x+"px",t.chart.resize()}},show:function(){this._visible()},hide:function(){this._unvisible()},resize:function(){var t=this.canvas;this.map;t.style.top="0px",t.style.left="0px",t.height=this.map.getSize().y+"px",t.width=this.map.getSize().x+"px",t.style.height=this.map.getSize().y+"px",t.style.width=this.map.getSize().x+"px",this.chart.resize()},update:function(t){this.chart.setOption(t)}}),u=e.echartsLayer=function(t,e){return new a(t,e)};i.default.zondy.EchartsLayer=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapCoordSys=s;var i=o(n(195)),r=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e}s.prototype.dimensions=["lng","lat"],s.prototype.setMapOffset=function(t){this._mapOffset=t},s.prototype.getBMap=function(){return this._LeafletMap},s.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=89.99);var e=new r.default.latLng(t[1],t[0]),n=this._LeafletMap.latLngToLayerPoint(e),i=this._mapOffset;return[n.x-i[0],n.y-i[1]]},s.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]])).lng,t.lat]},s.prototype.getViewRect=function(){var t=this._api;return new i.default.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},s.prototype.getRoamTransform=function(){return i.default.matrix.create()},s.prototype.prepareCustoms=function(){var t=i.default.util,e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(e,n){return n=n||[0,0],t.map([0,1],function(t){var i=n[t],r=e[t]/2,o=[],s=[];return o[t]=i-r,s[t]=i+r,o[1-t]=s[1-t]=n[1-t],Math.abs(this.dataToPoint(o)[t]-this.dataToPoint(s)[t])},this)},this)}}},s.dimensions=s.prototype.dimensions,s.create=function(t,e){var n;t.eachComponent("leaflet",function(t,r){e.getZr().painter.getViewportRoot();var o=i.default.leafletMap;n||(n=new s(o,e)),n.setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=n}),t.eachSeries(function(t){if(!t.get("coordinateSystem")||"leaflet"===t.get("coordinateSystem")){if(!n){var r=i.default.leafletMap;n=new s(r,e)}t.coordinateSystem=n,t.animation=!0===t.animation}})},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvBaseLayer=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(98),o=function(t){return t&&t.__esModule?t:{default:t}}(n(2));function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=r.baiduMapLayer?r.baiduMapLayer.__proto__:Function;e.MapvBaseLayer=function(t){function e(t,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i));if(!a)return s(o);o.map=t,o.dataSet=n,o.options=i;var u=o;return i=i||{},u.init(i),u.argCheck(i),o.initDevicePixelRatio(),o.canvasLayer=r,o.clickEvent=o.clickEvent.bind(o),o.mousemoveEvent=o.mousemoveEvent.bind(o),o.bindEvent(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),i(e,[{key:"clickEvent",value:function(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,i=t.layerPoint;i.x,e.x,i.y,e.y}},{key:"mousemoveEvent",value:function(t){if(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio||1,i=t.layerPoint;i.x,e.x,i.y,e.y}}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer&&!this.canvasLayer.disposeFlag){var e=this,n=this.map,i=e.options.animation,s=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void this.clear(s);"2d"==this.context&&(s.save(),s.globalCompositeOperation="destination-out",s.fillStyle="rgba(0, 0, 0, .1)",s.fillRect(0,0,s.canvas.width,s.canvas.height),s.restore())}else this.clear(s);if("2d"==this.context)for(var a in e.options)s[a]=e.options[a];else s.clear(s.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&n.getZoom()<e.options.minZoom||e.options.maxZoom&&n.getZoom()>e.options.maxZoom)){var u=n.getBounds().getNorthWest(),l=n.latLngToContainerPoint(u),h={transferCoordinate:function(t){var i=n.latLngToContainerPoint(new o.default.LatLng(t[1],t[0]));return"heatmap"===e.options.draw&&(i.x/=e.devicePixelRatio,i.y/=e.devicePixelRatio),[i.x-l.x,i.y-l.y]}};void 0!==t&&(h.filter=function(e){var n=i.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var c=e.dataSet.get(h);this.processData(c),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var f=n.latLngToContainerPoint(o.default.latLng(0,0)),p={x:f.x-l.x,y:f.y-l.y};this.drawContext(s,new r.DataSet(c),e.options,p),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"updateData",value:function(t,n){var i=t;i&&i.get&&(i=i.get()),void 0!=i&&this.dataSet.set(i),function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),e}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.streamLayer=e.StreamLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var r=n(378),o=n(99),s=n(383),a=n(384);var u=e.StreamLayer=i.default.LayerGroup.extend({initialize:function(t,e,n){this.options=n||{},this.map=t,this.url=e,this._layers={},i.default.Util.setOptions(this,n),this.socketService=new r.SocketService(this.url,this.options)},onAdd:function(t){this.bindEvent(),"mapv"===this.options.render?this.addLayer(new s.MapvStreamLayer(this.map,this.url,this.options)):this.addLayer(new a.GeojsonStreamLayer(this.url,this.options)),i.default.LayerGroup.prototype.onAdd.call(this,t)},bindEvent:function(){var t=this;this.socketService.createSubscribe(),this.socketService.on(o.SubscribeEvent.OPEN,function(e){return t.fire(o.SubscribeEvent.OPEN,e)}),this.socketService.on(o.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)})},unbindEvent:function(){var t=this;this.socketService&&(this.socketService.on(o.SubscribeEvent.OPEN,function(e){return t.fire(o.SubscribeEvent.OPEN,e)}),this.socketService.on(o.SubscribeEvent.MESSAGE,function(e){return t.onMessage(e)}),this.socketService&&this.socketService.closeSubscribe())},onRemove:function(t){this.unbindEvent()},onMessage:function(t){var e=this;this.getLayers().map(function(n){return n.onMessage(t),e.fire(o.LayerEvent.UPDATE,{layer:n,data:t.feature}),n})}}),l=e.streamLayer=function(t,e,n){return new u(t,e,n)};i.default.zondy.StreamLayer=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.socketService=e.SocketService=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(99),o=n(379),s=n(382);i.default.zondy.SocketService=void 0;var a=e.SocketService=s.ServiceEvent.extend({initialize:function(t,e){this.url=t||"",this.options=e||{},this.socket=new o.ISocketService(t,e)},createSubscribe:function(){console.log("socketcontextleafletonoff(types, fn, context)contextthisthisonthis"),this.socket.createSubscribe(),this.socket.evented.on(r.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.on(r.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(r.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(r.SubscribeEvent.ERROR,this.mapEvent,this)},createBroadcast:function(){this.socket.createBroadcast(),this.socket.evented.on(r.BroadcastEvent.OPEN,this.mapEvent,this),this.socket.evented.on(r.BroadcastEvent.MESSAGE,this.mapEvent,this),this.socket.evented.on(r.BroadcastEvent.CLOSE,this.mapEvent,this),this.socket.evented.on(r.BroadcastEvent.ERROR,this.mapEvent,this)},mapEvent:function(t){this.fire(t.eventType||t.type,t)},broadcast:function(t){this.socket&&this.socket.broadcast(t)},closeSubscribe:function(){this.socket.closeSubscribe(),this.socket.evented.off(r.SubscribeEvent.OPEN,this.mapEvent,this),this.socket.evented.off(r.SubscribeEvent.MESSAGE,this.mapEvent,this),this.socket.evented.off(r.SubscribeEvent.CLOSE,this.mapEvent,this),this.socket.evented.off(r.SubscribeEvent.ERROR,this.mapEvent,this)},closeBroadcast:function(){this.socket.closeBroadcast(),this.socket.evented.off(r.BroadcastEvent.OPEN,this.mapEvent),this.socket.evented.off(r.BroadcastEvent.MESSAGE,this.mapEvent),this.socket.evented.off(r.BroadcastEvent.CLOSE,this.mapEvent),this.socket.evented.off(r.BroadcastEvent.ERROR,this.mapEvent)}}),u=e.socketService=function(t,e){return new a(t,e)};i.default.zondy.SocketService=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISocketService=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(0),o=n(380),s=n(99);r.Zondy.Socket.ISocketService=void 0;var a=e.ISocketService=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e||"",this.options=n,this.subscribesocket=null,this.subscribesocket=null,this.evented=new o.Evented}return i(t,[{key:"createSubscribe",value:function(){var t=this;this.subscribesocket=this.connect(this.url+s.SubscribePrefix),this.subscribesocket.onopen=function(e){e.eventType=s.SubscribeEvent.OPEN,t.evented.fire(s.SubscribeEvent.OPEN,e)},this.subscribesocket.onmessage=function(e){var n=JSON.parse(e.data);e.feature=n,e.eventType=s.SubscribeEvent.MESSAGE,t.evented.fire(s.SubscribeEvent.MESSAGE,e)},this.subscribesocket.onclose=function(e){e.eventType=s.SubscribeEvent.CLOSE,t.evented.fire(s.SubscribeEvent.CLOSE,e)},this.subscribesocket.onerror=function(e){e.eventType=s.SubscribeEvent.ERROR,t.evented.fire(s.SubscribeEvent.ERROR,e)}}},{key:"createBroadcast",value:function(){var t=this;this.broadcastsocket=this.connect(this.url+s.BroadcastPrefix),this.broadcastsocket.onopen=function(e){e.eventType=s.BroadcastEvent.OPEN,t.evented.fire(s.BroadcastEvent.OPEN,e)},this.broadcastsocket.onmessage=function(e){var n=JSON.parse(e.data);e.feature=n,e.eventType=s.BroadcastEvent.MESSAGE,t.evented.fire(s.BroadcastEvent.MESSAGE,e)},this.broadcastsocket.onclose=function(e){e.eventType=s.BroadcastEvent.CLOSE,t.evented.fire(s.BroadcastEvent.CLOSE,e)},this.broadcastsocket.onerror=function(e){e.eventType=s.BroadcastEvent.ERROR,t.evented.fire(s.BroadcastEvent.ERROR,e)}}},{key:"connect",value:function(t){return new("MozWebSocket"in window?window.MozWebSocket:WebSocket)(t)}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen&&this.broadcastsocket.send(JSON.stringify(t))}},{key:"closeSubscribe",value:function(){this.subscribesocket.close(),this.subscribesocket=null}},{key:"closeBroadcast",value:function(){this.broadcastsocket.close(),this.broadcastsocket=null}},{key:"close",value:function(){this.subscribesocket.close(),this.broadcastsocket.close(),this.subscribesocket=null,this.broadcastsocket=null}}]),t}();r.Zondy.Socket.ISocketService=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Evented=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(381));var s=e.Evented=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"on",value:function(t,e,n){if("object"===(void 0===t?"undefined":i(t)))for(var r in t)this._on(r,t[r],e);else for(var s=0,a=(t=o.splitWords(t)).length;s<a;s++)this._on(t[s],e,n);return this}},{key:"off",value:function(t,e,n){if(t)if("object"===(void 0===t?"undefined":i(t)))for(var r in t)this._off(r,t[r],e);else for(var s=0,a=(t=o.splitWords(t)).length;s<a;s++)this._off(t[s],e,n);else delete this._Evented;return this}},{key:"_on",value:function(t,e,n){this._Evented=this._Evented||{};var i=this._Evented[t];i||(i=[],this._Evented[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(r)}},{key:"_off",value:function(t,e,n){var i,r,s;if(this._Evented&&(i=this._Evented[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,s=i.length;r<s;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=o.falseFn,this._firingCount&&(this._Evented[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,s=i.length;r<s;r++)i[r].fn=o.falseFn;delete this._Evented[t]}}},{key:"fire",value:function(t,e,n){if(!this.listens(t,n))return this;var i=o.extend({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._Evented){var r=this._Evented[t];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var u=r[s];u.fn.call(u.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this}},{key:"listens",value:function(t,e){var n=this._Evented&&this._Evented[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1}},{key:"once",value:function(t,e,n){if("object"===(void 0===t?"undefined":i(t))){for(var r in t)this.once(r,t[r],e);return this}var s=o.bind(function(){this.off(t,e,n).off(t,s,n)},this);return this.on(t,e,n).on(t,s,n)}},{key:"addEventParent",value:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o.stamp(t)]=t,this}},{key:"removeEventParent",value:function(t){return this._eventParents&&delete this._eventParents[o.stamp(t)],this}},{key:"_propagateEvent",value:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o.extend({layer:t.target,propagatedFrom:t.target},t),!0)}}]),t}();s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extend=function(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t},e.bind=r,e.stamp=function(t){return t._leaflet_id=t._leaflet_id||(e.lastId=o+=1),t._leaflet_id},e.throttle=function(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}},e.wrapNum=function(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r},e.falseFn=function(){return!1},e.formatNum=function(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n},e.trim=s,e.splitWords=function(t){return s(t).split(/\s+/)},e.setOptions=function(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},e.getParamString=function(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},e.template=function(t,e){return t.replace(a,function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})},e.indexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},e.requestAnimFrame=function(t,e,n){if(!n||c!==h)return c.call(window,r(t,e));t.call(e)},e.cancelAnimFrame=function(t){t&&f.call(window,t)};var i=e.create=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=e.lastId=0;function s(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}var a=/\{ *([\w_-]+) *\}/g;e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.emptyImageUrl="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function u(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var l=0;function h(t){var e=+new Date,n=Math.max(0,16-(e-l));return l=e+n,window.setTimeout(t,n)}var c=e.requestFn=window.requestAnimationFrame||u("RequestAnimationFrame")||h,f=e.cancelFn=window.cancelAnimationFrame||u("CancelAnimationFrame")||u("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceEvent=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var r=e.ServiceEvent=i.default.Evented.extend({initialize:function(t,e){this.url=t,i.default.setOptions(this,e),this.fire("initialize",this)},destroy:function(){this.fire("destroy",this)}});i.default.zondy.ServiceEvent=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvStreamLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(58);e.MapvStreamLayer=r.MapvLayer.extend({initialize:function(t,e,n){n=n||{},i.default.Util.setOptions(this,n),this.mapvOption=n.mapvOption||{},this.data=[],this.lastDate=new Date,this.url=e,this.fieldHash={},this.fieldDeg=n.fieldDeg,this.iconUrl=n.iconUrl,this.timeSpeed=n.timeSpeed||100,this.createIcon(),r.MapvLayer.prototype.initialize.call(this,t,new window.mapv.DataSet([]),this.mapvOption,n)},onMessage:function(t){var e=t.feature,n=t.feature.properties[this.options.field],i=this.parasIcon(e);void 0!==n&&this.fieldHash[n]?this.data[this.fieldHash[n]]=i:void 0!==n&&(this.data.push(i),this.fieldHash[n]=this.data.length-1),this.updateLayer()},createIcon:function(){var t=this.iconUrl||"http://client.snanyun.com:8899/img/leaflet/marker/bike.png";this.icon=new Image,this.icon.src=t},parasIcon:function(t){this.mapvOption={draw:"icon"};var e=t.properties[this.fieldDeg]||0;return{geometry:{type:"Point",coordinates:t.geometry.coordinates},deg:e,icon:this.icon}},updateLayer:function(){var t=new Date;t-this.lastDate<this.timeSpeed||(this.updateData(this.data,this.mapvOption),this.lastDate=t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeojsonStreamLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));e.GeojsonStreamLayer=i.default.GeoJSON.extend({initialize:function(t,e){(e=e||{}).style&&!e.pointToLayer&&(e.pointToLayer=function(t,n){return i.default.circleMarker(n,e.style())}),i.default.Util.setOptions(this,e),this._layers={},i.default.stamp(this),this.url=t,this.fieldHash={}},onMessage:function(t){var e=t.feature,n=t.feature.properties[this.options.field],r=null;void 0!==n&&this.fieldHash[n]?(r=this.getLayer(this.fieldHash[n]),this.parasFeature(r,e)):((r=i.default.GeoJSON.geometryToLayer(e,this.options)).feature=i.default.GeoJSON.asFeature(e),this.addLayer(r),void 0!==n&&(this.fieldHash[n]=this.getLayerId(r))),this.options.onEachFeature&&this.options.onEachFeature(e,r)},parasFeature:function(t,e){e.properties&&(t.feature.properties=e.properties);var n=[];switch(e.geometry.type){case"Point":n=i.default.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=i.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=i.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(n);break;case"MultiPolygon":n=i.default.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(n)}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heaterLayer=e.HeaterLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var r=n(58),o=n(98);var s=e.HeaterLayer=i.default.Layer.extend({map:null,options:{},data:[],dataset:null,initialize:function(t,e,n){this.map=t;if(n){var i=n.size,r=n.gradient,o=n.max,s=n.field;this.field=s,this.options={size:i||1,gradient:r||{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},max:o||100,draw:"heatmap"},this.data=this.convertData(e),this.layer=null}},convertData:function(t){var e=this,n=[];if(!t)return n;var i=t.type;if("FeatureCollection"===i){var r=t.features;if(!r||r.length<=0)return n;var o=this.findNumberFieldName(r[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];if("number"==typeof e[n])return i}},onAdd:function(t){this.map=t,this.dataset=new o.DataSet(this.data),this.layer=new r.MapvLayer(t,this.dataset,this.options).addTo(t)},onRemove:function(t){this.layer.remove()},show:function(){this.layer&&this.layer.show()},hide:function(){this.layer&&this.layer.hide()}}),a=e.heaterLayer=function(t,e,n){return new s(t,e,n)};i.default.zondy.HeaterLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterLayer=e.ClusterLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var r=n(58),o=n(98);var s=e.ClusterLayer=i.default.Layer.extend({map:null,options:{},data:[],dataset:null,initialize:function(t,e,n){this.map=t;if(n){var i=n.size,r=n.gradient,o=n.max,s=n.field,a=n.type;this.field=s,this.options={size:i||1,label:{sho1:!0,fillStyle:"white",shadowColor:"yellow",font:"15px Arial",shadowBlur:10},gradient:r||{0:"rgba(49, 54, 149, 0)",.2:"rgba(69,117,180, 0.7)",.3:"rgba(116,173,209, 0.7)",.4:"rgba(171,217,233, 0.7)",.5:"rgba(224,243,248, 0.7)",.6:"rgba(254,224,144,0.7)",.7:"rgba(253,174,97,0.7)",.8:"rgba(244,109,67,0.8)",.9:"rgba(215,48,39,0.8)",.95:"rgba(165, 0, 38,0.8)"},shadowColor:"rgba(255, 255, 50, 1)",shadowBlur:5,max:o||100,draw:a||"grid"},this.data=this.convertData(e),this.layer=null}},convertData:function(t){var e=this,n=[];if(!t)return n;var i=t.type;if("FeatureCollection"===i){var r=t.features;if(!r||r.length<=0)return n;var o=this.findNumberFieldName(r[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];if("number"==typeof e[n])return i}},onAdd:function(t){this.map=t,this.dataset=new o.DataSet(this.data),this.layer=new r.MapvLayer(t,this.dataset,this.options).addTo(t)},onRemove:function(t){this.layer.remove()},show:function(){this.layer&&this.layer.show()},hide:function(){this.layer&&this.layer.hide()}}),a=e.clusterLayer=function(t,e,n){return new s(t,e,n)};i.default.zondy.ClusterLayer=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.markerClusterLayer=e.MarkerClusterLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));n(28);var r=e.MarkerClusterLayer=i.default.Layer.extend({map:null,options:{},data:[],initialize:function(t,e,n){this.map=t;var i=n.field;this.field=i,this.options=n,this.data=this.convertData(e),this.layer=null},convertData:function(t){var e=this,n=[];if(!t)return n;var i=t.type;if("FeatureCollection"===i){var r=t.features;if(!r||r.length<=0)return n;var o=this.findNumberFieldName(r[0].properties);n=t.features.map(function(t){return t.count=t.properties[e.field||o],t})}return n},findNumberFieldName:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var i=e[n];if("number"==typeof e[n])return i}},onAdd:function(t){this.map=t;var e=this.options,n=e.extend,r=e.isCover,o=e.isZoom,s=e.zoom,a=e.title;this.layer=i.default.markerClusterGroup({disableClusteringAtZoom:s||20,spiderfyOnMaxZoom:n||!0,showCoverageOnHover:r||!0,zoomToBoundsOnClick:o||!0});for(var u=0;u<this.data.length;u++){var l=this.data[u],h=l.count,c=l.properties[a],f=i.default.marker(i.default.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0]),{title:c});f.bindPopup(h),this.layer.addLayer(f)}t.addLayer(this.layer)},onRemove:function(t){this.layer.remove()}}),o=e.markerClusterLayer=function(t,e,n){return new r(t,e,n)};i.default.zondy.MarkerClusterLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.animatedMarkerLayer=e.AnimatedMarkerLayer=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2));var r=e.AnimatedMarkerLayer=i.default.Marker.extend({options:{distance:200,interval:1e3,autoStart:!0,onEnd:function(){},clickable:!1},initialize:function(t,e){this.setLine(t),i.default.Marker.prototype.initialize.call(this,t[0],e)},_chunk:function(t){var e,n=t.length,r=[];for(e=1;e<n;e++){var o=t[e-1],s=t[e],a=o.distanceTo(s),u=this.options.distance/a,l=u*(s.lat-o.lat),h=u*(s.lng-o.lng);if(a>this.options.distance)for(;a>this.options.distance;)a=(o=new i.default.LatLng(o.lat+l,o.lng+h)).distanceTo(s),r.push(o);else r.push(o)}return r.push(t[n-1]),r},onAdd:function(t){i.default.Marker.prototype.onAdd.call(this,t),this.options.autoStart&&this.start()},animate:function(){var t=this,e=this._latlngs.length,n=this.options.interval;this._i<e&&this._i>0&&(n=this._latlngs[this._i-1].distanceTo(this._latlngs[this._i])/this.options.distance*this.options.interval),i.default.DomUtil.TRANSITION&&(this._icon&&(this._icon.style[i.default.DomUtil.TRANSITION]="all "+n+"ms linear"),this._shadow&&(this._shadow.style[i.default.DomUtil.TRANSITION]="all "+n+"ms linear")),this.setLatLng(this._latlngs[this._i]),this._i++,this._tid=setTimeout(function(){t._i===e?t.options.onEnd.apply(t,Array.prototype.slice.call(arguments)):t.animate()},n)},start:function(){this.animate()},stop:function(){this._tid&&clearTimeout(this._tid)},setLine:function(t){i.default.DomUtil.TRANSITION?this._latlngs=t:(this._latlngs=this._chunk(t),this.options.distance=10,this.options.interval=30),this._i=0}}),o=e.animatedMarkerLayer=function(t,e){return new r(t,e)};i.default.zondy.AnimatedMarkerLayer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionUtil=e.TimeDimensionPlayer=e.TimeDimensionLayerWMS=e.TimeDimensionLayerGeoJson=e.TimeDimensionLayer=e.TimeDimensionControl=e.TimeDimension=void 0;var i=n(390),r=n(392),o=n(101),s=n(393),a=n(394),u=n(196),l=n(100);e.TimeDimension=i.TimeDimension,e.TimeDimensionControl=r.TimeDimensionControl,e.TimeDimensionLayer=o.TimeDimensionLayer,e.TimeDimensionLayerGeoJson=s.TimeDimensionLayerGeoJson,e.TimeDimensionLayerWMS=a.TimeDimensionLayerWMS,e.TimeDimensionPlayer=u.TimeDimensionPlayer,e.TimeDimensionUtil=l.TimeDimensionUtil},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimension=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(100);var o=e.TimeDimension=(i.default.Layer||i.default.Class).extend({includes:i.default.Evented||i.default.Mixin.Events,initialize:function(t){i.default.setOptions(this,t),this._availableTimes=this._generateAvailableTimes(),this._currentTimeIndex=-1,this._loadingTimeIndex=-1,this._loadingTimeout=this.options.loadingTimeout||3e3,this._syncedLayers=[],this._availableTimes.length>0&&this.setCurrentTime(this.options.currentTime||this._getDefaultCurrentTime()),this.options.lowerLimitTime&&this.setLowerLimit(this.options.lowerLimitTime),this.options.upperLimitTime&&this.setUpperLimit(this.options.upperLimitTime)},getAvailableTimes:function(){return this._availableTimes},getCurrentTimeIndex:function(){return-1===this._currentTimeIndex?this._availableTimes.length-1:this._currentTimeIndex},getCurrentTime:function(){var t=-1;return(t=-1!==this._loadingTimeIndex?this._loadingTimeIndex:this.getCurrentTimeIndex())>=0?this._availableTimes[t]:null},isLoading:function(){return-1!==this._loadingTimeIndex},setCurrentTimeIndex:function(t){var e=this._upperLimit||this._availableTimes.length-1,n=this._lowerLimit||0;if(!((t=Math.min(Math.max(n,t),e))<0)){this._loadingTimeIndex=t;var i=this._availableTimes[t];this._checkSyncedLayersReady(this._availableTimes[this._loadingTimeIndex])?this._newTimeIndexLoaded():(this.fire("timeloading",{time:i}),setTimeout(function(t){t==this._loadingTimeIndex&&(console.log("Change time for timeout"),this._newTimeIndexLoaded())}.bind(this,t),this._loadingTimeout))}},_newTimeIndexLoaded:function(){if(-1!==this._loadingTimeIndex){var t=this._availableTimes[this._loadingTimeIndex];this._currentTimeIndex=this._loadingTimeIndex,this.fire("timeload",{time:t}),this._loadingTimeIndex=-1}},_checkSyncedLayersReady:function(t){for(var e=0,n=this._syncedLayers.length;e<n;e++)if(this._syncedLayers[e].isReady&&!this._syncedLayers[e].isReady(t))return!1;return!0},setCurrentTime:function(t){var e=this._seekNearestTimeIndex(t);this.setCurrentTimeIndex(e)},seekNearestTime:function(t){var e=this._seekNearestTimeIndex(t);return this._availableTimes[e]},nextTime:function(t,e){t||(t=1);var n=this._currentTimeIndex,i=this._upperLimit||this._availableTimes.length-1,r=this._lowerLimit||0;this._loadingTimeIndex>-1&&(n=this._loadingTimeIndex),(n+=t)>i&&(n=e?r:i),n<r&&(n=e?i:r),this.setCurrentTimeIndex(n)},prepareNextTimes:function(t,e,n){t||(t=1);var i=this._currentTimeIndex,r=i;this._loadingTimeIndex>-1&&(i=this._loadingTimeIndex);for(var o=0,s=this._syncedLayers.length;o<s;o++)this._syncedLayers[o].setMinimumForwardCache&&this._syncedLayers[o].setMinimumForwardCache(e);for(var a=e,u=this._upperLimit||this._availableTimes.length-1,l=this._lowerLimit||0;a>0;){if((i+=t)>u){if(!n)break;i=l}if(i<l){if(!n)break;i=u}if(r===i)break;this.fire("timeloading",{time:this._availableTimes[i]}),a--}},getNumberNextTimesReady:function(t,e,n){t||(t=1);var i=this._currentTimeIndex;this._loadingTimeIndex>-1&&(i=this._loadingTimeIndex);for(var r=e,o=0,s=this._upperLimit||this._availableTimes.length-1,a=this._lowerLimit||0;r>0;){if((i+=t)>s){if(!n){r=0,o=e;break}i=a}if(i<a){if(!n){r=0,o=e;break}i=s}var u=this._availableTimes[i];this._checkSyncedLayersReady(u)&&o++,r--}return o},previousTime:function(t,e){this.nextTime(-1*t,e)},registerSyncedLayer:function(t){this._syncedLayers.push(t),t.on("timeload",this._onSyncedLayerLoaded,this)},unregisterSyncedLayer:function(t){var e=this._syncedLayers.indexOf(t);-1!=e&&this._syncedLayers.splice(e,1),t.off("timeload",this._onSyncedLayerLoaded,this)},_onSyncedLayerLoaded:function(t){t.time==this._availableTimes[this._loadingTimeIndex]&&this._checkSyncedLayersReady(t.time)&&this._newTimeIndexLoaded()},_generateAvailableTimes:function(){if(this.options.times)return r.TimeDimensionUtil.parseTimesExpression(this.options.times);if(this.options.timeInterval){var t=r.TimeDimensionUtil.parseTimeInterval(this.options.timeInterval),e=this.options.period||"P1D",n=this.options.validTimeRange||void 0;return r.TimeDimensionUtil.explodeTimeRange(t[0],t[1],e,n)}return[]},_getDefaultCurrentTime:function(){var t=this._seekNearestTimeIndex((new Date).getTime());return this._availableTimes[t]},_seekNearestTimeIndex:function(t){for(var e=0,n=this._availableTimes.length;e<n&&!(t<this._availableTimes[e]);e++);return e>0&&e--,e},setAvailableTimes:function(t,e){var n=this.getCurrentTime(),i=this.getLowerLimit(),o=this.getUpperLimit();if("extremes"==e){var s=this.options.period||"P1D";this._availableTimes=r.TimeDimensionUtil.explodeTimeRange(new Date(t[0]),new Date(t[t.length-1]),s)}else{var a=r.TimeDimensionUtil.parseTimesExpression(t);if(0===this._availableTimes.length)this._availableTimes=a;else if("intersect"==e)this._availableTimes=r.TimeDimensionUtil.intersect_arrays(a,this._availableTimes);else if("union"==e)this._availableTimes=r.TimeDimensionUtil.union_arrays(a,this._availableTimes);else{if("replace"!=e)throw"Merge available times mode not implemented: "+e;this._availableTimes=a}}i&&this.setLowerLimit(i),o&&this.setUpperLimit(o),this.setCurrentTime(n),this.fire("availabletimeschanged",{availableTimes:this._availableTimes,currentTime:n}),console.log("available times changed")},getLowerLimit:function(){return this._availableTimes[this.getLowerLimitIndex()]},getUpperLimit:function(){return this._availableTimes[this.getUpperLimitIndex()]},setLowerLimit:function(t){var e=this._seekNearestTimeIndex(t);this.setLowerLimitIndex(e)},setUpperLimit:function(t){var e=this._seekNearestTimeIndex(t);this.setUpperLimitIndex(e)},setLowerLimitIndex:function(t){this._lowerLimit=Math.min(Math.max(t||0,0),this._upperLimit||this._availableTimes.length-1),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},setUpperLimitIndex:function(t){this._upperLimit=Math.max(Math.min(t,this._availableTimes.length-1),this._lowerLimit||0),this.fire("limitschanged",{lowerLimit:this._lowerLimit,upperLimit:this._upperLimit})},getLowerLimitIndex:function(){return this._lowerLimit},getUpperLimitIndex:function(){return this._upperLimit}});i.default.Map.addInitHook(function(){this.options.timeDimension&&(this.timeDimension=i.default.timeDimension(this.options.timeDimensionOptions||{}))});i.default.zondy.TimeDimension=function(t){return new o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=e.iso8601={Period:{}};function r(t,e){var n,i=e||!1,r=[2,3,4,5,7,8,9],o=[0,0,0,0,0,0,0],s=[0,12,4,7,24,60,60];if(!(t=t.toUpperCase()))return o;if("string"!=typeof t)throw new Error("Invalid iso8601 period string '"+t+"'");if(!(n=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(t)))throw new Error("String '"+t+"' is not a valid ISO8601 period.");for(var a=0;a<r.length;a++){var u=r[a];o[a]=n[u]?+n[u].replace(/[A-Za-z]+/g,""):0}if(i)for(a=o.length-1;a>0;a--)o[a]>=s[a]&&(o[a-1]=o[a-1]+Math.floor(o[a]/s[a]),o[a]=o[a]%s[a]);return o}i.version="0.2",i.Period.parse=function(t,e){return r(t,e)},i.Period.parseToTotalSeconds=function(t){for(var e=[31104e3,2592e3,604800,86400,3600,60,1],n=r(t),i=0,o=0;o<n.length;o++)i+=n[o]*e[o];return i},i.Period.isValid=function(t){try{return r(t),!0}catch(t){return!1}},i.Period.parseToString=function(t,e,n,i){var o=["","","","","","",""],s=r(t,i);e||(e=["year","month","week","day","hour","minute","second"]),n||(n=["years","months","weeks","days","hours","minutes","seconds"]);for(var a=0;a<s.length;a++)s[a]>0&&(1==s[a]?o[a]=s[a]+" "+e[a]:o[a]=s[a]+" "+n[a]);return o.join(" ").trim().replace(/[ ]{2,}/g," ")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timeDimension=e.TimeDimensionControl=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(196);i.default.UI=i.default.ui=i.default.UI||{},i.default.UI.Knob=i.default.Draggable.extend({options:{className:"knob",step:1,rangeMin:0,rangeMax:10},initialize:function(t,e){i.default.setOptions(this,e),this._element=i.default.DomUtil.create("div",this.options.className||"knob",t),i.default.Draggable.prototype.initialize.call(this,this._element,this._element),this._container=t,this.on("predrag",function(){this._newPos.y=0,this._newPos.x=this._adjustX(this._newPos.x)},this),this.on("dragstart",function(){i.default.DomUtil.addClass(t,"dragging")}),this.on("dragend",function(){i.default.DomUtil.removeClass(t,"dragging")}),i.default.DomEvent.on(this._element,"dblclick",function(t){this.fire("dblclick",t)},this),i.default.DomEvent.disableClickPropagation(this._element),this.enable()},_getProjectionCoef:function(){return(this.options.rangeMax-this.options.rangeMin)/(this._container.offsetWidth||this._container.style.width)},_update:function(){this.setPosition(i.default.DomUtil.getPosition(this._element).x)},_adjustX:function(t){var e=this._toValue(t)||this.getMinValue();return this._toX(this._adjustValue(e))},_adjustValue:function(t){return t=Math.max(this.getMinValue(),Math.min(this.getMaxValue(),t)),t-=this.options.rangeMin,t=Math.round(t/this.options.step)*this.options.step,t+=this.options.rangeMin,t=Math.round(100*t)/100},_toX:function(t){return(t-this.options.rangeMin)/this._getProjectionCoef()},_toValue:function(t){return t*this._getProjectionCoef()+this.options.rangeMin},getMinValue:function(){return this.options.minValue||this.options.rangeMin},getMaxValue:function(){return this.options.maxValue||this.options.rangeMax},setStep:function(t){this.options.step=t,this._update()},setPosition:function(t){i.default.DomUtil.setPosition(this._element,i.default.point(this._adjustX(t),0)),this.fire("positionchanged")},getPosition:function(){return i.default.DomUtil.getPosition(this._element).x},setValue:function(t){this.setPosition(this._toX(t))},getValue:function(){return this._adjustValue(this._toValue(this.getPosition()))}});var o=e.TimeDimensionControl=i.default.Control.extend({options:{styleNS:"leaflet-control-timecontrol",position:"bottomleft",title:"Time Control",backwardButton:!0,forwardButton:!0,playButton:!0,playReverseButton:!1,loopButton:!1,displayDate:!0,timeSlider:!0,timeSliderDragUpdate:!1,limitSliders:!1,limitMinimumRange:5,speedSlider:!0,minSpeed:.1,maxSpeed:10,speedStep:.1,timeSteps:1,autoPlay:!1,playerOptions:{transitionTime:1e3},timeZones:["UTC","Local"]},initialize:function(t){i.default.setOptions(t),i.default.Control.prototype.initialize.call(this,t),this._timeZoneIndex=0,this._timeDimension=this.options.timeDimension||null},onAdd:function(t){var e;return this._map=t,!this._timeDimension&&t.timeDimension&&(this._timeDimension=t.timeDimension),this._initPlayer(),e=i.default.DomUtil.create("div","leaflet-bar leaflet-bar-horizontal leaflet-bar-timecontrol"),this.options.backwardButton&&(this._buttonBackward=this._createButton("Backward",e)),this.options.playReverseButton&&(this._buttonPlayReversePause=this._createButton("Play Reverse",e)),this.options.playButton&&(this._buttonPlayPause=this._createButton("Play",e)),this.options.forwardButton&&(this._buttonForward=this._createButton("Forward",e)),this.options.loopButton&&(this._buttonLoop=this._createButton("Loop",e)),this.options.displayDate&&(this._displayDate=this._createButton("Date",e)),this.options.timeSlider&&(this._sliderTime=this._createSliderTime(this.options.styleNS+" timecontrol-slider timecontrol-dateslider",e)),this.options.speedSlider&&(this._sliderSpeed=this._createSliderSpeed(this.options.styleNS+" timecontrol-slider timecontrol-speed",e)),this._steps=this.options.timeSteps||1,this._timeDimension.on("timeload",this._update,this),this._timeDimension.on("timeload",this._onPlayerStateChange,this),this._timeDimension.on("timeloading",this._onTimeLoading,this),this._timeDimension.on("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this),i.default.DomEvent.disableClickPropagation(e),e},addTo:function(){return i.default.Control.prototype.addTo.apply(this,arguments),this._onPlayerStateChange(),this._onTimeLimitsChanged(),this._update(),this},onRemove:function(){this._player.off("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.off("waiting",this._onPlayerWaiting,this),this._timeDimension.off("timeload",this._update,this),this._timeDimension.off("timeload",this._onPlayerStateChange,this),this._timeDimension.off("timeloading",this._onTimeLoading,this),this._timeDimension.off("limitschanged availabletimeschanged",this._onTimeLimitsChanged,this)},_initPlayer:function(){this._player||(this.options.player?this._player=this.options.player:this._player=new r.TimeDimensionPlayer(this.options.playerOptions,this._timeDimension)),this.options.autoPlay&&this._player.start(this._steps),this._player.on("play stop running loopchange speedchange",this._onPlayerStateChange,this),this._player.on("waiting",this._onPlayerWaiting,this),this._onPlayerStateChange()},_onTimeLoading:function(t){t.time==this._timeDimension.getCurrentTime()&&this._displayDate&&i.default.DomUtil.addClass(this._displayDate,"loading")},_onTimeLimitsChanged:function(){var t=this._timeDimension.getLowerLimitIndex(),e=this._timeDimension.getUpperLimitIndex(),n=this._timeDimension.getAvailableTimes().length-1;this._limitKnobs&&(this._limitKnobs[0].options.rangeMax=n,this._limitKnobs[1].options.rangeMax=n,this._limitKnobs[0].setValue(t||0),this._limitKnobs[1].setValue(e||n)),this._sliderTime&&(this._sliderTime.options.rangeMax=n,this._sliderTime._update())},_onPlayerWaiting:function(t){this._buttonPlayPause&&this._player.getSteps()>0&&(i.default.DomUtil.addClass(this._buttonPlayPause,"loading"),this._buttonPlayPause.innerHTML=this._getDisplayLoadingText(t.available,t.buffer)),this._buttonPlayReversePause&&this._player.getSteps()<0&&(i.default.DomUtil.addClass(this._buttonPlayReversePause,"loading"),this._buttonPlayReversePause.innerHTML=this._getDisplayLoadingText(t.available,t.buffer))},_onPlayerStateChange:function(){if(this._buttonPlayPause&&(this._player.isPlaying()&&this._player.getSteps()>0?(i.default.DomUtil.addClass(this._buttonPlayPause,"pause"),i.default.DomUtil.removeClass(this._buttonPlayPause,"play")):(i.default.DomUtil.removeClass(this._buttonPlayPause,"pause"),i.default.DomUtil.addClass(this._buttonPlayPause,"play")),this._player.isWaiting()&&this._player.getSteps()>0?i.default.DomUtil.addClass(this._buttonPlayPause,"loading"):(this._buttonPlayPause.innerHTML="",i.default.DomUtil.removeClass(this._buttonPlayPause,"loading"))),this._buttonPlayReversePause&&(this._player.isPlaying()&&this._player.getSteps()<0?i.default.DomUtil.addClass(this._buttonPlayReversePause,"pause"):i.default.DomUtil.removeClass(this._buttonPlayReversePause,"pause"),this._player.isWaiting()&&this._player.getSteps()<0?i.default.DomUtil.addClass(this._buttonPlayReversePause,"loading"):(this._buttonPlayReversePause.innerHTML="",i.default.DomUtil.removeClass(this._buttonPlayReversePause,"loading"))),this._buttonLoop&&(this._player.isLooped()?i.default.DomUtil.addClass(this._buttonLoop,"looped"):i.default.DomUtil.removeClass(this._buttonLoop,"looped")),this._sliderSpeed&&!this._draggingSpeed){var t=this._player.getTransitionTime()||1e3;t=Math.round(1e4/t)/10,this._sliderSpeed.setValue(t)}},_update:function(){if(this._timeDimension)if(this._timeDimension.getCurrentTimeIndex()>=0){var t=new Date(this._timeDimension.getCurrentTime());this._displayDate&&(i.default.DomUtil.removeClass(this._displayDate,"loading"),this._displayDate.innerHTML=this._getDisplayDateFormat(t)),this._sliderTime&&!this._slidingTimeSlider&&this._sliderTime.setValue(this._timeDimension.getCurrentTimeIndex())}else this._displayDate&&(this._displayDate.innerHTML=this._getDisplayNoTimeError())},_createButton:function(t,e){var n=i.default.DomUtil.create("a",this.options.styleNS+" timecontrol-"+t.toLowerCase(),e);return n.href="#",n.title=t,i.default.DomEvent.addListener(n,"click",i.default.DomEvent.stopPropagation).addListener(n,"click",i.default.DomEvent.preventDefault).addListener(n,"click",this["_button"+t.replace(/ /i,"")+"Clicked"],this),n},_createSliderTime:function(t,e){var n,r,o,s,a;return n=i.default.DomUtil.create("div",t,e),r=i.default.DomUtil.create("div","slider",n),o=this._timeDimension.getAvailableTimes().length-1,this.options.limitSliders&&(a=this._limitKnobs=this._createLimitKnobs(r)),(s=new i.default.UI.Knob(r,{className:"knob main",rangeMin:0,rangeMax:o})).on("dragend",function(t){var e=t.target.getValue();this._sliderTimeValueChanged(e),this._slidingTimeSlider=!1},this),s.on("drag",function(t){this._slidingTimeSlider=!0;var e=this._timeDimension.getAvailableTimes()[t.target.getValue()];if(e){var n=new Date(e);this._displayDate&&(this._displayDate.innerHTML=this._getDisplayDateFormat(n)),this.options.timeSliderDragUpdate&&this._sliderTimeValueChanged(t.target.getValue())}},this),s.on("predrag",function(){var t,e;a&&(t=a[0].getPosition(),e=a[1].getPosition(),this._newPos.x<t&&(this._newPos.x=t),this._newPos.x>e&&(this._newPos.x=e))},s),i.default.DomEvent.on(r,"click",function(t){if(!i.default.DomUtil.hasClass(t.target,"knob")){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=i.default.DomEvent.getMousePosition(e,r).x;a?a[0].getPosition()<=n&&n<=a[1].getPosition()&&(s.setPosition(n),this._sliderTimeValueChanged(s.getValue())):(s.setPosition(n),this._sliderTimeValueChanged(s.getValue()))}},this),s.setPosition(0),s},_createLimitKnobs:function(t){i.default.DomUtil.addClass(t,"has-limits");var e=this._timeDimension.getAvailableTimes().length-1,n=i.default.DomUtil.create("div","range",t),r=new i.default.UI.Knob(t,{className:"knob lower",rangeMin:0,rangeMax:e}),o=new i.default.UI.Knob(t,{className:"knob upper",rangeMin:0,rangeMax:e});return i.default.DomUtil.setPosition(n,0),r.setPosition(0),o.setPosition(e),r.on("dragend",function(t){var e=t.target.getValue();this._sliderLimitsValueChanged(e,o.getValue())},this),o.on("dragend",function(t){var e=t.target.getValue();this._sliderLimitsValueChanged(r.getValue(),e)},this),r.on("drag positionchanged",function(){i.default.DomUtil.setPosition(n,i.default.point(r.getPosition(),0)),n.style.width=o.getPosition()-r.getPosition()+"px"},this),o.on("drag positionchanged",function(){n.style.width=o.getPosition()-r.getPosition()+"px"},this),o.on("predrag",function(){var t=r._toX(r.getValue()+this.options.limitMinimumRange);o._newPos.x<=t&&(o._newPos.x=t)},this),r.on("predrag",function(){var t=o._toX(o.getValue()-this.options.limitMinimumRange);r._newPos.x>=t&&(r._newPos.x=t)},this),r.on("dblclick",function(){this._timeDimension.setLowerLimitIndex(0)},this),o.on("dblclick",function(){this._timeDimension.setUpperLimitIndex(this._timeDimension.getAvailableTimes().length-1)},this),[r,o]},_createSliderSpeed:function(t,e){var n=i.default.DomUtil.create("div",t,e),r=i.default.DomUtil.create("span","speed",n),o=i.default.DomUtil.create("div","slider",n),s=Math.round(1e4/(this._player.getTransitionTime()||1e3))/10;r.innerHTML=this._getDisplaySpeed(s);var a=new i.default.UI.Knob(o,{step:this.options.speedStep,rangeMin:this.options.minSpeed,rangeMax:this.options.maxSpeed});return a.on("dragend",function(t){var e=t.target.getValue();this._draggingSpeed=!1,r.innerHTML=this._getDisplaySpeed(e),this._sliderSpeedValueChanged(e)},this),a.on("drag",function(t){this._draggingSpeed=!0,r.innerHTML=this._getDisplaySpeed(t.target.getValue())},this),a.on("positionchanged",function(t){r.innerHTML=this._getDisplaySpeed(t.target.getValue())},this),i.default.DomEvent.on(o,"click",function(t){if(t.target!==a._element){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=i.default.DomEvent.getMousePosition(e,o).x;a.setPosition(n),r.innerHTML=this._getDisplaySpeed(a.getValue()),this._sliderSpeedValueChanged(a.getValue())}},this),a},_buttonBackwardClicked:function(){this._timeDimension.previousTime(this._steps)},_buttonForwardClicked:function(){this._timeDimension.nextTime(this._steps)},_buttonLoopClicked:function(){this._player.setLooped(!this._player.isLooped())},_buttonPlayClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(this._steps)},_buttonPlayReverseClicked:function(){this._player.isPlaying()?this._player.stop():this._player.start(-1*this._steps)},_buttonDateClicked:function(){this._switchTimeZone()},_sliderTimeValueChanged:function(t){this._timeDimension.setCurrentTimeIndex(t)},_sliderLimitsValueChanged:function(t,e){this._timeDimension.setLowerLimitIndex(t),this._timeDimension.setUpperLimitIndex(e)},_sliderSpeedValueChanged:function(t){this._player.setTransitionTime(1e3/t)},_getCurrentTimeZone:function(){return this.options.timeZones[this._timeZoneIndex]},_switchTimeZone:function(){"utc"==this._getCurrentTimeZone().toLowerCase()&&i.default.DomUtil.removeClass(this._displayDate,"utc"),this._timeZoneIndex=(this._timeZoneIndex+1)%this.options.timeZones.length;var t=this._getCurrentTimeZone();"utc"==t.toLowerCase()?(i.default.DomUtil.addClass(this._displayDate,"utc"),this._displayDate.title="UTC Time"):"local"==t.toLowerCase()?this._displayDate.title="Local Time":this._displayDate.title=t,this._update()},_getDisplayDateFormat:function(t){var e=this._getCurrentTimeZone();return"utc"==e.toLowerCase()?t.toISOString():"local"==e.toLowerCase()?t.toLocaleString():t.toLocaleString([],{timeZone:e,timeZoneName:"short"})},_getDisplaySpeed:function(t){return t+"fps"},_getDisplayLoadingText:function(t,e){return"<span>"+Math.floor(t/e*100)+"%</span>"},_getDisplayNoTimeError:function(){return"Time not available"}});i.default.Map.addInitHook(function(){this.options.timeDimensionControl&&(this.timeDimensionControl=i.default.control.timeDimension(this.options.timeDimensionControlOptions||{}),this.addControl(this.timeDimensionControl))});var s=e.timeDimension=function(t){return new o(t)};i.default.zondy.TimeDimensionControl=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayerGeoJson=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(101),o=n(100);var s=e.TimeDimensionLayerGeoJson=r.TimeDimensionLayer.extend({initialize:function(t,e){r.TimeDimensionLayer.prototype.initialize.call(this,t,e),this._updateTimeDimension=this.options.updateTimeDimension||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"extremes",this._duration=this.options.duration||null,this._addlastPoint=this.options.addlastPoint||!1,this._waitForReady=this.options.waitForReady||!1,this._updateCurrentTime=this.options.updateCurrentTime||this._updateTimeDimension,this._availableTimes=[],this._loaded=!1,0==this._baseLayer.getLayers().length?this._waitForReady?this._baseLayer.on("ready",this._onReadyBaseLayer,this):this._loaded=!0:(this._loaded=!0,this._setAvailableTimes()),this._baseLayer.on("layeradd",function(){this._loaded&&this._setAvailableTimes()}.bind(this))},onAdd:function(t){r.TimeDimensionLayer.prototype.onAdd.call(this,t),this._loaded&&this._setAvailableTimes()},eachLayer:function(t,e){return this._currentLayer&&t.call(e,this._currentLayer),r.TimeDimensionLayer.prototype.eachLayer.call(this,t,e)},isReady:function(t){return this._loaded},_update:function(){if(this._map&&this._loaded){this._timeDimension.getCurrentTime();var t=this._timeDimension.getCurrentTime(),e=0;if(this._duration){var n=new Date(t);o.TimeDimensionUtil.subtractTimeDuration(n,this._duration,!0),e=n.getTime()}for(var r=i.default.geoJson(null,this._baseLayer.options),s=this._baseLayer.getLayers(),a=0,u=s.length;a<u;a++){var l=this._getFeatureBetweenDates(s[a].feature,e,t);if(l&&(r.addData(l),this._addlastPoint&&"LineString"==l.geometry.type&&l.geometry.coordinates.length>0)){var h=l.properties;h.last=!0,r.addData({type:"Feature",properties:h,geometry:{type:"Point",coordinates:l.geometry.coordinates[l.geometry.coordinates.length-1]}})}}this._currentLayer&&this._map.removeLayer(this._currentLayer),r.getLayers().length&&(r.addTo(this._map),this._currentLayer=r)}},_setAvailableTimes:function(){for(var t=[],e=this._baseLayer.getLayers(),n=0,i=e.length;n<i;n++)if(e[n].feature)for(var r=this._getFeatureTimes(e[n].feature),s=0,a=r.length;s<a;s++)t.push(r[s]);this._availableTimes=o.TimeDimensionUtil.sort_and_deduplicate(t),this._updateCurrentTime=this._updateCurrentTime||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length,this._timeDimension&&(this._updateTimeDimension||0==this._timeDimension.getAvailableTimes().length)&&this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode),this._updateCurrentTime&&this._timeDimension&&this._availableTimes.length&&this._timeDimension.setCurrentTime(this._availableTimes[0])},_getFeatureTimes:function(t){if(!t.featureTimes){t.properties?t.properties.hasOwnProperty("coordTimes")?t.featureTimes=t.properties.coordTimes:t.properties.hasOwnProperty("times")?t.featureTimes=t.properties.times:t.properties.hasOwnProperty("linestringTimestamps")?t.featureTimes=t.properties.linestringTimestamps:t.properties.hasOwnProperty("time")?t.featureTimes=[t.properties.time]:t.featureTimes=[]:t.featureTimes=[];for(var e=0,n=t.featureTimes.length;e<n;e++){var i=t.featureTimes[e];("string"==typeof i||i instanceof String)&&(i=Date.parse(i.trim()),t.featureTimes[e]=i)}}return t.featureTimes},_getFeatureBetweenDates:function(t,e,n){var i=this._getFeatureTimes(t);if(0==i.length)return t;var r=null,o=null,s=i.length;if(i[0]>n||i[s-1]<e)return null;if(i[s-1]>e)for(var a=0;a<s;a++)if(null===r&&i[a]>e&&(r=a),i[a]>n){o=a;break}null===r&&(r=0),null===o&&(o=s);var u=[];return u=t.geometry.coordinates[0].length?t.geometry.coordinates.slice(r,o):t.geometry.coordinates,{type:"Feature",properties:t.properties,geometry:{type:t.geometry.type,coordinates:u}}},_onReadyBaseLayer:function(){this._loaded=!0,this._setAvailableTimes(),this._update()}});i.default.zondy.TimeDimensionLayerGeoJson=function(t,e){return new s(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeDimensionLayerWMS=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(2)),r=n(101);var o=e.TimeDimensionLayerWMS=r.TimeDimensionLayer.extend({initialize:function(t,e){i.default.TimeDimension.Layer.prototype.initialize.call(this,t,e),this._timeCacheBackward=this.options.cacheBackward||this.options.cache||0,this._timeCacheForward=this.options.cacheForward||this.options.cache||0,this._wmsVersion=this.options.wmsVersion||this.options.version||t.options.version||"1.1.1",this._getCapabilitiesParams=this.options.getCapabilitiesParams||{},this._getCapabilitiesAlternateUrl=this.options.getCapabilitiesUrl||null,this._getCapabilitiesAlternateLayerName=this.options.getCapabilitiesLayerName||null,this._proxy=this.options.proxy||null,this._updateTimeDimension=this.options.updateTimeDimension||!1,this._setDefaultTime=this.options.setDefaultTime||!1,this._updateTimeDimensionMode=this.options.updateTimeDimensionMode||"intersect",this._period=this.options.period||null,this._layers={},this._defaultTime=0,this._availableTimes=[],this._capabilitiesRequested=!1,(this._updateTimeDimension||this.options.requestTimeFromCapabilities)&&this._requestTimeDimensionFromCapabilities(),this._baseLayer.on("load",function(){this._baseLayer.setLoaded(!0),this.fire("timeload",{time:this._defaultTime})}.bind(this))},getEvents:function(){var t=i.default.bind(this._unvalidateCache,this);return{moveend:t,zoomend:t}},eachLayer:function(t,e){for(var n in this._layers)this._layers.hasOwnProperty(n)&&t.call(e,this._layers[n]);return i.default.TimeDimension.Layer.prototype.eachLayer.call(this,t,e)},_onNewTimeLoading:function(t){var e=this._getLayerForTime(t.time);this._map.hasLayer(e)||this._map.addLayer(e)},isReady:function(t){var e=this._getLayerForTime(t);return!(!this.options.bounds||!this._map||this._map.getBounds().contains(this.options.bounds))||e.isLoaded()},onAdd:function(t){i.default.TimeDimension.Layer.prototype.onAdd.call(this,t),0==this._availableTimes.length?this._requestTimeDimensionFromCapabilities():this._updateTimeDimensionAvailableTimes()},_update:function(){if(this._map){var t=this._timeDimension.getCurrentTime(),e=this._getLayerForTime(t);null==this._currentLayer&&(this._currentLayer=e),this._map.hasLayer(e)?this._showLayer(e,t):this._map.addLayer(e)}},setOpacity:function(t){for(var e in i.default.TimeDimension.Layer.prototype.setOpacity.apply(this,arguments),this._layers)this._layers.hasOwnProperty(e)&&this._layers[e].setOpacity&&this._layers[e].setOpacity(t)},setZIndex:function(t){for(var e in i.default.TimeDimension.Layer.prototype.setZIndex.apply(this,arguments),this._layers)this._layers.hasOwnProperty(e)&&this._layers[e].setZIndex&&this._layers[e].setZIndex(t)},setParams:function(t,e){for(var n in i.default.extend(this._baseLayer.options,t),this._baseLayer.setParams&&this._baseLayer.setParams(t,e),this._layers)this._layers.hasOwnProperty(n)&&this._layers[n].setParams&&(this._layers[n].setLoaded(!1),this._layers[n].setParams(t,e));return this},_unvalidateCache:function(){var t=this._timeDimension.getCurrentTime();for(var e in this._layers)t!=e&&this._layers.hasOwnProperty(e)&&(this._layers[e].setLoaded(!1),this._layers[e].redraw())},_evictCachedTimes:function(t,e){var n,i=this._getLoadedTimes(),r=String(this._currentTime),o=i.indexOf(r),s=[];e>-1&&((n=o-e)>0&&(s=i.splice(0,n),this._removeLayers(s)));t>-1&&(o=i.indexOf(r),(n=i.length-o-t-1)>0&&(s=i.splice(o+t+1,n),this._removeLayers(s)))},_showLayer:function(t,e){this._currentLayer&&this._currentLayer!==t&&this._currentLayer.hide(),t.show(),this._currentLayer&&this._currentLayer===t||(this._currentLayer=t,this._currentTime=e,console.log("Show layer "+t.wmsParams.layers+" with time: "+new Date(e).toISOString()),this._evictCachedTimes(this._timeCacheForward,this._timeCacheBackward))},_getLayerForTime:function(t){if(0==t||t==this._defaultTime||null==t)return this._baseLayer;if(this._layers.hasOwnProperty(t))return this._layers[t];var e=this._getNearestTime(t);if(this._layers.hasOwnProperty(e))return this._layers[e];var n=this._createLayerForTime(e);return this._layers[t]=n,n.on("load",function(t,e){t.setLoaded(!0),this._layers[e]||(this._layers[e]=t),this._timeDimension&&e==this._timeDimension.getCurrentTime()&&!this._timeDimension.isLoading()&&this._showLayer(t,e),this.fire("timeload",{time:e})}.bind(this,n,t)),n.onAdd=function(t){Object.getPrototypeOf(this).onAdd.call(this,t),this.hide()}.bind(n),n},_createLayerForTime:function(t){var e=this._baseLayer.options;return e.time=new Date(t).toISOString(),new this._baseLayer.constructor(this._baseLayer.getURL(),e)},_getLoadedTimes:function(){var t=[];for(var e in this._layers)this._layers.hasOwnProperty(e)&&t.push(e);return t.sort(function(t,e){return t-e})},_removeLayers:function(t){for(var e=0,n=t.length;e<n;e++)this._map&&this._map.removeLayer(this._layers[t[e]]),delete this._layers[t[e]]},setMinimumForwardCache:function(t){t>this._timeCacheForward&&(this._timeCacheForward=t)},_requestTimeDimensionFromCapabilities:function(){if(!this._capabilitiesRequested){this._capabilitiesRequested=!0;var t=this._getCapabilitiesUrl();this._proxy&&(t=this._proxy+"?url="+encodeURIComponent(t));var e=new XMLHttpRequest;e.addEventListener("load",function(t){var e=t.currentTarget.responseXML;null!==e&&(this._defaultTime=Date.parse(this._getDefaultTimeFromCapabilities(e)),this._setDefaultTime=this._setDefaultTime||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length,this.setAvailableTimes(this._parseTimeDimensionFromCapabilities(e)),this._setDefaultTime&&this._timeDimension&&this._timeDimension.setCurrentTime(this._defaultTime))}.bind(this)),e.overrideMimeType("application/xml"),e.open("GET",t),e.send()}},_getCapabilitiesUrl:function(){var t=this._baseLayer.getURL();this._getCapabilitiesAlternateUrl&&(t=this._getCapabilitiesAlternateUrl);var e=i.default.extend({},this._getCapabilitiesParams,{request:"GetCapabilities",service:"WMS",version:this._wmsVersion});return t+=i.default.Util.getParamString(e,t,e.uppercase)},_parseTimeDimensionFromCapabilities:function(t){var e=t.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,i=null,r=null;return e.forEach(function(t){t.querySelector("Name").innerHTML===n&&(i=t)}),i&&((r=this._getTimesFromLayerCapabilities(i))||(r=this._getTimesFromLayerCapabilities(i.parentNode))),r},_getTimesFromLayerCapabilities:function(t){for(var e=null,n=t.children,i=0,r=n.length;i<r;i++)if(("Extent"===n[i].nodeName||"Dimension"===n[i].nodeName)&&"time"===n[i].getAttribute("name")&&n[i].textContent.length){e=n[i].textContent.trim();break}return e},_getDefaultTimeFromCapabilities:function(t){var e=t.querySelectorAll('Layer[queryable="1"]'),n=this._baseLayer.wmsParams.layers,i=null;e.forEach(function(t){t.querySelector("Name").innerHTML===n&&(i=t)});var r=0;return i&&0==(r=this._getDefaultTimeFromLayerCapabilities(i))&&(r=this._getDefaultTimeFromLayerCapabilities(i.parentNode)),r},_getDefaultTimeFromLayerCapabilities:function(t){for(var e=0,n=t.children,i=0,r=n.length;i<r;i++)if(("Extent"===n[i].nodeName||"Dimension"===n[i].nodeName)&&"time"===n[i].getAttribute("name")&&n[i].attributes.default&&n[i].attributes.default.textContent.length){e=n[i].attributes.default.textContent.trim();break}return e},setAvailableTimes:function(t){this._availableTimes=i.default.TimeDimension.Util.parseTimesExpression(t,this._period),this._updateTimeDimensionAvailableTimes()},_updateTimeDimensionAvailableTimes:function(){(this._timeDimension&&this._updateTimeDimension||this._timeDimension&&0==this._timeDimension.getAvailableTimes().length)&&(this._timeDimension.setAvailableTimes(this._availableTimes,this._updateTimeDimensionMode),this._setDefaultTime&&this._defaultTime>0&&this._timeDimension.setCurrentTime(this._defaultTime))},_getNearestTime:function(t){if(this._layers.hasOwnProperty(t))return t;if(0==this._availableTimes.length)return t;for(var e=0,n=this._availableTimes.length;e<n&&!(t<this._availableTimes[e]);e++);return e>0&&e--,t!=this._availableTimes[e]&&(console.log("Search layer time: "+new Date(t).toISOString()),console.log("Return layer time: "+new Date(this._availableTimes[e]).toISOString())),this._availableTimes[e]}});i.default.NonTiledLayer||(i.default.NonTiledLayer=(i.default.Layer||i.default.Class).extend({})),i.default.NonTiledLayer.include({_visible:!0,_loaded:!1,_originalUpdate:i.default.NonTiledLayer.prototype._update,_originalOnRemove:i.default.NonTiledLayer.prototype.onRemove,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},onRemove:function(t){this._loaded=!1,this._originalOnRemove(t)},setLoaded:function(t){this._loaded=t},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._div.style.display="none"},show:function(){this._visible=!0,this._div.style.display="block"},getURL:function(){return this._wmsUrl}}),i.default.TileLayer.include({_visible:!0,_loaded:!1,_originalUpdate:i.default.TileLayer.prototype._update,_update:function(){!this._visible&&this._loaded||this._originalUpdate()},setLoaded:function(t){this._loaded=t},isLoaded:function(){return this._loaded},hide:function(){this._visible=!1,this._container&&(this._container.style.display="none")},show:function(){this._visible=!0,this._container&&(this._container.style.display="block")},getURL:function(){return this._url}});i.default.zondy.TimeDimensionLayerWMS=function(t,e){return new o(t,e)}}]);